webpackJsonp([1],Array(24).concat([function(t,e,a){var i=a(13),r=a(89),n=a(87),o=a(11),s=a(36),l=a(65),h={},u={},e=t.exports=function(t,e,a,C,c){var f,d,D,m,p=c?function(){return t}:l(t),v=i(a,C,e?2:1),g=0;if("function"!=typeof p)throw TypeError(t+" is not iterable!");if(n(p)){for(f=s(t.length);f>g;g++)if((m=e?v(o(d=t[g])[0],d[1]):v(t[g]))===h||m===u)return m}else for(D=p.call(t);!(d=D.next()).done;)if((m=r(D,v,d.value,e))===h||m===u)return m};e.BREAK=h,e.RETURN=u},,,,,,,function(t,e,a){(function(e){function a(t,e){var a=t[1]||"",r=t[3];if(!r)return a;if(e){var n=i(r);return[a].concat(r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"})).concat([n]).join("\n")}return[a].join("\n")}function i(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+new e(JSON.stringify(t)).toString("base64")+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=a(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,a){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var n=this[r][0];"number"==typeof n&&(i[n]=!0)}for(r=0;r<t.length;r++){var o=t[r];"number"==typeof o[0]&&i[o[0]]||(a&&!o[2]?o[2]=a:a&&(o[2]="("+o[2]+") and ("+a+")"),e.push(o))}},e}}).call(e,a(158).Buffer)},function(t,e,a){t.exports={default:a(163),__esModule:!0}},,,,,,,,,,function(t,e){function a(t,e){for(var a=0;a<t.length;a++){var i=t[a],r=c[i.id];if(r){r.refs++;for(var n=0;n<r.parts.length;n++)r.parts[n](i.parts[n]);for(;n<i.parts.length;n++)r.parts.push(l(i.parts[n],e))}else{for(var o=[],n=0;n<i.parts.length;n++)o.push(l(i.parts[n],e));c[i.id]={id:i.id,refs:1,parts:o}}}}function i(t){for(var e=[],a={},i=0;i<t.length;i++){var r=t[i],n=r[0],o=r[1],s=r[2],l=r[3],h={css:o,media:s,sourceMap:l};a[n]?a[n].parts.push(h):e.push(a[n]={id:n,parts:[h]})}return e}function r(t,e){var a=D(),i=v[v.length-1];if("top"===t.insertAt)i?i.nextSibling?a.insertBefore(e,i.nextSibling):a.appendChild(e):a.insertBefore(e,a.firstChild),v.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");a.appendChild(e)}}function n(t){t.parentNode.removeChild(t);var e=v.indexOf(t);e>=0&&v.splice(e,1)}function o(t){var e=document.createElement("style");return e.type="text/css",r(t,e),e}function s(t){var e=document.createElement("link");return e.rel="stylesheet",r(t,e),e}function l(t,e){var a,i,r;if(e.singleton){var l=p++;a=m||(m=o(e)),i=h.bind(null,a,l,!1),r=h.bind(null,a,l,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=s(e),i=C.bind(null,a),r=function(){n(a),a.href&&URL.revokeObjectURL(a.href)}):(a=o(e),i=u.bind(null,a),r=function(){n(a)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}function h(t,e,a,i){var r=a?"":i.css;if(t.styleSheet)t.styleSheet.cssText=g(e,r);else{var n=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(n,o[e]):t.appendChild(n)}}function u(t,e){var a=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}function C(t,e){var a=e.css,i=e.sourceMap;i&&(a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([a],{type:"text/css"}),n=t.href;t.href=URL.createObjectURL(r),n&&URL.revokeObjectURL(n)}var c={},f=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}},d=f(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),D=f(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,p=0,v=[];t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},void 0===e.singleton&&(e.singleton=d()),void 0===e.insertAt&&(e.insertAt="bottom");var r=i(t);return a(r,e),function(t){for(var n=[],o=0;o<r.length;o++){var s=r[o],l=c[s.id];l.refs--,n.push(l)}if(t){a(i(t),e)}for(var o=0;o<n.length;o++){var l=n[o];if(0===l.refs){for(var h=0;h<l.parts.length;h++)l.parts[h]();delete c[l.id]}}}};var g=function(){var t=[];return function(e,a){return t[e]=a,t.filter(Boolean).join("\n")}}()},,,function(t,e,a){t.exports={default:a(161),__esModule:!0}},function(t,e,a){"use strict";e.__esModule=!0;var i=a(152),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t,e,a){return e in t?(0,r.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},function(t,e){t.exports=function(t,e,a,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(a+": incorrect invocation!");return t}},function(t,e,a){var i=a(23),r=a(6)("toStringTag"),n="Arguments"==i(function(){return arguments}()),o=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,a,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(a=o(e=Object(t),r))?a:n?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},,,,,,,function(t,e,a){"use strict";function i(t){var e,a;this.promise=new t(function(t,i){if(void 0!==e||void 0!==a)throw TypeError("Bad Promise constructor");e=t,a=i}),this.resolve=r(e),this.reject=r(a)}var r=a(22);t.exports.f=function(t){return new i(t)}},,function(t,e,a){var i=a(14);t.exports=function(t,e,a){for(var r in e)a&&t[r]?t[r]=e[r]:i(t,r,e[r]);return t}},,,,,function(t,e,a){var i=a(10);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},,,function(t,e,a){var i=a(48),r=a(6)("iterator"),n=a(25);t.exports=a(1).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||n[i(t)]}},,,,,,,,,,function(t,e,a){var i,r;/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */
!function(e,a){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?a(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return a(t)}:a(e)}("undefined"!=typeof window?window:this,function(a,n){"use strict";function o(t,e,a){a=a||bt;var i,r,n=a.createElement("script");if(n.text=t,e)for(i in yt)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&n.setAttribute(i,r);a.head.appendChild(n).parentNode.removeChild(n)}function s(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?mt[pt.call(t)]||"object":typeof t}function l(t){var e=!!t&&"length"in t&&t.length,a=s(t);return!St(t)&&!xt(t)&&("array"===a||0===e||"number"==typeof e&&e>0&&e-1 in t)}function h(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function u(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}function C(t,e,a){return St(e)?wt.grep(t,function(t,i){return!!e.call(t,i,t)!==a}):e.nodeType?wt.grep(t,function(t){return t===e!==a}):"string"!=typeof e?wt.grep(t,function(t){return Dt.call(e,t)>-1!==a}):wt.filter(e,t,a)}function c(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function f(t){var e={};return wt.each(t.match(Wt)||[],function(t,a){e[a]=!0}),e}function d(t){return t}function D(t){throw t}function m(t,e,a,i){var r;try{t&&St(r=t.promise)?r.call(t).done(e).fail(a):t&&St(r=t.then)?r.call(t,e,a):e.apply(void 0,[t].slice(i))}catch(t){a.apply(void 0,[t])}}function p(){bt.removeEventListener("DOMContentLoaded",p),a.removeEventListener("load",p),wt.ready()}function v(t,e){return e.toUpperCase()}function g(t){return t.replace(Jt,"ms-").replace(qt,v)}function T(){this.expando=wt.expando+T.uid++}function I(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:$t.test(t)?JSON.parse(t):t)}function S(t,e,a){var i;if(void 0===a&&1===t.nodeType)if(i="data-"+e.replace(te,"-$&").toLowerCase(),"string"==typeof(a=t.getAttribute(i))){try{a=I(a)}catch(t){}Qt.set(t,e,a)}else a=void 0;return a}function x(t,e,a,i){var r,n,o=20,s=i?function(){return i.cur()}:function(){return wt.css(t,e,"")},l=s(),h=a&&a[3]||(wt.cssNumber[e]?"":"px"),u=t.nodeType&&(wt.cssNumber[e]||"px"!==h&&+l)&&ae.exec(wt.css(t,e));if(u&&u[3]!==h){for(l/=2,h=h||u[3],u=+l||1;o--;)wt.style(t,e,u+h),(1-n)*(1-(n=s()/l||.5))<=0&&(o=0),u/=n;u*=2,wt.style(t,e,u+h),a=a||[]}return a&&(u=+u||+l||0,r=a[1]?u+(a[1]+1)*a[2]:+a[2],i&&(i.unit=h,i.start=u,i.end=r)),r}function b(t){var e,a=t.ownerDocument,i=t.nodeName,r=le[i];return r||(e=a.body.appendChild(a.createElement(i)),r=wt.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),le[i]=r,r)}function y(t,e){for(var a,i,r=[],n=0,o=t.length;n<o;n++)i=t[n],i.style&&(a=i.style.display,e?("none"===a&&(r[n]=jt.get(i,"display")||null,r[n]||(i.style.display="")),""===i.style.display&&se(i)&&(r[n]=b(i))):"none"!==a&&(r[n]="none",jt.set(i,"display",a)));for(n=0;n<o;n++)null!=r[n]&&(t[n].style.display=r[n]);return t}function E(t,e){var a;return a=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&h(t,e)?wt.merge([t],a):a}function w(t,e){for(var a=0,i=t.length;a<i;a++)jt.set(t[a],"globalEval",!e||jt.get(e[a],"globalEval"))}function F(t,e,a,i,r){for(var n,o,l,h,u,C,c=e.createDocumentFragment(),f=[],d=0,D=t.length;d<D;d++)if((n=t[d])||0===n)if("object"===s(n))wt.merge(f,n.nodeType?[n]:n);else if(fe.test(n)){for(o=o||c.appendChild(e.createElement("div")),l=(ue.exec(n)||["",""])[1].toLowerCase(),h=ce[l]||ce._default,o.innerHTML=h[1]+wt.htmlPrefilter(n)+h[2],C=h[0];C--;)o=o.lastChild;wt.merge(f,o.childNodes),o=c.firstChild,o.textContent=""}else f.push(e.createTextNode(n));for(c.textContent="",d=0;n=f[d++];)if(i&&wt.inArray(n,i)>-1)r&&r.push(n);else if(u=ne(n),o=E(c.appendChild(n),"script"),u&&w(o),a)for(C=0;n=o[C++];)Ce.test(n.type||"")&&a.push(n);return c}function M(){return!0}function L(){return!1}function N(t,e,a,i,r,n){var o,s;if("object"==typeof e){"string"!=typeof a&&(i=i||a,a=void 0);for(s in e)N(t,s,a,i,e[s],n);return t}if(null==i&&null==r?(r=a,i=a=void 0):null==r&&("string"==typeof a?(r=i,i=void 0):(r=i,i=a,a=void 0)),!1===r)r=L;else if(!r)return t;return 1===n&&(o=r,r=function(t){return wt().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=wt.guid++)),t.each(function(){wt.event.add(this,e,r,i,a)})}function R(t,e,a){if(!a)return void(void 0===jt.get(t,e)&&wt.event.add(t,e,M));jt.set(t,e,!1),wt.event.add(t,e,{namespace:!1,handler:function(t){var a,i=jt.get(this,e);if(1&t.isTrigger&&this[e]){if(i)(wt.event.special[e]||{}).delegateType&&t.stopPropagation();else if(i=ct.call(arguments),jt.set(this,e,i),this[e](),a=jt.get(this,e),jt.set(this,e,!1),i!==a)return t.stopImmediatePropagation(),t.preventDefault(),a}else i&&(jt.set(this,e,wt.event.trigger(i[0],i.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=M)}})}function A(t,e){return h(t,"table")&&h(11!==e.nodeType?e:e.firstChild,"tr")?wt(t).children("tbody")[0]||t:t}function O(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function P(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function B(t,e){var a,i,r,n,o,s,l;if(1===e.nodeType){if(jt.hasData(t)&&(n=jt.get(t),l=n.events)){jt.remove(e,"handle events");for(r in l)for(a=0,i=l[r].length;a<i;a++)wt.event.add(e,r,l[r][a])}Qt.hasData(t)&&(o=Qt.access(t),s=wt.extend({},o),Qt.set(e,s))}}function _(t,e){var a=e.nodeName.toLowerCase();"input"===a&&he.test(t.type)?e.checked=t.checked:"input"!==a&&"textarea"!==a||(e.defaultValue=t.defaultValue)}function G(t,e,a,i){e=ft(e);var r,n,s,l,h,u,C=0,c=t.length,f=c-1,d=e[0],D=St(d);if(D||c>1&&"string"==typeof d&&!It.checkClone&&me.test(d))return t.each(function(r){var n=t.eq(r);D&&(e[0]=d.call(this,r,n.html())),G(n,e,a,i)});if(c&&(r=F(e,t[0].ownerDocument,!1,t,i),n=r.firstChild,1===r.childNodes.length&&(r=n),n||i)){for(s=wt.map(E(r,"script"),O),l=s.length;C<c;C++)h=r,C!==f&&(h=wt.clone(h,!0,!0),l&&wt.merge(s,E(h,"script"))),a.call(t[C],h,C);if(l)for(u=s[s.length-1].ownerDocument,wt.map(s,P),C=0;C<l;C++)h=s[C],Ce.test(h.type||"")&&!jt.access(h,"globalEval")&&wt.contains(u,h)&&(h.src&&"module"!==(h.type||"").toLowerCase()?wt._evalUrl&&!h.noModule&&wt._evalUrl(h.src,{nonce:h.nonce||h.getAttribute("nonce")},u):o(h.textContent.replace(pe,""),h,u))}return t}function k(t,e,a){for(var i,r=e?wt.filter(e,t):t,n=0;null!=(i=r[n]);n++)a||1!==i.nodeType||wt.cleanData(E(i)),i.parentNode&&(a&&ne(i)&&w(E(i,"script")),i.parentNode.removeChild(i));return t}function V(t,e,a){var i,r,n,o,s=ge.test(e),l=t.style;return a=a||Te(t),a&&(o=a.getPropertyValue(e)||a[e],s&&o&&(o=o.replace(Rt,"$1")||void 0),""!==o||ne(t)||(o=wt.style(t,e)),!It.pixelBoxStyles()&&ve.test(o)&&Se.test(e)&&(i=l.width,r=l.minWidth,n=l.maxWidth,l.minWidth=l.maxWidth=l.width=o,o=a.width,l.width=i,l.minWidth=r,l.maxWidth=n)),void 0!==o?o+"":o}function H(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function Y(t){for(var e=t[0].toUpperCase()+t.slice(1),a=xe.length;a--;)if((t=xe[a]+e)in be)return t}function X(t){var e=wt.cssProps[t]||ye[t];return e||(t in be?t:ye[t]=Y(t)||t)}function W(t,e,a){var i=ae.exec(e);return i?Math.max(0,i[2]-(a||0))+(i[3]||"px"):e}function U(t,e,a,i,r,n){var o="width"===e?1:0,s=0,l=0,h=0;if(a===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===a&&(h+=wt.css(t,a+ie[o],!0,r)),i?("content"===a&&(l-=wt.css(t,"padding"+ie[o],!0,r)),"margin"!==a&&(l-=wt.css(t,"border"+ie[o]+"Width",!0,r))):(l+=wt.css(t,"padding"+ie[o],!0,r),"padding"!==a?l+=wt.css(t,"border"+ie[o]+"Width",!0,r):s+=wt.css(t,"border"+ie[o]+"Width",!0,r));return!i&&n>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-n-l-s-.5))||0),l+h}function K(t,e,a){var i=Te(t),r=!It.boxSizingReliable()||a,n=r&&"border-box"===wt.css(t,"boxSizing",!1,i),o=n,s=V(t,e,i),l="offset"+e[0].toUpperCase()+e.slice(1);if(ve.test(s)){if(!a)return s;s="auto"}return(!It.boxSizingReliable()&&n||!It.reliableTrDimensions()&&h(t,"tr")||"auto"===s||!parseFloat(s)&&"inline"===wt.css(t,"display",!1,i))&&t.getClientRects().length&&(n="border-box"===wt.css(t,"boxSizing",!1,i),(o=l in t)&&(s=t[l])),(s=parseFloat(s)||0)+U(t,e,a||(n?"border":"content"),o,i,s)+"px"}function z(t,e,a,i,r){return new z.prototype.init(t,e,a,i,r)}function J(){Le&&(!1===bt.hidden&&a.requestAnimationFrame?a.requestAnimationFrame(J):a.setTimeout(J,wt.fx.interval),wt.fx.tick())}function q(){return a.setTimeout(function(){Me=void 0}),Me=Date.now()}function Z(t,e){var a,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)a=ie[i],r["margin"+a]=r["padding"+a]=t;return e&&(r.opacity=r.width=t),r}function j(t,e,a){for(var i,r=(tt.tweeners[e]||[]).concat(tt.tweeners["*"]),n=0,o=r.length;n<o;n++)if(i=r[n].call(a,e,t))return i}function Q(t,e,a){var i,r,n,o,s,l,h,u,C="width"in e||"height"in e,c=this,f={},d=t.style,D=t.nodeType&&se(t),m=jt.get(t,"fxshow");a.queue||(o=wt._queueHooks(t,"fx"),null==o.unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,c.always(function(){c.always(function(){o.unqueued--,wt.queue(t,"fx").length||o.empty.fire()})}));for(i in e)if(r=e[i],Ne.test(r)){if(delete e[i],n=n||"toggle"===r,r===(D?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;D=!0}f[i]=m&&m[i]||wt.style(t,i)}if((l=!wt.isEmptyObject(e))||!wt.isEmptyObject(f)){C&&1===t.nodeType&&(a.overflow=[d.overflow,d.overflowX,d.overflowY],h=m&&m.display,null==h&&(h=jt.get(t,"display")),u=wt.css(t,"display"),"none"===u&&(h?u=h:(y([t],!0),h=t.style.display||h,u=wt.css(t,"display"),y([t]))),("inline"===u||"inline-block"===u&&null!=h)&&"none"===wt.css(t,"float")&&(l||(c.done(function(){d.display=h}),null==h&&(u=d.display,h="none"===u?"":u)),d.display="inline-block")),a.overflow&&(d.overflow="hidden",c.always(function(){d.overflow=a.overflow[0],d.overflowX=a.overflow[1],d.overflowY=a.overflow[2]})),l=!1;for(i in f)l||(m?"hidden"in m&&(D=m.hidden):m=jt.access(t,"fxshow",{display:h}),n&&(m.hidden=!D),D&&y([t],!0),c.done(function(){D||y([t]),jt.remove(t,"fxshow");for(i in f)wt.style(t,i,f[i])})),l=j(D?m[i]:0,i,c),i in m||(m[i]=l.start,D&&(l.end=l.start,l.start=0))}}function $(t,e){var a,i,r,n,o;for(a in t)if(i=g(a),r=e[i],n=t[a],Array.isArray(n)&&(r=n[1],n=t[a]=n[0]),a!==i&&(t[i]=n,delete t[a]),(o=wt.cssHooks[i])&&"expand"in o){n=o.expand(n),delete t[i];for(a in n)a in t||(t[a]=n[a],e[a]=r)}else e[i]=r}function tt(t,e,a){var i,r,n=0,o=tt.prefilters.length,s=wt.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=Me||q(),a=Math.max(0,h.startTime+h.duration-e),i=a/h.duration||0,n=1-i,o=0,l=h.tweens.length;o<l;o++)h.tweens[o].run(n);return s.notifyWith(t,[h,n,a]),n<1&&l?a:(l||s.notifyWith(t,[h,1,0]),s.resolveWith(t,[h]),!1)},h=s.promise({elem:t,props:wt.extend({},e),opts:wt.extend(!0,{specialEasing:{},easing:wt.easing._default},a),originalProperties:e,originalOptions:a,startTime:Me||q(),duration:a.duration,tweens:[],createTween:function(e,a){var i=wt.Tween(t,h.opts,e,a,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(i),i},stop:function(e){var a=0,i=e?h.tweens.length:0;if(r)return this;for(r=!0;a<i;a++)h.tweens[a].run(1);return e?(s.notifyWith(t,[h,1,0]),s.resolveWith(t,[h,e])):s.rejectWith(t,[h,e]),this}}),u=h.props;for($(u,h.opts.specialEasing);n<o;n++)if(i=tt.prefilters[n].call(h,t,u,h.opts))return St(i.stop)&&(wt._queueHooks(h.elem,h.opts.queue).stop=i.stop.bind(i)),i;return wt.map(u,j,h),St(h.opts.start)&&h.opts.start.call(t,h),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always),wt.fx.timer(wt.extend(l,{elem:t,anim:h,queue:h.opts.queue})),h}function et(t){return(t.match(Wt)||[]).join(" ")}function at(t){return t.getAttribute&&t.getAttribute("class")||""}function it(t){return Array.isArray(t)?t:"string"==typeof t?t.match(Wt)||[]:[]}function rt(t,e,a,i){var r;if(Array.isArray(e))wt.each(e,function(e,r){a||Xe.test(t)?i(t,r):rt(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,a,i)});else if(a||"object"!==s(e))i(t,e);else for(r in e)rt(t+"["+r+"]",e[r],a,i)}function nt(t){return function(e,a){"string"!=typeof e&&(a=e,e="*");var i,r=0,n=e.toLowerCase().match(Wt)||[];if(St(a))for(;i=n[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(a)):(t[i]=t[i]||[]).push(a)}}function ot(t,e,a,i){function r(s){var l;return n[s]=!0,wt.each(t[s]||[],function(t,s){var h=s(e,a,i);return"string"!=typeof h||o||n[h]?o?!(l=h):void 0:(e.dataTypes.unshift(h),r(h),!1)}),l}var n={},o=t===ea;return r(e.dataTypes[0])||!n["*"]&&r("*")}function st(t,e){var a,i,r=wt.ajaxSettings.flatOptions||{};for(a in e)void 0!==e[a]&&((r[a]?t:i||(i={}))[a]=e[a]);return i&&wt.extend(!0,t,i),t}function lt(t,e,a){for(var i,r,n,o,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in a)n=l[0];else{for(r in a){if(!l[0]||t.converters[r+" "+l[0]]){n=r;break}o||(o=r)}n=n||o}if(n)return n!==l[0]&&l.unshift(n),a[n]}function ht(t,e,a,i){var r,n,o,s,l,h={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)h[o.toLowerCase()]=t.converters[o];for(n=u.shift();n;)if(t.responseFields[n]&&(a[t.responseFields[n]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=n,n=u.shift())if("*"===n)n=l;else if("*"!==l&&l!==n){if(!(o=h[l+" "+n]||h["* "+n]))for(r in h)if(s=r.split(" "),s[1]===n&&(o=h[l+" "+s[0]]||h["* "+s[0]])){!0===o?o=h[r]:!0!==h[r]&&(n=s[0],u.unshift(s[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+n}}}return{state:"success",data:e}}var ut=[],Ct=Object.getPrototypeOf,ct=ut.slice,ft=ut.flat?function(t){return ut.flat.call(t)}:function(t){return ut.concat.apply([],t)},dt=ut.push,Dt=ut.indexOf,mt={},pt=mt.toString,vt=mt.hasOwnProperty,gt=vt.toString,Tt=gt.call(Object),It={},St=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},xt=function(t){return null!=t&&t===t.window},bt=a.document,yt={type:!0,src:!0,nonce:!0,noModule:!0},Et=/HTML$/i,wt=function(t,e){return new wt.fn.init(t,e)};wt.fn=wt.prototype={jquery:"3.7.1",constructor:wt,length:0,toArray:function(){return ct.call(this)},get:function(t){return null==t?ct.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=wt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return wt.each(this,t)},map:function(t){return this.pushStack(wt.map(this,function(e,a){return t.call(e,a,e)}))},slice:function(){return this.pushStack(ct.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(wt.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(wt.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,a=+t+(t<0?e:0);return this.pushStack(a>=0&&a<e?[this[a]]:[])},end:function(){return this.prevObject||this.constructor()},push:dt,sort:ut.sort,splice:ut.splice},wt.extend=wt.fn.extend=function(){var t,e,a,i,r,n,o=arguments[0]||{},s=1,l=arguments.length,h=!1;for("boolean"==typeof o&&(h=o,o=arguments[s]||{},s++),"object"==typeof o||St(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)i=t[e],"__proto__"!==e&&o!==i&&(h&&i&&(wt.isPlainObject(i)||(r=Array.isArray(i)))?(a=o[e],n=r&&!Array.isArray(a)?[]:r||wt.isPlainObject(a)?a:{},r=!1,o[e]=wt.extend(h,n,i)):void 0!==i&&(o[e]=i));return o},wt.extend({expando:"jQuery"+("3.7.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,a;return!(!t||"[object Object]"!==pt.call(t))&&(!(e=Ct(t))||"function"==typeof(a=vt.call(e,"constructor")&&e.constructor)&&gt.call(a)===Tt)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,a){o(t,{nonce:e&&e.nonce},a)},each:function(t,e){var a,i=0;if(l(t))for(a=t.length;i<a&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},text:function(t){var e,a="",i=0,r=t.nodeType;if(!r)for(;e=t[i++];)a+=wt.text(e);return 1===r||11===r?t.textContent:9===r?t.documentElement.textContent:3===r||4===r?t.nodeValue:a},makeArray:function(t,e){var a=e||[];return null!=t&&(l(Object(t))?wt.merge(a,"string"==typeof t?[t]:t):dt.call(a,t)),a},inArray:function(t,e,a){return null==e?-1:Dt.call(e,t,a)},isXMLDoc:function(t){var e=t&&t.namespaceURI,a=t&&(t.ownerDocument||t).documentElement;return!Et.test(e||a&&a.nodeName||"HTML")},merge:function(t,e){for(var a=+e.length,i=0,r=t.length;i<a;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,a){for(var i=[],r=0,n=t.length,o=!a;r<n;r++)!e(t[r],r)!==o&&i.push(t[r]);return i},map:function(t,e,a){var i,r,n=0,o=[];if(l(t))for(i=t.length;n<i;n++)null!=(r=e(t[n],n,a))&&o.push(r);else for(n in t)null!=(r=e(t[n],n,a))&&o.push(r);return ft(o)},guid:1,support:It}),"function"==typeof Symbol&&(wt.fn[Symbol.iterator]=ut[Symbol.iterator]),wt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){mt["[object "+e+"]"]=e.toLowerCase()});var Ft=ut.pop,Mt=ut.sort,Lt=ut.splice,Nt="[\\x20\\t\\r\\n\\f]",Rt=new RegExp("^"+Nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Nt+"+$","g");wt.contains=function(t,e){var a=e&&e.parentNode;return t===a||!(!a||1!==a.nodeType||!(t.contains?t.contains(a):t.compareDocumentPosition&&16&t.compareDocumentPosition(a)))};var At=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;wt.escapeSelector=function(t){return(t+"").replace(At,u)};var Ot=bt,Pt=dt;!function(){function t(){try{return F.activeElement}catch(t){}}function e(t,a,i,r){var n,o,s,h,C,d,D,m=a&&a.ownerDocument,p=a?a.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return i;if(!r&&(u(a),a=a||F,L)){if(11!==p&&(C=et.exec(t)))if(n=C[1]){if(9===p){if(!(s=a.getElementById(n)))return i;if(s.id===n)return A.call(i,s),i}else if(m&&(s=m.getElementById(n))&&e.contains(a,s)&&s.id===n)return A.call(i,s),i}else{if(C[2])return A.apply(i,a.getElementsByTagName(t)),i;if((n=C[3])&&a.getElementsByClassName)return A.apply(i,a.getElementsByClassName(n)),i}if(!(V[t+" "]||N&&N.test(t))){if(D=t,m=a,1===p&&(q.test(t)||J.test(t))){for(m=at.test(t)&&l(a.parentNode)||a,m==a&&It.scope||((h=a.getAttribute("id"))?h=wt.escapeSelector(h):a.setAttribute("id",h=O)),d=c(t),o=d.length;o--;)d[o]=(h?"#"+h:":scope")+" "+f(d[o]);D=d.join(",")}try{return A.apply(i,m.querySelectorAll(D)),i}catch(e){V(t,!0)}finally{h===O&&a.removeAttribute("id")}}}return S(t.replace(Rt,"$1"),a,i,r)}function i(){function t(a,i){return e.push(a+" ")>b.cacheLength&&delete t[e.shift()],t[a+" "]=i}var e=[];return t}function r(t){return t[O]=!0,t}function n(t){var e=F.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ot(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function s(t){return r(function(e){return e=+e,r(function(a,i){for(var r,n=t([],a.length,e),o=n.length;o--;)a[r=n[o]]&&(a[r]=!(i[r]=a[r]))})})}function l(t){return t&&void 0!==t.getElementsByTagName&&t}function u(t){var a,i=t?t.ownerDocument||t:Ot;return i!=F&&9===i.nodeType&&i.documentElement?(F=i,M=F.documentElement,L=!wt.isXMLDoc(F),R=M.matches||M.webkitMatchesSelector||M.msMatchesSelector,M.msMatchesSelector&&Ot!=F&&(a=F.defaultView)&&a.top!==a&&a.addEventListener("unload",nt),It.getById=n(function(t){return M.appendChild(t).id=wt.expando,!F.getElementsByName||!F.getElementsByName(wt.expando).length}),It.disconnectedMatch=n(function(t){return R.call(t,"*")}),It.scope=n(function(){return F.querySelectorAll(":scope")}),It.cssHas=n(function(){try{return F.querySelector(":has(*,:jqfake)"),!1}catch(t){return!0}}),It.getById?(b.filter.ID=function(t){var e=t.replace(it,rt);return function(t){return t.getAttribute("id")===e}},b.find.ID=function(t,e){if(void 0!==e.getElementById&&L){var a=e.getElementById(t);return a?[a]:[]}}):(b.filter.ID=function(t){var e=t.replace(it,rt);return function(t){var a=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return a&&a.value===e}},b.find.ID=function(t,e){if(void 0!==e.getElementById&&L){var a,i,r,n=e.getElementById(t);if(n){if((a=n.getAttributeNode("id"))&&a.value===t)return[n];for(r=e.getElementsByName(t),i=0;n=r[i++];)if((a=n.getAttributeNode("id"))&&a.value===t)return[n]}return[]}}),b.find.TAG=function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},b.find.CLASS=function(t,e){if(void 0!==e.getElementsByClassName&&L)return e.getElementsByClassName(t)},N=[],n(function(t){var e;M.appendChild(t).innerHTML="<a id='"+O+"' href='' disabled='disabled'></a><select id='"+O+"-\r\\' disabled='disabled'><option selected=''></option></select>",t.querySelectorAll("[selected]").length||N.push("\\["+Nt+"*(?:value|"+Y+")"),t.querySelectorAll("[id~="+O+"-]").length||N.push("~="),t.querySelectorAll("a#"+O+"+*").length||N.push(".#.+[+~]"),t.querySelectorAll(":checked").length||N.push(":checked"),e=F.createElement("input"),e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),M.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&N.push(":enabled",":disabled"),e=F.createElement("input"),e.setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||N.push("\\["+Nt+"*name"+Nt+"*="+Nt+"*(?:''|\"\")")}),It.cssHas||N.push(":has"),N=N.length&&new RegExp(N.join("|")),H=function(t,a){if(t===a)return w=!0,0;var i=!t.compareDocumentPosition-!a.compareDocumentPosition;return i||(i=(t.ownerDocument||t)==(a.ownerDocument||a)?t.compareDocumentPosition(a):1,1&i||!It.sortDetached&&a.compareDocumentPosition(t)===i?t===F||t.ownerDocument==Ot&&e.contains(Ot,t)?-1:a===F||a.ownerDocument==Ot&&e.contains(Ot,a)?1:E?Dt.call(E,t)-Dt.call(E,a):0:4&i?-1:1)},F):F}function C(){}function c(t,a){var i,r,n,o,s,l,h,u=G[t+" "];if(u)return a?0:u.slice(0);for(s=t,l=[],h=b.preFilter;s;){i&&!(r=z.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(n=[])),i=!1,(r=J.exec(s))&&(i=r.shift(),n.push({value:i,type:r[0].replace(Rt," ")}),s=s.slice(i.length));for(o in b.filter)!(r=Q[o].exec(s))||h[o]&&!(r=h[o](r))||(i=r.shift(),n.push({value:i,type:o,matches:r}),s=s.slice(i.length));if(!i)break}return a?s.length:s?e.error(t):G(t,l).slice(0)}function f(t){for(var e=0,a=t.length,i="";e<a;e++)i+=t[e].value;return i}function d(t,e,a){var i=e.dir,r=e.next,n=r||i,o=a&&"parentNode"===n,s=B++;return e.first?function(e,a,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,a,r);return!1}:function(e,a,l){var u,C,c=[P,s];if(l){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,a,l))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(C=e[O]||(e[O]={}),r&&h(e,r))e=e[i]||e;else{if((u=C[n])&&u[0]===P&&u[1]===s)return c[2]=u[2];if(C[n]=c,c[2]=t(e,a,l))return!0}return!1}}function D(t){return t.length>1?function(e,a,i){for(var r=t.length;r--;)if(!t[r](e,a,i))return!1;return!0}:t[0]}function m(t,a,i){for(var r=0,n=a.length;r<n;r++)e(t,a[r],i);return i}function p(t,e,a,i,r){for(var n,o=[],s=0,l=t.length,h=null!=e;s<l;s++)(n=t[s])&&(a&&!a(n,i,r)||(o.push(n),h&&e.push(s)));return o}function v(t,e,a,i,n,o){return i&&!i[O]&&(i=v(i)),n&&!n[O]&&(n=v(n,o)),r(function(r,o,s,l){var h,u,C,c,f=[],d=[],D=o.length,v=r||m(e||"*",s.nodeType?[s]:s,[]),g=!t||!r&&e?v:p(v,f,t,s,l);if(a?(c=n||(r?t:D||i)?[]:o,a(g,c,s,l)):c=g,i)for(h=p(c,d),i(h,[],s,l),u=h.length;u--;)(C=h[u])&&(c[d[u]]=!(g[d[u]]=C));if(r){if(n||t){if(n){for(h=[],u=c.length;u--;)(C=c[u])&&h.push(g[u]=C);n(null,c=[],h,l)}for(u=c.length;u--;)(C=c[u])&&(h=n?Dt.call(r,C):f[u])>-1&&(r[h]=!(o[h]=C))}}else c=p(c===o?c.splice(D,c.length):c),n?n(null,o,c,l):A.apply(o,c)})}function g(t){for(var e,a,i,r=t.length,n=b.relative[t[0].type],o=n||b.relative[" "],s=n?1:0,l=d(function(t){return t===e},o,!0),h=d(function(t){return Dt.call(e,t)>-1},o,!0),u=[function(t,a,i){var r=!n&&(i||a!=y)||((e=a).nodeType?l(t,a,i):h(t,a,i));return e=null,r}];s<r;s++)if(a=b.relative[t[s].type])u=[d(D(u),a)];else{if(a=b.filter[t[s].type].apply(null,t[s].matches),a[O]){for(i=++s;i<r&&!b.relative[t[i].type];i++);return v(s>1&&D(u),s>1&&f(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(Rt,"$1"),a,s<i&&g(t.slice(s,i)),i<r&&g(t=t.slice(i)),i<r&&f(t))}u.push(a)}return D(u)}function T(t,e){var a=e.length>0,i=t.length>0,n=function(r,n,o,s,l){var h,C,c,f=0,d="0",D=r&&[],m=[],v=y,g=r||i&&b.find.TAG("*",l),T=P+=null==v?1:Math.random()||.1,I=g.length;for(l&&(y=n==F||n||l);d!==I&&null!=(h=g[d]);d++){if(i&&h){for(C=0,n||h.ownerDocument==F||(u(h),o=!L);c=t[C++];)if(c(h,n||F,o)){A.call(s,h);break}l&&(P=T)}a&&((h=!c&&h)&&f--,r&&D.push(h))}if(f+=d,a&&d!==f){for(C=0;c=e[C++];)c(D,m,n,o);if(r){if(f>0)for(;d--;)D[d]||m[d]||(m[d]=Ft.call(s));m=p(m)}A.apply(s,m),l&&!r&&m.length>0&&f+e.length>1&&wt.uniqueSort(s)}return l&&(P=T,y=v),D};return a?r(n):n}function I(t,e){var a,i=[],r=[],n=k[t+" "];if(!n){for(e||(e=c(t)),a=e.length;a--;)n=g(e[a]),n[O]?i.push(n):r.push(n);n=k(t,T(r,i)),n.selector=t}return n}function S(t,e,a,i){var r,n,o,s,h,u="function"==typeof t&&t,C=!i&&c(t=u.selector||t);if(a=a||[],1===C.length){if(n=C[0]=C[0].slice(0),n.length>2&&"ID"===(o=n[0]).type&&9===e.nodeType&&L&&b.relative[n[1].type]){if(!(e=(b.find.ID(o.matches[0].replace(it,rt),e)||[])[0]))return a;u&&(e=e.parentNode),t=t.slice(n.shift().value.length)}for(r=Q.needsContext.test(t)?0:n.length;r--&&(o=n[r],!b.relative[s=o.type]);)if((h=b.find[s])&&(i=h(o.matches[0].replace(it,rt),at.test(n[0].type)&&l(e.parentNode)||e))){if(n.splice(r,1),!(t=i.length&&f(n)))return A.apply(a,i),a;break}}return(u||I(t,C))(i,e,!L,a,!e||at.test(t)&&l(e.parentNode)||e),a}var x,b,y,E,w,F,M,L,N,R,A=Pt,O=wt.expando,P=0,B=0,_=i(),G=i(),k=i(),V=i(),H=function(t,e){return t===e&&(w=!0),0},Y="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",X="(?:\\\\[\\da-fA-F]{1,6}"+Nt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+Nt+"*("+X+")(?:"+Nt+"*([*^$|!~]?=)"+Nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+X+"))|)"+Nt+"*\\]",U=":("+X+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",K=new RegExp(Nt+"+","g"),z=new RegExp("^"+Nt+"*,"+Nt+"*"),J=new RegExp("^"+Nt+"*([>+~]|"+Nt+")"+Nt+"*"),q=new RegExp(Nt+"|>"),Z=new RegExp(U),j=new RegExp("^"+X+"$"),Q={ID:new RegExp("^#("+X+")"),CLASS:new RegExp("^\\.("+X+")"),TAG:new RegExp("^("+X+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Nt+"*(even|odd|(([+-]|)(\\d*)n|)"+Nt+"*(?:([+-]|)"+Nt+"*(\\d+)|))"+Nt+"*\\)|)","i"),bool:new RegExp("^(?:"+Y+")$","i"),needsContext:new RegExp("^"+Nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Nt+"*((?:-\\d)?\\d*)"+Nt+"*\\)|)(?=[^-]|$)","i")},$=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,et=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,at=/[+~]/,it=new RegExp("\\\\[\\da-fA-F]{1,6}"+Nt+"?|\\\\([^\\r\\n\\f])","g"),rt=function(t,e){var a="0x"+t.slice(1)-65536;return e||(a<0?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,1023&a|56320))},nt=function(){u()},ot=d(function(t){return!0===t.disabled&&h(t,"fieldset")},{dir:"parentNode",next:"legend"});try{A.apply(ut=ct.call(Ot.childNodes),Ot.childNodes),ut[Ot.childNodes.length].nodeType}catch(t){A={apply:function(t,e){Pt.apply(t,ct.call(e))},call:function(t){Pt.apply(t,ct.call(arguments,1))}}}e.matches=function(t,a){return e(t,null,null,a)},e.matchesSelector=function(t,a){if(u(t),L&&!V[a+" "]&&(!N||!N.test(a)))try{var i=R.call(t,a);if(i||It.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){V(a,!0)}return e(a,F,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!=F&&u(t),wt.contains(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!=F&&u(t);var a=b.attrHandle[e.toLowerCase()],i=a&&vt.call(b.attrHandle,e.toLowerCase())?a(t,e,!L):void 0;return void 0!==i?i:t.getAttribute(e)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},wt.uniqueSort=function(t){var e,a=[],i=0,r=0;if(w=!It.sortStable,E=!It.sortStable&&ct.call(t,0),Mt.call(t,H),w){for(;e=t[r++];)e===t[r]&&(i=a.push(r));for(;i--;)Lt.call(t,a[i],1)}return E=null,t},wt.fn.uniqueSort=function(){return this.pushStack(wt.uniqueSort(ct.apply(this)))},b=wt.expr={cacheLength:50,createPseudo:r,match:Q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(it,rt),t[3]=(t[3]||t[4]||t[5]||"").replace(it,rt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,a=!t[6]&&t[2];return Q.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":a&&Z.test(a)&&(e=c(a,!0))&&(e=a.indexOf(")",a.length-e)-a.length)&&(t[0]=t[0].slice(0,e),t[2]=a.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(it,rt).toLowerCase();return"*"===t?function(){return!0}:function(t){return h(t,e)}},CLASS:function(t){var e=_[t+" "];return e||(e=new RegExp("(^|"+Nt+")"+t+"("+Nt+"|$)"))&&_(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,a,i){return function(r){var n=e.attr(r,t);return null==n?"!="===a:!a||(n+="","="===a?n===i:"!="===a?n!==i:"^="===a?i&&0===n.indexOf(i):"*="===a?i&&n.indexOf(i)>-1:"$="===a?i&&n.slice(-i.length)===i:"~="===a?(" "+n.replace(K," ")+" ").indexOf(i)>-1:"|="===a&&(n===i||n.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,a,i,r){var n="nth"!==t.slice(0,3),o="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,a,l){var u,C,c,f,d,D=n!==o?"nextSibling":"previousSibling",m=e.parentNode,p=s&&e.nodeName.toLowerCase(),v=!l&&!s,g=!1;if(m){if(n){for(;D;){for(c=e;c=c[D];)if(s?h(c,p):1===c.nodeType)return!1;d=D="only"===t&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&v){for(C=m[O]||(m[O]={}),u=C[t]||[],f=u[0]===P&&u[1],g=f&&u[2],c=f&&m.childNodes[f];c=++f&&c&&c[D]||(g=f=0)||d.pop();)if(1===c.nodeType&&++g&&c===e){C[t]=[P,f,g];break}}else if(v&&(C=e[O]||(e[O]={}),u=C[t]||[],f=u[0]===P&&u[1],g=f),!1===g)for(;(c=++f&&c&&c[D]||(g=f=0)||d.pop())&&((s?!h(c,p):1!==c.nodeType)||!++g||(v&&(C=c[O]||(c[O]={}),C[t]=[P,g]),c!==e)););return(g-=r)===i||g%i==0&&g/i>=0}}},PSEUDO:function(t,a){var i,n=b.pseudos[t]||b.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return n[O]?n(a):n.length>1?(i=[t,t,"",a],b.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,e){for(var i,r=n(t,a),o=r.length;o--;)i=Dt.call(t,r[o]),t[i]=!(e[i]=r[o])}):function(t){return n(t,0,i)}):n}},pseudos:{not:r(function(t){var e=[],a=[],i=I(t.replace(Rt,"$1"));return i[O]?r(function(t,e,a,r){for(var n,o=i(t,null,r,[]),s=t.length;s--;)(n=o[s])&&(t[s]=!(e[s]=n))}):function(t,r,n){return e[0]=t,i(e,null,n,a),e[0]=null,!a.pop()}}),has:r(function(t){return function(a){return e(t,a).length>0}}),contains:r(function(t){return t=t.replace(it,rt),function(e){return(e.textContent||wt.text(e)).indexOf(t)>-1}}),lang:r(function(t){return j.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(it,rt).toLowerCase(),function(e){var a;do{if(a=L?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(a=a.toLowerCase())===t||0===a.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(t){var e=a.location&&a.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===M},focus:function(e){return e===t()&&F.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:o(!1),disabled:o(!0),checked:function(t){return h(t,"input")&&!!t.checked||h(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!b.pseudos.empty(t)},header:function(t){return tt.test(t.nodeName)},input:function(t){return $.test(t.nodeName)},button:function(t){return h(t,"input")&&"button"===t.type||h(t,"button")},text:function(t){var e;return h(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:s(function(){return[0]}),last:s(function(t,e){return[e-1]}),eq:s(function(t,e,a){return[a<0?a+e:a]}),even:s(function(t,e){for(var a=0;a<e;a+=2)t.push(a);return t}),odd:s(function(t,e){for(var a=1;a<e;a+=2)t.push(a);return t}),lt:s(function(t,e,a){var i;for(i=a<0?a+e:a>e?e:a;--i>=0;)t.push(i);return t}),gt:s(function(t,e,a){for(var i=a<0?a+e:a;++i<e;)t.push(i);return t})}},b.pseudos.nth=b.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[x]=function(t){return function(e){return h(e,"input")&&e.type===t}}(x);for(x in{submit:!0,reset:!0})b.pseudos[x]=function(t){return function(e){return(h(e,"input")||h(e,"button"))&&e.type===t}}(x);C.prototype=b.filters=b.pseudos,b.setFilters=new C,It.sortStable=O.split("").sort(H).join("")===O,u(),It.sortDetached=n(function(t){return 1&t.compareDocumentPosition(F.createElement("fieldset"))}),wt.find=e,wt.expr[":"]=wt.expr.pseudos,wt.unique=wt.uniqueSort,e.compile=I,e.select=S,e.setDocument=u,e.tokenize=c,e.escape=wt.escapeSelector,e.getText=wt.text,e.isXML=wt.isXMLDoc,e.selectors=wt.expr,e.support=wt.support,e.uniqueSort=wt.uniqueSort}();var Bt=function(t,e,a){for(var i=[],r=void 0!==a;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&wt(t).is(a))break;i.push(t)}return i},_t=function(t,e){for(var a=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&a.push(t);return a},Gt=wt.expr.match.needsContext,kt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;wt.filter=function(t,e,a){var i=e[0];return a&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?wt.find.matchesSelector(i,t)?[i]:[]:wt.find.matches(t,wt.grep(e,function(t){return 1===t.nodeType}))},wt.fn.extend({find:function(t){var e,a,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(wt(t).filter(function(){for(e=0;e<i;e++)if(wt.contains(r[e],this))return!0}));for(a=this.pushStack([]),e=0;e<i;e++)wt.find(t,r[e],a);return i>1?wt.uniqueSort(a):a},filter:function(t){return this.pushStack(C(this,t||[],!1))},not:function(t){return this.pushStack(C(this,t||[],!0))},is:function(t){return!!C(this,"string"==typeof t&&Gt.test(t)?wt(t):t||[],!1).length}});var Vt,Ht=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(wt.fn.init=function(t,e,a){var i,r;if(!t)return this;if(a=a||Vt,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:Ht.exec(t))||!i[1]&&e)return!e||e.jquery?(e||a).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof wt?e[0]:e,wt.merge(this,wt.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:bt,!0)),kt.test(i[1])&&wt.isPlainObject(e))for(i in e)St(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return r=bt.getElementById(i[2]),r&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):St(t)?void 0!==a.ready?a.ready(t):t(wt):wt.makeArray(t,this)}).prototype=wt.fn,Vt=wt(bt);var Yt=/^(?:parents|prev(?:Until|All))/,Xt={children:!0,contents:!0,next:!0,prev:!0};wt.fn.extend({has:function(t){var e=wt(t,this),a=e.length;return this.filter(function(){for(var t=0;t<a;t++)if(wt.contains(this,e[t]))return!0})},closest:function(t,e){var a,i=0,r=this.length,n=[],o="string"!=typeof t&&wt(t);if(!Gt.test(t))for(;i<r;i++)for(a=this[i];a&&a!==e;a=a.parentNode)if(a.nodeType<11&&(o?o.index(a)>-1:1===a.nodeType&&wt.find.matchesSelector(a,t))){n.push(a);break}return this.pushStack(n.length>1?wt.uniqueSort(n):n)},index:function(t){return t?"string"==typeof t?Dt.call(wt(t),this[0]):Dt.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(wt.uniqueSort(wt.merge(this.get(),wt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),wt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Bt(t,"parentNode")},parentsUntil:function(t,e,a){return Bt(t,"parentNode",a)},next:function(t){return c(t,"nextSibling")},prev:function(t){return c(t,"previousSibling")},nextAll:function(t){return Bt(t,"nextSibling")},prevAll:function(t){return Bt(t,"previousSibling")},nextUntil:function(t,e,a){return Bt(t,"nextSibling",a)},prevUntil:function(t,e,a){return Bt(t,"previousSibling",a)},siblings:function(t){return _t((t.parentNode||{}).firstChild,t)},children:function(t){return _t(t.firstChild)},contents:function(t){return null!=t.contentDocument&&Ct(t.contentDocument)?t.contentDocument:(h(t,"template")&&(t=t.content||t),wt.merge([],t.childNodes))}},function(t,e){wt.fn[t]=function(a,i){var r=wt.map(this,e,a);return"Until"!==t.slice(-5)&&(i=a),i&&"string"==typeof i&&(r=wt.filter(i,r)),this.length>1&&(Xt[t]||wt.uniqueSort(r),Yt.test(t)&&r.reverse()),this.pushStack(r)}});var Wt=/[^\x20\t\r\n\f]+/g;wt.Callbacks=function(t){t="string"==typeof t?f(t):wt.extend({},t);var e,a,i,r,n=[],o=[],l=-1,h=function(){for(r=r||t.once,i=e=!0;o.length;l=-1)for(a=o.shift();++l<n.length;)!1===n[l].apply(a[0],a[1])&&t.stopOnFalse&&(l=n.length,a=!1);t.memory||(a=!1),e=!1,r&&(n=a?[]:"")},u={add:function(){return n&&(a&&!e&&(l=n.length-1,o.push(a)),function e(a){wt.each(a,function(a,i){St(i)?t.unique&&u.has(i)||n.push(i):i&&i.length&&"string"!==s(i)&&e(i)})}(arguments),a&&!e&&h()),this},remove:function(){return wt.each(arguments,function(t,e){for(var a;(a=wt.inArray(e,n,a))>-1;)n.splice(a,1),a<=l&&l--}),this},has:function(t){return t?wt.inArray(t,n)>-1:n.length>0},empty:function(){return n&&(n=[]),this},disable:function(){return r=o=[],n=a="",this},disabled:function(){return!n},lock:function(){return r=o=[],a||e||(n=a=""),this},locked:function(){return!!r},fireWith:function(t,a){return r||(a=a||[],a=[t,a.slice?a.slice():a],o.push(a),e||h()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},wt.extend({Deferred:function(t){var e=[["notify","progress",wt.Callbacks("memory"),wt.Callbacks("memory"),2],["resolve","done",wt.Callbacks("once memory"),wt.Callbacks("once memory"),0,"resolved"],["reject","fail",wt.Callbacks("once memory"),wt.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return n.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return wt.Deferred(function(a){wt.each(e,function(e,i){var r=St(t[i[4]])&&t[i[4]];n[i[1]](function(){var t=r&&r.apply(this,arguments);t&&St(t.promise)?t.promise().progress(a.notify).done(a.resolve).fail(a.reject):a[i[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(t,i,r){function n(t,e,i,r){return function(){var s=this,l=arguments,h=function(){var a,h;if(!(t<o)){if((a=i.apply(s,l))===e.promise())throw new TypeError("Thenable self-resolution");h=a&&("object"==typeof a||"function"==typeof a)&&a.then,St(h)?r?h.call(a,n(o,e,d,r),n(o,e,D,r)):(o++,h.call(a,n(o,e,d,r),n(o,e,D,r),n(o,e,d,e.notifyWith))):(i!==d&&(s=void 0,l=[a]),(r||e.resolveWith)(s,l))}},u=r?h:function(){try{h()}catch(a){wt.Deferred.exceptionHook&&wt.Deferred.exceptionHook(a,u.error),t+1>=o&&(i!==D&&(s=void 0,l=[a]),e.rejectWith(s,l))}};t?u():(wt.Deferred.getErrorHook?u.error=wt.Deferred.getErrorHook():wt.Deferred.getStackHook&&(u.error=wt.Deferred.getStackHook()),a.setTimeout(u))}}var o=0;return wt.Deferred(function(a){e[0][3].add(n(0,a,St(r)?r:d,a.notifyWith)),e[1][3].add(n(0,a,St(t)?t:d)),e[2][3].add(n(0,a,St(i)?i:D))}).promise()},promise:function(t){return null!=t?wt.extend(t,r):r}},n={};return wt.each(e,function(t,a){var o=a[2],s=a[5];r[a[1]]=o.add,s&&o.add(function(){i=s},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),o.add(a[3].fire),n[a[0]]=function(){return n[a[0]+"With"](this===n?void 0:this,arguments),this},n[a[0]+"With"]=o.fireWith}),r.promise(n),t&&t.call(n,n),n},when:function(t){var e=arguments.length,a=e,i=Array(a),r=ct.call(arguments),n=wt.Deferred(),o=function(t){return function(a){i[t]=this,r[t]=arguments.length>1?ct.call(arguments):a,--e||n.resolveWith(i,r)}};if(e<=1&&(m(t,n.done(o(a)).resolve,n.reject,!e),"pending"===n.state()||St(r[a]&&r[a].then)))return n.then();for(;a--;)m(r[a],o(a),n.reject);return n.promise()}});var Ut=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;wt.Deferred.exceptionHook=function(t,e){a.console&&a.console.warn&&t&&Ut.test(t.name)&&a.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},wt.readyException=function(t){a.setTimeout(function(){throw t})};var Kt=wt.Deferred();wt.fn.ready=function(t){return Kt.then(t).catch(function(t){wt.readyException(t)}),this},wt.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--wt.readyWait:wt.isReady)||(wt.isReady=!0,!0!==t&&--wt.readyWait>0||Kt.resolveWith(bt,[wt]))}}),wt.ready.then=Kt.then,"complete"===bt.readyState||"loading"!==bt.readyState&&!bt.documentElement.doScroll?a.setTimeout(wt.ready):(bt.addEventListener("DOMContentLoaded",p),a.addEventListener("load",p));var zt=function(t,e,a,i,r,n,o){var l=0,h=t.length,u=null==a;if("object"===s(a)){r=!0;for(l in a)zt(t,e,l,a[l],!0,n,o)}else if(void 0!==i&&(r=!0,St(i)||(o=!0),u&&(o?(e.call(t,i),e=null):(u=e,e=function(t,e,a){return u.call(wt(t),a)})),e))for(;l<h;l++)e(t[l],a,o?i:i.call(t[l],l,e(t[l],a)));return r?t:u?e.call(t):h?e(t[0],a):n},Jt=/^-ms-/,qt=/-([a-z])/g,Zt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};T.uid=1,T.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Zt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,a){var i,r=this.cache(t);if("string"==typeof e)r[g(e)]=a;else for(i in e)r[g(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][g(e)]},access:function(t,e,a){return void 0===e||e&&"string"==typeof e&&void 0===a?this.get(t,e):(this.set(t,e,a),void 0!==a?a:e)},remove:function(t,e){var a,i=t[this.expando];if(void 0!==i){if(void 0!==e){Array.isArray(e)?e=e.map(g):(e=g(e),e=e in i?[e]:e.match(Wt)||[]),a=e.length;for(;a--;)delete i[e[a]]}(void 0===e||wt.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!wt.isEmptyObject(e)}};var jt=new T,Qt=new T,$t=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;wt.extend({hasData:function(t){return Qt.hasData(t)||jt.hasData(t)},data:function(t,e,a){return Qt.access(t,e,a)},removeData:function(t,e){Qt.remove(t,e)},_data:function(t,e,a){return jt.access(t,e,a)},_removeData:function(t,e){jt.remove(t,e)}}),wt.fn.extend({data:function(t,e){var a,i,r,n=this[0],o=n&&n.attributes;if(void 0===t){if(this.length&&(r=Qt.get(n),1===n.nodeType&&!jt.get(n,"hasDataAttrs"))){for(a=o.length;a--;)o[a]&&(i=o[a].name,0===i.indexOf("data-")&&(i=g(i.slice(5)),S(n,i,r[i])));jt.set(n,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){Qt.set(this,t)}):zt(this,function(e){var a;if(n&&void 0===e){if(void 0!==(a=Qt.get(n,t)))return a;if(void 0!==(a=S(n,t)))return a}else this.each(function(){Qt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Qt.remove(this,t)})}}),wt.extend({queue:function(t,e,a){var i;if(t)return e=(e||"fx")+"queue",i=jt.get(t,e),a&&(!i||Array.isArray(a)?i=jt.access(t,e,wt.makeArray(a)):i.push(a)),i||[]},dequeue:function(t,e){e=e||"fx";var a=wt.queue(t,e),i=a.length,r=a.shift(),n=wt._queueHooks(t,e),o=function(){wt.dequeue(t,e)};"inprogress"===r&&(r=a.shift(),i--),r&&("fx"===e&&a.unshift("inprogress"),delete n.stop,r.call(t,o,n)),!i&&n&&n.empty.fire()},_queueHooks:function(t,e){var a=e+"queueHooks";return jt.get(t,a)||jt.access(t,a,{empty:wt.Callbacks("once memory").add(function(){jt.remove(t,[e+"queue",a])})})}}),wt.fn.extend({queue:function(t,e){var a=2;return"string"!=typeof t&&(e=t,t="fx",a--),arguments.length<a?wt.queue(this[0],t):void 0===e?this:this.each(function(){var a=wt.queue(this,t,e);wt._queueHooks(this,t),"fx"===t&&"inprogress"!==a[0]&&wt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){wt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var a,i=1,r=wt.Deferred(),n=this,o=this.length,s=function(){--i||r.resolveWith(n,[n])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(a=jt.get(n[o],t+"queueHooks"))&&a.empty&&(i++,a.empty.add(s));return s(),r.promise(e)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ae=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ie=["Top","Right","Bottom","Left"],re=bt.documentElement,ne=function(t){return wt.contains(t.ownerDocument,t)},oe={composed:!0};re.getRootNode&&(ne=function(t){return wt.contains(t.ownerDocument,t)||t.getRootNode(oe)===t.ownerDocument});var se=function(t,e){return t=e||t,"none"===t.style.display||""===t.style.display&&ne(t)&&"none"===wt.css(t,"display")},le={};wt.fn.extend({show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){se(this)?wt(this).show():wt(this).hide()})}});var he=/^(?:checkbox|radio)$/i,ue=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ce=/^$|^module$|\/(?:java|ecma)script/i;!function(){var t=bt.createDocumentFragment(),e=t.appendChild(bt.createElement("div")),a=bt.createElement("input");a.setAttribute("type","radio"),a.setAttribute("checked","checked"),a.setAttribute("name","t"),e.appendChild(a),It.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",It.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",It.option=!!e.lastChild}();var ce={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ce.tbody=ce.tfoot=ce.colgroup=ce.caption=ce.thead,ce.th=ce.td,It.option||(ce.optgroup=ce.option=[1,"<select multiple='multiple'>","</select>"]);var fe=/<|&#?\w+;/,de=/^([^.]*)(?:\.(.+)|)/;wt.event={global:{},add:function(t,e,a,i,r){var n,o,s,l,h,u,C,c,f,d,D,m=jt.get(t);if(Zt(t))for(a.handler&&(n=a,a=n.handler,r=n.selector),r&&wt.find.matchesSelector(re,r),a.guid||(a.guid=wt.guid++),(l=m.events)||(l=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(e){return void 0!==wt&&wt.event.triggered!==e.type?wt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(Wt)||[""],h=e.length;h--;)s=de.exec(e[h])||[],f=D=s[1],d=(s[2]||"").split(".").sort(),f&&(C=wt.event.special[f]||{},f=(r?C.delegateType:C.bindType)||f,C=wt.event.special[f]||{},u=wt.extend({type:f,origType:D,data:i,handler:a,guid:a.guid,selector:r,needsContext:r&&wt.expr.match.needsContext.test(r),namespace:d.join(".")},n),(c=l[f])||(c=l[f]=[],c.delegateCount=0,C.setup&&!1!==C.setup.call(t,i,d,o)||t.addEventListener&&t.addEventListener(f,o)),C.add&&(C.add.call(t,u),u.handler.guid||(u.handler.guid=a.guid)),r?c.splice(c.delegateCount++,0,u):c.push(u),wt.event.global[f]=!0)},remove:function(t,e,a,i,r){var n,o,s,l,h,u,C,c,f,d,D,m=jt.hasData(t)&&jt.get(t);if(m&&(l=m.events)){for(e=(e||"").match(Wt)||[""],h=e.length;h--;)if(s=de.exec(e[h])||[],f=D=s[1],d=(s[2]||"").split(".").sort(),f){for(C=wt.event.special[f]||{},f=(i?C.delegateType:C.bindType)||f,c=l[f]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=n=c.length;n--;)u=c[n],!r&&D!==u.origType||a&&a.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(c.splice(n,1),u.selector&&c.delegateCount--,C.remove&&C.remove.call(t,u));o&&!c.length&&(C.teardown&&!1!==C.teardown.call(t,d,m.handle)||wt.removeEvent(t,f,m.handle),delete l[f])}else for(f in l)wt.event.remove(t,f+e[h],a,i,!0);wt.isEmptyObject(l)&&jt.remove(t,"handle events")}},dispatch:function(t){var e,a,i,r,n,o,s=new Array(arguments.length),l=wt.event.fix(t),h=(jt.get(this,"events")||Object.create(null))[l.type]||[],u=wt.event.special[l.type]||{};for(s[0]=l,e=1;e<arguments.length;e++)s[e]=arguments[e];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(o=wt.event.handlers.call(this,l,h),e=0;(r=o[e++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,a=0;(n=r.handlers[a++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==n.namespace&&!l.rnamespace.test(n.namespace)||(l.handleObj=n,l.data=n.data,void 0!==(i=((wt.event.special[n.origType]||{}).handle||n.handler).apply(r.elem,s))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(t,e){var a,i,r,n,o,s=[],l=e.delegateCount,h=t.target;if(l&&h.nodeType&&!("click"===t.type&&t.button>=1))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==t.type||!0!==h.disabled)){for(n=[],o={},a=0;a<l;a++)i=e[a],r=i.selector+" ",void 0===o[r]&&(o[r]=i.needsContext?wt(r,this).index(h)>-1:wt.find(r,this,null,[h]).length),o[r]&&n.push(i);n.length&&s.push({elem:h,handlers:n})}return h=this,l<e.length&&s.push({elem:h,handlers:e.slice(l)}),s},addProp:function(t,e){Object.defineProperty(wt.Event.prototype,t,{enumerable:!0,configurable:!0,get:St(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[wt.expando]?t:new wt.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return he.test(e.type)&&e.click&&h(e,"input")&&R(e,"click",!0),!1},trigger:function(t){var e=this||t;return he.test(e.type)&&e.click&&h(e,"input")&&R(e,"click"),!0},_default:function(t){var e=t.target;return he.test(e.type)&&e.click&&h(e,"input")&&jt.get(e,"click")||h(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},wt.removeEvent=function(t,e,a){t.removeEventListener&&t.removeEventListener(e,a)},wt.Event=function(t,e){if(!(this instanceof wt.Event))return new wt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?M:L,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&wt.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[wt.expando]=!0},wt.Event.prototype={constructor:wt.Event,isDefaultPrevented:L,isPropagationStopped:L,isImmediatePropagationStopped:L,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=M,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=M,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=M,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},wt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},wt.event.addProp),wt.each({focus:"focusin",blur:"focusout"},function(t,e){function a(t){if(bt.documentMode){var a=jt.get(this,"handle"),i=wt.event.fix(t);i.type="focusin"===t.type?"focus":"blur",i.isSimulated=!0,a(t),i.target===i.currentTarget&&a(i)}else wt.event.simulate(e,t.target,wt.event.fix(t))}wt.event.special[t]={setup:function(){var i;if(R(this,t,!0),!bt.documentMode)return!1;i=jt.get(this,e),i||this.addEventListener(e,a),jt.set(this,e,(i||0)+1)},trigger:function(){return R(this,t),!0},teardown:function(){var t;if(!bt.documentMode)return!1;t=jt.get(this,e)-1,t?jt.set(this,e,t):(this.removeEventListener(e,a),jt.remove(this,e))},_default:function(e){return jt.get(e.target,t)},delegateType:e},wt.event.special[e]={setup:function(){var i=this.ownerDocument||this.document||this,r=bt.documentMode?this:i,n=jt.get(r,e);n||(bt.documentMode?this.addEventListener(e,a):i.addEventListener(t,a,!0)),jt.set(r,e,(n||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=bt.documentMode?this:i,n=jt.get(r,e)-1;n?jt.set(r,e,n):(bt.documentMode?this.removeEventListener(e,a):i.removeEventListener(t,a,!0),jt.remove(r,e))}}}),wt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){wt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var a,i=this,r=t.relatedTarget,n=t.handleObj;return r&&(r===i||wt.contains(i,r))||(t.type=n.origType,a=n.handler.apply(this,arguments),t.type=e),a}}}),wt.fn.extend({on:function(t,e,a,i){return N(this,t,e,a,i)},one:function(t,e,a,i){return N(this,t,e,a,i,1)},off:function(t,e,a){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,wt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(a=e,e=void 0),!1===a&&(a=L),this.each(function(){wt.event.remove(this,t,a,e)})}});var De=/<script|<style|<link/i,me=/checked\s*(?:[^=]|=\s*.checked.)/i,pe=/^\s*<!\[CDATA\[|\]\]>\s*$/g;wt.extend({htmlPrefilter:function(t){return t},clone:function(t,e,a){var i,r,n,o,s=t.cloneNode(!0),l=ne(t);if(!(It.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||wt.isXMLDoc(t)))for(o=E(s),n=E(t),i=0,r=n.length;i<r;i++)_(n[i],o[i]);if(e)if(a)for(n=n||E(t),o=o||E(s),i=0,r=n.length;i<r;i++)B(n[i],o[i]);else B(t,s);return o=E(s,"script"),o.length>0&&w(o,!l&&E(t,"script")),s},cleanData:function(t){for(var e,a,i,r=wt.event.special,n=0;void 0!==(a=t[n]);n++)if(Zt(a)){if(e=a[jt.expando]){if(e.events)for(i in e.events)r[i]?wt.event.remove(a,i):wt.removeEvent(a,i,e.handle);a[jt.expando]=void 0}a[Qt.expando]&&(a[Qt.expando]=void 0)}}}),wt.fn.extend({detach:function(t){return k(this,t,!0)},remove:function(t){return k(this,t)},text:function(t){return zt(this,function(t){return void 0===t?wt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return G(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){A(this,t).appendChild(t)}})},prepend:function(){return G(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=A(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return G(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return G(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(wt.cleanData(E(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return wt.clone(this,t,e)})},html:function(t){return zt(this,function(t){var e=this[0]||{},a=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!De.test(t)&&!ce[(ue.exec(t)||["",""])[1].toLowerCase()]){t=wt.htmlPrefilter(t);try{for(;a<i;a++)e=this[a]||{},1===e.nodeType&&(wt.cleanData(E(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return G(this,arguments,function(e){var a=this.parentNode;wt.inArray(this,t)<0&&(wt.cleanData(E(this)),a&&a.replaceChild(e,this))},t)}}),wt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){wt.fn[t]=function(t){for(var a,i=[],r=wt(t),n=r.length-1,o=0;o<=n;o++)a=o===n?this:this.clone(!0),wt(r[o])[e](a),dt.apply(i,a.get());return this.pushStack(i)}});var ve=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),ge=/^--/,Te=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=a),e.getComputedStyle(t)},Ie=function(t,e,a){var i,r,n={};for(r in e)n[r]=t.style[r],t.style[r]=e[r];i=a.call(t);for(r in e)t.style[r]=n[r];return i},Se=new RegExp(ie.join("|"),"i");!function(){function t(){if(u){h.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(h).appendChild(u);var t=a.getComputedStyle(u);i="1%"!==t.top,l=12===e(t.marginLeft),u.style.right="60%",o=36===e(t.right),r=36===e(t.width),u.style.position="absolute",n=12===e(u.offsetWidth/3),re.removeChild(h),u=null}}function e(t){return Math.round(parseFloat(t))}var i,r,n,o,s,l,h=bt.createElement("div"),u=bt.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",It.clearCloneStyle="content-box"===u.style.backgroundClip,wt.extend(It,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),n},reliableTrDimensions:function(){var t,e,i,r;return null==s&&(t=bt.createElement("table"),e=bt.createElement("tr"),i=bt.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="box-sizing:content-box;border:1px solid",e.style.height="1px",i.style.height="9px",i.style.display="block",re.appendChild(t).appendChild(e).appendChild(i),r=a.getComputedStyle(e),s=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===e.offsetHeight,re.removeChild(t)),s}}))}();var xe=["Webkit","Moz","ms"],be=bt.createElement("div").style,ye={},Ee=/^(none|table(?!-c[ea]).+)/,we={position:"absolute",visibility:"hidden",display:"block"},Fe={letterSpacing:"0",fontWeight:"400"};wt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var a=V(t,"opacity");return""===a?"1":a}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,a,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,n,o,s=g(e),l=ge.test(e),h=t.style;if(l||(e=X(s)),o=wt.cssHooks[e]||wt.cssHooks[s],void 0===a)return o&&"get"in o&&void 0!==(r=o.get(t,!1,i))?r:h[e];n=typeof a,"string"===n&&(r=ae.exec(a))&&r[1]&&(a=x(t,e,r),n="number"),null!=a&&a===a&&("number"!==n||l||(a+=r&&r[3]||(wt.cssNumber[s]?"":"px")),It.clearCloneStyle||""!==a||0!==e.indexOf("background")||(h[e]="inherit"),o&&"set"in o&&void 0===(a=o.set(t,a,i))||(l?h.setProperty(e,a):h[e]=a))}},css:function(t,e,a,i){var r,n,o,s=g(e);return ge.test(e)||(e=X(s)),o=wt.cssHooks[e]||wt.cssHooks[s],o&&"get"in o&&(r=o.get(t,!0,a)),void 0===r&&(r=V(t,e,i)),"normal"===r&&e in Fe&&(r=Fe[e]),""===a||a?(n=parseFloat(r),!0===a||isFinite(n)?n||0:r):r}}),wt.each(["height","width"],function(t,e){wt.cssHooks[e]={get:function(t,a,i){if(a)return!Ee.test(wt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?K(t,e,i):Ie(t,we,function(){return K(t,e,i)})},set:function(t,a,i){var r,n=Te(t),o=!It.scrollboxSize()&&"absolute"===n.position,s=o||i,l=s&&"border-box"===wt.css(t,"boxSizing",!1,n),h=i?U(t,e,i,l,n):0;return l&&o&&(h-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(n[e])-U(t,e,"border",!1,n)-.5)),h&&(r=ae.exec(a))&&"px"!==(r[3]||"px")&&(t.style[e]=a,a=wt.css(t,e)),W(t,a,h)}}}),wt.cssHooks.marginLeft=H(It.reliableMarginLeft,function(t,e){if(e)return(parseFloat(V(t,"marginLeft"))||t.getBoundingClientRect().left-Ie(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),wt.each({margin:"",padding:"",border:"Width"},function(t,e){wt.cssHooks[t+e]={expand:function(a){for(var i=0,r={},n="string"==typeof a?a.split(" "):[a];i<4;i++)r[t+ie[i]+e]=n[i]||n[i-2]||n[0];return r}},"margin"!==t&&(wt.cssHooks[t+e].set=W)}),wt.fn.extend({css:function(t,e){return zt(this,function(t,e,a){var i,r,n={},o=0;if(Array.isArray(e)){for(i=Te(t),r=e.length;o<r;o++)n[e[o]]=wt.css(t,e[o],!1,i);return n}return void 0!==a?wt.style(t,e,a):wt.css(t,e)},t,e,arguments.length>1)}}),wt.Tween=z,z.prototype={constructor:z,init:function(t,e,a,i,r,n){this.elem=t,this.prop=a,this.easing=r||wt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=n||(wt.cssNumber[a]?"":"px")},cur:function(){var t=z.propHooks[this.prop];return t&&t.get?t.get(this):z.propHooks._default.get(this)},run:function(t){var e,a=z.propHooks[this.prop];return this.options.duration?this.pos=e=wt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),a&&a.set?a.set(this):z.propHooks._default.set(this),this}},z.prototype.init.prototype=z.prototype,z.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=wt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){wt.fx.step[t.prop]?wt.fx.step[t.prop](t):1!==t.elem.nodeType||!wt.cssHooks[t.prop]&&null==t.elem.style[X(t.prop)]?t.elem[t.prop]=t.now:wt.style(t.elem,t.prop,t.now+t.unit)}}},z.propHooks.scrollTop=z.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},wt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},wt.fx=z.prototype.init,wt.fx.step={};var Me,Le,Ne=/^(?:toggle|show|hide)$/,Re=/queueHooks$/;wt.Animation=wt.extend(tt,{tweeners:{"*":[function(t,e){var a=this.createTween(t,e);return x(a.elem,t,ae.exec(e),a),a}]},tweener:function(t,e){St(t)?(e=t,t=["*"]):t=t.match(Wt);for(var a,i=0,r=t.length;i<r;i++)a=t[i],tt.tweeners[a]=tt.tweeners[a]||[],tt.tweeners[a].unshift(e)},prefilters:[Q],prefilter:function(t,e){e?tt.prefilters.unshift(t):tt.prefilters.push(t)}}),wt.speed=function(t,e,a){var i=t&&"object"==typeof t?wt.extend({},t):{complete:a||!a&&e||St(t)&&t,duration:t,easing:a&&e||e&&!St(e)&&e};return wt.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in wt.fx.speeds?i.duration=wt.fx.speeds[i.duration]:i.duration=wt.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){St(i.old)&&i.old.call(this),i.queue&&wt.dequeue(this,i.queue)},i},wt.fn.extend({fadeTo:function(t,e,a,i){return this.filter(se).css("opacity",0).show().end().animate({opacity:e},t,a,i)},animate:function(t,e,a,i){var r=wt.isEmptyObject(t),n=wt.speed(e,a,i),o=function(){var e=tt(this,wt.extend({},t),n);(r||jt.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||!1===n.queue?this.each(o):this.queue(n.queue,o)},stop:function(t,e,a){var i=function(t){var e=t.stop;delete t.stop,e(a)};return"string"!=typeof t&&(a=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",n=wt.timers,o=jt.get(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&Re.test(r)&&i(o[r]);for(r=n.length;r--;)n[r].elem!==this||null!=t&&n[r].queue!==t||(n[r].anim.stop(a),e=!1,n.splice(r,1));!e&&a||wt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,a=jt.get(this),i=a[t+"queue"],r=a[t+"queueHooks"],n=wt.timers,o=i?i.length:0;for(a.finish=!0,wt.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=n.length;e--;)n[e].elem===this&&n[e].queue===t&&(n[e].anim.stop(!0),n.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete a.finish})}}),wt.each(["toggle","show","hide"],function(t,e){var a=wt.fn[e];wt.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?a.apply(this,arguments):this.animate(Z(e,!0),t,i,r)}}),wt.each({slideDown:Z("show"),slideUp:Z("hide"),slideToggle:Z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){wt.fn[t]=function(t,a,i){return this.animate(e,t,a,i)}}),wt.timers=[],wt.fx.tick=function(){var t,e=0,a=wt.timers;for(Me=Date.now();e<a.length;e++)(t=a[e])()||a[e]!==t||a.splice(e--,1);a.length||wt.fx.stop(),Me=void 0},wt.fx.timer=function(t){wt.timers.push(t),wt.fx.start()},wt.fx.interval=13,wt.fx.start=function(){Le||(Le=!0,J())},wt.fx.stop=function(){Le=null},wt.fx.speeds={slow:600,fast:200,_default:400},wt.fn.delay=function(t,e){return t=wt.fx?wt.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var r=a.setTimeout(e,t);i.stop=function(){a.clearTimeout(r)}})},function(){var t=bt.createElement("input"),e=bt.createElement("select"),a=e.appendChild(bt.createElement("option"));t.type="checkbox",It.checkOn=""!==t.value,It.optSelected=a.selected,t=bt.createElement("input"),t.value="t",t.type="radio",It.radioValue="t"===t.value}();var Ae,Oe=wt.expr.attrHandle;wt.fn.extend({attr:function(t,e){return zt(this,wt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){wt.removeAttr(this,t)})}}),wt.extend({attr:function(t,e,a){var i,r,n=t.nodeType;if(3!==n&&8!==n&&2!==n)return void 0===t.getAttribute?wt.prop(t,e,a):(1===n&&wt.isXMLDoc(t)||(r=wt.attrHooks[e.toLowerCase()]||(wt.expr.match.bool.test(e)?Ae:void 0)),void 0!==a?null===a?void wt.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,a,e))?i:(t.setAttribute(e,a+""),a):r&&"get"in r&&null!==(i=r.get(t,e))?i:(i=wt.find.attr(t,e),null==i?void 0:i))},attrHooks:{type:{set:function(t,e){if(!It.radioValue&&"radio"===e&&h(t,"input")){var a=t.value;return t.setAttribute("type",e),a&&(t.value=a),e}}}},removeAttr:function(t,e){var a,i=0,r=e&&e.match(Wt);if(r&&1===t.nodeType)for(;a=r[i++];)t.removeAttribute(a)}}),Ae={set:function(t,e,a){return!1===e?wt.removeAttr(t,a):t.setAttribute(a,a),a}},wt.each(wt.expr.match.bool.source.match(/\w+/g),function(t,e){var a=Oe[e]||wt.find.attr;Oe[e]=function(t,e,i){var r,n,o=e.toLowerCase();return i||(n=Oe[o],Oe[o]=r,r=null!=a(t,e,i)?o:null,Oe[o]=n),r}});var Pe=/^(?:input|select|textarea|button)$/i,Be=/^(?:a|area)$/i;wt.fn.extend({prop:function(t,e){return zt(this,wt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[wt.propFix[t]||t]})}}),wt.extend({prop:function(t,e,a){var i,r,n=t.nodeType;if(3!==n&&8!==n&&2!==n)return 1===n&&wt.isXMLDoc(t)||(e=wt.propFix[e]||e,r=wt.propHooks[e]),void 0!==a?r&&"set"in r&&void 0!==(i=r.set(t,a,e))?i:t[e]=a:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=wt.find.attr(t,"tabindex");return e?parseInt(e,10):Pe.test(t.nodeName)||Be.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),It.optSelected||(wt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),wt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){wt.propFix[this.toLowerCase()]=this}),wt.fn.extend({addClass:function(t){var e,a,i,r,n,o;return St(t)?this.each(function(e){wt(this).addClass(t.call(this,e,at(this)))}):(e=it(t),e.length?this.each(function(){if(i=at(this),a=1===this.nodeType&&" "+et(i)+" "){for(n=0;n<e.length;n++)r=e[n],a.indexOf(" "+r+" ")<0&&(a+=r+" ");o=et(a),i!==o&&this.setAttribute("class",o)}}):this)},removeClass:function(t){var e,a,i,r,n,o;return St(t)?this.each(function(e){wt(this).removeClass(t.call(this,e,at(this)))}):arguments.length?(e=it(t),e.length?this.each(function(){if(i=at(this),a=1===this.nodeType&&" "+et(i)+" "){for(n=0;n<e.length;n++)for(r=e[n];a.indexOf(" "+r+" ")>-1;)a=a.replace(" "+r+" "," ");o=et(a),i!==o&&this.setAttribute("class",o)}}):this):this.attr("class","")},toggleClass:function(t,e){var a,i,r,n,o=typeof t,s="string"===o||Array.isArray(t);return St(t)?this.each(function(a){wt(this).toggleClass(t.call(this,a,at(this),e),e)}):"boolean"==typeof e&&s?e?this.addClass(t):this.removeClass(t):(a=it(t),this.each(function(){if(s)for(n=wt(this),r=0;r<a.length;r++)i=a[r],n.hasClass(i)?n.removeClass(i):n.addClass(i);else void 0!==t&&"boolean"!==o||(i=at(this),i&&jt.set(this,"__className__",i),this.setAttribute&&this.setAttribute("class",i||!1===t?"":jt.get(this,"__className__")||""))}))},hasClass:function(t){var e,a,i=0;for(e=" "+t+" ";a=this[i++];)if(1===a.nodeType&&(" "+et(at(a))+" ").indexOf(e)>-1)return!0;return!1}});var _e=/\r/g;wt.fn.extend({val:function(t){var e,a,i,r=this[0];{if(arguments.length)return i=St(t),this.each(function(a){var r;1===this.nodeType&&(r=i?t.call(this,a,wt(this).val()):t,null==r?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=wt.map(r,function(t){return null==t?"":t+""})),(e=wt.valHooks[this.type]||wt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return(e=wt.valHooks[r.type]||wt.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(a=e.get(r,"value"))?a:(a=r.value,"string"==typeof a?a.replace(_e,""):null==a?"":a)}}}),wt.extend({valHooks:{option:{get:function(t){var e=wt.find.attr(t,"value");return null!=e?e:et(wt.text(t))}},select:{get:function(t){var e,a,i,r=t.options,n=t.selectedIndex,o="select-one"===t.type,s=o?null:[],l=o?n+1:r.length;for(i=n<0?l:o?n:0;i<l;i++)if(a=r[i],(a.selected||i===n)&&!a.disabled&&(!a.parentNode.disabled||!h(a.parentNode,"optgroup"))){if(e=wt(a).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var a,i,r=t.options,n=wt.makeArray(e),o=r.length;o--;)i=r[o],(i.selected=wt.inArray(wt.valHooks.option.get(i),n)>-1)&&(a=!0);return a||(t.selectedIndex=-1),n}}}}),wt.each(["radio","checkbox"],function(){wt.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=wt.inArray(wt(t).val(),e)>-1}},It.checkOn||(wt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Ge=a.location,ke={guid:Date.now()},Ve=/\?/;wt.parseXML=function(t){var e,i;if(!t||"string"!=typeof t)return null;try{e=(new a.DOMParser).parseFromString(t,"text/xml")}catch(t){}return i=e&&e.getElementsByTagName("parsererror")[0],e&&!i||wt.error("Invalid XML: "+(i?wt.map(i.childNodes,function(t){return t.textContent}).join("\n"):t)),e};var He=/^(?:focusinfocus|focusoutblur)$/,Ye=function(t){t.stopPropagation()};wt.extend(wt.event,{trigger:function(t,e,i,r){var n,o,s,l,h,u,C,c,f=[i||bt],d=vt.call(t,"type")?t.type:t,D=vt.call(t,"namespace")?t.namespace.split("."):[];if(o=c=s=i=i||bt,3!==i.nodeType&&8!==i.nodeType&&!He.test(d+wt.event.triggered)&&(d.indexOf(".")>-1&&(D=d.split("."),d=D.shift(),D.sort()),h=d.indexOf(":")<0&&"on"+d,t=t[wt.expando]?t:new wt.Event(d,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=D.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+D.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),e=null==e?[t]:wt.makeArray(e,[t]),C=wt.event.special[d]||{},r||!C.trigger||!1!==C.trigger.apply(i,e))){if(!r&&!C.noBubble&&!xt(i)){for(l=C.delegateType||d,He.test(l+d)||(o=o.parentNode);o;o=o.parentNode)f.push(o),s=o;s===(i.ownerDocument||bt)&&f.push(s.defaultView||s.parentWindow||a)}for(n=0;(o=f[n++])&&!t.isPropagationStopped();)c=o,t.type=n>1?l:C.bindType||d,u=(jt.get(o,"events")||Object.create(null))[t.type]&&jt.get(o,"handle"),u&&u.apply(o,e),(u=h&&o[h])&&u.apply&&Zt(o)&&(t.result=u.apply(o,e),!1===t.result&&t.preventDefault());return t.type=d,r||t.isDefaultPrevented()||C._default&&!1!==C._default.apply(f.pop(),e)||!Zt(i)||h&&St(i[d])&&!xt(i)&&(s=i[h],s&&(i[h]=null),wt.event.triggered=d,t.isPropagationStopped()&&c.addEventListener(d,Ye),i[d](),t.isPropagationStopped()&&c.removeEventListener(d,Ye),wt.event.triggered=void 0,s&&(i[h]=s)),t.result}},simulate:function(t,e,a){var i=wt.extend(new wt.Event,a,{type:t,isSimulated:!0});wt.event.trigger(i,null,e)}}),wt.fn.extend({trigger:function(t,e){return this.each(function(){wt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var a=this[0];if(a)return wt.event.trigger(t,e,a,!0)}});var Xe=/\[\]$/,We=/\r?\n/g,Ue=/^(?:submit|button|image|reset|file)$/i,Ke=/^(?:input|select|textarea|keygen)/i;wt.param=function(t,e){var a,i=[],r=function(t,e){var a=St(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==a?"":a)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!wt.isPlainObject(t))wt.each(t,function(){r(this.name,this.value)});else for(a in t)rt(a,t[a],e,r);return i.join("&")},wt.fn.extend({serialize:function(){return wt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=wt.prop(this,"elements");return t?wt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!wt(this).is(":disabled")&&Ke.test(this.nodeName)&&!Ue.test(t)&&(this.checked||!he.test(t))}).map(function(t,e){var a=wt(this).val();return null==a?null:Array.isArray(a)?wt.map(a,function(t){return{name:e.name,value:t.replace(We,"\r\n")}}):{name:e.name,value:a.replace(We,"\r\n")}}).get()}});var ze=/%20/g,Je=/#.*$/,qe=/([?&])_=[^&]*/,Ze=/^(.*?):[ \t]*([^\r\n]*)$/gm,je=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Qe=/^(?:GET|HEAD)$/,$e=/^\/\//,ta={},ea={},aa="*/".concat("*"),ia=bt.createElement("a");ia.href=Ge.href,wt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ge.href,type:"GET",isLocal:je.test(Ge.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":aa,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":wt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?st(st(t,wt.ajaxSettings),e):st(wt.ajaxSettings,t)},ajaxPrefilter:nt(ta),ajaxTransport:nt(ea),ajax:function(t,e){function i(t,e,i,s){var h,c,f,T,I,S=e;u||(u=!0,l&&a.clearTimeout(l),r=void 0,o=s||"",x.readyState=t>0?4:0,h=t>=200&&t<300||304===t,i&&(T=lt(d,x,i)),!h&&wt.inArray("script",d.dataTypes)>-1&&wt.inArray("json",d.dataTypes)<0&&(d.converters["text script"]=function(){}),T=ht(d,T,x,h),h?(d.ifModified&&(I=x.getResponseHeader("Last-Modified"),I&&(wt.lastModified[n]=I),(I=x.getResponseHeader("etag"))&&(wt.etag[n]=I)),204===t||"HEAD"===d.type?S="nocontent":304===t?S="notmodified":(S=T.state,c=T.data,f=T.error,h=!f)):(f=S,!t&&S||(S="error",t<0&&(t=0))),x.status=t,x.statusText=(e||S)+"",h?p.resolveWith(D,[c,S,x]):p.rejectWith(D,[x,S,f]),x.statusCode(g),g=void 0,C&&m.trigger(h?"ajaxSuccess":"ajaxError",[x,d,h?c:f]),v.fireWith(D,[x,S]),C&&(m.trigger("ajaxComplete",[x,d]),--wt.active||wt.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,n,o,s,l,h,u,C,c,f,d=wt.ajaxSetup({},e),D=d.context||d,m=d.context&&(D.nodeType||D.jquery)?wt(D):wt.event,p=wt.Deferred(),v=wt.Callbacks("once memory"),g=d.statusCode||{},T={},I={},S="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(u){if(!s)for(s={};e=Ze.exec(o);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(t,e){return null==u&&(t=I[t.toLowerCase()]=I[t.toLowerCase()]||t,T[t]=e),this},overrideMimeType:function(t){return null==u&&(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)x.always(t[x.status]);else for(e in t)g[e]=[g[e],t[e]];return this},abort:function(t){var e=t||S;return r&&r.abort(e),i(0,e),this}};if(p.promise(x),d.url=((t||d.url||Ge.href)+"").replace($e,Ge.protocol+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(Wt)||[""],null==d.crossDomain){h=bt.createElement("a");try{h.href=d.url,h.href=h.href,d.crossDomain=ia.protocol+"//"+ia.host!=h.protocol+"//"+h.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=wt.param(d.data,d.traditional)),ot(ta,d,e,x),u)return x;C=wt.event&&d.global,C&&0==wt.active++&&wt.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Qe.test(d.type),n=d.url.replace(Je,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(ze,"+")):(f=d.url.slice(n.length),d.data&&(d.processData||"string"==typeof d.data)&&(n+=(Ve.test(n)?"&":"?")+d.data,delete d.data),!1===d.cache&&(n=n.replace(qe,"$1"),f=(Ve.test(n)?"&":"?")+"_="+ke.guid+++f),d.url=n+f),d.ifModified&&(wt.lastModified[n]&&x.setRequestHeader("If-Modified-Since",wt.lastModified[n]),wt.etag[n]&&x.setRequestHeader("If-None-Match",wt.etag[n])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&x.setRequestHeader("Content-Type",d.contentType),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+aa+"; q=0.01":""):d.accepts["*"]);for(c in d.headers)x.setRequestHeader(c,d.headers[c]);if(d.beforeSend&&(!1===d.beforeSend.call(D,x,d)||u))return x.abort();if(S="abort",v.add(d.complete),x.done(d.success),x.fail(d.error),r=ot(ea,d,e,x)){if(x.readyState=1,C&&m.trigger("ajaxSend",[x,d]),u)return x;d.async&&d.timeout>0&&(l=a.setTimeout(function(){x.abort("timeout")},d.timeout));try{u=!1,r.send(T,i)}catch(t){if(u)throw t;i(-1,t)}}else i(-1,"No Transport");return x},getJSON:function(t,e,a){return wt.get(t,e,a,"json")},getScript:function(t,e){return wt.get(t,void 0,e,"script")}}),wt.each(["get","post"],function(t,e){wt[e]=function(t,a,i,r){return St(a)&&(r=r||i,i=a,a=void 0),wt.ajax(wt.extend({url:t,type:e,dataType:r,data:a,success:i},wt.isPlainObject(t)&&t))}}),wt.ajaxPrefilter(function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),wt._evalUrl=function(t,e,a){return wt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){wt.globalEval(t,e,a)}})},wt.fn.extend({wrapAll:function(t){var e;return this[0]&&(St(t)&&(t=t.call(this[0])),e=wt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return St(t)?this.each(function(e){wt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=wt(this),a=e.contents();a.length?a.wrapAll(t):e.append(t)})},wrap:function(t){var e=St(t);return this.each(function(a){wt(this).wrapAll(e?t.call(this,a):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){wt(this).replaceWith(this.childNodes)}),this}}),wt.expr.pseudos.hidden=function(t){return!wt.expr.pseudos.visible(t)},wt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},wt.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(t){}};var ra={0:200,1223:204},na=wt.ajaxSettings.xhr();It.cors=!!na&&"withCredentials"in na,It.ajax=na=!!na,wt.ajaxTransport(function(t){var e,i;if(It.cors||na&&!t.crossDomain)return{send:function(r,n){var o,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(o in r)s.setRequestHeader(o,r[o]);e=function(t){return function(){e&&(e=i=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?n(0,"error"):n(s.status,s.statusText):n(ra[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),i=s.onerror=s.ontimeout=e("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&a.setTimeout(function(){e&&i()})},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),wt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),wt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return wt.globalEval(t),t}}}),wt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),wt.ajaxTransport("script",function(t){if(t.crossDomain||t.scriptAttrs){var e,a;return{send:function(i,r){e=wt("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",a=function(t){e.remove(),a=null,t&&r("error"===t.type?404:200,t.type)}),bt.head.appendChild(e[0])},abort:function(){a&&a()}}}});var oa=[],sa=/(=)\?(?=&|$)|\?\?/;wt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=oa.pop()||wt.expando+"_"+ke.guid++;return this[t]=!0,t}}),wt.ajaxPrefilter("json jsonp",function(t,e,i){var r,n,o,s=!1!==t.jsonp&&(sa.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&sa.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=St(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(sa,"$1"+r):!1!==t.jsonp&&(t.url+=(Ve.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||wt.error(r+" was not called"),o[0]},t.dataTypes[0]="json",n=a[r],a[r]=function(){o=arguments},i.always(function(){void 0===n?wt(a).removeProp(r):a[r]=n,t[r]&&(t.jsonpCallback=e.jsonpCallback,oa.push(r)),o&&St(n)&&n(o[0]),o=n=void 0}),"script"}),It.createHTMLDocument=function(){var t=bt.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),wt.parseHTML=function(t,e,a){if("string"!=typeof t)return[];"boolean"==typeof e&&(a=e,e=!1);var i,r,n;return e||(It.createHTMLDocument?(e=bt.implementation.createHTMLDocument(""),i=e.createElement("base"),i.href=bt.location.href,e.head.appendChild(i)):e=bt),r=kt.exec(t),n=!a&&[],r?[e.createElement(r[1])]:(r=F([t],e,n),n&&n.length&&wt(n).remove(),wt.merge([],r.childNodes))},wt.fn.load=function(t,e,a){var i,r,n,o=this,s=t.indexOf(" ");return s>-1&&(i=et(t.slice(s)),t=t.slice(0,s)),St(e)?(a=e,e=void 0):e&&"object"==typeof e&&(r="POST"),o.length>0&&wt.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){n=arguments,o.html(i?wt("<div>").append(wt.parseHTML(t)).find(i):t)}).always(a&&function(t,e){o.each(function(){a.apply(this,n||[t.responseText,e,t])})}),this},wt.expr.pseudos.animated=function(t){return wt.grep(wt.timers,function(e){return t===e.elem}).length},wt.offset={setOffset:function(t,e,a){var i,r,n,o,s,l,h,u=wt.css(t,"position"),C=wt(t),c={};"static"===u&&(t.style.position="relative"),s=C.offset(),n=wt.css(t,"top"),l=wt.css(t,"left"),h=("absolute"===u||"fixed"===u)&&(n+l).indexOf("auto")>-1,h?(i=C.position(),o=i.top,r=i.left):(o=parseFloat(n)||0,r=parseFloat(l)||0),St(e)&&(e=e.call(t,a,wt.extend({},s))),null!=e.top&&(c.top=e.top-s.top+o),null!=e.left&&(c.left=e.left-s.left+r),"using"in e?e.using.call(t,c):C.css(c)}},wt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){wt.offset.setOffset(this,t,e)});var e,a,i=this[0];if(i)return i.getClientRects().length?(e=i.getBoundingClientRect(),a=i.ownerDocument.defaultView,{top:e.top+a.pageYOffset,left:e.left+a.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var t,e,a,i=this[0],r={top:0,left:0};if("fixed"===wt.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),a=i.ownerDocument,t=i.offsetParent||a.documentElement;t&&(t===a.body||t===a.documentElement)&&"static"===wt.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&(r=wt(t).offset(),r.top+=wt.css(t,"borderTopWidth",!0),r.left+=wt.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-wt.css(i,"marginTop",!0),left:e.left-r.left-wt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===wt.css(t,"position");)t=t.offsetParent;return t||re})}}),wt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var a="pageYOffset"===e;wt.fn[t]=function(i){return zt(this,function(t,i,r){var n;if(xt(t)?n=t:9===t.nodeType&&(n=t.defaultView),void 0===r)return n?n[e]:t[i];n?n.scrollTo(a?n.pageXOffset:r,a?r:n.pageYOffset):t[i]=r},t,i,arguments.length)}}),wt.each(["top","left"],function(t,e){wt.cssHooks[e]=H(It.pixelPosition,function(t,a){if(a)return a=V(t,e),ve.test(a)?wt(t).position()[e]+"px":a})}),wt.each({Height:"height",Width:"width"},function(t,e){wt.each({padding:"inner"+t,content:e,"":"outer"+t},function(a,i){wt.fn[i]=function(r,n){var o=arguments.length&&(a||"boolean"!=typeof r),s=a||(!0===r||!0===n?"margin":"border");return zt(this,function(e,a,r){var n;return xt(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+t],n["scroll"+t],e.body["offset"+t],n["offset"+t],n["client"+t])):void 0===r?wt.css(e,a,s):wt.style(e,a,r,s)},e,o?r:void 0,o)}})}),wt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){wt.fn[e]=function(t){return this.on(e,t)}}),wt.fn.extend({bind:function(t,e,a){return this.on(t,null,e,a)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,a,i){return this.on(e,t,a,i)},undelegate:function(t,e,a){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",a)},hover:function(t,e){return this.on("mouseenter",t).on("mouseleave",e||t)}}),wt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){wt.fn[e]=function(t,a){return arguments.length>0?this.on(e,null,t,a):this.trigger(e)}});var la=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;wt.proxy=function(t,e){var a,i,r;if("string"==typeof e&&(a=t[e],e=t,t=a),St(t))return i=ct.call(arguments,2),r=function(){return t.apply(e||this,i.concat(ct.call(arguments)))},r.guid=t.guid=t.guid||wt.guid++,r},wt.holdReady=function(t){t?wt.readyWait++:wt.ready(!0)},wt.isArray=Array.isArray,wt.parseJSON=JSON.parse,wt.nodeName=h,wt.isFunction=St,wt.isWindow=xt,wt.camelCase=g,wt.type=s,wt.now=Date.now,wt.isNumeric=function(t){var e=wt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},wt.trim=function(t){return null==t?"":(t+"").replace(la,"$1")},i=[],void 0!==(r=function(){return wt}.apply(e,i))&&(t.exports=r);var ha=a.jQuery,ua=a.$;return wt.noConflict=function(t){return a.$===wt&&(a.$=ua),t&&a.jQuery===wt&&(a.jQuery=ha),wt},void 0===n&&(a.jQuery=a.$=wt),wt})},,,,function(t,e,a){t.exports={default:a(160),__esModule:!0}},function(t,e,a){t.exports={default:a(170),__esModule:!0}},,function(t,e,a){"use strict";var i=a(8).f,r=a(33),n=a(57),o=a(13),s=a(47),l=a(24),h=a(53),u=a(91),C=a(100),c=a(7),f=a(54).fastKey,d=a(62),D=c?"_s":"size",m=function(t,e){var a,i=f(e);if("F"!==i)return t._i[i];for(a=t._f;a;a=a.n)if(a.k==e)return a};t.exports={getConstructor:function(t,e,a,h){var u=t(function(t,i){s(t,u,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[D]=0,void 0!=i&&l(i,a,t[h],t)});return n(u.prototype,{clear:function(){for(var t=d(this,e),a=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete a[i.i];t._f=t._l=void 0,t[D]=0},delete:function(t){var a=d(this,e),i=m(a,t);if(i){var r=i.n,n=i.p;delete a._i[i.i],i.r=!0,n&&(n.n=r),r&&(r.p=n),a._f==i&&(a._f=r),a._l==i&&(a._l=n),a[D]--}return!!i},forEach:function(t){d(this,e);for(var a,i=o(t,arguments.length>1?arguments[1]:void 0,3);a=a?a.n:this._f;)for(i(a.v,a.k,this);a&&a.r;)a=a.p},has:function(t){return!!m(d(this,e),t)}}),c&&i(u.prototype,"size",{get:function(){return d(this,e)[D]}}),u},def:function(t,e,a){var i,r,n=m(t,e);return n?n.v=a:(t._l=n={i:r=f(e,!0),k:e,v:a,p:i=t._l,n:void 0,r:!1},t._f||(t._f=n),i&&(i.n=n),t[D]++,"F"!==r&&(t._i[r]=n)),t},getEntry:m,setStrong:function(t,e,a){h(t,e,function(t,a){this._t=d(t,e),this._k=a,this._l=void 0},function(){for(var t=this,e=t._k,a=t._l;a&&a.r;)a=a.p;return t._t&&(t._l=a=a?a.n:t._t._f)?"keys"==e?u(0,a.k):"values"==e?u(0,a.v):u(0,[a.k,a.v]):(t._t=void 0,u(1))},a?"entries":"values",!a,!0),C(e)}}},function(t,e,a){var i=a(48),r=a(174);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},function(t,e,a){"use strict";var i=a(4),r=a(3),n=a(54),o=a(18),s=a(14),l=a(57),h=a(24),u=a(47),C=a(10),c=a(28),f=a(8).f,d=a(176)(0),D=a(7);t.exports=function(t,e,a,m,p,v){var g=i[t],T=g,I=p?"set":"add",S=T&&T.prototype,x={};return D&&"function"==typeof T&&(v||S.forEach&&!o(function(){(new T).entries().next()}))?(T=e(function(e,a){u(e,T,t,"_c"),e._c=new g,void 0!=a&&h(a,p,e[I],e)}),d("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in S&&(!v||"clear"!=t)&&s(T.prototype,t,function(a,i){if(u(this,T,t),!e&&v&&!C(a))return"get"==t&&void 0;var r=this._c[t](0===a?0:a,i);return e?this:r})}),v||f(T.prototype,"size",{get:function(){return this._c.size}})):(T=m.getConstructor(e,t,p,I),l(T.prototype,a),n.NEED=!0),c(T,t),x[t]=T,r(r.G+r.W+r.F,x),v||m.setStrong(T,t,p),T}},,,function(t,e,a){var i=a(25),r=a(6)("iterator"),n=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||n[r]===t)}},,function(t,e,a){var i=a(11);t.exports=function(t,e,a,r){try{return r?e(i(a)[0],a[1]):e(a)}catch(e){var n=t.return;throw void 0!==n&&i(n.call(t)),e}}},function(t,e,a){var i=a(6)("iterator"),r=!1;try{var n=[7][i]();n.return=function(){r=!0},Array.from(n,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var a=!1;try{var n=[7],o=n[i]();o.next=function(){return{done:a=!0}},n[i]=function(){return o},t(n)}catch(t){}return a}},,,,,function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,a){var i=a(11),r=a(10),n=a(55);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var a=n.f(t);return(0,a.resolve)(e),a.promise}},,function(t,e,a){"use strict";var i=a(3),r=a(22),n=a(13),o=a(24);t.exports=function(t){i(i.S,t,{from:function(t){var e,a,i,s,l=arguments[1];return r(this),e=void 0!==l,e&&r(l),void 0==t?new this:(a=[],e?(i=0,s=n(l,arguments[2],2),o(t,!1,function(t){a.push(s(t,i++))})):o(t,!1,a.push,a),new this(a))}})}},function(t,e,a){"use strict";var i=a(3);t.exports=function(t){i(i.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,a){"use strict";var i=a(4),r=a(1),n=a(8),o=a(7),s=a(6)("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:i[t];o&&e&&!e[s]&&n.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,a){var i=a(11),r=a(22),n=a(6)("species");t.exports=function(t,e){var a,o=i(t).constructor;return void 0===o||void 0==(a=i(o)[n])?e:r(a)}},function(t,e,a){var i,r,n,o=a(13),s=a(181),l=a(85),h=a(50),u=a(4),C=u.process,c=u.setImmediate,f=u.clearImmediate,d=u.MessageChannel,D=u.Dispatch,m=0,p={},v=function(){var t=+this;if(p.hasOwnProperty(t)){var e=p[t];delete p[t],e()}},g=function(t){v.call(t.data)};c&&f||(c=function(t){for(var e=[],a=1;arguments.length>a;)e.push(arguments[a++]);return p[++m]=function(){s("function"==typeof t?t:Function(t),e)},i(m),m},f=function(t){delete p[t]},"process"==a(23)(C)?i=function(t){C.nextTick(o(v,t,1))}:D&&D.now?i=function(t){D.now(o(v,t,1))}:d?(r=new d,n=r.port2,r.port1.onmessage=g,i=o(n.postMessage,n,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(i=function(t){u.postMessage(t+"","*")},u.addEventListener("message",g,!1)):i="onreadystatechange"in h("script")?function(t){l.appendChild(h("script")).onreadystatechange=function(){l.removeChild(this),v.call(t)}}:function(t){setTimeout(o(v,t,1),0)}),t.exports={set:c,clear:f}},,,,,,,,,function(t,e,a){"use strict";t.exports.Chart=a(241).default,t.exports.Stock=a(240).default,t.exports.RegressionTest=a(239).default},,,,,function(t,e,a){"use strict";e.__esModule=!0,e.default={el:{colorpicker:{confirm:"OK",clear:"Clear"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:""},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},empty:{description:"No Data"}}}},function(t,e,a){(function(e){!function(a){function i(){}function r(t,e){return function(){t.apply(e,arguments)}}function n(t){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],C(t,this)}function o(t,e){for(;3===t._state;)t=t._value;if(0===t._state)return void t._deferreds.push(e);t._handled=!0,n._immediateFn(function(){var a=1===t._state?e.onFulfilled:e.onRejected;if(null===a)return void(1===t._state?s:l)(e.promise,t._value);var i;try{i=a(t._value)}catch(t){return void l(e.promise,t)}s(e.promise,i)})}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var a=e.then;if(e instanceof n)return t._state=3,t._value=e,void h(t);if("function"==typeof a)return void C(r(a,e),t)}t._state=1,t._value=e,h(t)}catch(e){l(t,e)}}function l(t,e){t._state=2,t._value=e,h(t)}function h(t){2===t._state&&0===t._deferreds.length&&n._immediateFn(function(){t._handled||n._unhandledRejectionFn(t._value)});for(var e=0,a=t._deferreds.length;e<a;e++)o(t,t._deferreds[e]);t._deferreds=null}function u(t,e,a){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=a}function C(t,e){var a=!1;try{t(function(t){a||(a=!0,s(e,t))},function(t){a||(a=!0,l(e,t))})}catch(t){if(a)return;a=!0,l(e,t)}}var c=setTimeout;n.prototype.catch=function(t){return this.then(null,t)},n.prototype.then=function(t,e){var a=new this.constructor(i);return o(this,new u(t,e,a)),a},n.all=function(t){return new n(function(e,a){function i(t,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s)return void s.call(o,function(e){i(t,e)},a)}r[t]=o,0==--n&&e(r)}catch(t){a(t)}}if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);for(var n=r.length,o=0;o<r.length;o++)i(o,r[o])})},n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n(function(e){e(t)})},n.reject=function(t){return new n(function(e,a){a(t)})},n.race=function(t){return new n(function(e,a){for(var i=0,r=t.length;i<r;i++)t[i].then(e,a)})},n._immediateFn="function"==typeof e&&function(t){e(t)}||function(t){c(t,0)},n._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},n._setImmediateFn=function(t){n._immediateFn=t},n._setUnhandledRejectionFn=function(t){n._unhandledRejectionFn=t},void 0!==t&&t.exports?t.exports=n:a.Promise||(a.Promise=n)}(this)}).call(e,a(113).setImmediate)},function(t,e,a){var i=a(213);"string"==typeof i&&(i=[[t.i,i,""]]);a(42)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,a){a(265);var i=a(263)(a(143),a(264),null,null);t.exports=i.exports},function(t,e,a){"use strict";function i(t,e){}function r(t){return Object.prototype.toString.call(t).indexOf("Error")>-1}function n(t,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(t);case"boolean":return e?t.params:void 0}}function o(t,e){for(var a in e)t[a]=e[a];return t}function s(t,e,a){void 0===e&&(e={});var i,r=a||l;try{i=r(t||"")}catch(t){i={}}for(var n in e)i[n]=e[n];return i}function l(t){var e={};return(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach(function(t){var a=t.replace(/\+/g," ").split("="),i=Vt(a.shift()),r=a.length>0?Vt(a.join("=")):null;void 0===e[i]?e[i]=r:Array.isArray(e[i])?e[i].push(r):e[i]=[e[i],r]}),e):e}function h(t){var e=t?Object.keys(t).map(function(e){var a=t[e];if(void 0===a)return"";if(null===a)return kt(e);if(Array.isArray(a)){var i=[];return a.forEach(function(t){void 0!==t&&(null===t?i.push(kt(e)):i.push(kt(e)+"="+kt(t)))}),i.join("&")}return kt(e)+"="+kt(a)}).filter(function(t){return t.length>0}).join("&"):null;return e?"?"+e:""}function u(t,e,a,i){var r=i&&i.options.stringifyQuery,n=e.query||{};try{n=C(n)}catch(t){}var o={name:e.name||t&&t.name,meta:t&&t.meta||{},path:e.path||"/",hash:e.hash||"",query:n,params:e.params||{},fullPath:f(e,r),matched:t?c(t):[]};return a&&(o.redirectedFrom=f(a,r)),Object.freeze(o)}function C(t){if(Array.isArray(t))return t.map(C);if(t&&"object"==typeof t){var e={};for(var a in t)e[a]=C(t[a]);return e}return t}function c(t){for(var e=[];t;)e.unshift(t),t=t.parent;return e}function f(t,e){var a=t.path,i=t.query;void 0===i&&(i={});var r=t.hash;void 0===r&&(r="");var n=e||h;return(a||"/")+n(i)+r}function d(t,e){return e===Yt?t===e:!!e&&(t.path&&e.path?t.path.replace(Ht,"")===e.path.replace(Ht,"")&&t.hash===e.hash&&D(t.query,e.query):!(!t.name||!e.name)&&(t.name===e.name&&t.hash===e.hash&&D(t.query,e.query)&&D(t.params,e.params)))}function D(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),!t||!e)return t===e;var a=Object.keys(t),i=Object.keys(e);return a.length===i.length&&a.every(function(a){var i=t[a],r=e[a];return"object"==typeof i&&"object"==typeof r?D(i,r):String(i)===String(r)})}function m(t,e){return 0===t.path.replace(Ht,"/").indexOf(e.path.replace(Ht,"/"))&&(!e.hash||t.hash===e.hash)&&p(t.query,e.query)}function p(t,e){for(var a in e)if(!(a in t))return!1;return!0}function v(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||t.defaultPrevented||void 0!==t.button&&0!==t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){if(/\b_blank\b/i.test(t.currentTarget.getAttribute("target")))return}return t.preventDefault&&t.preventDefault(),!0}}function g(t){if(t)for(var e,a=0;a<t.length;a++){if(e=t[a],"a"===e.tag)return e;if(e.children&&(e=g(e.children)))return e}}function T(t){if(!T.installed||Ot!==t){T.installed=!0,Ot=t;var e=function(t){return void 0!==t},a=function(t,a){var i=t.$options._parentVnode;e(i)&&e(i=i.data)&&e(i=i.registerRouteInstance)&&i(t,a)};t.mixin({beforeCreate:function(){e(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,a(this,this)},destroyed:function(){a(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("router-view",Pt),t.component("router-link",Ut);var i=t.config.optionMergeStrategies;i.beforeRouteEnter=i.beforeRouteLeave=i.beforeRouteUpdate=i.created}}function I(t,e,a){var i=t.charAt(0);if("/"===i)return t;if("?"===i||"#"===i)return e+t;var r=e.split("/");a&&r[r.length-1]||r.pop();for(var n=t.replace(/^\//,"").split("/"),o=0;o<n.length;o++){var s=n[o];".."===s?r.pop():"."!==s&&r.push(s)}return""!==r[0]&&r.unshift(""),r.join("/")}function S(t){var e="",a="",i=t.indexOf("#");i>=0&&(e=t.slice(i),t=t.slice(0,i));var r=t.indexOf("?");return r>=0&&(a=t.slice(r+1),t=t.slice(0,r)),{path:t,query:a,hash:e}}function x(t){return t.replace(/\/\//g,"/")}function b(t,e){for(var a,i=[],r=0,n=0,o="",s=e&&e.delimiter||"/";null!=(a=$t.exec(t));){var l=a[0],h=a[1],u=a.index;if(o+=t.slice(n,u),n=u+l.length,h)o+=h[1];else{var C=t[n],c=a[2],f=a[3],d=a[4],D=a[5],m=a[6],p=a[7];o&&(i.push(o),o="");var v=null!=c&&null!=C&&C!==c,g="+"===m||"*"===m,T="?"===m||"*"===m,I=a[2]||s,S=d||D;i.push({name:f||r++,prefix:c||"",delimiter:I,optional:T,repeat:g,partial:v,asterisk:!!p,pattern:S?L(S):p?".*":"[^"+M(I)+"]+?"})}}return n<t.length&&(o+=t.substr(n)),o&&i.push(o),i}function y(t,e){return F(b(t,e))}function E(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function w(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function F(t){for(var e=new Array(t.length),a=0;a<t.length;a++)"object"==typeof t[a]&&(e[a]=new RegExp("^(?:"+t[a].pattern+")$"));return function(a,i){for(var r="",n=a||{},o=i||{},s=o.pretty?E:encodeURIComponent,l=0;l<t.length;l++){var h=t[l];if("string"!=typeof h){var u,C=n[h.name];if(null==C){if(h.optional){h.partial&&(r+=h.prefix);continue}throw new TypeError('Expected "'+h.name+'" to be defined')}if(zt(C)){if(!h.repeat)throw new TypeError('Expected "'+h.name+'" to not repeat, but received `'+JSON.stringify(C)+"`");if(0===C.length){if(h.optional)continue;throw new TypeError('Expected "'+h.name+'" to not be empty')}for(var c=0;c<C.length;c++){if(u=s(C[c]),!e[l].test(u))throw new TypeError('Expected all "'+h.name+'" to match "'+h.pattern+'", but received `'+JSON.stringify(u)+"`");r+=(0===c?h.prefix:h.delimiter)+u}}else{if(u=h.asterisk?w(C):s(C),!e[l].test(u))throw new TypeError('Expected "'+h.name+'" to match "'+h.pattern+'", but received "'+u+'"');r+=h.prefix+u}}else r+=h}return r}}function M(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function L(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function N(t,e){return t.keys=e,t}function R(t){return t.sensitive?"":"i"}function A(t,e){var a=t.source.match(/\((?!\?)/g);if(a)for(var i=0;i<a.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return N(t,e)}function O(t,e,a){for(var i=[],r=0;r<t.length;r++)i.push(_(t[r],e,a).source);return N(new RegExp("(?:"+i.join("|")+")",R(a)),e)}function P(t,e,a){return B(b(t,a),e,a)}function B(t,e,a){zt(e)||(a=e||a,e=[]),a=a||{};for(var i=a.strict,r=!1!==a.end,n="",o=0;o<t.length;o++){var s=t[o];if("string"==typeof s)n+=M(s);else{var l=M(s.prefix),h="(?:"+s.pattern+")";e.push(s),s.repeat&&(h+="(?:"+l+h+")*"),h=s.optional?s.partial?l+"("+h+")?":"(?:"+l+"("+h+"))?":l+"("+h+")",n+=h}}var u=M(a.delimiter||"/"),C=n.slice(-u.length)===u;return i||(n=(C?n.slice(0,-u.length):n)+"(?:"+u+"(?=$))?"),n+=r?"$":i&&C?"":"(?="+u+"|$)",N(new RegExp("^"+n,R(a)),e)}function _(t,e,a){return zt(e)||(a=e||a,e=[]),a=a||{},t instanceof RegExp?A(t,e):zt(t)?O(t,e,a):P(t,e,a)}function G(t,e,a){try{return(te[t]||(te[t]=Jt.compile(t)))(e||{},{pretty:!0})}catch(t){return""}}function k(t,e,a,i){var r=e||[],n=a||Object.create(null),o=i||Object.create(null);t.forEach(function(t){V(r,n,o,t)});for(var s=0,l=r.length;s<l;s++)"*"===r[s]&&(r.push(r.splice(s,1)[0]),l--,s--);return{pathList:r,pathMap:n,nameMap:o}}function V(t,e,a,i,r,n){var o=i.path,s=i.name,l=i.pathToRegexpOptions||{},h=Y(o,r,l.strict);"boolean"==typeof i.caseSensitive&&(l.sensitive=i.caseSensitive);var u={path:h,regex:H(h,l),components:i.components||{default:i.component},instances:{},name:s,parent:r,matchAs:n,redirect:i.redirect,beforeEnter:i.beforeEnter,meta:i.meta||{},props:null==i.props?{}:i.components?i.props:{default:i.props}};if(i.children&&i.children.forEach(function(i){var r=n?x(n+"/"+i.path):void 0;V(t,e,a,i,u,r)}),void 0!==i.alias){(Array.isArray(i.alias)?i.alias:[i.alias]).forEach(function(n){var o={path:n,children:i.children};V(t,e,a,o,r,u.path||"/")})}e[u.path]||(t.push(u.path),e[u.path]=u),s&&(a[s]||(a[s]=u))}function H(t,e){var a=Jt(t,[],e);return a}function Y(t,e,a){return a||(t=t.replace(/\/$/,"")),"/"===t[0]?t:null==e?t:x(e.path+"/"+t)}function X(t,e,a,i){var r="string"==typeof t?{path:t}:t;if(r.name||r._normalized)return r;if(!r.path&&r.params&&e){r=W({},r),r._normalized=!0;var n=W(W({},e.params),r.params);if(e.name)r.name=e.name,r.params=n;else if(e.matched.length){var o=e.matched[e.matched.length-1].path;r.path=G(o,n,"path "+e.path)}return r}var l=S(r.path||""),h=e&&e.path||"/",u=l.path?I(l.path,h,a||r.append):h,C=s(l.query,r.query,i&&i.options.parseQuery),c=r.hash||l.hash;return c&&"#"!==c.charAt(0)&&(c="#"+c),{_normalized:!0,path:u,query:C,hash:c}}function W(t,e){for(var a in e)t[a]=e[a];return t}function U(t,e){function a(t){k(t,l,h,C)}function i(t,a,i){var r=X(t,a,!1,e),n=r.name;if(n){var s=C[n];if(!s)return o(null,r);var u=s.regex.keys.filter(function(t){return!t.optional}).map(function(t){return t.name});if("object"!=typeof r.params&&(r.params={}),a&&"object"==typeof a.params)for(var c in a.params)!(c in r.params)&&u.indexOf(c)>-1&&(r.params[c]=a.params[c]);if(s)return r.path=G(s.path,r.params,'named route "'+n+'"'),o(s,r,i)}else if(r.path){r.params={};for(var f=0;f<l.length;f++){var d=l[f],D=h[d];if(K(D.regex,r.path,r.params))return o(D,r,i)}}return o(null,r)}function r(t,a){var r=t.redirect,n="function"==typeof r?r(u(t,a,null,e)):r;if("string"==typeof n&&(n={path:n}),!n||"object"!=typeof n)return o(null,a);var s=n,l=s.name,h=s.path,c=a.query,f=a.hash,d=a.params;if(c=s.hasOwnProperty("query")?s.query:c,f=s.hasOwnProperty("hash")?s.hash:f,d=s.hasOwnProperty("params")?s.params:d,l){C[l];return i({_normalized:!0,name:l,query:c,hash:f,params:d},void 0,a)}if(h){var D=z(h,t);return i({_normalized:!0,path:G(D,d,'redirect route with path "'+D+'"'),query:c,hash:f},void 0,a)}return o(null,a)}function n(t,e,a){var r=G(a,e.params,'aliased route with path "'+a+'"'),n=i({_normalized:!0,path:r});if(n){var s=n.matched,l=s[s.length-1];return e.params=n.params,o(l,e)}return o(null,e)}function o(t,a,i){return t&&t.redirect?r(t,i||a):t&&t.matchAs?n(t,a,t.matchAs):u(t,a,i,e)}var s=k(t),l=s.pathList,h=s.pathMap,C=s.nameMap;return{match:i,addRoutes:a}}function K(t,e,a){var i=e.match(t);if(!i)return!1;if(!a)return!0;for(var r=1,n=i.length;r<n;++r){var o=t.keys[r-1],s="string"==typeof i[r]?decodeURIComponent(i[r]):i[r];o&&(a[o.name]=s)}return!0}function z(t,e){return I(t,e.parent?e.parent.path:"/",!0)}function J(){window.history.replaceState({key:nt()},""),window.addEventListener("popstate",function(t){Z(),t.state&&t.state.key&&ot(t.state.key)})}function q(t,e,a,i){if(t.app){var r=t.options.scrollBehavior;r&&t.app.$nextTick(function(){var t=j(),n=r(e,a,i?t:null);n&&("function"==typeof n.then?n.then(function(e){it(e,t)}).catch(function(t){}):it(n,t))})}}function Z(){var t=nt();t&&(ee[t]={x:window.pageXOffset,y:window.pageYOffset})}function j(){var t=nt();if(t)return ee[t]}function Q(t,e){var a=document.documentElement,i=a.getBoundingClientRect(),r=t.getBoundingClientRect();return{x:r.left-i.left-e.x,y:r.top-i.top-e.y}}function $(t){return at(t.x)||at(t.y)}function tt(t){return{x:at(t.x)?t.x:window.pageXOffset,y:at(t.y)?t.y:window.pageYOffset}}function et(t){return{x:at(t.x)?t.x:0,y:at(t.y)?t.y:0}}function at(t){return"number"==typeof t}function it(t,e){var a="object"==typeof t;if(a&&"string"==typeof t.selector){var i=document.querySelector(t.selector);if(i){var r=t.offset&&"object"==typeof t.offset?t.offset:{};r=et(r),e=Q(i,r)}else $(t)&&(e=tt(t))}else a&&$(t)&&(e=tt(t));e&&window.scrollTo(e.x,e.y)}function rt(){return ie.now().toFixed(3)}function nt(){return re}function ot(t){re=t}function st(t,e){Z();var a=window.history;try{e?a.replaceState({key:re},"",t):(re=rt(),a.pushState({key:re},"",t))}catch(a){window.location[e?"replace":"assign"](t)}}function lt(t){st(t,!0)}function ht(t,e,a){var i=function(r){r>=t.length?a():t[r]?e(t[r],function(){i(r+1)}):i(r+1)};i(0)}function ut(t){return function(e,a,i){var n=!1,o=0,s=null;Ct(t,function(t,e,a,l){if("function"==typeof t&&void 0===t.cid){n=!0,o++;var h,u=dt(function(e){ft(e)&&(e=e.default),t.resolved="function"==typeof e?e:Ot.extend(e),a.components[l]=e,--o<=0&&i()}),C=dt(function(t){var e="Failed to resolve async component "+l+": "+t;s||(s=r(t)?t:new Error(e),i(s))});try{h=t(u,C)}catch(t){C(t)}if(h)if("function"==typeof h.then)h.then(u,C);else{var c=h.component;c&&"function"==typeof c.then&&c.then(u,C)}}}),n||i()}}function Ct(t,e){return ct(t.map(function(t){return Object.keys(t.components).map(function(a){return e(t.components[a],t.instances[a],t,a)})}))}function ct(t){return Array.prototype.concat.apply([],t)}function ft(t){return t.__esModule||ne&&"Module"===t[Symbol.toStringTag]}function dt(t){var e=!1;return function(){for(var a=[],i=arguments.length;i--;)a[i]=arguments[i];if(!e)return e=!0,t.apply(this,a)}}function Dt(t){if(!t)if(Kt){var e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^https?:\/\/[^\/]+/,"")}else t="/";return"/"!==t.charAt(0)&&(t="/"+t),t.replace(/\/$/,"")}function mt(t,e){var a,i=Math.max(t.length,e.length);for(a=0;a<i&&t[a]===e[a];a++);return{updated:e.slice(0,a),activated:e.slice(a),deactivated:t.slice(a)}}function pt(t,e,a,i){var r=Ct(t,function(t,i,r,n){var o=vt(t,e);if(o)return Array.isArray(o)?o.map(function(t){return a(t,i,r,n)}):a(o,i,r,n)});return ct(i?r.reverse():r)}function vt(t,e){return"function"!=typeof t&&(t=Ot.extend(t)),t.options[e]}function gt(t){return pt(t,"beforeRouteLeave",It,!0)}function Tt(t){return pt(t,"beforeRouteUpdate",It)}function It(t,e){if(e)return function(){return t.apply(e,arguments)}}function St(t,e,a){return pt(t,"beforeRouteEnter",function(t,i,r,n){return xt(t,r,n,e,a)})}function xt(t,e,a,i,r){return function(n,o,s){return t(n,o,function(t){s(t),"function"==typeof t&&i.push(function(){bt(t,e.instances,a,r)})})}}function bt(t,e,a,i){e[a]?t(e[a]):i()&&setTimeout(function(){bt(t,e,a,i)},16)}function yt(t){var e=window.location.pathname;return t&&0===e.indexOf(t)&&(e=e.slice(t.length)),(e||"/")+window.location.search+window.location.hash}function Et(t){var e=yt(t);if(!/^\/#/.test(e))return window.location.replace(x(t+"/#"+e)),!0}function wt(){var t=Ft();return"/"===t.charAt(0)||(Nt("/"+t),!1)}function Ft(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.slice(e+1)}function Mt(t){var e=window.location.href,a=e.indexOf("#");return(a>=0?e.slice(0,a):e)+"#"+t}function Lt(t){ae?st(Mt(t)):window.location.hash=t}function Nt(t){ae?lt(Mt(t)):window.location.replace(Mt(t))}function Rt(t,e){return t.push(e),function(){var a=t.indexOf(e);a>-1&&t.splice(a,1)}}function At(t,e,a){var i="hash"===a?"#"+e:e;return t?x(t+"/"+i):i}var Ot,Pt={name:"router-view",functional:!0,props:{name:{type:String,default:"default"}},render:function(t,e){var a=e.props,i=e.children,r=e.parent,s=e.data;s.routerView=!0;for(var l=r.$createElement,h=a.name,u=r.$route,C=r._routerViewCache||(r._routerViewCache={}),c=0,f=!1;r&&r._routerRoot!==r;)r.$vnode&&r.$vnode.data.routerView&&c++,r._inactive&&(f=!0),r=r.$parent;if(s.routerViewDepth=c,f)return l(C[h],s,i);var d=u.matched[c];if(!d)return C[h]=null,l();var D=C[h]=d.components[h];s.registerRouteInstance=function(t,e){var a=d.instances[h];(e&&a!==t||!e&&a===t)&&(d.instances[h]=e)},(s.hook||(s.hook={})).prepatch=function(t,e){d.instances[h]=e.componentInstance};var m=s.props=n(u,d.props&&d.props[h]);if(m){m=s.props=o({},m);var p=s.attrs=s.attrs||{};for(var v in m)D.props&&v in D.props||(p[v]=m[v],delete m[v])}return l(D,s,i)}},Bt=/[!'()*]/g,_t=function(t){return"%"+t.charCodeAt(0).toString(16)},Gt=/%2C/g,kt=function(t){return encodeURIComponent(t).replace(Bt,_t).replace(Gt,",")},Vt=decodeURIComponent,Ht=/\/?$/,Yt=u(null,{path:"/"}),Xt=[String,Object],Wt=[String,Array],Ut={name:"router-link",props:{to:{type:Xt,required:!0},tag:{type:String,default:"a"},exact:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,event:{type:Wt,default:"click"}},render:function(t){var e=this,a=this.$router,i=this.$route,r=a.resolve(this.to,i,this.append),n=r.location,o=r.route,s=r.href,l={},h=a.options.linkActiveClass,C=a.options.linkExactActiveClass,c=null==h?"router-link-active":h,f=null==C?"router-link-exact-active":C,D=null==this.activeClass?c:this.activeClass,p=null==this.exactActiveClass?f:this.exactActiveClass,T=n.path?u(null,n,null,a):o;l[p]=d(i,T),l[D]=this.exact?l[p]:m(i,T);var I=function(t){v(t)&&(e.replace?a.replace(n):a.push(n))},S={click:v};Array.isArray(this.event)?this.event.forEach(function(t){S[t]=I}):S[this.event]=I;var x={class:l};if("a"===this.tag)x.on=S,x.attrs={href:s};else{var b=g(this.$slots.default);if(b){b.isStatic=!1;var y=Ot.util.extend;(b.data=y({},b.data)).on=S;(b.data.attrs=y({},b.data.attrs)).href=s}else x.on=S}return t(this.tag,x,this.$slots.default)}},Kt="undefined"!=typeof window,zt=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},Jt=_,qt=b,Zt=y,jt=F,Qt=B,$t=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");Jt.parse=qt,Jt.compile=Zt,Jt.tokensToFunction=jt,Jt.tokensToRegExp=Qt;var te=Object.create(null),ee=Object.create(null),ae=Kt&&function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}(),ie=Kt&&window.performance&&window.performance.now?window.performance:Date,re=rt(),ne="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,oe=function(t,e){this.router=t,this.base=Dt(e),this.current=Yt,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[]};oe.prototype.listen=function(t){this.cb=t},oe.prototype.onReady=function(t,e){this.ready?t():(this.readyCbs.push(t),e&&this.readyErrorCbs.push(e))},oe.prototype.onError=function(t){this.errorCbs.push(t)},oe.prototype.transitionTo=function(t,e,a){var i=this,r=this.router.match(t,this.current);this.confirmTransition(r,function(){i.updateRoute(r),e&&e(r),i.ensureURL(),i.ready||(i.ready=!0,i.readyCbs.forEach(function(t){t(r)}))},function(t){a&&a(t),t&&!i.ready&&(i.ready=!0,i.readyErrorCbs.forEach(function(e){e(t)}))})},oe.prototype.confirmTransition=function(t,e,a){var n=this,o=this.current,s=function(t){r(t)&&(n.errorCbs.length?n.errorCbs.forEach(function(e){e(t)}):(i(!1,"uncaught error during route navigation:"),console.error(t))),a&&a(t)};if(d(t,o)&&t.matched.length===o.matched.length)return this.ensureURL(),s();var l=mt(this.current.matched,t.matched),h=l.updated,u=l.deactivated,C=l.activated,c=[].concat(gt(u),this.router.beforeHooks,Tt(h),C.map(function(t){return t.beforeEnter}),ut(C));this.pending=t;var f=function(e,a){if(n.pending!==t)return s();try{e(t,o,function(t){!1===t||r(t)?(n.ensureURL(!0),s(t)):"string"==typeof t||"object"==typeof t&&("string"==typeof t.path||"string"==typeof t.name)?(s(),"object"==typeof t&&t.replace?n.replace(t):n.push(t)):a(t)})}catch(t){s(t)}};ht(c,f,function(){var a=[];ht(St(C,a,function(){return n.current===t}).concat(n.router.resolveHooks),f,function(){if(n.pending!==t)return s();n.pending=null,e(t),n.router.app&&n.router.app.$nextTick(function(){a.forEach(function(t){t()})})})})},oe.prototype.updateRoute=function(t){var e=this.current;this.current=t,this.cb&&this.cb(t),this.router.afterHooks.forEach(function(a){a&&a(t,e)})};var se=function(t){function e(e,a){var i=this;t.call(this,e,a);var r=e.options.scrollBehavior;r&&J();var n=yt(this.base);window.addEventListener("popstate",function(t){var a=i.current,o=yt(i.base);i.current===Yt&&o===n||i.transitionTo(o,function(t){r&&q(e,t,a,!0)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.go=function(t){window.history.go(t)},e.prototype.push=function(t,e,a){var i=this,r=this,n=r.current;this.transitionTo(t,function(t){st(x(i.base+t.fullPath)),q(i.router,t,n,!1),e&&e(t)},a)},e.prototype.replace=function(t,e,a){var i=this,r=this,n=r.current;this.transitionTo(t,function(t){lt(x(i.base+t.fullPath)),q(i.router,t,n,!1),e&&e(t)},a)},e.prototype.ensureURL=function(t){if(yt(this.base)!==this.current.fullPath){var e=x(this.base+this.current.fullPath);t?st(e):lt(e)}},e.prototype.getCurrentLocation=function(){return yt(this.base)},e}(oe),le=function(t){function e(e,a,i){t.call(this,e,a),i&&Et(this.base)||wt()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this,e=this.router,a=e.options.scrollBehavior,i=ae&&a;i&&J(),window.addEventListener(ae?"popstate":"hashchange",function(){var e=t.current;wt()&&t.transitionTo(Ft(),function(a){i&&q(t.router,a,e,!0),ae||Nt(a.fullPath)})})},e.prototype.push=function(t,e,a){var i=this,r=this,n=r.current;this.transitionTo(t,function(t){Lt(t.fullPath),q(i.router,t,n,!1),e&&e(t)},a)},e.prototype.replace=function(t,e,a){var i=this,r=this,n=r.current;this.transitionTo(t,function(t){Nt(t.fullPath),q(i.router,t,n,!1),e&&e(t)},a)},e.prototype.go=function(t){window.history.go(t)},e.prototype.ensureURL=function(t){var e=this.current.fullPath;Ft()!==e&&(t?Lt(e):Nt(e))},e.prototype.getCurrentLocation=function(){return Ft()},e}(oe),he=function(t){function e(e,a){t.call(this,e,a),this.stack=[],this.index=-1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e,a){var i=this;this.transitionTo(t,function(t){i.stack=i.stack.slice(0,i.index+1).concat(t),i.index++,e&&e(t)},a)},e.prototype.replace=function(t,e,a){var i=this;this.transitionTo(t,function(t){i.stack=i.stack.slice(0,i.index).concat(t),e&&e(t)},a)},e.prototype.go=function(t){var e=this,a=this.index+t;if(!(a<0||a>=this.stack.length)){var i=this.stack[a];this.confirmTransition(i,function(){e.index=a,e.updateRoute(i)})}},e.prototype.getCurrentLocation=function(){var t=this.stack[this.stack.length-1];return t?t.fullPath:"/"},e.prototype.ensureURL=function(){},e}(oe),ue=function(t){void 0===t&&(t={}),this.app=null,this.apps=[],this.options=t,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=U(t.routes||[],this);var e=t.mode||"hash";switch(this.fallback="history"===e&&!ae&&!1!==t.fallback,this.fallback&&(e="hash"),Kt||(e="abstract"),this.mode=e,e){case"history":this.history=new se(this,t.base);break;case"hash":this.history=new le(this,t.base,this.fallback);break;case"abstract":this.history=new he(this,t.base)}},Ce={currentRoute:{configurable:!0}};ue.prototype.match=function(t,e,a){return this.matcher.match(t,e,a)},Ce.currentRoute.get=function(){return this.history&&this.history.current},ue.prototype.init=function(t){var e=this;if(this.apps.push(t),!this.app){this.app=t;var a=this.history;if(a instanceof se)a.transitionTo(a.getCurrentLocation());else if(a instanceof le){var i=function(){a.setupListeners()};a.transitionTo(a.getCurrentLocation(),i,i)}a.listen(function(t){e.apps.forEach(function(e){e._route=t})})}},ue.prototype.beforeEach=function(t){return Rt(this.beforeHooks,t)},ue.prototype.beforeResolve=function(t){return Rt(this.resolveHooks,t)},ue.prototype.afterEach=function(t){return Rt(this.afterHooks,t)},ue.prototype.onReady=function(t,e){this.history.onReady(t,e)},ue.prototype.onError=function(t){this.history.onError(t)},ue.prototype.push=function(t,e,a){this.history.push(t,e,a)},ue.prototype.replace=function(t,e,a){this.history.replace(t,e,a)},ue.prototype.go=function(t){this.history.go(t)},ue.prototype.back=function(){this.go(-1)},ue.prototype.forward=function(){this.go(1)},ue.prototype.getMatchedComponents=function(t){var e=t?t.matched?t:this.resolve(t).route:this.currentRoute;return e?[].concat.apply([],e.matched.map(function(t){return Object.keys(t.components).map(function(e){return t.components[e]})})):[]},ue.prototype.resolve=function(t,e,a){var i=X(t,e||this.history.current,a,this),r=this.match(i,e),n=r.redirectedFrom||r.fullPath;return{location:i,route:r,href:At(this.history.base,n,this.mode),normalizedTo:i,resolved:r}},ue.prototype.addRoutes=function(t){this.matcher.addRoutes(t),this.history.current!==Yt&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(ue.prototype,Ce),ue.install=T,ue.version="2.8.1",Kt&&window.Vue&&window.Vue.use(ue),e.a=ue},,,,,,,,,,,,,,,,,,,,,,,function(t,e,a){"use strict";function i(){}Object.defineProperty(e,"__esModule",{value:!0});var r=a(46),n=a.n(r),o=a(243),s=a.n(o),l=a(111),h=a.n(l),u=a(252),C=(a.n(u),a(254)),c=(a.n(C),a(253)),f=(a.n(c),a(144));h.a.Chart.MARKET_SUFFIX_NAME.GetMarketStatus=function(t){return 2},i.GetMinuteOption=function(){return{Type:"åéèµ°å¿å¾",Windows:[{Index:"MACD",Modify:!0,Change:!0,Close:!0}],Symbol:"AAPL.usa",IsAutoUpdate:!0,AutoUpdateFrequency:2e4,DayCount:1,IsShowRightMenu:!1,CorssCursorInfo:{Left:1,Right:1},SearchIndexDialog:{Enable:!0},SelectRectDialog:{Enable:!0},ModifyIndexParamDialog:{Enable:!0},MinuteLine:{IsDrawAreaPrice:!0,IsShowAveragePrice:!0},Border:{Left:40,Right:40,Top:25,Bottom:25,AutoRight:{Blank:10,MinWidth:40},AutoLeft:{Blank:10,MinWidth:40}},Frame:[{SplitCount:5},{SplitCount:3}],ExtendChart:[]}},i.GetMinuteIndexMenu=function(){return[{Name:"MACD",ID:"MACD",WindowIndex:2},{Name:"KDJ",ID:"KDJ",WindowIndex:2},{Name:"DMI",ID:"DMI",WindowIndex:2},{Name:"ROC",ID:"ROC",WindowIndex:2}]},i.GetKLineIndexMenu=function(){return[{Name:"MA",ID:"MA",WindowIndex:0},{Name:"BOLL",ID:"BOLL",WindowIndex:0},{Name:"MACD",ID:"MACD",WindowIndex:1},{Name:"KDJ",ID:"KDJ",WindowIndex:1},{Name:"DMI",ID:"DMI",WindowIndex:1},{Name:"ROC",ID:"ROC",WindowIndex:1}]},i.GetTestSymbolMenu=function(){return[{Title:"ç¾è¡",Icon:"",Sub:[{Name:"ç½æ",Code:"NTES_105.usa"},{Name:"å¾®è½¯",Code:"MSFT_105.usa"},{Name:"äºé©¬é",Code:"AMZN_105.usa"},{Name:"æ»´æ»´",Code:"DIDI_106.usa"},{Name:"é¿éå·´å·´",Code:"BABA_106.usa"},{Name:"ç¥ä¹",Code:"ZH_106.usa"},{Name:"éç¼æ¯",Code:"DJIA_100.usa"},{Name:"æ æ®500",Code:"SPX_100.usa"},{Name:"çº³æ¯è¾¾å",Code:"NDX_100.usa"}]},{Title:"æ²ªæ·±Aè¡",Icon:"",Sub:[{Name:"æµ¦åé¶è¡",Code:"600000_1.sh"},{Name:"ä¸æ¹è´¢å¯",Code:"300059_0.sz"},{Name:"ä¸è¯ææ°",Code:"000001_1.sh"},{Name:"æ·±è¯ææ",Code:"399001_0.sz"}]},{Title:"åäº¤æ",Icon:"",Sub:[{Name:"å¯æ·»çæ°",Code:"831010_0.bj"},{Name:"é©±å¨å",Code:"838275_0.bj"},{Name:"é½é²åä¿¡",Code:"830832_0.bj"},{Name:"èè½´è¡ä»½",Code:"430418_0.bj"}]},{Title:"ETFåºé",Icon:"",Sub:[{Name:"50ETFåºé",Code:"510800_1.sh"},{Name:"ä¸è¯180ETF",Code:"510180_1.sh"},{Name:"æçETF",Code:"159920_0.sz"},{Name:"åä¸æ¿50ETF",Code:"159949_0.sz"}]},{Title:"æ¸¯è¡",Icon:"",Sub:[{Name:"æ¯äºè¿ªè¡ä»½",Code:"01211_116.hk"},{Name:"æåé¶è¡",Code:"03968_116.hk"},{Name:"æ±ä¸°æ§è¡",Code:"00005_116.hk"},{Name:"é¿å",Code:"00001_116.hk"},{Name:"æçææ°",Code:"HSI_100.hk"}]},{Title:"å¤æ±",Icon:"",Sub:[{Name:"ç¾ååå å",Code:"USDCAD_119.FOREX"},{Name:"ç¾ååæ¸¯å¸",Code:"USDHKD_119.FOREX"},{Name:"ç¾ååæ¬§å",Code:"USDEUR_119.FOREX"},{Name:"æ¬§ååè±é",Code:"EURGBP_119.FOREX"},{Name:"ç¾åææ°",Code:"UDI_100.ET"}]},{Title:"ä¸æµ·æè´§äº¤ææ",Icon:"",Sub:[{Name:"æ²ªéä¸»å",Code:"CUM_113.SHFE"},{Name:"æ²ªé¡ä¸»å",Code:"SNM_113.SHFE"},{Name:"æ²ªéä¸»å",Code:"AUM_113.SHFE"},{Name:"æ²ªéä¸»å",Code:"NIM_113.SHFE"},{Name:"æ©¡è¶ä¸»å",Code:"RUM_113.SHFE"},{Name:"èºçº¹é¢ä¸»å",Code:"RBM_113.SHFE"},{Name:"æ²ªé¶ä¸»å",Code:"AGM_113.SHFE"},{Name:"çº¿æä¸»å",Code:"WRM_113.SHFE"},{Name:"æ²ªéä¸»å",Code:"PBM_113.SHFE"},{Name:"æ²ªéä¸»å",Code:"ZNM_113.SHFE"},{Name:"ç³æ²¹æ²¥éä¸»å",Code:"BUM_113.SHFE"},{Name:"æ²ªéä¸»å",Code:"ALM_113.SHFE"},{Name:"çæ²¹ä¸»å",Code:"FUM_113.SHFE"},{Name:"ç­è½§å·æ¿ä¸»å",Code:"HCM_113.SHFE"},{Name:"çº¸æµä¸»å",Code:"SPM_113.SHFE"},{Name:"ä¸éé¢ä¸»å",Code:"SSM_113.SHFE"}]},{Title:"ä¸æµ·å½éè½æºäº¤æä¸­å¿",Icon:"",Sub:[{Name:"åæ²¹ä¸»å",Code:"SCM_142.SHFE"},{Name:"20å·è¶ä¸»å",Code:"NRM_142.SHFE"},{Name:"ä½ç¡«çæ²¹ä¸»å",Code:"LUM_142.SHFE"},{Name:"å½ééä¸»å",Code:"BCM_142.SHFE"}]},{Title:"å¤§è¿ååäº¤ææ",Icon:"",Sub:[{Name:"çç±³ä¸»å",Code:"CM_114.DCE"},{Name:"è±ä¸ä¸»å",Code:"AM_114.DCE"},{Name:"è±äºä¸»å",Code:"BM_114.DCE"},{Name:"è±ç²ä¸»å",Code:"MM_114.DCE"},{Name:"è±æ²¹ä¸»å",Code:"YM_114.DCE"},{Name:"æ£æ¦æ²¹ä¸»å",Code:"PM_114.DCE"},{Name:"èä¹ç¯ä¸»å",Code:"LM_114.DCE"},{Name:"èæ°¯ä¹ç¯ä¸»å",Code:"VM_114.DCE"},{Name:"ç¦ç­ä¸»å",Code:"JM_114.DCE"},{Name:"ç¦ç¤ä¸»å",Code:"JMM_114.DCE"},{Name:"çº¤ç»´æ¿ä¸»å",Code:"FBM_114.DCE"},{Name:"è¶åæ¿ä¸»å",Code:"BBM_114.DCE"},{Name:"éç¿ç³ä¸»å",Code:"IM_114.DCE"},{Name:"é¸¡èä¸»å",Code:"JDM_114.DCE"},{Name:"èä¸ç¯ä¸»å",Code:"PPM_114.DCE"},{Name:"çç±³æ·ç²ä¸»å",Code:"CSM_114.DCE"},{Name:"ä¹äºéä¸»å",Code:"EGM_114.DCE"},{Name:"ç²³ç±³ä¸»å",Code:"RRM_114.DCE"},{Name:"è¯ä¹ç¯ä¸»å",Code:"EBM_114.DCE"},{Name:"LPGä¸»å",Code:"PGM_114.DCE"},{Name:"ççªä¸»å",Code:"LHM_114.DCE"}]},{Title:"éå·ååäº¤ææ",Icon:"",Sub:[{Name:"å¼ºéº¦ä¸»å",Code:"WHM_115.CZC"},{Name:"æ®éº¦ä¸»å",Code:"PMM_115.CZC"},{Name:"ä¸å·æ£è±ä¸»å",Code:"CFM_115.CZC"},{Name:"ç½ç³ä¸»å",Code:"SRM_115.CZC"},{Name:"PTAä¸»å",Code:"TAM_115.CZC"},{Name:"èæ²¹ä¸»å",Code:"OIM_115.CZC"},{Name:"æ©ç±¼ç¨»ä¸»å",Code:"RIM_115.CZC"},{Name:"ç²éä¸»å",Code:"MAM_115.CZC"},{Name:"ç»çä¸»å",Code:"FGM_115.CZC"},{Name:"èç±½ä¸»å",Code:"RSM_115.CZC"},{Name:"èç²ä¸»å",Code:"RMM_115.CZC"},{Name:"ç²³ç¨»ä¸»å",Code:"JRM_115.CZC"},{Name:"æç±¼ç¨»ä¸»å",Code:"LRM_115.CZC"},{Name:"ç¡éä¸»å",Code:"SFM_115.CZC"},{Name:"é°ç¡ä¸»å",Code:"SMM_115.CZC"},{Name:"å¨åç¤ä¸»å",Code:"ZCM_115.CZC"},{Name:"æ£çº±ä¸»å",Code:"CYM_115.CZC"},{Name:"è¹æä¸»å",Code:"APM_115.CZC"},{Name:"çº¢æ£ä¸»å",Code:"CJM_115.CZC"},{Name:"å°¿ç´ ä¸»å",Code:"URM_115.CZC"},{Name:"çº¯ç¢±ä¸»å",Code:"SAM_115.CZC"},{Name:"ç­çº¤ä¸»å",Code:"PFM_115.CZC"},{Name:"è±çä¸»å",Code:"PKM_115.CZC"}]},{Title:"ä¸­å½éèæè´§äº¤ææ",Icon:"",Sub:[{Name:"äºåºä¸»å",Code:"TS-130130_8.CFE"},{Name:"äºåºä¸»å",Code:"TF-050130_8.CFE"},{Name:"ååºä¸»å",Code:"T-110130_8.CFE"},{Name:"ä¸è¯ä¸»å",Code:"IH-070130_8.CFE"},{Name:"ä¸­è¯ä¸»å",Code:"IC-060130_8.CFE"},{Name:"æ²ªæ·±ä¸»å",Code:"IF-040130_8.CFE"}]},{Title:"èå å¥åä¸äº¤ææ",Icon:"",Sub:[{Name:"å°éº¦å½æè¿ç»­",Code:"ZW00Y_103.CBOT"},{Name:"è¿·ä½ å°éº¦å½æè¿ç»­",Code:"XW00Y_103.CBOT"},{Name:"çç±³å½æè¿ç»­",Code:"ZC00Y_103.CBOT"},{Name:"è¿·ä½ çç±³å½æè¿ç»­",Code:"XC00Y_103.CBOT"},{Name:"å¤§è±å½æè¿ç»­",Code:"ZS00Y_103.CBOT"},{Name:"è¿·ä½ å¤§è±å½æè¿ç»­",Code:"XK00Y_103.CBOT"},{Name:"è±æ²¹å½æè¿ç»­",Code:"ZL00Y_103.CBOT"},{Name:"è±ç²å½æè¿ç»­",Code:"ZM00Y_103.CBOT"},{Name:"çéº¦å½æè¿ç»­",Code:"ZO00Y_103.CBOT"},{Name:"ç¨»è°·å½æè¿ç»­",Code:"ZR00Y_103.CBOT"},{Name:"å°åçº³æå½æè¿ç»­",Code:"NQ00Y_103.CBOT"},{Name:"å°åæ æ®å½æè¿ç»­",Code:"ES00Y_103.CBOT"},{Name:"å°åéæå½æè¿ç»­",Code:"YM00Y_103.CBOT"},{Name:"2å¹´ç¾å½åºå½æè¿ç»­",Code:"TU00Y_103.CBOT"},{Name:"5å¹´ç¾å½åºå½æè¿ç»­",Code:"FV00Y_103.CBOT"},{Name:"10å¹´ç¾å½åºå½æè¿ç»­",Code:"TY00Y_103.CBOT"},{Name:"30å¹´ç¾å½åºå½æè¿ç»­",Code:"US00Y_103.CBOT"},{Name:"è¶å½åºå½æè¿ç»­",Code:"UL00Y_103.CBOT"}]},{Title:"çº½çº¦ååäº¤ææ",Icon:"",Sub:[{Name:"NYMEXåæ²¹",Code:"CL00Y_102.NYMEX"},{Name:"NYMEXéé",Code:"PL00Y_102.NYMEX"},{Name:"è¿·ä½ åæ²¹",Code:"QM00Y_102.NYMEX"},{Name:"NYMEXçæ²¹",Code:"HO00Y_102.NYMEX"},{Name:"NYMEXæ±½æ²¹",Code:"RB00Y_102.NYMEX"},{Name:"NYMEXé¯é",Code:"PA00Y_102.NYMEX"},{Name:"ç­è½§é¢å·",Code:"HR00Y_102.NYMEX"},{Name:"å¤©ç¶æ°",Code:"NG00Y_102.NYMEX"}]},{Title:"çº½çº¦åä¸æè´§äº¤ææ",Icon:"",Sub:[{Name:"COMEXç½é¶",Code:"SI00Y_101.COMEX"},{Name:"è¿·ä½ ç½é¶",Code:"QI00Y_101.COMEX"},{Name:"å¾®åé»é",Code:"MGC00Y_101.COMEX"},{Name:"è¿·ä½ é»é",Code:"QO00Y_101.COMEX"},{Name:"COMEXé»é",Code:"GC00Y_101.COMEX"},{Name:"COMEXé",Code:"HG00Y_101.COMEX"}]},{Title:"çº½çº¦æè´§äº¤ææ",Icon:"",Sub:[{Name:"æ£è±å½æè¿ç»­",Code:"CT00Y_108.NYBOT"}]},{Title:"ä¼¦æ¦éå±äº¤ææ",Icon:"",Sub:[{Name:"ç»¼åé03",Code:"NI-LNKT_109.LME"},{Name:"ç»¼åé03",Code:"CA-LCPT_109.LME"},{Name:"ç»¼åé03",Code:"AH-LALT_109.LME"},{Name:"ç»¼åé¡03",Code:"SN-LTNT_109.LME"},{Name:"ç»¼åé03",Code:"ZS-LZNT_109.LME"},{Name:"ç»¼åé03",Code:"PB-LLDT_109.LME"}]},{Title:"ä¸äº¬ååäº¤ææ",Icon:"",Sub:[{Name:"æ¥ééå½æè¿ç»­",Code:"JPL00Y_111.TOCOM"},{Name:"æ¥ç½é¶å½æè¿ç»­",Code:"JAG00Y_111.TOCOM"},{Name:"æ¥åæ²¹å½æè¿ç»­",Code:"JCO00Y_111.TOCOM"},{Name:"æ¥ç¤æ²¹å½æè¿ç»­",Code:"JKE00Y_111.TOCOM"},{Name:"æ¥æ©¡è¶å½æè¿ç»­",Code:"JRU00Y_111.TOCOM"},{Name:"æ¥é»éå½æè¿ç»­",Code:"JAU00Y_111.TOCOM"},{Name:"æ¥æ±½æ²¹å½æè¿ç»­",Code:"JGL00Y_111.TOCOM"}]},{Title:"ç¾å½æ´²éäº¤ææ",Icon:"",Sub:[{Name:"å¸ä¼¦ç¹åæ²¹å½æè¿ç»­",Code:"B00Y_112.IPE"},{Name:"éæ´æ²¹å½æè¿ç»­",Code:"G00Y_112.IPE"}]}]},i.GetKLineOption=function(){var t;return{Type:"åå²Kçº¿å¾",Windows:[(t={Index:"MA",Modify:!0},n()(t,"Modify",!0),n()(t,"Change",!0),t),{Index:"MACD",Modify:!0,Change:!0,Close:!1},{Index:"VOL",Modify:!0,Change:!0,Close:!1}],Symbol:"000001.sh",IsAutoUpdate:!0,AutoUpdateFrequency:15e3,IsApiPeriod:!0,EnablePopMenuV2:!0,EnableDrawToolDialogV2:!0,EnableModifyDrawDialogV2:!0,EnableResize:!0,KLine:{DragMode:1,Right:0,Period:0,MaxReqeustDataCount:1e3,PageSize:150,KLineDoubleClick:!1,IsShowTooltip:!0,DrawType:0,RightSpaceCount:2},CorssCursorInfo:{Left:0,Right:1,EnableKeyboard:!0},SearchIndexDialog:{Enable:!0},TooltipDialog:{Enable:!0,Style:1},SelectRectDialog:{Enable:!0},KLineTooltip:{Enable:!0,EnableKeyDown:!1},FloatTooltip:{Enable:!0},ModifyIndexParamDialog:{Enable:!0},KLineTitle:{IsShowName:!0,IsShowSettingInfo:!0},Border:{Left:2,Right:20,Top:25,Bottom:25,AutoRight:{Blank:10,MinWidth:40}},Frame:[{SplitCount:5,IsShowLeftText:!1,Custom:[{Type:0,Position:"right"}]},{SplitCount:3,IsShowLeftText:!1},{SplitCount:3,IsShowLeftText:!1}],ExtendChart:[]}},i.GetMinuteDayMenu=function(){return[{Name:"1æ¥",ID:1},{Name:"2æ¥",ID:2},{Name:"3æ¥",ID:3},{Name:"4æ¥",ID:4},{Name:"5æ¥",ID:5}]},i.GetKLinePeriodMenu=function(){return[{Name:"æ¥çº¿",ID:0},{Name:"å¨çº¿",ID:1},{Name:"æçº¿",ID:2},{Name:"1åé",ID:4},{Name:"5åé",ID:5},{Name:"15åé",ID:6},{Name:"30åé",ID:7},{Name:"60åé",ID:8}]},i.GetKLineRightMenu=function(){return[{Name:"ä¸å¤æ",ID:0},{Name:"åå¤æ",ID:1},{Name:"åå¤æ",ID:2}]},e.default={data:function(){return{MinuteDayMenu:i.GetMinuteDayMenu(),MinuteDayIndex:0,KLinePeriodMenu:i.GetKLinePeriodMenu(),KLinePeriodIndex:0,KLineRightMenu:i.GetKLineRightMenu(),KLineRightIndex:0,IsShowRightMenu:!0,MinuteIndexMenu:i.GetMinuteIndexMenu(),KLineIndexMenu:i.GetKLineIndexMenu(),Symbol:"300059_0.sz",Chart:null,KLineChart:null,NavMenuAry:i.GetTestSymbolMenu(),VolChartHeight:10,chartType:"kline"}},mounted:function(){var t=this;this.OnSize(),this.SetChartStyle(),this.$nextTick(function(){t.CreateMinuteChart(),t.CreateKLineChart()}),window.onresize=s.a.debounce(this.OnSize,200)},methods:{OnSize:function(){var t=this.$refs.right.clientWidth,e=this.$refs.rightTab,a=this.$refs.minute_periodWrap,i=this.$refs.minute_indexWrap,r=this.$refs.minute_statementWrap,n=window.innerHeight-e.offsetHeight-a.offsetHeight-i.offsetHeight-r.offsetHeight,o=this.$refs.kline;o.style.width=t+"px",o.style.height=n+"px",console.log(t,n);var a=this.$refs.kline_periodWrap,i=this.$refs.kline_indexWrap,r=this.$refs.kline_statementWrap,n=window.innerHeight-e.offsetHeight-a.offsetHeight-i.offsetHeight-r.offsetHeight,s=this.$refs.kline2;s.style.width=t+"px",s.style.height=n+"px",this.Chart&&this.Chart.OnSize(),this.KLineChart&&this.KLineChart.OnSize()},changeRightContent:function(t){var e=this;this.chartType=t,this.$nextTick(function(){e.OnSize()})},SetChartStyle:function(){f.a.HQData.SetMinuteChartCoordinate();var t=h.a.Chart.HQChartStyle.GetStyleConfig(h.a.Chart.STYLE_TYPE_ID.BLACK_ID);t.ToolbarButtonStyle=1,h.a.Chart.JSChart.SetStyle(t),h.a.Chart.JSChart.GetResource().ToolbarButtonStyle=1},CreateMinuteChart:function(){var t=this;if(!this.Chart){var e=i.GetMinuteOption();e.Symbol=this.Symbol,e.NetworkFilter=function(e,a){t.NetworkFilter(e,a)};var a=h.a.Chart.JSChart.Init(this.$refs.kline);a.SetOption(e),this.Chart=a}},CreateKLineChart:function(){var t=this;if(!this.KLineChart){var e=i.GetKLineOption();e.Symbol=this.Symbol,e.EventCallback=[{event:h.a.Chart.JSCHART_EVENT_ID.ON_CHANGE_KLINE_PERIOD,callback:function(e,a,i){t.OnChangeKLinePeriod(e,a,i)}},{event:h.a.Chart.JSCHART_EVENT_ID.ON_CHANGE_KLINE_RIGHT,callback:function(e,a,i){t.OnChangeKLineRight(e,a,i)}}],e.NetworkFilter=function(e,a){t.NetworkFilter(e,a)};var a=h.a.Chart.JSChart.Init(this.$refs.kline2);a.SetOption(e),this.KLineChart=a}},ChangeSymbol:function(t){var e=t.toUpperCase(),a=f.a.HQData.IsShowVolChart(e),i=this.Chart.JSChartContainer.Frame.SubFrame[1];a?i.Height<=0&&(i.Height=this.VolChartHeight):(i.Height>0&&(this.VolChartHeight=i.Height),i.Height=0);var r=this.KLineChart.JSChartContainer.Period,n=f.a.HQData.IsEnableRight(r,t);this.IsShowRightMenu=n,this.Symbol=t,this.Chart.ChangeSymbol(this.Symbol),this.KLineChart.ChangeSymbol(this.Symbol)},OnClickMinuteDayMenu:function(t,e){this.MinuteDayIndex=t,this.Chart.ChangeDayCount(e.ID)},OnClickKLinePeriodMenu:function(t,e){this.KLinePeriodIndex=t,this.KLineChart.ChangePeriod(e.ID)},OnChangeKLinePeriod:function(t,e,a){for(var r=i.GetKLinePeriodMenu(),n=0;n<r.length;++n){if(r[n].ID==e.Now.Period)return void(this.KLinePeriodIndex=n)}},OnClickKLineRightMenu:function(t,e){this.KLineRightIndex=t,this.KLineChart.ChangeRight(e.ID)},OnChangeKLineRight:function(t,e,a){for(var r=i.GetKLineRightMenu(),n=0;n<r.length;++n){if(r[n].ID==e.Now.Right)return void(this.KLineRightIndex=n)}},ChangeMinuteIndex:function(t){this.Chart&&this.Chart.ChangeIndex(t.WindowIndex,t.ID)},ChangeKLineIndex:function(t){this.KLineChart&&this.KLineChart.ChangeIndex(t.WindowIndex,t.ID)},NetworkFilter:function(t,e){switch(f.a.HQData.Log("[HQChartDemo::NetworkFilter] data",t),t.Name){case"MinuteChartContainer::RequestMinuteData":case"MinuteChartContainer::RequestHistoryMinuteData":case"KLineChartContainer::RequestHistoryData":case"KLineChartContainer::RequestRealtimeData":case"KLineChartContainer::RequestFlowCapitalData":case"KLineChartContainer::ReqeustHistoryMinuteData":case"KLineChartContainer::RequestMinuteRealtimeData":case"JSSymbolData::GetSymbolData":f.a.HQData.NetworkFilter(t,e)}},handleSelect:function(t,e){console.log(t,e),this.ChangeSymbol(e[1])},handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)}}}},function(t,e,a){"use strict";function i(){}var r=a(45),n=a.n(r),o=a(32),s=a.n(o),l=a(75),h=a.n(l),u=a(111),C=a.n(u);i.Explain="ä¸è´¢è´¢å¯ç½æ¥å£",C.a.Chart.JSConsole.Chart.Log=function(){},C.a.Chart.JSConsole.Complier.Log=function(){},i.Log=C.a.Chart.JSConsole.Chart.Log,i.SetMinuteChartCoordinate=function(){C.a.Chart.MARKET_SUFFIX_NAME.IsShowAvPrice=function(t){return i.IsShowAvPrice(t)},C.a.Chart.MARKET_SUFFIX_NAME.IsEnableRight=function(t,e){return i.IsEnableRight(t,e)},C.a.Chart.JSChart.GetMinuteTimeStringData().CreateUSAData=function(){return i.CreateUSAData(C.a.Chart.JSChart.GetMinuteTimeStringData())},C.a.Chart.JSChart.GetMinuteCoordinateData().GetUSAData=function(t,e){return i.GetUSAData(t,e)},C.a.Chart.JSChart.GetMinuteTimeStringData().CreateSHSZData=function(){return i.CreateSHSZData(C.a.Chart.JSChart.GetMinuteTimeStringData())},C.a.Chart.JSChart.GetMinuteCoordinateData().GetSHSZData=function(t,e){return i.GetSHSZData(t,e)},C.a.Chart.JSChart.GetMinuteTimeStringData().CreateBJData=function(){return i.CreateSHSZData(C.a.Chart.JSChart.GetMinuteTimeStringData())},C.a.Chart.JSChart.GetMinuteCoordinateData().GetBJData=function(t,e){return i.GetSHSZData(t,e)},C.a.Chart.JSChart.GetMinuteTimeStringData().CreateHKData=function(){return i.CreateHKData(C.a.Chart.JSChart.GetMinuteTimeStringData())},C.a.Chart.JSChart.GetMinuteCoordinateData().GetHKData=function(t,e){return i.GetHKData(t,e)},C.a.Chart.JSChart.GetMinuteTimeStringData().CreateForeignExchangeData=function(){return i.CreateForeignExchangeData(C.a.Chart.JSChart.GetMinuteTimeStringData())},C.a.Chart.JSChart.GetMinuteCoordinateData().GetForeignExchangeData=function(t,e){return i.GetForeignExchangeData(t,e)};var t=C.a.Chart.JSChart.GetChinaFuturesTimeData();t.AddNewFutures({Suffix:".SHF",Symbol:"WR",Time:9,Decimal:2,Name:"çº¿æ"}),t.AddNewFutures({Suffix:".DCE",Symbol:"BB",Time:9,Decimal:2,Name:"è¶åæ¿"}),t.AddNewFutures({Suffix:".DCE",Symbol:"JD",Time:9,Decimal:2,Name:"é¸¡è"}),t.AddNewFutures({Suffix:".DCE",Symbol:"LH",Time:9,Decimal:2,Name:"ççª"}),t.AddNewFutures({Suffix:".CZC",Symbol:"WH",Time:9,Decimal:0,Name:"å¼ºéº¦"}),t.AddNewFutures({Suffix:".CZC",Symbol:"PM",Time:9,Decimal:0,Name:"æ®éº¦"}),t.AddNewFutures({Suffix:".CZC",Symbol:"RI",Time:9,Decimal:0,Name:"æ©ç±¼ç¨»"}),t.AddNewFutures({Suffix:".CZC",Symbol:"RS",Time:9,Decimal:0,Name:"èç±½"}),t.AddNewFutures({Suffix:".CZC",Symbol:"JR",Time:9,Decimal:0,Name:"ç²³ç¨»"}),t.AddNewFutures({Suffix:".CZC",Symbol:"LR",Time:9,Decimal:0,Name:"æç±¼ç¨»"}),t.AddNewFutures({Suffix:".CZC",Symbol:"LR",Time:9,Decimal:0,Name:"æç±¼ç¨»"}),t.AddNewFutures({Suffix:".CZC",Symbol:"SM",Time:9,Decimal:0,Name:"é°ç¡"}),t.AddNewFutures({Suffix:".CZC",Symbol:"SF",Time:9,Decimal:0,Name:"ç¡é"}),t.AddNewFutures({Suffix:".CZC",Symbol:"AP",Time:9,Decimal:0,Name:"è¹æ"}),t.AddNewFutures({Suffix:".CZC",Symbol:"CJ",Time:9,Decimal:0,Name:"çº¢æ£"}),t.AddNewFutures({Suffix:".CZC",Symbol:"UR",Time:9,Decimal:0,Name:"å°¿ç´ "}),t.AddNewFutures({Suffix:".CZC",Symbol:"PK",Time:9,Decimal:0,Name:"è±ç"});var e=C.a.Chart.JSChart.GetInternalTimeData("CBOTTimeData");e.AddNewFutures({Symbol:"ZW",Time:3,Decimal:2,Name:"å°éº¦"}),e.AddNewFutures({Symbol:"XW",Time:4,Decimal:2,Name:"è¿·ä½ å°éº¦"}),e.AddNewFutures({Symbol:"ZC",Time:3,Decimal:2,Name:"çç±³"}),e.AddNewFutures({Symbol:"XC",Time:4,Decimal:2,Name:"è¿·ä½ çç±³"}),e.AddNewFutures({Symbol:"ZS",Time:3,Decimal:2,Name:"å¤§è±"}),e.AddNewFutures({Symbol:"XK",Time:4,Decimal:2,Name:"è¿·ä½ å¤§è±"}),e.AddNewFutures({Symbol:"ZL",Time:3,Decimal:2,Name:"è±æ²¹"}),e.AddNewFutures({Symbol:"ZM",Time:3,Decimal:2,Name:"è±ç²"}),e.AddNewFutures({Symbol:"ZO",Time:3,Decimal:2,Name:"çéº¦"}),e.AddNewFutures({Symbol:"ZR",Time:3,Decimal:2,Name:"ç¨»è°·"}),e.AddNewFutures({Symbol:"ZL",Time:3,Decimal:2,Name:"è±æ²¹"}),e.AddNewFutures({Symbol:"NQ",Time:5,Decimal:2,Name:"å°åçº³æ"}),e.AddNewFutures({Symbol:"ES",Time:5,Decimal:2,Name:"å°åæ æ®"}),e.AddNewFutures({Symbol:"YM",Time:5,Decimal:0,Name:"å°åéæ"});var e=C.a.Chart.JSChart.GetInternalTimeData("IPETimeData"),a=e.TIME_SPLIT.length;e.TIME_SPLIT[a]=i.GetCustomTradeTimeData("IPE_G"),e.TIME_SPLIT2[a]=i.GetCustomTradeTimeData("IPE_G_2"),e.AddNewFutures({Symbol:"G",Time:a,Decimal:0,Name:"ä½ç¡«æ´æ²¹"}),C.a.Chart.JSChart.GetMinuteTimeStringData().GetET=function(t){return i.GetETTimeData(t,C.a.Chart.JSChart.GetMinuteTimeStringData())},C.a.Chart.JSChart.GetMinuteCoordinateData().GetETData=function(t){return i.GetETData(t)},C.a.Chart.MARKET_SUFFIX_NAME.GetETDecimal=function(t){return i.GetETDecimal(t)},C.a.Chart.MARKET_SUFFIX_NAME.IsETShowAvPrice=function(t){return!1},C.a.Chart.MARKET_SUFFIX_NAME.GetETMarketStatus=function(t){return 2}},i.NetworkFilter=function(t,e){switch(i.Log("[HQData::NetworkFilter] "+i.Explain,t),t.Name){case"MinuteChartContainer::RequestMinuteData":i.RequestMinuteData(t,e);break;case"MinuteChartContainer::RequestHistoryMinuteData":i.RequestMinuteDaysData(t,e);break;case"KLineChartContainer::RequestHistoryData":i.RequestHistoryData(t,e);break;case"KLineChartContainer::RequestRealtimeData":i.RequestRealtimeData(t,e);break;case"KLineChartContainer::RequestFlowCapitalData":i.RequestFlowCapitalData(t,e);break;case"KLineChartContainer::ReqeustHistoryMinuteData":i.RequestHistoryMinuteData(t,e);break;case"KLineChartContainer::RequestMinuteRealtimeData":i.RequestMinuteRealtimeData(t,e);break;case"JSSymbolData::GetSymbolData":i.RequestScriptSymbolData(t,e)}},i.RequestMinuteData=function(t,e){t.PreventDefault=!0;var a=t.Request.Data.symbol[0];t.Request.Data.daycount;console.log("[HQData::RequestMinuteData] Symbol="+a);var r=i.GetMinuteApiUrl(a,1);h.a.ajax({url:r.Url,type:"GET",success:function(a){i.RecvMinuteData(a,e,{Data:t,Obj:r})}})},i.RecvMinuteData=function(t,e,a){var r=t.data,n={symbol:a.Obj.Symbol,minute:[]};n.name=r.name,n.yclose=r.preClose;var o=a.Obj.Symbol,s=o.toUpperCase(),l=i.IsSHSZ(s),h=i.IsChinaFutures(s),u=C.a.Chart.MARKET_SUFFIX_NAME.IsLME(s);h&&(n.yclearing=r.preSettlement);for(var c=0;c<r.trends.length;++c){var f=r.trends[c],d=f.split(","),D=new Date(Date.parse(d[0])),m=1e4*D.getFullYear()+100*(D.getMonth()+1)+D.getDate(),p=100*D.getHours()+D.getMinutes(),v={date:m,time:p,open:parseFloat(d[1]),high:parseFloat(d[2]),low:parseFloat(d[3]),price:parseFloat(d[4]),vol:parseFloat(d[5]),amount:parseFloat(d[6]),avprice:parseFloat(d[7])};l&&(v.vol*=100),u&&(v.avprice=null),n.date=m,n.minute.push(v)}var g={stock:[n],code:0};0==a.Data.Self.IsDestroy&&(i.Log("[HQData.RecvMinuteDaysData] hqchartData ",g),e(g))},i.RequestMinuteDaysData=function(t,e){t.PreventDefault=!0;var a=t.Request.Data.symbol,r=t.Request.Data.daycount,n=a.toUpperCase();console.log("[HQData::RequestMinuteDaysData] Symbol="+a);var o=i.GetMinuteApiUrl(a,r);h.a.ajax({url:o.Url,type:"GET",success:function(a){C.a.Chart.MARKET_SUFFIX_NAME.IsSHFE(n)||C.a.Chart.MARKET_SUFFIX_NAME.IsDCE(n)||C.a.Chart.MARKET_SUFFIX_NAME.IsCZCE(n)||C.a.Chart.MARKET_SUFFIX_NAME.IsCFFEX(n)?i.RecvMinuteDaysDataV2(a,e,{Data:t,Obj:o}):i.RecvMinuteDaysData(a,e,{Data:t,Obj:o})}})},i.RecvMinuteDaysData=function(t,e,a){var r=t.data,n=[],o=null,s=r.preClose,l=a.Obj.Symbol,h=l.toUpperCase(),u=i.IsSHSZ(h),c=C.a.Chart.JSChart.GetMinuteTimeStringData().GetTimeData(l),f=c[0],d=c.length,D=0;for(D=0;D<r.trends.length;++D){var m=r.trends[D],p=m.split(","),v=new Date(Date.parse(p[0])),g=1e4*v.getFullYear()+100*(v.getMonth()+1)+v.getDate(),T=100*v.getHours()+v.getMinutes();if(T==f)break}for(var I=0;D<r.trends.length;++D,++I){var m=r.trends[D],p=m.split(","),v=new Date(Date.parse(p[0])),g=1e4*v.getFullYear()+100*(v.getMonth()+1)+v.getDate(),T=100*v.getHours()+v.getMinutes();I%d==0&&(o&&o.minute.length>0&&n.push(o),o={minute:[],date:g,yclose:s});var S=parseFloat(p[4]),x={date:g,time:T,open:S,high:S,low:S,price:S,amount:parseFloat(p[6]),vol:parseFloat(p[5]),avprice:parseFloat(p[7])};u&&(x.vol*=100),o.minute.push([x.time,x.open,x.high,x.low,x.price,x.vol,x.amount,x.avprice,x.date])}o&&o.minute.length>0&&n.push(o),n=n.reverse();var b={symbol:a.Obj.Symbol,name:r.name,data:n,code:0};0==a.Data.Self.IsDestroy&&(i.Log("[HQData.RecvMinuteDaysData] hqchartData ",b),e(b))},i.RecvMinuteDaysDataV2=function(t,e,a){for(var r=t.data,n=[],o=r.preClose,s=a.Obj.Symbol,l=(s.toUpperCase(),r.preSettlement),h=C.a.Chart.JSChart.GetMinuteTimeStringData().GetTimeData(s),u=h[h.length-1],c=(h.length,{minute:[],date:null,yclose:o,yclearing:l}),f=0;f<r.trends.length;++f){var d=r.trends[f],D=d.split(","),m=new Date(Date.parse(D[0])),p=1e4*m.getFullYear()+100*(m.getMonth()+1)+m.getDate(),v=100*m.getHours()+m.getMinutes(),g=parseFloat(D[4]),T={date:p,time:v,open:g,high:g,low:g,price:g,amount:parseFloat(D[6]),vol:parseFloat(D[5]),avprice:parseFloat(D[7])};c.date=p,c.minute.push([T.time,T.open,T.high,T.low,T.price,T.vol,T.amount,T.avprice,T.date]),v==u&&(c&&c.minute.length>0&&n.push(c),c={minute:[],date:null,yclose:o,yclearing:l})}c&&c.minute.length>0&&n.push(c);for(var I=null,S=null,x=null,f=0;f<n.length-1;++f){var c=n[f],b=i.CorrectMinuteData(c.minute,h);if(b){for(var y=0;y<b.length;++y){var D=b[y];1==D.length?(D[1]=D[2]=D[3]=D[4]=I,D[5]=D[6]=0,D[7]=S,D[8]=x):(I=D[4],S=D[7],x=D[8])}c.minute=b}else{var D=c.minute[c.minute.length-1];I=D[4],S=D[7],x=D[8]}}n=n.reverse();var E={symbol:a.Obj.Symbol,name:r.name,data:n,code:0};0==a.Data.Self.IsDestroy&&(i.Log("[HQData.RecvMinuteDaysData] hqchartData ",E),e(E))},i.CorrectMinuteData=function(t,e){if(t.length==e.length)return null;for(var a=new s.a,i=0;i<e.length;++i){var r=e[i];a.set(r,{Index:i,Time:r,Data:null})}for(var i=0;i<t.length;++i){var r=t[i],o=r[0];a.get(o).Data=r}var l=[],h=!0,u=!1,C=void 0;try{for(var c,f=n()(a);!(h=(c=f.next()).done);h=!0){var r=c.value,d=r[1];d.Data?l[d.Index]=d.Data:l[d.Index]=[d.Time]}}catch(t){u=!0,C=t}finally{try{!h&&f.return&&f.return()}finally{if(u)throw C}}return l},i.GetInternalSymbol=function(t){var e=t.split("."),a=(t.toUpperCase(),e[0].split("_")),i=parseInt(a[1]),r=a[0];if(r.indexOf("-")>0){r=r.split("-")[1]}return{Market:i,Symbol:r}},i.GetMinuteApiUrl=function(t,e){var a=i.GetInternalSymbol(t);return{Url:"/eastmoney/api/qt/stock/trends2/get?fields1=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f11,f12,f13&fields2=f51,f52,f53,f54,f55,f56,f57,f58&secid="+a.Market+"."+a.Symbol+"&ndays="+e+"&iscr=0&iscca=0",Symbol:t,InternalSymbol:a,DayCount:e}},i.IsSHSZ=function(t){return C.a.Chart.MARKET_SUFFIX_NAME.IsSHSZ(t)},i.IsChinaFutures=function(t){return C.a.Chart.MARKET_SUFFIX_NAME.IsChinaFutures(t)},i.IsShowAvPrice=function(t){return!C.a.Chart.MARKET_SUFFIX_NAME.IsLME(t)&&"UDI_100.ET"!=t},i.IsShowVolChart=function(t){return!C.a.Chart.MARKET_SUFFIX_NAME.IsForeignExchange(t)&&"UDI_100.ET"!=t},i.GetCustomTradeTimeData=function(t){if("IPE_G"==t){var e={Name:"7:50-6:00",Data:[{Start:750,End:2359},{Start:0,End:600}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"},{Value:400,Text:"4:00"},{Value:600,Text:"6:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"},{Value:400,Text:"4:00"},{Value:600,Text:"6:00"}],Min:[{Value:800,Text:"8:00"},{Value:2e3,Text:"20:00"},{Value:600,Text:"6:00"}]}};return e}if("IPE_G_2"==t){var e={Name:"08:50-07:00",Data:[{Start:850,End:2359},{Start:0,End:700}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"},{Value:500,Text:"5:00"},{Value:700,Text:"7:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"},{Value:500,Text:"5:00"},{Value:700,Text:"7:00"}],Min:[{Value:900,Text:"9:00"},{Value:2100,Text:"21:00"},{Value:700,Text:"7:00"}]}};return e}},i.CreateUSAData=function(t){var e=[{Start:2130,End:2359},{Start:0,End:400}];return t.CreateTimeData(e)},i.GetUSAData=function(t,e){return{Full:[[0,0,"rgb(200,200,200)","21:30"],[30,1,"RGB(200,200,200)","22:00"],[60,0,"RGB(200,200,200)","22:30"],[90,1,"RGB(200,200,200)","23:00"],[120,0,"RGB(200,200,200)","23:30"],[150,1,"RGB(200,200,200)","00:00"],[180,0,"RGB(200,200,200)","00:30"],[210,1,"RGB(200,200,200)","01:00"],[240,0,"RGB(200,200,200)","01:30"],[270,1,"RGB(200,200,200)","02:00"],[300,0,"RGB(200,200,200)","02:30"],[330,1,"RGB(200,200,200)","03:00"],[360,0,"RGB(200,200,200)","03:30"],[390,1,"RGB(200,200,200)","04:00"]],Simple:[[0,0,"rgb(200,200,200)","21:30"],[90,1,"RGB(200,200,200)","23:00"],[150,1,"RGB(200,200,200)","00:00"],[270,1,"RGB(200,200,200)","02:00"],[390,1,"RGB(200,200,200)","04:00"]],Min:[[0,0,"rgb(200,200,200)","21:30"],[210,1,"RGB(200,200,200)","01:00"],[390,1,"RGB(200,200,200)","04:00"]],Count:391,//!! ä¸å±çåéæ°æ®ä¸ªæ°ï¼ä¸è¦å¡«éäº
MiddleCount:195,GetData:function(t){return t<200?this.Min:t<400?this.Simple:this.Full}}},i.CreateSHSZData=function(t){var e=[{Start:930,End:1130},{Start:1301,End:1500}];return t.CreateTimeData(e)},i.GetSHSZData=function(t,e){return{Full:[[0,0,"rgb(200,200,200)","09:30"],[31,0,"RGB(200,200,200)","10:00"],[61,0,"RGB(200,200,200)","10:30"],[91,0,"RGB(200,200,200)","11:00"],[120,1,"RGB(200,200,200)","11:30"],[150,0,"RGB(200,200,200)","13:30"],[180,0,"RGB(200,200,200)","14:00"],[210,0,"RGB(200,200,200)","14:30"],[240,1,"RGB(200,200,200)","15:00"]],Simple:[[0,0,"rgb(200,200,200)","09:30"],[61,0,"RGB(200,200,200)","10:30"],[120,1,"RGB(200,200,200)","11:30"],[180,0,"RGB(200,200,200)","14:00"],[240,1,"RGB(200,200,200)","15:00"]],Min:[[0,0,"rgb(200,200,200)","09:30"],[120,1,"RGB(200,200,200)","11:30"],[240,1,"RGB(200,200,200)","15:00"]],Count:241,//!! ä¸å±çåéæ°æ®ä¸ªæ°ï¼ä¸è¦å¡«éäº
MiddleCount:121,GetData:function(t){return t<200?this.Min:t<400?this.Simple:this.Full}}},i.CreateHKData=function(t){var e=[{Start:930,End:1200},{Start:1301,End:1600}];return t.CreateTimeData(e)},i.GetHKData=function(t,e){return{Full:[[0,1,"RGB(200,200,200)","09:30"],[30,0,"RGB(200,200,200)","10:00"],[60,1,"RGB(200,200,200)","10:30"],[90,0,"RGB(200,200,200)","11:00"],[120,1,"RGB(200,200,200)","11:30"],[151,0,"RGB(200,200,200)","13:00"],[181,1,"RGB(200,200,200)","13:30"],[211,0,"RGB(200,200,200)","14:00"],[241,1,"RGB(200,200,200)","14:30"],[271,0,"RGB(200,200,200)","15:00"],[301,1,"RGB(200,200,200)","15:30"],[331,1,"RGB(200,200,200)","16:00"]],Simple:[[0,1,"RGB(200,200,200)","09:30"],[60,1,"RGB(200,200,200)","10:30"],[120,1,"RGB(200,200,200)","11:30"],[211,0,"RGB(200,200,200)","14:00"],[271,0,"RGB(200,200,200)","15:00"],[331,1,"RGB(200,200,200)","16:00"]],Min:[[0,1,"RGB(200,200,200)","09:30"],[151,0,"RGB(200,200,200)","13:00"],[331,1,"RGB(200,200,200)","16:00"]],Count:331,MiddleCount:150,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}}},i.CreateForeignExchangeData=function(t){var e=[{Start:500,End:2359},{Start:0,End:459}];return t.CreateTimeData(e)},i.GetForeignExchangeData=function(t,e){return{Full:[[0,1,"RGB(200,200,200)","05:00"],[120,1,"RGB(200,200,200)","07:00"],[240,1,"RGB(200,200,200)","09:00"],[360,1,"RGB(200,200,200)","11:00"],[480,0,"RGB(200,200,200)","13:00"],[600,1,"RGB(200,200,200)","15:00"],[720,1,"RGB(200,200,200)","17:00"],[840,1,"RGB(200,200,200)","19:00"],[960,1,"RGB(200,200,200)","21:00"],[1080,1,"RGB(200,200,200)","23:00"],[1200,1,"RGB(200,200,200)","01:00"],[1320,1,"RGB(200,200,200)","03:00"],[1439,1,"RGB(200,200,200)","04:59"]],Simple:[[0,1,"RGB(200,200,200)","06:00"],[240,1,"RGB(200,200,200)","10:00"],[480,0,"RGB(200,200,200)","14:00"],[720,1,"RGB(200,200,200)","18:00"],[960,1,"RGB(200,200,200)","22:00"],[1200,1,"RGB(200,200,200)","02:00"]],Min:[[0,1,"RGB(200,200,200)","06:00"],[480,0,"RGB(200,200,200)","14:00"],[960,1,"RGB(200,200,200)","22:00"]],Count:1440,MiddleCount:600,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}}},i.GetETTimeData=function(t,e){if("UDI_100.ET"==t){var a=[{Start:600,End:2359},{Start:0,End:559}];return e.CreateTimeData(a)}},i.GetETData=function(t){if("UDI_100.ET"==t){return{Full:[[0,1,"RGB(200,200,200)","06:00"],[120,1,"RGB(200,200,200)","08:00"],[240,1,"RGB(200,200,200)","10:00"],[360,1,"RGB(200,200,200)","12:00"],[480,0,"RGB(200,200,200)","14:00"],[600,1,"RGB(200,200,200)","16:00"],[720,1,"RGB(200,200,200)","18:00"],[840,1,"RGB(200,200,200)","20:00"],[960,1,"RGB(200,200,200)","22:00"],[1080,1,"RGB(200,200,200)","0:00"],[1200,1,"RGB(200,200,200)","02:00"],[1320,1,"RGB(200,200,200)","04:00"],[1439,1,"RGB(200,200,200)","05:59"]],Simple:[[0,1,"RGB(200,200,200)","06:00"],[240,1,"RGB(200,200,200)","10:00"],[480,0,"RGB(200,200,200)","14:00"],[720,1,"RGB(200,200,200)","18:00"],[960,1,"RGB(200,200,200)","22:00"],[1200,1,"RGB(200,200,200)","02:00"],[1439,1,"RGB(200,200,200)","05:59"]],Min:[[0,1,"RGB(200,200,200)","06:00"],[720,1,"RGB(200,200,200)","18:00"],[1439,1,"RGB(200,200,200)","05:59"]],Count:1440,MiddleCount:600,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}}}},i.GetETDecimal=function(t){t.toUpperCase();return 2},i.GetKLineApiUrl=function(t,e,a,r){var n=i.GetInternalSymbol(t),o=i.GetInternalPeriod(e),s=i.GetInternalRight(a);if(r&&1==r.Update)var l=r.End,h="/eastmoney/api/qt/stock/kline/get?fields1=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f11,f12,f13&fields2=f51,f52,f53,f54,f55,f56,f57,f58,f59,f60,f61&beg="+l+"&end=20500101&ut=fa5fd1943c7b386f172d6893dbfba10b&rtntype=6&secid="+n.Market+"."+n.Symbol+"&klt="+o+"&fqt="+s;else var h="/eastmoney/api/qt/stock/kline/get?fields1=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f11,f12,f13&fields2=f51,f52,f53,f54,f55,f56,f57,f58,f59,f60,f61&beg=0&end=20500101&ut=fa5fd1943c7b386f172d6893dbfba10b&rtntype=6&secid="+n.Market+"."+n.Symbol+"&klt="+o+"&fqt="+s;return{Url:h,Symbol:t,InternalSymbol:n,Period:e,Right:a}},i.GetMinuteKLineApiUrl=function(t,e,a,r){var n=i.GetInternalSymbol(t),o=i.GetInternalPeriod(e),s=i.GetInternalRight(a);if(r&&1==r.Update)var l=r.End,h="/eastmoney/api/qt/stock/kline/get?fields1=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f11,f12,f13&fields2=f51,f52,f53,f54,f55,f56,f57,f58,f59,f60,f61&beg="+l+"&end=20500101&ut=fa5fd1943c7b386f172d6893dbfba10b&rtntype=6&secid="+n.Market+"."+n.Symbol+"&klt="+o+"&fqt="+s;else var h="/eastmoney/api/qt/stock/kline/get?fields1=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f11,f12,f13&fields2=f51,f52,f53,f54,f55,f56,f57,f58,f59,f60,f61&beg=0&end=20500101&ut=fa5fd1943c7b386f172d6893dbfba10b&rtntype=6&secid="+n.Market+"."+n.Symbol+"&klt="+o+"&fqt="+s;return{Url:h,Symbol:t,InternalSymbol:n,Period:e,Right:a}},i.GetInternalPeriod=function(t){return new s.a([[0,101],[1,102],[2,103],[4,1],[5,5],[6,15],[7,30],[8,60]]).get(t)},i.GetInternalRight=function(t){return 0==t?0:1==t?1:2},i.IsEnableRight=function(t,e){var a=e.toUpperCase();if(C.a.Chart.MARKET_SUFFIX_NAME.IsSHSZStockA(a))return!0;if(C.a.Chart.MARKET_SUFFIX_NAME.IsBJStock(e))return!0;var i=e.split("."),a=e.toUpperCase(),r=i[0].split("_"),n=parseInt(r[1]);return C.a.Chart.MARKET_SUFFIX_NAME.IsHK(a)?100!=n:!!C.a.Chart.MARKET_SUFFIX_NAME.IsUSA(a)&&100!=n},i.RequestFlowCapitalData=function(t,e){t.PreventDefault=!0;var a={code:0,stock:[]};0==t.Self.IsDestroy&&e(a)},i.RequestHistoryData=function(t,e){t.PreventDefault=!0;var a=t.Request.Data.symbol,r=t.Self.Period,n=t.Self.Right;console.log("[HQData::RequestHistoryData] Symbol="+a);var o=i.GetKLineApiUrl(a,r,n,null);h.a.ajax({url:o.Url,type:"GET",success:function(a){i.RecvHistoryData(a,e,{Data:t,Obj:o})}})},i.RecvHistoryData=function(t,e,a){var r=t.data,n={code:0,data:[]};n.symbol=a.Obj.Symbol,n.name=r.name;for(var o=r.preKPrice,s=0;s<r.klines.length;++s){var l=r.klines[s],h=l.split(","),u=new Date(Date.parse(h[0])),C=1e4*u.getFullYear()+100*(u.getMonth()+1)+u.getDate(),c=parseFloat(h[1]),f=parseFloat(h[2]),d=parseFloat(h[3]),D=parseFloat(h[4]),m=100*parseFloat(h[5]),p=parseFloat(h[6]),v=[C,o,c,d,D,f,m,p],g=parseFloat(h[10]);if(g>0&&m>0){var T=m/g*100;v[15]=T}n.data.push(v),o=f}0==a.Data.Self.IsDestroy&&(i.Log("[HQData.RecvHistoryData] hqchartData ",n),e(n))},i.RequestRealtimeData=function(t,e){t.PreventDefault=!0;var a=t.Request.Data.symbol[0],r=t.Self.Period,n=t.Self.Right,o=t.Self.ChartPaint[0].Data.GetDateRange(),s={Update:!0};o&&o.End&&o.End.Date>0&&(s.End=o.End.Date),console.log("[HQData::RequestRealtimeData] Symbol="+a);var l=i.GetKLineApiUrl(a,r,n,s);h.a.ajax({url:l.Url,type:"GET",success:function(a){i.RecvRealtimeData(a,e,{Data:t,Obj:l})}})},i.RecvRealtimeData=function(t,e,a){for(var r=t.data,n={symbol:a.Obj.Symbol,name:r.name},o=r.preKPrice,s=0;s<r.klines.length;++s){var l=r.klines[s],h=l.split(","),u=new Date(Date.parse(h[0])),C=1e4*u.getFullYear()+100*(u.getMonth()+1)+u.getDate(),c=parseFloat(h[1]),f=parseFloat(h[2]),d=parseFloat(h[3]),D=parseFloat(h[4]),m=100*parseFloat(h[5]),p=parseFloat(h[6]);n.yclose=o,n.open=c,n.high=d,n.low=D,n.price=f,n.vol=m,n.amount=p,n.date=C,o=f}var v={code:0,stock:[n]};0==a.Data.Self.IsDestroy&&(i.Log("[HQData.RecvRealtimeData] hqchartData ",v),e(v))},i.RequestHistoryMinuteData=function(t,e){t.PreventDefault=!0;var a=t.Request.Data.symbol,r=t.Self.Period,n=t.Self.Right;console.log("[HQData::RequestHistoryMinuteData] Symbol="+a);var o=i.GetMinuteKLineApiUrl(a,r,n,null);h.a.ajax({url:o.Url,type:"GET",success:function(a){i.RecvHistoryMinuteData(a,e,{Data:t,Obj:o})}})},i.RecvHistoryMinuteData=function(t,e,a){var r=t.data,n={code:0,data:[]};n.symbol=a.Obj.Symbol,n.name=r.name;for(var o=r.preKPrice,s=0;s<r.klines.length;++s){var l=r.klines[s],h=l.split(","),u=new Date(Date.parse(h[0])),C=1e4*u.getFullYear()+100*(u.getMonth()+1)+u.getDate(),c=100*u.getHours()+u.getMinutes(),f=parseFloat(h[1]),d=parseFloat(h[2]),D=parseFloat(h[3]),m=parseFloat(h[4]),p=100*parseFloat(h[5]),v=parseFloat(h[6]),g=[C,o,f,D,m,d,p,v,c];n.data.push(g),o=d}0==a.Data.Self.IsDestroy&&(i.Log("[HQData.RecvHistoryMinuteData] hqchartData ",n),e(n))},i.RequestMinuteRealtimeData=function(t,e){t.PreventDefault=!0;var a=t.Request.Data.symbol[0],r=t.Self.Period,n=t.Self.Right,o=t.Self.ChartPaint[0].Data.GetDateRange(),s={Update:!0};o&&o.End&&o.End.Date>0&&(s.End=o.End.Date),console.log("[HQData::RequestMinuteRealtimeData] Symbol="+a);var l=i.GetMinuteKLineApiUrl(a,r,n,s);h.a.ajax({url:l.Url,type:"GET",success:function(a){i.RecvMinuteRealtimeData(a,e,{Data:t,Obj:l})}})},i.RecvMinuteRealtimeData=function(t,e,a){for(var r=t.data,n={code:0,data:[],ver:2,symbol:a.Obj.Symbol,name:r.name},o=r.preKPrice,s=0;s<r.klines.length;++s){var l=r.klines[s],h=l.split(","),u=new Date(Date.parse(h[0])),C=1e4*u.getFullYear()+100*(u.getMonth()+1)+u.getDate(),c=100*u.getHours()+u.getMinutes(),f=parseFloat(h[1]),d=parseFloat(h[2]),D=parseFloat(h[3]),m=parseFloat(h[4]),p=100*parseFloat(h[5]),v=parseFloat(h[6]),g=[C,o,f,D,m,d,p,v,c];n.data.push(g),o=d}0==a.Data.Self.IsDestroy&&(i.Log("[HQData.RecvMinuteRealtimeData] hqchartData ",n),e(n))},i.RequestScriptSymbolData=function(t,e){t.PreventDefault=!0;var a=t.Request.Data.symbol,r=t.Request.Data.period,n=t.Request.Data.right;t.Request.KLineDataTimeRange;console.log("[HQData::RequestScriptSymbolData] Symbol="+a);var o=i.GetKLineApiUrl(a,r,n,null);h.a.ajax({url:o.Url,type:"GET",success:function(a){i.RecvScriptSymbolData(a,e,{Data:t,Obj:o})}})},i.RecvScriptSymbolData=function(t,e,a){var r=t.data,n={code:0,data:[]};n.symbol=a.Obj.Symbol,n.name=r.name;for(var o=r.preKPrice,s=0;s<r.klines.length;++s){var l=r.klines[s],h=l.split(","),u=new Date(Date.parse(h[0])),C=1e4*u.getFullYear()+100*(u.getMonth()+1)+u.getDate(),c=100*u.getHours()+u.getMinutes(),f=parseFloat(h[1]),d=parseFloat(h[2]),D=parseFloat(h[3]),m=parseFloat(h[4]),p=100*parseFloat(h[5]),v=parseFloat(h[6]),g=[C,o,f,D,m,d,p,v,c];n.data.push(g),o=d}i.Log("[HQData.RecvScriptSymbolData] hqchartData ",n),e(n)},e.a={HQData:i}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(117),r=a.n(i),n=a(2),o=a(44),s=a.n(o),l=a(118),h=(a.n(l),a(116)),u=a.n(h),C=a(120),c=a(119),f=a.n(c);window.Promise||(window.Promise=r.a),n.default.use(s.a,{locale:u.a}),n.default.use(C.a);var d=[],D=new C.a({routes:d});new n.default({el:"#app",router:D,render:function(t){return t(f.a)}})},,function(t,e,a){t.exports={default:a(162),__esModule:!0}},function(t,e,a){t.exports={default:a(164),__esModule:!0}},,function(t,e,a){t.exports={default:a(166),__esModule:!0}},function(t,e,a){t.exports={default:a(167),__esModule:!0}},function(t,e,a){t.exports={default:a(168),__esModule:!0}},function(t,e,a){t.exports={default:a(169),__esModule:!0}},,,function(t,e,a){"use strict";e.__esModule=!0;var i=a(79),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return(0,r.default)(t)}},function(t,e,a){"use strict";function i(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var a=t.indexOf("=");return-1===a&&(a=e),[a,a===e?0:4-a%4]}function r(t){var e=i(t),a=e[0],r=e[1];return 3*(a+r)/4-r}function n(t,e,a){return 3*(e+a)/4-a}function o(t){var e,a,r=i(t),o=r[0],s=r[1],l=new c(n(t,o,s)),h=0,u=s>0?o-4:o;for(a=0;a<u;a+=4)e=C[t.charCodeAt(a)]<<18|C[t.charCodeAt(a+1)]<<12|C[t.charCodeAt(a+2)]<<6|C[t.charCodeAt(a+3)],l[h++]=e>>16&255,l[h++]=e>>8&255,l[h++]=255&e;return 2===s&&(e=C[t.charCodeAt(a)]<<2|C[t.charCodeAt(a+1)]>>4,l[h++]=255&e),1===s&&(e=C[t.charCodeAt(a)]<<10|C[t.charCodeAt(a+1)]<<4|C[t.charCodeAt(a+2)]>>2,l[h++]=e>>8&255,l[h++]=255&e),l}function s(t){return u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}function l(t,e,a){for(var i,r=[],n=e;n<a;n+=3)i=(t[n]<<16&16711680)+(t[n+1]<<8&65280)+(255&t[n+2]),r.push(s(i));return r.join("")}function h(t){for(var e,a=t.length,i=a%3,r=[],n=0,o=a-i;n<o;n+=16383)r.push(l(t,n,n+16383>o?o:n+16383));return 1===i?(e=t[a-1],r.push(u[e>>2]+u[e<<4&63]+"==")):2===i&&(e=(t[a-2]<<8)+t[a-1],r.push(u[e>>10]+u[e>>4&63]+u[e<<2&63]+"=")),r.join("")}e.byteLength=r,e.toByteArray=o,e.fromByteArray=h;for(var u=[],C=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,D=f.length;d<D;++d)u[d]=f[d],C[f.charCodeAt(d)]=d;C["-".charCodeAt(0)]=62,C["_".charCodeAt(0)]=63},function(t,e,a){"use strict";(function(t){function i(){return n.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(t,e){if(i()<e)throw new RangeError("Invalid typed array length");return n.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=n.prototype):(null===t&&(t=new n(e)),t.length=e),t}function n(t,e,a){if(!(n.TYPED_ARRAY_SUPPORT||this instanceof n))return new n(t,e,a);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return o(this,t,e,a)}function o(t,e,a,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?c(t,e,a,i):"string"==typeof e?u(t,e,a):f(t,e)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e,a,i){return s(e),e<=0?r(t,e):void 0!==a?"string"==typeof i?r(t,e).fill(a,i):r(t,e).fill(a):r(t,e)}function h(t,e){if(s(e),t=r(t,e<0?0:0|d(e)),!n.TYPED_ARRAY_SUPPORT)for(var a=0;a<e;++a)t[a]=0;return t}function u(t,e,a){if("string"==typeof a&&""!==a||(a="utf8"),!n.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');var i=0|m(e,a);t=r(t,i);var o=t.write(e,a);return o!==i&&(t=t.slice(0,o)),t}function C(t,e){var a=e.length<0?0:0|d(e.length);t=r(t,a);for(var i=0;i<a;i+=1)t[i]=255&e[i];return t}function c(t,e,a,i){if(e.byteLength,a<0||e.byteLength<a)throw new RangeError("'offset' is out of bounds");if(e.byteLength<a+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===a&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,a):new Uint8Array(e,a,i),n.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=n.prototype):t=C(t,e),t}function f(t,e){if(n.isBuffer(e)){var a=0|d(e.length);return t=r(t,a),0===t.length?t:(e.copy(t,0,0,a),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||q(e.length)?r(t,0):C(t,e);if("Buffer"===e.type&&Q(e.data))return C(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function D(t){return+t!=t&&(t=0),n.alloc(+t)}function m(t,e){if(n.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var a=t.length;if(0===a)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":case void 0:return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*a;case"hex":return a>>>1;case"base64":return z(t).length;default:if(i)return W(t).length;e=(""+e).toLowerCase(),i=!0}}function p(t,e,a){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===a||a>this.length)&&(a=this.length),a<=0)return"";if(a>>>=0,e>>>=0,a<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,e,a);case"utf8":case"utf-8":return F(this,e,a);case"ascii":return L(this,e,a);case"latin1":case"binary":return N(this,e,a);case"base64":return w(this,e,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,a);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function v(t,e,a){var i=t[e];t[e]=t[a],t[a]=i}function g(t,e,a,i,r){if(0===t.length)return-1;if("string"==typeof a?(i=a,a=0):a>2147483647?a=2147483647:a<-2147483648&&(a=-2147483648),a=+a,isNaN(a)&&(a=r?0:t.length-1),a<0&&(a=t.length+a),a>=t.length){if(r)return-1;a=t.length-1}else if(a<0){if(!r)return-1;a=0}if("string"==typeof e&&(e=n.from(e,i)),n.isBuffer(e))return 0===e.length?-1:T(t,e,a,i,r);if("number"==typeof e)return e&=255,n.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,a):Uint8Array.prototype.lastIndexOf.call(t,e,a):T(t,[e],a,i,r);throw new TypeError("val must be string, number or Buffer")}function T(t,e,a,i,r){function n(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}var o=1,s=t.length,l=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;o=2,s/=2,l/=2,a/=2}var h;if(r){var u=-1;for(h=a;h<s;h++)if(n(t,h)===n(e,-1===u?0:h-u)){if(-1===u&&(u=h),h-u+1===l)return u*o}else-1!==u&&(h-=h-u),u=-1}else for(a+l>s&&(a=s-l),h=a;h>=0;h--){for(var C=!0,c=0;c<l;c++)if(n(t,h+c)!==n(e,c)){C=!1;break}if(C)return h}return-1}function I(t,e,a,i){a=Number(a)||0;var r=t.length-a;i?(i=Number(i))>r&&(i=r):i=r;var n=e.length;if(n%2!=0)throw new TypeError("Invalid hex string");i>n/2&&(i=n/2);for(var o=0;o<i;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[a+o]=s}return o}function S(t,e,a,i){return J(W(e,t.length-a),t,a,i)}function x(t,e,a,i){return J(U(e),t,a,i)}function b(t,e,a,i){return x(t,e,a,i)}function y(t,e,a,i){return J(z(e),t,a,i)}function E(t,e,a,i){return J(K(e,t.length-a),t,a,i)}function w(t,e,a){return 0===e&&a===t.length?Z.fromByteArray(t):Z.fromByteArray(t.slice(e,a))}function F(t,e,a){a=Math.min(t.length,a);for(var i=[],r=e;r<a;){var n=t[r],o=null,s=n>239?4:n>223?3:n>191?2:1;if(r+s<=a){var l,h,u,C;switch(s){case 1:n<128&&(o=n);break;case 2:l=t[r+1],128==(192&l)&&(C=(31&n)<<6|63&l)>127&&(o=C);break;case 3:l=t[r+1],h=t[r+2],128==(192&l)&&128==(192&h)&&(C=(15&n)<<12|(63&l)<<6|63&h)>2047&&(C<55296||C>57343)&&(o=C);break;case 4:l=t[r+1],h=t[r+2],u=t[r+3],128==(192&l)&&128==(192&h)&&128==(192&u)&&(C=(15&n)<<18|(63&l)<<12|(63&h)<<6|63&u)>65535&&C<1114112&&(o=C)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),r+=s}return M(i)}function M(t){var e=t.length;if(e<=$)return String.fromCharCode.apply(String,t);for(var a="",i=0;i<e;)a+=String.fromCharCode.apply(String,t.slice(i,i+=$));return a}function L(t,e,a){var i="";a=Math.min(t.length,a);for(var r=e;r<a;++r)i+=String.fromCharCode(127&t[r]);return i}function N(t,e,a){var i="";a=Math.min(t.length,a);for(var r=e;r<a;++r)i+=String.fromCharCode(t[r]);return i}function R(t,e,a){var i=t.length;(!e||e<0)&&(e=0),(!a||a<0||a>i)&&(a=i);for(var r="",n=e;n<a;++n)r+=X(t[n]);return r}function A(t,e,a){for(var i=t.slice(e,a),r="",n=0;n<i.length;n+=2)r+=String.fromCharCode(i[n]+256*i[n+1]);return r}function O(t,e,a){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>a)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,a,i,r,o){if(!n.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(a+i>t.length)throw new RangeError("Index out of range")}function B(t,e,a,i){e<0&&(e=65535+e+1);for(var r=0,n=Math.min(t.length-a,2);r<n;++r)t[a+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function _(t,e,a,i){e<0&&(e=4294967295+e+1);for(var r=0,n=Math.min(t.length-a,4);r<n;++r)t[a+r]=e>>>8*(i?r:3-r)&255}function G(t,e,a,i,r,n){if(a+i>t.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("Index out of range")}function k(t,e,a,i,r){return r||G(t,e,a,4,3.4028234663852886e38,-3.4028234663852886e38),j.write(t,e,a,i,23,4),a+4}function V(t,e,a,i,r){return r||G(t,e,a,8,1.7976931348623157e308,-1.7976931348623157e308),j.write(t,e,a,i,52,8),a+8}function H(t){if(t=Y(t).replace(tt,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function Y(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function X(t){return t<16?"0"+t.toString(16):t.toString(16)}function W(t,e){e=e||1/0;for(var a,i=t.length,r=null,n=[],o=0;o<i;++o){if((a=t.charCodeAt(o))>55295&&a<57344){if(!r){if(a>56319){(e-=3)>-1&&n.push(239,191,189);continue}if(o+1===i){(e-=3)>-1&&n.push(239,191,189);continue}r=a;continue}if(a<56320){(e-=3)>-1&&n.push(239,191,189),r=a;continue}a=65536+(r-55296<<10|a-56320)}else r&&(e-=3)>-1&&n.push(239,191,189);if(r=null,a<128){if((e-=1)<0)break;n.push(a)}else if(a<2048){if((e-=2)<0)break;n.push(a>>6|192,63&a|128)}else if(a<65536){if((e-=3)<0)break;n.push(a>>12|224,a>>6&63|128,63&a|128)}else{if(!(a<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;n.push(a>>18|240,a>>12&63|128,a>>6&63|128,63&a|128)}}return n}function U(t){for(var e=[],a=0;a<t.length;++a)e.push(255&t.charCodeAt(a));return e}function K(t,e){for(var a,i,r,n=[],o=0;o<t.length&&!((e-=2)<0);++o)a=t.charCodeAt(o),i=a>>8,r=a%256,n.push(r),n.push(i);return n}function z(t){return Z.toByteArray(H(t))}function J(t,e,a,i){for(var r=0;r<i&&!(r+a>=e.length||r>=t.length);++r)e[r+a]=t[r];return r}function q(t){return t!==t}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var Z=a(157),j=a(242),Q=a(159);e.Buffer=n,e.SlowBuffer=D,e.INSPECT_MAX_BYTES=50,n.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=i(),n.poolSize=8192,n._augment=function(t){return t.__proto__=n.prototype,t},n.from=function(t,e,a){return o(null,t,e,a)},n.TYPED_ARRAY_SUPPORT&&(n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0})),n.alloc=function(t,e,a){return l(null,t,e,a)},n.allocUnsafe=function(t){return h(null,t)},n.allocUnsafeSlow=function(t){return h(null,t)},n.isBuffer=function(t){return!(null==t||!t._isBuffer)},n.compare=function(t,e){if(!n.isBuffer(t)||!n.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var a=t.length,i=e.length,r=0,o=Math.min(a,i);r<o;++r)if(t[r]!==e[r]){a=t[r],i=e[r];break}return a<i?-1:i<a?1:0},n.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(t,e){if(!Q(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return n.alloc(0);var a;if(void 0===e)for(e=0,a=0;a<t.length;++a)e+=t[a].length;var i=n.allocUnsafe(e),r=0;for(a=0;a<t.length;++a){var o=t[a];if(!n.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},n.byteLength=m,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},n.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},n.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},n.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?F(this,0,t):p.apply(this,arguments)},n.prototype.equals=function(t){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===n.compare(this,t)},n.prototype.inspect=function(){var t="",a=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,a).match(/.{2}/g).join(" "),this.length>a&&(t+=" ... ")),"<Buffer "+t+">"},n.prototype.compare=function(t,e,a,i,r){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===a&&(a=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||a>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=a)return 0;if(i>=r)return-1;if(e>=a)return 1;if(e>>>=0,a>>>=0,i>>>=0,r>>>=0,this===t)return 0;for(var o=r-i,s=a-e,l=Math.min(o,s),h=this.slice(i,r),u=t.slice(e,a),C=0;C<l;++C)if(h[C]!==u[C]){o=h[C],s=u[C];break}return o<s?-1:s<o?1:0},n.prototype.includes=function(t,e,a){return-1!==this.indexOf(t,e,a)},n.prototype.indexOf=function(t,e,a){return g(this,t,e,a,!0)},n.prototype.lastIndexOf=function(t,e,a){return g(this,t,e,a,!1)},n.prototype.write=function(t,e,a,i){if(void 0===e)i="utf8",a=this.length,e=0;else if(void 0===a&&"string"==typeof e)i=e,a=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(a)?(a|=0,void 0===i&&(i="utf8")):(i=a,a=void 0)}var r=this.length-e;if((void 0===a||a>r)&&(a=r),t.length>0&&(a<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var n=!1;;)switch(i){case"hex":return I(this,t,e,a);case"utf8":case"utf-8":return S(this,t,e,a);case"ascii":return x(this,t,e,a);case"latin1":case"binary":return b(this,t,e,a);case"base64":return y(this,t,e,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,a);default:if(n)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),n=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;n.prototype.slice=function(t,e){var a=this.length;t=~~t,e=void 0===e?a:~~e,t<0?(t+=a)<0&&(t=0):t>a&&(t=a),e<0?(e+=a)<0&&(e=0):e>a&&(e=a),e<t&&(e=t);var i;if(n.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=n.prototype;else{var r=e-t;i=new n(r,void 0);for(var o=0;o<r;++o)i[o]=this[o+t]}return i},n.prototype.readUIntLE=function(t,e,a){t|=0,e|=0,a||O(t,e,this.length);for(var i=this[t],r=1,n=0;++n<e&&(r*=256);)i+=this[t+n]*r;return i},n.prototype.readUIntBE=function(t,e,a){t|=0,e|=0,a||O(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},n.prototype.readUInt8=function(t,e){return e||O(t,1,this.length),this[t]},n.prototype.readUInt16LE=function(t,e){return e||O(t,2,this.length),this[t]|this[t+1]<<8},n.prototype.readUInt16BE=function(t,e){return e||O(t,2,this.length),this[t]<<8|this[t+1]},n.prototype.readUInt32LE=function(t,e){return e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},n.prototype.readUInt32BE=function(t,e){return e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},n.prototype.readIntLE=function(t,e,a){t|=0,e|=0,a||O(t,e,this.length);for(var i=this[t],r=1,n=0;++n<e&&(r*=256);)i+=this[t+n]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*e)),i},n.prototype.readIntBE=function(t,e,a){t|=0,e|=0,a||O(t,e,this.length);for(var i=e,r=1,n=this[t+--i];i>0&&(r*=256);)n+=this[t+--i]*r;return r*=128,n>=r&&(n-=Math.pow(2,8*e)),n},n.prototype.readInt8=function(t,e){return e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},n.prototype.readInt16LE=function(t,e){e||O(t,2,this.length);var a=this[t]|this[t+1]<<8;return 32768&a?4294901760|a:a},n.prototype.readInt16BE=function(t,e){e||O(t,2,this.length);var a=this[t+1]|this[t]<<8;return 32768&a?4294901760|a:a},n.prototype.readInt32LE=function(t,e){return e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},n.prototype.readInt32BE=function(t,e){return e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},n.prototype.readFloatLE=function(t,e){return e||O(t,4,this.length),j.read(this,t,!0,23,4)},n.prototype.readFloatBE=function(t,e){return e||O(t,4,this.length),j.read(this,t,!1,23,4)},n.prototype.readDoubleLE=function(t,e){return e||O(t,8,this.length),j.read(this,t,!0,52,8)},n.prototype.readDoubleBE=function(t,e){return e||O(t,8,this.length),j.read(this,t,!1,52,8)},n.prototype.writeUIntLE=function(t,e,a,i){if(t=+t,e|=0,a|=0,!i){P(this,t,e,a,Math.pow(2,8*a)-1,0)}var r=1,n=0;for(this[e]=255&t;++n<a&&(r*=256);)this[e+n]=t/r&255;return e+a},n.prototype.writeUIntBE=function(t,e,a,i){if(t=+t,e|=0,a|=0,!i){P(this,t,e,a,Math.pow(2,8*a)-1,0)}var r=a-1,n=1;for(this[e+r]=255&t;--r>=0&&(n*=256);)this[e+r]=t/n&255;return e+a},n.prototype.writeUInt8=function(t,e,a){return t=+t,e|=0,a||P(this,t,e,1,255,0),n.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},n.prototype.writeUInt16LE=function(t,e,a){return t=+t,e|=0,a||P(this,t,e,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):B(this,t,e,!0),e+2},n.prototype.writeUInt16BE=function(t,e,a){return t=+t,e|=0,a||P(this,t,e,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):B(this,t,e,!1),e+2},n.prototype.writeUInt32LE=function(t,e,a){return t=+t,e|=0,a||P(this,t,e,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):_(this,t,e,!0),e+4},n.prototype.writeUInt32BE=function(t,e,a){return t=+t,e|=0,a||P(this,t,e,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):_(this,t,e,!1),e+4},n.prototype.writeIntLE=function(t,e,a,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*a-1);P(this,t,e,a,r-1,-r)}var n=0,o=1,s=0;for(this[e]=255&t;++n<a&&(o*=256);)t<0&&0===s&&0!==this[e+n-1]&&(s=1),this[e+n]=(t/o>>0)-s&255;return e+a},n.prototype.writeIntBE=function(t,e,a,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*a-1);P(this,t,e,a,r-1,-r)}var n=a-1,o=1,s=0;for(this[e+n]=255&t;--n>=0&&(o*=256);)t<0&&0===s&&0!==this[e+n+1]&&(s=1),this[e+n]=(t/o>>0)-s&255;return e+a},n.prototype.writeInt8=function(t,e,a){return t=+t,e|=0,a||P(this,t,e,1,127,-128),n.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},n.prototype.writeInt16LE=function(t,e,a){return t=+t,e|=0,a||P(this,t,e,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):B(this,t,e,!0),e+2},n.prototype.writeInt16BE=function(t,e,a){return t=+t,e|=0,a||P(this,t,e,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):B(this,t,e,!1),e+2},n.prototype.writeInt32LE=function(t,e,a){return t=+t,e|=0,a||P(this,t,e,4,2147483647,-2147483648),n.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):_(this,t,e,!0),e+4},n.prototype.writeInt32BE=function(t,e,a){return t=+t,e|=0,a||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):_(this,t,e,!1),e+4},n.prototype.writeFloatLE=function(t,e,a){return k(this,t,e,!0,a)},n.prototype.writeFloatBE=function(t,e,a){return k(this,t,e,!1,a)},n.prototype.writeDoubleLE=function(t,e,a){return V(this,t,e,!0,a)},n.prototype.writeDoubleBE=function(t,e,a){return V(this,t,e,!1,a)},n.prototype.copy=function(t,e,a,i){if(a||(a=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<a&&(i=a),i===a)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(a<0||a>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-a&&(i=t.length-e+a);var r,o=i-a;if(this===t&&a<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+a];else if(o<1e3||!n.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+a];else Uint8Array.prototype.set.call(t,this.subarray(a,a+o),e);return o},n.prototype.fill=function(t,e,a,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,a=this.length):"string"==typeof a&&(i=a,a=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!n.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<a)throw new RangeError("Out of range index");if(a<=e)return this;e>>>=0,a=void 0===a?this.length:a>>>0,t||(t=0);var o;if("number"==typeof t)for(o=e;o<a;++o)this[o]=t;else{var s=n.isBuffer(t)?t:W(new n(t,i).toString()),l=s.length;for(o=0;o<a-e;++o)this[o+e]=s[o%l]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(e,a(17))},function(t,e){var a={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==a.call(t)}},function(t,e,a){a(20),a(192),t.exports=a(1).Array.from},function(t,e,a){a(30),a(20),t.exports=a(191)},function(t,e,a){var i=a(1),r=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},function(t,e,a){a(38),a(20),a(30),a(194),a(205),a(204),a(203),t.exports=a(1).Map},function(t,e,a){a(195),t.exports=a(1).Math.log10},,function(t,e,a){a(197);var i=a(1).Object;t.exports=function(t,e){return i.create(t,e)}},function(t,e,a){a(198);var i=a(1).Object;t.exports=function(t,e){return i.defineProperties(t,e)}},function(t,e,a){a(199);var i=a(1).Object;t.exports=function(t,e,a){return i.defineProperty(t,e,a)}},function(t,e,a){a(38),a(20),a(30),a(200),a(206),a(207),t.exports=a(1).Promise},function(t,e,a){a(38),a(20),a(30),a(201),a(210),a(209),a(208),t.exports=a(1).Set},,,,function(t,e,a){var i=a(24);t.exports=function(t,e){var a=[];return i(t,!1,a.push,a,e),a}},,function(t,e,a){var i=a(13),r=a(52),n=a(29),o=a(36),s=a(178);t.exports=function(t,e){var a=1==t,l=2==t,h=3==t,u=4==t,C=6==t,c=5==t||C,f=e||s;return function(e,s,d){for(var D,m,p=n(e),v=r(p),g=i(s,d,3),T=o(v.length),I=0,S=a?f(e,T):l?f(e,0):void 0;T>I;I++)if((c||I in v)&&(D=v[I],m=g(D,I,p),t))if(a)S[I]=m;else if(m)switch(t){case 3:return!0;case 5:return D;case 6:return I;case 2:S.push(D)}else if(u)return!1;return C?-1:h||u?u:S}}},function(t,e,a){var i=a(10),r=a(88),n=a(6)("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&null===(e=e[n])&&(e=void 0)),void 0===e?Array:e}},function(t,e,a){var i=a(177);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,a){"use strict";var i=a(8),r=a(27);t.exports=function(t,e,a){e in t?i.f(t,e,r(0,a)):t[e]=a}},,function(t,e){t.exports=function(t,e,a){var i=void 0===a;switch(e.length){case 0:return i?t():t.call(a);case 1:return i?t(e[0]):t.call(a,e[0]);case 2:return i?t(e[0],e[1]):t.call(a,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(a,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(a,e[0],e[1],e[2],e[3])}return t.apply(a,e)}},,function(t,e,a){var i=a(4),r=a(102).set,n=i.MutationObserver||i.WebKitMutationObserver,o=i.process,s=i.Promise,l="process"==a(23)(o);t.exports=function(){var t,e,a,h=function(){var i,r;for(l&&(i=o.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?a():e=void 0,i}}e=void 0,i&&i.enter()};if(l)a=function(){o.nextTick(h)};else if(!n||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var u=s.resolve(void 0);a=function(){u.then(h)}}else a=function(){r.call(i,h)};else{var C=!0,c=document.createTextNode("");new n(h).observe(c,{characterData:!0}),a=function(){c.data=C=!C}}return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,a()),e=r}}},,,,,,,function(t,e,a){var i=a(4),r=i.navigator;t.exports=r&&r.userAgent||""},function(t,e,a){var i=a(11),r=a(65);t.exports=a(1).getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},function(t,e,a){"use strict";var i=a(13),r=a(3),n=a(29),o=a(89),s=a(87),l=a(36),h=a(179),u=a(65);r(r.S+r.F*!a(90)(function(t){Array.from(t)}),"Array",{from:function(t){var e,a,r,C,c=n(t),f="function"==typeof this?this:Array,d=arguments.length,D=d>1?arguments[1]:void 0,m=void 0!==D,p=0,v=u(c);if(m&&(D=i(D,d>2?arguments[2]:void 0,2)),void 0==v||f==Array&&s(v))for(e=l(c.length),a=new f(e);e>p;p++)h(a,p,m?D(c[p],p):c[p]);else for(C=v.call(c),a=new f;!(r=C.next()).done;p++)h(a,p,m?o(C,D,[r.value,p],!0):r.value);return a.length=p,a}})},,function(t,e,a){"use strict";var i=a(82),r=a(62);t.exports=a(84)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return i.def(r(this,"Map"),0===t?0:t,e)}},i,!0)},function(t,e,a){var i=a(3);i(i.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},,function(t,e,a){var i=a(3);i(i.S,"Object",{create:a(33)})},function(t,e,a){var i=a(3);i(i.S+i.F*!a(7),"Object",{defineProperties:a(92)})},function(t,e,a){var i=a(3);i(i.S+i.F*!a(7),"Object",{defineProperty:a(8).f})},function(t,e,a){"use strict";var i,r,n,o,s=a(26),l=a(4),h=a(13),u=a(48),C=a(3),c=a(10),f=a(22),d=a(47),D=a(24),m=a(101),p=a(102).set,v=a(183)(),g=a(55),T=a(95),I=a(190),S=a(96),x=l.TypeError,b=l.process,y=b&&b.versions,E=y&&y.v8||"",w=l.Promise,F="process"==u(b),M=function(){},L=r=g.f,N=!!function(){try{var t=w.resolve(1),e=(t.constructor={})[a(6)("species")]=function(t){t(M,M)};return(F||"function"==typeof PromiseRejectionEvent)&&t.then(M)instanceof e&&0!==E.indexOf("6.6")&&-1===I.indexOf("Chrome/66")}catch(t){}}(),R=function(t){var e;return!(!c(t)||"function"!=typeof(e=t.then))&&e},A=function(t,e){if(!t._n){t._n=!0;var a=t._c;v(function(){for(var i=t._v,r=1==t._s,n=0;a.length>n;)!function(e){var a,n,o,s=r?e.ok:e.fail,l=e.resolve,h=e.reject,u=e.domain;try{s?(r||(2==t._h&&B(t),t._h=1),!0===s?a=i:(u&&u.enter(),a=s(i),u&&(u.exit(),o=!0)),a===e.promise?h(x("Promise-chain cycle")):(n=R(a))?n.call(a,l,h):l(a)):h(i)}catch(t){u&&!o&&u.exit(),h(t)}}(a[n++]);t._c=[],t._n=!1,e&&!t._h&&O(t)})}},O=function(t){p.call(l,function(){var e,a,i,r=t._v,n=P(t);if(n&&(e=T(function(){F?b.emit("unhandledRejection",r,t):(a=l.onunhandledrejection)?a({promise:t,reason:r}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=F||P(t)?2:1),t._a=void 0,n&&e.e)throw e.v})},P=function(t){return 1!==t._h&&0===(t._a||t._c).length},B=function(t){p.call(l,function(){var e;F?b.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},_=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),A(e,!0))},G=function(t){var e,a=this;if(!a._d){a._d=!0,a=a._w||a;try{if(a===t)throw x("Promise can't be resolved itself");(e=R(t))?v(function(){var i={_w:a,_d:!1};try{e.call(t,h(G,i,1),h(_,i,1))}catch(t){_.call(i,t)}}):(a._v=t,a._s=1,A(a,!1))}catch(t){_.call({_w:a,_d:!1},t)}}};N||(w=function(t){d(this,w,"Promise","_h"),f(t),i.call(this);try{t(h(G,this,1),h(_,this,1))}catch(t){_.call(this,t)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=a(57)(w.prototype,{then:function(t,e){var a=L(m(this,w));return a.ok="function"!=typeof t||t,a.fail="function"==typeof e&&e,a.domain=F?b.domain:void 0,this._c.push(a),this._a&&this._a.push(a),this._s&&A(this,!1),a.promise},catch:function(t){return this.then(void 0,t)}}),n=function(){var t=new i;this.promise=t,this.resolve=h(G,t,1),this.reject=h(_,t,1)},g.f=L=function(t){return t===w||t===o?new n(t):r(t)}),C(C.G+C.W+C.F*!N,{Promise:w}),a(28)(w,"Promise"),a(100)("Promise"),o=a(1).Promise,C(C.S+C.F*!N,"Promise",{reject:function(t){var e=L(this);return(0,e.reject)(t),e.promise}}),C(C.S+C.F*(s||!N),"Promise",{resolve:function(t){return S(s&&this===o?w:this,t)}}),C(C.S+C.F*!(N&&a(90)(function(t){w.all(t).catch(M)})),"Promise",{all:function(t){var e=this,a=L(e),i=a.resolve,r=a.reject,n=T(function(){var a=[],n=0,o=1;D(t,!1,function(t){var s=n++,l=!1;a.push(void 0),o++,e.resolve(t).then(function(t){l||(l=!0,a[s]=t,--o||i(a))},r)}),--o||i(a)});return n.e&&r(n.v),a.promise},race:function(t){var e=this,a=L(e),i=a.reject,r=T(function(){D(t,!1,function(t){e.resolve(t).then(a.resolve,i)})});return r.e&&i(r.v),a.promise}})},function(t,e,a){"use strict";var i=a(82),r=a(62);t.exports=a(84)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(r(this,"Set"),t=0===t?0:t,t)}},i)},,function(t,e,a){a(98)("Map")},function(t,e,a){a(99)("Map")},function(t,e,a){var i=a(3);i(i.P+i.R,"Map",{toJSON:a(83)("Map")})},function(t,e,a){"use strict";var i=a(3),r=a(1),n=a(4),o=a(101),s=a(96);i(i.P+i.R,"Promise",{finally:function(t){var e=o(this,r.Promise||n.Promise),a="function"==typeof t;return this.then(a?function(a){return s(e,t()).then(function(){return a})}:t,a?function(a){return s(e,t()).then(function(){throw a})}:t)}})},function(t,e,a){"use strict";var i=a(3),r=a(55),n=a(95);i(i.S,"Promise",{try:function(t){var e=r.f(this),a=n(t);return(a.e?e.reject:e.resolve)(a.v),e.promise}})},function(t,e,a){a(98)("Set")},function(t,e,a){a(99)("Set")},function(t,e,a){var i=a(3);i(i.P+i.R,"Set",{toJSON:a(83)("Set")})},,,function(t,e,a){e=t.exports=a(31)(void 0),e.push([t.i,"@font-face{font-family:element-icons;src:url("+a(256)+') format("woff"),url('+a(255)+') format("truetype");font-weight:400;font-display:"auto";font-style:normal}[class*=" el-icon-"],[class^=el-icon-]{font-family:element-icons!important;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;vertical-align:baseline;display:inline-block;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.el-icon-ice-cream-round:before{content:"\\E6A0"}.el-icon-ice-cream-square:before{content:"\\E6A3"}.el-icon-lollipop:before{content:"\\E6A4"}.el-icon-potato-strips:before{content:"\\E6A5"}.el-icon-milk-tea:before{content:"\\E6A6"}.el-icon-ice-drink:before{content:"\\E6A7"}.el-icon-ice-tea:before{content:"\\E6A9"}.el-icon-coffee:before{content:"\\E6AA"}.el-icon-orange:before{content:"\\E6AB"}.el-icon-pear:before{content:"\\E6AC"}.el-icon-apple:before{content:"\\E6AD"}.el-icon-cherry:before{content:"\\E6AE"}.el-icon-watermelon:before{content:"\\E6AF"}.el-icon-grape:before{content:"\\E6B0"}.el-icon-refrigerator:before{content:"\\E6B1"}.el-icon-goblet-square-full:before{content:"\\E6B2"}.el-icon-goblet-square:before{content:"\\E6B3"}.el-icon-goblet-full:before{content:"\\E6B4"}.el-icon-goblet:before{content:"\\E6B5"}.el-icon-cold-drink:before{content:"\\E6B6"}.el-icon-coffee-cup:before{content:"\\E6B8"}.el-icon-water-cup:before{content:"\\E6B9"}.el-icon-hot-water:before{content:"\\E6BA"}.el-icon-ice-cream:before{content:"\\E6BB"}.el-icon-dessert:before{content:"\\E6BC"}.el-icon-sugar:before{content:"\\E6BD"}.el-icon-tableware:before{content:"\\E6BE"}.el-icon-burger:before{content:"\\E6BF"}.el-icon-knife-fork:before{content:"\\E6C1"}.el-icon-fork-spoon:before{content:"\\E6C2"}.el-icon-chicken:before{content:"\\E6C3"}.el-icon-food:before{content:"\\E6C4"}.el-icon-dish-1:before{content:"\\E6C5"}.el-icon-dish:before{content:"\\E6C6"}.el-icon-moon-night:before{content:"\\E6EE"}.el-icon-moon:before{content:"\\E6F0"}.el-icon-cloudy-and-sunny:before{content:"\\E6F1"}.el-icon-partly-cloudy:before{content:"\\E6F2"}.el-icon-cloudy:before{content:"\\E6F3"}.el-icon-sunny:before{content:"\\E6F6"}.el-icon-sunset:before{content:"\\E6F7"}.el-icon-sunrise-1:before{content:"\\E6F8"}.el-icon-sunrise:before{content:"\\E6F9"}.el-icon-heavy-rain:before{content:"\\E6FA"}.el-icon-lightning:before{content:"\\E6FB"}.el-icon-light-rain:before{content:"\\E6FC"}.el-icon-wind-power:before{content:"\\E6FD"}.el-icon-baseball:before{content:"\\E712"}.el-icon-soccer:before{content:"\\E713"}.el-icon-football:before{content:"\\E715"}.el-icon-basketball:before{content:"\\E716"}.el-icon-ship:before{content:"\\E73F"}.el-icon-truck:before{content:"\\E740"}.el-icon-bicycle:before{content:"\\E741"}.el-icon-mobile-phone:before{content:"\\E6D3"}.el-icon-service:before{content:"\\E6D4"}.el-icon-key:before{content:"\\E6E2"}.el-icon-unlock:before{content:"\\E6E4"}.el-icon-lock:before{content:"\\E6E5"}.el-icon-watch:before{content:"\\E6FE"}.el-icon-watch-1:before{content:"\\E6FF"}.el-icon-timer:before{content:"\\E702"}.el-icon-alarm-clock:before{content:"\\E703"}.el-icon-map-location:before{content:"\\E704"}.el-icon-delete-location:before{content:"\\E705"}.el-icon-add-location:before{content:"\\E706"}.el-icon-location-information:before{content:"\\E707"}.el-icon-location-outline:before{content:"\\E708"}.el-icon-location:before{content:"\\E79E"}.el-icon-place:before{content:"\\E709"}.el-icon-discover:before{content:"\\E70A"}.el-icon-first-aid-kit:before{content:"\\E70B"}.el-icon-trophy-1:before{content:"\\E70C"}.el-icon-trophy:before{content:"\\E70D"}.el-icon-medal:before{content:"\\E70E"}.el-icon-medal-1:before{content:"\\E70F"}.el-icon-stopwatch:before{content:"\\E710"}.el-icon-mic:before{content:"\\E711"}.el-icon-copy-document:before{content:"\\E718"}.el-icon-full-screen:before{content:"\\E719"}.el-icon-switch-button:before{content:"\\E71B"}.el-icon-aim:before{content:"\\E71C"}.el-icon-crop:before{content:"\\E71D"}.el-icon-odometer:before{content:"\\E71E"}.el-icon-time:before{content:"\\E71F"}.el-icon-bangzhu:before{content:"\\E724"}.el-icon-close-notification:before{content:"\\E726"}.el-icon-microphone:before{content:"\\E727"}.el-icon-turn-off-microphone:before{content:"\\E728"}.el-icon-position:before{content:"\\E729"}.el-icon-postcard:before{content:"\\E72A"}.el-icon-message:before{content:"\\E72B"}.el-icon-chat-line-square:before{content:"\\E72D"}.el-icon-chat-dot-square:before{content:"\\E72E"}.el-icon-chat-dot-round:before{content:"\\E72F"}.el-icon-chat-square:before{content:"\\E730"}.el-icon-chat-line-round:before{content:"\\E731"}.el-icon-chat-round:before{content:"\\E732"}.el-icon-set-up:before{content:"\\E733"}.el-icon-turn-off:before{content:"\\E734"}.el-icon-open:before{content:"\\E735"}.el-icon-connection:before{content:"\\E736"}.el-icon-link:before{content:"\\E737"}.el-icon-cpu:before{content:"\\E738"}.el-icon-thumb:before{content:"\\E739"}.el-icon-female:before{content:"\\E73A"}.el-icon-male:before{content:"\\E73B"}.el-icon-guide:before{content:"\\E73C"}.el-icon-news:before{content:"\\E73E"}.el-icon-price-tag:before{content:"\\E744"}.el-icon-discount:before{content:"\\E745"}.el-icon-wallet:before{content:"\\E747"}.el-icon-coin:before{content:"\\E748"}.el-icon-money:before{content:"\\E749"}.el-icon-bank-card:before{content:"\\E74A"}.el-icon-box:before{content:"\\E74B"}.el-icon-present:before{content:"\\E74C"}.el-icon-sell:before{content:"\\E6D5"}.el-icon-sold-out:before{content:"\\E6D6"}.el-icon-shopping-bag-2:before{content:"\\E74D"}.el-icon-shopping-bag-1:before{content:"\\E74E"}.el-icon-shopping-cart-2:before{content:"\\E74F"}.el-icon-shopping-cart-1:before{content:"\\E750"}.el-icon-shopping-cart-full:before{content:"\\E751"}.el-icon-smoking:before{content:"\\E752"}.el-icon-no-smoking:before{content:"\\E753"}.el-icon-house:before{content:"\\E754"}.el-icon-table-lamp:before{content:"\\E755"}.el-icon-school:before{content:"\\E756"}.el-icon-office-building:before{content:"\\E757"}.el-icon-toilet-paper:before{content:"\\E758"}.el-icon-notebook-2:before{content:"\\E759"}.el-icon-notebook-1:before{content:"\\E75A"}.el-icon-files:before{content:"\\E75B"}.el-icon-collection:before{content:"\\E75C"}.el-icon-receiving:before{content:"\\E75D"}.el-icon-suitcase-1:before{content:"\\E760"}.el-icon-suitcase:before{content:"\\E761"}.el-icon-film:before{content:"\\E763"}.el-icon-collection-tag:before{content:"\\E765"}.el-icon-data-analysis:before{content:"\\E766"}.el-icon-pie-chart:before{content:"\\E767"}.el-icon-data-board:before{content:"\\E768"}.el-icon-data-line:before{content:"\\E76D"}.el-icon-reading:before{content:"\\E769"}.el-icon-magic-stick:before{content:"\\E76A"}.el-icon-coordinate:before{content:"\\E76B"}.el-icon-mouse:before{content:"\\E76C"}.el-icon-brush:before{content:"\\E76E"}.el-icon-headset:before{content:"\\E76F"}.el-icon-umbrella:before{content:"\\E770"}.el-icon-scissors:before{content:"\\E771"}.el-icon-mobile:before{content:"\\E773"}.el-icon-attract:before{content:"\\E774"}.el-icon-monitor:before{content:"\\E775"}.el-icon-search:before{content:"\\E778"}.el-icon-takeaway-box:before{content:"\\E77A"}.el-icon-paperclip:before{content:"\\E77D"}.el-icon-printer:before{content:"\\E77E"}.el-icon-document-add:before{content:"\\E782"}.el-icon-document:before{content:"\\E785"}.el-icon-document-checked:before{content:"\\E786"}.el-icon-document-copy:before{content:"\\E787"}.el-icon-document-delete:before{content:"\\E788"}.el-icon-document-remove:before{content:"\\E789"}.el-icon-tickets:before{content:"\\E78B"}.el-icon-folder-checked:before{content:"\\E77F"}.el-icon-folder-delete:before{content:"\\E780"}.el-icon-folder-remove:before{content:"\\E781"}.el-icon-folder-add:before{content:"\\E783"}.el-icon-folder-opened:before{content:"\\E784"}.el-icon-folder:before{content:"\\E78A"}.el-icon-edit-outline:before{content:"\\E764"}.el-icon-edit:before{content:"\\E78C"}.el-icon-date:before{content:"\\E78E"}.el-icon-c-scale-to-original:before{content:"\\E7C6"}.el-icon-view:before{content:"\\E6CE"}.el-icon-loading:before{content:"\\E6CF"}.el-icon-rank:before{content:"\\E6D1"}.el-icon-sort-down:before{content:"\\E7C4"}.el-icon-sort-up:before{content:"\\E7C5"}.el-icon-sort:before{content:"\\E6D2"}.el-icon-finished:before{content:"\\E6CD"}.el-icon-refresh-left:before{content:"\\E6C7"}.el-icon-refresh-right:before{content:"\\E6C8"}.el-icon-refresh:before{content:"\\E6D0"}.el-icon-video-play:before{content:"\\E7C0"}.el-icon-video-pause:before{content:"\\E7C1"}.el-icon-d-arrow-right:before{content:"\\E6DC"}.el-icon-d-arrow-left:before{content:"\\E6DD"}.el-icon-arrow-up:before{content:"\\E6E1"}.el-icon-arrow-down:before{content:"\\E6DF"}.el-icon-arrow-right:before{content:"\\E6E0"}.el-icon-arrow-left:before{content:"\\E6DE"}.el-icon-top-right:before{content:"\\E6E7"}.el-icon-top-left:before{content:"\\E6E8"}.el-icon-top:before{content:"\\E6E6"}.el-icon-bottom:before{content:"\\E6EB"}.el-icon-right:before{content:"\\E6E9"}.el-icon-back:before{content:"\\E6EA"}.el-icon-bottom-right:before{content:"\\E6EC"}.el-icon-bottom-left:before{content:"\\E6ED"}.el-icon-caret-top:before{content:"\\E78F"}.el-icon-caret-bottom:before{content:"\\E790"}.el-icon-caret-right:before{content:"\\E791"}.el-icon-caret-left:before{content:"\\E792"}.el-icon-d-caret:before{content:"\\E79A"}.el-icon-share:before{content:"\\E793"}.el-icon-menu:before{content:"\\E798"}.el-icon-s-grid:before{content:"\\E7A6"}.el-icon-s-check:before{content:"\\E7A7"}.el-icon-s-data:before{content:"\\E7A8"}.el-icon-s-opportunity:before{content:"\\E7AA"}.el-icon-s-custom:before{content:"\\E7AB"}.el-icon-s-claim:before{content:"\\E7AD"}.el-icon-s-finance:before{content:"\\E7AE"}.el-icon-s-comment:before{content:"\\E7AF"}.el-icon-s-flag:before{content:"\\E7B0"}.el-icon-s-marketing:before{content:"\\E7B1"}.el-icon-s-shop:before{content:"\\E7B4"}.el-icon-s-open:before{content:"\\E7B5"}.el-icon-s-management:before{content:"\\E7B6"}.el-icon-s-ticket:before{content:"\\E7B7"}.el-icon-s-release:before{content:"\\E7B8"}.el-icon-s-home:before{content:"\\E7B9"}.el-icon-s-promotion:before{content:"\\E7BA"}.el-icon-s-operation:before{content:"\\E7BB"}.el-icon-s-unfold:before{content:"\\E7BC"}.el-icon-s-fold:before{content:"\\E7A9"}.el-icon-s-platform:before{content:"\\E7BD"}.el-icon-s-order:before{content:"\\E7BE"}.el-icon-s-cooperation:before{content:"\\E7BF"}.el-icon-bell:before{content:"\\E725"}.el-icon-message-solid:before{content:"\\E799"}.el-icon-video-camera:before{content:"\\E772"}.el-icon-video-camera-solid:before{content:"\\E796"}.el-icon-camera:before{content:"\\E779"}.el-icon-camera-solid:before{content:"\\E79B"}.el-icon-download:before{content:"\\E77C"}.el-icon-upload2:before{content:"\\E77B"}.el-icon-upload:before{content:"\\E7C3"}.el-icon-picture-outline-round:before{content:"\\E75F"}.el-icon-picture-outline:before{content:"\\E75E"}.el-icon-picture:before{content:"\\E79F"}.el-icon-close:before{content:"\\E6DB"}.el-icon-check:before{content:"\\E6DA"}.el-icon-plus:before{content:"\\E6D9"}.el-icon-minus:before{content:"\\E6D8"}.el-icon-help:before{content:"\\E73D"}.el-icon-s-help:before{content:"\\E7B3"}.el-icon-circle-close:before{content:"\\E78D"}.el-icon-circle-check:before{content:"\\E720"}.el-icon-circle-plus-outline:before{content:"\\E723"}.el-icon-remove-outline:before{content:"\\E722"}.el-icon-zoom-out:before{content:"\\E776"}.el-icon-zoom-in:before{content:"\\E777"}.el-icon-error:before{content:"\\E79D"}.el-icon-success:before{content:"\\E79C"}.el-icon-circle-plus:before{content:"\\E7A0"}.el-icon-remove:before{content:"\\E7A2"}.el-icon-info:before{content:"\\E7A1"}.el-icon-question:before{content:"\\E7A4"}.el-icon-warning-outline:before{content:"\\E6C9"}.el-icon-warning:before{content:"\\E7A3"}.el-icon-goods:before{content:"\\E7C2"}.el-icon-s-goods:before{content:"\\E7B2"}.el-icon-star-off:before{content:"\\E717"}.el-icon-star-on:before{content:"\\E797"}.el-icon-more-outline:before{content:"\\E6CC"}.el-icon-more:before{content:"\\E794"}.el-icon-phone-outline:before{content:"\\E6CB"}.el-icon-phone:before{content:"\\E795"}.el-icon-user:before{content:"\\E6E3"}.el-icon-user-solid:before{content:"\\E7A5"}.el-icon-setting:before{content:"\\E6CA"}.el-icon-s-tools:before{content:"\\E7AC"}.el-icon-delete:before{content:"\\E6D7"}.el-icon-delete-solid:before{content:"\\E7C9"}.el-icon-eleme:before{content:"\\E7C7"}.el-icon-platform-eleme:before{content:"\\E7CA"}.el-icon-loading{animation:rotating 2s linear infinite}.el-icon--right{margin-left:5px}.el-icon--left{margin-right:5px}@keyframes rotating{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.el-pagination{white-space:nowrap;padding:2px 5px;color:#303133;font-weight:700}.el-pagination:after,.el-pagination:before{display:table;content:""}.el-pagination:after{clear:both}.el-pagination button,.el-pagination span:not([class*=suffix]){display:inline-block;font-size:13px;min-width:35.5px;height:28px;line-height:28px;vertical-align:top;box-sizing:border-box}.el-pagination .el-input__inner{text-align:center;-moz-appearance:textfield;line-height:normal}.el-pagination .el-input__suffix{right:0;transform:scale(.8)}.el-pagination .el-select .el-input{width:100px;margin:0 5px}.el-pagination .el-select .el-input .el-input__inner{padding-right:25px;border-radius:3px}.el-pagination button{border:none;padding:0 6px;background:0 0}.el-pagination button:focus{outline:0}.el-pagination button:hover{color:#409eff}.el-pagination button:disabled{color:#c0c4cc;background-color:#fff;cursor:not-allowed}.el-pagination .btn-next,.el-pagination .btn-prev{background:50% no-repeat #fff;background-size:16px;cursor:pointer;margin:0;color:#303133}.el-pagination .btn-next .el-icon,.el-pagination .btn-prev .el-icon{display:block;font-size:12px;font-weight:700}.el-pagination .btn-prev{padding-right:12px}.el-pagination .btn-next{padding-left:12px}.el-pagination .el-pager li.disabled{color:#c0c4cc;cursor:not-allowed}.el-pager li,.el-pager li.btn-quicknext:hover,.el-pager li.btn-quickprev:hover{cursor:pointer}.el-pagination--small .btn-next,.el-pagination--small .btn-prev,.el-pagination--small .el-pager li,.el-pagination--small .el-pager li.btn-quicknext,.el-pagination--small .el-pager li.btn-quickprev,.el-pagination--small .el-pager li:last-child{border-color:transparent;font-size:12px;line-height:22px;height:22px;min-width:22px}.el-pagination--small .arrow.disabled{visibility:hidden}.el-pagination--small .more:before,.el-pagination--small li.more:before{line-height:24px}.el-pagination--small button,.el-pagination--small span:not([class*=suffix]){height:22px;line-height:22px}.el-pagination--small .el-pagination__editor,.el-pagination--small .el-pagination__editor.el-input .el-input__inner{height:22px}.el-pagination__sizes{margin:0 10px 0 0;font-weight:400;color:#606266}.el-pagination__sizes .el-input .el-input__inner{font-size:13px;padding-left:8px}.el-pagination__sizes .el-input .el-input__inner:hover{border-color:#409eff}.el-pagination__total{margin-right:10px;font-weight:400;color:#606266}.el-pagination__jump{margin-left:24px;font-weight:400;color:#606266}.el-pagination__jump .el-input__inner{padding:0 3px}.el-pagination__rightwrapper{float:right}.el-pagination__editor{line-height:18px;padding:0 2px;height:28px;text-align:center;margin:0 2px;box-sizing:border-box;border-radius:3px}.el-pager,.el-pagination.is-background .btn-next,.el-pagination.is-background .btn-prev{padding:0}.el-dialog,.el-pager li{-webkit-box-sizing:border-box}.el-pagination__editor.el-input{width:50px}.el-pagination__editor.el-input .el-input__inner{height:28px}.el-pagination__editor .el-input__inner::-webkit-inner-spin-button,.el-pagination__editor .el-input__inner::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.el-pagination.is-background .btn-next,.el-pagination.is-background .btn-prev,.el-pagination.is-background .el-pager li{margin:0 5px;background-color:#f4f4f5;color:#606266;min-width:30px;border-radius:2px}.el-pagination.is-background .btn-next.disabled,.el-pagination.is-background .btn-next:disabled,.el-pagination.is-background .btn-prev.disabled,.el-pagination.is-background .btn-prev:disabled,.el-pagination.is-background .el-pager li.disabled{color:#c0c4cc}.el-pagination.is-background .el-pager li:not(.disabled):hover{color:#409eff}.el-pagination.is-background .el-pager li:not(.disabled).active{background-color:#409eff;color:#fff}.el-pagination.is-background.el-pagination--small .btn-next,.el-pagination.is-background.el-pagination--small .btn-prev,.el-pagination.is-background.el-pagination--small .el-pager li{margin:0 3px;min-width:22px}.el-pager,.el-pager li{vertical-align:top;margin:0;display:inline-block}.el-pager{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;list-style:none;font-size:0}.el-pager .more:before{line-height:30px}.el-pager li{padding:0 4px;background:#fff;font-size:13px;min-width:35.5px;height:28px;line-height:28px;box-sizing:border-box;text-align:center}.el-pager li.btn-quicknext,.el-pager li.btn-quickprev{line-height:28px;color:#303133}.el-pager li.btn-quicknext.disabled,.el-pager li.btn-quickprev.disabled{color:#c0c4cc}.el-pager li.active+li{border-left:0}.el-pager li:hover{color:#409eff}.el-pager li.active{color:#409eff;cursor:default}.el-dialog{position:relative;margin:0 auto 50px;background:#fff;border-radius:2px;box-shadow:0 1px 3px rgba(0,0,0,.3);box-sizing:border-box;width:50%}.el-dialog.is-fullscreen{width:100%;margin-top:0;margin-bottom:0;height:100%;overflow:auto}.el-dialog__wrapper{position:fixed;top:0;right:0;bottom:0;left:0;overflow:auto;margin:0}.el-dialog__header{padding:20px 20px 10px}.el-dialog__headerbtn{position:absolute;top:20px;right:20px;padding:0;background:0 0;border:none;outline:0;cursor:pointer;font-size:16px}.el-dialog__headerbtn .el-dialog__close{color:#909399}.el-dialog__headerbtn:focus .el-dialog__close,.el-dialog__headerbtn:hover .el-dialog__close{color:#409eff}.el-dialog__title{line-height:24px;font-size:18px;color:#303133}.el-dialog__body{padding:30px 20px;color:#606266;font-size:14px;word-break:break-all}.el-dialog__footer{padding:10px 20px 20px;text-align:right;box-sizing:border-box}.el-dialog--center{text-align:center}.el-dialog--center .el-dialog__body{text-align:initial;padding:25px 25px 30px}.el-dialog--center .el-dialog__footer{text-align:inherit}.dialog-fade-enter-active{animation:dialog-fade-in .3s}.dialog-fade-leave-active{animation:dialog-fade-out .3s}@keyframes dialog-fade-in{0%{transform:translate3d(0,-20px,0);opacity:0}to{transform:translateZ(0);opacity:1}}@keyframes dialog-fade-out{0%{transform:translateZ(0);opacity:1}to{transform:translate3d(0,-20px,0);opacity:0}}.el-autocomplete{position:relative;display:inline-block}.el-autocomplete-suggestion{margin:5px 0;box-shadow:0 2px 12px 0 rgba(0,0,0,.1);border-radius:4px;border:1px solid #e4e7ed;box-sizing:border-box;background-color:#fff}.el-autocomplete-suggestion__wrap{max-height:280px;padding:10px 0;box-sizing:border-box}.el-autocomplete-suggestion__list{margin:0;padding:0}.el-autocomplete-suggestion li{padding:0 20px;margin:0;line-height:34px;cursor:pointer;color:#606266;font-size:14px;list-style:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.el-autocomplete-suggestion li.highlighted,.el-autocomplete-suggestion li:hover{background-color:#f5f7fa}.el-autocomplete-suggestion li.divider{margin-top:6px;border-top:1px solid #000}.el-autocomplete-suggestion li.divider:last-child{margin-bottom:-6px}.el-autocomplete-suggestion.is-loading li{text-align:center;height:100px;line-height:100px;font-size:20px;color:#999}.el-autocomplete-suggestion.is-loading li:after{display:inline-block;content:"";height:100%;vertical-align:middle}.el-autocomplete-suggestion.is-loading li:hover{background-color:#fff}.el-autocomplete-suggestion.is-loading .el-icon-loading{vertical-align:middle}.el-dropdown{display:inline-block;position:relative;color:#606266;font-size:14px}.el-dropdown .el-button-group{display:block}.el-dropdown .el-button-group .el-button{float:none}.el-dropdown .el-dropdown__caret-button{padding-left:5px;padding-right:5px;position:relative;border-left:none}.el-dropdown .el-dropdown__caret-button:before{content:"";position:absolute;display:block;width:1px;top:5px;bottom:5px;left:0;background:hsla(0,0%,100%,.5)}.el-dropdown .el-dropdown__caret-button.el-button--default:before{background:rgba(220,223,230,.5)}.el-dropdown .el-dropdown__caret-button:hover:not(.is-disabled):before{top:0;bottom:0}.el-dropdown .el-dropdown__caret-button .el-dropdown__icon{padding-left:0}.el-dropdown__icon{font-size:12px;margin:0 3px}.el-dropdown .el-dropdown-selfdefine:focus:active,.el-dropdown .el-dropdown-selfdefine:focus:not(.focusing){outline-width:0}.el-dropdown [disabled]{cursor:not-allowed;color:#bbb}.el-dropdown-menu{position:absolute;top:0;left:0;z-index:10;padding:10px 0;margin:5px 0;background-color:#fff;border:1px solid #ebeef5;border-radius:4px;box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.el-dropdown-menu__item,.el-menu-item{font-size:14px;padding:0 20px;cursor:pointer}.el-dropdown-menu__item{list-style:none;line-height:36px;margin:0;color:#606266;outline:0}.el-dropdown-menu__item:focus,.el-dropdown-menu__item:not(.is-disabled):hover{background-color:#ecf5ff;color:#66b1ff}.el-dropdown-menu__item i{margin-right:5px}.el-dropdown-menu__item--divided{position:relative;margin-top:6px;border-top:1px solid #ebeef5}.el-dropdown-menu__item--divided:before{content:"";height:6px;display:block;margin:0 -20px;background-color:#fff}.el-dropdown-menu__item.is-disabled{cursor:default;color:#bbb;pointer-events:none}.el-dropdown-menu--medium{padding:6px 0}.el-dropdown-menu--medium .el-dropdown-menu__item{line-height:30px;padding:0 17px;font-size:14px}.el-dropdown-menu--medium .el-dropdown-menu__item.el-dropdown-menu__item--divided{margin-top:6px}.el-dropdown-menu--medium .el-dropdown-menu__item.el-dropdown-menu__item--divided:before{height:6px;margin:0 -17px}.el-dropdown-menu--small{padding:6px 0}.el-dropdown-menu--small .el-dropdown-menu__item{line-height:27px;padding:0 15px;font-size:13px}.el-dropdown-menu--small .el-dropdown-menu__item.el-dropdown-menu__item--divided{margin-top:4px}.el-dropdown-menu--small .el-dropdown-menu__item.el-dropdown-menu__item--divided:before{height:4px;margin:0 -15px}.el-dropdown-menu--mini{padding:3px 0}.el-dropdown-menu--mini .el-dropdown-menu__item{line-height:24px;padding:0 10px;font-size:12px}.el-dropdown-menu--mini .el-dropdown-menu__item.el-dropdown-menu__item--divided{margin-top:3px}.el-dropdown-menu--mini .el-dropdown-menu__item.el-dropdown-menu__item--divided:before{height:3px;margin:0 -10px}.el-menu{border-right:1px solid #e6e6e6;list-style:none;position:relative;margin:0;padding-left:0}.el-menu,.el-menu--horizontal>.el-menu-item:not(.is-disabled):focus,.el-menu--horizontal>.el-menu-item:not(.is-disabled):hover,.el-menu--horizontal>.el-submenu .el-submenu__title:hover{background-color:#fff}.el-menu:after,.el-menu:before{display:table;content:""}.el-breadcrumb__item:last-child .el-breadcrumb__separator,.el-menu--collapse>.el-menu-item .el-submenu__icon-arrow,.el-menu--collapse>.el-submenu>.el-submenu__title .el-submenu__icon-arrow{display:none}.el-menu:after{clear:both}.el-menu.el-menu--horizontal{border-bottom:1px solid #e6e6e6}.el-menu--horizontal{border-right:none}.el-menu--horizontal>.el-menu-item{float:left;height:60px;line-height:60px;margin:0;border-bottom:2px solid transparent;color:#909399}.el-menu--horizontal>.el-menu-item a,.el-menu--horizontal>.el-menu-item a:hover{color:inherit}.el-menu--horizontal>.el-submenu{float:left}.el-menu--horizontal>.el-submenu:focus,.el-menu--horizontal>.el-submenu:hover{outline:0}.el-menu--horizontal>.el-submenu:focus .el-submenu__title,.el-menu--horizontal>.el-submenu:hover .el-submenu__title{color:#303133}.el-menu--horizontal>.el-submenu.is-active .el-submenu__title{border-bottom:2px solid #409eff;color:#303133}.el-menu--horizontal>.el-submenu .el-submenu__title{height:60px;line-height:60px;border-bottom:2px solid transparent;color:#909399}.el-menu--horizontal>.el-submenu .el-submenu__icon-arrow{position:static;vertical-align:middle;margin-left:8px;margin-top:-3px}.el-menu--collapse .el-submenu,.el-menu-item{position:relative}.el-menu--horizontal .el-menu .el-menu-item,.el-menu--horizontal .el-menu .el-submenu__title{background-color:#fff;float:none;height:36px;line-height:36px;padding:0 10px;color:#909399}.el-menu--horizontal .el-menu .el-menu-item.is-active,.el-menu--horizontal .el-menu .el-submenu.is-active>.el-submenu__title{color:#303133}.el-menu--horizontal .el-menu-item:not(.is-disabled):focus,.el-menu--horizontal .el-menu-item:not(.is-disabled):hover{outline:0;color:#303133}.el-menu--horizontal>.el-menu-item.is-active{border-bottom:2px solid #409eff;color:#303133}.el-menu--collapse{width:64px}.el-menu--collapse>.el-menu-item [class^=el-icon-],.el-menu--collapse>.el-submenu>.el-submenu__title [class^=el-icon-]{margin:0;vertical-align:middle;width:24px;text-align:center}.el-menu--collapse>.el-menu-item span,.el-menu--collapse>.el-submenu>.el-submenu__title span{height:0;width:0;overflow:hidden;visibility:hidden;display:inline-block}.el-menu-item,.el-submenu__title{height:56px;line-height:56px;list-style:none}.el-menu--collapse>.el-menu-item.is-active i{color:inherit}.el-menu--collapse .el-menu .el-submenu{min-width:200px}.el-menu--collapse .el-submenu .el-menu{position:absolute;margin-left:5px;top:0;left:100%;z-index:10;border:1px solid #e4e7ed;border-radius:2px;box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.el-menu--collapse .el-submenu.is-opened>.el-submenu__title .el-submenu__icon-arrow{transform:none}.el-menu--popup{z-index:100;min-width:200px;border:none;padding:5px 0;border-radius:2px;box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.el-menu--popup-bottom-start{margin-top:5px}.el-menu--popup-right-start{margin-left:5px;margin-right:5px}.el-menu-item{color:#303133;transition:border-color .3s,background-color .3s,color .3s;box-sizing:border-box;white-space:nowrap}.el-radio-button__inner,.el-submenu__title{-webkit-box-sizing:border-box;position:relative;white-space:nowrap}.el-menu-item *{vertical-align:middle}.el-menu-item i{color:#909399}.el-menu-item:focus,.el-menu-item:hover{outline:0;background-color:#ecf5ff}.el-menu-item.is-disabled{opacity:.25;cursor:not-allowed;background:0 0!important}.el-menu-item [class^=el-icon-]{margin-right:5px;width:24px;text-align:center;font-size:18px;vertical-align:middle}.el-menu-item.is-active{color:#409eff}.el-menu-item.is-active i{color:inherit}.el-submenu{list-style:none;margin:0;padding-left:0}.el-submenu__title{font-size:14px;color:#303133;padding:0 20px;cursor:pointer;transition:border-color .3s,background-color .3s,color .3s;box-sizing:border-box}.el-submenu__title *{vertical-align:middle}.el-submenu__title i{color:#909399}.el-submenu__title:focus,.el-submenu__title:hover{outline:0;background-color:#ecf5ff}.el-submenu__title.is-disabled{opacity:.25;cursor:not-allowed;background:0 0!important}.el-submenu__title:hover{background-color:#ecf5ff}.el-submenu .el-menu{border:none}.el-submenu .el-menu-item{height:50px;line-height:50px;padding:0 45px;min-width:200px}.el-submenu__icon-arrow{position:absolute;top:50%;right:20px;margin-top:-7px;transition:transform .3s;font-size:12px}.el-submenu.is-active .el-submenu__title{border-bottom-color:#409eff}.el-submenu.is-opened>.el-submenu__title .el-submenu__icon-arrow{transform:rotate(180deg)}.el-submenu.is-disabled .el-menu-item,.el-submenu.is-disabled .el-submenu__title{opacity:.25;cursor:not-allowed;background:0 0!important}.el-submenu [class^=el-icon-]{vertical-align:middle;margin-right:5px;width:24px;text-align:center;font-size:18px}.el-menu-item-group>ul{padding:0}.el-menu-item-group__title{padding:7px 0 7px 20px;line-height:normal;font-size:12px;color:#909399}.el-radio-button__inner,.el-radio-group{display:inline-block;line-height:1;vertical-align:middle}.horizontal-collapse-transition .el-submenu__title .el-submenu__icon-arrow{transition:.2s;opacity:0}.el-radio-group{font-size:0}.el-radio-button{position:relative;display:inline-block;outline:0}.el-radio-button__inner{background:#fff;border:1px solid #dcdfe6;font-weight:500;border-left:0;color:#606266;-webkit-appearance:none;text-align:center;box-sizing:border-box;outline:0;margin:0;cursor:pointer;transition:all .3s cubic-bezier(.645,.045,.355,1);padding:12px 20px;font-size:14px;border-radius:0}.el-radio-button__inner.is-round{padding:12px 20px}.el-radio-button__inner:hover{color:#409eff}.el-radio-button__inner [class*=el-icon-]{line-height:.9}.el-radio-button__inner [class*=el-icon-]+span{margin-left:5px}.el-radio-button:first-child .el-radio-button__inner{border-left:1px solid #dcdfe6;border-radius:4px 0 0 4px;box-shadow:none!important}.el-radio-button__orig-radio{opacity:0;outline:0;position:absolute;z-index:-1}.el-radio-button__orig-radio:checked+.el-radio-button__inner{color:#fff;background-color:#409eff;border-color:#409eff;box-shadow:-1px 0 0 0 #409eff}.el-radio-button__orig-radio:disabled+.el-radio-button__inner{color:#c0c4cc;cursor:not-allowed;background-image:none;background-color:#fff;border-color:#ebeef5;box-shadow:none}.el-radio-button__orig-radio:disabled:checked+.el-radio-button__inner{background-color:#f2f6fc}.el-radio-button:last-child .el-radio-button__inner{border-radius:0 4px 4px 0}.el-radio-button:first-child:last-child .el-radio-button__inner{border-radius:4px}.el-radio-button--medium .el-radio-button__inner{padding:10px 20px;font-size:14px;border-radius:0}.el-radio-button--medium .el-radio-button__inner.is-round{padding:10px 20px}.el-radio-button--small .el-radio-button__inner{padding:9px 15px;font-size:12px;border-radius:0}.el-radio-button--small .el-radio-button__inner.is-round{padding:9px 15px}.el-radio-button--mini .el-radio-button__inner{padding:7px 15px;font-size:12px;border-radius:0}.el-radio-button--mini .el-radio-button__inner.is-round{padding:7px 15px}.el-radio-button:focus:not(.is-focus):not(:active):not(.is-disabled){box-shadow:0 0 2px 2px #409eff}.el-picker-panel,.el-popover,.el-select-dropdown,.el-table-filter,.el-time-panel{-webkit-box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.el-switch{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;position:relative;font-size:14px;line-height:20px;height:20px;vertical-align:middle}.el-switch__core,.el-switch__label{display:inline-block;cursor:pointer}.el-switch.is-disabled .el-switch__core,.el-switch.is-disabled .el-switch__label{cursor:not-allowed}.el-switch__label{transition:.2s;height:20px;font-size:14px;font-weight:500;vertical-align:middle;color:#303133}.el-switch__label.is-active{color:#409eff}.el-switch__label--left{margin-right:10px}.el-switch__label--right{margin-left:10px}.el-switch__label *{line-height:1;font-size:14px;display:inline-block}.el-switch__input{position:absolute;width:0;height:0;opacity:0;margin:0}.el-switch__core{margin:0;position:relative;width:40px;height:20px;border:1px solid #dcdfe6;outline:0;border-radius:10px;box-sizing:border-box;background:#dcdfe6;transition:border-color .3s,background-color .3s;vertical-align:middle}.el-input__prefix,.el-input__suffix{-webkit-transition:all .3s;color:#c0c4cc}.el-switch__core:after{content:"";position:absolute;top:1px;left:1px;border-radius:100%;transition:all .3s;width:16px;height:16px;background-color:#fff}.el-switch.is-checked .el-switch__core{border-color:#409eff;background-color:#409eff}.el-switch.is-checked .el-switch__core:after{left:100%;margin-left:-17px}.el-switch.is-disabled{opacity:.6}.el-switch--wide .el-switch__label.el-switch__label--left span{left:10px}.el-switch--wide .el-switch__label.el-switch__label--right span{right:10px}.el-switch .label-fade-enter,.el-switch .label-fade-leave-active{opacity:0}.el-select-dropdown{position:absolute;z-index:1001;border:1px solid #e4e7ed;border-radius:4px;background-color:#fff;box-shadow:0 2px 12px 0 rgba(0,0,0,.1);box-sizing:border-box;margin:5px 0}.el-select-dropdown.is-multiple .el-select-dropdown__item{padding-right:40px}.el-select-dropdown.is-multiple .el-select-dropdown__item.selected{color:#409eff;background-color:#fff}.el-select-dropdown.is-multiple .el-select-dropdown__item.selected.hover{background-color:#f5f7fa}.el-select-dropdown.is-multiple .el-select-dropdown__item.selected:after{position:absolute;right:20px;font-family:element-icons;content:"\\E6DA";font-size:12px;font-weight:700;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.el-select-dropdown .el-scrollbar.is-empty .el-select-dropdown__list{padding:0}.el-select-dropdown__empty{padding:10px 0;margin:0;text-align:center;color:#999;font-size:14px}.el-select-dropdown__wrap{max-height:274px}.el-select-dropdown__list{list-style:none;padding:6px 0;margin:0;box-sizing:border-box}.el-select-dropdown__item{font-size:14px;padding:0 20px;position:relative;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#606266;height:34px;line-height:34px;box-sizing:border-box;cursor:pointer}.el-select-dropdown__item.is-disabled{color:#c0c4cc;cursor:not-allowed}.el-select-dropdown__item.is-disabled:hover{background-color:#fff}.el-select-dropdown__item.hover,.el-select-dropdown__item:hover{background-color:#f5f7fa}.el-select-dropdown__item.selected{color:#409eff;font-weight:700}.el-select-group{margin:0;padding:0}.el-select-group__wrap{position:relative;list-style:none;margin:0;padding:0}.el-select-group__wrap:not(:last-of-type){padding-bottom:24px}.el-select-group__wrap:not(:last-of-type):after{content:"";position:absolute;display:block;left:20px;right:20px;bottom:12px;height:1px;background:#e4e7ed}.el-select-group__title{padding-left:20px;font-size:12px;color:#909399;line-height:30px}.el-select-group .el-select-dropdown__item{padding-left:20px}.el-select{display:inline-block;position:relative}.el-select .el-select__tags>span{display:contents}.el-select:hover .el-input__inner{border-color:#c0c4cc}.el-select .el-input__inner{cursor:pointer;padding-right:35px}.el-select .el-input__inner:focus{border-color:#409eff}.el-select .el-input .el-select__caret{color:#c0c4cc;font-size:14px;transition:transform .3s;transform:rotate(180deg);cursor:pointer}.el-select .el-input .el-select__caret.is-reverse{transform:rotate(0)}.el-select .el-input .el-select__caret.is-show-close{font-size:14px;text-align:center;transform:rotate(180deg);border-radius:100%;color:#c0c4cc;transition:color .2s cubic-bezier(.645,.045,.355,1)}.el-select .el-input .el-select__caret.is-show-close:hover{color:#909399}.el-select .el-input.is-disabled .el-input__inner{cursor:not-allowed}.el-select .el-input.is-disabled .el-input__inner:hover{border-color:#e4e7ed}.el-range-editor.is-active,.el-range-editor.is-active:hover,.el-select .el-input.is-focus .el-input__inner{border-color:#409eff}.el-select>.el-input{display:block}.el-select__input{border:none;outline:0;padding:0;margin-left:15px;color:#666;font-size:14px;-moz-appearance:none;appearance:none;height:28px;background-color:transparent}.el-select__input.is-mini{height:14px}.el-select__close{cursor:pointer;position:absolute;top:8px;z-index:1000;right:25px;color:#c0c4cc;line-height:18px;font-size:14px}.el-select__close:hover{color:#909399}.el-select__tags{position:absolute;line-height:normal;white-space:normal;z-index:1;top:50%;transform:translateY(-50%);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-wrap:wrap;flex-wrap:wrap}.el-select__tags-text{overflow:hidden;text-overflow:ellipsis}.el-select .el-tag{box-sizing:border-box;border-color:transparent;margin:2px 0 2px 6px;background-color:#f0f2f5;display:-ms-flexbox;display:flex;max-width:100%;-ms-flex-align:center;align-items:center}.el-select .el-tag__close.el-icon-close{background-color:#c0c4cc;top:0;color:#fff;-ms-flex-negative:0;flex-shrink:0}.el-select .el-tag__close.el-icon-close:hover{background-color:#909399}.el-table,.el-table__expanded-cell{background-color:#fff}.el-select .el-tag__close.el-icon-close:before{display:block;transform:translateY(.5px)}.el-table{position:relative;overflow:hidden;box-sizing:border-box;-ms-flex:1;flex:1;width:100%;max-width:100%;font-size:14px;color:#606266}.el-table__empty-block{min-height:60px;text-align:center;width:100%;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}.el-table__empty-text{line-height:60px;width:50%;color:#909399}.el-table__expand-column .cell{padding:0;text-align:center}.el-table__expand-icon{position:relative;cursor:pointer;color:#666;font-size:12px;transition:transform .2s ease-in-out;height:20px}.el-table__expand-icon--expanded{transform:rotate(90deg)}.el-table__expand-icon>.el-icon{position:absolute;left:50%;top:50%;margin-left:-5px;margin-top:-5px}.el-table__expanded-cell[class*=cell]{padding:20px 50px}.el-table__expanded-cell:hover{background-color:transparent!important}.el-table__placeholder{display:inline-block;width:20px}.el-table__append-wrapper{overflow:hidden}.el-table--fit{border-right:0;border-bottom:0}.el-table--fit .el-table__cell.gutter{border-right-width:1px}.el-table--scrollable-x .el-table__body-wrapper{overflow-x:auto}.el-table--scrollable-y .el-table__body-wrapper{overflow-y:auto}.el-table thead{color:#909399;font-weight:500}.el-table thead.is-group th.el-table__cell{background:#f5f7fa}.el-table .el-table__cell{padding:12px 0;min-width:0;box-sizing:border-box;text-overflow:ellipsis;vertical-align:middle;position:relative;text-align:left}.el-table .el-table__cell.is-center{text-align:center}.el-table .el-table__cell.is-right{text-align:right}.el-table .el-table__cell.gutter{width:15px;border-right-width:0;border-bottom-width:0;padding:0}.el-table .el-table__cell.is-hidden>*{visibility:hidden}.el-table--medium .el-table__cell{padding:10px 0}.el-table--small{font-size:12px}.el-table--small .el-table__cell{padding:8px 0}.el-table--mini{font-size:12px}.el-table--mini .el-table__cell{padding:6px 0}.el-table tr{background-color:#fff}.el-table tr input[type=checkbox]{margin:0}.el-table td.el-table__cell,.el-table th.el-table__cell.is-leaf{border-bottom:1px solid #ebeef5}.el-table th.el-table__cell.is-sortable{cursor:pointer}.el-table th.el-table__cell{overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#fff}.el-table th.el-table__cell>.cell{display:inline-block;box-sizing:border-box;position:relative;vertical-align:middle;padding-left:10px;padding-right:10px;width:100%}.el-table th.el-table__cell>.cell.highlight{color:#409eff}.el-table th.el-table__cell.required>div:before{display:inline-block;content:"";width:8px;height:8px;border-radius:50%;background:#ff4d51;margin-right:5px;vertical-align:middle}.el-table td.el-table__cell div{box-sizing:border-box}.el-date-table td,.el-table-filter,.el-table .cell{-webkit-box-sizing:border-box}.el-table td.el-table__cell.gutter{width:0}.el-table .cell{box-sizing:border-box;overflow:hidden;text-overflow:ellipsis;white-space:normal;word-break:break-all;line-height:23px;padding-left:10px;padding-right:10px}.el-table .cell.el-tooltip{white-space:nowrap;min-width:50px}.el-table--border,.el-table--group{border:1px solid #ebeef5}.el-table--border:after,.el-table--group:after,.el-table:before{content:"";position:absolute;background-color:#ebeef5;z-index:1}.el-table--border:after,.el-table--group:after{top:0;right:0;width:1px;height:100%}.el-table:before{left:0;bottom:0;width:100%;height:1px}.el-table--border{border-right:none;border-bottom:none}.el-table--border.el-loading-parent--relative{border-color:transparent}.el-table--border .el-table__cell,.el-table__body-wrapper .el-table--border.is-scrolling-left~.el-table__fixed{border-right:1px solid #ebeef5}.el-table--border .el-table__cell:first-child .cell{padding-left:10px}.el-table--border th.el-table__cell.gutter:last-of-type{border-bottom:1px solid #ebeef5;border-bottom-width:1px}.el-table--border th.el-table__cell,.el-table__fixed-right-patch{border-bottom:1px solid #ebeef5}.el-table--hidden{visibility:hidden}.el-table__fixed,.el-table__fixed-right{position:absolute;top:0;left:0;overflow-x:hidden;overflow-y:hidden;box-shadow:0 0 10px rgba(0,0,0,.12)}.el-table__fixed-right:before,.el-table__fixed:before{content:"";position:absolute;left:0;bottom:0;width:100%;height:1px;background-color:#ebeef5;z-index:4}.el-table__fixed-right-patch{position:absolute;top:-1px;right:0;background-color:#fff}.el-table__fixed-right{top:0;left:auto;right:0}.el-table__fixed-right .el-table__fixed-body-wrapper,.el-table__fixed-right .el-table__fixed-footer-wrapper,.el-table__fixed-right .el-table__fixed-header-wrapper{left:auto;right:0}.el-table__fixed-header-wrapper{position:absolute;left:0;top:0;z-index:3}.el-table__fixed-footer-wrapper{position:absolute;left:0;bottom:0;z-index:3}.el-table__fixed-footer-wrapper tbody td.el-table__cell{border-top:1px solid #ebeef5;background-color:#f5f7fa;color:#606266}.el-table__fixed-body-wrapper{position:absolute;left:0;top:37px;overflow:hidden;z-index:3}.el-table__body-wrapper,.el-table__footer-wrapper,.el-table__header-wrapper{width:100%}.el-table__footer-wrapper{margin-top:-1px}.el-table__footer-wrapper td.el-table__cell{border-top:1px solid #ebeef5}.el-table__body,.el-table__footer,.el-table__header{table-layout:fixed;border-collapse:separate}.el-table__footer-wrapper,.el-table__header-wrapper{overflow:hidden}.el-table__footer-wrapper tbody td.el-table__cell,.el-table__header-wrapper tbody td.el-table__cell{background-color:#f5f7fa;color:#606266}.el-table__body-wrapper{overflow:hidden;position:relative}.el-table__body-wrapper.is-scrolling-left~.el-table__fixed,.el-table__body-wrapper.is-scrolling-none~.el-table__fixed,.el-table__body-wrapper.is-scrolling-none~.el-table__fixed-right,.el-table__body-wrapper.is-scrolling-right~.el-table__fixed-right{box-shadow:none}.el-table__body-wrapper .el-table--border.is-scrolling-right~.el-table__fixed-right{border-left:1px solid #ebeef5}.el-table .caret-wrapper{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;height:34px;width:24px;vertical-align:middle;cursor:pointer;overflow:initial;position:relative}.el-table .sort-caret{width:0;height:0;border:5px solid transparent;position:absolute;left:7px}.el-table .sort-caret.ascending{border-bottom-color:#c0c4cc;top:5px}.el-table .sort-caret.descending{border-top-color:#c0c4cc;bottom:7px}.el-table .ascending .sort-caret.ascending{border-bottom-color:#409eff}.el-table .descending .sort-caret.descending{border-top-color:#409eff}.el-table .hidden-columns{visibility:hidden;position:absolute;z-index:-1}.el-table--striped .el-table__body tr.el-table__row--striped td.el-table__cell{background:#fafafa}.el-table--striped .el-table__body tr.el-table__row--striped.current-row td.el-table__cell,.el-table--striped .el-table__body tr.el-table__row--striped.selection-row td.el-table__cell{background-color:#ecf5ff}.el-table__body tr.hover-row.current-row>td.el-table__cell,.el-table__body tr.hover-row.el-table__row--striped.current-row>td.el-table__cell,.el-table__body tr.hover-row.el-table__row--striped.selection-row>td.el-table__cell,.el-table__body tr.hover-row.el-table__row--striped>td.el-table__cell,.el-table__body tr.hover-row.selection-row>td.el-table__cell,.el-table__body tr.hover-row>td.el-table__cell{background-color:#f5f7fa}.el-table__body tr.current-row>td.el-table__cell,.el-table__body tr.selection-row>td.el-table__cell{background-color:#ecf5ff}.el-table__column-resize-proxy{position:absolute;left:200px;top:0;bottom:0;width:0;border-left:1px solid #ebeef5;z-index:10}.el-table__column-filter-trigger{display:inline-block;line-height:34px;cursor:pointer}.el-table__column-filter-trigger i{color:#909399;font-size:12px;transform:scale(.75)}.el-table--enable-row-transition .el-table__body td.el-table__cell{transition:background-color .25s ease}.el-table--enable-row-hover .el-table__body tr:hover>td.el-table__cell{background-color:#f5f7fa}.el-table--fluid-height .el-table__fixed,.el-table--fluid-height .el-table__fixed-right{bottom:0;overflow:hidden}.el-table [class*=el-table__row--level] .el-table__expand-icon{display:inline-block;width:20px;line-height:20px;height:20px;text-align:center;margin-right:3px}.el-table-column--selection .cell{padding-left:14px;padding-right:14px}.el-table-filter{border:1px solid #ebeef5;border-radius:2px;background-color:#fff;box-shadow:0 2px 12px 0 rgba(0,0,0,.1);box-sizing:border-box;margin:2px 0}.el-table-filter__list{padding:5px 0;margin:0;list-style:none;min-width:100px}.el-table-filter__list-item{line-height:36px;padding:0 10px;cursor:pointer;font-size:14px}.el-table-filter__list-item:hover{background-color:#ecf5ff;color:#66b1ff}.el-table-filter__list-item.is-active{background-color:#409eff;color:#fff}.el-table-filter__content{min-width:100px}.el-table-filter__bottom{border-top:1px solid #ebeef5;padding:8px}.el-table-filter__bottom button{background:0 0;border:none;color:#606266;cursor:pointer;font-size:13px;padding:0 3px}.el-date-table.is-week-mode .el-date-table__row.current div,.el-date-table.is-week-mode .el-date-table__row:hover div,.el-date-table td.in-range div,.el-date-table td.in-range div:hover{background-color:#f2f6fc}.el-table-filter__bottom button:hover{color:#409eff}.el-table-filter__bottom button:focus{outline:0}.el-table-filter__bottom button.is-disabled{color:#c0c4cc;cursor:not-allowed}.el-table-filter__wrap{max-height:280px}.el-table-filter__checkbox-group{padding:10px}.el-table-filter__checkbox-group label.el-checkbox{display:block;margin-right:5px;margin-bottom:8px;margin-left:5px}.el-table-filter__checkbox-group .el-checkbox:last-child{margin-bottom:0}.el-date-table{font-size:12px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.el-date-table.is-week-mode .el-date-table__row:hover td.available:hover{color:#606266}.el-date-table.is-week-mode .el-date-table__row:hover td:first-child div{margin-left:5px;border-top-left-radius:15px;border-bottom-left-radius:15px}.el-date-table.is-week-mode .el-date-table__row:hover td:last-child div{margin-right:5px;border-top-right-radius:15px;border-bottom-right-radius:15px}.el-date-table td{width:32px;height:30px;padding:4px 0;box-sizing:border-box;text-align:center;cursor:pointer;position:relative}.el-date-table td div{height:30px;padding:3px 0;box-sizing:border-box}.el-date-table td span{width:24px;height:24px;display:block;margin:0 auto;line-height:24px;position:absolute;left:50%;transform:translateX(-50%);border-radius:50%}.el-date-table td.next-month,.el-date-table td.prev-month{color:#c0c4cc}.el-date-table td.today{position:relative}.el-date-table td.today span{color:#409eff;font-weight:700}.el-date-table td.today.end-date span,.el-date-table td.today.start-date span{color:#fff}.el-date-table td.available:hover{color:#409eff}.el-date-table td.current:not(.disabled) span{color:#fff;background-color:#409eff}.el-date-table td.end-date div,.el-date-table td.start-date div{color:#fff}.el-date-table td.end-date span,.el-date-table td.start-date span{background-color:#409eff}.el-date-table td.start-date div{margin-left:5px;border-top-left-radius:15px;border-bottom-left-radius:15px}.el-date-table td.end-date div{margin-right:5px;border-top-right-radius:15px;border-bottom-right-radius:15px}.el-date-table td.disabled div{background-color:#f5f7fa;opacity:1;cursor:not-allowed;color:#c0c4cc}.el-date-table td.selected div{margin-left:5px;margin-right:5px;background-color:#f2f6fc;border-radius:15px}.el-date-table td.selected div:hover{background-color:#f2f6fc}.el-date-table td.selected span{background-color:#409eff;color:#fff;border-radius:15px}.el-date-table td.week{font-size:80%;color:#606266}.el-month-table,.el-year-table{font-size:12px;border-collapse:collapse}.el-date-table th{padding:5px;color:#606266;font-weight:400;border-bottom:1px solid #ebeef5}.el-month-table{margin:-1px}.el-month-table td{text-align:center;padding:8px 0;cursor:pointer}.el-month-table td div{height:48px;padding:6px 0;box-sizing:border-box}.el-month-table td.today .cell{color:#409eff;font-weight:700}.el-month-table td.today.end-date .cell,.el-month-table td.today.start-date .cell{color:#fff}.el-month-table td.disabled .cell{background-color:#f5f7fa;cursor:not-allowed;color:#c0c4cc}.el-month-table td.disabled .cell:hover{color:#c0c4cc}.el-month-table td .cell{width:60px;height:36px;display:block;line-height:36px;color:#606266;margin:0 auto;border-radius:18px}.el-month-table td .cell:hover{color:#409eff}.el-month-table td.in-range div,.el-month-table td.in-range div:hover{background-color:#f2f6fc}.el-month-table td.end-date div,.el-month-table td.start-date div{color:#fff}.el-month-table td.end-date .cell,.el-month-table td.start-date .cell{color:#fff;background-color:#409eff}.el-month-table td.start-date div{border-top-left-radius:24px;border-bottom-left-radius:24px}.el-month-table td.end-date div{border-top-right-radius:24px;border-bottom-right-radius:24px}.el-month-table td.current:not(.disabled) .cell{color:#409eff}.el-year-table{margin:-1px}.el-year-table .el-icon{color:#303133}.el-year-table td{text-align:center;padding:20px 3px;cursor:pointer}.el-year-table td.today .cell{color:#409eff;font-weight:700}.el-year-table td.disabled .cell{background-color:#f5f7fa;cursor:not-allowed;color:#c0c4cc}.el-year-table td.disabled .cell:hover{color:#c0c4cc}.el-year-table td .cell{width:48px;height:32px;display:block;line-height:32px;color:#606266;margin:0 auto}.el-year-table td .cell:hover,.el-year-table td.current:not(.disabled) .cell{color:#409eff}.el-date-range-picker{width:646px}.el-date-range-picker.has-sidebar{width:756px}.el-date-range-picker table{table-layout:fixed;width:100%}.el-date-range-picker .el-picker-panel__body{min-width:513px}.el-date-range-picker .el-picker-panel__content{margin:0}.el-date-range-picker__header{position:relative;text-align:center;height:28px}.el-date-range-picker__header [class*=arrow-left]{float:left}.el-date-range-picker__header [class*=arrow-right]{float:right}.el-date-range-picker__header div{font-size:16px;font-weight:500;margin-right:50px}.el-date-range-picker__content{float:left;width:50%;box-sizing:border-box;margin:0;padding:16px}.el-date-range-picker__content.is-left{border-right:1px solid #e4e4e4}.el-date-range-picker__content .el-date-range-picker__header div{margin-left:50px;margin-right:50px}.el-date-range-picker__editors-wrap{box-sizing:border-box;display:table-cell}.el-date-range-picker__editors-wrap.is-right{text-align:right}.el-date-range-picker__time-header{position:relative;border-bottom:1px solid #e4e4e4;font-size:12px;padding:8px 5px 5px;display:table;width:100%;box-sizing:border-box}.el-date-range-picker__time-header>.el-icon-arrow-right{font-size:20px;vertical-align:middle;display:table-cell;color:#303133}.el-date-range-picker__time-picker-wrap{position:relative;display:table-cell;padding:0 5px}.el-date-range-picker__time-picker-wrap .el-picker-panel{position:absolute;top:13px;right:0;z-index:1;background:#fff}.el-date-picker{width:322px}.el-date-picker.has-sidebar.has-time{width:434px}.el-date-picker.has-sidebar{width:438px}.el-date-picker.has-time .el-picker-panel__body-wrapper{position:relative}.el-date-picker .el-picker-panel__content{width:292px}.el-date-picker table{table-layout:fixed;width:100%}.el-date-picker__editor-wrap{position:relative;display:table-cell;padding:0 5px}.el-date-picker__time-header{position:relative;border-bottom:1px solid #e4e4e4;font-size:12px;padding:8px 5px 5px;display:table;width:100%;box-sizing:border-box}.el-date-picker__header{margin:12px;text-align:center}.el-date-picker__header--bordered{margin-bottom:0;padding-bottom:12px;border-bottom:1px solid #ebeef5}.el-date-picker__header--bordered+.el-picker-panel__content{margin-top:0}.el-date-picker__header-label{font-size:16px;font-weight:500;padding:0 5px;line-height:22px;text-align:center;cursor:pointer;color:#606266}.el-date-picker__header-label.active,.el-date-picker__header-label:hover{color:#409eff}.el-date-picker__prev-btn{float:left}.el-date-picker__next-btn{float:right}.el-date-picker__time-wrap{padding:10px;text-align:center}.el-date-picker__time-label{float:left;cursor:pointer;line-height:30px;margin-left:10px}.time-select{margin:5px 0;min-width:0}.time-select .el-picker-panel__content{max-height:200px;margin:0}.time-select-item{padding:8px 10px;font-size:14px;line-height:20px}.time-select-item.selected:not(.disabled){color:#409eff;font-weight:700}.time-select-item.disabled{color:#e4e7ed;cursor:not-allowed}.time-select-item:hover{background-color:#f5f7fa;font-weight:700;cursor:pointer}.el-date-editor{position:relative;display:inline-block;text-align:left}.el-date-editor.el-input,.el-date-editor.el-input__inner{width:220px}.el-date-editor--monthrange.el-input,.el-date-editor--monthrange.el-input__inner{width:300px}.el-date-editor--daterange.el-input,.el-date-editor--daterange.el-input__inner,.el-date-editor--timerange.el-input,.el-date-editor--timerange.el-input__inner{width:350px}.el-date-editor--datetimerange.el-input,.el-date-editor--datetimerange.el-input__inner{width:400px}.el-date-editor--dates .el-input__inner{text-overflow:ellipsis;white-space:nowrap}.el-date-editor .el-icon-circle-close{cursor:pointer}.el-date-editor .el-range__icon{font-size:14px;margin-left:-5px;color:#c0c4cc;float:left;line-height:32px}.el-date-editor .el-range-input{-moz-appearance:none;appearance:none;border:none;outline:0;display:inline-block;height:100%;margin:0;padding:0;width:39%;text-align:center;font-size:14px;color:#606266}.el-date-editor .el-range-input::-webkit-input-placeholder{color:#c0c4cc}.el-date-editor .el-range-input:-ms-input-placeholder,.el-date-editor .el-range-input::-ms-input-placeholder{color:#c0c4cc}.el-date-editor .el-range-input::placeholder{color:#c0c4cc}.el-date-editor .el-range-separator{display:inline-block;height:100%;padding:0 5px;margin:0;text-align:center;line-height:32px;font-size:14px;width:5%;color:#303133}.el-date-editor .el-range__close-icon{font-size:14px;color:#c0c4cc;width:25px;display:inline-block;float:right;line-height:32px}.el-range-editor.el-input__inner{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;padding:3px 10px}.el-range-editor .el-range-input{line-height:1}.el-range-editor--medium.el-input__inner{height:36px}.el-range-editor--medium .el-range-separator{line-height:28px;font-size:14px}.el-range-editor--medium .el-range-input{font-size:14px}.el-range-editor--medium .el-range__close-icon,.el-range-editor--medium .el-range__icon{line-height:28px}.el-range-editor--small.el-input__inner{height:32px}.el-range-editor--small .el-range-separator{line-height:24px;font-size:13px}.el-range-editor--small .el-range-input{font-size:13px}.el-range-editor--small .el-range__close-icon,.el-range-editor--small .el-range__icon{line-height:24px}.el-range-editor--mini.el-input__inner{height:28px}.el-range-editor--mini .el-range-separator{line-height:20px;font-size:12px}.el-range-editor--mini .el-range-input{font-size:12px}.el-range-editor--mini .el-range__close-icon,.el-range-editor--mini .el-range__icon{line-height:20px}.el-range-editor.is-disabled{background-color:#f5f7fa;border-color:#e4e7ed;color:#c0c4cc;cursor:not-allowed}.el-range-editor.is-disabled:focus,.el-range-editor.is-disabled:hover{border-color:#e4e7ed}.el-range-editor.is-disabled input{background-color:#f5f7fa;color:#c0c4cc;cursor:not-allowed}.el-range-editor.is-disabled input::-webkit-input-placeholder{color:#c0c4cc}.el-range-editor.is-disabled input:-ms-input-placeholder,.el-range-editor.is-disabled input::-ms-input-placeholder{color:#c0c4cc}.el-range-editor.is-disabled input::placeholder{color:#c0c4cc}.el-range-editor.is-disabled .el-range-separator{color:#c0c4cc}.el-picker-panel{color:#606266;border:1px solid #e4e7ed;box-shadow:0 2px 12px 0 rgba(0,0,0,.1);background:#fff;border-radius:4px;line-height:30px;margin:5px 0}.el-picker-panel__body-wrapper:after,.el-picker-panel__body:after{content:"";display:table;clear:both}.el-picker-panel__content{position:relative;margin:15px}.el-picker-panel__footer{border-top:1px solid #e4e4e4;padding:4px;text-align:right;background-color:#fff;position:relative;font-size:0}.el-picker-panel__shortcut{display:block;width:100%;border:0;background-color:transparent;line-height:28px;font-size:14px;color:#606266;padding-left:12px;text-align:left;outline:0;cursor:pointer}.el-picker-panel__shortcut:hover{color:#409eff}.el-picker-panel__shortcut.active{background-color:#e6f1fe;color:#409eff}.el-picker-panel__btn{border:1px solid #dcdcdc;color:#333;line-height:24px;border-radius:2px;padding:0 20px;cursor:pointer;background-color:transparent;outline:0;font-size:12px}.el-picker-panel__btn[disabled]{color:#ccc;cursor:not-allowed}.el-picker-panel__icon-btn{font-size:12px;color:#303133;border:0;background:0 0;cursor:pointer;outline:0;margin-top:8px}.el-picker-panel__icon-btn:hover{color:#409eff}.el-picker-panel__icon-btn.is-disabled{color:#bbb}.el-picker-panel__icon-btn.is-disabled:hover{cursor:not-allowed}.el-picker-panel__link-btn{vertical-align:middle}.el-picker-panel [slot=sidebar],.el-picker-panel__sidebar{position:absolute;top:0;bottom:0;width:110px;border-right:1px solid #e4e4e4;box-sizing:border-box;padding-top:6px;background-color:#fff;overflow:auto}.el-picker-panel [slot=sidebar]+.el-picker-panel__body,.el-picker-panel__sidebar+.el-picker-panel__body{margin-left:110px}.el-time-spinner.has-seconds .el-time-spinner__wrapper{width:33.3%}.el-time-spinner__wrapper{max-height:190px;overflow:auto;display:inline-block;width:50%;vertical-align:top;position:relative}.el-time-spinner__wrapper .el-scrollbar__wrap:not(.el-scrollbar__wrap--hidden-default){padding-bottom:15px}.el-time-spinner__input.el-input .el-input__inner,.el-time-spinner__list{padding:0;text-align:center}.el-time-spinner__wrapper.is-arrow{box-sizing:border-box;text-align:center;overflow:hidden}.el-time-spinner__wrapper.is-arrow .el-time-spinner__list{transform:translateY(-32px)}.el-time-spinner__wrapper.is-arrow .el-time-spinner__item:hover:not(.disabled):not(.active){background:#fff;cursor:default}.el-time-spinner__arrow{font-size:12px;color:#909399;position:absolute;left:0;width:100%;z-index:1;text-align:center;height:30px;line-height:30px;cursor:pointer}.el-time-spinner__arrow:hover{color:#409eff}.el-time-spinner__arrow.el-icon-arrow-up{top:10px}.el-time-spinner__arrow.el-icon-arrow-down{bottom:10px}.el-time-spinner__input.el-input{width:70%}.el-time-spinner__list{margin:0;list-style:none}.el-time-spinner__list:after,.el-time-spinner__list:before{content:"";display:block;width:100%;height:80px}.el-time-spinner__item{height:32px;line-height:32px;font-size:12px;color:#606266}.el-time-spinner__item:hover:not(.disabled):not(.active){background:#f5f7fa;cursor:pointer}.el-time-spinner__item.active:not(.disabled){color:#303133;font-weight:700}.el-time-spinner__item.disabled{color:#c0c4cc;cursor:not-allowed}.el-time-panel{margin:5px 0;border:1px solid #e4e7ed;background-color:#fff;box-shadow:0 2px 12px 0 rgba(0,0,0,.1);border-radius:2px;position:absolute;width:180px;left:0;z-index:1000;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-sizing:content-box}.el-time-panel__content{font-size:0;position:relative;overflow:hidden}.el-time-panel__content:after,.el-time-panel__content:before{content:"";top:50%;position:absolute;margin-top:-15px;height:32px;z-index:-1;left:0;right:0;box-sizing:border-box;padding-top:6px;text-align:left;border-top:1px solid #e4e7ed;border-bottom:1px solid #e4e7ed}.el-time-panel__content:after{left:50%;margin-left:12%;margin-right:12%}.el-time-panel__content:before{padding-left:50%;margin-right:12%;margin-left:12%}.el-time-panel__content.has-seconds:after{left:66.66667%}.el-time-panel__content.has-seconds:before{padding-left:33.33333%}.el-time-panel__footer{border-top:1px solid #e4e4e4;padding:4px;height:36px;line-height:25px;text-align:right;box-sizing:border-box}.el-time-panel__btn{border:none;line-height:28px;padding:0 5px;margin:0 5px;cursor:pointer;background-color:transparent;outline:0;font-size:12px;color:#303133}.el-time-panel__btn.confirm{font-weight:800;color:#409eff}.el-time-range-picker{width:354px;overflow:visible}.el-time-range-picker__content{position:relative;text-align:center;padding:10px}.el-time-range-picker__cell{box-sizing:border-box;margin:0;padding:4px 7px 7px;width:50%;display:inline-block}.el-time-range-picker__header{margin-bottom:5px;text-align:center;font-size:14px}.el-time-range-picker__body{border-radius:2px;border:1px solid #e4e7ed}.el-popover{position:absolute;background:#fff;min-width:150px;border-radius:4px;border:1px solid #ebeef5;padding:12px;z-index:2000;color:#606266;line-height:1.4;text-align:justify;font-size:14px;box-shadow:0 2px 12px 0 rgba(0,0,0,.1);word-break:break-all}.el-card.is-always-shadow,.el-card.is-hover-shadow:focus,.el-card.is-hover-shadow:hover,.el-cascader__dropdown,.el-color-picker__panel,.el-message-box,.el-notification{-webkit-box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.el-popover--plain{padding:18px 20px}.el-popover__title{color:#303133;font-size:16px;line-height:1;margin-bottom:12px}.el-popover:focus,.el-popover:focus:active,.el-popover__reference:focus:hover,.el-popover__reference:focus:not(.focusing){outline-width:0}.v-modal-enter{animation:v-modal-in .2s ease}.v-modal-leave{animation:v-modal-out .2s ease forwards}@keyframes v-modal-in{0%{opacity:0}}@keyframes v-modal-out{to{opacity:0}}.v-modal{position:fixed;left:0;top:0;width:100%;height:100%;opacity:.5;background:#000}.el-popup-parent--hidden{overflow:hidden}.el-message-box{display:inline-block;width:420px;padding-bottom:10px;vertical-align:middle;background-color:#fff;border-radius:4px;border:1px solid #ebeef5;font-size:18px;box-shadow:0 2px 12px 0 rgba(0,0,0,.1);text-align:left;overflow:hidden;backface-visibility:hidden}.el-message-box__wrapper{position:fixed;top:0;bottom:0;left:0;right:0;text-align:center}.el-message-box__wrapper:after{content:"";display:inline-block;height:100%;width:0;vertical-align:middle}.el-message-box__header{position:relative;padding:15px 15px 10px}.el-message-box__title{padding-left:0;margin-bottom:0;font-size:18px;line-height:1;color:#303133}.el-message-box__headerbtn{position:absolute;top:15px;right:15px;padding:0;border:none;outline:0;background:0 0;font-size:16px;cursor:pointer}.el-form-item.is-error .el-input__inner,.el-form-item.is-error .el-input__inner:focus,.el-form-item.is-error .el-textarea__inner,.el-form-item.is-error .el-textarea__inner:focus,.el-message-box__input input.invalid,.el-message-box__input input.invalid:focus{border-color:#f56c6c}.el-message-box__headerbtn .el-message-box__close{color:#909399}.el-message-box__headerbtn:focus .el-message-box__close,.el-message-box__headerbtn:hover .el-message-box__close{color:#409eff}.el-message-box__content{padding:10px 15px;color:#606266;font-size:14px}.el-message-box__container{position:relative}.el-message-box__input{padding-top:15px}.el-message-box__status{position:absolute;top:50%;transform:translateY(-50%);font-size:24px!important}.el-message-box__status:before{padding-left:1px}.el-message-box__status+.el-message-box__message{padding-left:36px;padding-right:12px}.el-message-box__status.el-icon-success{color:#67c23a}.el-message-box__status.el-icon-info{color:#909399}.el-message-box__status.el-icon-warning{color:#e6a23c}.el-message-box__status.el-icon-error{color:#f56c6c}.el-message-box__message{margin:0}.el-message-box__message p{margin:0;line-height:24px}.el-message-box__errormsg{color:#f56c6c;font-size:12px;min-height:18px;margin-top:2px}.el-message-box__btns{padding:5px 15px 0;text-align:right}.el-message-box__btns button:nth-child(2){margin-left:10px}.el-message-box__btns-reverse{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.el-message-box--center{padding-bottom:30px}.el-message-box--center .el-message-box__header{padding-top:30px}.el-message-box--center .el-message-box__title{position:relative;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.el-message-box--center .el-message-box__status{position:relative;top:auto;padding-right:5px;text-align:center;transform:translateY(-1px)}.el-message-box--center .el-message-box__message{margin-left:0}.el-message-box--center .el-message-box__btns,.el-message-box--center .el-message-box__content{text-align:center}.el-message-box--center .el-message-box__content{padding-left:27px;padding-right:27px}.msgbox-fade-enter-active{animation:msgbox-fade-in .3s}.msgbox-fade-leave-active{animation:msgbox-fade-out .3s}@keyframes msgbox-fade-in{0%{transform:translate3d(0,-20px,0);opacity:0}to{transform:translateZ(0);opacity:1}}@keyframes msgbox-fade-out{0%{transform:translateZ(0);opacity:1}to{transform:translate3d(0,-20px,0);opacity:0}}.el-breadcrumb{font-size:14px;line-height:1}.el-breadcrumb:after,.el-breadcrumb:before{display:table;content:""}.el-breadcrumb:after{clear:both}.el-breadcrumb__separator{margin:0 9px;font-weight:700;color:#c0c4cc}.el-breadcrumb__separator[class*=icon]{margin:0 6px;font-weight:400}.el-breadcrumb__item{float:left}.el-breadcrumb__inner{color:#606266}.el-breadcrumb__inner.is-link,.el-breadcrumb__inner a{font-weight:700;text-decoration:none;transition:color .2s cubic-bezier(.645,.045,.355,1);color:#303133}.el-breadcrumb__inner.is-link:hover,.el-breadcrumb__inner a:hover{color:#409eff;cursor:pointer}.el-breadcrumb__item:last-child .el-breadcrumb__inner,.el-breadcrumb__item:last-child .el-breadcrumb__inner:hover,.el-breadcrumb__item:last-child .el-breadcrumb__inner a,.el-breadcrumb__item:last-child .el-breadcrumb__inner a:hover{font-weight:400;color:#606266;cursor:text}.el-form--label-left .el-form-item__label{text-align:left}.el-form--label-top .el-form-item__label{float:none;display:inline-block;text-align:left;padding:0 0 10px}.el-form--inline .el-form-item{display:inline-block;margin-right:10px;vertical-align:top}.el-form--inline .el-form-item__label{float:none;display:inline-block}.el-form--inline .el-form-item__content{display:inline-block;vertical-align:top}.el-form--inline.el-form--label-top .el-form-item__content{display:block}.el-form-item{margin-bottom:22px}.el-form-item:after,.el-form-item:before{display:table;content:""}.el-form-item:after{clear:both}.el-form-item .el-form-item{margin-bottom:0}.el-form-item--mini.el-form-item,.el-form-item--small.el-form-item{margin-bottom:18px}.el-form-item .el-input__validateIcon{display:none}.el-form-item--medium .el-form-item__content,.el-form-item--medium .el-form-item__label{line-height:36px}.el-form-item--small .el-form-item__content,.el-form-item--small .el-form-item__label{line-height:32px}.el-form-item--small .el-form-item__error{padding-top:2px}.el-form-item--mini .el-form-item__content,.el-form-item--mini .el-form-item__label{line-height:28px}.el-form-item--mini .el-form-item__error{padding-top:1px}.el-form-item__label-wrap{float:left}.el-form-item__label-wrap .el-form-item__label{display:inline-block;float:none}.el-form-item__label{text-align:right;vertical-align:middle;float:left;font-size:14px;color:#606266;line-height:40px;padding:0 12px 0 0;box-sizing:border-box}.el-form-item__content{line-height:40px;position:relative;font-size:14px}.el-form-item__content:after,.el-form-item__content:before{display:table;content:""}.el-form-item__content:after{clear:both}.el-form-item__content .el-input-group{vertical-align:top}.el-form-item__error{color:#f56c6c;font-size:12px;line-height:1;padding-top:4px;position:absolute;top:100%;left:0}.el-form-item__error--inline{position:relative;top:auto;left:auto;display:inline-block;margin-left:10px}.el-form-item.is-required:not(.is-no-asterisk) .el-form-item__label-wrap>.el-form-item__label:before,.el-form-item.is-required:not(.is-no-asterisk)>.el-form-item__label:before{content:"*";color:#f56c6c;margin-right:4px}.el-form-item.is-error .el-input-group__append .el-input__inner,.el-form-item.is-error .el-input-group__prepend .el-input__inner{border-color:transparent}.el-form-item.is-error .el-input__validateIcon{color:#f56c6c}.el-form-item--feedback .el-input__validateIcon{display:inline-block}.el-tabs__header{padding:0;position:relative;margin:0 0 15px}.el-tabs__active-bar{position:absolute;bottom:0;left:0;height:2px;background-color:#409eff;z-index:1;transition:transform .3s cubic-bezier(.645,.045,.355,1);list-style:none}.el-tabs__new-tab{float:right;border:1px solid #d3dce6;height:18px;width:18px;line-height:18px;margin:12px 0 9px 10px;border-radius:3px;text-align:center;font-size:12px;color:#d3dce6;cursor:pointer;transition:all .15s}.el-tabs__new-tab .el-icon-plus{transform:scale(.8)}.el-tabs__new-tab:hover{color:#409eff}.el-tabs__nav-wrap{overflow:hidden;margin-bottom:-1px;position:relative}.el-tabs__nav-wrap:after{content:"";position:absolute;left:0;bottom:0;width:100%;height:2px;background-color:#e4e7ed;z-index:1}.el-tabs__nav-wrap.is-scrollable{padding:0 20px;box-sizing:border-box}.el-tabs__nav-scroll{overflow:hidden}.el-tabs__nav-next,.el-tabs__nav-prev{position:absolute;cursor:pointer;line-height:44px;font-size:12px;color:#909399}.el-tabs__nav-next{right:0}.el-tabs__nav-prev{left:0}.el-tabs__nav{white-space:nowrap;position:relative;transition:transform .3s;float:left;z-index:2}.el-tabs__nav.is-stretch{min-width:100%;display:-ms-flexbox;display:flex}.el-tabs__nav.is-stretch>*{-ms-flex:1;flex:1;text-align:center}.el-tabs__item{padding:0 20px;height:40px;box-sizing:border-box;line-height:40px;display:inline-block;list-style:none;font-size:14px;font-weight:500;color:#303133;position:relative}.el-tabs__item:focus,.el-tabs__item:focus:active{outline:0}.el-tabs__item:focus.is-active.is-focus:not(:active){box-shadow:inset 0 0 2px 2px #409eff;border-radius:3px}.el-tabs__item .el-icon-close{border-radius:50%;text-align:center;transition:all .3s cubic-bezier(.645,.045,.355,1);margin-left:5px}.el-tabs__item .el-icon-close:before{transform:scale(.9);display:inline-block}.el-tabs--card>.el-tabs__header .el-tabs__active-bar,.el-tabs--left.el-tabs--card .el-tabs__active-bar.is-left,.el-tabs--right.el-tabs--card .el-tabs__active-bar.is-right{display:none}.el-tabs__item .el-icon-close:hover{background-color:#c0c4cc;color:#fff}.el-tabs__item.is-active{color:#409eff}.el-tabs__item:hover{color:#409eff;cursor:pointer}.el-tabs__item.is-disabled{color:#c0c4cc;cursor:default}.el-tabs__content{overflow:hidden;position:relative}.el-tabs--card>.el-tabs__header{border-bottom:1px solid #e4e7ed}.el-tabs--card>.el-tabs__header .el-tabs__nav-wrap:after{content:none}.el-tabs--card>.el-tabs__header .el-tabs__nav{border:1px solid #e4e7ed;border-bottom:none;border-radius:4px 4px 0 0;box-sizing:border-box}.el-tabs--card>.el-tabs__header .el-tabs__item .el-icon-close{position:relative;font-size:12px;width:0;height:14px;vertical-align:middle;line-height:15px;overflow:hidden;top:-1px;right:-2px;transform-origin:100% 50%}.el-tabs--card>.el-tabs__header .el-tabs__item{border-bottom:1px solid transparent;border-left:1px solid #e4e7ed;transition:color .3s cubic-bezier(.645,.045,.355,1),padding .3s cubic-bezier(.645,.045,.355,1)}.el-tabs--card>.el-tabs__header .el-tabs__item:first-child{border-left:none}.el-tabs--card>.el-tabs__header .el-tabs__item.is-closable:hover{padding-left:13px;padding-right:13px}.el-tabs--card>.el-tabs__header .el-tabs__item.is-closable:hover .el-icon-close{width:14px}.el-tabs--card>.el-tabs__header .el-tabs__item.is-active{border-bottom-color:#fff}.el-tabs--card>.el-tabs__header .el-tabs__item.is-active.is-closable{padding-left:20px;padding-right:20px}.el-tabs--card>.el-tabs__header .el-tabs__item.is-active.is-closable .el-icon-close{width:14px}.el-tabs--border-card{background:#fff;border:1px solid #dcdfe6;box-shadow:0 2px 4px 0 rgba(0,0,0,.12),0 0 6px 0 rgba(0,0,0,.04)}.el-tabs--border-card>.el-tabs__content{padding:15px}.el-tabs--border-card>.el-tabs__header{background-color:#f5f7fa;border-bottom:1px solid #e4e7ed;margin:0}.el-tabs--border-card>.el-tabs__header .el-tabs__nav-wrap:after{content:none}.el-tabs--border-card>.el-tabs__header .el-tabs__item{transition:all .3s cubic-bezier(.645,.045,.355,1);border:1px solid transparent;margin-top:-1px;color:#909399}.el-tabs--border-card>.el-tabs__header .el-tabs__item+.el-tabs__item,.el-tabs--border-card>.el-tabs__header .el-tabs__item:first-child{margin-left:-1px}.el-col-offset-0,.el-tabs--border-card>.el-tabs__header .is-scrollable .el-tabs__item:first-child{margin-left:0}.el-tabs--border-card>.el-tabs__header .el-tabs__item.is-active{color:#409eff;background-color:#fff;border-right-color:#dcdfe6;border-left-color:#dcdfe6}.el-tabs--border-card>.el-tabs__header .el-tabs__item:not(.is-disabled):hover{color:#409eff}.el-tabs--border-card>.el-tabs__header .el-tabs__item.is-disabled{color:#c0c4cc}.el-tabs--bottom .el-tabs__item.is-bottom:nth-child(2),.el-tabs--bottom .el-tabs__item.is-top:nth-child(2),.el-tabs--top .el-tabs__item.is-bottom:nth-child(2),.el-tabs--top .el-tabs__item.is-top:nth-child(2){padding-left:0}.el-tabs--bottom .el-tabs__item.is-bottom:last-child,.el-tabs--bottom .el-tabs__item.is-top:last-child,.el-tabs--top .el-tabs__item.is-bottom:last-child,.el-tabs--top .el-tabs__item.is-top:last-child{padding-right:0}.el-cascader-menu:last-child .el-cascader-node,.el-tabs--bottom.el-tabs--border-card>.el-tabs__header .el-tabs__item:last-child,.el-tabs--bottom.el-tabs--card>.el-tabs__header .el-tabs__item:last-child,.el-tabs--bottom .el-tabs--left>.el-tabs__header .el-tabs__item:last-child,.el-tabs--bottom .el-tabs--right>.el-tabs__header .el-tabs__item:last-child,.el-tabs--top.el-tabs--border-card>.el-tabs__header .el-tabs__item:last-child,.el-tabs--top.el-tabs--card>.el-tabs__header .el-tabs__item:last-child,.el-tabs--top .el-tabs--left>.el-tabs__header .el-tabs__item:last-child,.el-tabs--top .el-tabs--right>.el-tabs__header .el-tabs__item:last-child{padding-right:20px}.el-tabs--bottom.el-tabs--border-card>.el-tabs__header .el-tabs__item:nth-child(2),.el-tabs--bottom.el-tabs--card>.el-tabs__header .el-tabs__item:nth-child(2),.el-tabs--bottom .el-tabs--left>.el-tabs__header .el-tabs__item:nth-child(2),.el-tabs--bottom .el-tabs--right>.el-tabs__header .el-tabs__item:nth-child(2),.el-tabs--top.el-tabs--border-card>.el-tabs__header .el-tabs__item:nth-child(2),.el-tabs--top.el-tabs--card>.el-tabs__header .el-tabs__item:nth-child(2),.el-tabs--top .el-tabs--left>.el-tabs__header .el-tabs__item:nth-child(2),.el-tabs--top .el-tabs--right>.el-tabs__header .el-tabs__item:nth-child(2){padding-left:20px}.el-tabs--bottom .el-tabs__header.is-bottom{margin-bottom:0;margin-top:10px}.el-tabs--bottom.el-tabs--border-card .el-tabs__header.is-bottom{border-bottom:0;border-top:1px solid #dcdfe6}.el-tabs--bottom.el-tabs--border-card .el-tabs__nav-wrap.is-bottom{margin-top:-1px;margin-bottom:0}.el-tabs--bottom.el-tabs--border-card .el-tabs__item.is-bottom:not(.is-active){border:1px solid transparent}.el-tabs--bottom.el-tabs--border-card .el-tabs__item.is-bottom{margin:0 -1px -1px}.el-tabs--left,.el-tabs--right{overflow:hidden}.el-tabs--left .el-tabs__header.is-left,.el-tabs--left .el-tabs__header.is-right,.el-tabs--left .el-tabs__nav-scroll,.el-tabs--left .el-tabs__nav-wrap.is-left,.el-tabs--left .el-tabs__nav-wrap.is-right,.el-tabs--right .el-tabs__header.is-left,.el-tabs--right .el-tabs__header.is-right,.el-tabs--right .el-tabs__nav-scroll,.el-tabs--right .el-tabs__nav-wrap.is-left,.el-tabs--right .el-tabs__nav-wrap.is-right{height:100%}.el-tabs--left .el-tabs__active-bar.is-left,.el-tabs--left .el-tabs__active-bar.is-right,.el-tabs--right .el-tabs__active-bar.is-left,.el-tabs--right .el-tabs__active-bar.is-right{top:0;bottom:auto;width:2px;height:auto}.el-tabs--left .el-tabs__nav-wrap.is-left,.el-tabs--left .el-tabs__nav-wrap.is-right,.el-tabs--right .el-tabs__nav-wrap.is-left,.el-tabs--right .el-tabs__nav-wrap.is-right{margin-bottom:0}.el-tabs--left .el-tabs__nav-wrap.is-left>.el-tabs__nav-next,.el-tabs--left .el-tabs__nav-wrap.is-left>.el-tabs__nav-prev,.el-tabs--left .el-tabs__nav-wrap.is-right>.el-tabs__nav-next,.el-tabs--left .el-tabs__nav-wrap.is-right>.el-tabs__nav-prev,.el-tabs--right .el-tabs__nav-wrap.is-left>.el-tabs__nav-next,.el-tabs--right .el-tabs__nav-wrap.is-left>.el-tabs__nav-prev,.el-tabs--right .el-tabs__nav-wrap.is-right>.el-tabs__nav-next,.el-tabs--right .el-tabs__nav-wrap.is-right>.el-tabs__nav-prev{height:30px;line-height:30px;width:100%;text-align:center;cursor:pointer}.el-tabs--left .el-tabs__nav-wrap.is-left>.el-tabs__nav-next i,.el-tabs--left .el-tabs__nav-wrap.is-left>.el-tabs__nav-prev i,.el-tabs--left .el-tabs__nav-wrap.is-right>.el-tabs__nav-next i,.el-tabs--left .el-tabs__nav-wrap.is-right>.el-tabs__nav-prev i,.el-tabs--right .el-tabs__nav-wrap.is-left>.el-tabs__nav-next i,.el-tabs--right .el-tabs__nav-wrap.is-left>.el-tabs__nav-prev i,.el-tabs--right .el-tabs__nav-wrap.is-right>.el-tabs__nav-next i,.el-tabs--right .el-tabs__nav-wrap.is-right>.el-tabs__nav-prev i{transform:rotate(90deg)}.el-tabs--left .el-tabs__nav-wrap.is-left>.el-tabs__nav-prev,.el-tabs--left .el-tabs__nav-wrap.is-right>.el-tabs__nav-prev,.el-tabs--right .el-tabs__nav-wrap.is-left>.el-tabs__nav-prev,.el-tabs--right .el-tabs__nav-wrap.is-right>.el-tabs__nav-prev{left:auto;top:0}.el-tabs--left .el-tabs__nav-wrap.is-left>.el-tabs__nav-next,.el-tabs--left .el-tabs__nav-wrap.is-right>.el-tabs__nav-next,.el-tabs--right .el-tabs__nav-wrap.is-left>.el-tabs__nav-next,.el-tabs--right .el-tabs__nav-wrap.is-right>.el-tabs__nav-next{right:auto;bottom:0}.el-tabs--left .el-tabs__active-bar.is-left,.el-tabs--left .el-tabs__nav-wrap.is-left:after{right:0;left:auto}.el-tabs--left .el-tabs__nav-wrap.is-left.is-scrollable,.el-tabs--left .el-tabs__nav-wrap.is-right.is-scrollable,.el-tabs--right .el-tabs__nav-wrap.is-left.is-scrollable,.el-tabs--right .el-tabs__nav-wrap.is-right.is-scrollable{padding:30px 0}.el-tabs--left .el-tabs__nav-wrap.is-left:after,.el-tabs--left .el-tabs__nav-wrap.is-right:after,.el-tabs--right .el-tabs__nav-wrap.is-left:after,.el-tabs--right .el-tabs__nav-wrap.is-right:after{height:100%;width:2px;bottom:auto;top:0}.el-tabs--left .el-tabs__nav.is-left,.el-tabs--left .el-tabs__nav.is-right,.el-tabs--right .el-tabs__nav.is-left,.el-tabs--right .el-tabs__nav.is-right{float:none}.el-tabs--left .el-tabs__item.is-left,.el-tabs--left .el-tabs__item.is-right,.el-tabs--right .el-tabs__item.is-left,.el-tabs--right .el-tabs__item.is-right{display:block}.el-tabs--left .el-tabs__header.is-left{float:left;margin-bottom:0;margin-right:10px}.el-button-group>.el-button:not(:last-child),.el-tabs--left .el-tabs__nav-wrap.is-left{margin-right:-1px}.el-tabs--left .el-tabs__item.is-left{text-align:right}.el-tabs--left.el-tabs--card .el-tabs__item.is-left{border-left:none;border-right:1px solid #e4e7ed;border-bottom:none;border-top:1px solid #e4e7ed;text-align:left}.el-tabs--left.el-tabs--card .el-tabs__item.is-left:first-child{border-right:1px solid #e4e7ed;border-top:none}.el-tabs--left.el-tabs--card .el-tabs__item.is-left.is-active{border:1px solid #e4e7ed;border-right-color:#fff;border-left:none;border-bottom:none}.el-tabs--left.el-tabs--card .el-tabs__item.is-left.is-active:first-child{border-top:none}.el-tabs--left.el-tabs--card .el-tabs__item.is-left.is-active:last-child{border-bottom:none}.el-tabs--left.el-tabs--card .el-tabs__nav{border-radius:4px 0 0 4px;border-bottom:1px solid #e4e7ed;border-right:none}.el-tabs--left.el-tabs--card .el-tabs__new-tab{float:none}.el-tabs--left.el-tabs--border-card .el-tabs__header.is-left{border-right:1px solid #dfe4ed}.el-tabs--left.el-tabs--border-card .el-tabs__item.is-left{border:1px solid transparent;margin:-1px 0 -1px -1px}.el-tabs--left.el-tabs--border-card .el-tabs__item.is-left.is-active{border-color:#d1dbe5 transparent}.el-tabs--right .el-tabs__header.is-right{float:right;margin-bottom:0;margin-left:10px}.el-tabs--right .el-tabs__nav-wrap.is-right{margin-left:-1px}.el-tabs--right .el-tabs__nav-wrap.is-right:after{left:0;right:auto}.el-tabs--right .el-tabs__active-bar.is-right{left:0}.el-tabs--right.el-tabs--card .el-tabs__item.is-right{border-bottom:none;border-top:1px solid #e4e7ed}.el-tabs--right.el-tabs--card .el-tabs__item.is-right:first-child{border-left:1px solid #e4e7ed;border-top:none}.el-tabs--right.el-tabs--card .el-tabs__item.is-right.is-active{border:1px solid #e4e7ed;border-left-color:#fff;border-right:none;border-bottom:none}.el-tabs--right.el-tabs--card .el-tabs__item.is-right.is-active:first-child{border-top:none}.el-tabs--right.el-tabs--card .el-tabs__item.is-right.is-active:last-child{border-bottom:none}.el-tabs--right.el-tabs--card .el-tabs__nav{border-radius:0 4px 4px 0;border-bottom:1px solid #e4e7ed;border-left:none}.el-tabs--right.el-tabs--border-card .el-tabs__header.is-right{border-left:1px solid #dfe4ed}.el-tabs--right.el-tabs--border-card .el-tabs__item.is-right{border:1px solid transparent;margin:-1px -1px -1px 0}.el-tabs--right.el-tabs--border-card .el-tabs__item.is-right.is-active{border-color:#d1dbe5 transparent}.slideInLeft-transition,.slideInRight-transition{display:inline-block}.slideInRight-enter{animation:slideInRight-enter .3s}.slideInRight-leave{position:absolute;left:0;right:0;animation:slideInRight-leave .3s}.slideInLeft-enter{animation:slideInLeft-enter .3s}.slideInLeft-leave{position:absolute;left:0;right:0;animation:slideInLeft-leave .3s}@keyframes slideInRight-enter{0%{opacity:0;transform-origin:0 0;transform:translateX(100%)}to{opacity:1;transform-origin:0 0;transform:translateX(0)}}@keyframes slideInRight-leave{0%{transform-origin:0 0;transform:translateX(0);opacity:1}to{transform-origin:0 0;transform:translateX(100%);opacity:0}}@keyframes slideInLeft-enter{0%{opacity:0;transform-origin:0 0;transform:translateX(-100%)}to{opacity:1;transform-origin:0 0;transform:translateX(0)}}@keyframes slideInLeft-leave{0%{transform-origin:0 0;transform:translateX(0);opacity:1}to{transform-origin:0 0;transform:translateX(-100%);opacity:0}}.el-tree{position:relative;cursor:default;background:#fff;color:#606266}.el-tree__empty-block{position:relative;min-height:60px;text-align:center;width:100%;height:100%}.el-tree__empty-text{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);color:#909399;font-size:14px}.el-tree__drop-indicator{position:absolute;left:0;right:0;height:1px;background-color:#409eff}.el-tree-node{white-space:nowrap;outline:0}.el-tree-node:focus>.el-tree-node__content{background-color:#f5f7fa}.el-tree-node.is-drop-inner>.el-tree-node__content .el-tree-node__label{background-color:#409eff;color:#fff}.el-tree-node__content:hover,.el-upload-list__item:hover{background-color:#f5f7fa}.el-tree-node__content{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;height:26px;cursor:pointer}.el-tree-node__content>.el-tree-node__expand-icon{padding:6px}.el-tree-node__content>label.el-checkbox{margin-right:8px}.el-tree.is-dragging .el-tree-node__content{cursor:move}.el-tree.is-dragging .el-tree-node__content *{pointer-events:none}.el-tree.is-dragging.is-drop-not-allow .el-tree-node__content{cursor:not-allowed}.el-tree-node__expand-icon{cursor:pointer;color:#c0c4cc;font-size:12px;transform:rotate(0);transition:transform .3s ease-in-out}.el-tree-node__expand-icon.expanded{transform:rotate(90deg)}.el-tree-node__expand-icon.is-leaf{color:transparent;cursor:default}.el-tree-node__label{font-size:14px}.el-tree-node__loading-icon{margin-right:8px;font-size:14px;color:#c0c4cc}.el-tree-node>.el-tree-node__children{overflow:hidden;background-color:transparent}.el-tree-node.is-expanded>.el-tree-node__children{display:block}.el-tree--highlight-current .el-tree-node.is-current>.el-tree-node__content{background-color:#f0f7ff}.el-alert{width:100%;padding:8px 16px;margin:0;box-sizing:border-box;border-radius:4px;position:relative;background-color:#fff;overflow:hidden;opacity:1;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;transition:opacity .2s}.el-alert.is-light .el-alert__closebtn{color:#c0c4cc}.el-alert.is-dark .el-alert__closebtn,.el-alert.is-dark .el-alert__description{color:#fff}.el-alert.is-center{-ms-flex-pack:center;justify-content:center}.el-alert--success.is-light{background-color:#f0f9eb;color:#67c23a}.el-alert--success.is-light .el-alert__description{color:#67c23a}.el-alert--success.is-dark{background-color:#67c23a;color:#fff}.el-alert--info.is-light{background-color:#f4f4f5;color:#909399}.el-alert--info.is-dark{background-color:#909399;color:#fff}.el-alert--info .el-alert__description{color:#909399}.el-alert--warning.is-light{background-color:#fdf6ec;color:#e6a23c}.el-alert--warning.is-light .el-alert__description{color:#e6a23c}.el-alert--warning.is-dark{background-color:#e6a23c;color:#fff}.el-alert--error.is-light{background-color:#fef0f0;color:#f56c6c}.el-alert--error.is-light .el-alert__description{color:#f56c6c}.el-alert--error.is-dark{background-color:#f56c6c;color:#fff}.el-alert__content{display:table-cell;padding:0 8px}.el-alert__icon{font-size:16px;width:16px}.el-alert__icon.is-big{font-size:28px;width:28px}.el-alert__title{font-size:13px;line-height:18px}.el-alert__title.is-bold{font-weight:700}.el-alert .el-alert__description{font-size:12px;margin:5px 0 0}.el-alert__closebtn{font-size:12px;opacity:1;position:absolute;top:12px;right:15px;cursor:pointer}.el-alert-fade-enter,.el-alert-fade-leave-active,.el-loading-fade-enter,.el-loading-fade-leave-active,.el-notification-fade-leave-active,.el-upload iframe{opacity:0}.el-carousel__arrow--right,.el-notification.right{right:16px}.el-alert__closebtn.is-customed{font-style:normal;font-size:13px;top:9px}.el-notification{display:-ms-flexbox;display:flex;width:330px;padding:14px 26px 14px 13px;border-radius:8px;box-sizing:border-box;border:1px solid #ebeef5;position:fixed;background-color:#fff;box-shadow:0 2px 12px 0 rgba(0,0,0,.1);transition:opacity .3s,transform .3s,left .3s,right .3s,top .4s,bottom .3s;overflow:hidden}.el-notification.left{left:16px}.el-notification__group{margin-left:13px;margin-right:8px}.el-notification__title{font-weight:700;font-size:16px;color:#303133;margin:0}.el-notification__content{font-size:14px;line-height:21px;margin:6px 0 0;color:#606266;text-align:justify}.el-notification__content p{margin:0}.el-notification__icon{height:24px;width:24px;font-size:24px}.el-notification__closeBtn{position:absolute;top:18px;right:15px;cursor:pointer;color:#909399;font-size:16px}.el-notification__closeBtn:hover{color:#606266}.el-notification .el-icon-success{color:#67c23a}.el-notification .el-icon-error{color:#f56c6c}.el-notification .el-icon-info{color:#909399}.el-notification .el-icon-warning{color:#e6a23c}.el-notification-fade-enter.right{right:0;transform:translateX(100%)}.el-notification-fade-enter.left{left:0;transform:translateX(-100%)}.el-input-number{position:relative;display:inline-block;width:180px;line-height:38px}.el-input-number .el-input{display:block}.el-input-number .el-input__inner{-webkit-appearance:none;padding-left:50px;padding-right:50px;text-align:center}.el-input-number__decrease,.el-input-number__increase{position:absolute;z-index:1;top:1px;width:40px;height:auto;text-align:center;background:#f5f7fa;color:#606266;cursor:pointer;font-size:13px}.el-input-number__decrease:hover,.el-input-number__increase:hover{color:#409eff}.el-input-number__decrease:hover:not(.is-disabled)~.el-input .el-input__inner:not(.is-disabled),.el-input-number__increase:hover:not(.is-disabled)~.el-input .el-input__inner:not(.is-disabled){border-color:#409eff}.el-input-number__decrease.is-disabled,.el-input-number__increase.is-disabled{color:#c0c4cc;cursor:not-allowed}.el-input-number__increase{right:1px;border-radius:0 4px 4px 0;border-left:1px solid #dcdfe6}.el-input-number__decrease{left:1px;border-radius:4px 0 0 4px;border-right:1px solid #dcdfe6}.el-input-number.is-disabled .el-input-number__decrease,.el-input-number.is-disabled .el-input-number__increase{border-color:#e4e7ed;color:#e4e7ed}.el-input-number.is-disabled .el-input-number__decrease:hover,.el-input-number.is-disabled .el-input-number__increase:hover{color:#e4e7ed;cursor:not-allowed}.el-input-number--medium{width:200px;line-height:34px}.el-input-number--medium .el-input-number__decrease,.el-input-number--medium .el-input-number__increase{width:36px;font-size:14px}.el-input-number--medium .el-input__inner{padding-left:43px;padding-right:43px}.el-input-number--small{width:130px;line-height:30px}.el-input-number--small .el-input-number__decrease,.el-input-number--small .el-input-number__increase{width:32px;font-size:13px}.el-input-number--small .el-input-number__decrease [class*=el-icon],.el-input-number--small .el-input-number__increase [class*=el-icon]{transform:scale(.9)}.el-input-number--small .el-input__inner{padding-left:39px;padding-right:39px}.el-input-number--mini{width:130px;line-height:26px}.el-input-number--mini .el-input-number__decrease,.el-input-number--mini .el-input-number__increase{width:28px;font-size:12px}.el-input-number--mini .el-input-number__decrease [class*=el-icon],.el-input-number--mini .el-input-number__increase [class*=el-icon]{transform:scale(.8)}.el-input-number--mini .el-input__inner{padding-left:35px;padding-right:35px}.el-input-number.is-without-controls .el-input__inner{padding-left:15px;padding-right:15px}.el-input-number.is-controls-right .el-input__inner{padding-left:15px;padding-right:50px}.el-input-number.is-controls-right .el-input-number__decrease,.el-input-number.is-controls-right .el-input-number__increase{height:auto;line-height:19px}.el-input-number.is-controls-right .el-input-number__decrease [class*=el-icon],.el-input-number.is-controls-right .el-input-number__increase [class*=el-icon]{transform:scale(.8)}.el-input-number.is-controls-right .el-input-number__increase{border-radius:0 4px 0 0;border-bottom:1px solid #dcdfe6}.el-input-number.is-controls-right .el-input-number__decrease{right:1px;bottom:1px;top:auto;left:auto;border-right:none;border-left:1px solid #dcdfe6;border-radius:0 0 4px}.el-input-number.is-controls-right[class*=medium] [class*=decrease],.el-input-number.is-controls-right[class*=medium] [class*=increase]{line-height:17px}.el-input-number.is-controls-right[class*=small] [class*=decrease],.el-input-number.is-controls-right[class*=small] [class*=increase]{line-height:15px}.el-input-number.is-controls-right[class*=mini] [class*=decrease],.el-input-number.is-controls-right[class*=mini] [class*=increase]{line-height:13px}.el-tooltip:focus:hover,.el-tooltip:focus:not(.focusing){outline-width:0}.el-tooltip__popper{position:absolute;border-radius:4px;padding:10px;z-index:2000;font-size:12px;line-height:1.2;min-width:10px;word-wrap:break-word}.el-tooltip__popper .popper__arrow,.el-tooltip__popper .popper__arrow:after{position:absolute;display:block;width:0;height:0;border-color:transparent;border-style:solid}.el-tooltip__popper .popper__arrow{border-width:6px}.el-tooltip__popper .popper__arrow:after{content:" ";border-width:5px}.el-button-group:after,.el-button-group:before,.el-color-dropdown__main-wrapper:after,.el-link.is-underline:hover:after,.el-page-header__left:after,.el-progress-bar__inner:after,.el-row:after,.el-row:before,.el-slider:after,.el-slider:before,.el-slider__button-wrapper:after,.el-transfer-panel .el-transfer-panel__footer:after,.el-upload-cover:after,.el-upload-list--picture-card .el-upload-list__item-actions:after{content:""}.el-tooltip__popper[x-placement^=top]{margin-bottom:12px}.el-tooltip__popper[x-placement^=top] .popper__arrow{bottom:-6px;border-top-color:#303133;border-bottom-width:0}.el-tooltip__popper[x-placement^=top] .popper__arrow:after{bottom:1px;margin-left:-5px;border-top-color:#303133;border-bottom-width:0}.el-tooltip__popper[x-placement^=bottom]{margin-top:12px}.el-tooltip__popper[x-placement^=bottom] .popper__arrow{top:-6px;border-top-width:0;border-bottom-color:#303133}.el-tooltip__popper[x-placement^=bottom] .popper__arrow:after{top:1px;margin-left:-5px;border-top-width:0;border-bottom-color:#303133}.el-tooltip__popper[x-placement^=right]{margin-left:12px}.el-tooltip__popper[x-placement^=right] .popper__arrow{left:-6px;border-right-color:#303133;border-left-width:0}.el-tooltip__popper[x-placement^=right] .popper__arrow:after{bottom:-5px;left:1px;border-right-color:#303133;border-left-width:0}.el-tooltip__popper[x-placement^=left]{margin-right:12px}.el-tooltip__popper[x-placement^=left] .popper__arrow{right:-6px;border-right-width:0;border-left-color:#303133}.el-tooltip__popper[x-placement^=left] .popper__arrow:after{right:1px;bottom:-5px;margin-left:-5px;border-right-width:0;border-left-color:#303133}.el-tooltip__popper.is-dark{background:#303133;color:#fff}.el-tooltip__popper.is-light{background:#fff;border:1px solid #303133}.el-tooltip__popper.is-light[x-placement^=top] .popper__arrow{border-top-color:#303133}.el-tooltip__popper.is-light[x-placement^=top] .popper__arrow:after{border-top-color:#fff}.el-tooltip__popper.is-light[x-placement^=bottom] .popper__arrow{border-bottom-color:#303133}.el-tooltip__popper.is-light[x-placement^=bottom] .popper__arrow:after{border-bottom-color:#fff}.el-tooltip__popper.is-light[x-placement^=left] .popper__arrow{border-left-color:#303133}.el-tooltip__popper.is-light[x-placement^=left] .popper__arrow:after{border-left-color:#fff}.el-tooltip__popper.is-light[x-placement^=right] .popper__arrow{border-right-color:#303133}.el-tooltip__popper.is-light[x-placement^=right] .popper__arrow:after{border-right-color:#fff}.el-slider:after,.el-slider:before{display:table}.el-slider__button-wrapper .el-tooltip,.el-slider__button-wrapper:after{display:inline-block;vertical-align:middle}.el-slider:after{clear:both}.el-slider__runway{width:100%;height:6px;margin:16px 0;background-color:#e4e7ed;border-radius:3px;position:relative;cursor:pointer;vertical-align:middle}.el-slider__runway.show-input{margin-right:160px;width:auto}.el-slider__runway.disabled{cursor:default}.el-slider__runway.disabled .el-slider__bar{background-color:#c0c4cc}.el-slider__runway.disabled .el-slider__button{border-color:#c0c4cc}.el-slider__runway.disabled .el-slider__button-wrapper.dragging,.el-slider__runway.disabled .el-slider__button-wrapper.hover,.el-slider__runway.disabled .el-slider__button-wrapper:hover{cursor:not-allowed}.el-slider__runway.disabled .el-slider__button.dragging,.el-slider__runway.disabled .el-slider__button.hover,.el-slider__runway.disabled .el-slider__button:hover{transform:scale(1);cursor:not-allowed}.el-slider__button-wrapper,.el-slider__stop{-webkit-transform:translateX(-50%);position:absolute}.el-slider__input{float:right;margin-top:3px;width:130px}.el-slider__input.el-input-number--mini{margin-top:5px}.el-slider__input.el-input-number--medium{margin-top:0}.el-slider__input.el-input-number--large{margin-top:-2px}.el-slider__bar{height:6px;background-color:#409eff;border-top-left-radius:3px;border-bottom-left-radius:3px;position:absolute}.el-slider__button-wrapper{height:36px;width:36px;z-index:1001;top:-15px;transform:translateX(-50%);background-color:transparent;text-align:center;-webkit-user-select:none;user-select:none;line-height:normal}.el-image-viewer__btn,.el-slider__button,.el-slider__button-wrapper,.el-step__icon-inner{-moz-user-select:none;-ms-user-select:none}.el-slider__button-wrapper:after{height:100%}.el-slider__button-wrapper.hover,.el-slider__button-wrapper:hover{cursor:grab}.el-slider__button-wrapper.dragging{cursor:grabbing}.el-slider__button{width:16px;height:16px;border:2px solid #409eff;background-color:#fff;border-radius:50%;transition:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.el-slider__button.dragging,.el-slider__button.hover,.el-slider__button:hover{transform:scale(1.2)}.el-slider__button.hover,.el-slider__button:hover{cursor:grab}.el-slider__button.dragging{cursor:grabbing}.el-slider__stop{height:6px;width:6px;border-radius:100%;background-color:#fff;transform:translateX(-50%)}.el-slider__marks{top:0;left:12px;width:18px;height:100%}.el-slider__marks-text{position:absolute;transform:translateX(-50%);font-size:14px;color:#909399;margin-top:15px}.el-slider.is-vertical{position:relative}.el-slider.is-vertical .el-slider__runway{width:6px;height:100%;margin:0 16px}.el-slider.is-vertical .el-slider__bar{width:6px;height:auto;border-radius:0 0 3px 3px}.el-slider.is-vertical .el-slider__button-wrapper{top:auto;left:-15px;transform:translateY(50%)}.el-slider.is-vertical .el-slider__stop{transform:translateY(50%)}.el-slider.is-vertical.el-slider--with-input{padding-bottom:58px}.el-slider.is-vertical.el-slider--with-input .el-slider__input{overflow:visible;float:none;position:absolute;bottom:22px;width:36px;margin-top:15px}.el-slider.is-vertical.el-slider--with-input .el-slider__input .el-input__inner{text-align:center;padding-left:5px;padding-right:5px}.el-slider.is-vertical.el-slider--with-input .el-slider__input .el-input-number__decrease,.el-slider.is-vertical.el-slider--with-input .el-slider__input .el-input-number__increase{top:32px;margin-top:-1px;border:1px solid #dcdfe6;line-height:20px;box-sizing:border-box;transition:border-color .2s cubic-bezier(.645,.045,.355,1)}.el-slider.is-vertical.el-slider--with-input .el-slider__input .el-input-number__decrease{width:18px;right:18px;border-bottom-left-radius:4px}.el-slider.is-vertical.el-slider--with-input .el-slider__input .el-input-number__increase{width:19px;border-bottom-right-radius:4px}.el-slider.is-vertical.el-slider--with-input .el-slider__input .el-input-number__increase~.el-input .el-input__inner{border-bottom-left-radius:0;border-bottom-right-radius:0}.el-slider.is-vertical.el-slider--with-input .el-slider__input:hover .el-input-number__decrease,.el-slider.is-vertical.el-slider--with-input .el-slider__input:hover .el-input-number__increase{border-color:#c0c4cc}.el-slider.is-vertical.el-slider--with-input .el-slider__input:active .el-input-number__decrease,.el-slider.is-vertical.el-slider--with-input .el-slider__input:active .el-input-number__increase{border-color:#409eff}.el-slider.is-vertical .el-slider__marks-text{margin-top:0;left:15px;transform:translateY(50%)}.el-loading-parent--relative{position:relative!important}.el-loading-parent--hidden{overflow:hidden!important}.el-loading-mask{position:absolute;z-index:2000;background-color:hsla(0,0%,100%,.9);margin:0;top:0;right:0;bottom:0;left:0;transition:opacity .3s}.el-loading-mask.is-fullscreen{position:fixed}.el-loading-mask.is-fullscreen .el-loading-spinner{margin-top:-25px}.el-loading-mask.is-fullscreen .el-loading-spinner .circular{height:50px;width:50px}.el-loading-spinner{top:50%;margin-top:-21px;width:100%;text-align:center;position:absolute}.el-col-pull-0,.el-col-pull-1,.el-col-pull-2,.el-col-pull-3,.el-col-pull-4,.el-col-pull-5,.el-col-pull-6,.el-col-pull-7,.el-col-pull-8,.el-col-pull-9,.el-col-pull-10,.el-col-pull-11,.el-col-pull-12,.el-col-pull-13,.el-col-pull-14,.el-col-pull-15,.el-col-pull-16,.el-col-pull-17,.el-col-pull-18,.el-col-pull-19,.el-col-pull-20,.el-col-pull-21,.el-col-pull-22,.el-col-pull-23,.el-col-pull-24,.el-col-push-0,.el-col-push-1,.el-col-push-2,.el-col-push-3,.el-col-push-4,.el-col-push-5,.el-col-push-6,.el-col-push-7,.el-col-push-8,.el-col-push-9,.el-col-push-10,.el-col-push-11,.el-col-push-12,.el-col-push-13,.el-col-push-14,.el-col-push-15,.el-col-push-16,.el-col-push-17,.el-col-push-18,.el-col-push-19,.el-col-push-20,.el-col-push-21,.el-col-push-22,.el-col-push-23,.el-col-push-24,.el-row,.el-upload-dragger,.el-upload-list__item{position:relative}.el-loading-spinner .el-loading-text{color:#409eff;margin:3px 0;font-size:14px}.el-loading-spinner .circular{height:42px;width:42px;animation:loading-rotate 2s linear infinite}.el-loading-spinner .path{animation:loading-dash 1.5s ease-in-out infinite;stroke-dasharray:90,150;stroke-dashoffset:0;stroke-width:2;stroke:#409eff;stroke-linecap:round}.el-loading-spinner i{color:#409eff}@keyframes loading-rotate{to{transform:rotate(1turn)}}@keyframes loading-dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-40px}to{stroke-dasharray:90,150;stroke-dashoffset:-120px}}.el-row{box-sizing:border-box}.el-row:after,.el-row:before{display:table}.el-row:after{clear:both}.el-row--flex{display:-ms-flexbox;display:flex}.el-col-0,.el-row--flex:after,.el-row--flex:before{display:none}.el-row--flex.is-justify-center{-ms-flex-pack:center;justify-content:center}.el-row--flex.is-justify-end{-ms-flex-pack:end;justify-content:flex-end}.el-row--flex.is-justify-space-between{-ms-flex-pack:justify;justify-content:space-between}.el-row--flex.is-justify-space-around{-ms-flex-pack:distribute;justify-content:space-around}.el-row--flex.is-align-top{-ms-flex-align:start;align-items:flex-start}.el-row--flex.is-align-middle{-ms-flex-align:center;align-items:center}.el-row--flex.is-align-bottom{-ms-flex-align:end;align-items:flex-end}[class*=el-col-]{float:left;box-sizing:border-box}.el-col-0{width:0}.el-col-pull-0{right:0}.el-col-push-0{left:0}.el-col-1{width:4.16667%}.el-col-offset-1{margin-left:4.16667%}.el-col-pull-1{right:4.16667%}.el-col-push-1{left:4.16667%}.el-col-2{width:8.33333%}.el-col-offset-2{margin-left:8.33333%}.el-col-pull-2{right:8.33333%}.el-col-push-2{left:8.33333%}.el-col-3{width:12.5%}.el-col-offset-3{margin-left:12.5%}.el-col-pull-3{right:12.5%}.el-col-push-3{left:12.5%}.el-col-4{width:16.66667%}.el-col-offset-4{margin-left:16.66667%}.el-col-pull-4{right:16.66667%}.el-col-push-4{left:16.66667%}.el-col-5{width:20.83333%}.el-col-offset-5{margin-left:20.83333%}.el-col-pull-5{right:20.83333%}.el-col-push-5{left:20.83333%}.el-col-6{width:25%}.el-col-offset-6{margin-left:25%}.el-col-pull-6{right:25%}.el-col-push-6{left:25%}.el-col-7{width:29.16667%}.el-col-offset-7{margin-left:29.16667%}.el-col-pull-7{right:29.16667%}.el-col-push-7{left:29.16667%}.el-col-8{width:33.33333%}.el-col-offset-8{margin-left:33.33333%}.el-col-pull-8{right:33.33333%}.el-col-push-8{left:33.33333%}.el-col-9{width:37.5%}.el-col-offset-9{margin-left:37.5%}.el-col-pull-9{right:37.5%}.el-col-push-9{left:37.5%}.el-col-10{width:41.66667%}.el-col-offset-10{margin-left:41.66667%}.el-col-pull-10{right:41.66667%}.el-col-push-10{left:41.66667%}.el-col-11{width:45.83333%}.el-col-offset-11{margin-left:45.83333%}.el-col-pull-11{right:45.83333%}.el-col-push-11{left:45.83333%}.el-col-12{width:50%}.el-col-offset-12{margin-left:50%}.el-col-pull-12{right:50%}.el-col-push-12{left:50%}.el-col-13{width:54.16667%}.el-col-offset-13{margin-left:54.16667%}.el-col-pull-13{right:54.16667%}.el-col-push-13{left:54.16667%}.el-col-14{width:58.33333%}.el-col-offset-14{margin-left:58.33333%}.el-col-pull-14{right:58.33333%}.el-col-push-14{left:58.33333%}.el-col-15{width:62.5%}.el-col-offset-15{margin-left:62.5%}.el-col-pull-15{right:62.5%}.el-col-push-15{left:62.5%}.el-col-16{width:66.66667%}.el-col-offset-16{margin-left:66.66667%}.el-col-pull-16{right:66.66667%}.el-col-push-16{left:66.66667%}.el-col-17{width:70.83333%}.el-col-offset-17{margin-left:70.83333%}.el-col-pull-17{right:70.83333%}.el-col-push-17{left:70.83333%}.el-col-18{width:75%}.el-col-offset-18{margin-left:75%}.el-col-pull-18{right:75%}.el-col-push-18{left:75%}.el-col-19{width:79.16667%}.el-col-offset-19{margin-left:79.16667%}.el-col-pull-19{right:79.16667%}.el-col-push-19{left:79.16667%}.el-col-20{width:83.33333%}.el-col-offset-20{margin-left:83.33333%}.el-col-pull-20{right:83.33333%}.el-col-push-20{left:83.33333%}.el-col-21{width:87.5%}.el-col-offset-21{margin-left:87.5%}.el-col-pull-21{right:87.5%}.el-col-push-21{left:87.5%}.el-col-22{width:91.66667%}.el-col-offset-22{margin-left:91.66667%}.el-col-pull-22{right:91.66667%}.el-col-push-22{left:91.66667%}.el-col-23{width:95.83333%}.el-col-offset-23{margin-left:95.83333%}.el-col-pull-23{right:95.83333%}.el-col-push-23{left:95.83333%}.el-col-24{width:100%}.el-col-offset-24{margin-left:100%}.el-col-pull-24{right:100%}.el-col-push-24{left:100%}@media only screen and (max-width:767px){.el-col-xs-0{display:none;width:0}.el-col-xs-offset-0{margin-left:0}.el-col-xs-pull-0{position:relative;right:0}.el-col-xs-push-0{position:relative;left:0}.el-col-xs-1{width:4.16667%}.el-col-xs-offset-1{margin-left:4.16667%}.el-col-xs-pull-1{position:relative;right:4.16667%}.el-col-xs-push-1{position:relative;left:4.16667%}.el-col-xs-2{width:8.33333%}.el-col-xs-offset-2{margin-left:8.33333%}.el-col-xs-pull-2{position:relative;right:8.33333%}.el-col-xs-push-2{position:relative;left:8.33333%}.el-col-xs-3{width:12.5%}.el-col-xs-offset-3{margin-left:12.5%}.el-col-xs-pull-3{position:relative;right:12.5%}.el-col-xs-push-3{position:relative;left:12.5%}.el-col-xs-4{width:16.66667%}.el-col-xs-offset-4{margin-left:16.66667%}.el-col-xs-pull-4{position:relative;right:16.66667%}.el-col-xs-push-4{position:relative;left:16.66667%}.el-col-xs-5{width:20.83333%}.el-col-xs-offset-5{margin-left:20.83333%}.el-col-xs-pull-5{position:relative;right:20.83333%}.el-col-xs-push-5{position:relative;left:20.83333%}.el-col-xs-6{width:25%}.el-col-xs-offset-6{margin-left:25%}.el-col-xs-pull-6{position:relative;right:25%}.el-col-xs-push-6{position:relative;left:25%}.el-col-xs-7{width:29.16667%}.el-col-xs-offset-7{margin-left:29.16667%}.el-col-xs-pull-7{position:relative;right:29.16667%}.el-col-xs-push-7{position:relative;left:29.16667%}.el-col-xs-8{width:33.33333%}.el-col-xs-offset-8{margin-left:33.33333%}.el-col-xs-pull-8{position:relative;right:33.33333%}.el-col-xs-push-8{position:relative;left:33.33333%}.el-col-xs-9{width:37.5%}.el-col-xs-offset-9{margin-left:37.5%}.el-col-xs-pull-9{position:relative;right:37.5%}.el-col-xs-push-9{position:relative;left:37.5%}.el-col-xs-10{width:41.66667%}.el-col-xs-offset-10{margin-left:41.66667%}.el-col-xs-pull-10{position:relative;right:41.66667%}.el-col-xs-push-10{position:relative;left:41.66667%}.el-col-xs-11{width:45.83333%}.el-col-xs-offset-11{margin-left:45.83333%}.el-col-xs-pull-11{position:relative;right:45.83333%}.el-col-xs-push-11{position:relative;left:45.83333%}.el-col-xs-12{width:50%}.el-col-xs-offset-12{margin-left:50%}.el-col-xs-pull-12{position:relative;right:50%}.el-col-xs-push-12{position:relative;left:50%}.el-col-xs-13{width:54.16667%}.el-col-xs-offset-13{margin-left:54.16667%}.el-col-xs-pull-13{position:relative;right:54.16667%}.el-col-xs-push-13{position:relative;left:54.16667%}.el-col-xs-14{width:58.33333%}.el-col-xs-offset-14{margin-left:58.33333%}.el-col-xs-pull-14{position:relative;right:58.33333%}.el-col-xs-push-14{position:relative;left:58.33333%}.el-col-xs-15{width:62.5%}.el-col-xs-offset-15{margin-left:62.5%}.el-col-xs-pull-15{position:relative;right:62.5%}.el-col-xs-push-15{position:relative;left:62.5%}.el-col-xs-16{width:66.66667%}.el-col-xs-offset-16{margin-left:66.66667%}.el-col-xs-pull-16{position:relative;right:66.66667%}.el-col-xs-push-16{position:relative;left:66.66667%}.el-col-xs-17{width:70.83333%}.el-col-xs-offset-17{margin-left:70.83333%}.el-col-xs-pull-17{position:relative;right:70.83333%}.el-col-xs-push-17{position:relative;left:70.83333%}.el-col-xs-18{width:75%}.el-col-xs-offset-18{margin-left:75%}.el-col-xs-pull-18{position:relative;right:75%}.el-col-xs-push-18{position:relative;left:75%}.el-col-xs-19{width:79.16667%}.el-col-xs-offset-19{margin-left:79.16667%}.el-col-xs-pull-19{position:relative;right:79.16667%}.el-col-xs-push-19{position:relative;left:79.16667%}.el-col-xs-20{width:83.33333%}.el-col-xs-offset-20{margin-left:83.33333%}.el-col-xs-pull-20{position:relative;right:83.33333%}.el-col-xs-push-20{position:relative;left:83.33333%}.el-col-xs-21{width:87.5%}.el-col-xs-offset-21{margin-left:87.5%}.el-col-xs-pull-21{position:relative;right:87.5%}.el-col-xs-push-21{position:relative;left:87.5%}.el-col-xs-22{width:91.66667%}.el-col-xs-offset-22{margin-left:91.66667%}.el-col-xs-pull-22{position:relative;right:91.66667%}.el-col-xs-push-22{position:relative;left:91.66667%}.el-col-xs-23{width:95.83333%}.el-col-xs-offset-23{margin-left:95.83333%}.el-col-xs-pull-23{position:relative;right:95.83333%}.el-col-xs-push-23{position:relative;left:95.83333%}.el-col-xs-24{width:100%}.el-col-xs-offset-24{margin-left:100%}.el-col-xs-pull-24{position:relative;right:100%}.el-col-xs-push-24{position:relative;left:100%}}@media only screen and (min-width:768px){.el-col-sm-0{display:none;width:0}.el-col-sm-offset-0{margin-left:0}.el-col-sm-pull-0{position:relative;right:0}.el-col-sm-push-0{position:relative;left:0}.el-col-sm-1{width:4.16667%}.el-col-sm-offset-1{margin-left:4.16667%}.el-col-sm-pull-1{position:relative;right:4.16667%}.el-col-sm-push-1{position:relative;left:4.16667%}.el-col-sm-2{width:8.33333%}.el-col-sm-offset-2{margin-left:8.33333%}.el-col-sm-pull-2{position:relative;right:8.33333%}.el-col-sm-push-2{position:relative;left:8.33333%}.el-col-sm-3{width:12.5%}.el-col-sm-offset-3{margin-left:12.5%}.el-col-sm-pull-3{position:relative;right:12.5%}.el-col-sm-push-3{position:relative;left:12.5%}.el-col-sm-4{width:16.66667%}.el-col-sm-offset-4{margin-left:16.66667%}.el-col-sm-pull-4{position:relative;right:16.66667%}.el-col-sm-push-4{position:relative;left:16.66667%}.el-col-sm-5{width:20.83333%}.el-col-sm-offset-5{margin-left:20.83333%}.el-col-sm-pull-5{position:relative;right:20.83333%}.el-col-sm-push-5{position:relative;left:20.83333%}.el-col-sm-6{width:25%}.el-col-sm-offset-6{margin-left:25%}.el-col-sm-pull-6{position:relative;right:25%}.el-col-sm-push-6{position:relative;left:25%}.el-col-sm-7{width:29.16667%}.el-col-sm-offset-7{margin-left:29.16667%}.el-col-sm-pull-7{position:relative;right:29.16667%}.el-col-sm-push-7{position:relative;left:29.16667%}.el-col-sm-8{width:33.33333%}.el-col-sm-offset-8{margin-left:33.33333%}.el-col-sm-pull-8{position:relative;right:33.33333%}.el-col-sm-push-8{position:relative;left:33.33333%}.el-col-sm-9{width:37.5%}.el-col-sm-offset-9{margin-left:37.5%}.el-col-sm-pull-9{position:relative;right:37.5%}.el-col-sm-push-9{position:relative;left:37.5%}.el-col-sm-10{width:41.66667%}.el-col-sm-offset-10{margin-left:41.66667%}.el-col-sm-pull-10{position:relative;right:41.66667%}.el-col-sm-push-10{position:relative;left:41.66667%}.el-col-sm-11{width:45.83333%}.el-col-sm-offset-11{margin-left:45.83333%}.el-col-sm-pull-11{position:relative;right:45.83333%}.el-col-sm-push-11{position:relative;left:45.83333%}.el-col-sm-12{width:50%}.el-col-sm-offset-12{margin-left:50%}.el-col-sm-pull-12{position:relative;right:50%}.el-col-sm-push-12{position:relative;left:50%}.el-col-sm-13{width:54.16667%}.el-col-sm-offset-13{margin-left:54.16667%}.el-col-sm-pull-13{position:relative;right:54.16667%}.el-col-sm-push-13{position:relative;left:54.16667%}.el-col-sm-14{width:58.33333%}.el-col-sm-offset-14{margin-left:58.33333%}.el-col-sm-pull-14{position:relative;right:58.33333%}.el-col-sm-push-14{position:relative;left:58.33333%}.el-col-sm-15{width:62.5%}.el-col-sm-offset-15{margin-left:62.5%}.el-col-sm-pull-15{position:relative;right:62.5%}.el-col-sm-push-15{position:relative;left:62.5%}.el-col-sm-16{width:66.66667%}.el-col-sm-offset-16{margin-left:66.66667%}.el-col-sm-pull-16{position:relative;right:66.66667%}.el-col-sm-push-16{position:relative;left:66.66667%}.el-col-sm-17{width:70.83333%}.el-col-sm-offset-17{margin-left:70.83333%}.el-col-sm-pull-17{position:relative;right:70.83333%}.el-col-sm-push-17{position:relative;left:70.83333%}.el-col-sm-18{width:75%}.el-col-sm-offset-18{margin-left:75%}.el-col-sm-pull-18{position:relative;right:75%}.el-col-sm-push-18{position:relative;left:75%}.el-col-sm-19{width:79.16667%}.el-col-sm-offset-19{margin-left:79.16667%}.el-col-sm-pull-19{position:relative;right:79.16667%}.el-col-sm-push-19{position:relative;left:79.16667%}.el-col-sm-20{width:83.33333%}.el-col-sm-offset-20{margin-left:83.33333%}.el-col-sm-pull-20{position:relative;right:83.33333%}.el-col-sm-push-20{position:relative;left:83.33333%}.el-col-sm-21{width:87.5%}.el-col-sm-offset-21{margin-left:87.5%}.el-col-sm-pull-21{position:relative;right:87.5%}.el-col-sm-push-21{position:relative;left:87.5%}.el-col-sm-22{width:91.66667%}.el-col-sm-offset-22{margin-left:91.66667%}.el-col-sm-pull-22{position:relative;right:91.66667%}.el-col-sm-push-22{position:relative;left:91.66667%}.el-col-sm-23{width:95.83333%}.el-col-sm-offset-23{margin-left:95.83333%}.el-col-sm-pull-23{position:relative;right:95.83333%}.el-col-sm-push-23{position:relative;left:95.83333%}.el-col-sm-24{width:100%}.el-col-sm-offset-24{margin-left:100%}.el-col-sm-pull-24{position:relative;right:100%}.el-col-sm-push-24{position:relative;left:100%}}@media only screen and (min-width:992px){.el-col-md-0{display:none;width:0}.el-col-md-offset-0{margin-left:0}.el-col-md-pull-0{position:relative;right:0}.el-col-md-push-0{position:relative;left:0}.el-col-md-1{width:4.16667%}.el-col-md-offset-1{margin-left:4.16667%}.el-col-md-pull-1{position:relative;right:4.16667%}.el-col-md-push-1{position:relative;left:4.16667%}.el-col-md-2{width:8.33333%}.el-col-md-offset-2{margin-left:8.33333%}.el-col-md-pull-2{position:relative;right:8.33333%}.el-col-md-push-2{position:relative;left:8.33333%}.el-col-md-3{width:12.5%}.el-col-md-offset-3{margin-left:12.5%}.el-col-md-pull-3{position:relative;right:12.5%}.el-col-md-push-3{position:relative;left:12.5%}.el-col-md-4{width:16.66667%}.el-col-md-offset-4{margin-left:16.66667%}.el-col-md-pull-4{position:relative;right:16.66667%}.el-col-md-push-4{position:relative;left:16.66667%}.el-col-md-5{width:20.83333%}.el-col-md-offset-5{margin-left:20.83333%}.el-col-md-pull-5{position:relative;right:20.83333%}.el-col-md-push-5{position:relative;left:20.83333%}.el-col-md-6{width:25%}.el-col-md-offset-6{margin-left:25%}.el-col-md-pull-6{position:relative;right:25%}.el-col-md-push-6{position:relative;left:25%}.el-col-md-7{width:29.16667%}.el-col-md-offset-7{margin-left:29.16667%}.el-col-md-pull-7{position:relative;right:29.16667%}.el-col-md-push-7{position:relative;left:29.16667%}.el-col-md-8{width:33.33333%}.el-col-md-offset-8{margin-left:33.33333%}.el-col-md-pull-8{position:relative;right:33.33333%}.el-col-md-push-8{position:relative;left:33.33333%}.el-col-md-9{width:37.5%}.el-col-md-offset-9{margin-left:37.5%}.el-col-md-pull-9{position:relative;right:37.5%}.el-col-md-push-9{position:relative;left:37.5%}.el-col-md-10{width:41.66667%}.el-col-md-offset-10{margin-left:41.66667%}.el-col-md-pull-10{position:relative;right:41.66667%}.el-col-md-push-10{position:relative;left:41.66667%}.el-col-md-11{width:45.83333%}.el-col-md-offset-11{margin-left:45.83333%}.el-col-md-pull-11{position:relative;right:45.83333%}.el-col-md-push-11{position:relative;left:45.83333%}.el-col-md-12{width:50%}.el-col-md-offset-12{margin-left:50%}.el-col-md-pull-12{position:relative;right:50%}.el-col-md-push-12{position:relative;left:50%}.el-col-md-13{width:54.16667%}.el-col-md-offset-13{margin-left:54.16667%}.el-col-md-pull-13{position:relative;right:54.16667%}.el-col-md-push-13{position:relative;left:54.16667%}.el-col-md-14{width:58.33333%}.el-col-md-offset-14{margin-left:58.33333%}.el-col-md-pull-14{position:relative;right:58.33333%}.el-col-md-push-14{position:relative;left:58.33333%}.el-col-md-15{width:62.5%}.el-col-md-offset-15{margin-left:62.5%}.el-col-md-pull-15{position:relative;right:62.5%}.el-col-md-push-15{position:relative;left:62.5%}.el-col-md-16{width:66.66667%}.el-col-md-offset-16{margin-left:66.66667%}.el-col-md-pull-16{position:relative;right:66.66667%}.el-col-md-push-16{position:relative;left:66.66667%}.el-col-md-17{width:70.83333%}.el-col-md-offset-17{margin-left:70.83333%}.el-col-md-pull-17{position:relative;right:70.83333%}.el-col-md-push-17{position:relative;left:70.83333%}.el-col-md-18{width:75%}.el-col-md-offset-18{margin-left:75%}.el-col-md-pull-18{position:relative;right:75%}.el-col-md-push-18{position:relative;left:75%}.el-col-md-19{width:79.16667%}.el-col-md-offset-19{margin-left:79.16667%}.el-col-md-pull-19{position:relative;right:79.16667%}.el-col-md-push-19{position:relative;left:79.16667%}.el-col-md-20{width:83.33333%}.el-col-md-offset-20{margin-left:83.33333%}.el-col-md-pull-20{position:relative;right:83.33333%}.el-col-md-push-20{position:relative;left:83.33333%}.el-col-md-21{width:87.5%}.el-col-md-offset-21{margin-left:87.5%}.el-col-md-pull-21{position:relative;right:87.5%}.el-col-md-push-21{position:relative;left:87.5%}.el-col-md-22{width:91.66667%}.el-col-md-offset-22{margin-left:91.66667%}.el-col-md-pull-22{position:relative;right:91.66667%}.el-col-md-push-22{position:relative;left:91.66667%}.el-col-md-23{width:95.83333%}.el-col-md-offset-23{margin-left:95.83333%}.el-col-md-pull-23{position:relative;right:95.83333%}.el-col-md-push-23{position:relative;left:95.83333%}.el-col-md-24{width:100%}.el-col-md-offset-24{margin-left:100%}.el-col-md-pull-24{position:relative;right:100%}.el-col-md-push-24{position:relative;left:100%}}@media only screen and (min-width:1200px){.el-col-lg-0{display:none;width:0}.el-col-lg-offset-0{margin-left:0}.el-col-lg-pull-0{position:relative;right:0}.el-col-lg-push-0{position:relative;left:0}.el-col-lg-1{width:4.16667%}.el-col-lg-offset-1{margin-left:4.16667%}.el-col-lg-pull-1{position:relative;right:4.16667%}.el-col-lg-push-1{position:relative;left:4.16667%}.el-col-lg-2{width:8.33333%}.el-col-lg-offset-2{margin-left:8.33333%}.el-col-lg-pull-2{position:relative;right:8.33333%}.el-col-lg-push-2{position:relative;left:8.33333%}.el-col-lg-3{width:12.5%}.el-col-lg-offset-3{margin-left:12.5%}.el-col-lg-pull-3{position:relative;right:12.5%}.el-col-lg-push-3{position:relative;left:12.5%}.el-col-lg-4{width:16.66667%}.el-col-lg-offset-4{margin-left:16.66667%}.el-col-lg-pull-4{position:relative;right:16.66667%}.el-col-lg-push-4{position:relative;left:16.66667%}.el-col-lg-5{width:20.83333%}.el-col-lg-offset-5{margin-left:20.83333%}.el-col-lg-pull-5{position:relative;right:20.83333%}.el-col-lg-push-5{position:relative;left:20.83333%}.el-col-lg-6{width:25%}.el-col-lg-offset-6{margin-left:25%}.el-col-lg-pull-6{position:relative;right:25%}.el-col-lg-push-6{position:relative;left:25%}.el-col-lg-7{width:29.16667%}.el-col-lg-offset-7{margin-left:29.16667%}.el-col-lg-pull-7{position:relative;right:29.16667%}.el-col-lg-push-7{position:relative;left:29.16667%}.el-col-lg-8{width:33.33333%}.el-col-lg-offset-8{margin-left:33.33333%}.el-col-lg-pull-8{position:relative;right:33.33333%}.el-col-lg-push-8{position:relative;left:33.33333%}.el-col-lg-9{width:37.5%}.el-col-lg-offset-9{margin-left:37.5%}.el-col-lg-pull-9{position:relative;right:37.5%}.el-col-lg-push-9{position:relative;left:37.5%}.el-col-lg-10{width:41.66667%}.el-col-lg-offset-10{margin-left:41.66667%}.el-col-lg-pull-10{position:relative;right:41.66667%}.el-col-lg-push-10{position:relative;left:41.66667%}.el-col-lg-11{width:45.83333%}.el-col-lg-offset-11{margin-left:45.83333%}.el-col-lg-pull-11{position:relative;right:45.83333%}.el-col-lg-push-11{position:relative;left:45.83333%}.el-col-lg-12{width:50%}.el-col-lg-offset-12{margin-left:50%}.el-col-lg-pull-12{position:relative;right:50%}.el-col-lg-push-12{position:relative;left:50%}.el-col-lg-13{width:54.16667%}.el-col-lg-offset-13{margin-left:54.16667%}.el-col-lg-pull-13{position:relative;right:54.16667%}.el-col-lg-push-13{position:relative;left:54.16667%}.el-col-lg-14{width:58.33333%}.el-col-lg-offset-14{margin-left:58.33333%}.el-col-lg-pull-14{position:relative;right:58.33333%}.el-col-lg-push-14{position:relative;left:58.33333%}.el-col-lg-15{width:62.5%}.el-col-lg-offset-15{margin-left:62.5%}.el-col-lg-pull-15{position:relative;right:62.5%}.el-col-lg-push-15{position:relative;left:62.5%}.el-col-lg-16{width:66.66667%}.el-col-lg-offset-16{margin-left:66.66667%}.el-col-lg-pull-16{position:relative;right:66.66667%}.el-col-lg-push-16{position:relative;left:66.66667%}.el-col-lg-17{width:70.83333%}.el-col-lg-offset-17{margin-left:70.83333%}.el-col-lg-pull-17{position:relative;right:70.83333%}.el-col-lg-push-17{position:relative;left:70.83333%}.el-col-lg-18{width:75%}.el-col-lg-offset-18{margin-left:75%}.el-col-lg-pull-18{position:relative;right:75%}.el-col-lg-push-18{position:relative;left:75%}.el-col-lg-19{width:79.16667%}.el-col-lg-offset-19{margin-left:79.16667%}.el-col-lg-pull-19{position:relative;right:79.16667%}.el-col-lg-push-19{position:relative;left:79.16667%}.el-col-lg-20{width:83.33333%}.el-col-lg-offset-20{margin-left:83.33333%}.el-col-lg-pull-20{position:relative;right:83.33333%}.el-col-lg-push-20{position:relative;left:83.33333%}.el-col-lg-21{width:87.5%}.el-col-lg-offset-21{margin-left:87.5%}.el-col-lg-pull-21{position:relative;right:87.5%}.el-col-lg-push-21{position:relative;left:87.5%}.el-col-lg-22{width:91.66667%}.el-col-lg-offset-22{margin-left:91.66667%}.el-col-lg-pull-22{position:relative;right:91.66667%}.el-col-lg-push-22{position:relative;left:91.66667%}.el-col-lg-23{width:95.83333%}.el-col-lg-offset-23{margin-left:95.83333%}.el-col-lg-pull-23{position:relative;right:95.83333%}.el-col-lg-push-23{position:relative;left:95.83333%}.el-col-lg-24{width:100%}.el-col-lg-offset-24{margin-left:100%}.el-col-lg-pull-24{position:relative;right:100%}.el-col-lg-push-24{position:relative;left:100%}}@media only screen and (min-width:1920px){.el-col-xl-0{display:none;width:0}.el-col-xl-offset-0{margin-left:0}.el-col-xl-pull-0{position:relative;right:0}.el-col-xl-push-0{position:relative;left:0}.el-col-xl-1{width:4.16667%}.el-col-xl-offset-1{margin-left:4.16667%}.el-col-xl-pull-1{position:relative;right:4.16667%}.el-col-xl-push-1{position:relative;left:4.16667%}.el-col-xl-2{width:8.33333%}.el-col-xl-offset-2{margin-left:8.33333%}.el-col-xl-pull-2{position:relative;right:8.33333%}.el-col-xl-push-2{position:relative;left:8.33333%}.el-col-xl-3{width:12.5%}.el-col-xl-offset-3{margin-left:12.5%}.el-col-xl-pull-3{position:relative;right:12.5%}.el-col-xl-push-3{position:relative;left:12.5%}.el-col-xl-4{width:16.66667%}.el-col-xl-offset-4{margin-left:16.66667%}.el-col-xl-pull-4{position:relative;right:16.66667%}.el-col-xl-push-4{position:relative;left:16.66667%}.el-col-xl-5{width:20.83333%}.el-col-xl-offset-5{margin-left:20.83333%}.el-col-xl-pull-5{position:relative;right:20.83333%}.el-col-xl-push-5{position:relative;left:20.83333%}.el-col-xl-6{width:25%}.el-col-xl-offset-6{margin-left:25%}.el-col-xl-pull-6{position:relative;right:25%}.el-col-xl-push-6{position:relative;left:25%}.el-col-xl-7{width:29.16667%}.el-col-xl-offset-7{margin-left:29.16667%}.el-col-xl-pull-7{position:relative;right:29.16667%}.el-col-xl-push-7{position:relative;left:29.16667%}.el-col-xl-8{width:33.33333%}.el-col-xl-offset-8{margin-left:33.33333%}.el-col-xl-pull-8{position:relative;right:33.33333%}.el-col-xl-push-8{position:relative;left:33.33333%}.el-col-xl-9{width:37.5%}.el-col-xl-offset-9{margin-left:37.5%}.el-col-xl-pull-9{position:relative;right:37.5%}.el-col-xl-push-9{position:relative;left:37.5%}.el-col-xl-10{width:41.66667%}.el-col-xl-offset-10{margin-left:41.66667%}.el-col-xl-pull-10{position:relative;right:41.66667%}.el-col-xl-push-10{position:relative;left:41.66667%}.el-col-xl-11{width:45.83333%}.el-col-xl-offset-11{margin-left:45.83333%}.el-col-xl-pull-11{position:relative;right:45.83333%}.el-col-xl-push-11{position:relative;left:45.83333%}.el-col-xl-12{width:50%}.el-col-xl-offset-12{margin-left:50%}.el-col-xl-pull-12{position:relative;right:50%}.el-col-xl-push-12{position:relative;left:50%}.el-col-xl-13{width:54.16667%}.el-col-xl-offset-13{margin-left:54.16667%}.el-col-xl-pull-13{position:relative;right:54.16667%}.el-col-xl-push-13{position:relative;left:54.16667%}.el-col-xl-14{width:58.33333%}.el-col-xl-offset-14{margin-left:58.33333%}.el-col-xl-pull-14{position:relative;right:58.33333%}.el-col-xl-push-14{position:relative;left:58.33333%}.el-col-xl-15{width:62.5%}.el-col-xl-offset-15{margin-left:62.5%}.el-col-xl-pull-15{position:relative;right:62.5%}.el-col-xl-push-15{position:relative;left:62.5%}.el-col-xl-16{width:66.66667%}.el-col-xl-offset-16{margin-left:66.66667%}.el-col-xl-pull-16{position:relative;right:66.66667%}.el-col-xl-push-16{position:relative;left:66.66667%}.el-col-xl-17{width:70.83333%}.el-col-xl-offset-17{margin-left:70.83333%}.el-col-xl-pull-17{position:relative;right:70.83333%}.el-col-xl-push-17{position:relative;left:70.83333%}.el-col-xl-18{width:75%}.el-col-xl-offset-18{margin-left:75%}.el-col-xl-pull-18{position:relative;right:75%}.el-col-xl-push-18{position:relative;left:75%}.el-col-xl-19{width:79.16667%}.el-col-xl-offset-19{margin-left:79.16667%}.el-col-xl-pull-19{position:relative;right:79.16667%}.el-col-xl-push-19{position:relative;left:79.16667%}.el-col-xl-20{width:83.33333%}.el-col-xl-offset-20{margin-left:83.33333%}.el-col-xl-pull-20{position:relative;right:83.33333%}.el-col-xl-push-20{position:relative;left:83.33333%}.el-col-xl-21{width:87.5%}.el-col-xl-offset-21{margin-left:87.5%}.el-col-xl-pull-21{position:relative;right:87.5%}.el-col-xl-push-21{position:relative;left:87.5%}.el-col-xl-22{width:91.66667%}.el-col-xl-offset-22{margin-left:91.66667%}.el-col-xl-pull-22{position:relative;right:91.66667%}.el-col-xl-push-22{position:relative;left:91.66667%}.el-col-xl-23{width:95.83333%}.el-col-xl-offset-23{margin-left:95.83333%}.el-col-xl-pull-23{position:relative;right:95.83333%}.el-col-xl-push-23{position:relative;left:95.83333%}.el-col-xl-24{width:100%}.el-col-xl-offset-24{margin-left:100%}.el-col-xl-pull-24{position:relative;right:100%}.el-col-xl-push-24{position:relative;left:100%}}.el-upload{display:inline-block;text-align:center;cursor:pointer;outline:0}.el-upload__input{display:none}.el-upload__tip{font-size:12px;color:#606266;margin-top:7px}.el-upload iframe{position:absolute;z-index:-1;top:0;left:0;filter:alpha(opacity=0)}.el-upload--picture-card{background-color:#fbfdff;border:1px dashed #c0ccda;border-radius:6px;box-sizing:border-box;width:148px;height:148px;cursor:pointer;line-height:146px;vertical-align:top}.el-upload--picture-card i{font-size:28px;color:#8c939d}.el-upload--picture-card:hover,.el-upload:focus{border-color:#409eff;color:#409eff}.el-upload:focus .el-upload-dragger{border-color:#409eff}.el-upload-dragger{background-color:#fff;border:1px dashed #d9d9d9;border-radius:6px;box-sizing:border-box;width:360px;height:180px;text-align:center;cursor:pointer;overflow:hidden}.el-upload-dragger .el-icon-upload{font-size:67px;color:#c0c4cc;margin:40px 0 16px;line-height:50px}.el-upload-dragger+.el-upload__tip{text-align:center}.el-upload-dragger~.el-upload__files{border-top:1px solid #dcdfe6;margin-top:7px;padding-top:5px}.el-upload-dragger .el-upload__text{color:#606266;font-size:14px;text-align:center}.el-upload-dragger .el-upload__text em{color:#409eff;font-style:normal}.el-upload-dragger:hover{border-color:#409eff}.el-upload-dragger.is-dragover{background-color:rgba(32,159,255,.06);border:2px dashed #409eff}.el-upload-list{margin:0;padding:0;list-style:none}.el-upload-list__item{transition:all .5s cubic-bezier(.55,0,.1,1);font-size:14px;color:#606266;line-height:1.8;margin-top:5px;box-sizing:border-box;border-radius:4px;width:100%}.el-upload-list__item .el-progress{position:absolute;top:20px;width:100%}.el-upload-list__item .el-progress__text{position:absolute;right:0;top:-13px}.el-upload-list__item .el-progress-bar{margin-right:0;padding-right:0}.el-upload-list__item:first-child{margin-top:10px}.el-upload-list__item .el-icon-upload-success{color:#67c23a}.el-upload-list__item .el-icon-close{display:none;position:absolute;top:5px;right:5px;cursor:pointer;opacity:.75;color:#606266}.el-upload-list__item .el-icon-close:hover{opacity:1}.el-upload-list__item .el-icon-close-tip{display:none;position:absolute;top:5px;right:5px;font-size:12px;cursor:pointer;opacity:1;color:#409eff}.el-upload-list__item:hover .el-icon-close{display:inline-block}.el-upload-list__item:hover .el-progress__text{display:none}.el-upload-list__item.is-success .el-upload-list__item-status-label{display:block}.el-upload-list__item.is-success .el-upload-list__item-name:focus,.el-upload-list__item.is-success .el-upload-list__item-name:hover{color:#409eff;cursor:pointer}.el-upload-list__item.is-success:focus:not(:hover) .el-icon-close-tip{display:inline-block}.el-upload-list__item.is-success:active,.el-upload-list__item.is-success:not(.focusing):focus{outline-width:0}.el-upload-list__item.is-success:active .el-icon-close-tip,.el-upload-list__item.is-success:focus .el-upload-list__item-status-label,.el-upload-list__item.is-success:hover .el-upload-list__item-status-label,.el-upload-list__item.is-success:not(.focusing):focus .el-icon-close-tip{display:none}.el-upload-list.is-disabled .el-upload-list__item:hover .el-upload-list__item-status-label{display:block}.el-upload-list__item-name{color:#606266;display:block;margin-right:40px;overflow:hidden;padding-left:4px;text-overflow:ellipsis;transition:color .3s;white-space:nowrap}.el-upload-list__item-name [class^=el-icon]{height:100%;margin-right:7px;color:#909399;line-height:inherit}.el-upload-list__item-status-label{position:absolute;right:5px;top:0;line-height:inherit;display:none}.el-upload-list__item-delete{position:absolute;right:10px;top:0;font-size:12px;color:#606266;display:none}.el-upload-list__item-delete:hover{color:#409eff}.el-upload-list--picture-card{margin:0;display:inline;vertical-align:top}.el-upload-list--picture-card .el-upload-list__item{overflow:hidden;background-color:#fff;border:1px solid #c0ccda;border-radius:6px;box-sizing:border-box;width:148px;height:148px;margin:0 8px 8px 0;display:inline-block}.el-upload-list--picture-card .el-upload-list__item .el-icon-check,.el-upload-list--picture-card .el-upload-list__item .el-icon-circle-check{color:#fff}.el-upload-list--picture-card .el-upload-list__item .el-icon-close,.el-upload-list--picture-card .el-upload-list__item:hover .el-upload-list__item-status-label{display:none}.el-upload-list--picture-card .el-upload-list__item:hover .el-progress__text{display:block}.el-upload-list--picture-card .el-upload-list__item-name{display:none}.el-upload-list--picture-card .el-upload-list__item-thumbnail{width:100%;height:100%}.el-upload-list--picture-card .el-upload-list__item-status-label{position:absolute;right:-15px;top:-6px;width:40px;height:24px;background:#13ce66;text-align:center;transform:rotate(45deg);box-shadow:0 0 1pc 1px rgba(0,0,0,.2)}.el-upload-list--picture-card .el-upload-list__item-status-label i{font-size:12px;margin-top:11px;transform:rotate(-45deg)}.el-upload-list--picture-card .el-upload-list__item-actions{position:absolute;width:100%;height:100%;left:0;top:0;cursor:default;text-align:center;color:#fff;opacity:0;font-size:20px;background-color:rgba(0,0,0,.5);transition:opacity .3s}.el-upload-list--picture-card .el-upload-list__item-actions:after{display:inline-block;height:100%;vertical-align:middle}.el-upload-list--picture-card .el-upload-list__item-actions span{display:none;cursor:pointer}.el-upload-list--picture-card .el-upload-list__item-actions span+span{margin-left:15px}.el-upload-list--picture-card .el-upload-list__item-actions .el-upload-list__item-delete{position:static;font-size:inherit;color:inherit}.el-upload-list--picture-card .el-upload-list__item-actions:hover{opacity:1}.el-upload-list--picture-card .el-upload-list__item-actions:hover span{display:inline-block}.el-upload-list--picture-card .el-progress{top:50%;left:50%;transform:translate(-50%,-50%);bottom:auto;width:126px}.el-upload-list--picture-card .el-progress .el-progress__text{top:50%}.el-upload-list--picture .el-upload-list__item{overflow:hidden;z-index:0;background-color:#fff;border:1px solid #c0ccda;border-radius:6px;box-sizing:border-box;margin-top:10px;padding:10px 10px 10px 90px;height:92px}.el-upload-list--picture .el-upload-list__item .el-icon-check,.el-upload-list--picture .el-upload-list__item .el-icon-circle-check{color:#fff}.el-upload-list--picture .el-upload-list__item:hover .el-upload-list__item-status-label{background:0 0;box-shadow:none;top:-2px;right:-12px}.el-upload-list--picture .el-upload-list__item:hover .el-progress__text{display:block}.el-upload-list--picture .el-upload-list__item.is-success .el-upload-list__item-name{line-height:70px;margin-top:0}.el-upload-list--picture .el-upload-list__item.is-success .el-upload-list__item-name i{display:none}.el-upload-list--picture .el-upload-list__item-thumbnail{vertical-align:middle;display:inline-block;width:70px;height:70px;float:left;position:relative;z-index:1;margin-left:-80px;background-color:#fff}.el-upload-list--picture .el-upload-list__item-name{display:block;margin-top:20px}.el-upload-list--picture .el-upload-list__item-name i{font-size:70px;line-height:1;position:absolute;left:9px;top:10px}.el-upload-list--picture .el-upload-list__item-status-label{position:absolute;right:-17px;top:-7px;width:46px;height:26px;background:#13ce66;text-align:center;transform:rotate(45deg);box-shadow:0 1px 1px #ccc}.el-upload-list--picture .el-upload-list__item-status-label i{font-size:12px;margin-top:12px;transform:rotate(-45deg)}.el-upload-list--picture .el-progress{position:relative;top:-7px}.el-upload-cover{position:absolute;left:0;top:0;width:100%;height:100%;overflow:hidden;z-index:10;cursor:default}.el-upload-cover:after{display:inline-block;height:100%;vertical-align:middle}.el-upload-cover img{display:block;width:100%;height:100%}.el-upload-cover__label{position:absolute;right:-15px;top:-6px;width:40px;height:24px;background:#13ce66;text-align:center;transform:rotate(45deg);box-shadow:0 0 1pc 1px rgba(0,0,0,.2)}.el-upload-cover__label i{font-size:12px;margin-top:11px;transform:rotate(-45deg);color:#fff}.el-upload-cover__progress{display:inline-block;vertical-align:middle;position:static;width:243px}.el-upload-cover__progress+.el-upload__inner{opacity:0}.el-upload-cover__content{position:absolute;top:0;left:0;width:100%;height:100%}.el-upload-cover__interact{position:absolute;bottom:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.72);text-align:center}.el-upload-cover__interact .btn{display:inline-block;color:#fff;font-size:14px;cursor:pointer;vertical-align:middle;transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1);margin-top:60px}.el-upload-cover__interact .btn span{opacity:0;transition:opacity .15s linear}.el-upload-cover__interact .btn:not(:first-child){margin-left:35px}.el-upload-cover__interact .btn:hover{transform:translateY(-13px)}.el-upload-cover__interact .btn:hover span{opacity:1}.el-upload-cover__interact .btn i{color:#fff;display:block;font-size:24px;line-height:inherit;margin:0 auto 5px}.el-upload-cover__title{position:absolute;bottom:0;left:0;background-color:#fff;height:36px;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:400;text-align:left;padding:0 10px;margin:0;line-height:36px;font-size:14px;color:#303133}.el-upload-cover+.el-upload__inner{opacity:0;position:relative;z-index:1}.el-progress{position:relative;line-height:1}.el-progress__text{font-size:14px;color:#606266;display:inline-block;vertical-align:middle;margin-left:10px;line-height:1}.el-progress__text i{vertical-align:middle;display:block}.el-progress--circle,.el-progress--dashboard{display:inline-block}.el-progress--circle .el-progress__text,.el-progress--dashboard .el-progress__text{position:absolute;top:50%;left:0;width:100%;text-align:center;margin:0;transform:translateY(-50%)}.el-progress--circle .el-progress__text i,.el-progress--dashboard .el-progress__text i{vertical-align:middle;display:inline-block}.el-progress--without-text .el-progress__text{display:none}.el-progress--without-text .el-progress-bar{padding-right:0;margin-right:0;display:block}.el-progress--text-inside .el-progress-bar{padding-right:0;margin-right:0}.el-progress.is-success .el-progress-bar__inner{background-color:#67c23a}.el-progress.is-success .el-progress__text{color:#67c23a}.el-progress.is-warning .el-progress-bar__inner{background-color:#e6a23c}.el-badge__content,.el-progress.is-exception .el-progress-bar__inner{background-color:#f56c6c}.el-progress.is-warning .el-progress__text{color:#e6a23c}.el-progress.is-exception .el-progress__text{color:#f56c6c}.el-progress-bar{padding-right:50px;display:inline-block;vertical-align:middle;width:100%;margin-right:-55px;box-sizing:border-box}.el-card__header,.el-message,.el-step__icon{-webkit-box-sizing:border-box}.el-progress-bar__outer{height:6px;border-radius:100px;background-color:#ebeef5;overflow:hidden;position:relative;vertical-align:middle}.el-progress-bar__inner{position:absolute;left:0;top:0;height:100%;background-color:#409eff;text-align:right;border-radius:100px;line-height:1;white-space:nowrap;transition:width .6s ease}.el-progress-bar__inner:after{display:inline-block;height:100%;vertical-align:middle}.el-progress-bar__innerText{display:inline-block;vertical-align:middle;color:#fff;font-size:12px;margin:0 5px}@keyframes progress{0%{background-position:0 0}to{background-position:32px 0}}.el-time-spinner{width:100%;white-space:nowrap}.el-spinner{display:inline-block;vertical-align:middle}.el-spinner-inner{animation:rotate 2s linear infinite;width:50px;height:50px}.el-spinner-inner .path{stroke:#ececec;stroke-linecap:round;animation:dash 1.5s ease-in-out infinite}@keyframes rotate{to{transform:rotate(1turn)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}to{stroke-dasharray:90,150;stroke-dashoffset:-124}}.el-message{min-width:380px;box-sizing:border-box;border-radius:4px;border:1px solid #ebeef5;position:fixed;left:50%;top:20px;transform:translateX(-50%);background-color:#edf2fc;transition:opacity .3s,transform .4s,top .4s;overflow:hidden;padding:15px 15px 15px 20px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.el-message.is-center{-ms-flex-pack:center;justify-content:center}.el-message.is-closable .el-message__content{padding-right:16px}.el-message p{margin:0}.el-message--info .el-message__content{color:#909399}.el-message--success{background-color:#f0f9eb;border-color:#e1f3d8}.el-message--success .el-message__content{color:#67c23a}.el-message--warning{background-color:#fdf6ec;border-color:#faecd8}.el-message--warning .el-message__content{color:#e6a23c}.el-message--error{background-color:#fef0f0;border-color:#fde2e2}.el-message--error .el-message__content{color:#f56c6c}.el-message__icon{margin-right:10px}.el-message__content{padding:0;font-size:14px;line-height:1}.el-message__content:focus{outline-width:0}.el-message__closeBtn{position:absolute;top:50%;right:15px;transform:translateY(-50%);cursor:pointer;color:#c0c4cc;font-size:16px}.el-message__closeBtn:focus{outline-width:0}.el-message__closeBtn:hover{color:#909399}.el-message .el-icon-success{color:#67c23a}.el-message .el-icon-error{color:#f56c6c}.el-message .el-icon-info{color:#909399}.el-message .el-icon-warning{color:#e6a23c}.el-message-fade-enter,.el-message-fade-leave-active{opacity:0;transform:translate(-50%,-100%)}.el-badge{position:relative;vertical-align:middle;display:inline-block}.el-badge__content{border-radius:10px;color:#fff;display:inline-block;font-size:12px;height:18px;line-height:18px;padding:0 6px;text-align:center;white-space:nowrap;border:1px solid #fff}.el-badge__content.is-fixed{position:absolute;top:0;right:10px;transform:translateY(-50%) translateX(100%)}.el-rate__icon,.el-rate__item{position:relative;display:inline-block}.el-badge__content.is-fixed.is-dot{right:5px}.el-badge__content.is-dot{height:8px;width:8px;padding:0;right:0;border-radius:50%}.el-badge__content--primary{background-color:#409eff}.el-badge__content--success{background-color:#67c23a}.el-badge__content--warning{background-color:#e6a23c}.el-badge__content--info{background-color:#909399}.el-badge__content--danger{background-color:#f56c6c}.el-card{border-radius:4px;border:1px solid #ebeef5;background-color:#fff;overflow:hidden;color:#303133;transition:.3s}.el-card.is-always-shadow,.el-card.is-hover-shadow:focus,.el-card.is-hover-shadow:hover{box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.el-card__header{padding:18px 20px;border-bottom:1px solid #ebeef5;box-sizing:border-box}.el-card__body,.el-main{padding:20px}.el-rate{height:20px;line-height:1}.el-rate:active,.el-rate:focus{outline-width:0}.el-rate__item{font-size:0;vertical-align:middle}.el-rate__icon{font-size:18px;margin-right:6px;color:#c0c4cc;transition:.3s}.el-rate__decimal,.el-rate__icon .path2{position:absolute;top:0;left:0}.el-rate__icon.hover{transform:scale(1.15)}.el-rate__decimal{display:inline-block;overflow:hidden}.el-step.is-vertical,.el-steps{display:-ms-flexbox}.el-rate__text{font-size:14px;vertical-align:middle}.el-steps{display:-ms-flexbox;display:flex}.el-steps--simple{padding:13px 8%;border-radius:4px;background:#f5f7fa}.el-steps--horizontal{white-space:nowrap}.el-steps--vertical{height:100%;-ms-flex-flow:column;flex-flow:column}.el-step{position:relative;-ms-flex-negative:1;flex-shrink:1}.el-step:last-of-type .el-step__line{display:none}.el-step:last-of-type.is-flex{-ms-flex-preferred-size:auto!important;flex-basis:auto!important;-ms-flex-negative:0;flex-shrink:0;-ms-flex-positive:0;flex-grow:0}.el-step:last-of-type .el-step__description,.el-step:last-of-type .el-step__main{padding-right:0}.el-step__head{position:relative;width:100%}.el-step__head.is-process{color:#303133;border-color:#303133}.el-step__head.is-wait{color:#c0c4cc;border-color:#c0c4cc}.el-step__head.is-success{color:#67c23a;border-color:#67c23a}.el-step__head.is-error{color:#f56c6c;border-color:#f56c6c}.el-step__head.is-finish{color:#409eff;border-color:#409eff}.el-step__icon{position:relative;z-index:1;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;width:24px;height:24px;font-size:14px;box-sizing:border-box;background:#fff;transition:.15s ease-out}.el-step.is-horizontal,.el-step__icon-inner{display:inline-block}.el-step__icon.is-text{border-radius:50%;border:2px solid;border-color:inherit}.el-step__icon.is-icon{width:40px}.el-step__icon-inner{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:center;font-weight:700;line-height:1;color:inherit}.el-step__icon-inner[class*=el-icon]:not(.is-status){font-size:25px;font-weight:400}.el-step__icon-inner.is-status{transform:translateY(1px)}.el-step__line{position:absolute;border-color:inherit;background-color:#c0c4cc}.el-step__line-inner{display:block;border-width:1px;border-style:solid;border-color:inherit;transition:.15s ease-out;box-sizing:border-box;width:0;height:0}.el-step__main{white-space:normal;text-align:left}.el-step__title{font-size:16px;line-height:38px}.el-step__title.is-process{font-weight:700;color:#303133}.el-step__title.is-wait{color:#c0c4cc}.el-step__title.is-success{color:#67c23a}.el-step__title.is-error{color:#f56c6c}.el-step__title.is-finish{color:#409eff}.el-step__description{padding-right:10%;margin-top:-5px;font-size:12px;line-height:20px;font-weight:400}.el-step__description.is-process{color:#303133}.el-step__description.is-wait{color:#c0c4cc}.el-step__description.is-success{color:#67c23a}.el-step__description.is-error{color:#f56c6c}.el-step__description.is-finish{color:#409eff}.el-step.is-horizontal .el-step__line{height:2px;top:11px;left:0;right:0}.el-step.is-vertical{display:-ms-flexbox;display:flex}.el-step.is-vertical .el-step__head{-ms-flex-positive:0;flex-grow:0;width:24px}.el-step.is-vertical .el-step__main{padding-left:10px;-ms-flex-positive:1;flex-grow:1}.el-step.is-vertical .el-step__title{line-height:24px;padding-bottom:8px}.el-step.is-vertical .el-step__line{width:2px;top:0;bottom:0;left:11px}.el-step.is-vertical .el-step__icon.is-icon{width:24px}.el-step.is-center .el-step__head,.el-step.is-center .el-step__main{text-align:center}.el-step.is-center .el-step__description{padding-left:20%;padding-right:20%}.el-step.is-center .el-step__line{left:50%;right:-50%}.el-step.is-simple{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.el-step.is-simple .el-step__head{width:auto;font-size:0;padding-right:10px}.el-step.is-simple .el-step__icon{background:0 0;width:16px;height:16px;font-size:12px}.el-step.is-simple .el-step__icon-inner[class*=el-icon]:not(.is-status){font-size:18px}.el-step.is-simple .el-step__icon-inner.is-status{transform:scale(.8) translateY(1px)}.el-step.is-simple .el-step__main{position:relative;display:-ms-flexbox;display:flex;-ms-flex-align:stretch;align-items:stretch;-ms-flex-positive:1;flex-grow:1}.el-step.is-simple .el-step__title{font-size:16px;line-height:20px}.el-step.is-simple:not(:last-of-type) .el-step__title{max-width:50%;word-break:break-all}.el-step.is-simple .el-step__arrow{-ms-flex-positive:1;flex-grow:1;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.el-step.is-simple .el-step__arrow:after,.el-step.is-simple .el-step__arrow:before{content:"";display:inline-block;position:absolute;height:15px;width:1px;background:#c0c4cc}.el-step.is-simple .el-step__arrow:before{transform:rotate(-45deg) translateY(-4px);transform-origin:0 0}.el-step.is-simple .el-step__arrow:after{transform:rotate(45deg) translateY(4px);transform-origin:100% 100%}.el-step.is-simple:last-of-type .el-step__arrow{display:none}.el-carousel{position:relative}.el-carousel--horizontal{overflow-x:hidden}.el-carousel--vertical{overflow-y:hidden}.el-carousel__container{position:relative;height:300px}.el-carousel__arrow{border:none;outline:0;padding:0;margin:0;height:36px;width:36px;cursor:pointer;transition:.3s;border-radius:50%;background-color:rgba(31,45,61,.11);color:#fff;position:absolute;top:50%;z-index:10;transform:translateY(-50%);text-align:center;font-size:12px}.el-carousel__arrow--left{left:16px}.el-carousel__arrow:hover{background-color:rgba(31,45,61,.23)}.el-carousel__arrow i{cursor:pointer}.el-carousel__indicators{position:absolute;list-style:none;margin:0;padding:0;z-index:2}.el-carousel__indicators--horizontal{bottom:0;left:50%;transform:translateX(-50%)}.el-carousel__indicators--vertical{right:0;top:50%;transform:translateY(-50%)}.el-carousel__indicators--outside{bottom:26px;text-align:center;position:static;transform:none}.el-carousel__indicators--outside .el-carousel__indicator:hover button{opacity:.64}.el-carousel__indicators--outside button{background-color:#c0c4cc;opacity:.24}.el-carousel__indicators--labels{left:0;right:0;transform:none;text-align:center}.el-carousel__indicators--labels .el-carousel__button{height:auto;width:auto;padding:2px 18px;font-size:12px}.el-carousel__indicators--labels .el-carousel__indicator{padding:6px 4px}.el-carousel__indicator{background-color:transparent;cursor:pointer}.el-carousel__indicator:hover button{opacity:.72}.el-carousel__indicator--horizontal{display:inline-block;padding:12px 4px}.el-carousel__indicator--vertical{padding:4px 12px}.el-carousel__indicator--vertical .el-carousel__button{width:2px;height:15px}.el-carousel__indicator.is-active button{opacity:1}.el-carousel__button{display:block;opacity:.48;width:30px;height:2px;background-color:#fff;border:none;outline:0;padding:0;margin:0;cursor:pointer;transition:.3s}.el-carousel__item,.el-carousel__mask{height:100%;position:absolute;top:0;left:0}.carousel-arrow-left-enter,.carousel-arrow-left-leave-active{transform:translateY(-50%) translateX(-10px);opacity:0}.carousel-arrow-right-enter,.carousel-arrow-right-leave-active{transform:translateY(-50%) translateX(10px);opacity:0}.el-carousel__item{width:100%;display:inline-block;overflow:hidden;z-index:0}.el-carousel__item.is-active{z-index:2}.el-carousel__item--card,.el-carousel__item.is-animating{transition:transform .4s ease-in-out}.el-carousel__item--card{width:50%}.el-carousel__item--card.is-in-stage{cursor:pointer;z-index:1}.el-carousel__item--card.is-in-stage.is-hover .el-carousel__mask,.el-carousel__item--card.is-in-stage:hover .el-carousel__mask{opacity:.12}.el-carousel__item--card.is-active{z-index:2}.el-carousel__mask{width:100%;background-color:#fff;opacity:.24;transition:.2s}.fade-in-linear-enter-active,.fade-in-linear-leave-active{transition:opacity .2s linear}.fade-in-linear-enter,.fade-in-linear-leave,.fade-in-linear-leave-active{opacity:0}.el-fade-in-linear-enter-active,.el-fade-in-linear-leave-active{transition:opacity .2s linear}.el-fade-in-linear-enter,.el-fade-in-linear-leave,.el-fade-in-linear-leave-active{opacity:0}.el-fade-in-enter-active,.el-fade-in-leave-active{transition:all .3s cubic-bezier(.55,0,.1,1)}.el-fade-in-enter,.el-fade-in-leave-active{opacity:0}.el-zoom-in-center-enter-active,.el-zoom-in-center-leave-active{transition:all .3s cubic-bezier(.55,0,.1,1)}.el-zoom-in-center-enter,.el-zoom-in-center-leave-active{opacity:0;transform:scaleX(0)}.el-zoom-in-top-enter-active,.el-zoom-in-top-leave-active{opacity:1;transform:scaleY(1);transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1);transform-origin:center top}.el-zoom-in-top-enter,.el-zoom-in-top-leave-active{opacity:0;transform:scaleY(0)}.el-zoom-in-bottom-enter-active,.el-zoom-in-bottom-leave-active{opacity:1;transform:scaleY(1);transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1);transform-origin:center bottom}.el-zoom-in-bottom-enter,.el-zoom-in-bottom-leave-active{opacity:0;transform:scaleY(0)}.el-zoom-in-left-enter-active,.el-zoom-in-left-leave-active{opacity:1;transform:scale(1);transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1);transform-origin:top left}.el-zoom-in-left-enter,.el-zoom-in-left-leave-active{opacity:0;transform:scale(.45)}.collapse-transition{transition:height .3s ease-in-out,padding-top .3s ease-in-out,padding-bottom .3s ease-in-out}.horizontal-collapse-transition{transition:width .3s ease-in-out,padding-left .3s ease-in-out,padding-right .3s ease-in-out}.el-list-enter-active,.el-list-leave-active{transition:all 1s}.el-list-enter,.el-list-leave-active{opacity:0;transform:translateY(-30px)}.el-opacity-transition{transition:opacity .3s cubic-bezier(.55,0,.1,1)}.el-collapse{border-top:1px solid #ebeef5;border-bottom:1px solid #ebeef5}.el-collapse-item.is-disabled .el-collapse-item__header{color:#bbb;cursor:not-allowed}.el-collapse-item__header{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;height:48px;line-height:48px;background-color:#fff;color:#303133;cursor:pointer;border-bottom:1px solid #ebeef5;font-size:13px;font-weight:500;transition:border-bottom-color .3s;outline:0}.el-collapse-item__arrow{margin:0 8px 0 auto;transition:transform .3s;font-weight:300}.el-collapse-item__arrow.is-active{transform:rotate(90deg)}.el-collapse-item__header.focusing:focus:not(:hover){color:#409eff}.el-collapse-item__header.is-active{border-bottom-color:transparent}.el-collapse-item__wrap{will-change:height;background-color:#fff;overflow:hidden;box-sizing:border-box;border-bottom:1px solid #ebeef5}.el-cascader__search-input,.el-cascader__tags,.el-tag{-webkit-box-sizing:border-box}.el-collapse-item__content{padding-bottom:25px;font-size:13px;color:#303133;line-height:1.769230769230769}.el-collapse-item:last-child{margin-bottom:-1px}.el-popper .popper__arrow,.el-popper .popper__arrow:after{position:absolute;display:block;width:0;height:0;border-color:transparent;border-style:solid}.el-cascader,.el-tag{display:inline-block}.el-popper .popper__arrow{border-width:6px;filter:drop-shadow(0 2px 12px rgba(0,0,0,.03))}.el-popper .popper__arrow:after{content:" ";border-width:6px}.el-popper[x-placement^=top]{margin-bottom:12px}.el-popper[x-placement^=top] .popper__arrow{bottom:-6px;left:50%;margin-right:3px;border-top-color:#ebeef5;border-bottom-width:0}.el-popper[x-placement^=top] .popper__arrow:after{bottom:1px;margin-left:-6px;border-top-color:#fff;border-bottom-width:0}.el-popper[x-placement^=bottom]{margin-top:12px}.el-popper[x-placement^=bottom] .popper__arrow{top:-6px;left:50%;margin-right:3px;border-top-width:0;border-bottom-color:#ebeef5}.el-popper[x-placement^=bottom] .popper__arrow:after{top:1px;margin-left:-6px;border-top-width:0;border-bottom-color:#fff}.el-popper[x-placement^=right]{margin-left:12px}.el-popper[x-placement^=right] .popper__arrow{top:50%;left:-6px;margin-bottom:3px;border-right-color:#ebeef5;border-left-width:0}.el-popper[x-placement^=right] .popper__arrow:after{bottom:-6px;left:1px;border-right-color:#fff;border-left-width:0}.el-popper[x-placement^=left]{margin-right:12px}.el-popper[x-placement^=left] .popper__arrow{top:50%;right:-6px;margin-bottom:3px;border-right-width:0;border-left-color:#ebeef5}.el-popper[x-placement^=left] .popper__arrow:after{right:1px;bottom:-6px;margin-left:-6px;border-right-width:0;border-left-color:#fff}.el-tag{background-color:#ecf5ff;border:1px solid #d9ecff;height:32px;padding:0 10px;line-height:30px;font-size:12px;color:#409eff;border-radius:4px;box-sizing:border-box;white-space:nowrap}.el-tag.is-hit{border-color:#409eff}.el-tag .el-tag__close{color:#409eff}.el-tag .el-tag__close:hover{color:#fff;background-color:#409eff}.el-tag.el-tag--info{background-color:#f4f4f5;border-color:#e9e9eb;color:#909399}.el-tag.el-tag--info.is-hit{border-color:#909399}.el-tag.el-tag--info .el-tag__close{color:#909399}.el-tag.el-tag--info .el-tag__close:hover{color:#fff;background-color:#909399}.el-tag.el-tag--success{background-color:#f0f9eb;border-color:#e1f3d8;color:#67c23a}.el-tag.el-tag--success.is-hit{border-color:#67c23a}.el-tag.el-tag--success .el-tag__close{color:#67c23a}.el-tag.el-tag--success .el-tag__close:hover{color:#fff;background-color:#67c23a}.el-tag.el-tag--warning{background-color:#fdf6ec;border-color:#faecd8;color:#e6a23c}.el-tag.el-tag--warning.is-hit{border-color:#e6a23c}.el-tag.el-tag--warning .el-tag__close{color:#e6a23c}.el-tag.el-tag--warning .el-tag__close:hover{color:#fff;background-color:#e6a23c}.el-tag.el-tag--danger{background-color:#fef0f0;border-color:#fde2e2;color:#f56c6c}.el-tag.el-tag--danger.is-hit{border-color:#f56c6c}.el-tag.el-tag--danger .el-tag__close{color:#f56c6c}.el-tag.el-tag--danger .el-tag__close:hover{color:#fff;background-color:#f56c6c}.el-tag .el-icon-close{border-radius:50%;text-align:center;position:relative;cursor:pointer;font-size:12px;height:16px;width:16px;line-height:16px;vertical-align:middle;top:-1px;right:-5px}.el-tag .el-icon-close:before{display:block}.el-tag--dark{background-color:#409eff;color:#fff}.el-tag--dark,.el-tag--dark.is-hit{border-color:#409eff}.el-tag--dark .el-tag__close{color:#fff}.el-tag--dark .el-tag__close:hover{color:#fff;background-color:#66b1ff}.el-tag--dark.el-tag--info{background-color:#909399;border-color:#909399;color:#fff}.el-tag--dark.el-tag--info.is-hit{border-color:#909399}.el-tag--dark.el-tag--info .el-tag__close{color:#fff}.el-tag--dark.el-tag--info .el-tag__close:hover{color:#fff;background-color:#a6a9ad}.el-tag--dark.el-tag--success{background-color:#67c23a;border-color:#67c23a;color:#fff}.el-tag--dark.el-tag--success.is-hit{border-color:#67c23a}.el-tag--dark.el-tag--success .el-tag__close{color:#fff}.el-tag--dark.el-tag--success .el-tag__close:hover{color:#fff;background-color:#85ce61}.el-tag--dark.el-tag--warning{background-color:#e6a23c;border-color:#e6a23c;color:#fff}.el-tag--dark.el-tag--warning.is-hit{border-color:#e6a23c}.el-tag--dark.el-tag--warning .el-tag__close{color:#fff}.el-tag--dark.el-tag--warning .el-tag__close:hover{color:#fff;background-color:#ebb563}.el-tag--dark.el-tag--danger{background-color:#f56c6c;border-color:#f56c6c;color:#fff}.el-tag--dark.el-tag--danger.is-hit{border-color:#f56c6c}.el-tag--dark.el-tag--danger .el-tag__close{color:#fff}.el-tag--dark.el-tag--danger .el-tag__close:hover{color:#fff;background-color:#f78989}.el-tag--plain{background-color:#fff;border-color:#b3d8ff;color:#409eff}.el-tag--plain.is-hit{border-color:#409eff}.el-tag--plain .el-tag__close{color:#409eff}.el-tag--plain .el-tag__close:hover{color:#fff;background-color:#409eff}.el-tag--plain.el-tag--info{background-color:#fff;border-color:#d3d4d6;color:#909399}.el-tag--plain.el-tag--info.is-hit{border-color:#909399}.el-tag--plain.el-tag--info .el-tag__close{color:#909399}.el-tag--plain.el-tag--info .el-tag__close:hover{color:#fff;background-color:#909399}.el-tag--plain.el-tag--success{background-color:#fff;border-color:#c2e7b0;color:#67c23a}.el-tag--plain.el-tag--success.is-hit{border-color:#67c23a}.el-tag--plain.el-tag--success .el-tag__close{color:#67c23a}.el-tag--plain.el-tag--success .el-tag__close:hover{color:#fff;background-color:#67c23a}.el-tag--plain.el-tag--warning{background-color:#fff;border-color:#f5dab1;color:#e6a23c}.el-tag--plain.el-tag--warning.is-hit{border-color:#e6a23c}.el-tag--plain.el-tag--warning .el-tag__close{color:#e6a23c}.el-tag--plain.el-tag--warning .el-tag__close:hover{color:#fff;background-color:#e6a23c}.el-tag--plain.el-tag--danger{background-color:#fff;border-color:#fbc4c4;color:#f56c6c}.el-tag--plain.el-tag--danger.is-hit{border-color:#f56c6c}.el-tag--plain.el-tag--danger .el-tag__close{color:#f56c6c}.el-tag--plain.el-tag--danger .el-tag__close:hover{color:#fff;background-color:#f56c6c}.el-tag--medium{height:28px;line-height:26px}.el-tag--medium .el-icon-close{transform:scale(.8)}.el-tag--small{height:24px;padding:0 8px;line-height:22px}.el-tag--small .el-icon-close{transform:scale(.8)}.el-tag--mini{height:20px;padding:0 5px;line-height:19px}.el-tag--mini .el-icon-close{margin-left:-3px;transform:scale(.7)}.el-cascader{position:relative;font-size:14px;line-height:40px}.el-cascader:not(.is-disabled):hover .el-input__inner{cursor:pointer;border-color:#c0c4cc}.el-cascader .el-input .el-input__inner:focus,.el-cascader .el-input.is-focus .el-input__inner{border-color:#409eff}.el-cascader .el-input{cursor:pointer}.el-cascader .el-input .el-input__inner{text-overflow:ellipsis}.el-cascader .el-input .el-icon-arrow-down{transition:transform .3s;font-size:14px}.el-cascader .el-input .el-icon-arrow-down.is-reverse{transform:rotate(180deg)}.el-cascader .el-input .el-icon-circle-close:hover{color:#909399}.el-cascader--medium{font-size:14px;line-height:36px}.el-cascader--small{font-size:13px;line-height:32px}.el-cascader--mini{font-size:12px;line-height:28px}.el-cascader.is-disabled .el-cascader__label{z-index:2;color:#c0c4cc}.el-cascader__dropdown{margin:5px 0;font-size:14px;background:#fff;border:1px solid #e4e7ed;border-radius:4px;box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.el-cascader__tags{position:absolute;left:0;right:30px;top:50%;transform:translateY(-50%);display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;line-height:normal;text-align:left;box-sizing:border-box}.el-cascader__tags .el-tag{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;max-width:100%;margin:2px 0 2px 6px;text-overflow:ellipsis;background:#f0f2f5}.el-cascader__tags .el-tag:not(.is-hit){border-color:transparent}.el-cascader__tags .el-tag>span{-ms-flex:1;flex:1;overflow:hidden;text-overflow:ellipsis}.el-cascader__tags .el-tag .el-icon-close{-ms-flex:none;flex:none;background-color:#c0c4cc;color:#fff}.el-cascader__tags .el-tag .el-icon-close:hover{background-color:#909399}.el-cascader__suggestion-panel{border-radius:4px}.el-cascader__suggestion-list{max-height:204px;margin:0;padding:6px 0;font-size:14px;color:#606266;text-align:center}.el-cascader__suggestion-item{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;height:34px;padding:0 15px;text-align:left;outline:0;cursor:pointer}.el-cascader__suggestion-item:focus,.el-cascader__suggestion-item:hover{background:#f5f7fa}.el-cascader__suggestion-item.is-checked{color:#409eff;font-weight:700}.el-cascader__suggestion-item>span{margin-right:10px}.el-cascader__empty-text{margin:10px 0;color:#c0c4cc}.el-cascader__search-input{-ms-flex:1;flex:1;height:24px;min-width:60px;margin:2px 0 2px 15px;padding:0;color:#606266;border:none;outline:0;box-sizing:border-box}.el-cascader__search-input::-webkit-input-placeholder{color:#c0c4cc}.el-cascader__search-input:-ms-input-placeholder,.el-cascader__search-input::-ms-input-placeholder{color:#c0c4cc}.el-cascader__search-input::placeholder{color:#c0c4cc}.el-color-predefine{display:-ms-flexbox;display:flex;font-size:12px;margin-top:8px;width:280px}.el-color-predefine__colors{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-wrap:wrap;flex-wrap:wrap}.el-color-predefine__color-selector{margin:0 0 8px 8px;width:20px;height:20px;border-radius:4px;cursor:pointer}.el-color-predefine__color-selector:nth-child(10n+1){margin-left:0}.el-color-predefine__color-selector.selected{box-shadow:0 0 3px 2px #409eff}.el-color-predefine__color-selector>div{display:-ms-flexbox;display:flex;height:100%;border-radius:3px}.el-color-predefine__color-selector.is-alpha{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==)}.el-color-hue-slider{position:relative;box-sizing:border-box;width:280px;height:12px;background-color:red;padding:0 2px}.el-color-hue-slider__bar{position:relative;background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red);height:100%}.el-color-hue-slider__thumb{position:absolute;cursor:pointer;box-sizing:border-box;left:0;top:0;width:4px;height:100%;border-radius:1px;background:#fff;border:1px solid #f0f0f0;box-shadow:0 0 2px rgba(0,0,0,.6);z-index:1}.el-color-hue-slider.is-vertical{width:12px;height:180px;padding:2px 0}.el-color-hue-slider.is-vertical .el-color-hue-slider__bar{background:linear-gradient(180deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.el-color-hue-slider.is-vertical .el-color-hue-slider__thumb{left:0;top:0;width:100%;height:4px}.el-color-svpanel{position:relative;width:280px;height:180px}.el-color-svpanel__black,.el-color-svpanel__white{position:absolute;top:0;left:0;right:0;bottom:0}.el-color-svpanel__white{background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.el-color-svpanel__black{background:linear-gradient(0deg,#000,transparent)}.el-color-svpanel__cursor{position:absolute}.el-color-svpanel__cursor>div{cursor:head;width:4px;height:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);border-radius:50%;transform:translate(-2px,-2px)}.el-color-alpha-slider{position:relative;box-sizing:border-box;width:280px;height:12px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==)}.el-color-alpha-slider__bar{position:relative;background:linear-gradient(90deg,hsla(0,0%,100%,0) 0,#fff);height:100%}.el-color-alpha-slider__thumb{position:absolute;cursor:pointer;box-sizing:border-box;left:0;top:0;width:4px;height:100%;border-radius:1px;background:#fff;border:1px solid #f0f0f0;box-shadow:0 0 2px rgba(0,0,0,.6);z-index:1}.el-color-alpha-slider.is-vertical{width:20px;height:180px}.el-color-alpha-slider.is-vertical .el-color-alpha-slider__bar{background:linear-gradient(180deg,hsla(0,0%,100%,0) 0,#fff)}.el-color-alpha-slider.is-vertical .el-color-alpha-slider__thumb{left:0;top:0;width:100%;height:4px}.el-color-dropdown{width:300px}.el-color-dropdown__main-wrapper{margin-bottom:6px}.el-color-dropdown__main-wrapper:after{display:table;clear:both}.el-color-dropdown__btns{margin-top:6px;text-align:right}.el-color-dropdown__value{float:left;line-height:26px;font-size:12px;color:#000;width:160px}.el-color-dropdown__btn{border:1px solid #dcdcdc;color:#333;line-height:24px;border-radius:2px;padding:0 20px;cursor:pointer;background-color:transparent;outline:0;font-size:12px}.el-color-dropdown__btn[disabled]{color:#ccc;cursor:not-allowed}.el-color-dropdown__btn:hover{color:#409eff;border-color:#409eff}.el-color-dropdown__link-btn{cursor:pointer;color:#409eff;text-decoration:none;padding:15px;font-size:12px}.el-color-dropdown__link-btn:hover{color:tint(#409eff,20%)}.el-color-picker{display:inline-block;position:relative;line-height:normal;height:40px}.el-color-picker.is-disabled .el-color-picker__trigger{cursor:not-allowed}.el-color-picker--medium{height:36px}.el-color-picker--medium .el-color-picker__trigger{height:36px;width:36px}.el-color-picker--medium .el-color-picker__mask{height:34px;width:34px}.el-color-picker--small{height:32px}.el-color-picker--small .el-color-picker__trigger{height:32px;width:32px}.el-color-picker--small .el-color-picker__mask{height:30px;width:30px}.el-color-picker--small .el-color-picker__empty,.el-color-picker--small .el-color-picker__icon{transform:translate3d(-50%,-50%,0) scale(.8)}.el-color-picker--mini{height:28px}.el-color-picker--mini .el-color-picker__trigger{height:28px;width:28px}.el-color-picker--mini .el-color-picker__mask{height:26px;width:26px}.el-color-picker--mini .el-color-picker__empty,.el-color-picker--mini .el-color-picker__icon{transform:translate3d(-50%,-50%,0) scale(.8)}.el-color-picker__mask{height:38px;width:38px;border-radius:4px;position:absolute;top:1px;left:1px;z-index:1;cursor:not-allowed;background-color:hsla(0,0%,100%,.7)}.el-color-picker__trigger{display:inline-block;box-sizing:border-box;height:40px;width:40px;padding:4px;border:1px solid #e6e6e6;border-radius:4px;font-size:0;position:relative;cursor:pointer}.el-color-picker__color{position:relative;display:block;box-sizing:border-box;border:1px solid #999;border-radius:2px;width:100%;height:100%;text-align:center}.el-color-picker__icon,.el-input,.el-textarea{display:inline-block;width:100%}.el-color-picker__color.is-alpha{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==)}.el-color-picker__color-inner{position:absolute;left:0;top:0;right:0;bottom:0}.el-color-picker__empty{color:#999}.el-color-picker__empty,.el-color-picker__icon{font-size:12px;position:absolute;top:50%;left:50%;transform:translate3d(-50%,-50%,0)}.el-color-picker__icon{color:#fff;text-align:center}.el-input__prefix,.el-input__suffix{position:absolute;top:0;text-align:center}.el-color-picker__panel{position:absolute;z-index:10;padding:6px;box-sizing:content-box;background-color:#fff;border:1px solid #ebeef5;border-radius:4px;box-shadow:0 2px 12px 0 rgba(0,0,0,.1)}.el-input__inner,.el-textarea__inner,.el-transfer-panel{-webkit-box-sizing:border-box}.el-textarea{position:relative;vertical-align:bottom;font-size:14px}.el-textarea__inner{display:block;resize:vertical;padding:5px 15px;line-height:1.5;box-sizing:border-box;width:100%;font-size:inherit;color:#606266;background-color:#fff;background-image:none;border:1px solid #dcdfe6;border-radius:4px;transition:border-color .2s cubic-bezier(.645,.045,.355,1)}.el-textarea__inner::-webkit-input-placeholder{color:#c0c4cc}.el-textarea__inner:-ms-input-placeholder,.el-textarea__inner::-ms-input-placeholder{color:#c0c4cc}.el-textarea__inner::placeholder{color:#c0c4cc}.el-textarea__inner:hover{border-color:#c0c4cc}.el-textarea__inner:focus{outline:0;border-color:#409eff}.el-textarea .el-input__count{color:#909399;background:#fff;position:absolute;font-size:12px;bottom:5px;right:10px}.el-textarea.is-disabled .el-textarea__inner{background-color:#f5f7fa;border-color:#e4e7ed;color:#c0c4cc;cursor:not-allowed}.el-textarea.is-disabled .el-textarea__inner::-webkit-input-placeholder{color:#c0c4cc}.el-textarea.is-disabled .el-textarea__inner:-ms-input-placeholder,.el-textarea.is-disabled .el-textarea__inner::-ms-input-placeholder{color:#c0c4cc}.el-textarea.is-disabled .el-textarea__inner::placeholder{color:#c0c4cc}.el-textarea.is-exceed .el-textarea__inner{border-color:#f56c6c}.el-textarea.is-exceed .el-input__count{color:#f56c6c}.el-input{position:relative;font-size:14px}.el-input::-webkit-scrollbar{z-index:11;width:6px}.el-input::-webkit-scrollbar:horizontal{height:6px}.el-input::-webkit-scrollbar-thumb{border-radius:5px;width:6px;background:#b4bccc}.el-input::-webkit-scrollbar-corner,.el-input::-webkit-scrollbar-track{background:#fff}.el-input::-webkit-scrollbar-track-piece{background:#fff;width:6px}.el-input .el-input__clear{color:#c0c4cc;font-size:14px;cursor:pointer;transition:color .2s cubic-bezier(.645,.045,.355,1)}.el-input .el-input__clear:hover{color:#909399}.el-input .el-input__count{height:100%;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;color:#909399;font-size:12px}.el-input-group__append .el-button,.el-input-group__append .el-input,.el-input-group__prepend .el-button,.el-input-group__prepend .el-input,.el-input__inner{font-size:inherit}.el-input .el-input__count .el-input__count-inner{background:#fff;line-height:normal;display:inline-block;padding:0 5px}.el-input__inner{-webkit-appearance:none;background-color:#fff;background-image:none;border-radius:4px;border:1px solid #dcdfe6;box-sizing:border-box;color:#606266;display:inline-block;height:40px;line-height:40px;outline:0;padding:0 15px;transition:border-color .2s cubic-bezier(.645,.045,.355,1);width:100%}.el-input__inner::-ms-reveal{display:none}.el-input__inner::-webkit-input-placeholder{color:#c0c4cc}.el-input__inner:-ms-input-placeholder,.el-input__inner::-ms-input-placeholder{color:#c0c4cc}.el-input__inner::placeholder{color:#c0c4cc}.el-input__inner:hover{border-color:#c0c4cc}.el-input.is-active .el-input__inner,.el-input__inner:focus{border-color:#409eff;outline:0}.el-input__suffix{height:100%;right:5px;transition:all .3s;pointer-events:none}.el-input__suffix-inner{pointer-events:all}.el-input__prefix{height:100%;left:5px;transition:all .3s}.el-input__icon{height:100%;width:25px;text-align:center;transition:all .3s;line-height:40px}.el-input__icon:after{content:"";height:100%;width:0;display:inline-block;vertical-align:middle}.el-input__validateIcon{pointer-events:none}.el-input.is-disabled .el-input__inner{background-color:#f5f7fa;border-color:#e4e7ed;color:#c0c4cc;cursor:not-allowed}.el-input.is-disabled .el-input__inner::-webkit-input-placeholder{color:#c0c4cc}.el-input.is-disabled .el-input__inner:-ms-input-placeholder,.el-input.is-disabled .el-input__inner::-ms-input-placeholder{color:#c0c4cc}.el-input.is-disabled .el-input__inner::placeholder{color:#c0c4cc}.el-input.is-disabled .el-input__icon{cursor:not-allowed}.el-image-viewer__btn,.el-image__preview,.el-link,.el-transfer-panel__filter .el-icon-circle-close{cursor:pointer}.el-input.is-exceed .el-input__inner{border-color:#f56c6c}.el-input.is-exceed .el-input__suffix .el-input__count{color:#f56c6c}.el-input--suffix .el-input__inner{padding-right:30px}.el-input--prefix .el-input__inner{padding-left:30px}.el-input--medium{font-size:14px}.el-input--medium .el-input__inner{height:36px;line-height:36px}.el-input--medium .el-input__icon{line-height:36px}.el-input--small{font-size:13px}.el-input--small .el-input__inner{height:32px;line-height:32px}.el-input--small .el-input__icon{line-height:32px}.el-input--mini{font-size:12px}.el-input--mini .el-input__inner{height:28px;line-height:28px}.el-input--mini .el-input__icon{line-height:28px}.el-input-group{line-height:normal;display:inline-table;width:100%;border-collapse:separate;border-spacing:0}.el-input-group>.el-input__inner{vertical-align:middle;display:table-cell}.el-input-group__append,.el-input-group__prepend{background-color:#f5f7fa;color:#909399;vertical-align:middle;display:table-cell;position:relative;border:1px solid #dcdfe6;border-radius:4px;padding:0 20px;width:1px;white-space:nowrap}.el-input-group--append .el-input__inner,.el-input-group__prepend{border-top-right-radius:0;border-bottom-right-radius:0}.el-input-group__append:focus,.el-input-group__prepend:focus{outline:0}.el-input-group__append .el-button,.el-input-group__append .el-select,.el-input-group__prepend .el-button,.el-input-group__prepend .el-select{display:inline-block;margin:-10px -20px}.el-input-group__append button.el-button,.el-input-group__append div.el-select .el-input__inner,.el-input-group__append div.el-select:hover .el-input__inner,.el-input-group__prepend button.el-button,.el-input-group__prepend div.el-select .el-input__inner,.el-input-group__prepend div.el-select:hover .el-input__inner{border-color:transparent;background-color:transparent;color:inherit;border-top:0;border-bottom:0}.el-input-group__prepend{border-right:0}.el-input-group__append{border-left:0;border-top-left-radius:0;border-bottom-left-radius:0}.el-input-group--append .el-select .el-input.is-focus .el-input__inner,.el-input-group--prepend .el-select .el-input.is-focus .el-input__inner{border-color:transparent}.el-input-group--prepend .el-input__inner{border-top-left-radius:0;border-bottom-left-radius:0}.el-input__inner::-ms-clear{display:none;width:0;height:0}.el-transfer{font-size:14px}.el-transfer__buttons{display:inline-block;vertical-align:middle;padding:0 30px}.el-transfer__button{display:block;margin:0 auto;padding:10px;border-radius:50%;color:#fff;background-color:#409eff;font-size:0}.el-button-group>.el-button+.el-button,.el-transfer-panel__item+.el-transfer-panel__item,.el-transfer__button [class*=el-icon-]+span{margin-left:0}.el-divider__text,.el-image__error,.el-link,.el-timeline,.el-transfer__button i,.el-transfer__button span{font-size:14px}.el-transfer__button.is-with-texts{border-radius:4px}.el-transfer__button.is-disabled,.el-transfer__button.is-disabled:hover{border:1px solid #dcdfe6;background-color:#f5f7fa;color:#c0c4cc}.el-transfer__button:first-child{margin-bottom:10px}.el-transfer__button:nth-child(2){margin:0}.el-transfer-panel{border:1px solid #ebeef5;border-radius:4px;overflow:hidden;background:#fff;display:inline-block;vertical-align:middle;width:200px;max-height:100%;box-sizing:border-box;position:relative}.el-transfer-panel__body{height:246px}.el-transfer-panel__body.is-with-footer{padding-bottom:40px}.el-transfer-panel__list{margin:0;padding:6px 0;list-style:none;height:246px;overflow:auto;box-sizing:border-box}.el-transfer-panel__list.is-filterable{height:194px;padding-top:0}.el-transfer-panel__item{height:30px;line-height:30px;padding-left:15px;display:block!important}.el-transfer-panel__item.el-checkbox{color:#606266}.el-transfer-panel__item:hover{color:#409eff}.el-transfer-panel__item.el-checkbox .el-checkbox__label{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block;box-sizing:border-box;padding-left:24px;line-height:30px}.el-transfer-panel__item .el-checkbox__input{position:absolute;top:8px}.el-transfer-panel__filter{text-align:center;margin:15px;box-sizing:border-box;display:block;width:auto}.el-transfer-panel__filter .el-input__inner{height:32px;width:100%;font-size:12px;display:inline-block;box-sizing:border-box;border-radius:16px;padding-right:10px;padding-left:30px}.el-transfer-panel__filter .el-input__icon{margin-left:5px}.el-transfer-panel .el-transfer-panel__header{height:40px;line-height:40px;background:#f5f7fa;margin:0;padding-left:15px;border-bottom:1px solid #ebeef5;box-sizing:border-box;color:#000}.el-container,.el-header{-webkit-box-sizing:border-box}.el-transfer-panel .el-transfer-panel__header .el-checkbox{display:block;line-height:40px}.el-transfer-panel .el-transfer-panel__header .el-checkbox .el-checkbox__label{font-size:16px;color:#303133;font-weight:400}.el-transfer-panel .el-transfer-panel__header .el-checkbox .el-checkbox__label span{position:absolute;right:15px;color:#909399;font-size:12px;font-weight:400}.el-transfer-panel .el-transfer-panel__footer{height:40px;background:#fff;margin:0;padding:0;border-top:1px solid #ebeef5;position:absolute;bottom:0;left:0;width:100%;z-index:1}.el-transfer-panel .el-transfer-panel__footer:after{display:inline-block;height:100%;vertical-align:middle}.el-container,.el-timeline-item__node{display:-ms-flexbox}.el-transfer-panel .el-transfer-panel__footer .el-checkbox{padding-left:20px;color:#606266}.el-transfer-panel .el-transfer-panel__empty{margin:0;height:30px;line-height:30px;padding:6px 15px 0;color:#909399;text-align:center}.el-transfer-panel .el-checkbox__label{padding-left:8px}.el-transfer-panel .el-checkbox__inner{height:14px;width:14px;border-radius:3px}.el-transfer-panel .el-checkbox__inner:after{height:6px;width:3px;left:4px}.el-container{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex:1;flex:1;-ms-flex-preferred-size:auto;flex-basis:auto;box-sizing:border-box;min-width:0}.el-container.is-vertical{-ms-flex-direction:column;flex-direction:column}.el-header{padding:0 20px}.el-aside,.el-header{box-sizing:border-box;-ms-flex-negative:0;flex-shrink:0}.el-aside,.el-main{overflow:auto}.el-main{display:block;-ms-flex:1;flex:1;-ms-flex-preferred-size:auto;flex-basis:auto}.el-footer,.el-main{box-sizing:border-box}.el-footer{padding:0 20px;-ms-flex-negative:0;flex-shrink:0}.el-timeline{margin:0;list-style:none}.el-timeline .el-timeline-item:last-child .el-timeline-item__tail{display:none}.el-timeline-item{position:relative;padding-bottom:20px}.el-timeline-item__wrapper{position:relative;padding-left:28px;top:-3px}.el-timeline-item__tail{position:absolute;left:4px;height:100%;border-left:2px solid #e4e7ed}.el-timeline-item__icon{color:#fff;font-size:13px}.el-timeline-item__node{position:absolute;background-color:#e4e7ed;border-radius:50%;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}.el-image__error,.el-timeline-item__dot{display:-ms-flexbox}.el-timeline-item__node--normal{left:-1px;width:12px;height:12px}.el-timeline-item__node--large{left:-2px;width:14px;height:14px}.el-timeline-item__node--primary{background-color:#409eff}.el-timeline-item__node--success{background-color:#67c23a}.el-timeline-item__node--warning{background-color:#e6a23c}.el-timeline-item__node--danger{background-color:#f56c6c}.el-timeline-item__node--info{background-color:#909399}.el-timeline-item__dot{position:absolute;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}.el-timeline-item__content{color:#303133}.el-timeline-item__timestamp{color:#909399;line-height:1;font-size:13px}.el-timeline-item__timestamp.is-top{margin-bottom:8px;padding-top:4px}.el-timeline-item__timestamp.is-bottom{margin-top:8px}.el-link{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;vertical-align:middle;position:relative;text-decoration:none;outline:0;padding:0;font-weight:500}.el-link.is-underline:hover:after{position:absolute;left:0;right:0;height:0;bottom:0;border-bottom:1px solid #409eff}.el-link.el-link--default:after,.el-link.el-link--primary.is-underline:hover:after,.el-link.el-link--primary:after{border-color:#409eff}.el-link.is-disabled{cursor:not-allowed}.el-link [class*=el-icon-]+span{margin-left:5px}.el-link.el-link--default{color:#606266}.el-link.el-link--default:hover{color:#409eff}.el-link.el-link--default.is-disabled{color:#c0c4cc}.el-link.el-link--primary{color:#409eff}.el-link.el-link--primary:hover{color:#66b1ff}.el-link.el-link--primary.is-disabled{color:#a0cfff}.el-link.el-link--danger.is-underline:hover:after,.el-link.el-link--danger:after{border-color:#f56c6c}.el-link.el-link--danger{color:#f56c6c}.el-link.el-link--danger:hover{color:#f78989}.el-link.el-link--danger.is-disabled{color:#fab6b6}.el-link.el-link--success.is-underline:hover:after,.el-link.el-link--success:after{border-color:#67c23a}.el-link.el-link--success{color:#67c23a}.el-link.el-link--success:hover{color:#85ce61}.el-link.el-link--success.is-disabled{color:#b3e19d}.el-link.el-link--warning.is-underline:hover:after,.el-link.el-link--warning:after{border-color:#e6a23c}.el-link.el-link--warning{color:#e6a23c}.el-link.el-link--warning:hover{color:#ebb563}.el-link.el-link--warning.is-disabled{color:#f3d19e}.el-link.el-link--info.is-underline:hover:after,.el-link.el-link--info:after{border-color:#909399}.el-link.el-link--info{color:#909399}.el-link.el-link--info:hover{color:#a6a9ad}.el-link.el-link--info.is-disabled{color:#c8c9cc}.el-divider{background-color:#dcdfe6;position:relative}.el-divider--horizontal{display:block;height:1px;width:100%;margin:24px 0}.el-divider--vertical{display:inline-block;width:1px;height:1em;margin:0 8px;vertical-align:middle;position:relative}.el-divider__text{position:absolute;background-color:#fff;padding:0 20px;font-weight:500;color:#303133}.el-image__error,.el-image__placeholder{background:#f5f7fa}.el-divider__text.is-left{left:20px;transform:translateY(-50%)}.el-divider__text.is-center{left:50%;transform:translateX(-50%) translateY(-50%)}.el-divider__text.is-right{right:20px;transform:translateY(-50%)}.el-image__error,.el-image__inner,.el-image__placeholder{width:100%;height:100%}.el-image{position:relative;display:inline-block;overflow:hidden}.el-image__inner{vertical-align:top}.el-image__inner--center{position:relative;top:50%;left:50%;transform:translate(-50%,-50%);display:block}.el-image__error{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;color:#c0c4cc;vertical-align:middle}.el-image-viewer__wrapper{position:fixed;top:0;right:0;bottom:0;left:0}.el-image-viewer__btn{position:absolute;z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;border-radius:50%;opacity:.8;box-sizing:border-box;user-select:none}.el-button,.el-checkbox,.el-checkbox-button__inner,.el-empty__image img,.el-image-viewer__btn,.el-radio{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.el-image-viewer__close{top:40px;right:40px;width:40px;height:40px;font-size:24px;color:#fff;background-color:#606266}.el-image-viewer__canvas{width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}.el-image-viewer__actions{left:50%;bottom:30px;transform:translateX(-50%);width:282px;height:44px;padding:0 23px;background-color:#606266;border-color:#fff;border-radius:22px}.el-image-viewer__actions__inner{width:100%;height:100%;text-align:justify;cursor:default;font-size:23px;color:#fff;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around}.el-image-viewer__next,.el-image-viewer__prev{width:44px;height:44px;font-size:24px;color:#fff;background-color:#606266;border-color:#fff;top:50%}.el-image-viewer__prev{transform:translateY(-50%);left:40px}.el-image-viewer__next{transform:translateY(-50%);right:40px;text-indent:2px}.el-image-viewer__mask{position:absolute;width:100%;height:100%;top:0;left:0;opacity:.5;background:#000}.viewer-fade-enter-active{animation:viewer-fade-in .3s}.viewer-fade-leave-active{animation:viewer-fade-out .3s}@keyframes viewer-fade-in{0%{transform:translate3d(0,-20px,0);opacity:0}to{transform:translateZ(0);opacity:1}}@keyframes viewer-fade-out{0%{transform:translateZ(0);opacity:1}to{transform:translate3d(0,-20px,0);opacity:0}}.el-button{display:inline-block;line-height:1;white-space:nowrap;cursor:pointer;background:#fff;border:1px solid #dcdfe6;color:#606266;-webkit-appearance:none;text-align:center;box-sizing:border-box;outline:0;margin:0;transition:.1s;font-weight:500;padding:12px 20px;font-size:14px;border-radius:4px}.el-button+.el-button,.el-checkbox.is-bordered+.el-checkbox.is-bordered{margin-left:10px}.el-button:focus,.el-button:hover{color:#409eff;border-color:#c6e2ff;background-color:#ecf5ff}.el-button:active{color:#3a8ee6;border-color:#3a8ee6;outline:0}.el-button::-moz-focus-inner{border:0}.el-button [class*=el-icon-]+span{margin-left:5px}.el-button.is-plain:focus,.el-button.is-plain:hover{background:#fff;border-color:#409eff;color:#409eff}.el-button.is-active,.el-button.is-plain:active{color:#3a8ee6;border-color:#3a8ee6}.el-button.is-plain:active{background:#fff;outline:0}.el-button.is-disabled,.el-button.is-disabled:focus,.el-button.is-disabled:hover{color:#c0c4cc;cursor:not-allowed;background-image:none;background-color:#fff;border-color:#ebeef5}.el-button.is-disabled.el-button--text{background-color:transparent}.el-button.is-disabled.is-plain,.el-button.is-disabled.is-plain:focus,.el-button.is-disabled.is-plain:hover{background-color:#fff;border-color:#ebeef5;color:#c0c4cc}.el-button.is-loading{position:relative;pointer-events:none}.el-button.is-loading:before{pointer-events:none;content:"";position:absolute;left:-1px;top:-1px;right:-1px;bottom:-1px;border-radius:inherit;background-color:hsla(0,0%,100%,.35)}.el-button.is-round{border-radius:20px;padding:12px 23px}.el-button.is-circle{border-radius:50%;padding:12px}.el-button--primary{color:#fff;background-color:#409eff;border-color:#409eff}.el-button--primary:focus,.el-button--primary:hover{background:#66b1ff;border-color:#66b1ff;color:#fff}.el-button--primary.is-active,.el-button--primary:active{background:#3a8ee6;border-color:#3a8ee6;color:#fff}.el-button--primary:active{outline:0}.el-button--primary.is-disabled,.el-button--primary.is-disabled:active,.el-button--primary.is-disabled:focus,.el-button--primary.is-disabled:hover{color:#fff;background-color:#a0cfff;border-color:#a0cfff}.el-button--primary.is-plain{color:#409eff;background:#ecf5ff;border-color:#b3d8ff}.el-button--primary.is-plain:focus,.el-button--primary.is-plain:hover{background:#409eff;border-color:#409eff;color:#fff}.el-button--primary.is-plain:active{background:#3a8ee6;border-color:#3a8ee6;color:#fff;outline:0}.el-button--primary.is-plain.is-disabled,.el-button--primary.is-plain.is-disabled:active,.el-button--primary.is-plain.is-disabled:focus,.el-button--primary.is-plain.is-disabled:hover{color:#8cc5ff;background-color:#ecf5ff;border-color:#d9ecff}.el-button--success{color:#fff;background-color:#67c23a;border-color:#67c23a}.el-button--success:focus,.el-button--success:hover{background:#85ce61;border-color:#85ce61;color:#fff}.el-button--success.is-active,.el-button--success:active{background:#5daf34;border-color:#5daf34;color:#fff}.el-button--success:active{outline:0}.el-button--success.is-disabled,.el-button--success.is-disabled:active,.el-button--success.is-disabled:focus,.el-button--success.is-disabled:hover{color:#fff;background-color:#b3e19d;border-color:#b3e19d}.el-button--success.is-plain{color:#67c23a;background:#f0f9eb;border-color:#c2e7b0}.el-button--success.is-plain:focus,.el-button--success.is-plain:hover{background:#67c23a;border-color:#67c23a;color:#fff}.el-button--success.is-plain:active{background:#5daf34;border-color:#5daf34;color:#fff;outline:0}.el-button--success.is-plain.is-disabled,.el-button--success.is-plain.is-disabled:active,.el-button--success.is-plain.is-disabled:focus,.el-button--success.is-plain.is-disabled:hover{color:#a4da89;background-color:#f0f9eb;border-color:#e1f3d8}.el-button--warning{color:#fff;background-color:#e6a23c;border-color:#e6a23c}.el-button--warning:focus,.el-button--warning:hover{background:#ebb563;border-color:#ebb563;color:#fff}.el-button--warning.is-active,.el-button--warning:active{background:#cf9236;border-color:#cf9236;color:#fff}.el-button--warning:active{outline:0}.el-button--warning.is-disabled,.el-button--warning.is-disabled:active,.el-button--warning.is-disabled:focus,.el-button--warning.is-disabled:hover{color:#fff;background-color:#f3d19e;border-color:#f3d19e}.el-button--warning.is-plain{color:#e6a23c;background:#fdf6ec;border-color:#f5dab1}.el-button--warning.is-plain:focus,.el-button--warning.is-plain:hover{background:#e6a23c;border-color:#e6a23c;color:#fff}.el-button--warning.is-plain:active{background:#cf9236;border-color:#cf9236;color:#fff;outline:0}.el-button--warning.is-plain.is-disabled,.el-button--warning.is-plain.is-disabled:active,.el-button--warning.is-plain.is-disabled:focus,.el-button--warning.is-plain.is-disabled:hover{color:#f0c78a;background-color:#fdf6ec;border-color:#faecd8}.el-button--danger{color:#fff;background-color:#f56c6c;border-color:#f56c6c}.el-button--danger:focus,.el-button--danger:hover{background:#f78989;border-color:#f78989;color:#fff}.el-button--danger.is-active,.el-button--danger:active{background:#dd6161;border-color:#dd6161;color:#fff}.el-button--danger:active{outline:0}.el-button--danger.is-disabled,.el-button--danger.is-disabled:active,.el-button--danger.is-disabled:focus,.el-button--danger.is-disabled:hover{color:#fff;background-color:#fab6b6;border-color:#fab6b6}.el-button--danger.is-plain{color:#f56c6c;background:#fef0f0;border-color:#fbc4c4}.el-button--danger.is-plain:focus,.el-button--danger.is-plain:hover{background:#f56c6c;border-color:#f56c6c;color:#fff}.el-button--danger.is-plain:active{background:#dd6161;border-color:#dd6161;color:#fff;outline:0}.el-button--danger.is-plain.is-disabled,.el-button--danger.is-plain.is-disabled:active,.el-button--danger.is-plain.is-disabled:focus,.el-button--danger.is-plain.is-disabled:hover{color:#f9a7a7;background-color:#fef0f0;border-color:#fde2e2}.el-button--info{color:#fff;background-color:#909399;border-color:#909399}.el-button--info:focus,.el-button--info:hover{background:#a6a9ad;border-color:#a6a9ad;color:#fff}.el-button--info.is-active,.el-button--info:active{background:#82848a;border-color:#82848a;color:#fff}.el-button--info:active{outline:0}.el-button--info.is-disabled,.el-button--info.is-disabled:active,.el-button--info.is-disabled:focus,.el-button--info.is-disabled:hover{color:#fff;background-color:#c8c9cc;border-color:#c8c9cc}.el-button--info.is-plain{color:#909399;background:#f4f4f5;border-color:#d3d4d6}.el-button--info.is-plain:focus,.el-button--info.is-plain:hover{background:#909399;border-color:#909399;color:#fff}.el-button--info.is-plain:active{background:#82848a;border-color:#82848a;color:#fff;outline:0}.el-button--info.is-plain.is-disabled,.el-button--info.is-plain.is-disabled:active,.el-button--info.is-plain.is-disabled:focus,.el-button--info.is-plain.is-disabled:hover{color:#bcbec2;background-color:#f4f4f5;border-color:#e9e9eb}.el-button--medium{padding:10px 20px;font-size:14px;border-radius:4px}.el-button--medium.is-round{padding:10px 20px}.el-button--medium.is-circle{padding:10px}.el-button--small{padding:9px 15px;font-size:12px;border-radius:3px}.el-button--small.is-round{padding:9px 15px}.el-button--small.is-circle{padding:9px}.el-button--mini,.el-button--mini.is-round{padding:7px 15px}.el-button--mini{font-size:12px;border-radius:3px}.el-button--mini.is-circle{padding:7px}.el-button--text{border-color:transparent;color:#409eff;background:0 0;padding-left:0;padding-right:0}.el-button--text:focus,.el-button--text:hover{color:#66b1ff;border-color:transparent;background-color:transparent}.el-button--text:active{color:#3a8ee6;background-color:transparent}.el-button--text.is-disabled,.el-button--text.is-disabled:focus,.el-button--text.is-disabled:hover,.el-button--text:active{border-color:transparent}.el-button-group .el-button--danger:last-child,.el-button-group .el-button--danger:not(:first-child):not(:last-child),.el-button-group .el-button--info:last-child,.el-button-group .el-button--info:not(:first-child):not(:last-child),.el-button-group .el-button--primary:last-child,.el-button-group .el-button--primary:not(:first-child):not(:last-child),.el-button-group .el-button--success:last-child,.el-button-group .el-button--success:not(:first-child):not(:last-child),.el-button-group .el-button--warning:last-child,.el-button-group .el-button--warning:not(:first-child):not(:last-child),.el-button-group>.el-dropdown>.el-button{border-left-color:hsla(0,0%,100%,.5)}.el-button-group .el-button--danger:first-child,.el-button-group .el-button--danger:not(:first-child):not(:last-child),.el-button-group .el-button--info:first-child,.el-button-group .el-button--info:not(:first-child):not(:last-child),.el-button-group .el-button--primary:first-child,.el-button-group .el-button--primary:not(:first-child):not(:last-child),.el-button-group .el-button--success:first-child,.el-button-group .el-button--success:not(:first-child):not(:last-child),.el-button-group .el-button--warning:first-child,.el-button-group .el-button--warning:not(:first-child):not(:last-child){border-right-color:hsla(0,0%,100%,.5)}.el-button-group{display:inline-block;vertical-align:middle}.el-button-group:after,.el-button-group:before{display:table}.el-button-group:after{clear:both}.el-button-group>.el-button{float:left;position:relative}.el-button-group>.el-button.is-disabled{z-index:1}.el-button-group>.el-button:first-child{border-top-right-radius:0;border-bottom-right-radius:0}.el-button-group>.el-button:last-child{border-top-left-radius:0;border-bottom-left-radius:0}.el-button-group>.el-button:first-child:last-child{border-radius:4px}.el-button-group>.el-button:first-child:last-child.is-round{border-radius:20px}.el-button-group>.el-button:first-child:last-child.is-circle{border-radius:50%}.el-button-group>.el-button:not(:first-child):not(:last-child){border-radius:0}.el-button-group>.el-button.is-active,.el-button-group>.el-button:not(.is-disabled):active,.el-button-group>.el-button:not(.is-disabled):focus,.el-button-group>.el-button:not(.is-disabled):hover{z-index:1}.el-button-group>.el-dropdown>.el-button{border-top-left-radius:0;border-bottom-left-radius:0}.el-calendar{background-color:#fff}.el-calendar__header{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;padding:12px 20px;border-bottom:1px solid #ebeef5}.el-backtop,.el-page-header{display:-ms-flexbox}.el-calendar__title{color:#000;-ms-flex-item-align:center;-ms-grid-row-align:center;align-self:center}.el-calendar__body{padding:12px 20px 35px}.el-calendar-table{table-layout:fixed;width:100%}.el-calendar-table thead th{padding:12px 0;color:#606266;font-weight:400}.el-calendar-table:not(.is-range) td.next,.el-calendar-table:not(.is-range) td.prev{color:#c0c4cc}.el-backtop,.el-calendar-table td.is-today{color:#409eff}.el-calendar-table td{border-bottom:1px solid #ebeef5;border-right:1px solid #ebeef5;vertical-align:top;transition:background-color .2s ease}.el-calendar-table td.is-selected{background-color:#f2f8fe}.el-calendar-table tr:first-child td{border-top:1px solid #ebeef5}.el-calendar-table tr td:first-child{border-left:1px solid #ebeef5}.el-calendar-table tr.el-calendar-table__row--hide-border td{border-top:none}.el-calendar-table .el-calendar-day{box-sizing:border-box;padding:8px;height:85px}.el-calendar-table .el-calendar-day:hover{cursor:pointer;background-color:#f2f8fe}.el-backtop{position:fixed;background-color:#fff;width:40px;height:40px;border-radius:50%;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;font-size:20px;box-shadow:0 0 6px rgba(0,0,0,.12);cursor:pointer;z-index:5}.el-backtop:hover{background-color:#f2f6fc}.el-page-header{display:-ms-flexbox;display:flex;line-height:24px}.el-page-header__left{display:-ms-flexbox;display:flex;cursor:pointer;margin-right:40px;position:relative}.el-page-header__left:after{position:absolute;width:1px;height:16px;right:-20px;top:50%;transform:translateY(-50%);background-color:#dcdfe6}.el-checkbox,.el-checkbox__input{display:inline-block;position:relative;white-space:nowrap}.el-page-header__left .el-icon-back{font-size:18px;margin-right:6px;-ms-flex-item-align:center;-ms-grid-row-align:center;align-self:center}.el-page-header__title{font-size:14px;font-weight:500}.el-page-header__content{font-size:18px;color:#303133}.el-checkbox{color:#606266;font-weight:500;font-size:14px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-right:30px}.el-checkbox.is-bordered{padding:9px 20px 9px 10px;border-radius:4px;border:1px solid #dcdfe6;box-sizing:border-box;line-height:normal;height:40px}.el-checkbox.is-bordered.is-checked{border-color:#409eff}.el-checkbox.is-bordered.is-disabled{border-color:#ebeef5;cursor:not-allowed}.el-checkbox.is-bordered.el-checkbox--medium{padding:7px 20px 7px 10px;border-radius:4px;height:36px}.el-checkbox.is-bordered.el-checkbox--medium .el-checkbox__label{line-height:17px;font-size:14px}.el-checkbox.is-bordered.el-checkbox--medium .el-checkbox__inner{height:14px;width:14px}.el-checkbox.is-bordered.el-checkbox--small{padding:5px 15px 5px 10px;border-radius:3px;height:32px}.el-checkbox.is-bordered.el-checkbox--small .el-checkbox__label{line-height:15px;font-size:12px}.el-checkbox.is-bordered.el-checkbox--small .el-checkbox__inner{height:12px;width:12px}.el-checkbox.is-bordered.el-checkbox--small .el-checkbox__inner:after{height:6px;width:2px}.el-checkbox.is-bordered.el-checkbox--mini{padding:3px 15px 3px 10px;border-radius:3px;height:28px}.el-checkbox.is-bordered.el-checkbox--mini .el-checkbox__label{line-height:12px;font-size:12px}.el-checkbox.is-bordered.el-checkbox--mini .el-checkbox__inner{height:12px;width:12px}.el-checkbox.is-bordered.el-checkbox--mini .el-checkbox__inner:after{height:6px;width:2px}.el-checkbox__input{cursor:pointer;outline:0;line-height:1;vertical-align:middle}.el-checkbox__input.is-disabled .el-checkbox__inner{background-color:#edf2fc;border-color:#dcdfe6;cursor:not-allowed}.el-checkbox__input.is-disabled .el-checkbox__inner:after{cursor:not-allowed;border-color:#c0c4cc}.el-checkbox__input.is-disabled .el-checkbox__inner+.el-checkbox__label{cursor:not-allowed}.el-checkbox__input.is-disabled.is-checked .el-checkbox__inner{background-color:#f2f6fc;border-color:#dcdfe6}.el-checkbox__input.is-disabled.is-checked .el-checkbox__inner:after{border-color:#c0c4cc}.el-checkbox__input.is-disabled.is-indeterminate .el-checkbox__inner{background-color:#f2f6fc;border-color:#dcdfe6}.el-checkbox__input.is-disabled.is-indeterminate .el-checkbox__inner:before{background-color:#c0c4cc;border-color:#c0c4cc}.el-checkbox__input.is-checked .el-checkbox__inner,.el-checkbox__input.is-indeterminate .el-checkbox__inner{background-color:#409eff;border-color:#409eff}.el-checkbox__input.is-disabled+span.el-checkbox__label{color:#c0c4cc;cursor:not-allowed}.el-checkbox__input.is-checked .el-checkbox__inner:after{transform:rotate(45deg) scaleY(1)}.el-checkbox__input.is-checked+.el-checkbox__label{color:#409eff}.el-checkbox__input.is-focus .el-checkbox__inner{border-color:#409eff}.el-checkbox__input.is-indeterminate .el-checkbox__inner:before{content:"";position:absolute;display:block;background-color:#fff;height:2px;transform:scale(.5);left:0;right:0;top:5px}.el-checkbox__input.is-indeterminate .el-checkbox__inner:after{display:none}.el-checkbox__inner{display:inline-block;position:relative;border:1px solid #dcdfe6;border-radius:2px;box-sizing:border-box;width:14px;height:14px;background-color:#fff;z-index:1;transition:border-color .25s cubic-bezier(.71,-.46,.29,1.46),background-color .25s cubic-bezier(.71,-.46,.29,1.46)}.el-checkbox__inner:hover{border-color:#409eff}.el-checkbox__inner:after{box-sizing:content-box;content:"";border:1px solid #fff;border-left:0;border-top:0;height:7px;left:4px;position:absolute;top:1px;transform:rotate(45deg) scaleY(0);width:3px;transition:transform .15s ease-in .05s;transform-origin:center}.el-checkbox__original{opacity:0;outline:0;position:absolute;margin:0;width:0;height:0;z-index:-1}.el-checkbox-button,.el-checkbox-button__inner{display:inline-block;position:relative}.el-checkbox__label{display:inline-block;padding-left:10px;line-height:19px;font-size:14px}.el-checkbox:last-of-type{margin-right:0}.el-checkbox-button__inner{line-height:1;font-weight:500;white-space:nowrap;vertical-align:middle;cursor:pointer;background:#fff;border:1px solid #dcdfe6;border-left:0;color:#606266;-webkit-appearance:none;text-align:center;box-sizing:border-box;outline:0;margin:0;transition:all .3s cubic-bezier(.645,.045,.355,1);padding:12px 20px;font-size:14px;border-radius:0}.el-checkbox-button__inner.is-round{padding:12px 20px}.el-checkbox-button__inner:hover{color:#409eff}.el-checkbox-button__inner [class*=el-icon-]{line-height:.9}.el-checkbox-button__inner [class*=el-icon-]+span{margin-left:5px}.el-checkbox-button__original{opacity:0;outline:0;position:absolute;margin:0;z-index:-1}.el-radio,.el-radio__inner,.el-radio__input{position:relative;display:inline-block}.el-checkbox-button.is-checked .el-checkbox-button__inner{color:#fff;background-color:#409eff;border-color:#409eff;box-shadow:-1px 0 0 0 #8cc5ff}.el-checkbox-button.is-checked:first-child .el-checkbox-button__inner{border-left-color:#409eff}.el-checkbox-button.is-disabled .el-checkbox-button__inner{color:#c0c4cc;cursor:not-allowed;background-image:none;background-color:#fff;border-color:#ebeef5;box-shadow:none}.el-checkbox-button.is-disabled:first-child .el-checkbox-button__inner{border-left-color:#ebeef5}.el-checkbox-button:first-child .el-checkbox-button__inner{border-left:1px solid #dcdfe6;border-radius:4px 0 0 4px;box-shadow:none!important}.el-checkbox-button.is-focus .el-checkbox-button__inner{border-color:#409eff}.el-checkbox-button:last-child .el-checkbox-button__inner{border-radius:0 4px 4px 0}.el-checkbox-button--medium .el-checkbox-button__inner{padding:10px 20px;font-size:14px;border-radius:0}.el-checkbox-button--medium .el-checkbox-button__inner.is-round{padding:10px 20px}.el-checkbox-button--small .el-checkbox-button__inner{padding:9px 15px;font-size:12px;border-radius:0}.el-checkbox-button--small .el-checkbox-button__inner.is-round{padding:9px 15px}.el-checkbox-button--mini .el-checkbox-button__inner{padding:7px 15px;font-size:12px;border-radius:0}.el-checkbox-button--mini .el-checkbox-button__inner.is-round{padding:7px 15px}.el-checkbox-group{font-size:0}.el-avatar,.el-cascader-panel,.el-radio,.el-radio--medium.is-bordered .el-radio__label,.el-radio__label{font-size:14px}.el-radio{color:#606266;font-weight:500;line-height:1;cursor:pointer;white-space:nowrap;outline:0;margin-right:30px}.el-cascader-node>.el-radio,.el-radio:last-child{margin-right:0}.el-radio.is-bordered{padding:12px 20px 0 10px;border-radius:4px;border:1px solid #dcdfe6;box-sizing:border-box;height:40px}.el-cascader-menu,.el-cascader-menu__list,.el-radio__inner{-webkit-box-sizing:border-box}.el-radio.is-bordered.is-checked{border-color:#409eff}.el-radio.is-bordered.is-disabled{cursor:not-allowed;border-color:#ebeef5}.el-radio__input.is-disabled .el-radio__inner,.el-radio__input.is-disabled.is-checked .el-radio__inner{background-color:#f5f7fa;border-color:#e4e7ed}.el-radio.is-bordered+.el-radio.is-bordered{margin-left:10px}.el-radio--medium.is-bordered{padding:10px 20px 0 10px;border-radius:4px;height:36px}.el-radio--mini.is-bordered .el-radio__label,.el-radio--small.is-bordered .el-radio__label{font-size:12px}.el-radio--medium.is-bordered .el-radio__inner{height:14px;width:14px}.el-radio--small.is-bordered{padding:8px 15px 0 10px;border-radius:3px;height:32px}.el-radio--small.is-bordered .el-radio__inner{height:12px;width:12px}.el-radio--mini.is-bordered{padding:6px 15px 0 10px;border-radius:3px;height:28px}.el-radio--mini.is-bordered .el-radio__inner{height:12px;width:12px}.el-radio__input{white-space:nowrap;cursor:pointer;outline:0;line-height:1;vertical-align:middle}.el-radio__input.is-disabled .el-radio__inner{cursor:not-allowed}.el-radio__input.is-disabled .el-radio__inner:after{cursor:not-allowed;background-color:#f5f7fa}.el-radio__input.is-disabled .el-radio__inner+.el-radio__label{cursor:not-allowed}.el-radio__input.is-disabled.is-checked .el-radio__inner:after{background-color:#c0c4cc}.el-radio__input.is-disabled+span.el-radio__label{color:#c0c4cc;cursor:not-allowed}.el-radio__input.is-checked .el-radio__inner{border-color:#409eff;background:#409eff}.el-radio__input.is-checked .el-radio__inner:after{transform:translate(-50%,-50%) scale(1)}.el-radio__input.is-checked+.el-radio__label{color:#409eff}.el-radio__input.is-focus .el-radio__inner{border-color:#409eff}.el-radio__inner{border:1px solid #dcdfe6;border-radius:100%;width:14px;height:14px;background-color:#fff;cursor:pointer;box-sizing:border-box}.el-radio__inner:hover{border-color:#409eff}.el-radio__inner:after{width:4px;height:4px;border-radius:100%;background-color:#fff;content:"";position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(0);transition:transform .15s ease-in}.el-radio__original{opacity:0;outline:0;position:absolute;z-index:-1;top:0;left:0;right:0;bottom:0;margin:0}.el-radio:focus:not(.is-focus):not(:active):not(.is-disabled) .el-radio__inner{box-shadow:0 0 2px 2px #409eff}.el-radio__label{padding-left:10px}.el-scrollbar{overflow:hidden;position:relative}.el-scrollbar:active>.el-scrollbar__bar,.el-scrollbar:focus>.el-scrollbar__bar,.el-scrollbar:hover>.el-scrollbar__bar{opacity:1;transition:opacity .34s ease-out}.el-scrollbar__wrap{overflow:scroll;height:100%}.el-scrollbar__wrap--hidden-default{scrollbar-width:none}.el-scrollbar__wrap--hidden-default::-webkit-scrollbar{width:0;height:0}.el-scrollbar__thumb{position:relative;display:block;width:0;height:0;cursor:pointer;border-radius:inherit;background-color:hsla(220,4%,58%,.3);transition:background-color .3s}.el-scrollbar__thumb:hover{background-color:hsla(220,4%,58%,.5)}.el-scrollbar__bar{position:absolute;right:2px;bottom:2px;z-index:1;border-radius:4px;opacity:0;transition:opacity .12s ease-out}.el-scrollbar__bar.is-vertical{width:6px;top:2px}.el-scrollbar__bar.is-vertical>div{width:100%}.el-scrollbar__bar.is-horizontal{height:6px;left:2px}.el-scrollbar__bar.is-horizontal>div{height:100%}.el-cascader-panel{display:-ms-flexbox;display:flex;border-radius:4px}.el-cascader-panel.is-bordered{border:1px solid #e4e7ed;border-radius:4px}.el-cascader-menu{min-width:180px;box-sizing:border-box;color:#606266;border-right:1px solid #e4e7ed}.el-cascader-menu:last-child{border-right:none}.el-cascader-menu__wrap{height:204px}.el-cascader-menu__list{position:relative;min-height:100%;margin:0;padding:6px 0;list-style:none;box-sizing:border-box}.el-cascader-menu__hover-zone{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.el-cascader-menu__empty-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;color:#c0c4cc}.el-cascader-node{position:relative;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:0 30px 0 20px;height:34px;line-height:34px;outline:0}.el-cascader-node.is-selectable.in-active-path{color:#606266}.el-cascader-node.in-active-path,.el-cascader-node.is-active,.el-cascader-node.is-selectable.in-checked-path{color:#409eff;font-weight:700}.el-cascader-node:not(.is-disabled){cursor:pointer}.el-cascader-node:not(.is-disabled):focus,.el-cascader-node:not(.is-disabled):hover{background:#f5f7fa}.el-cascader-node.is-disabled{color:#c0c4cc;cursor:not-allowed}.el-cascader-node__prefix{position:absolute;left:10px}.el-cascader-node__postfix{position:absolute;right:10px}.el-cascader-node__label{-ms-flex:1;flex:1;padding:0 10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.el-cascader-node>.el-radio .el-radio__label{padding-left:0}.el-avatar{display:inline-block;box-sizing:border-box;text-align:center;overflow:hidden;color:#fff;background:#c0c4cc;width:40px;height:40px;line-height:40px}.el-drawer,.el-drawer__body>*{-webkit-box-sizing:border-box}.el-avatar>img{display:block;height:100%;vertical-align:middle}.el-empty__image img,.el-empty__image svg{vertical-align:top;height:100%;width:100%}.el-avatar--circle{border-radius:50%}.el-avatar--square{border-radius:4px}.el-avatar--icon{font-size:18px}.el-avatar--large{width:40px;height:40px;line-height:40px}.el-avatar--medium{width:36px;height:36px;line-height:36px}.el-avatar--small{width:28px;height:28px;line-height:28px}@keyframes el-drawer-fade-in{0%{opacity:0}to{opacity:1}}@keyframes rtl-drawer-in{0%{transform:translate(100%)}to{transform:translate(0)}}@keyframes rtl-drawer-out{0%{transform:translate(0)}to{transform:translate(100%)}}@keyframes ltr-drawer-in{0%{transform:translate(-100%)}to{transform:translate(0)}}@keyframes ltr-drawer-out{0%{transform:translate(0)}to{transform:translate(-100%)}}@keyframes ttb-drawer-in{0%{transform:translateY(-100%)}to{transform:translate(0)}}@keyframes ttb-drawer-out{0%{transform:translate(0)}to{transform:translateY(-100%)}}@keyframes btt-drawer-in{0%{transform:translateY(100%)}to{transform:translate(0)}}@keyframes btt-drawer-out{0%{transform:translate(0)}to{transform:translateY(100%)}}.el-drawer{position:absolute;box-sizing:border-box;background-color:#fff;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12);overflow:hidden;outline:0}.el-drawer.rtl{animation:rtl-drawer-out .3s;right:0}.el-drawer__open .el-drawer.rtl{animation:rtl-drawer-in .3s 1ms}.el-drawer.ltr{animation:ltr-drawer-out .3s;left:0}.el-drawer__open .el-drawer.ltr{animation:ltr-drawer-in .3s 1ms}.el-drawer.ttb{animation:ttb-drawer-out .3s;top:0}.el-drawer__open .el-drawer.ttb{animation:ttb-drawer-in .3s 1ms}.el-drawer.btt{animation:btt-drawer-out .3s;bottom:0}.el-drawer__open .el-drawer.btt{animation:btt-drawer-in .3s 1ms}.el-drawer__wrapper{position:fixed;top:0;right:0;bottom:0;left:0;overflow:hidden;margin:0}.el-drawer__header{-ms-flex-align:center;align-items:center;color:#72767b;display:-ms-flexbox;display:flex;margin-bottom:32px;padding:20px 20px 0}.el-drawer__header>:first-child{-ms-flex:1;flex:1}.el-drawer__title{margin:0;-ms-flex:1;flex:1;line-height:inherit;font-size:1rem}.el-drawer__close-btn{border:none;cursor:pointer;font-size:20px;color:inherit;background-color:transparent}.el-drawer__body{-ms-flex:1;flex:1;overflow:auto}.el-drawer__body>*{box-sizing:border-box}.el-drawer.ltr,.el-drawer.rtl{height:100%;top:0;bottom:0}.el-drawer.btt,.el-drawer.ttb,.el-drawer__container{width:100%;left:0;right:0}.el-drawer__container{position:relative;top:0;bottom:0;height:100%}.el-drawer-fade-enter-active{animation:el-drawer-fade-in .3s}.el-drawer-fade-leave-active{animation:el-drawer-fade-in .3s reverse}.el-statistic{width:100%;box-sizing:border-box;margin:0;padding:0;color:#000;font-variant:tabular-nums;list-style:none;font-feature-settings:"tnum";text-align:center}.el-statistic .head{margin-bottom:4px;color:#606266;font-size:13px}.el-statistic .con{font-family:Sans-serif;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;color:#303133}.el-statistic .con .number{font-size:20px;padding:0 4px}.el-statistic .con span{display:inline-block;margin:0;line-height:100%}.el-popconfirm__main,.el-skeleton__image{display:-ms-flexbox;-webkit-box-align:center;display:-webkit-box}.el-popconfirm__main{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.el-popconfirm__icon{margin-right:5px}.el-popconfirm__action{text-align:right;margin:0}@keyframes el-skeleton-loading{0%{background-position:100% 50%}to{background-position:0 50%}}.el-skeleton{width:100%}.el-skeleton__first-line,.el-skeleton__paragraph{height:16px;margin-top:16px;background:#f2f2f2}.el-skeleton.is-animated .el-skeleton__item{background:linear-gradient(90deg,#f2f2f2 25%,#e6e6e6 37%,#f2f2f2 63%);background-size:400% 100%;animation:el-skeleton-loading 1.4s ease infinite}.el-skeleton__item{background:#f2f2f2;display:inline-block;height:16px;border-radius:4px;width:100%}.el-skeleton__circle{border-radius:50%;width:36px;height:36px;line-height:36px}.el-skeleton__circle--lg{width:40px;height:40px;line-height:40px}.el-skeleton__circle--md{width:28px;height:28px;line-height:28px}.el-skeleton__button{height:40px;width:64px;border-radius:4px}.el-skeleton__p{width:100%}.el-skeleton__p.is-last{width:61%}.el-skeleton__p.is-first{width:33%}.el-skeleton__text{width:100%;height:13px}.el-skeleton__caption{height:12px}.el-skeleton__h1{height:20px}.el-skeleton__h3{height:18px}.el-skeleton__h5{height:16px}.el-skeleton__image{width:unset;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;border-radius:0}.el-skeleton__image svg{fill:#dcdde0;width:22%;height:22%}.el-empty{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;-ms-flex-direction:column;flex-direction:column;text-align:center;box-sizing:border-box;padding:40px 0}.el-empty__image{width:160px}.el-empty__image img{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;object-fit:contain}.el-empty__image svg{fill:#dcdde0}.el-empty__description{margin-top:20px}.el-empty__description p{margin:0;font-size:14px;color:#909399}.el-empty__bottom,.el-result__title{margin-top:20px}.el-descriptions{box-sizing:border-box;font-size:14px;color:#303133}.el-descriptions__header{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;margin-bottom:20px}.el-descriptions__title{font-size:16px;font-weight:700}.el-descriptions--mini,.el-descriptions--small{font-size:12px}.el-descriptions__body{color:#606266;background-color:#fff}.el-descriptions__body .el-descriptions__table{border-collapse:collapse;width:100%;table-layout:fixed}.el-descriptions__body .el-descriptions__table .el-descriptions-item__cell{box-sizing:border-box;text-align:left;font-weight:400;line-height:1.5}.el-descriptions__body .el-descriptions__table .el-descriptions-item__cell.is-left{text-align:left}.el-descriptions__body .el-descriptions__table .el-descriptions-item__cell.is-center{text-align:center}.el-descriptions__body .el-descriptions__table .el-descriptions-item__cell.is-right{text-align:right}.el-descriptions .is-bordered{table-layout:auto}.el-descriptions .is-bordered .el-descriptions-item__cell{border:1px solid #ebeef5;padding:12px 10px}.el-descriptions :not(.is-bordered) .el-descriptions-item__cell{padding-bottom:12px}.el-descriptions--medium.is-bordered .el-descriptions-item__cell{padding:10px}.el-descriptions--medium:not(.is-bordered) .el-descriptions-item__cell{padding-bottom:10px}.el-descriptions--small.is-bordered .el-descriptions-item__cell{padding:8px 10px}.el-descriptions--small:not(.is-bordered) .el-descriptions-item__cell{padding-bottom:8px}.el-descriptions--mini.is-bordered .el-descriptions-item__cell{padding:6px 10px}.el-descriptions--mini:not(.is-bordered) .el-descriptions-item__cell{padding-bottom:6px}.el-descriptions-item{vertical-align:top}.el-descriptions-item__container{display:-ms-flexbox;display:flex}.el-descriptions-item__container .el-descriptions-item__content,.el-descriptions-item__container .el-descriptions-item__label{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:baseline;align-items:baseline}.el-descriptions-item__container .el-descriptions-item__content{-ms-flex:1;flex:1}.el-descriptions-item__label.has-colon:after{content:":";position:relative;top:-.5px}.el-descriptions-item__label.is-bordered-label{font-weight:700;color:#909399;background:#fafafa}.el-descriptions-item__label:not(.is-bordered-label){margin-right:10px}.el-descriptions-item__content{word-break:break-word;overflow-wrap:break-word}.el-result{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;-ms-flex-direction:column;flex-direction:column;text-align:center;box-sizing:border-box;padding:40px 30px}.el-result__icon svg{width:64px;height:64px}.el-result__title p{margin:0;font-size:20px;color:#303133;line-height:1.3}.el-result__subtitle{margin-top:10px}.el-result__subtitle p{margin:0;font-size:14px;color:#606266;line-height:1.3}.el-result__extra{margin-top:30px}.el-result .icon-success{fill:#67c23a}.el-result .icon-error{fill:#f56c6c}.el-result .icon-info{fill:#909399}.el-result .icon-warning{fill:#e6a23c}',""])},function(t,e,a){e=t.exports=a(31)(void 0),e.push([t.i,'body,html{height:100%}body{margin:0;font-size:13px}ol li,ul li{list-style:none}*{padding:0;margin:0}a{transition-duration:.4s,.5s;transition-property:background-color,color;transition-timing-function:ease,ease}i{font-style:normal}canvas,input{outline:0}.redColor{color:#ee1515}.greenColor{color:#199e00}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-button{display:none}::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:4px}.context-menu-wrapper{position:absolute;z-index:500;overflow:auto;border:1px solid;border-color:#b5b7b9;background-color:#fff;white-space:nowrap}html.theme-dark .context-menu-wrapper{background-color:#1c2030;border-color:#363c4e}.context-menu-wrapper .backlight{background-color:#f2f3f5}html.theme-dark .context-menu-wrapper .backlight{background-color:#2f3241}tr.context-menu.disabled{color:#9d9d9d}.submenu.center{background-color:#fff}.context-menu{font-family:Tahoma,Arial,sans-serif;font-size:11px;white-space:nowrap}tr.context-menu{cursor:pointer;height:29px}tr.context-menu:hover{background:#f2f3f5}html.theme-dark tr.context-menu-hover{background:#2f3241}td.context-menu{opacity:1;cursor:pointer;padding-left:4px}.context-menu-item-separated{border-bottom:1px solid #cecece}.context-menu .text{min-width:100px}.context-menu .spacer{width:18px;text-align:center}.context-menu .icon{height:27px;width:18px}.context-menu .shortcut{text-align:right;color:#aaa;padding:0 2px 0 10px}.submenu-arrow{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAKElEQVR4AWOgExgFo6Cvr+8/1Q0EYaoaCMNUNBCBB68LqRvLIxiMAgAKDyqRblYs2AAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:50%;width:20px}.border td{border-bottom:1px solid #b5b7b9}.tools{margin-bottom:8px;height:38px;color:#4c525e;float:left}.tools .txt{height:28px;width:80px;border:none;margin-top:3px;padding-left:5px}.tools .item{float:left;margin-right:1px;padding:0 5px;height:36px;line-height:36px}.button,.tools .item{cursor:pointer;border:1px solid #eceff2}.button{box-shadow:inset 0 0 0 0 #edf0f2;background:linear-gradient(180deg,#fcfffa 5%,#fff);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#fcfffa",endColorstr="#ffffff",GradientType=0);background-color:#fcfffa;display:inline-block;font-family:Arial;font-size:13px;text-decoration:none}.button:hover{background:linear-gradient(180deg,#f2f3f5 5%,#f2f3f5);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#f2f3f5",endColorstr="#f2f3f5",GradientType=0);background-color:#f2f3f5}.button:active{position:relative;top:1px}.dropdownList{width:200px;border:1px solid #eceff2;position:absolute;z-index:500;overflow:auto;padding:5px 0;background-color:#fff;box-shadow:0 1px 3px 0 rgba(0,0,0,.07);border-radius:3px;display:none;color:#4c525e}.dropdownList .item{padding:2px 8px;height:28px;line-height:28px}.dropdownList .item:hover{background-color:#ebf7fc;cursor:pointer}.selected{height:38px;overflow:hidden;text-align:center;float:left}.selected ul li{float:left;margin:0 5px;list-style-type:none}.selected ul a{display:block;background:#ebf7fc;height:38px;text-decoration:none;color:#4c525e;transition:margin .4s ease-in-out;padding:0 8px;line-height:38px}.selected ul a:nth-of-type(2n){background:#fff2f4;color:#4c525e}.drawing{height:36px;float:left;border:1px solid #eceff2}.drawing .lable{background:#eceff2;height:36px;line-height:36px;float:left;margin-right:1px;padding:0 5px}.drawing .item{float:left;margin:1px 1px 1px 0;padding:0 5px;cursor:pointer;border:1px solid #eceff2;height:32px;line-height:32px}.drawing .item.active{background:#1592e6;color:#fff;border-color:#1592e6}.drawtools{border:1px solid #ccc;background:#fff}.drawtools .icon-image{text-align:center;padding:5px 0 5px 10px;height:24px;position:relative}.drawtools .icon-image>i:first-of-type{font-size:24px}.drawtools .icon-image.active>i:first-of-type{color:#0182d4}.drawtools .icon-image .menuTwo{position:absolute;top:0;right:46px;border:1px solid #ccc;background-color:#fff;display:none;text-align:right}.drawtools .icon-image .menuTwo .menuTwoItem{height:24px;line-height:24px;width:125px;font-size:12px;padding:5px 0;display:block;padding-right:10px}.drawtools .icon-image .menuTwo .menuTwoItem:after{content:"";display:block;width:0;height:0;clear:both;overflow:hidden}.drawtools .icon-image .menuTwo .menuTwoItem>i{float:right;margin-left:5px;font-size:24px}.drawtools .icon-image .menuTwo .menuTwoItem:hover{background-color:#ebf7fc}.drawtools .icon-image .menuTwo .menuTwoItem.current{background-color:#37a6ef}.drawtools .icon-image .contentArrow{font-size:12px;position:absolute;top:12px;left:0;transition:transform .2s;display:none}.drawtools .icon-image .contentArrow.trans{transform:rotate(180deg)}.drawtools .icon-image:last-child{border-top:1px solid #ccc}.chartpicture-text-setting{width:400px;background-color:#fff;border:1px solid;border-color:#b5b7b9;box-shadow:0 0 10px 0 rgba(0,0,0,.15)}.titleWrap{width:100%;border-bottom:1px solid;border-color:#dadde0}.titleWrap,.titleWrap .titleName{height:53px;line-height:53px;position:relative}.titleWrap .titleName{display:inline-block;padding:0 2px;font-size:14px;color:#4f5966;margin-left:14px}.titleWrap .titleName:after{content:" ";position:absolute;display:block;left:0;bottom:-1px;width:100%;height:3px;background-color:#5cb888}.titleWrap .closeBtn{font-size:12px;color:#777;position:absolute;top:0;right:0;padding-right:14px;padding-left:14px;cursor:pointer}.contentWrap{padding:15px 27px}.contentWrap .styleOptions{height:27px;margin-bottom:7px}.contentWrap .styleOptions .colorPicker{width:25px;height:25px;cursor:pointer;display:inline-block;border:1px solid;border-color:#1e90ff;background-color:#1e90ff;margin-right:5px;position:relative}.contentWrap .colorPicker #fontColor{position:absolute;top:0;left:0;opacity:0;width:100%;height:100%;display:block}.contentWrap .likeSelect{height:25px;width:50px;background-color:#f1f3f6;line-height:25px;cursor:pointer;display:inline-block;vertical-align:top;font-size:14px;padding:0 20px 0 10px;border:1px solid;border-color:#dadde0;margin-right:5px;position:relative}.contentWrap .fontSelect{font-size:12px}.contentWrap .likeSelect .choicedText{display:inline-block;width:78px;height:100%;overflow:hidden}.contentWrap .likeSelect i{font-size:15px;position:absolute;top:0;right:6px}.contentWrap .likeSelect .selectList{position:absolute;top:27px;left:0;background-color:#fff;border:1px solid #dadde0;display:none}.contentWrap .selectList p{padding:0 15px;height:30px;line-height:30px;cursor:pointer;white-space:nowrap}.contentWrap .selectList p:hover{background-color:#f1f3f6}.contentWrap .selectList p.active{background-color:#f1f3f6;border-left:3px solid #5cb888}.contentWrap .likeBtn{border:1px solid;border-color:#dadde0;text-align:center;cursor:pointer;vertical-align:top;font-size:16px;margin-right:5px;color:#4a4a4a;display:inline-block;width:25px;height:25px;line-height:25px;background-color:#f1f3f6}.contentWrap .strongFont{font-weight:700}.contentWrap .italicsFont{font-style:italic}.contentWrap .tArea{border:1px solid #b5b7b9;background-color:#fff;resize:none;color:#4a4a4a;font-size:12px;line-height:18px;box-sizing:border-box;padding:8px 5px;width:100%;height:200px}.contentWrap .likeBtn:hover,.contentWrap .likeSelect:hover{border-color:#b5b7b9}.contentWrap .likeBtn.hot,.contentWrap .likeSelect.hot{background-color:#fff}.btnsContainer{text-align:right;padding:0 13px 27px}.btnsContainer .btn{width:72px;height:24px;line-height:24px;cursor:pointer;padding-top:4px;text-align:center;font-size:14px;color:#fff;margin-right:10px;display:inline-block}.btnsContainer .okBtn{background-color:#3bb3e4}.btnsContainer .okBtn:hover{background-color:#38acdb}.btnsContainer .cancelBtn{background-color:#9ca0a6;margin-right:0}.btnsContainer .cancelBtn:hover{background-color:#898c91}.jchart-select-statistics-box{position:fixed;width:100%;height:100%;left:0;top:0;background-color:rgba(0,0,0,.01);display:none;z-index:999}.interval .top{padding-left:10px;box-sizing:border-box;height:40px;line-height:40px;text-align:left;border-bottom:1px solid #e1ecf2;font-size:14px;color:#757d81}.interval .top .closeBtn{float:right;margin-right:15px;cursor:pointer;font-weight:600}.interval table{width:100%;height:170px}.changColorR{border-right-color:#1295d9!important}.changColorL{border-left-color:#1295d9!important}.interval table .dateChange1{display:inline-block;cursor:pointer;width:0;height:0;border:6px solid transparent;border-right:6px solid #c8d2db}.interval table .dateChange2{display:inline-block;cursor:pointer;width:0;height:0;border:6px solid transparent;border-left:6px solid #c8d2db}.interval table tr td:nth-child(2),.interval table tr td:nth-child(4),.interval table tr td:nth-child(6){font-weight:700}.interval table td{padding-left:10px;border-bottom:1px solid #eceff2}.interval table td.name{text-align:right}.interval table td:last-child{padding-right:10px}.kLineMatch{position:absolute;z-index:520;width:300px;height:600px;border:1px solid #eceff2;background:#fff;display:none}.kLineMatch .top{height:30px;line-height:30px;background:#ccc;text-align:center}.kLineMatch .top .closeBtn{float:right;margin-right:20px;cursor:pointer}.kLineMatch .title{padding:5px}.kLineMatch .title .name{float:left;width:70px;border-right:1px solid #ccc}.kLineMatch .title .time{width:140px;border-right:1px solid #ccc}.kLineMatch .title .similar,.kLineMatch .title .time{float:left;padding-left:5px}.kLineMatch .list{overflow-y:auto;height:544px;width:290px;padding:5px 5px 0}.kLineMatch .list .item .name{width:70px;float:left;padding-bottom:5px}.kLineMatch .list .item .time{padding:0 0 5px 5px;float:left;width:140px}.kLineMatch .list .item .similar{float:left;padding-left:7px;padding-bottom:5px}.jchart-kline-match-box{font:13px Microsoft Yahei}.jchart-kline-match-box .matchTable{border-collapse:collapse;width:100%}.jchart-kline-match-box .matchTable td,.jchart-kline-match-box .matchTable th{line-height:20px;border:1px solid #ccc;padding:0 10px}.jchart-kline-match-box .matchTable td.red{color:red}.pagination{height:22px;text-align:center;margin-top:10px}.pagination span{display:inline-block;line-height:20px;padding:0 6px;border:1px solid #ccc;margin-right:6px;cursor:pointer}.pagination span.active,.pagination span:hover{color:#ffb400}.spinnerBg{background:#ccc;width:100%;height:100%;opacity:.5}.spinner,.spinnerBg{position:absolute;display:none}.spinner{width:50px;height:60px;font-size:10px;top:50%;left:50%}.spinner>div{background-color:#39adce;height:100%;width:6px;display:inline-block;animation:stretchdelay 1.2s infinite ease-in-out}.spinner .rect2{animation-delay:-1.1s}.spinner .rect3{animation-delay:-1s}.spinner .rect4{animation-delay:-.9s}.spinner .rect5{animation-delay:-.8s}@keyframes stretchdelay{0%,40%,to{transform:scaleY(.4);-webkit-transform:scaleY(.4)}20%{transform:scaleY(1);-webkit-transform:scaleY(1)}}.kline-info{position:absolute;width:16px;height:16px;background-color:#fff;color:#ff3232;text-align:center;cursor:pointer;font:700 12px/1.4 arial}.klineframe-toolbar{position:absolute;text-align:right;line-height:24px;padding-right:5px;box-sizing:border-box}.klineframe-toolbar span:hover{color:#0182d4}.klineframe-button{position:absolute;text-align:right;border:1px solid #ccc;padding:2px}.icon-active{color:#0182d4}.increase{margin-left:3px;margin-right:10px}.rate-discount{font-weight:400;margin-left:90px}.tipBoxTitle{display:inline-block;width:130px}.date-tipbox{margin-right:10px}.jchart-changeindex-box,.jchart-modifyindex-box{position:fixed;display:none;width:100%;height:100%;left:0;top:0;z-index:999;background-color:rgba(0,0,0,.01)}.jchart-kline-minute-box{position:absolute;display:none;width:500px;height:550px!important;padding:0 5px 20px 10px;background-color:hsla(0,0%,100%,.95);border:1px solid rgba(200,210,219,.92);box-shadow:0 1px 4px 0 rgba(0,0,0,.23);z-index:999}.parameter{position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-50%);padding:3px;box-sizing:border-box;width:520px;height:421px;background-color:hsla(0,0%,100%,.96);box-shadow:0 4px 17px 0 rgba(0,0,0,.55);border-radius:2px;z-index:999}.parameter-header{position:relative;width:100%;height:42px;line-height:42px;border-bottom:1px solid #c8d2db}.parameter-header span{font-family:å¾®è½¯éé»;font-size:14px;margin-left:10px}.parameter-header strong{position:absolute;right:10px;top:10px;font-size:14px;font-weight:300}.parameter-content{padding:20px;box-sizing:border-box}.row-line{margin-right:20px;margin-top:10px;padding-left:3px;box-sizing:border-box;width:100px;height:24px;line-height:24px;border:1px solid #ccc}#close,.parameter1{cursor:pointer}.parameter-footer{position:absolute;bottom:20px;left:50%;transform:translateX(-50%)}.parameter-footer button{margin-left:15px;width:78px;height:28px;border:none;border-radius:2px;color:#fff}.submit{background-color:#0182d4}.cancel{background-color:#c8d2db}.target-box{position:absolute;display:none;width:100%;height:100%;background-color:rgba(0,0,0,.01);z-index:999}.target-panel{position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-50%);width:800px;height:500px;background-color:hsla(0,0%,100%,.96);box-shadow:0 4px 17px 0 rgba(0,0,0,.55);border-radius:3px}.target-header{position:relative;width:100%;height:42px;line-height:42px;border-bottom:1px solid #c8d2db}.target-header span{font-family:å¾®è½¯éé»;font-size:14px;margin-left:10px}.target-header strong{position:absolute;right:10px;top:10px;font-size:14px;font-weight:300}#close-tar{cursor:pointer}.target-content{height:100%}.target-left{float:left;width:200px;height:calc(100% - 43px);border-right:1px solid #c8d2db}.target-left input{margin-left:10px;height:40px;line-height:40px;border:none;font-size:14px}.target-left ul{border-top:1px solid #c8d2db;list-style:none;padding:10px;box-sizing:border-box}.target-left ul li{font-size:13px;line-height:30px;color:#757d81;cursor:pointer}.active-list{color:#1295d9!important}.target-right{float:left;width:595px}.target-right ul{width:590px;max-height:450px;overflow:auto;padding-top:10px;padding-left:20px;box-sizing:border-box}.target-right ul li{display:inline-block;margin-top:5px;margin-left:10px;list-style:none;width:175px;line-height:30px;text-align:left;float:left;cursor:pointer}.minute-dialog-title{position:relative;margin-bottom:10px;height:36px;line-height:36px;width:100%;border-bottom:1px solid #ccc}.minute-dialog-title span{margin-left:5px}.minute-dialog-title strong{position:absolute;right:5px;top:0;font-weight:300;font-size:12px}.minute-dialog-title strong:hover,.parameter-header strong:hover{color:#0182d4}.jschart-tooltip{box-shadow:0 1px 4px 0 rgba(0,0,0,.23);border:1px solid rgba(200,210,219,.92);padding:7px 20px 15px 13px;box-sizing:border-box;position:relative;display:none;z-index:9;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tooltip-title{text-align:center;display:block}.tooltip-con,.tooltip-title{color:#2b3645}.tooltip-con,.tooltip-num,.tooltip-title{font-family:å¾®è½¯éé»;font-size:12px;line-height:24px}.tooltip-num{text-align:right;display:inline-block;width:90px}.jschart-selectrect{border:1px dashed #0f248de0;display:none}.jchart-klineinfo-tooltip{position:absolute;z-index:10;max-height:270px;line-height:28px;box-shadow:0 1px 4px 0 rgba(0,0,0,.23);border:1px solid rgba(200,210,219,.92);padding:15px;background:hsla(0,0%,100%,.92);box-sizing:border-box;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.total-list{color:#f39800}.jchart-klineinfo-tooltip span{display:block;vertical-align:bottom}.title-length{max-height:220px;overflow:hidden}.close-munite{cursor:pointer}.jchart-charscatterplot-tooltip,.jchart-chartox-tooltip,.jchart-iconinfo-tooltip,.jchart-klinetrade-tooltip,.jchart-minuteinfo-tooltip{max-height:270px}.jchart-charscatterplot-tooltip,.jchart-chartdrawsvg-tooltip,.jchart-chartox-tooltip,.jchart-iconinfo-tooltip,.jchart-klinetrade-tooltip,.jchart-minuteinfo-tooltip{position:absolute;z-index:10;line-height:28px;box-shadow:0 1px 4px 0 rgba(0,0,0,.23);border:1px solid rgba(200,210,219,.92);padding:7px;background:hsla(0,0%,100%,.92);box-sizing:border-box;display:none}.jchart-chartdrawsvg-tooltip{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.trade-detall{margin-left:80px}.reason-list{display:inline-block;width:200px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;vertical-align:bottom}.trade-time{vertical-align:top}.prorecast-week{margin-left:70px}.jchart-select-section{height:340px}.jchart-select-table-right .jchart-select-date{width:100%;margin-bottom:5px}.jchart-select-date span{display:inline-block;width:32%;padding-left:10px;box-sizing:border-box;font-size:13px}.jchart-select-date span i{display:inline-block;width:12px;height:24px;line-height:24px;text-align:center;border:1px solid #ddd;background-color:#f5f5f5;cursor:pointer}.end-date-left,.start-date-left{margin:0 2px 0 5px}.jchart-select-table-right>table{width:100%;border-collapse:collapse}.jchart-select-table-right>table,.jchart-select-table-right>table td,.jchart-select-table-right>table tr{border:1px solid #ddd}.jchart-select-table-right td{padding-left:10px;box-sizing:border-box;width:32%;height:40px;vertical-align:center}.jchart-select-table-right>table td span{margin-left:20px}.jchart-select-table-right>table td strong{display:inline-block;width:50px;font-weight:400}.PriceUp{color:#ee1515!important}.PriceDown{color:#199e00!important}.PriceNull{color:#000}.BtnBackground{background-color:#fff!important;color:#eee}.icon-image{cursor:pointer}.icon-image img{padding:10px 8px;display:block;width:22px;height:22px;border-left:1px solid #ccc;border-right:1px solid #ccc}.icon-image:first-child img{border-top:1px solid #ccc}.icon-image:last-child img{border-bottom:1px solid #ccc}.subTolls{padding:8px 5px 0 8px;border:1px solid #aaa;background-color:#fff;height:26px}.subTolls:after{content:"";display:block;width:0;height:0;clear:both}.subTolls>*{margin:0 3px;cursor:pointer;display:block;width:20px;height:20px;float:left}.subTolls>.subtool-set{vertical-align:top}.change-color{width:24px;height:3px;outline:none;border:0}.change-color,.changes-color{position:relative}.change-image{margin-left:3px;margin-bottom:2px;display:inline-block;width:16px;height:13px}.changes-color input{position:absolute;left:0;bottom:0}input[type=color]{border:0;padding:0;cursor:pointer}::-webkit-color-swatch-wrapper{background-color:#fff}::-webkit-color-swatch{height:4px;width:25px;position:relative;left:0;top:-5px;border:0}.subtool-del{position:relative}.UMyChart_PopMenu{position:absolute;z-index:500;border:1px solid;border-color:#747070;background-color:#fff;visibility:hidden;font-size:12px;font-family:\\\\5FAE\\8F6F\\96C5\\9ED1;cursor:default;padding:2px}.UMyChart_PopMenu_Table{border-collapse:collapse;border-spacing:2px}.UMyChart_MenuItem_Tr{display:table-row;height:20px}.UMyChart_DrawTool_Disable_Tr{pointer-events:none;color:#a9a9a9}.UMyChart_MenuItem_Tr_Separator{height:5px}.UMyChart_MenuItem_Td_Separator{border-top:1px solid;border-color:#747070}.UMyChart_MenuItem_Td_Status_Separator{height:5px;background:#ccc}.UMyChart_MenuItem_Tr_Selected{background:#acacdd;border:0 solid}.UMyChart_MenuItem_Td_Status{width:23px;background:#ccc}.UMyChart_MenuItem_Td_Shortcut{width:60px;text-align:right}.UMyChart_MenuItem_Td_Content{padding-left:5px;text-align:left}.UMyChart_MenuItem_Td_Arrow{width:25px;text-align:right;margin-right:10px}.UMyChart_MenuItem_Tr:hover{background:#acacdd}.UMyChart_PopSubMenu{position:absolute;left:99px;top:0;border:1px solid;border-color:#747070;background-color:#fff;visibility:hidden;z-index:501;font-size:12px;font-family:\\\\5FAE\\8F6F\\96C5\\9ED1;cursor:default;padding:2px}.UMyChart_MenuItem_Span_Checked{color:#000;font-size:10px;margin-left:5px;text-align:left}.UMyChart_MenuItem_Span_Arrow{color:#000;font-size:10px;text-align:right}.UMyChart_DrawTool_Dialog_Div{font-family:\\\\5FAE\\8F6F\\96C5\\9ED1;border:2px solid;width:-moz-fit-content;width:fit-content;border-color:#ccc;visibility:hidden;position:absolute;background-color:#fafafa;left:1px;top:1px}.UMyChart_DrawTool_Title_Div{padding-left:2px;height:20px;border-bottom:1px solid;border-color:#ccc;display:-ms-flexbox;display:flex;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#dedede}.UMyChart_DrawTool_Close_Div{margin-left:auto;padding-right:4px;cursor:pointer}.UMyChart_DrawTool_Table{border-collapse:collapse;border-spacing:2px}.UMyChart_DrawTool_Tr{display:table-row;height:20px}.UMyChart_DrawTool_Span_Selected{font-size:22px;border:1px solid;border-color:gray;background:#ea5504;color:#fff}.UMyChart_DrawTool_Td{padding:2px}.UMyChart_DrawTool_Span{font-size:22px;border:1px solid;border-color:gray;color:#4d4d4d}.UMyChart_DrawTool_Group_Tr{font-size:12px;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.UMyChart_DrawTool_Group_Td{text-align:center}.UMyChart_DrawTool_Group_End_Tr{height:5px;border-bottom:1px solid;border-color:#ccc}.UMyChart_Draw_Modify_Dialog_Div{font-family:\\\\5FAE\\8F6F\\96C5\\9ED1;border:2px solid;width:-moz-fit-content;width:fit-content;border-color:#ccc;visibility:hidden;position:absolute;background-color:#fafafa;left:1px;top:1px;display:-ms-flexbox;display:flex}.UMyChart_Draw_Modify_Dialog_Drag_Div{width:24px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.UMyChart_Draw_Modify_Tooltip{position:absolute;display:none;top:30px;z-index:2;width:80px;color:#000;font-size:12px;text-align:center;background-color:#fafafa;border-radius:2px;padding:5px;pointer-events:none;border:1px solid #a9a9a9;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.jchart_pop_minute_dailog{position:absolute;height:500px;width:600px;z-index:809;visibility:"hidden";background-color:hsla(0,0%,100%,.95);border:1px solid rgba(200,210,219,.92);display:-ms-flexbox;display:flex;-ms-flex-flow:column;flex-flow:column}.jschart_pop_minute_chart{-ms-flex:1;flex:1}.jschart_pop_minute_chart_Title_Div{padding-left:2px;height:20px;border-bottom:1px solid;border-color:#ccc;display:-ms-flexbox;display:flex;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#dedede}.jschart_pop_minute_chart_Close_Div{margin-left:auto;padding-right:4px;cursor:pointer}.jchart_pop_keyboard_dailog{position:absolute;width:300px;height:440px;left:1px;top:1px;z-index:999;visibility:hidden;background-color:hsla(0,0%,100%,.95);border:1px solid #000;display:-ms-flexbox;display:flex;-ms-flex-flow:column;flex-flow:column}.jschart_keyboard_Title_Div{padding-left:2px;height:20px;border-bottom:1px solid;border-color:#ccc;display:-ms-flexbox;display:flex;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#dedede}.jschart_keyboard_Close_Div{margin-left:auto;padding-right:4px;cursor:pointer}.jschart_keyboard_Title{margin-left:2px}.jschart_keyboard_Input_Div{display:-ms-flexbox;display:flex;height:25px}.jschart_keyboard_input{width:100%;margin:2px;border:1px solid silver}.jschart_keyboard_Chart_Div{-ms-flex:1;flex:1;margin:2px}.UMyChart_Tooltip_Dialog_Div{font-family:\\\\5FAE\\8F6F\\96C5\\9ED1;border:1px solid;width:-moz-fit-content;width:fit-content;border-color:#ccc;visibility:hidden;position:absolute;background-color:#141414;left:1px;top:1px}.UMyChart_Tooltip_Title_Div{padding-left:2px;height:20px;border-bottom:1px solid;display:-ms-flexbox;display:flex;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#c84245}.UMyChart_Tooltip_Name_Div{margin-left:5px;color:#fafafa}.UMyChart_Tooltip_Close_Div{margin-left:auto;padding-right:4px;cursor:pointer;color:#b4b4b4}.UMyChart_Tooltip_Table{border-spacing:2px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:12px}.UMyChart_Tooltip_Title_Td{min-width:40px}.UMyChart_Tooltip_Text_Td{min-width:100px}.UMyChart_Tooltip_Title_Span{float:right}.UMyChart_Tooltip_Text_Sinlge_Td{min-width:80px}.UMyChart_Tooltip_Text_Span{float:right;margin-right:1px}.UMyChart_SelectRect_Dialog_Div{font-family:\\\\5FAE\\8F6F\\96C5\\9ED1;border:1px solid;width:-moz-fit-content;width:fit-content;border-color:#ccc;visibility:hidden;position:absolute;background-color:#e6e6e6;left:1px;top:1px}.UMyChart_SelectRect_Title_Div{padding-left:2px;height:20px;border-bottom:1px solid;display:-ms-flexbox;display:flex;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#c84245}.UMyChart_SelectRect_Name_Div{margin-left:5px;color:#fafafa}.UMyChart_SelectRect_Close_Div{margin-left:auto;padding-right:4px;cursor:pointer;color:#b4b4b4}.UMyChart_SelectRect_DateTime_Div{padding-top:4px;padding-left:10px;padding-right:10px;display:-ms-flexbox;display:flex}.UMyChart_SelectRect_ArrowButton_Span{width:18px;cursor:pointer;display:inline-block;text-align:center;background:#e1e1e1;border:1px solid #adadad;margin-left:5px;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;-khtml-user-selece:none;user-select:none}.UMyChart_SelectRect_DateTitle_Span,.UMyChart_SelectRect_DateValue_Span{padding-right:4px;padding-left:4px;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;-khtml-user-selece:none;user-select:none}.UMyChart_SelectRect_Table{border-collapse:collapse;margin-top:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:12px;width:100%;border:1px solid #adadad}.UMyChart_SelectRect_Td{min-width:120px;border:1px solid #adadad;padding-bottom:5px;padding-top:5px}.UMyChart_SelectRect_Item_Left_Span,.UMyChart_SelectRect_Item_Right_Span{padding-right:4px;padding-left:4px}.UMyChart_Tooltip_Float_Div{font-family:\\\\5FAE\\8F6F\\96C5\\9ED1;border:1px solid;width:-moz-fit-content;width:fit-content;border-color:#ccc;visibility:hidden;position:absolute;background-color:#141414;left:1px;top:1px;pointer-events:none}.UMyChart_Tooltip_Float_Table{border-spacing:3px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:12px}.UMyChart_Tooltip_Float_Title_Td{min-width:40px}.UMyChart_Tooltip_Float_Text_Td{min-width:80px;max-width:500px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.UMyChart_Tooltip_Float_Title_Span{color:#e6e6e6}.UMyChart_Tooltip_Float_Text_Span{float:right;margin-right:1px;color:#e6e6e6}.UMyChart_Tooltip_Float_Text2_Span{margin-left:1px}.UMyChart_Tooltip_Float_Text3_Span{margin-left:5px}.UMyChart_SearchIndex_Dialog_Div{font-family:\\\\5FAE\\8F6F\\96C5\\9ED1;border:1px solid;width:-moz-fit-content;width:fit-content;border-color:#ccc;visibility:hidden;position:absolute;background-color:#141414;left:1px;top:1px}.UMyChart_SearchIndex_Title_Div{padding-left:2px;height:20px;border-bottom:1px solid;display:-ms-flexbox;display:flex;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#c84245}.UMyChart_SearchIndex_Name_Div{margin-left:5px;color:#fafafa}.UMyChart_SearchIndex_Close_Div{margin-left:auto;padding-right:4px;cursor:pointer;color:#b4b4b4}.UMyChart_SearchIndex_Table_Div{height:300px;width:500px;overflow-y:scroll}.UMyChart_SearchIndex_Table{border-spacing:4px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:13px;max-height:300px}.UMyChart_SearchIndex_Group_Tr{height:25px}.UMyChart_SearchIndex_Text_Td{width:200px}.UMyChart_SearchIndex_Text_Span{margin-left:2px;margin-right:10px;cursor:pointer}.UMyChart_SearchIndex_Input{border:none;line-height:28px;background-color:transparent;width:99%;margin-left:10px}.UMyChart_SearchIndex_Container_Div{display:-ms-flexbox;display:flex;border-top:1px solid #ccc}.UMyChart_SearchIndex_GroupList_Div{height:300px;width:120px;border-right:1px solid #ccc;font-size:14px}.UMyChart_SearchIndex_Group_Div{margin:5px}.UMyChart_SearchIndex_Group_Span{margin-left:5px;cursor:pointer}.UMyChart_ModifyIndexParam_Dialog_Div{font-family:\\\\5FAE\\8F6F\\96C5\\9ED1;border:1px solid;width:-moz-fit-content;width:fit-content;border-color:#ccc;visibility:hidden;position:absolute;background-color:#141414;left:1px;top:1px}.UMyChart_ModifyIndexParam_Title_Div{padding-left:2px;height:20px;border-bottom:1px solid;display:-ms-flexbox;display:flex;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#c84245}.UMyChart_ModifyIndexParam_Name_Div{margin-left:5px;color:#fafafa}.UMyChart_ModifyIndexParam_Close_Div{margin-left:auto;padding-right:4px;cursor:pointer;color:#b4b4b4}.UMyChart_ModifyIndexParam_Table_Div{min-height:100px;max-height:500px;width:270px;overflow-y:auto}.UMyChart_ModifyIndexParam_Table{border-spacing:4px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:13px;width:100%}.UMyChart_ModifyIndexParam_Tr{height:25px}.UMyChart_ModifyIndexParam_Name_Td{width:50px}.UMyChart_ModifyIndexParam_Name_Span{margin-left:10px}.UMyChart_ModifyIndexParam_Input{margin-left:10px;margin-right:10px;border:.5px solid;line-height:16px;background-color:transparent;width:60px}.UMyChart_ModifyIndexParam_Button_Div{border-top:1px solid #ccc;padding:4px 14px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center}.UMyChart_ModifyIndexParam_Button_Div button{font-size:12px;padding:2px 10px 3px;border-radius:10px;border:1px solid #ccc;cursor:pointer}',""])},function(t,e,a){e=t.exports=a(31)(void 0),e.push([t.i,"@font-face{font-family:hqchart_drawtool;src:url("+a(258)+') format("woff2"),url('+a(259)+') format("woff"),url('+a(257)+') format("truetype")}.hqchart_drawtool{font-family:hqchart_drawtool!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-unlock:before{content:"\\E7FA"}.icon-lock:before{content:"\\E7FB"}.icon-big_arrow:before{content:"\\E6A5"}.icon-bottom-arrow-solid:before{content:"\\E60D"}.icon-biankuang:before{content:"\\E707"}.icon-tubiao_shuipingshexian:before{content:"\\E79B"}.icon-qushixianjiaodu:before{content:"\\E60C"}.icon-infoline:before{content:"\\E64A"}.icon-zitibeijingse:before{content:"\\E656"}.icon-zitiyanse:before{content:"\\E686"}.icon-huabi:before{content:"\\E663"}.icon-tuodong:before{content:"\\E6FF"}.icon-jiance:before{content:"\\E936"}.icon-tubiao_shizixian:before{content:"\\E79D"}.icon-xifu:before{content:"\\E71B"}.icon-maodianwenzi:before{content:"\\E62E"}.icon-maodian:before{content:"\\E6DB"}.icon-feibonaqisuduzulishan:before{content:"\\E620"}.icon-feibonaqihuiche:before{content:"\\E621"}.icon-feibonaqiqixing:before{content:"\\E622"}.icon-feibonaqizhouqixian:before{content:"\\E662"}.icon-jiangenjiaoduxian:before{content:"\\E619"}.icon-GoldenSection:before{content:"\\E601"}.icon-PercentageLine:before{content:"\\E603"}.icon-a-xiangpicachuxiangpica:before{content:"\\E60B"}.icon-jiagefanwei:before{content:"\\E618"}.icon-shijianfanwei:before{content:"\\E61F"}.icon-buxiangjiaojiao:before{content:"\\E617"}.icon-tubiao_buxiangjiaotongdao:before{content:"\\E79C"}.icon-drawicon_1:before{content:"\\E660"}.icon-drawicon_2:before{content:"\\E661"}.icon-tooltiptext:before{content:"\\EB0F"}.icon-Tooltip:before{content:"\\E62F"}.icon-fangkuai:before{content:"\\E600"}.icon-draw_quadrangle:before{content:"\\E62C"}.icon-arrow:before{content:"\\E7E3"}.icon-draw_arc:before{content:"\\E602"}.icon-draw_line:before{content:"\\E605"}.icon-draw_rays:before{content:"\\E606"}.icon-rectangle:before{content:"\\E607"}.icon-draw_parallel_lines:before{content:"\\E608"}.icon-setting:before{content:"\\E609"}.icon-recycle_bin:before{content:"\\E60A"}.icon-draw_trendline:before{content:"\\E60E"}.icon-draw_goldensection:before{content:"\\E60F"}.icon-draw_gannfan:before{content:"\\E610"}.icon-draw_percentage:before{content:"\\E611"}.icon-draw_waveband:before{content:"\\E612"}.icon-draw_resline:before{content:"\\E613"}.icon-draw_text:before{content:"\\E614"}.icon-draw_parallelchannel:before{content:"\\E615"}.icon-draw_wavemw:before{content:"\\E616"}.icon-draw_triangle:before{content:"\\E61A"}.icon-draw_pricechannel:before{content:"\\E61B"}.icon-draw_circle:before{content:"\\E61C"}.icon-draw_symangle:before{content:"\\E61D"}.icon-draw_hline:before{content:"\\E61E"}.icon-linear_1:before{content:"\\E657"}.icon-linear_2:before{content:"\\E659"}.icon-linear_3:before{content:"\\E65A"}.icon-ruler:before{content:"\\E65B"}.icon-price_line:before{content:"\\E65C"}.icon-vertical_line:before{content:"\\E65D"}.icon-waveruler:before{content:"\\E65E"}.icon-draw_box:before{content:"\\E65F"}.icon-draw_head_shoulders_bt:before{content:"\\E6A0"}.icon-draw_p_rays_lines:before{content:"\\E6A1"}.icon-draw_hlinesegment:before{content:"\\E6A2"}',""])},function(t,e,a){e=t.exports=a(31)(void 0),e.push([t.i,"@font-face{font-family:iconfont;src:url("+a(261)+') format("woff2"),url('+a(262)+') format("woff"),url('+a(260)+') format("truetype")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-Unchecked-box:before{content:"\\E6B4"}.icon-check-box:before{content:"\\E6B3"}.icon-paixujiantou:before{content:"\\E6B1"}.icon-up:before{content:"\\E6B2"}.icon-accountbox:before{content:"\\E6B0"}.icon-checked:before{content:"\\E6AF"}.icon-eye:before{content:"\\E78F"}.icon-eye-close:before{content:"\\E6AE"}.icon-fangxiangsanjiao-xiangshang:before{content:"\\E6AD"}.icon-fangxiangsanjiao-xiangshang-copy:before{content:"\\E86D"}.icon-jiantou-shang:before{content:"\\E86B"}.icon-jiantou-xia:before{content:"\\E86C"}.icon-sanjiaoxing:before{content:"\\E6AC"}.icon-sanjiaoxing-xia:before{content:"\\E710"}.icon-banner:before{content:"\\E6AB"}.icon-location1:before{content:"\\E6AA"}.icon-export:before{content:"\\E6A9"}.icon-lingxing:before{content:"\\E6A8"}.icon-location:before{content:"\\E6A7"}.icon-Title:before{content:"\\E6A6"}.icon-maxmize-:before{content:"\\E6A5"}.icon-HQchart:before{content:"\\E6A4"}.icon-button_add:before{content:"\\E6A3"}.icon-draw_hlinesegment:before{content:"\\E6A2"}.icon-draw_p_rays_lines:before{content:"\\E6A1"}.icon-draw_head_shoulders_bt:before{content:"\\E6A0"}.icon-drawicon_49:before{content:"\\E69F"}.icon-drawicon_48:before{content:"\\E69E"}.icon-drawicon_47:before{content:"\\E69D"}.icon-drawicon_46:before{content:"\\E69C"}.icon-drawicon_45:before{content:"\\E69B"}.icon-drawicon_44:before{content:"\\E69A"}.icon-drawicon_43:before{content:"\\E699"}.icon-drawicon_42:before{content:"\\E698"}.icon-drawicon_41:before{content:"\\E697"}.icon-drawicon_40:before{content:"\\E696"}.icon-drawicon_39:before{content:"\\E695"}.icon-drawicon_38:before{content:"\\E694"}.icon-drawicon_37:before{content:"\\E693"}.icon-drawicon_36:before{content:"\\E692"}.icon-drawicon_35:before{content:"\\E691"}.icon-drawicon_34:before{content:"\\E690"}.icon-drawicon_33:before{content:"\\E68F"}.icon-drawicon_32:before{content:"\\E67F"}.icon-drawicon_31:before{content:"\\E67E"}.icon-drawicon_30:before{content:"\\E67D"}.icon-drawicon_28:before{content:"\\E67B"}.icon-drawicon_29:before{content:"\\E67C"}.icon-drawicon_27:before{content:"\\E67A"}.icon-drawicon_26:before{content:"\\E679"}.icon-drawicon_25:before{content:"\\E678"}.icon-drawicon_24:before{content:"\\E677"}.icon-drawicon_23:before{content:"\\E676"}.icon-drawicon_22:before{content:"\\E675"}.icon-drawicon_21:before{content:"\\E674"}.icon-drawicon_20:before{content:"\\E673"}.icon-drawicon_19:before{content:"\\E672"}.icon-drawicon_18:before{content:"\\E671"}.icon-drawicon_17:before{content:"\\E670"}.icon-drawicon_16:before{content:"\\E66F"}.icon-drawicon_15:before{content:"\\E66E"}.icon-drawicon_14:before{content:"\\E66D"}.icon-drawicon_13:before{content:"\\E66C"}.icon-drawicon_12:before{content:"\\E66B"}.icon-drawicon_11:before{content:"\\E66A"}.icon-drawicon_10:before{content:"\\E669"}.icon-drawicon_9:before{content:"\\E668"}.icon-drawicon_8:before{content:"\\E667"}.icon-drawicon_7:before{content:"\\E666"}.icon-drawicon_6:before{content:"\\E665"}.icon-drawicon_5:before{content:"\\E664"}.icon-drawicon_4:before{content:"\\E663"}.icon-drawicon_3:before{content:"\\E662"}.icon-drawicon_2:before{content:"\\E661"}.icon-drawicon_1:before{content:"\\E660"}.icon-draw_box:before{content:"\\E65F"}.icon-waveruler:before{content:"\\E65E"}.icon-vertical_line:before{content:"\\E65D"}.icon-price_line:before{content:"\\E65C"}.icon-ruler:before{content:"\\E65B"}.icon-linear_3:before{content:"\\E65A"}.icon-linear_2:before{content:"\\E659"}.icon-linear_1:before{content:"\\E657"}.icon-stockStar:before{content:"\\E658"}.icon-camera:before{content:"\\E654"}.icon-change_index:before{content:"\\E656"}.icon-overlay_index:before{content:"\\E655"}.icon-houtui:before{content:"\\E651"}.icon-qianjin:before{content:"\\E652"}.icon-exit:before{content:"\\E653"}.icon-refresh:before{content:"\\E650"}.icon-sub:before{content:"\\E64E"}.icon-add:before{content:"\\E64F"}.icon-guanbi:before{content:"\\E62B"}.icon-sousuo:before{content:"\\E62A"}.icon-margin:before{content:"\\E629"}.icon-shhk:before{content:"\\E628"}.icon-hk:before{content:"\\E627"}.icon-drawicon_message:before{content:"\\E64D"}.icon-drawicon_s:before{content:"\\E64C"}.icon-drawicon_b:before{content:"\\E70F"}.icon-drawicon_close:before{content:"\\E68C"}.icon-drawicon_dollar:before{content:"\\E626"}.icon-drawicon_up:before{content:"\\E625"}.icon-drawicon_down-copy:before{content:"\\E68B"}.icon-drawicon_bad:before{content:"\\E600"}.icon-drawicon_good:before{content:"\\E624"}.icon-kline_train_buy:before{content:"\\E64A"}.icon-kline_train_sell:before{content:"\\E64B"}.icon-bianji:before{content:"\\E623"}.icon-info_num_more:before{content:"\\E649"}.icon-info_num_11:before{content:"\\E635"}.icon-info_num_10:before{content:"\\E636"}.icon-info_num_12:before{content:"\\E637"}.icon-info_num_13:before{content:"\\E638"}.icon-info_num_14:before{content:"\\E639"}.icon-info_num_15:before{content:"\\E63A"}.icon-info_num_1:before{content:"\\E63B"}.icon-info_num_16:before{content:"\\E63C"}.icon-info_num_3:before{content:"\\E63D"}.icon-info_num_17:before{content:"\\E63E"}.icon-info_num_4:before{content:"\\E63F"}.icon-info_num_2:before{content:"\\E640"}.icon-info_num_6:before{content:"\\E641"}.icon-info_num_18:before{content:"\\E642"}.icon-info_num_20:before{content:"\\E643"}.icon-info_num_19:before{content:"\\E644"}.icon-info_num_5:before{content:"\\E645"}.icon-info_num_9:before{content:"\\E646"}.icon-info_num_7:before{content:"\\E647"}.icon-info_num_8:before{content:"\\E648"}.icon-info_quarter_announcement-copy:before{content:"\\E686"}.icon-info_block_trading:before{content:"\\E630"}.icon-info_investor:before{content:"\\E631"}.icon-info_research:before{content:"\\E632"}.icon-info_announcement:before{content:"\\E633"}.icon-info_quarter_announcement:before{content:"\\E634"}.icon-info_research_hscreen:before{content:"\\E688"}.icon-info_block_trading_hscreen:before{content:"\\E689"}.icon-info_investor_hscreen:before{content:"\\E684"}.icon-info_announcement-copy:before{content:"\\E685"}.icon-info_trade_detail_hscreen:before{content:"\\E68A"}.icon-info_trade_detail:before{content:"\\E62F"}.icon-info_pforecast_hscreen:before{content:"\\E687"}.icon-info_pforecast:before{content:"\\E62E"}.icon-jiacu:before{content:"\\E61F"}.icon-shezhi:before{content:"\\E620"}.icon-qingxieL:before{content:"\\E622"}.icon-xia:before{content:"\\E618"}.icon-shang:before{content:"\\E619"}.icon-drawicon_up2:before{content:"\\E68D"}.icon-drawicon_down2:before{content:"\\E68E"}.icon-menu_arraw_right:before{content:"\\E60B"}.icon-menu_arraw_left:before{content:"\\E60D"}.icon-right:before{content:"\\E601"}.icon-left:before{content:"\\E603"}.icon-draw_fibonacci:before{content:"\\E62D"}.icon-draw_quadrangle:before{content:"\\E62C"}.icon-arrow_down:before{content:"\\E681"}.icon-arrow_left:before{content:"\\E680"}.icon-arrow_right:before{content:"\\E682"}.icon-arrow_up:before{content:"\\E683"}.icon-chip_default:before{content:"\\E621"}.icon-draw_hline:before{content:"\\E61E"}.icon-draw_symangle:before{content:"\\E61D"}.icon-draw_circle:before{content:"\\E61C"}.icon-draw_pricechannel:before{content:"\\E61B"}.icon-draw_triangle:before{content:"\\E61A"}.icon-chip_date:before{content:"\\E617"}.icon-draw_wavemw:before{content:"\\E616"}.icon-draw_parallelchannel:before{content:"\\E615"}.icon-draw_text:before{content:"\\E614"}.icon-draw_resline:before{content:"\\E613"}.icon-draw_waveband:before{content:"\\E612"}.icon-draw_percentage:before{content:"\\E611"}.icon-draw_gannfan:before{content:"\\E610"}.icon-draw_goldensection:before{content:"\\E60F"}.icon-draw_trendline:before{content:"\\E60E"}.icon-close:before{content:"\\E60C"}.icon-recycle_bin:before{content:"\\E60A"}.icon-setting:before{content:"\\E609"}.icon-draw_parallel_lines:before{content:"\\E608"}.icon-rectangle:before{content:"\\E607"}.icon-draw_rays:before{content:"\\E606"}.icon-draw_line:before{content:"\\E605"}.icon-index_param:before{content:"\\E604"}.icon-draw_arc:before{content:"\\E602"}',""])},function(t,e,a){e=t.exports=a(31)(void 0),e.push([t.i,".box{width:100%;height:100%;position:relative;overflow:hidden}.box .left,.box .right{position:absolute;top:0}.box .left{width:240px;height:100%;box-sizing:border-box;left:0;overflow-x:auto}.box .left .el-menu{min-height:100%;border-right:1px solid #000}.box .left .el-menu .el-menu-item:hover,.box .left .el-menu .el-submenu__title:hover{background-color:#363636!important}.box .right{left:240px;width:calc(100% - 240px);height:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.box .right .rightTab{height:40px;width:100%;background:#191919;border-bottom:1px solid #000;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.box .right .rightTab>.btn{cursor:pointer;width:100%;text-align:center;color:#bcbfc4}.box .right .rightTab>.btn:first-child{padding-right:60px;text-align:right}.box .right .rightTab>.btn:last-child{padding-left:60px;text-align:left}.box .right .rightTab>.btn.active,.box .right .rightTab>.btn:hover{color:#ff6900}.box .right .rightContent{height:calc(100% - 40px);width:100%}.box .right .rightContent .kline_periodWrap{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;background:#191919}.box .right .rightContent .kline_periodWrap .btnGroup:first-child{width:50%}.box .right .rightContent .kline_periodWrap .btnGroup:last-child{width:30%}.box .right .btnGroup{border:1px solid #242424;color:#bcbfc4;display:-ms-flexbox;display:flex;background:#191919}.box .right .btnGroup .btn{height:40px;-ms-flex:1;flex:1;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;border-right:1px solid #242424;cursor:pointer}.box .right .btnGroup .btn:last-child{border-right:none}.box .right .btnGroup .btn.active,.box .right .btnGroup .btn:hover{color:#ff6900}.box .right #hqchart_kline,.box .right #hqchart_minute{background-color:#000;height:300px;position:relative}.box .right .statementWrap{background:#191919;padding:10px;font-size:12px;color:#de432d;line-height:20px;text-align:center}",""])},,,,,,,,,,,,,,,,,,,,,,function(t,e,a){"use strict";function i(){this.HistoryData,this.BuyData,this.SellData,this.IndexClose,this.NetCalculateModel=0,this.InitialCapital=1e4,this.Data=new n.default,this.SetPolicyData=function(t){this.HistoryData=t.KLineData,this.BuyData=t.BuyData,this.SellData=t.SellData,t.IndexClose&&(this.IndexClose=t.IndexClose)},this.ClearData=function(){this.Data=new n.default},this.GetBSData=function(t){for(var e=null,a=0;a<this.HistoryData.length;++a){if(this.HistoryData[a].Date>=t){e=a;break}}if(null===e)return null;console.log("[RegressionTest::GetBSData] startDate="+t+" index="+e);for(var i=[],r=null,a=e;a<this.HistoryData.length;++a){var n=this.BuyData[a],o=this.SellData[a],s=this.HistoryData[a];if(null===r){if(n>0){var l={Data:s,Count:0};a+1<this.HistoryData.length&&(l.NextOpen=this.HistoryData[a+1].Open),r={B:[l],S:null}}}else{for(var h in r.B)++r.B[h].Count;if(n>0){var l={Data:s,Count:0};a+1<this.HistoryData.length&&(l.NextOpen=this.HistoryData[a+1].Open),r.B.push(l)}else o>0&&(r.S={Data:s},i.push(r),r=null)}}var u={StartDate:this.HistoryData[e].Date,StartIndex:e,Count:this.HistoryData.length-e,BSData:i};return console.log("[RegressionTest::GetBSData] data",u),u},this.Calculate=function(t){var e={Count:t.Count,Max:null,Min:null,Average:null},a={Count:0,Days:0,Success:0,Fail:0,SuccessRate:0};for(var i in t.BSData){var r=t.BSData[i];for(var n in r.B){var o=r.B[n];null===e.Max?e.Max=o.Count:e.Max<o.Count&&(e.Max=o.Count),null===e.Min?e.Min=o.Count:e.Min>o.Count&&(e.Min=o.Count),++a.Count,a.Days+=o.Count,r.S.Data.Close>o.Data.Open?++a.Success:++a.Fail}}a.Count>0&&(e.Average=a.Days/a.Count,a.SuccessRate=a.Success/a.Count);var s,l=1;for(var i in t.BSData){var r=t.BSData[i];s=1===this.NetCalculateModel&&r.B[0].NextOpen>0?r.B[0].NextOpen:r.B[0].Data.Open;l*=(r.S.Data.Close-s)/s+1}l-=1;var h=this.HistoryData[t.StartIndex].Close,u=this.HistoryData[this.HistoryData.length-1].Close,C=(u-h)/h;console.log("[RegressionTest::Calculate] stock profit first["+this.HistoryData[t.StartIndex].Date+", YClose="+this.HistoryData[t.StartIndex].YClose+"] end["+this.HistoryData[this.HistoryData.length-1].Date+", Close="+this.HistoryData[this.HistoryData.length-1].Close+"]");var c=this.CaclulateNetValue(t),f=null,d=null;c&&c.length>0&&(f=this.CaclulateMaxDropdown(c),this.IndexClose&&(d=this.CaclulateBeta(c)));var D={Day:e,Trade:a,Profit:l,StockProfit:C,Excess:l-C,NetValue:c,MaxDropdown:f,Beta:d,BSDataPair:t.BSData};return console.log("[RegressionTest::Calculate] NetCalculateModel, result ",this.NetCalculateModel,D),D},this.CaclulateNetValue=function(t){for(var e,a=t.StartIndex,i=[],r={Position:0,Cache:this.InitialCapital},n=null,o=a;o<this.HistoryData.length;++o){var s=this.BuyData[o],l=this.SellData[o],h=this.HistoryData[o],u={Date:h.Date,Position:r.Position,Cache:r.Cache,Open:h.Open,Close:h.Close};if(u.MarketValue=u.Position*u.Close+u.Cache,null===n){if(s>0){n={B:{Data:h},S:null},e=1===this.NetCalculateModel&&o+1<this.HistoryData.length&&this.HistoryData[o+1].Open>0?this.HistoryData[o+1].Open:u.Open;var C=parseInt(u.Cache/e),c=u.Cache-e*C;u.Position=C,u.Cache=c,u.MarketValue=u.Position*u.Close+u.Cache}}else if(l>0){n.S={Data:h},n=null;var f=u.Position*u.Close;u.Position=0,u.Cache+=f,u.MarketValue=u.Position*u.Close+u.Cache}r.Position=u.Position,r.Cache=u.Cache,u.Net=u.MarketValue/this.InitialCapital,this.IndexClose&&(u.IndexClose=this.IndexClose[o]),i.push(u)}if(i.length<=0)return[];for(var d=[],o=0;o<i.length;++o){var D=i[o],m={Net:D.Net,Date:D.Date,Close:D.Close};D.IndexClose&&(m.IndexClose=D.IndexClose),d.push(m)}return d},this.CaclulateMaxDropdown=function(t){for(var e,a=t[0].Net,i=0,r=1;r<t.length;++r){var n=t[r],o=1-n.Net/a;i<o&&(i=o,e=n),a<n.Net&&(a=n.Net)}return console.log("[RegressionTest::CaclulateMaxDropdown] maxDay",e),i},this.CaclulateBeta=function(t){for(var e=t[0],a=[],i=[],r=0,n=0,o=1;o<t.length;++o){a[o-1]=0,i[o-1]=0;var s=t[o];s.IndexClose>0&&e.IndexClose>0&&(a[o-1]=(s.IndexClose-e.IndexClose)/e.IndexClose),s.Net>0&&e.Net>0&&(i[o-1]=(s.Net-e.Net)/e.Net),r+=a[o-1],n+=i[o-1],e=s}for(var l=r/a.length,h=n/i.length,u=0,o=0;o<a.length;++o)u+=(i[o]-h)*(a[o]-l);for(var C=0,o=0;o<a.length;++o)C+=(a[o]-l)*(a[o]-l);return u/C},this.Execute=function(t){for(var e in t){var a=t[e];if(this.Data.has(a.Name))console.log("[RegressionTest::Execute] id="+e+" Name="+a.Name+" Date:"+a.Date+" is exsit.");else{console.log("[RegressionTest::Execute] id="+e+" Name="+a.Name+" Date:"+a.Date);var i=this.GetBSData(a.Date),r=this.Calculate(i);this.Data.set(a.Name,r)}}}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(32),n=function(t){return t&&t.__esModule?t:{default:t}}(r);i.CaclulateOverlayData=function(t){if(!t.Main||!t.Sub)return null;var e=t.Main.length;for(var a in t.Sub){if(t.Sub[a].length!=e)return console.log("[RegressionTest::OverlayData] id="+a+" data count not match. MainData count="+e),null}var i=[],r={Sub:[]};r.Main=t.Main[0],i.push([]);for(var a=0;a<t.Sub.length;++a){var n=t.Sub[a];r.Sub[a]=n[0],i.push([])}for(var a=0;a<t.Main.length;++a){var o=t.Main[a],s=(o-r.Main)/r.Main;i[0][a]=s;for(var l=0;l<t.Sub.length;++l){var n=t.Sub[l],h=n[a],u=(h-r.Sub[l])/r.Sub[l];i[l+1][a]=u}}return i},i.GetPolicyData=function(t){var e={KLineData:null,IndexClose:null,BuyData:null,SellData:null};e.KLineData=t.HistoryData.Data;for(var a in t.OutVar){var i=t.OutVar[a];"INDEXCLOSE"==i.Name?e.IndexClose=i.Data:"DRAWICON"==i.Name&&i.Draw&&i.Draw.Icon&&(13===i.Draw.Icon.ID?e.BuyData=i.Draw.DrawData:14===i.Draw.Icon.ID&&(e.SellData=i.Draw.DrawData))}return e.KLineData&&e.BuyData&&e.SellData?e:null},e.default={RegressionTest:i}},function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){this.Domain="http://127.0.0.1:8886",this.CacheDomain="http://127.0.0.1:8886"}function n(){this.Stop,this.Down,this.Up,this.Unchanged,this.UpStock={Symbol:null,Name:null},this.DownStock={Symbol:null,Name:null}}function o(){this.Good,this.GoodIncrease={Day1:null,Week1:null,Week4:null}}function s(t,e,a){this.arySymbol=new Array,this.SortField=t,this.Order=e,this.TagID=new V.default([a])}function l(){this.ROE,this.Date,this.PerSEarning,this.EPS,this.PerNetAsset,this.NProfit,this.NProfitIncrease,this.NnetProfit,this.NnProfitIncrease,this.NnProfitSpeed,this.Benford,this.SetData=function(t){isNaN(t.roe)||(this.ROE=t.roe),isNaN(t.finance.date)||(this.Date=t.finance.date),isNaN(t.finance.persearning)||(this.PerSEarning=t.finance.persearning),isNaN(t.finance.eps)||(this.EPS=t.finance.eps),isNaN(t.finance.pernetasset)||(this.PerNetAsset=t.finance.pernetasset),isNaN(t.finance.nprofit)||(this.NProfit=t.finance.nprofit),isNaN(t.finance.nprofitincrease)||(this.NProfitIncrease=t.finance.nprofitincrease),isNaN(t.finance.nnetprofit)||(this.NnetProfit=t.finance.nnetprofit),isNaN(t.finance.nnprofitincrease)||(this.NnProfitIncrease=t.finance.nnprofitincrease),isNaN(t.finance.nnprofitspeed)||(this.NnProfitSpeed=t.finance.nnprofitspeed),isNaN(t.finance.benford)||(this.Benford=t.finance.benford)}}function h(){this.Date,this.A,this.Total,this.ARate,this.SetData=function(t){isNaN(t.capital.date)||(this.Date=t.capital.date),isNaN(t.capital.a)||(this.A=t.capital.a),isNaN(t.capital.total)||(this.Total=t.capital.total),isNaN(t.capital.arate)||(this.ARate=t.capital.arate)}}function u(){this.SuperIn,this.SuperOut,this.BigIn,this.BigOut,this.MidIn,this.MidOut,this.SmallIn,this.SmallOut,this.MainIn,this.MainOut,this.MainNetIn,this.SetData=function(t){this.SuperIn=t.superin,this.SuperOut=t.superout,this.BigIn=t.bigin,this.BigOut=t.bigout,this.MidIn=t.midin,this.MidOut=t.midout,this.SmallIn=t.smallin,this.SmallOut=t.smallout,this.MainIn=t.mainin,this.MainOut=t.mainout,this.MainNetIn=t.mainnetin}}function C(){this.SuperIn,this.SuperOut,this.BigIn,this.BigOut,this.MidIn,this.MidOut,this.SmallIn,this.SmallOut,this.MainIn,this.MainOut,this.MainNetIn,this.MainNetInRatio,this.SetData=function(t){this.SuperIn=t.superin,this.SuperOut=t.superout,this.BigIn=t.bigin,this.BigOut=t.bigout,this.MidIn=t.midin,this.MidOut=t.midout,this.SmallIn=t.smallin,this.SmallOut=t.smallout,this.MainIn=t.mainin,this.MainOut=t.mainout,this.MainNetIn=t.mainnetin,this.MainNetInRatio=t.mainnetinratio}}function c(){this.DDX,this.DDY,this.DDZ,this.SetData=function(t){this.DDX=t.ddx,this.DDY=t.ddy,this.DDZ=t.ddz}}function f(){this.Name,this.Business,this.Vol,this.Price,this.ReleaseDate,this.Competence,this.SetData=function(t){t.company&&(this.Name=t.company.name,this.Business=t.company.business,this.Vol=t.company.vol,this.Price=t.company.price,this.ReleaseDate=t.company.releasedate,this.Competence=t.company.corecompetence)}}function d(){this.Industry,this.Region,this.Concept,this.SetData=function(t){this.SetIndustryData(t),this.SetRegionData(t),this.SetConceptData(t)},this.SetIndustryData=function(t){if(t.industry){this.Industry=[];for(var e in t.industry){var a=t.industry[e];this.Industry.push({Name:a.name,Symbol:a.symbol})}}},this.SetRegionData=function(t){if(t.region){this.Region=[];for(var e in t.region){var a=t.region[e];this.Region.push({Name:a.name,Symbol:a.symbol})}}},this.SetConceptData=function(t){if(t.concept){this.Concept=[];for(var e in t.concept){var a=t.concept[e];this.Concept.push({Name:a.name,Symbol:a.symbol})}}}}function D(){this.IsMargin=!1,this.IsHK=!1,this.IsSHHK=!1,this.IsSZHK=!1,this.STType=0,this.HK,this.SetData=function(t){t.events&&(isNaN(t.events.margin)||(this.IsMargin=1==t.events.margin),isNaN(t.events.hk)||(this.IsHK=1==t.events.hk),isNaN(t.events.shhk)||(this.IsSHHK=1==t.events.shhk),isNaN(t.events.szhk)||(this.IsSZHK=1==t.events.szhk),isNaN(t.events.st)||(this.STType=t.events.st),this.IsHK&&t.events.hksymbol&&t.events.hkname&&(this.HK={Symbol:t.events.hksymbol,Name:t.events.hkname}))}}function m(t){var e=t.toUpperCase();if(e.indexOf(".SH")>0){if(e=e.replace(".SH",""),"0"==e.charAt(0)&&parseInt(e)<=3e3)return!0}else if(e.indexOf(".SZ")>0){if(e=e.replace(".SZ",""),"3"==e.charAt(0)&&"9"==e.charAt(1))return!0}else if(e.indexOf(".CI")>0)return!0;return!1}function p(t){this.Symbol=t,this.Name,this.Open,this.Price,this.High,this.Low,this.YClose,this.Vol,this.Amount,this.Date,this.Time,this.ExchangeRate,this.Amplitude,this.VolRatio,this.Increase,this.MaxPrice,this.MinPrice,this.RFPrice,this.IndexTop,this.Week,this.MinuteAmplitude={},this.RiseFallSpeed={},this.MAmount={},this.GetBaseData=function(t,e){switch(this.BaseDataTagID.add(t),e){case W.SYMBOL:return this.Symbol;case W.NAME:return this.Name;case W.OPEN:return this.Open;case W.PRICE:return this.Price;case W.YCLOSE:return this.YClose;case W.HIGH:return this.High;case W.LOW:return this.Low;case W.VOL:return this.Vol;case W.AMOUNT:return this.Amount;case W.DATE:return this.Date;case W.TIME:return this.Time;case W.INCREASE:return this.Increase;case W.EXCHANGE_RATE:return this.ExchangeRate;case W.AMPLITUDE:return this.Amplitude;case W.MAX_PRICE:return this.MaxPrice;case W.MIN_PRICE:return this.MinPrice;case W.RISE_FALL_PRICE:return this.RFPrice;case W.VOLRATIO:return this.VolRatio;case W.INDEXTOP:return this.IndexTop;case W.WEEK:return this.Week}},this.Heat,this.GetHeatData=function(t){return this.HeatTagID.add(t),this.Heat},this.Sort=new G.default,this.GetSortData=function(t,e,a){var i=e.toString()+"-"+a.toString();if(!this.Sort.has(i)){var r=new s(e,a,t);return this.Sort.set(i,r),r}var r=this.Sort.get(i);return r.TagID.add(t),r},this.Buy5,this.GetBuy5=function(t){return this.BuySellTagID.add(t),this.Buy5},this.Sell5,this.GetSell5=function(t){return this.BuySellTagID.add(t),this.Sell5},this.Deal,this.GetDeal=function(t){return this.DealTagID.add(t),this.Deal},this.MarketValue,this.FlowMarketValue,this.Bookrate,this.Bookdiffer,this.PE,this.PE2,this.PE3,this.PB,this.GetDerivative=function(t,e){switch(this.DerivativeTagID.add(t),e){case W.MARKET_VALUE:return this.MarketValue;case W.FLOW_MARKET_VALUE:return this.FlowMarketValue;case W.BOOK_RATE:return this.Bookrate;case W.BOOK_DIFFER:return this.Bookdiffer;case W.PE:return this.PE;case W.PE2:return this.PE2;case W.PE3:return this.PE3;case W.PB:return this.PB}},this.Finance,this.GetFinance=function(t,e){if(!this.Finance)return this.FinanceTagID.add(t),null;switch(e){case W.ROE:return this.Finance.ROE;case W.FINANCE_DATE:return this.Finance.Date;case W.FINANCE_PERSEARNING:return this.Finance.PerSEarning;case W.FINANCE_PERNETASSET:return this.Finance.PerNetAsset;case W.FINANCE_NPROFIT:return this.Finance.NProfit;case W.FINANCE_NPROFITINCREASE:return this.Finance.NProfitIncrease;case W.FINANCE_NNETPROFIT:return this.Finance.NnetProfit;case W.FINANCE_NNPROFITINCREASE:return this.Finance.NnProfitIncrease;case W.FINANCE_NNPROFITSPEED:return this.Finance.NnProfitSpeed;case W.FINANCE_EPS:return this.Finance.EPS;case W.FINANCE_BENFORD:return this.Finance.Benford}},this.Capital,this.GetCapital=function(t,e){if(!this.Capital)return this.CapitalTagID.add(t),null;switch(e){case W.CAPITAL_TOTAL:return this.Capital.Total;case W.CAPITAL_A:return this.Capital.A;case W.CAPTIAL_ARATE:return this.Capital.ARate}},this.CapitalFlowDay,this.CapitalFlowDay3,this.CapitalFlowDay5,this.CapitalFlowDay10,this.GetCapitalFlowDay=function(t,e){var a=null;switch(e){case W.CAPITAL_FLOW_DAY:this.CapitalFlowDayID.add(t),this.CapitalFlowDay&&(a=this.CapitalFlowDay);break;case W.CAPITAL_FLOW_DAY3:this.CapitalFlowDay3ID.add(t),this.CapitalFlowDay3&&(a=this.CapitalFlowDay3);break;case W.CAPITAL_FLOW_DAY5:this.CapitalFlowDay5ID.add(t),this.CapitalFlowDay5&&(a=this.CapitalFlowDay5);break;case W.CAPITAL_FLOW_DAY10:this.CapitalFlowDay10ID.add(t),this.CapitalFlowDay10&&(a=this.CapitalFlowDay10)}return a},this.DDE,this.DDE3,this.DDE5,this.DDE10,this.GetDDE=function(t,e){var a=null;switch(e){case W.DDE:this.DDEID.add(t),this.DDE&&(a=this.DDE);break;case W.DDE3:this.DDE3ID.add(t),this.DDE3&&(a=this.DDE3);break;case W.DDE5:this.DDE5ID.add(t),this.DDE5&&(a=this.DDE5);break;case W.DDE10:this.DDE10ID.add(t),this.DDE10&&(a=this.DDE10)}return a},this.Event,this.GetEvent=function(t,e){return this.Event?this.Event:(this.EventTagID.add(t),null)},this.Company,this.GetCompany=function(t,e){if(!this.Company)return this.CompanyTagID.add(t),null;switch(e){case W.COMPANY_NAME:return this.Company.Name;case W.COMPANY_BUSINESS:return this.Company.Business;case W.COMPANY_VOL:return this.Company.Vol;case W.COMPANY_PRICE:return this.Company.Price;case W.COMPANY_RELEASEDATE:return this.Company.ReleaseDate;case W.COMPANY_COMPETENCE:return this.Company.Competence}},this.Plate,this.GetPlate=function(t,e){if(!this.Plate)return this.PlateTagID.add(t),null;switch(e){case W.PLATE_INDUSTRY:return this.Plate.Industry;case W.PLATE_CONCEPT:return this.Plate.Concept;case W.PLATE_REGION:return this.Plate.Region}},this.TagID=new V.default,this.BaseDataTagID=new V.default,this.HeatTagID=new V.default,this.BuySellTagID=new V.default,this.DealTagID=new V.default,this.DerivativeTagID=new V.default,this.FinanceTagID=new V.default,this.CapitalTagID=new V.default,this.CapitalFlowDayID=new V.default,this.CapitalFlowDay3ID=new V.default,this.CapitalFlowDay5ID=new V.default,this.CapitalFlowDay10ID=new V.default,this.DDEID=new V.default,this.DDE3ID=new V.default,this.DDE5ID=new V.default,this.DDE10ID=new V.default,this.EventTagID=new V.default,this.CompanyTagID=new V.default,this.PlateTagID=new V.default,this.AttachTagID=function(t){this.TagID.add(t)},this.ClearTagID=function(){this.TagID.clear(),this.BaseDataTagID.clear(),this.HeatTagID.clear(),this.BuySellTagID.clear(),this.DealTagID.clear(),this.DerivativeTagID.clear(),this.FinanceTagID.clear(),this.CapitalTagID.clear(),this.CapitalFlowDayID.clear(),this.CapitalFlowDay3ID.clear(),this.CapitalFlowDay5ID.clear(),this.CapitalFlowDay10ID.clear(),this.DDEID.clear(),this.DDE3ID.clear(),this.DDE5ID.clear(),this.DDE10ID.clear(),this.EventTagID.clear(),this.CompanyTagID.clear();var t=!0,e=!1,a=void 0;try{for(var i,r=(0,B.default)(this.Sort);!(t=(i=r.next()).done);t=!0){i.value[1].TagID.clear()}}catch(t){e=!0,a=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw a}}},this.RemoveTagID=function(t){this.TagID.delete(t),this.BaseDataTagID.delete(t),this.HeatTagID.delete(t),this.BuySellTagID.delete(t),this.DealTagID.delete(t),this.DerivativeTagID.delete(t),this.FinanceTagID.delete(t),this.CapitalTagID.delete(t),this.CapitalFlowDayID.delete(t),this.CapitalFlowDay3ID.delete(t),this.CapitalFlowDay5ID.delete(t),this.CapitalFlowDay10ID.delete(t),this.DDEID.delete(t),this.DDE3ID.delete(t),this.DDE5ID.delete(t),this.DDE10ID.delete(t),this.EventTagID.delete(t),this.CompanyTagID.delete(t);var e=!0,a=!1,i=void 0;try{for(var r,n=(0,B.default)(this.Sort);!(e=(r=n.next()).done);e=!0){r.value[1].TagID.delete(t)}}catch(t){a=!0,i=t}finally{try{!e&&n.return&&n.return()}finally{if(a)throw i}}},this.SetBaseData=function(t){this.Name=t.name,this.YClose=t.yclose,this.Price=t.price,this.High=t.high,this.Low=t.low,this.Open=t.open,this.Vol=t.vol,this.Amount=t.amount,this.Date=t.date,this.Time=t.time,this.Increase=t.increase,isNaN(t.exchangerate)||(this.ExchangeRate=t.exchangerate),isNaN(t.amplitude)||(this.Amplitude=t.amplitude),isNaN(t.volratio)||(this.VolRatio=t.volratio),this.Name.indexOf("ST")>=0?(this.MaxPrice=1.05*this.Open,this.MinPrice=.95*this.Open):(this.MaxPrice=1.1*this.Open,this.MinPrice=.9*this.Open),this.Price&&this.YClose&&(this.RFPrice=this.Price-this.YClose),t.week&&(this.Week={},this.Week.Week1=t.week.week1,this.Week.Week4=t.week.week4,this.Week.Week13=t.week.week13,this.Week.Week26=t.week.week26,this.Week.Week52=t.week.week52)},this.SetDerivativeData=function(t){this.MarketValue=t.marketvalue,this.FlowMarketValue=t.flowmarketvalue,this.Bookrate=t.bookrate,this.Bookdiffer=t.bookdiffer,this.PE=t.pe,this.PE2=t.pe2,this.PE3=t.pe3,this.PB=t.pb},this.SetFinanceData=function(t){console.log(t),t.finance&&(this.Finance=new l,this.Finance.SetData(t))},this.SetCapitalData=function(t){t.capital&&(this.Capital=new h,this.Capital.SetData(t))},this.SetIndexBaseData=function(t){this.SetBaseData(t);var e=new n;t.indextop&&(e.Up=t.indextop.up,e.Down=t.indextop.down,e.Unchanged=t.indextop.unchanged,e.Stop=t.indextop.stop,e.UpStock.Symbol=t.indextop.upstock.symbol,e.UpStock.Name=t.indextop.upstock.name,e.DownStock.Symbol=t.indextop.downstock.symbol,e.DownStock.Name=t.indextop.downstock.name),this.IndexTop=e},this.SetBuySellData=function(t){this.SetBaseData(t),this.Buy5=new Array,this.Sell5=new Array;for(var e in t.buy){var a=t.buy[e];this.Buy5.push({Price:a.price,Vol:a.vol})}for(var e in t.sell){var a=t.sell[e];this.Sell5.push({Price:a.price,Vol:a.vol})}},this.SetDealData=function(t){this.Price=t.price,this.High=t.high,this.Low=t.low,this.Vol=t.vol,this.Amount=t.amount,this.Date=t.date,this.Time=t.time,this.Increase=t.increase,this.Deal=new Array;for(var e in t.deal){var a=t.deal[e];if(!isNaN(a.price)&&!isNaN(a.time)){var i="";0===a.bs?i="B":1===a.bs&&(i="S"),this.Deal.push({Price:a.price,Amount:a.amount,Vol:a.vol,Time:a.time,BS:i})}}},this.SetHeatData=function(t){var e=new o;e.Good=t.quadrant.good,e.GoodIncrease.Day1=t.quadrant.gincrease.day1,e.GoodIncrease.Week1=t.quadrant.gincrease.week1,e.GoodIncrease.Week4=t.quadrant.gincrease.week4,this.Heat=e},this.SetCapitalFlowDayData=function(t,e){if(t)switch(e){case K.CAPITAL_FLOW_DAY_DATA:this.CapitalFlowDay=new u,this.CapitalFlowDay.SetData(t);break;case K.CAPITAL_FLOW_DAY3_DATA:this.CapitalFlowDay3=new C,this.CapitalFlowDay3.SetData(t);break;case K.CAPITAL_FLOW_DAY5_DATA:this.CapitalFlowDay5=new C,this.CapitalFlowDay5.SetData(t);break;case K.CAPITAL_FLOW_DAY10_DATA:this.CapitalFlowDay10=new C,this.CapitalFlowDay10.SetData(t)}},this.SetDDE=function(t,e){if(t){switch(e){case K.DDE_DAY_DATA:this.DDE=new c,this.DDE.SetData(t);break;case K.DDE_DAY3_DATA:this.DDE3=new c,this.DDE3.SetData(t);break;case K.DDE_DAY5_DATA:this.DDE5=new c,this.DDE5.SetData(t);break;case K.DDE_DAY10_DATA:this.DDE10=new c,this.DDE10.SetData(t)}return t}},this.SetEventData=function(t){t.events&&(this.Event=new D,this.Event.SetData(t))},this.SetCompanyData=function(t){t.company&&(this.Company=new f,this.Company.SetData(t))},this.SetPlateData=function(t){(t.industry||t.region||t.concept)&&(this.Plate=new d,this.Plate.SetData(t))},this.SetData=function(t){t.name&&(this.Name=t.name),isNaN(t.yclose)||(this.YClose=t.yclose),isNaN(t.price)||(this.Price=t.price),isNaN(t.high)||(this.High=t.high),isNaN(t.low)||(this.Low=t.low),isNaN(t.vol)||(this.Vol=t.vol),isNaN(t.amount)||(this.Amount=t.amount),isNaN(t.date)||(this.Date=t.date),isNaN(t.time)||(this.Time=t.time),isNaN(t.increase)||(this.Increase=t.increase),isNaN(t.marketvalue)||(this.MarketValue=t.marketvalue),isNaN(t.flowmarketvalue)||(this.FlowMarketValue=t.flowmarketvalue),isNaN(t.bookrate)||(this.Bookrate=t.bookrate),isNaN(t.bookdiffer)||(this.Bookdiffer=t.bookdiffer),isNaN(t.pe)||(this.PE=t.pe),isNaN(t.pb)||(this.PB=t.pb),t.finance&&this.SetFinanceData(t),t.finance&&this.SetFinanceDetailData(t),t.capital&&this.SetCapitalData(t),t.mamplitude&&(isNaN(t.mamplitude[1])||(this.MinuteAmplitude.M1=t.mamplitude[1]),isNaN(t.mamplitude[3])||(this.MinuteAmplitude.M3=t.mamplitude[3]),isNaN(t.mamplitude[5])||(this.MinuteAmplitude.M5=t.mamplitude[5]),isNaN(t.mamplitude[10])||(this.MinuteAmplitude.M10=t.mamplitude[10]),isNaN(t.mamplitude[15])||(this.MinuteAmplitude.M15=t.mamplitude[15])),t.risefallspeed&&(isNaN(t.risefallspeed[1])||(this.RiseFallSpeed.M1=t.risefallspeed[1]),isNaN(t.risefallspeed[3])||(this.RiseFallSpeed.M3=t.risefallspeed[3]),isNaN(t.risefallspeed[5])||(this.RiseFallSpeed.M5=t.risefallspeed[5]),isNaN(t.risefallspeed[10])||(this.RiseFallSpeed.M10=t.risefallspeed[10]),isNaN(t.risefallspeed[15])||(this.RiseFallSpeed.M15=t.risefallspeed[15])),t.mamount&&(isNaN(t.mamount[1])||(this.MAmount.M1=t.mamount[1]),isNaN(t.mamount[3])||(this.MAmount.M5=t.mamount[3]),isNaN(t.mamount[5])||(this.MAmount.M5=t.mamount[5]),isNaN(t.mamount[10])||(this.MAmount.M10=t.mamount[10]),isNaN(t.mamount[15])||(this.MAmount.M15=t.mamount[15]))}}function v(t,e){this.JSStock=t,this.TagID=e,this.Get=function(e,a){var i=t.Get(e,this.TagID);if(!i)return null;switch(a){case W.SYMBOL:case W.NAME:case W.OPEN:case W.PRICE:case W.YCLOSE:case W.HIGH:case W.LOW:case W.VOL:case W.AMOUNT:case W.DATE:case W.TIME:case W.INCREASE:case W.EXCHANGE_RATE:case W.AMPLITUDE:case W.MAX_PRICE:case W.MIN_PRICE:case W.RISE_FALL_PRICE:case W.INDEXTOP:case W.WEEK:case W.VOLRATIO:return i.GetBaseData(this.TagID,a);case W.HEAT:return i.GetHeatData(this.TagID);case W.BUY5:return i.GetBuy5(this.TagID);case W.SELL5:return i.GetSell5(this.TagID);case W.DEAL:return i.GetDeal(this.TagID);case W.MARKET_VALUE:case W.FLOW_MARKET_VALUE:case W.BOOK_RATE:case W.BOOK_DIFFER:case W.PE:case W.PE2:case W.PE3:case W.PB:return i.GetDerivative(this.TagID,a);case W.ROE:case W.FINANCE_DATE:case W.FINANCE_PERSEARNING:case W.FINANCE_PERNETASSET:case W.FINANCE_NPROFIT:case W.FINANCE_NPROFITINCREASE:case W.FINANCE_NNETPROFIT:case W.FINANCE_NNPROFITINCREASE:case W.FINANCE_NNPROFITSPEED:case W.FINANCE_EPS:case W.FINANCE_BENFORD:return i.GetFinance(this.TagID,a);case W.PLATE_INDUSTRY:case W.PLATE_CONCEPT:case W.PLATE_REGION:return i.GetPlate(this.TagID,a);case W.CAPITAL_FLOW_DAY:case W.CAPITAL_FLOW_DAY3:case W.CAPITAL_FLOW_DAY5:case W.CAPITAL_FLOW_DAY10:return i.GetCapitalFlowDay(this.TagID,a);case W.DDE:case W.DDE3:case W.DDE5:case W.DDE10:return i.GetDDE(this.TagID,a);case W.EVENTS:return i.GetEvent(this.TagID,a);case W.COMPANY_NAME:case W.COMPANY_BUSINESS:case W.COMPANY_VOL:case W.COMPANY_PRICE:case W.COMPANY_RELEASEDATE:case W.COMPANY_COMPETENCE:return i.GetCompany(this.TagID,a);case W.CAPITAL_A:case W.CAPTIAL_ARATE:case W.CAPITAL_TOTAL:return i.GetCapital(this.TagID,a);default:return null}},this.GetSort=function(e,a,i){var r=t.Get(e,this.TagID);return null==r?r:r.GetSortData(this.TagID,a,i)},this.EndRead=function(t){1==t&&this.JSStock.ReqeustData()},this.SetQueryField=function(t,e){for(var a in e)this.Get(t,e[a])}}function g(){this.Symbol,this.Callback,this.Order=-1,this.SortField,this.Field,this.Plate,this.Data=new G.default,this.ApiUrl=X.Domain+"/API/StockHistoryDay",this.PageSize=20,this.PageIndex=1,this.Count,this.currentData=null,this.RequsetData=function(t,e){var a=this,i="string"==typeof a.Symbol?[this.Symbol]:this.Symbol,r=i?i.length:0;this.Plate?this.currentData={plate:this.Plate,symbol:i,start:0,end:this.PageSize,field:this.Field,orderfield:this.SortField,order:this.Order,condition:t.GetQuery(),condition2:e?e.GetQuery():[]}:this.currentData={symbol:i,start:0,end:r,field:this.Field,orderfield:this.SortField,order:this.Order,condition:t.GetQuery(),condition2:e?e.GetQuery():[]},Y.default.ajax({url:this.ApiUrl,data:a.currentData,method:"POST",dataType:"json",success:function(e){a.Count=e.data.count,a.RecvData(e,t)},fail:function(e){a.RecvError(e,t)}})},this.GetNextPage=function(){var t=this;this.PageSize*this.PageIndex<this.Count?(this.currentData.start=this.PageSize*this.PageIndex,this.PageIndex++,this.currentData.end=this.PageSize*this.PageIndex,Y.default.ajax({url:this.ApiUrl,data:t.currentData,method:"POST",dataType:"json",success:function(e){t.RecvData(e)},fail:function(e){t.RecvError(e)}})):alert("æ°æ®å·²å¨é¨å è½½")},this.RecvData=function(t,e){var a=t.data;for(var i in a.stock){var r=a.stock[i],n=r.symbol,o={};this.Data.has(n)?o=this.Data.get(n):(o={Symbol:r.symbol,Name:r.name,Data:new G.default},this.Data.set(n,o)),this.SetStockData(r,o)}this.Callback&&this.Callback(this,e)},this.SetStockData=function(t,e){for(var a in t.stockday){var i=t.stockday[a],r=i.date,n=new G.default;this.SetFinanceData(i,n),this.SetBlocktradingData(i,n),this.SetChangesData(i,n),this.SetLiftingData(i,n),this.SetPforecastData(i,n),this.SetShortIndicatorsData(i,n),e.Data.set(r,n)}return e},this.SetFinanceData=function(t,e){var a=t.finance1;a&&(isNaN(a.nprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_NPROFITINCREASE,a.nprofitincrease),isNaN(a.nnprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_NNPROFITINCREASE,a.nnprofitincrease),isNaN(a.nnprofitspeed)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_NNPROFITSPEED,a.nnprofitspeed),isNaN(a.benford)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_BENFORD,a.benford));var i=t.announcement1;i&&(isNaN(i.year)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_YEAR,i.year),isNaN(i.quarter)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE1_QUARTER,i.quarter));var a=t.finance2;a&&(isNaN(a.nprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_NPROFITINCREASE,a.nprofitincrease),isNaN(a.nnprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_NNPROFITINCREASE,a.nnprofitincrease),isNaN(a.nnprofitspeed)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_NNPROFITSPEED,a.nnprofitspeed),isNaN(a.benford)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_BENFORD,a.benford));var i=t.announcement2;i&&(isNaN(i.year)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_YEAR,i.year),isNaN(i.quarter)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE2_QUARTER,i.quarter));var a=t.finance3;a&&(isNaN(a.nprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_NPROFITINCREASE,a.nprofitincrease),isNaN(a.nnprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_NNPROFITINCREASE,a.nnprofitincrease),isNaN(a.nnprofitspeed)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_NNPROFITSPEED,a.nnprofitspeed),isNaN(a.benford)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_BENFORD,a.benford));var i=t.announcement3;i&&(isNaN(i.year)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_YEAR,i.year),isNaN(i.quarter)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE3_QUARTER,i.quarter));var a=t.finance4;a&&(isNaN(a.nprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_NPROFITINCREASE,a.nprofitincrease),isNaN(a.nnprofitincrease)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_NNPROFITINCREASE,a.nnprofitincrease),isNaN(a.nnprofitspeed)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_NNPROFITSPEED,a.nnprofitspeed),isNaN(a.benford)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_BENFORD,a.benford));var i=t.announcement4;i&&(isNaN(i.year)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_YEAR,i.year),isNaN(i.quarter)||e.set(STOCK_HISTORY_FIELD_NAME.FINANCE4_QUARTER,i.quarter))},this.SetBlocktradingData=function(t,e){var a=t.blocktrading;a&&e.set(STOCK_HISTORY_FIELD_NAME.BLOCK_TRADING,{Premium:a.premium,Price:a.price,Vol:a.vol,Amount:a.amount})},this.SetChangesData=function(t,e){var a=t.changes;a&&e.set(STOCK_HISTORY_FIELD_NAME.HOLDERS_CHANGES,{List:a.list})},this.SetLiftingData=function(t,e){var a=t.lifting;a&&e.set(STOCK_HISTORY_FIELD_NAME.LIFTING,{Lifting:a})},this.SetPforecastData=function(t,e){var a=t.pforecast;a&&e.set(STOCK_HISTORY_FIELD_NAME.PFORECAST,{Lowprofit:a[0].lowprofit,Highprofit:a[0].highprofit,Lowchange:a[0].lowchange,Highchange:a[0].highchange,Reportdate:a[0].reportdate})},this.SetShortIndicatorsData=function(t,e){var a=t.policy;if(a){var i=["ä¸åªä¹é¸¦","ä¹äºçé¡¶","é»æä¹æ","å·¨éé´çº¿","å¤´è©é¡¶","å°å»ä¹æ","å¾çå¤§é¨","æ­å¤´é¡å","æ·¡ååæ»","ç©ºæ¹ç®","è¿ç»­1å¨ç©ºå¤´æå"],r=0,n=[],o=0,s="";a.forEach(function(t){i.some(function(e){return e===t.name})&&(r++,n.push(t.time))}),r?(o=Math.max.apply(n,n),s=a.find(function(t){return t.time===o}).name):s="",console.log(s,r,"latestName-targetedCount"),e.set(STOCK_HISTORY_FIELD_NAME.SHORTIND_ICATORS,{latestIndicatorName:s,indicatorCount:r})}},this.RecvError=function(t,e){},this.CreateCondition=function(t){return new QueryCondition(t)}}function T(){this.MapStock=new G.default,this.MapTagCallback=new G.default,this.RequestVersion=new Array([100,100,100]),this.RealtimeApiUrl=X.Domain+"/API/Stock",this.PlateQuadrantApiUrl=X.Domain+"/API/StockPlateQuadrant",this.IsAutoUpdate=!0,this.AutoUpateTimeout=15e3,this.Timeout,this.NetworkFilter,this.GetStockRead=function(t,e){var a=!0,i=!1,r=void 0;try{for(var n,o=(0,B.default)(this.MapStock);!(a=(n=o.next()).done);a=!0){n.value[1].RemoveTagID(t)}}catch(t){i=!0,r=t}finally{try{!a&&o.return&&o.return()}finally{if(i)throw r}}return this.MapTagCallback.set(t,e),new v(this,t)},this.Unsubscribe=function(t){var e=!0,a=!1,i=void 0;try{for(var r,n=(0,B.default)(this.MapStock);!(e=(r=n.next()).done);e=!0){r.value[1].RemoveTagID(t)}}catch(t){a=!0,i=t}finally{try{!e&&n.return&&n.return()}finally{if(a)throw i}}},this.UnsubscribeStock=function(t,e){var a=!0,i=!1,r=void 0;try{for(var n,o=(0,B.default)(this.MapStock);!(a=(n=o.next()).done);a=!0){var s=n.value;if(s[0]===t){e?s[1].RemoveTagID(e):s[1].ClearTagID(),console.log("[JSStock::UnsubscribeStock] symbol="+t+", tagID="+e);break}}}catch(t){i=!0,r=t}finally{try{!a&&o.return&&o.return()}finally{if(i)throw r}}},this.Get=function(t,e){this.MapStock.has(t)||this.MapStock.set(t,new p(t));var a=this.MapStock.get(t);return e&&a.AttachTagID(e),a},this.RequestData=function(){this.ClearTimer();var t=new Array,e=new Array,a=new Array,i=new Array,r=new Array,n=new Array,o=new Array,s=[],l=[],h=[],u=[],C=[],c=[],f=[],d=[],D=new Array,p=new Array,v=new Array,g=new Array,T=!0,I=!1,S=void 0;try{for(var x,b=(0,B.default)(this.MapStock);!(T=(x=b.next()).done);T=!0){var y=x.value,E=y[1],w=y[0];E.BaseDataTagID.size>0&&(m(w)?e.push(w):t.push(w)),E.BuySellTagID.size>0&&i.push(w),E.CapitalFlowDayID.size>0&&s.push(w),E.CapitalFlowDay3ID.size>0&&l.push(w),E.CapitalFlowDay5ID.size>0&&h.push(w),E.CapitalFlowDay10ID.size>0&&u.push(w),E.DDEID.size>0&&C.push(w),E.DDE3ID.size>0&&c.push(w),E.DDE5ID.size>0&&f.push(w),E.DDE10ID.size>0&&d.push(w),E.HeatTagID.size>0&&a.push(w),E.DealTagID.size>0&&r.push(w),E.DerivativeTagID.size>0&&n.push(w),E.FinanceTagID.size>0&&o.push(w),E.CapitalTagID.size>0&&g.push(w),null==E.Event&&E.EventTagID.size>0&&D.push(w),null==E.Company&&E.CompanyTagID.size>0&&p.push(w),null==y[1].Plate&&y[1].PlateTagID.size>0&&v.push(y[0])}}catch(t){I=!0,S=t}finally{try{!T&&b.return&&b.return()}finally{if(I)throw S}}i.length>0&&this.RequestBuySellData(i),t.length>0&&this.RequestBaseData(t),e.length>0&&this.RequestIndexBaseData(e),a.length>0&&this.RequestIndexHeatData(a),r.length>0&&this.RequestDealData(r),n.length>0&&this.RequestDerivativeData(n),o.length>0&&this.RequestFinanceData(o),g.length>0&&this.RequestCapitalData(g),s.length>0&&this.RequestSubDocumentData(s,"flowday"),l.length>0&&this.RequestSubDocumentData(l,"flowday3"),h.length>0&&this.RequestSubDocumentData(h,"flowday5"),u.length>0&&this.RequestSubDocumentData(u,"flowday10"),C.length>0&&this.RequestSubDocumentData(C,"dde"),c.length>0&&this.RequestSubDocumentData(c,"dde3"),f.length>0&&this.RequestSubDocumentData(f,"dde5"),d.length>0&&this.RequestSubDocumentData(d,"dde10"),D.length>0&&this.RequestEventData(D),p.length>0&&this.RequestCompanyData(p),v.length>0&&this.RequestPlateData(v),this.ReqeustAllSortData()},this.ReqeustData=this.RequestData,this.RequestBaseData=function(t){var e=this,a=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","week","increase","exchangerate","amplitude","volratio"];if(this.NetworkFilter){var i={Name:"JSStock::RequestBaseData",Explain:"è¡ç¥¨åºç¡æ°æ®",ID:K.BASE_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,K.BASE_DATA)}),1==i.PreventDefault)return}Y.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,K.BASE_DATA)},error:function(t){e.RecvError(t,K.BASE_DATA)}})},this.RequestDerivativeData=function(t){var e=this,a=["name","symbol","marketvalue","flowmarketvalue","pe","pe2","pe3","pb","bookrate","bookdiffer"];if(this.NetworkFilter){var i={Name:"JSStock::RequestDerivativeData",Explain:"å®æ¶è¡çæ°æ®",ID:K.DERIVATIVE_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,K.DERIVATIVE_DATA)}),1==i.PreventDefault)return}Y.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,K.DERIVATIVE_DATA)},error:function(t){e.RecvError(t,K.DERIVATIVE_DATA)}})},this.RequestFinanceData=function(t){var e=this,a=["name","symbol","roe","finance"];if(this.NetworkFilter){var i={Name:"JSStock::RequestFinanceData",Explain:"è´¢å¡æ°æ®",ID:K.FINANCE_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,K.FINANCE_DATA)}),1==i.PreventDefault)return}Y.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,K.FINANCE_DATA)},error:function(t){e.RecvError(t,K.FINANCE_DATA)}})},this.RequestCapitalData=function(t){var e=this,a=["name","symbol","capital"];if(this.NetworkFilter){var i={Name:"JSStock::RequestCapitalData",Explain:"è¡æ¬æ°æ®",ID:K.CAPITAL_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,K.CAPITAL_DATA)}),1==i.PreventDefault)return}Y.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,K.CAPITAL_DATA)},error:function(t){e.RecvError(t,K.CAPITAL_DATA)}})},this.RequestBuySellData=function(t){var e=this,a=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","week","increase","buy","sell","exchangerate","amplitude"];if(this.NetworkFilter){var i={Name:"JSStock::RequestBuySellData",Explain:"ä¹°åçæ°æ®",ID:K.BUY_SELL_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,K.BUY_SELL_DATA)}),1==i.PreventDefault)return}Y.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,K.BUY_SELL_DATA)},error:function(t){e.RecvError(t,K.BUY_SELL_DATA)}})},this.RequestDealData=function(t){var e=this,a=["name","symbol","price","high","low","vol","amount","date","time","increase","deal"];if(this.NetworkFilter){var i={Name:"JSStock::RequestDealData",Explain:"åç¬æ°æ®",ID:K.DEAL_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,K.DEAL_DATA)}),1==i.PreventDefault)return}Y.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,K.DEAL_DATA)},error:function(t){e.RecvError(t,K.DEAL_DATA)}})},this.RequestIndexBaseData=function(t){var e=this,a=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","week","indextop","increase"];if(this.NetworkFilter){var i={Name:"JSStock::RequestIndexBaseData",Explain:"ææ°åºç¡æ°æ®(åå«ä¸æ¶¨ä¸è·å®¶æ°)",ID:K.INDEX_BASE_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:a,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvData(t,K.INDEX_BASE_DATA)}),1==i.PreventDefault)return}Y.default.ajax({url:this.RealtimeApiUrl,data:{field:a,symbol:t},type:"post",dataType:"json",async:!0,success:function(t){console.log(t),e.RecvData(t,K.INDEX_BASE_DATA)},error:function(t){e.RecvError(t,K.INDEX_BASE_DATA)}})},this.RequestIndexHeatData=function(t){var e=this;Y.default.ajax({url:this.PlateQuadrantApiUrl,data:{plate:t},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,K.HEAT_DATA)},error:function(t){e.RecvError(t,K.HEAT_DATA)}})},this.ReqeustAllSortData=function(){var t=new Array,e=!0,a=!1,i=void 0;try{for(var r,n=(0,B.default)(this.MapStock);!(e=(r=n.next()).done);e=!0){var o=r.value;if(m(o[0])&&!(null==o[1].Sort||o[1].Sort.size<=0)){var s=!0,l=!1,h=void 0;try{for(var u,C=(0,B.default)(o[1].Sort);!(s=(u=C.next()).done);s=!0){var c=u.value,f=c[1],d={Plate:o[0],SortField:f.SortField,Order:f.Order,TagID:f.TagID};t.push(d)}}catch(t){l=!0,h=t}finally{try{!s&&C.return&&C.return()}finally{if(l)throw h}}}}}catch(t){a=!0,i=t}finally{try{!e&&n.return&&n.return()}finally{if(a)throw i}}for(var D in t){var c=t[D];this.ReqeustSortData(c)}},this.ReqeustSortData=function(t){var e=this,a=t,i="";switch(a.SortField){case W.INCREASE:i="increase";break;case W.PRICE:i="price";break;default:return}var r=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","week","increase","exchangerate"];if(this.NetworkFilter){var n={Name:"JSStock::ReqeustSortData",Explain:"æ¿åæåºæ°æ®",ID:K.SORT_DATA,Request:{Url:e.RealtimeApiUrl,Data:{field:r,plate:[t.Plate],orderfield:i,order:t.Order,ordernull:1,filterstop:1},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(n,function(t){e.RecvData(t,K.SORT_DATA,a)}),1==n.PreventDefault)return}Y.default.ajax({url:this.RealtimeApiUrl,data:{field:r,plate:[t.Plate],orderfield:i,order:t.Order,ordernull:1,filterstop:1},type:"post",dataType:"json",async:!0,success:function(t){e.RecvData(t,K.SORT_DATA,a)},error:function(t){e.RecvError(t,K.SORT_DATA,a)}})},this.RequestSubDocumentData=function(t,e){var a=this,i=new G.default([["flowday",{Field:"flowday",RecvID:K.CAPITAL_FLOW_DAY_DATA}],["flowday3",{Field:"flowday3",RecvID:K.CAPITAL_FLOW_DAY3_DATA}],["flowday5",{Field:"flowday5",RecvID:K.CAPITAL_FLOW_DAY5_DATA}],["flowday10",{Field:"flowday10",RecvID:K.CAPITAL_FLOW_DAY10_DATA}],["dde",{Field:"dde",RecvID:K.DDE_DAY_DATA}],["dde3",{Field:"dde3",RecvID:K.DDE_DAY3_DATA}],["dde5",{Field:"dde5",RecvID:K.DDE_DAY5_DATA}],["dde10",{Field:"dde10",RecvID:K.DDE_DAY10_DATA}]]);if(i.has(e)){var r=i.get(e);if(this.NetworkFilter){var n={Name:"JSStock::RequestSubDocumentData",Explain:"å­ææ¡£æ°æ®",ID:r.RecvID,Request:{Url:a.RealtimeApiUrl,Data:{field:["symbol",r.Field],symbol:t,start:0,end:50},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(n,function(t){a.RecvData(t,r.RecvID)}),1==n.PreventDefault)return}Y.default.ajax({url:this.RealtimeApiUrl,data:{field:["symbol",r.Field],symbol:t,start:0,end:50},type:"post",dataType:"json",success:function(t){a.RecvData(t,r.RecvID)},error:function(t){a.RecvError(t,r.RecvID)}})}},this.RequestEventData=function(t){var e=this;Y.default.ajax({url:this.RealtimeApiUrl,data:{field:["symbol","events.margin","events.shhk","events.hk","events.st","events.hksymbol","events.hkname","events.szhk"],symbol:t,start:0,end:50},type:"POST",dataType:"json",success:function(t){e.RecvData(t,K.EVENT_DATA)},error:function(t){e.RecvError(t,K.EVENT_DATA)}})},this.RequestCompanyData=function(t){var e=this;Y.default.ajax({url:this.RealtimeApiUrl,data:{field:["name","symbol","company"],symbol:t,start:0,end:50},type:"POST",dataType:"json",success:function(t){e.RecvData(t,K.COMPANY_DATA)},error:function(t){e.RecvError(t,K.COMPANY_DATA)}})},this.RequestPlateData=function(t){var e=this;Y.default.ajax({url:this.RealtimeApiUrl,data:{field:["name","symbol","industry","region","concept"],symbol:t,start:0,end:50},type:"POST",dataType:"json",success:function(t){e.RecvData(t,K.PLATE_DATA)},error:function(t){e.RecvError(t,K.PLATE_DATA)}})},this.RecvError=function(t,e,a){console.log("RecvError: datatype="+e.toString()),console.log(t);var i=this;this.Timeout&&clearTimeout(this.Timeout),this.Timeout=setTimeout(function(){i.ReqeustData()},2*this.AutoUpateTimeout)},this.RecvData=function(t,e,a){var i;switch(e){case K.BASE_DATA:case K.INDEX_BASE_DATA:i=this.RecvBaseData(t,e);break;case K.HEAT_DATA:i=this.RecvHeatData(t,e);break;case K.SORT_DATA:i=this.RecvSortData(t,e,a);break;case K.BUY_SELL_DATA:i=this.RecvBuySellData(t,e);break;case K.DEAL_DATA:i=this.RecvDealData(t,e);break;case K.DERIVATIVE_DATA:i=this.RecvDerivativeData(t,e);break;case K.FINANCE_DATA:i=this.RecvFinanceData(t,e);break;case K.CAPITAL_DATA:i=this.RecvCapitalData(t,e);break;case K.CAPITAL_FLOW_DAY_DATA:case K.CAPITAL_FLOW_DAY3_DATA:case K.CAPITAL_FLOW_DAY5_DATA:case K.CAPITAL_FLOW_DAY10_DATA:case K.DDE_DAY_DATA:case K.DDE_DAY3_DATA:case K.DDE_DAY5_DATA:case K.DDE_DAY10_DATA:i=this.RecvSubDocumentData(t,e);break;case K.EVENT_DATA:i=this.RecvEventData(t,e);break;case K.COMPANY_DATA:i=this.RecvCompanyData(t,e);break;case K.PLATE_DATA:i=this.RecvPlateData(t,e)}var r=!0,n=!1,o=void 0;try{for(var s,l=(0,B.default)(i);!(r=(s=l.next()).done);r=!0){var h=s.value;this.MapTagCallback.has(h[0])&&this.MapTagCallback.get(h[0])(h[0],h[1],e,this)}}catch(t){n=!0,o=t}finally{try{!r&&l.return&&l.return()}finally{if(n)throw o}}this.AutoUpdate()},this.ClearTimer=function(){this.Timeout&&(clearTimeout(this.Timeout),this.Timeout=null)},this.AutoUpdate=function(){if(this.ClearTimer(),this.IsAutoUpdate){var t=this,e=!1,a=!0,i=!1,r=void 0;try{for(var n,o=(0,B.default)(this.MapStock);!(a=(n=o.next()).done);a=!0){var s=n.value,l=z.GetMarketStatus(s[0]);if(2==l)return void(this.Timeout=setTimeout(function(){t.ReqeustData()},this.AutoUpateTimeout));1==l&&(e=!0)}}catch(t){i=!0,r=t}finally{try{!a&&o.return&&o.return()}finally{if(i)throw r}}e&&(this.Timeout=setTimeout(function(){t.AutoUpdate()},this.AutoUpateTimeout))}},this.RecvBaseData=function(t,e){var a=new G.default;for(var i in t.stock){var r=t.stock[i],n=this.MapStock.get(r.symbol);if(n){switch(e){case K.BASE_DATA:n.SetBaseData(r);break;case K.INDEX_BASE_DATA:n.SetIndexBaseData(r);break;default:continue}if(n.TagID.size>0){var o=!0,s=!1,l=void 0;try{for(var h,u=(0,B.default)(n.TagID);!(o=(h=u.next()).done);o=!0){var C=h.value;a.has(C)?a.get(C).push(n.Symbol):a.set(C,new Array(n.Symbol))}}catch(t){s=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}}}}return a},this.RecvBuySellData=function(t,e){var a=new G.default;for(var i in t.stock){var r=t.stock[i],n=this.MapStock.get(r.symbol);if(n){if(n.SetBuySellData(r),n.TagID.size>0){var o=!0,s=!1,l=void 0;try{for(var h,u=(0,B.default)(n.TagID);!(o=(h=u.next()).done);o=!0){var C=h.value;a.has(C)?a.get(C).push(n.Symbol):a.set(C,new Array(n.Symbol))}}catch(t){s=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}}if(n.BuySellTagID.size>0){var c=!0,f=!1,d=void 0;try{for(var D,m=(0,B.default)(n.BuySellTagID);!(c=(D=m.next()).done);c=!0){var C=D.value;a.has(C)?a.get(C).push(n.Symbol):a.set(C,new Array(n.Symbol))}}catch(t){f=!0,d=t}finally{try{!c&&m.return&&m.return()}finally{if(f)throw d}}}}}return a},this.RecvDerivativeData=function(t,e){var a=new G.default;for(var i in t.stock){var r=t.stock[i],n=this.MapStock.get(r.symbol);if(n&&(n.SetDerivativeData(r),n.DerivativeTagID.size>0)){var o=!0,s=!1,l=void 0;try{for(var h,u=(0,B.default)(n.DerivativeTagID);!(o=(h=u.next()).done);o=!0){var C=h.value;a.has(C)?a.get(C).push(n.Symbol):a.set(C,new Array(n.Symbol))}}catch(t){s=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}}}return a},this.RecvFinanceData=function(t,e){var a=new G.default;for(var i in t.stock){var r=t.stock[i],n=this.MapStock.get(r.symbol);if(n&&(n.SetFinanceData(r),n.FinanceTagID.size>0)){var o=!0,s=!1,l=void 0;try{for(var h,u=(0,B.default)(n.FinanceTagID);!(o=(h=u.next()).done);o=!0){var C=h.value;a.has(C)?a.get(C).push(n.Symbol):a.set(C,new Array(n.Symbol))}}catch(t){s=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}}}return a},this.RecvCapitalData=function(t,e){var a=new G.default;for(var i in t.stock){var r=t.stock[i],n=this.MapStock.get(r.symbol);if(n&&(n.SetCapitalData(r),n.CapitalTagID.size>0)){var o=!0,s=!1,l=void 0;try{for(var h,u=(0,B.default)(n.CapitalTagID);!(o=(h=u.next()).done);o=!0){var C=h.value;a.has(C)?a.get(C).push(n.Symbol):a.set(C,new Array(n.Symbol))}}catch(t){s=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}}}return a},this.RecvDealData=function(t,e){var a=new G.default;for(var i in t.stock){var r=t.stock[i],n=this.MapStock.get(r.symbol);if(n&&(n.SetDealData(r),n.DealTagID.size>0)){var o=!0,s=!1,l=void 0;try{for(var h,u=(0,B.default)(n.DealTagID);!(o=(h=u.next()).done);o=!0){var C=h.value;a.has(C)?a.get(C).push(n.Symbol):a.set(C,new Array(n.Symbol))}}catch(t){s=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}}}return a},this.RecvHeatData=function(t,e){var a=new G.default;for(var i in t.data){var r=t.data[i],n=this.MapStock.get(r.symbol);if(n&&(n.SetHeatData(r),n.HeatTagID.size>0)){var o=!0,s=!1,l=void 0;try{for(var h,u=(0,B.default)(n.HeatTagID);!(o=(h=u.next()).done);o=!0){var C=h.value;a.has(C)?a.get(C).push(n.Symbol):a.set(C,new Array(n.Symbol))}}catch(t){s=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}}}return a},this.RecvSortData=function(t,e,a){var i=new G.default,r=new Array,n=this.MapStock.get(a.Plate);for(var o in t.stock){var s=t.stock[o];if(r.push(s.symbol),this.MapStock.has(s.symbol)){var l=this.MapStock.get(s.symbol);l.SetBaseData(s)}else{var l=new p(s.symbol);l.SetBaseData(s),this.MapStock.set(s.symbol,l)}}var h=a.SortField.toString()+"-"+a.Order.toString();if(!n.Sort.has(h))return i;n.Sort.get(h).arySymbol=r;var u=!0,C=!1,c=void 0;try{for(var f,d=(0,B.default)(a.TagID);!(u=(f=d.next()).done);u=!0){var s=f.value;i.set(s,new Array([n.Symbol]))}}catch(t){C=!0,c=t}finally{try{!u&&d.return&&d.return()}finally{if(C)throw c}}return i},this.RecvSubDocumentData=function(t,e){var a=new G.default;for(var i in t.stock){var r=t.stock[i],n=this.MapStock.get(r.symbol);if(n){var o=null;switch(e){case K.CAPITAL_FLOW_DAY_DATA:n.SetCapitalFlowDayData(r.flowday,e),o=n.CapitalFlowDayID;break;case K.CAPITAL_FLOW_DAY3_DATA:n.SetCapitalFlowDayData(r.flowday3,e),o=n.CapitalFlowDay3ID;break;case K.CAPITAL_FLOW_DAY5_DATA:n.SetCapitalFlowDayData(r.flowday5,e),o=n.CapitalFlowDay5ID;break;case K.CAPITAL_FLOW_DAY10_DATA:n.SetCapitalFlowDayData(r.flowday10,e),o=n.CapitalFlowDay10ID;break;case K.DDE_DAY_DATA:n.SetDDE(r.dde,e),o=n.DDEID;break;case K.DDE_DAY3_DATA:n.SetDDE(r.dde3,e),o=n.DDE3ID;break;case K.DDE_DAY5_DATA:n.SetDDE(r.dde5,e),o=n.DDE5ID;break;case K.DDE_DAY10_DATA:n.SetDDE(r.dde10,e),o=n.DDE10ID}if(o&&o.size>0){var s=!0,l=!1,h=void 0;try{for(var u,C=(0,B.default)(o);!(s=(u=C.next()).done);s=!0){var c=u.value;a.has(c)?a.get(c).push(n.Symbol):a.set(c,new Array(n.Symbol))}}catch(t){l=!0,h=t}finally{try{!s&&C.return&&C.return()}finally{if(l)throw h}}}}}return a},this.RecvEventData=function(t,e){var a=new G.default;for(var i in t.stock){var r=t.stock[i],n=this.MapStock.get(r.symbol);if(n&&(n.SetEventData(r),n.EventTagID.size>0)){var o=!0,s=!1,l=void 0;try{for(var h,u=(0,B.default)(n.EventTagID);!(o=(h=u.next()).done);o=!0){var C=h.value;a.has(C)?a.get(C).push(n.Symbol):a.set(C,new Array(n.Symbol))}}catch(t){s=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}}}return a},this.RecvCompanyData=function(t,e){var a=new G.default;for(var i in t.stock){var r=t.stock[i],n=this.MapStock.get(r.symbol);if(n&&(n.SetCompanyData(r),n.CompanyTagID.size>0)){var o=!0,s=!1,l=void 0;try{for(var h,u=(0,B.default)(n.CompanyTagID);!(o=(h=u.next()).done);o=!0){var C=h.value;a.has(C)?a.get(C).push(n.Symbol):a.set(C,new Array(n.Symbol))}}catch(t){s=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}}}return a},this.RecvPlateData=function(t,e){var a=new G.default;for(var i in t.stock){var r=t.stock[i],n=this.MapStock.get(r.symbol);if(n&&(n.SetPlateData(r),n.PlateTagID.size>0)){var o=!0,s=!1,l=void 0;try{for(var h,u=(0,B.default)(n.PlateTagID);!(o=(h=u.next()).done);o=!0){var C=h.value;a.has(C)?a.get(C).push(n.Symbol):a.set(C,new Array(n.Symbol))}}catch(t){s=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}}}return a}}function I(t){this.SearchStockApiUrl=X.Domain+"/API/StockSpell",this.UpdateUICallback=t,this.PageSize=50,this.Count,this.EndOffset,this.Data=new Array,this.SearchString="",this.SearchType=0,this.Search=function(t,e){if(this.SearchString==t&&this.SearchType==e)"function"==typeof this.UpdateUICallback&&this.UpdateUICallback(this);else{this.SearchString=t,this.SearchType=e,this.Count=0,this.EndOffset=0,this.Data=[];var a=this.PageSize-1;this.ReqeustSearchStock(this.SearchString,this.SearchType,this.EndOffset,a)}},this.IsEndPage=function(){return this.Count<=0||this.EndOffset>this.Count-1},this.NextPage=function(){if(!(this.EndOffset+1>this.Count)){var t=this.EndOffset+this.PageSize;this.ReqeustSearchStock(this.SearchString,this.SearchType,this.EndOffset,t)}},this.ReqeustSearchStock=function(t,e,a,i){var r=this;Y.default.ajax({url:this.SearchStockApiUrl,data:{input:t,start:a,end:i,type:e},type:"post",dataType:"json",async:!0,success:function(t){r.RecvSearchStockData(t,K.SEARCH_STOCK_DATA)},error:function(t){r.RecvError(t,K.SEARCH_STOCK_DATA)}})},this.RecvSearchStockData=function(t){for(var e in t.stock){var a=t.stock[e];this.Data.push({Name:a.name,Symbol:a.symbol,Type:a.type})}0==t.count?(this.Count=0,this.EndOffset=0):(0==this.Count&&(this.Count=t.count),this.EndOffset=t.end,this.Count>0&&this.EndOffset>this.Count&&(this.EndOffset=this.Count-1)),"function"==typeof this.UpdateUICallback&&this.UpdateUICallback(this)},this.RecvError=function(t,e){console.log("[SearchStock::RecvError] datatype="+e.toString()),console.log(t),"function"==typeof this.UpdateUICallback&&this.UpdateUICallback(this,"error")}}function S(){this.IsAutoUpdate=!0,this.AutoUpateTimeout=5e3,this.Timeout,this.ApiUrl,this.Data,this.Error,this.UpdateUICallback,this.RequestData=function(){},this.Stop=function(){this.IsAutoUpdate=!1,this.Timeout&&clearTimeout(this.Timeout)},this.AutoUpate=function(){if(this.Timeout&&clearTimeout(this.Timeout),this.IsAutoUpdate&&(this.Timeout&&clearTimeout(this.Timeout),this.IsAutoUpdate)){var t=this;if(this.Symbol){var e=z.GetMarketStatus(this.Symbol);2==e?this.Timeout=setTimeout(function(){t.RequestData()},this.AutoUpateTimeout):1==e&&(this.Timeout=setTimeout(function(){t.AutoUpdate()},this.AutoUpateTimeout))}else{var t=this,a=new Date,i=100*a.getHours()+a.getMinutes();a.getDay()>0&&a.getDay()<6&&i>=930&&i<1530&&(this.Timeout=setTimeout(function(){t.RequestData()},this.AutoUpateTimeout))}}},this.InvokeUpdateUICallback=function(){this.UpdateUICallback&&this.UpdateUICallback(this)}}function x(t){this.newMethod=S,this.newMethod(),delete this.newMethod,this.Symbol=t,this.ApiUrl=X.Domain+"/API/StockShortTerm",this.Count=20,this.RequestData=function(){var t=this,e={count:this.Count};this.Symbol&&(e.symbol=this.Symbol),Y.default.ajax({url:this.ApiUrl,data:e,type:"post",dataType:"json",async:!0,success:function(e){t.RecvData(e,K.SHORT_TERM_DATA)},fail:function(e){t.RecvError(e,K.SHORT_TERM_DATA)}})},this.RecvData=function(t,e){this.Data=[];for(var a in t.shortterm){var i=t.shortterm[a];this.Data.push({Date:i.date,Name:i.name,Symbol:i.symbol,Time:i.time,Content:i.content,TypeInfo:i.typeinfo,Type:i.type})}this.UpdateUICallback&&this.UpdateUICallback(this),this.AutoUpate()},this.RecvError=function(t,e){}}function b(t){this.newMethod=S,this.newMethod(),delete this.newMethod,this.Symbol=t,this.Date,this.RequestData=function(){this.Data=null,this.Error=null;var t=this,e=X.CacheDomain+"/cache/dealday/day/"+this.Date+"/"+this.Symbol+".json";console.log("[DealDay::RequestData] cache url ",e),Y.default.ajax({url:e,type:"get",dataType:"json",async:!0,success:function(e){t.RecvData(e,K.DEAL_DAY_DATA)},error:function(e){t.RecvError(e,K.DEAL_DAY_DATA)}})},this.RecvData=function(t,e){if(!t.day||!t.deal)return void this.InvokeUpdateUICallback();var a=t.deal.amount,i=t.deal.price,r=t.deal.time,n=t.deal.vol,o=t.deal.flag;if(!(o&&n&&r&&i&&a))return void this.InvokeUpdateUICallback();for(var s={Date:t.date,Open:t.day.open,Close:t.day.price,YClose:t.day.yclose,Symbol:t.symbol,Name:t.name,Deal:[],PriceList:[]},l=new G.default,h=0,u=Math.min(r.length,n.length,o.length,i.length,a.length),C=0;C<u;++C){var c={Time:r[C],Vol:n[C],Flag:"",Price:i[C],Amount:a[C]};0===o[C]?c.Flag="B":1===o[C]&&(c.Flag="S"),c.Time>15e4&&(c.Time=15e4),s.Deal.push(c);var f;l.has(c.Price)?(f=l.get(c.Price),f.Vol+=c.Vol):(f={Vol:c.Vol,Price:c.Price,BuyVol:0,SellVol:0,NoneVol:0},l.set(c.Price,f)),0===o[C]?f.BuyVol+=c.Vol:1===o[C]?f.SellVol+=c.Vol:f.NoneVol+=c.Vol,h+=c.Vol}var d=!0,D=!1,m=void 0;try{for(var p,v=(0,B.default)(l);!(d=(p=v.next()).done);d=!0){var g=p.value,T=g[1];h>0&&(T.Proportion=T.Vol/h),s.PriceList.push(T)}}catch(t){D=!0,m=t}finally{try{!d&&v.return&&v.return()}finally{if(D)throw m}}s.PriceList.sort(function(t,e){return e.Price-t.Price}),this.Data=s,this.InvokeUpdateUICallback()},this.RecvError=function(t,e){console.log("[DealDay::RecvError] status="+t.status+" statusText="+t.statusText+" responseText="+t.responseText),this.Error={Status:t.status,Message:t.responseText},this.InvokeUpdateUICallback()}}function y(t){this.newMethod=S,this.newMethod(),delete this.newMethod,this.ApiUrl=X.Domain+"/API/StockBlockMember",this.PageSize=10,this.Start=0,this.OrderField,this.Order,this.Symbol=t,this.OrderNull=0,this.Field=new Array,this.Data=new Array,this.PageInfo,this.SetField=function(t){this.Field=new Array;for(var e in t){var a=t[e],i=U.GetFieldName(a);null!=i&&this.Field.push(i)}return this.Field.length>0},this.SetOrder=function(t,e){this.Order=null,this.OrderField=null;var a=U.GetFieldName(t);return null!=a&&(this.OrderField=a,this.Order=e,!0)},this.RequestData=function(){this.Data=[];var t=this;Y.default.ajax({url:this.ApiUrl,data:{symbol:this.Symbol,field:this.Field,order:this.Order,orderfield:this.OrderField,start:this.Start,end:this.Start+this.PageSize,ordernull:this.OrderNull},type:"post",dataType:"json",success:function(e){t.RecvData(e,K.BLOCK_MEMBER_DATA)},error:function(e){t.RecvError(e,K.BLOCK_MEMBER_DATA)}})},this.RecvData=function(t,e){for(var a in t.stock){var i=t.stock[a];if(null!=i.symbol){var r=new p(i.symbol);r.SetData(i),this.Data.push(r)}}this.PageInfo={Count:t.count,Start:t.start,End:t.end},"function"==typeof this.UpdateUICallback&&this.UpdateUICallback(this),this.AutoUpate()},this.RecvError=function(t,e){}}function E(){this.newMethod=S,this.newMethod(),delete this.newMethod,this.BlockType=1,this.Count=20,this.OrderField="increase",this.Order=-1,this.Field=["symbol","price","name","vol","increase","indextop","risefall"],this.ApiUrl=X.Domain+"/API/StockBlockTop",this.SetField=function(t){},this.ReqeustData=function(){var t=this;Y.default.ajax({url:this.ApiUrl,data:{blocktype:this.BlockType,start:0,end:this.Count,field:this.Field,orderfield:this.OrderField,order:this.Order},type:"post",dataType:"json",async:!0,success:function(e){t.RecvData(e,K.BLOCK_TOP_DATA)},fail:function(e){t.RecvError(e,K.BLOCK_TOP_DATA)}})},this.RecvData=function(t,e){var a=t;this.Data=[],this.resCount=a.count;for(var i in a.stock){var r=a.stock[i];if(null!=r.indextop)var n={Down:r.indextop.down,Stop:r.indextop.stop,Up:r.indextop.up,Unchanged:r.indextop.unchanged,DownStock:{Name:r.indextop.downstock.name,Symbol:r.indextop.downstock.symbol},UpStock:{Name:r.indextop.upstock.name,Symbol:r.indextop.upstock.symbol}};this.Data.push({Name:r.name,Symbol:r.symbol,Increase:r.increase,Risefall:r.risefall,IndexTop:n})}this.UpdateUICallback&&this.UpdateUICallback(this),this.AutoUpate()},this.RecvError=function(t,e){}}function w(t){this.newMethod=S,this.newMethod(),delete this.newMethod,this.ApiUrl=X.Domain+"/API/StockMinuteImage",this.Symbol=[t],this.Data=[],this.RequestData=function(){this.Data=[];var t=this;Y.default.ajax({url:this.ApiUrl,data:{symbol:this.Symbol},type:"post",dataType:"json",success:function(e){t.RecvData(e,K.IMAGE_MINUTE_DATA)},error:function(e){t.RecvError(e,K.IMAGE_MINUTE_DATA)}})},this.RecvData=function(t,e){for(var a in t.symbol){var i={Symbol:t.symbol[a],Image:t.imagerelative[a]};this.Data.push(i)}"function"==typeof this.UpdateUICallback&&this.UpdateUICallback(this)},this.RecvError=function(t,e){}}function F(t){this.newMethod=S,this.newMethod(),delete this.newMethod,this.Symbol=t,this.RequestData=function(){this.Data=null,this.Error=null;var t=this,e=X.CacheDomain+"/cache/historyday/all/"+this.Symbol+".json";console.log("[HistoryDayData::RequestData] cache url ",e),Y.default.ajax({url:e,type:"get",dataType:"json",async:!0,success:function(e){t.RecvData(e,K.HISTORY_DAY_DATA)},error:function(e){t.RecvError(e,K.HISTORY_DAY_DATA)}})},this.RecvData=function(t,e){if(!t.symbol||!t.name)return void this.InvokeUpdateUICallback();var a=t.amount,i=t.close,r=t.date,n=t.high,o=t.low,s=t.open,l=t.vol,h=t.yclose;if(!(a&&i&&r&&n&&o&&s&&l&&h))return void this.InvokeUpdateUICallback();for(var u={UpdateDate:t.update,Symbol:t.symbol,Name:t.name,KLine:[]},C=0;C<r.length;++C){var c={Date:r[C],YClose:h[C],Open:s[C],High:n[C],Low:o[C],Close:i[C],Vol:l[C],Amount:a[C]};u.KLine.push(c)}this.Data=u,this.InvokeUpdateUICallback()},this.RecvError=function(t,e){console.log("[HistoryDayData::RecvError] status="+t.status+" statusText="+t.statusText+" responseText="+t.responseText),this.Error={Status:t.status,Message:t.responseText},this.InvokeUpdateUICallback()},this.GetWeekData=function(){return this.Data&&this.Data.KLine?this.GetDayPeriodData(1):[]},this.GetMonthData=function(){return this.Data&&this.Data.KLine?this.GetDayPeriodData(2):[]},this.GetDayPeriodData=function(t){var e=new Array,a=0,i=null;for(var r in this.Data.KLine){var n=!1,o=this.Data.KLine[r];switch(t){case 1:var s=this.GetFirday(o.Date);s!=a&&(n=!0,a=s);break;case 2:parseInt(o.Date/100)!=parseInt(a/100)&&(n=!0,a=o.Date);break;case 3:parseInt(o.Date/1e4)!=parseInt(a/1e4)&&(n=!0,a=o.Date)}if(n){if(i={},i.Date=o.Date,e.push(i),null==o.Open||null==o.Close)continue;i.Open=o.Open,i.High=o.High,i.Low=o.Low,i.YClose=o.YClose,i.Close=o.Close,i.Vol=o.Vol,i.Amount=o.Amount}else{if(null==i)continue;if(null==o.Open||null==o.Close)continue;null==i.Open||null==i.Close?(i.Open=o.Open,i.High=o.High,i.Low=o.Low,i.YClose=o.YClose,i.Close=o.Close,i.Vol=o.Vol,i.Amount=o.Amount):(i.High<o.High&&(i.High=o.High),i.Low>o.Low&&(i.Low=o.Low),i.Close=o.Close,i.Vol+=o.Vol,i.Amount+=o.Amount,i.Date=o.Date)}}return e},this.GetFirday=function(t){var e=new Date(parseInt(t/1e4),t/100%100-1,t%100),a=e.getDay();if(5==a)return t;var i=e.getTime();if(a<5){var r=864e5*(5-a);i+=r}else{var r=864e5*(a-5);i-=r}e.setTime(i);var n=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();e.getDay();return n}}function M(t){this.newMethod=S,this.newMethod(),delete this.newMethod,this.Symbol=t,this.ApiUrl=X.Domain+"/API/StockPriceList",this.RequestData=function(){if(this.Symbol){var t=this,e={};Array.isArray(this.Symbol)?e.Symbol=this.Symbol:e.Symbol=[this.Symbol],Y.default.ajax({url:this.ApiUrl,data:e,type:"post",dataType:"json",async:!0,success:function(e){t.RecvData(e,K.DEAL_PRICE_LIST_DATA)},fail:function(e){t.RecvError(e,K.DEAL_PRICE_LIST_DATA)}})}},this.RecvData=function(t,e){if(this.Data=null,!(t.statistics.length<=0)){this.Data={Day:{},PriceList:[]};var a=t.data[0];this.Data.Day={Date:a.date,YClose:a.yclose,Price:a.price,Vol:a.vol,Time:a.time},this.Data.Stock={Symbol:a.symbol,Name:a.name};var i=t.statistics[0];for(var r in i.list){var n=i.list[r],o={Price:n[0],Vol:n[1],BuyVol:n[2],SellVol:n[3],NoneVol:n[4]};a.vol>0&&(o.Proportion=o.Vol/a.vol),this.Data.PriceList.push(o)}this.UpdateUICallback&&this.UpdateUICallback(this),this.AutoUpate()}},this.RecvError=function(t,e){}}function L(t){this.newMethod=S,this.newMethod(),delete this.newMethod,this.IsAutoUpdate=!1,this.Symbol=t,this.PageSize=20,this.Request=function(t,e){this.Error=null;var a=this,i=t*e,r=i+e,n=X.Domain+"/API/StockDetail";console.log("[LatestDetailData::RequestData] url="+n+", start="+i+" , end="+r),Y.default.ajax({url:n,data:{symbol:this.Symbol,start:i,end:r},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,K.LATEST_DETAIL_DATA)},error:function(t){a.RecvError(t,K.LATEST_DETAIL_DATA)}})},this.RequestData=function(){this.Data={Deal:[],Count:0,Reqeust:{PageIndex:0},Response:{}},this.Request(0,this.PageSize)},this.RequestPage=function(t){this.Data||(this.Data={Deal:[],Count:0}),this.Data.Reqeust={PageIndex:t},this.Data.Response={};for(var e=t*this.PageSize,a=e+this.PageSize,i=!0,r=e;r<a;++r)if(!this.Data.Deal[r]){i=!1;break}i?(this.Data.Response={Start:e,End:a},this.InvokeUpdateUICallback()):this.Request(t,this.PageSize)},this.RecvData=function(t,e){if(this.Data.Count=t.count,!t.detail)return void this.InvokeUpdateUICallback();this.Data.Day={YClose:t.yclose,Open:t.open,Close:t.price,Date:t.date},this.Data.Stock={Symbol:t.symbol,Name:t.name};for(var a=t.start,i=0,r=a;i<t.detail.length;++i,++r){var n=t.detail[i],o={Time:n[0],Price:n[1],Vol:n[2],Amount:n[3],Flag:""};0===n[4]?o.Flag="B":1===n[4]&&(o.Flag="S"),this.Data.Deal[r]=o}this.Data.Response={Start:t.start,End:t.end},this.InvokeUpdateUICallback()},this.RecvError=function(t,e){console.log("[LatestDetailData::RecvError] status="+t.status+" statusText="+t.statusText+" responseText="+t.responseText),this.Error={Status:t.status,Message:t.responseText},this.InvokeUpdateUICallback()}}function N(){this.newMethod=S,this.newMethod(),delete this.newMethod,this.ApiUrl=X.Domain+"/api/StockListAnalyze",this.PolicyGuid,this.Plate="",this.SymbolList=[],this.RequestData=function(){var t=this;Y.default.ajax({url:t.ApiUrl,data:{PolicyGuid:t.PolicyGuid,Plate:t.Plate,Symbol:t.SymbolList},type:"post",dataType:"json",async:!0,success:function(e){t.RecvData(e)},error:function(e){t.RecvError(e)}})},this.RecvData=function(t){this.Data={};var e=t;if(0!=e.count){if(e.concept){var a=[];for(var i in e.concept.data){var r=e.concept.data[i],n={};n.Name=r[0],n.Symbol=r[1],n.Ratio=r[2],n.Count=r[3],n.Increase=r[4],n.Price=r[5],n.Week1=r[6],n.Week4=r[7],a.push(n)}this.Data.Concept=a}e.distributed&&(this.Data.Distributed=e.distributed),e.industry&&(this.Data.Industry=e.industry),e.quadrant&&(this.Data.Quadrant=e.quadrant),e.region&&(this.Data.Region=e.region),this.UpdateUICallback&&this.UpdateUICallback(this)}},this.RecvError=function(t){console.log(t)}}Object.defineProperty(e,"__esModule",{value:!0});var R,A=a(46),O=i(A),P=a(45),B=i(P),_=a(32),G=i(_),k=a(80),V=i(k),H=a(75),Y=i(H),X=new r,W={SYMBOL:0,NAME:1,OPEN:2,PRICE:3,HIGH:4,LOW:5,YCLOSE:6,VOL:7,AMOUNT:8,DATE:9,TIME:10,INCREASE:11,BUY5:12,SELL5:13,DEAL:14,AMPLITUDE:15,MARKET_VALUE:16,FLOW_MARKET_VALUE:17,BOOK_RATE:18,BOOK_DIFFER:19,PE:20,PB:21,EXCHANGE_RATE:23,ROE:24,FINANCE_DATE:25,FINANCE_PERSEARNING:26,FINANCE_PERNETASSET:27,FINANCE_NPROFIT:28,FINANCE_NPROFITINCREASE:29,FINANCE_NNETPROFIT:30,FINANCE_NNPROFITINCREASE:31,FINANCE_NNPROFITSPEED:32,FINANCE_EPS:33,MAX_PRICE:34,MIN_PRICE:35,RISE_FALL_PRICE:36,FINANCE_BENFORD:37,RISEFALLSPEED_1:38,RISEFALLSPEED_3:39,RISEFALLSPEED_5:40,RISEFALLSPEED_10:41,RISEFALLSPEED_15:42,MINUTE_AMPLITUDE_1:43,MINUTE_AMPLITUDE_3:44,MINUTE_AMPLITUDE_5:45,MINUTE_AMPLITUDE_10:46,MINUTE_AMPLITUDE_15:47,MINUTE_AMOUNT_1:48,MINUTE_AMOUNT_3:49,MINUTE_AMOUNT_5:50,MINUTE_AMOUNT_10:51,MINUTE_AMOUNT_15:52,COMPANY_NAME:53,PLATE_INDUSTRY:54,PLATE_CONCEPT:55,PLATE_REGION:56,COMPANY_BUSINESS:57,COMPANY_VOL:58,COMPANY_PRICE:59,COMPANY_RELEASEDATE:60,COMPANY_COMPETENCE:61,CAPITAL_FLOW_DAY:67,CAPITAL_FLOW_DAY3:68,CAPITAL_FLOW_DAY5:69,CAPITAL_FLOW_DAY10:70,DDE:71,DDE3:72,DDE5:73,DDE10:74,EVENTS:75,CAPITAL_A:76,CAPITAL_TOTAL:77,CAPTIAL_ARATE:78,VOLRATIO:79,PE2:80,PE3:81,INDEXTOP:100,WEEK:101,HEAT:102},U={m_mapFiled:new G.default([[W.NAME,"name"],[W.SYMBOL,"symbol"],[W.PRICE,"price"],[W.INCREASE,"increase"],[W.PE,"pe"],[W.FINANCE_BENFORD,"finance.benford"],[W.YCLOSE,"yclose"],[W.RISEFALLSPEED_1,"risefallspeed.1"],[W.RISEFALLSPEED_3,"risefallspeed.3"],[W.RISEFALLSPEED_5,"risefallspeed.5"],[W.RISEFALLSPEED_10,"risefallspeed.10"],[W.RISEFALLSPEED_15,"risefallspeed.15"],[W.MINUTE_AMPLITUDE_1,"mamplitude.1"],[W.MINUTE_AMPLITUDE_3,"mamplitude.3"],[W.MINUTE_AMPLITUDE_5,"mamplitude.5"],[W.MINUTE_AMPLITUDE_10,"mamplitude.10"],[W.MINUTE_AMPLITUDE_15,"mamplitude.15"],[W.MINUTE_AMOUNT_1,"mamount.1"],[W.MINUTE_AMOUNT_3,"mamount.3"],[W.MINUTE_AMOUNT_5,"mamount.5"],[W.MINUTE_AMOUNT_10,"mamount.10"],[W.MINUTE_AMOUNT_15,"mamount.15"]]),GetFieldName:function(t){return this.m_mapFiled.has(t)?this.m_mapFiled.get(t):null}};T.Init=function(){return new T},T.SetDomain=function(t,e){t&&(X.Domain=t),e&&(X.CacheDomain=e)},T.GetSearchStock=function(t){return new I(t)},T.GetShortTerm=function(t){return new x(t)},T.GetDealDay=function(t){return new b(t)},T.GetBlockMember=function(t){return new y(t)},T.GetBlockTop=function(){return new E},T.GetMinuteImage=function(t){return new w(t)},T.GetHistoryDayData=function(t){return new F(t)},T.GetDealPriceListData=function(t){return new M(t)},T.GetLatestDetailData=function(t){return new L(t)},T.GetAnalylisPlate=function(){return new N},T.GetStockHistory=function(){return new g};var K={BASE_DATA:1,INDEX_BASE_DATA:2,HEAT_DATA:3,SORT_DATA:4,BUY_SELL_DATA:5,DEAL_DATA:6,DERIVATIVE_DATA:7,FINANCE_DATA:8,SEARCH_STOCK_DATA:9,SELF_STOCK_DATA:10,LOGON_DATA:11,BLOCK_MEMBER_DATA:13,SHORT_TERM_DATA:14,COMPANY_DATA:15,PLATE_DATA:16,CAPITAL_DATA:17,CAPITAL_FLOW_DAY_DATA:23,CAPITAL_FLOW_DAY3_DATA:24,CAPITAL_FLOW_DAY5_DATA:25,CAPITAL_FLOW_DAY10_DATA:26,DDE_DAY_DATA:27,DDE_DAY3_DATA:28,DDE_DAY5_DATA:29,DDE_DAY10_DATA:30,DEAL_DAY_DATA:105,EVENT_DATA:106,IMAGE_MINUTE_DATA:107,HISTORY_DAY_DATA:108,DEAL_PRICE_LIST_DATA:109,LATEST_DETAIL_DATA:110},z={SH:".SH",SZ:".SZ",HK:".HK",SHFE:".SHF",CFFEX:".CFE",DCE:".DCE",CZCE:".CZC",USA:".USA",IsUSA:function(t){return!!t&&t.indexOf(this.USA)>0},IsSH:function(t){var e=t.length-this.SH.length;return t.indexOf(this.SH)==e},IsSZ:function(t){var e=t.length-this.SZ.length;return t.indexOf(this.SZ)==e},IsHK:function(t){var e=t.length-this.HK.length;return t.indexOf(this.HK)==e},IsSHFE:function(t){return t.indexOf(this.SHFE)>0},IsCFFEX:function(t){return t.indexOf(this.CFFEX)>0},IsDCE:function(t){return t.indexOf(this.DCE)>0},IsCZCE:function(t){return t.indexOf(this.CZCE)>0},IsChinaFutures:function(t){return this.IsCFFEX(t)||this.IsCZCE(t)||this.IsDCE(t)||this.IsSHFE(t)},IsSHSZ:function(t){return this.IsSZ(t)||this.IsSH(t)},IsSHSZFund:function(t){if(!t)return!1;if(this.IsSH(t)){if("5"==t.charAt(0)&&"1"==t.charAt(1))return!0}else if(this.IsSZ(t)&&"1"==t.charAt(0)&&("5"==t.charAt(1)||"6"==t.charAt(1)||"7"==t.charAt(1)||"8"==t.charAt(1)))return!0;return!1},IsSHSZIndex:function(t){if(!t)return!1;var e=t.toUpperCase();if(this.IsSH(e)){var a=e.replace(".SH","");if("0"==e.charAt(0)&&parseInt(a)<=3e3)return!0}else if(this.IsSZ(e)){if("3"==e.charAt(0)&&"9"==e.charAt(1))return!0}else if(e.indexOf(".CI")>0)return!0;return!1},IsSHSZStockA:function(t){if(!t)return!1;var e=t.toUpperCase();if(this.IsSH(e)){e.replace(".SH","");if("6"==e.charAt(0))return!0}else if(this.IsSZ(e)&&"0"==e.charAt(0)){if("0"==e.charAt(1)&&"2"==e.charAt(1))return!0;if("7"!=e.charAt(1)&&"8"!=e.charAt(1))return!0}return!1},IsSHStockSTAR:function(t){if(!t)return!1;var e=t.toUpperCase();return!!this.IsSH(e)&&("6"==e.charAt(0)&&"8"==e.charAt(1)&&"8"==e.charAt(2))},GetMarketStatus:function(t){if(!t)return 0;var e=t.toUpperCase();if(this.IsUSA(e)){var a=GetLocalTime(-4);return r=a.getDay(),n=100*a.getHours()+a.getMinutes(),6==r||0==r?0:n>1730?3:n<930?1:2}var i=new Date,r=i.getDay(),n=100*i.getHours()+i.getMinutes();return 6==r||0==r?0:n>1540?3:n<925?1:2}};e.default=(R={JSStockInit:T.Init,STOCK_FIELD_NAME:W,JSStock:T,StockRead:v},(0,O.default)(R,"STOCK_FIELD_NAME",W),(0,O.default)(R,"RECV_DATA_TYPE",K),R)},function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(){}function o(){this.DataMap=new Vn.default,this.Get=function(t){return this.DataMap.has(t)?this.DataMap.get(t):null},this.Add=function(t){this.DataMap.set(t.ID,t)}}function s(){this.DataMap=new Vn.default([["MA",this.MA],["åçº¿",this.MA],["MA4",this.MA4],["MA5",this.MA5],["MA6",this.MA6],["MA7",this.MA7],["MA8",this.MA8],["BOLL",this.BOLL],["BOLLå¯å¾",this.BOLL2],["BBI",this.BBI],["DKX",this.DKX],["MIKE",this.MIKE],["PBX",this.PBX],["ENE",this.ENE],["MACD",this.MACD],["KDJ",this.KDJ],["MACD2",this.MACD2],["VOL",this.VOL],["VOL2",this.VOL2],["VOL_OVERLAY",this.VOL_OVERLAY],["RSI",this.RSI],["BRAR",this.BRAR],["WR",this.WR],["BIAS",this.BIAS],["OBV",this.OBV],["DMI",this.DMI],["CR",this.CR],["PSY",this.PSY],["CCI",this.CCI],["DMA",this.DMA],["TRIX",this.TRIX],["VR",this.VR],["EMV",this.EMV],["ROC",this.ROC],["MTM",this.MTM],["FSL",this.FSL],["CYR",this.CYR],["MASS",this.MASS],["WAD",this.WAD],["CHO",this.CHO],["ADTM",this.ADTM],["HSL",this.HSL],["BIAS36",this.BIAS36],["BIAS_QL",this.BIAS_QL],["DPO",this.DPO],["OSC",this.OSC],["ATR",this.ATR],["NVI",this.NVI],["PVI",this.PVI],["UOS",this.UOS],["CYW",this.CYW],["LON",this.LON],["NDB",this.NDB],["SKDJ",this.SKDJ],["KD",this.KD],["FKX",this.FKX],["DKCOL",this.DKCOL],["UDL",this.UDL],["MFI",this.MFI],["LWR",this.LWR],["MARSI",this.MARSI],["CYD",this.CYD],["CYF",this.CYF],["TAPI",this.TAPI],["VMACD",this.VMACD],["QACD",this.QACD],["VPT",this.VPT],["WVAD",this.WVAD],["DBQR",this.DBQR],["JS",this.JS],["CYE",this.CYE],["QR",this.QR],["GDX",this.GDX],["JLHB",this.JLHB],["PCNT",this.PCNT],["BTX",this.BTX],["AMO",this.AMO],["VRSI",this.VRSI],["HSCOL",this.HSCOL],["DBQRV",this.DBQRV],["DBLB",this.DBLB],["ACD",this.ACD],["EXPMA",this.EXPMA],["EXPMA_S",this.EXPMA_S],["HMA",this.HMA],["LMA",this.LMA],["VMA",this.VMA],["AMV",this.AMV],["BBIBOLL",this.BBIBOLL],["ALLIGAT",this.ALLIGAT],["ZX",this.ZX],["XS",this.XS],["XS2",this.XS2],["SG-XDT",this.SG_XDT],["SG-SMX",this.SG_SMX],["SG-LB",this.SG_LB],["SG-PF",this.SG_PF],["RAD",this.RAD],["SHT",this.SHT],["ZLJC",this.ZLJC],["ZLMM",this.ZLMM],["SLZT",this.SLZT],["ADVOL",this.ADVOL],["CYC",this.CYC],["CYS",this.CYS],["CYQKL",this.CYQKL],["SCR",this.SCR],["ASR",this.ASR],["SAR",this.SAR],["TJCJL",this.TJCJL],["éæ¯",this.VOLRate],["å¹³åKçº¿",this.HeikinAshi],["ADL",this.ADL],["SQJZ",this.SQJZ],["XT",this.XT],["CFJT",this.CFJT],["CYX",this.CYX],["WAVE",this.WAVE],["VOL-TDX",this.VOL_TDX],["EMPTY",this.EMPTY],["ç¥å¥ä¹è½¬",this.NineTurns],["EMA",this.EMA3],["EMA4",this.EMA4],["EMA5",this.EMA5],["EMA6",this.EMA6],["ICHIMOKU",this.ICHIMOKU],["CDP-STD",this.CDP_STD],["TBP-STD",this.TBP_STD],["ADX",this.ADX],["æä»é",this.VOL_POSITION],["æ£æ·çº¿",this.ShareholderCount],["NXTS",this.NXTS],["FKX",this.FKX],["ä¸¤èèµé",this.Margin4],["ZSDB",this.ZSDB],["CJL2",this.CJL],["ASI",this.ASI],["DC",this.DC],["DEMA",this.DEMA],["VWAP",this.VWAP],["ZNZ_CBAND",this.ZNZ_CBAND],["ZNZ_RPY2",this.ZNZ_RPY2],["ZNZ_RPY1",this.ZNZ_RPY1],["é£é¾åå¼",this.Dragon4_Main],["é£é¾åå¼-éå¾",this.Dragon4_Fig],["èµéåæ",this.FundsAnalysis],["èèµå æ¯",this.MarginProportion],["è´é¢æ°é»",this.NewsNegative],["æ¶¨è·è¶å¿",this.UpDownAnalyze],["åä¸èµé",this.HK2SHSZ],["è¡ä¸äººæ°",this.ShareHolder],["ä¸¤èä½é¢",this.Margin2],["ä¸¤èä½é¢2",this.Margin3],["æ¾å¿è¡-æçBSç¹",this.FXG_BSPoint],["æ¾å¿è¡-æ¶¨åå¤ç©ºçº¿",this.FXG_INDEX],["æ¾å¿è¡-æ¶¨åå¸ç­¹åº",this.FXG_INDEX2],["æ¾å¿è¡-éè½é»éç¹",this.FXG_INDEX3],["äºå½©Kçº¿-åå­æ",this.COLOR_KSTAR1],["äºå½©Kçº¿-æ©æ¨ä¹æ",this.COLOR_KSTAR2],["äºå½©Kçº¿-é»æä¹æ",this.COLOR_KSTAR3],["äºå½©Kçº¿-é¿åå­",this.COLOR_SHI1],["äºå½©Kçº¿-èº«æå­ç²",this.COLOR_K220],["äºå½©Kçº¿-ä¸ä¸ªç½æ­¦å£«",this.COLOR_K300],["äºå½©Kçº¿-ä¸åªä¹é¸¦",this.COLOR_K310],["äºå½©Kçº¿-åå¤´é³çº¿",this.COLOR_K380],["äºå½©Kçº¿-åèé´çº¿",this.COLOR_K390],["äºå½©Kçº¿-åæ­»åå­",this.COLOR_K134],["äºå½©Kçº¿-æ©æ¨åå­æ",this.COLOR_K140],["äºå½©Kçº¿-é»æåå­æ",this.COLOR_K150],["äºå½©Kçº¿-å°å»ä¹æ",this.COLOR_K160],["äºå½©Kçº¿-åè½¬é¤å¤´",this.COLOR_K165],["äºå½©Kçº¿-é¤å¤´",this.COLOR_K170],["äºå½©Kçº¿-åé¢",this.COLOR_K180],["äºå½©Kçº¿-ç©¿å¤´ç ´è",this.COLOR_K190],["äºå½©Kçº¿-åºæ°´èè",this.COLOR_CSFR],["äºå½©Kçº¿-ä¹äºçé¡¶",this.COLOR_WYGD],["äºå½©Kçº¿-æååç°",this.COLOR_SGCJ],["äºå½©Kçº¿-åå­è",this.COLOR_SZTAI],["äºå½©Kçº¿-å",this.COLOR_SWORD],["äºå½©Kçº¿-å¹³é¡¶",this.COLOR_PINGDING],["äºå½©Kçº¿-å¹³åº",this.COLOR_PINGDI],["äºå½©Kçº¿-å¤§é³ç",this.COLOR_DAYANZHU],["äºå½©Kçº¿-å¤§é´ç",this.COLOR_DAYINGZHU],["äºå½©Kçº¿-å¥½ååæ»",this.COLOR_HYFG],["äºå½©Kçº¿-è·³ç©ºç¼ºå£",this.COLOR_TKQK],["äºå½©Kçº¿-åé£ä¹é¸¦",this.COLOR_SFWY],["äºå½©Kçº¿-ä¸åä¸é¨æ²",this.COLOR_SSSBQ],["äºå½©Kçº¿-ä¸è·ä¸é¨æ²",this.COLOR_XDSBQ],["äºå½©Kçº¿-é¿ä¸å½±",this.COLOR_CHXY],["äºå½©Kçº¿-é¿ä¸å½±",this.COLOR_CHSY],["äºå½©Kçº¿-åç¦»",this.COLOR_FENLI],["äº¤æç³»ç»-BIAS",this.TRADE_BIAS],["äº¤æç³»ç»-CCI",this.TRADE_CCI],["äº¤æç³»ç»-DMI",this.TRADE_DMI],["äº¤æç³»ç»-KD",this.TRADE_KD],["äº¤æç³»ç»-BOLL",this.TRADE_BOLL],["äº¤æç³»ç»-KDJ",this.TRADE_KDJ],["äº¤æç³»ç»-MA",this.TRADE_MA],["äº¤æç³»ç»-MACD",this.TRADE_MACD],["äº¤æç³»ç»-MTM",this.TRADE_MTM],["äº¤æç³»ç»-PSY",this.TRADE_PSY],["äº¤æç³»ç»-ROC",this.TRADE_ROC],["äº¤æç³»ç»-RSI",this.TRADE_RSI],["äº¤æç³»ç»-VR",this.TRADE_VR],["äº¤æç³»ç»-DPSJ",this.TRADE_DPSJ],["TEST",this.TEST]])}function l(t,e,a){this.DivElement=t,this.DivToolElement=null,this.JSChartContainer,this.ResizeListener,this.CanvasElement=document.createElement("canvas"),this.CanvasElement.className="jschart-drawing",this.CanvasElement.id=D(),this.CanvasElement.setAttribute("tabindex",0),this.CanvasElement.style&&(this.CanvasElement.style.outline="none"),t.hasChildNodes()&&Xn.Chart.Log("[JSChart::JSChart] divElement hasChildNodes",t.childNodes),t.appendChild(this.CanvasElement),this.OffscreenCanvasElement,1==e&&(this.OffscreenCanvasElement=document.createElement("canvas")),this.CacheCanvasElement=null,a&&(this.CacheCanvasElement=document.createElement("canvas")),this.MapExtraCanvasElement=new Vn.default,this.CreateExtraCanvasElement=function(e,a){if(this.MapExtraCanvasElement.has(e))return this.MapExtraCanvasElement.get(e);var i=document.createElement("canvas");i.className="jschart-drawing-extra",i.id=D(),e==l.CorssCursorCanvasKey?i.setAttribute("tabindex",5):i.setAttribute("tabindex",1),i.style&&(i.style.outline="none",i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style["pointer-events"]="none"),a&&(we.IsNumber(a.TabIndex)&&i.setAttribute("tabindex",a.TabIndex),we.IsNumber(a.ZIndex)&&(i.style["z-index"]=a.ZIndex)),this.CanvasElement&&(i.height=this.CanvasElement.height,i.width=this.CanvasElement.width,i.style&&(i.style.width=this.CanvasElement.style.width,i.style.height=this.CanvasElement.style.height)),t.appendChild(i);var r={Element:i,Canvas:null};this.MapExtraCanvasElement.set(e,r)},this.GetExtraCanvas=function(t){if(!this.MapExtraCanvasElement.has(t))return null;var e=this.MapExtraCanvasElement.get(t);return e.Element?(e.Canvas||(e.Canvas=e.Element.getContext("2d")),e):null},this.OnSize=function(t){var e=this.DivElement.offsetHeight,a=this.DivElement.offsetWidth;this.DivElement.style.height&&this.DivElement.style.width&&(this.DivElement.style.height.includes("px")&&(e=parseInt(this.DivElement.style.height.replace("px",""))),this.DivElement.style.width.includes("px")&&(a=parseInt(this.DivElement.style.width.replace("px","")))),this.ToolElement&&(e-=this.ToolElement.style.height.replace("px","")),this.CanvasElement.height=e,this.CanvasElement.width=a,this.CanvasElement.style.width=this.CanvasElement.width+"px",this.CanvasElement.style.height=this.CanvasElement.height+"px";var i=C();this.CanvasElement.height*=i,this.CanvasElement.width*=i,this.OffscreenCanvasElement&&(this.OffscreenCanvasElement.height=this.CanvasElement.height,this.OffscreenCanvasElement.width=this.CanvasElement.width),this.CacheCanvasElement&&(this.CacheCanvasElement.height=this.CanvasElement.height,this.CacheCanvasElement.width=this.CanvasElement.width);var r=!0,n=!1,o=void 0;try{for(var s,l=(0,Gn.default)(this.MapExtraCanvasElement);!(r=(s=l.next()).done);r=!0){var h=s.value,u=h[1],c=u.Element;c&&(c.height=this.CanvasElement.height,c.width=this.CanvasElement.width,c.style.width=this.CanvasElement.style.width,c.style.height=this.CanvasElement.style.height)}}catch(t){n=!0,o=t}finally{try{!r&&l.return&&l.return()}finally{if(n)throw o}}Xn.Chart.Log("[JSChart::OnSize] devicePixelRatio="+window.devicePixelRatio+", height="+this.CanvasElement.height+", width="+this.CanvasElement.width),t&&0==t.Redraw||this.JSChartContainer&&(t&&!0===t.XYSplit&&this.JSChartContainer.ResetFrameXYSplit(),this.JSChartContainer.OnSize&&t&&1==t.Type?this.JSChartContainer.OnSize():this.JSChartContainer.ShowAllKLine&&t&&2==t.Type?this.JSChartContainer.ShowAllKLine():(this.JSChartContainer.Frame&&this.JSChartContainer.Frame.SetSizeChage(!0),this.JSChartContainer.Draw()))},this.AdjustChartBorder=function(t){var e=C();if(t.Frame.ChartBorder.Left*=e,t.Frame.ChartBorder.Right*=e,t.Frame.ChartBorder.Top*=e,t.Frame.ChartBorder.Bottom*=e,t.Frame.AutoLeftBorder){var a=t.Frame.AutoLeftBorder;we.IsNumber(a.MinWidth)&&(a.MinWidth*=e),we.IsNumber(a.Blank)&&(a.Blank*=e)}if(t.Frame.AutoRightBorder){var a=t.Frame.AutoRightBorder;we.IsNumber(a.MinWidth)&&(a.MinWidth*=e),we.IsNumber(a.Blank)&&(a.Blank*=e)}},this.AdjustTitleHeight=function(t){for(var e=C(),a=0;a<t.Frame.SubFrame.length;++a)t.Frame.SubFrame[a].Frame.ChartBorder.TitleHeight*=e;t.ChartCorssCursor.TextHeight*=e},this.SetChartBorder=function(t,e){if(e.Border){var a=e.Border;we.IsNumber(e.Border.Left)?t.Frame.ChartBorder.Left=e.Border.Left:e.Border.Left=t.Frame.ChartBorder.Left,we.IsNumber(e.Border.Right)?t.Frame.ChartBorder.Right=e.Border.Right:e.Border.Right=t.Frame.ChartBorder.Right,we.IsNumber(e.Border.Top)?t.Frame.ChartBorder.Top=e.Border.Top:e.Border.Top=t.Frame.ChartBorder.Top,we.IsNumber(e.Border.Bottom)?t.Frame.ChartBorder.Bottom=e.Border.Bottom:e.Border.Bottom=t.Frame.ChartBorder.Bottom,a.AutoLeft&&(t.Frame.AutoLeftBorder={},we.IsNumber(a.AutoLeft.Blank)&&(t.Frame.AutoLeftBorder.Blank=a.AutoLeft.Blank),we.IsNumber(a.AutoLeft.MinWidth)&&(t.Frame.AutoLeftBorder.MinWidth=a.AutoLeft.MinWidth)),a.AutoRight&&(t.Frame.AutoRightBorder={},we.IsNumber(a.AutoRight.Blank)&&(t.Frame.AutoRightBorder.Blank=a.AutoRight.Blank),we.IsNumber(a.AutoRight.MinWidth)&&(t.Frame.AutoRightBorder.MinWidth=a.AutoRight.MinWidth))}},this.SetEventCallback=function(t,e){if(t&&we.IsNonEmptyArray(e))for(var a=0;a<e.length;++a){var i=e[a];t.AddEventCallback(i)}},this.CreateKLineChartContainer=function(t){var e=this,a=null;a="åå²Kçº¿å¾æ¨ªå±"===t.Type?new yi(this.CanvasElement):new Ti(this.CanvasElement,this.OffscreenCanvasElement,this.CacheCanvasElement),a.GetExtraCanvas=function(t){return e.GetExtraCanvas(t)};var i=this.GetExtraCanvas(l.CorssCursorCanvasKey);i&&a.SetCorssCursorElement(i),t.EventCallback&&this.SetEventCallback(a,t.EventCallback),t.NetworkFilter&&(a.NetworkFilter=t.NetworkFilter);var r=C();if(we.IsBool(t.IsShowRightMenu)&&(a.IsShowRightMenu=t.IsShowRightMenu),t.ScriptError&&(a.ScriptErrorCallback=t.ScriptError),1==t.EnableScrollUpDown&&(a.EnableScrollUpDown=t.EnableScrollUpDown),1==t.DisableMouse&&(a.DisableMouse=t.DisableMouse),t.TouchMoveMinAngle&&(a.TouchMoveMinAngle=t.TouchMoveMinAngle),t.EnableZoomUpDown&&(a.EnableZoomUpDown=t.EnableZoomUpDown),we.IsString(t.SplashTitle)&&(a.LoadDataSplashTitle=t.SplashTitle),we.IsBool(t.EnableZoomIndexWindow)&&(a.EnableZoomIndexWindow=t.EnableZoomIndexWindow),we.IsBool(t.IsDrawPictureXY)&&(a.IsDrawPictureXY=t.IsDrawPictureXY),we.IsNumber(t.CtrlMoveStep)&&(a.CtrlMoveStep=t.CtrlMoveStep),we.IsBool(t.EnableIndexChartDrag)&&(a.EnableIndexChartDrag=t.EnableIndexChartDrag),we.IsBool(t.EnableVerifyRecvData)&&(a.EnableVerifyRecvData=t.EnableVerifyRecvData),t.GlobalOption){var n=t.GlobalOption;if(we.IsBool(n.IsValueFullRange)&&(a.GlobalOption.IsValueFullRange=n.IsValueFullRange),n.SelectedBorder){var o=n.SelectedBorder;we.IsNumber(o.Mode)&&(a.GlobalOption.SelectedBorder.Mode=o.Mode)}}if(t.EnableYDrag){var n=t.EnableYDrag;we.IsBool(n.Left)&&(a.EnableYDrag.Left=n.Left),we.IsBool(n.Right)&&(a.EnableYDrag.Right=n.Right),we.IsBool(n.Wheel)&&(a.EnableYDrag.Wheel=n.Wheel),we.IsNumber(n.WheelYMove)&&(a.EnableYDrag.WheelYMove=n.WheelYMove)}if(t.KLineTooltip){var n=t.KLineTooltip;we.IsBool(n.Enable)&&(a.KLineTooltipConfig.Enable=n.Enable),we.IsBool(n.EnableKeyDown)&&(a.KLineTooltipConfig.EnableKeyDown=n.EnableKeyDown)}if(t.KLine){var n=t.KLine;t.KLine.DragMode>=0&&(a.DragMode=t.KLine.DragMode),t.KLine.Right>=0&&(a.Right=t.KLine.Right),t.KLine.Period>=0&&(a.Period=t.KLine.Period),t.KLine.MaxReqeustDataCount>0&&(a.MaxRequestDataCount=t.KLine.MaxReqeustDataCount),t.KLine.MaxRequestDataCount>0&&(a.MaxRequestDataCount=t.KLine.MaxRequestDataCount),t.KLine.Info&&t.KLine.Info.length>0&&a.SetKLineInfo(t.KLine.Info,!1),we.IsBool(n.IsShowTooltip)&&(a.IsShowTooltip=n.IsShowTooltip),t.KLine.MaxRequestMinuteDayCount>0&&(a.MaxRequestMinuteDayCount=t.KLine.MaxRequestMinuteDayCount),t.KLine.DrawType&&(a.KLineDrawType=t.KLine.DrawType),t.KLine.FirstShowDate>19910101&&(a.CustomShow={Date:t.KLine.FirstShowDate,PageSize:t.KLine.PageSize}),//!!å·²å¼ç¨ æ°çæ ¼å¼"CustomShow"
t.KLine.RightSpaceCount>0&&(a.RightSpaceCount=t.KLine.RightSpaceCount),t.KLine.ZoomType>0&&(a.ZoomType=t.KLine.ZoomType),t.KLine.DataWidth>=1&&(a.KLineSize={DataWidth:t.KLine.DataWidth}),we.IsNumber(t.KLine.RightFormula)&&(a.RightFormula=t.KLine.RightFormula)}if(t.CustomShow&&we.IsPlusNumber(t.CustomShow.Date)){var n=t.CustomShow;a.CustomShow={Date:n.Date},we.IsNumber(n.Time)&&(a.CustomShow.Time=n.Time),we.IsPlusNumber(n.PageSize)&&(a.CustomShow.PageSize=n.PageSize)}if(t.EnableFlowCapital){var n=t.EnableFlowCapital;1==n.BIT&&(a.EnableFlowCapital.BIT=n.BIT)}if(we.IsBool(t.EnableBorderDrag)&&(a.EnableBorderDrag=t.EnableBorderDrag),t.Page&&(t.Page.Day&&1==t.Page.Day.Enable&&(a.Page.Day.Enable=!0),t.Page.Minute&&1==t.Page.Minute.Enable&&(a.Page.Minute.Enable=!0)),t.DragDownload&&(t.DragDownload.Day&&1==t.DragDownload.Day.Enable&&(a.DragDownload.Day.Enable=!0),t.DragDownload.Minute&&1==t.DragDownload.Minute.Enable&&(a.DragDownload.Minute.Enable=!0)),t.ZoomDownload&&(t.ZoomDownload.Day&&we.IsBool(t.ZoomDownload.Day.Enable)&&(a.ZoomDownload.Day.Enable=t.ZoomDownload.Day.Enable),t.ZoomDownload.Minute&&we.IsBool(t.ZoomDownload.Minute.Enable)&&(a.ZoomDownload.Minute.Enable=t.ZoomDownload.Minute.Enable)),t.Language){var h=bo.GetLanguageID(t.Language);we.IsNumber(h)&&(a.LanguageID=h)}if(t.SourceDatatLimit&&a.SetSourceDatatLimit(t.SourceDatatLimit),t.DrawPicture&&t.DrawPicture.StorageKey&&a.ChartDrawStorage&&a.ChartDrawStorage.Load(t.DrawPicture.StorageKey),t.DrawTool&&t.DrawTool.StorageKey&&a.ChartDrawStorage&&a.ChartDrawStorage.Load(t.DrawTool.StorageKey),we.IsNumber(t.StepPixel)&&(a.StepPixel=t.StepPixel),t.ZoomStepPixel>0&&(a.ZoomStepPixel=t.ZoomStepPixel),1==t.IsApiPeriod&&(a.IsApiPeriod=t.IsApiPeriod),t.SelectedChart){var n=t.SelectedChart;we.IsBool(n.EnableSelected)&&(a.SelectedChart.EnableSelected=n.EnableSelected),we.IsBool(n.EnableMoveOn)&&(a.SelectedChart.EnableMoveOn=n.EnableMoveOn)}if(!t.Windows||t.Windows.length<=0)return null;if(we.IsNonEmptyArray(t.KLineCalcOption))for(var u=0;u<t.KLineCalcOption.length;++u){var n=t.KLineCalcOption[u];n.ClassName&&n.Option&&a.SetKLineCalcOption(n.ClassName,n.Option)}if("KLineChartContainer"==a.ClassName&&(t.DragSelectRect||(t.DragSelectRect={Enable:!0}),t.DragSelectRect)){var c=10,n=t.DragSelectRect;we.IsNumber(n.ZIndex)&&(c=n.ZIndex),n.Enable&&this.CreateExtraCanvasElement(l.RectDragCanvasKey,{ZIndex:c})}if(a.Create(t.Windows.length,t),this.SetChartBorder(a,t),this.AdjustChartBorder(a),t.KLine&&t.KLine.PageSize>0){var f=a.GetMaxMinPageSize();f.Max>10&&f.Max<t.KLine.PageSize?a.PageSize=f.Max:f.Min>10&&f.Min>t.KLine.PageSize?a.PageSize=f.Min:a.PageSize=t.KLine.PageSize}if(!0===t.IsCorssOnlyDrawKLine&&(a.ChartCorssCursor.IsOnlyDrawKLine=t.IsCorssOnlyDrawKLine),!0===t.CorssCursorTouchEnd&&(a.CorssCursorTouchEnd=t.CorssCursorTouchEnd),1==t.IsClickShowCorssCursor&&(a.IsClickShowCorssCursor=t.IsClickShowCorssCursor),t.CorssCursorInfo){var n=t.CorssCursorInfo;isNaN(t.CorssCursorInfo.Left)||(a.ChartCorssCursor.ShowTextMode.Left=t.CorssCursorInfo.Left),isNaN(t.CorssCursorInfo.Right)||(a.ChartCorssCursor.ShowTextMode.Right=t.CorssCursorInfo.Right),isNaN(t.CorssCursorInfo.Bottom)||(a.ChartCorssCursor.ShowTextMode.Bottom=t.CorssCursorInfo.Bottom),!1===t.CorssCursorInfo.IsShowCorss&&(a.ChartCorssCursor.IsShowCorss=t.CorssCursorInfo.IsShowCorss),we.IsBool(n.IsShowClose)&&(a.ChartCorssCursor.IsShowClose=n.IsShowClose),we.IsBool(n.IsOnlyDrawKLine)&&(a.ChartCorssCursor.IsOnlyDrawKLine=n.IsOnlyDrawKLine),t.CorssCursorInfo.PressTime&&(a.PressTime=t.CorssCursorInfo.PressTime),we.IsNumber(t.CorssCursorInfo.HPenType)&&(a.ChartCorssCursor.HPenType=t.CorssCursorInfo.HPenType),t.CorssCursorInfo.VPenType>0&&(a.ChartCorssCursor.VPenType=t.CorssCursorInfo.VPenType),we.IsNumber(n.VLineType)&&(a.ChartCorssCursor.VLineType=n.VLineType),t.CorssCursorInfo.DateFormatType>0&&(a.ChartCorssCursor.StringFormatX.DateFormatType=t.CorssCursorInfo.DateFormatType),we.IsBool(n.IsDrawXRangeBG)&&(a.ChartCorssCursor.IsDrawXRangeBG=n.IsDrawXRangeBG),we.IsBool(t.CorssCursorInfo.IsFixXLastTime)&&(a.ChartCorssCursor.IsFixXLastTime=t.CorssCursorInfo.IsFixXLastTime),we.IsNumber(n.TextHeight)&&(a.ChartCorssCursor.TextHeight=n.TextHeight),n.RightButton&&we.IsBool(n.RightButton.Enable)&&(a.ChartCorssCursor.RightButton.Enable=n.RightButton.Enable),we.IsNumber(n.PriceFormatType)&&(a.ChartCorssCursor.StringFormatY.PriceFormatType=n.PriceFormatType),we.IsNumber(n.DataFormatType)&&(a.ChartCorssCursor.StringFormatY.DataFormatType=n.DataFormatType),we.IsBool(n.EnableKeyboard)&&(a.ChartCorssCursor.EnableKeyboard=n.EnableKeyboard)}if(t.CorssCursor={},t.CorssCursor.TitleHeight=a.ChartCorssCursor.TextHeight,we.IsNumber(t.SplashTitlePosition)&&a.ChartSplashPaint&&(a.ChartSplashPaint.Position=t.SplashTitlePosition),t.Frame)for(var u=0;u<t.Frame.length;++u){var n=t.Frame[u];if(a.Frame.SubFrame[u]){var d=a.Frame.SubFrame[u].Frame;we.IsNumber(n.SplitCount)&&(a.Frame.SubFrame[u].Frame.YSplitOperator.SplitCount=n.SplitCount),n.StringFormat&&(a.Frame.SubFrame[u].Frame.YSplitOperator.StringFormat=n.StringFormat),we.IsNumber(n.FloatPrecision)&&(a.Frame.SubFrame[u].Frame.YSplitOperator.FloatPrecision=n.FloatPrecision),n.Custom&&(a.Frame.SubFrame[u].Frame.YSplitOperator.Custom=n.Custom),we.IsNumber(n.SplitType)&&(a.Frame.SubFrame[u].Frame.YSplitOperator.SplitType=n.SplitType,a.Frame.SubFrame[u].Frame.YSplitOperator.DefaultSplitType=n.SplitType),we.IsNumber(n.FilterType)&&(d.YSplitOperator.FilterType=n.FilterType),isNaN(n.Height)||(a.Frame.SubFrame[u].Height=n.Height),!1!==n.IsShowLeftText&&!0!==n.IsShowLeftText||(a.Frame.SubFrame[u].Frame.IsShowYText[0]=n.IsShowLeftText,a.Frame.SubFrame[u].Frame.YSplitOperator.IsShowLeftText=n.IsShowLeftText),!1!==n.IsShowRightText&&!0!==n.IsShowRightText||(a.Frame.SubFrame[u].Frame.IsShowYText[1]=n.IsShowRightText,a.Frame.SubFrame[u].Frame.YSplitOperator.IsShowRightText=n.IsShowRightText),n.TopSpace>=0&&(a.Frame.SubFrame[u].Frame.ChartBorder.TopSpace=n.TopSpace*r),n.BottomSpace>=0&&(a.Frame.SubFrame[u].Frame.ChartBorder.BottomSpace=n.BottomSpace*r),n.RightTextPosition>0&&(a.Frame.SubFrame[u].Frame.YTextPosition[1]=n.RightTextPosition),n.LeftTextPosition>0&&(a.Frame.SubFrame[u].Frame.YTextPosition[0]=n.LeftTextPosition),0==n.IsShowXLine&&(a.Frame.SubFrame[u].Frame.IsShowXLine=n.IsShowXLine),0==n.IsShowYLine&&(a.Frame.SubFrame[u].Frame.IsShowYLine=n.IsShowYLine),we.IsNumber(n.YTextBaseline)&&(a.Frame.SubFrame[u].Frame.YTextBaseline=n.YTextBaseline),n.YCoordinateType>0&&(a.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=n.YCoordinateType),1==n.IsYReverse&&(a.Frame.SubFrame[0].Frame.CoordinateType=1),we.IsNumber(n.PercentageTextFormat)&&(d.YSplitOperator.PercentageTextFormat=n.PercentageTextFormat),n.DefaultYMaxMin&&(a.Frame.SubFrame[u].Frame.YSplitOperator.DefaultYMaxMin=n.DefaultYMaxMin),we.IsBool(n.EnableRemoveZero)&&(a.Frame.SubFrame[u].Frame.YSplitOperator.EnableRemoveZero=n.EnableRemoveZero),we.IsPlusNumber(n.MinYDistance)&&(a.Frame.SubFrame[u].Frame.MinYDistance=n.MinYDistance),we.IsNumber(n.BorderLine)&&(a.Frame.SubFrame[u].Frame.BorderLine=n.BorderLine),we.IsBool(n.IsShowIndexTitle)&&(a.Frame.SubFrame[u].Frame.IsShowIndexTitle=n.IsShowIndexTitle),we.IsBool(n.IsDrawTitleBottomLine)&&(d.IsDrawTitleBottomLine=n.IsDrawTitleBottomLine),we.IsBool(n.IsShowNameArrow)&&(a.Frame.SubFrame[u].Frame.IsShowNameArrow=n.IsShowNameArrow),n.ClientBGColor&&(d.ClientBGColor=n.ClientBGColor)}}if(t.KLine){var n=t.KLine,D=a.ChartPaint[0];0==t.KLine.ShowKLine&&(D.IsShow=!1),t.KLine.InfoPosition>0&&(D.InfoPosition=t.KLine.InfoPosition),we.IsBool(n.IsShowMaxMinPrice)&&(D.IsShowMaxMinPrice=n.IsShowMaxMinPrice),we.IsNumber(n.OneLimitBarType)&&(D.OneLimitBarType=n.OneLimitBarType),n.PriceGap&&(we.IsBool(n.PriceGap.Enable)&&(D.PriceGap.Enable=n.PriceGap.Enable),we.IsNumber(n.PriceGap.Count)&&(D.PriceGap.Count=n.PriceGap.Count))}if(t.KLineTitle){var n=t.KLineTitle;0==t.KLineTitle.IsShowName&&(a.TitlePaint[0].IsShowName=!1),0==t.KLineTitle.IsShowSettingInfo&&(a.TitlePaint[0].IsShowSettingInfo=!1),0==t.KLineTitle.IsShow&&(a.TitlePaint[0].IsShow=!1),we.IsBool(n.IsTitleShowLatestData)&&(a.IsTitleShowLatestData=n.IsTitleShowLatestData)}if(t.Overlay)for(var u=0;u<t.Overlay.length;++u){var n=t.Overlay[u];a.OverlaySymbol(n.Symbol,n)}if(t.ExtendChart)for(var u=0;u<t.ExtendChart.length;++u){var n=t.ExtendChart[u];a.CreateExtendChart(n.Name,n)}var m=new s;if(t.ColorIndex){var n=t.ColorIndex,p=m.Get(n.Index);p&&(p.ID=n.Index,a.ColorIndex=new Sr(p.Name,p.Script,p.Args,p))}if(t.TradeIndex){var n=t.TradeIndex,v=m.Get(n.Index);v&&(v.ID=n.Index,a.TradeIndex=new Sr(v.Name,v.Script,v.Args,v))}for(var u=0;u<t.Windows.length;++u){var n=t.Windows[u];if(n.Script)a.WindowIndex[u]=new Sr(n.Name,n.Script,n.Args,n);else if(n.JsonData)a.WindowIndex[u]=new Oi(n.Name,n.Script,n.Args,n);else if(n.Local&&n.Local.Data)a.WindowIndex[u]=new yr(n.Local.Name,n.Local.Args,{JsonData:n.Local.Data});else if(n.API){var g=n.API;a.WindowIndex[u]=new br(g.Name,g.Script,g.Args,n)}else{var T=di.Get(n.Index);if(T)a.WindowIndex[u]=T.Create(n.Option),a.WindowIndex[u].SetArgs&&a.WindowIndex[u].SetArgs(n.Args),a.CreateWindowIndex(u);else{var m=new s,I=m.Get(n.Index);if(!I)continue;s.ModifyAttribute(I,n),I.ID=n.Index,a.WindowIndex[u]=new Sr(I.Name,I.Script,I.Args,I),n.StringFormat>0&&(a.WindowIndex[u].StringFormat=n.StringFormat),n.FloatPrecision>=0&&(a.WindowIndex[u].FloatPrecision=n.FloatPrecision)}}var S=a.Frame.SubFrame[u].Frame;we.IsBool(n.Modify)&&(S.ModifyIndex=n.Modify),we.IsBool(n.Change)&&(S.ChangeIndex=n.Change),we.IsBool(n.Close)&&(S.CloseIndex=n.Close),we.IsBool(n.Overlay)&&(S.OverlayIndex=n.Overlay),we.IsBool(n.Export)&&(S.ExportData=n.Export),we.IsBool(n.MaxMin)&&(a.Frame.SubFrame[u].Frame.MaxMinWindow=n.MaxMin),we.IsBool(n.TitleWindow)&&(a.Frame.SubFrame[u].Frame.TitleWindow=n.TitleWindow),1==n.IsDrawTitleBG&&(a.Frame.SubFrame[u].Frame.IsDrawTitleBG=n.IsDrawTitleBG),we.IsBool(n.IsShowNameArrow)&&(a.Frame.SubFrame[u].Frame.IsShowNameArrow=n.IsShowNameArrow),we.IsNumber(n.TitleHeight)?a.Frame.SubFrame[u].Frame.ChartBorder.TitleHeight=n.TitleHeight:n.TitleHeight=a.Frame.SubFrame[u].Frame.ChartBorder.TitleHeight,we.IsBool(n.IsShowTitleArrow)&&(S.IsShowTitleArrow=n.IsShowTitleArrow),we.IsNumber(n.TitleArrowType)&&(S.TitleArrowType=n.TitleArrowType),0==n.IsShowIndexName&&(a.Frame.SubFrame[u].Frame.IsShowIndexName=!1),0==n.IsShowOverlayIndexName&&(a.Frame.SubFrame[u].Frame.IsShowOverlayIndexName=!1),we.IsNumber(n.IndexParamSpace)&&(a.Frame.SubFrame[u].Frame.IndexParamSpace=n.IndexParamSpace),we.IsNumber(n.IndexTitleSpace)&&(a.Frame.SubFrame[u].Frame.IndexTitleSpace=n.IndexTitleSpace),we.IsUndefined(n.HorizontalReserved)||(S.HorizontalReserved=n.HorizontalReserved),n.OverlayIndexType&&(we.IsNumber(n.OverlayIndexType.Position)&&(a.Frame.SubFrame[u].Frame.OverlayIndexType.Position=n.OverlayIndexType.Position),we.IsNumber(n.OverlayIndexType.LineSpace)&&(a.Frame.SubFrame[u].Frame.OverlayIndexType.LineSpace=n.OverlayIndexType.LineSpace))}if(t.OverlayIndexFrameWidth>40&&(a.Frame.FixedRightWidth.Overlay=t.OverlayIndexFrameWidth),we.IsNonEmptyArray(t.OverlayIndex))for(var u=0;u<t.OverlayIndex.length;++u){var n=t.OverlayIndex[u];if(!(n.Windows>=a.Frame.SubFrame.length)){var x=(0,Bn.default)(n),b=JSON.parse(x);n.Index&&(b.IndexName=n.Index),n.Windows>=0&&(b.WindowIndex=n.Windows),a.CreateOverlayWindowsIndex(b)}}return this.AdjustTitleHeight(a),a},this.CreateCustomKLineChartContainer=function(t){var e=new Si(this.CanvasElement);if(we.IsBool(t.IsShowRightMenu)&&(e.IsShowRightMenu=t.IsShowRightMenu),t.KLine&&(t.KLine.DragMode>=0&&(e.DragMode=t.KLine.DragMode),t.KLine.Right>=0&&(e.Right=t.KLine.Right),t.KLine.Period>=0&&(e.Period=t.KLine.Period),t.KLine.MaxRequestDataCount>0&&(e.MaxRequestDataCount=t.KLine.MaxRequestDataCount),t.KLine.Info&&t.KLine.Info.length>0&&e.SetKLineInfo(t.KLine.Info,!1),t.KLine.PageSize>0&&(e.PageSize=t.KLine.PageSize),0==t.KLine.IsShowTooltip&&(e.IsShowTooltip=!1)),t.CustomStock&&(e.CustomStock=t.CustomStock),t.QueryDate&&(e.QueryDate=t.QueryDate),!t.Windows||t.Windows.length<=0)return null;if(e.Create(t.Windows.length),t.Border&&(isNaN(t.Border.Left)||(e.Frame.ChartBorder.Left=t.Border.Left),isNaN(t.Border.Right)||(e.Frame.ChartBorder.Right=t.Border.Right),isNaN(t.Border.Top)||(e.Frame.ChartBorder.Top=t.Border.Top)),0==t.IsShowCorssCursorInfo&&(e.ChartCorssCursor.IsShowText=t.IsShowCorssCursorInfo),t.Frame)for(var a=0;a<t.Frame.length;++a){var i=t.Frame[a];i.SplitCount&&(e.Frame.SubFrame[a].Frame.YSplitOperator.SplitCount=i.SplitCount),i.StringFormat&&(e.Frame.SubFrame[a].Frame.YSplitOperator.StringFormat=i.StringFormat)}t.KLineTitle&&(0==t.KLineTitle.IsShowName&&(e.TitlePaint[0].IsShowName=!1),0==t.KLineTitle.IsShowSettingInfo&&(e.TitlePaint[0].IsShowSettingInfo=!1));for(var r=new s,a=0;a<t.Windows.length;++a){var i=t.Windows[a];if(i.Script)e.WindowIndex[a]=new Sr(i.Name,i.Script,i.Args,i);else{var n=di.Get(i.Index);if(n)e.WindowIndex[a]=n.Create(),e.CreateWindowIndex(a);else{var o=r.Get(i.Index);if(!o)continue;i.Lock&&(o.Lock=i.Lock),e.WindowIndex[a]=new Sr(o.Name,o.Script,o.Args,o)}}null!=i.Modify&&(e.Frame.SubFrame[a].Frame.ModifyIndex=i.Modify),null!=i.Change&&(e.Frame.SubFrame[a].Frame.ChangeIndex=i.Change),isNaN(i.TitleHeight)||(e.Frame.SubFrame[a].Frame.ChartBorder.TitleHeight=i.TitleHeight)}return e},this.CreateMinuteChartContainer=function(t){var e=this,a=null;a="åéèµ°å¿å¾æ¨ªå±"===t.Type?new Ei(this.CanvasElement):new Ii(this.CanvasElement,this.OffscreenCanvasElement,this.CacheCanvasElement),a.GetExtraCanvas=function(t){return e.GetExtraCanvas(t)},t.EventCallback&&this.SetEventCallback(a,t.EventCallback),t.NetworkFilter&&(a.NetworkFilter=t.NetworkFilter);var i=C(),r=2;if(t.Windows&&t.Windows.length>0&&(r+=t.Windows.length),1==t.EnableScrollUpDown&&(a.EnableScrollUpDown=t.EnableScrollUpDown),1==t.DisableMouse&&(a.DisableMouse=t.DisableMouse),t.ScriptError&&(a.ScriptErrorCallback=t.ScriptError),we.IsString(t.SplashTitle)&&(a.LoadDataSplashTitle=t.SplashTitle),we.IsBool(t.EnableSelectRect)&&(a.EnableSelectRect=t.EnableSelectRect),we.IsBool(t.EnableZoomIndexWindow)&&(a.EnableZoomIndexWindow=t.EnableZoomIndexWindow),we.IsBool(t.IsDrawPictureXY)&&(a.IsDrawPictureXY=t.IsDrawPictureXY),we.IsBool(t.EnableNewIndex)&&(a.EnableNewIndex=t.EnableNewIndex),we.IsBool(t.EnableIndexChartDrag)&&(a.EnableIndexChartDrag=t.EnableIndexChartDrag),we.IsBool(t.EnableVerifyRecvData)&&(a.EnableVerifyRecvData=t.EnableVerifyRecvData),we.IsBool(t.EnableNightDayBG)&&(a.EnableNightDayBG=t.EnableNightDayBG),t.GlobalOption){var n=t.GlobalOption;we.IsBool(n.IsValueFullRange)&&(a.GlobalOption.IsValueFullRange=n.IsValueFullRange),we.IsNumber(n.XDateFormat)&&(a.GlobalOption.XDateFormat=n.XDateFormat)}if(t.DisplayLatest){var n=t.DisplayLatest;we.IsBool(n.Enable)&&(a.DisplayLatestOption.Enable=n.Enable),we.IsNumber(n.DelayTime)&&(a.DisplayLatestOption.DelayTime=n.DelayTime)}if(t.DrawDynamicInfo){var n=t.DrawDynamicInfo;we.IsBool(n.Enable)&&(a.DrawDynamicInfoOption.Enable=n.Enable),we.IsNumber(n.DelayTime)&&(a.DrawDynamicInfoOption.DelayTime=n.DelayTime)}if(t.Minute&&(0==t.Minute.IsShowTooltip&&(a.IsShowTooltip=!1),t.Minute.DragMode>=0&&(a.DragMode=t.Minute.DragMode)),t.Language){var o=bo.GetLanguageID(t.Language);we.IsNumber(o)&&(a.LanguageID=o)}if(t.Info&&t.Info.length>0&&a.SetMinuteInfo(t.Info,!1),t.DrawTool&&t.DrawTool.StorageKey&&a.ChartDrawStorage&&a.ChartDrawStorage.Load(t.DrawTool.StorageKey),t.BeforeOpen){var n=t.BeforeOpen;we.IsBool(n.IsShow)&&(a.IsShowBeforeData=n.IsShow),we.IsNumber(n.Width)&&(a.ExtendWidth.Left=n.Width),we.IsBool(n.IsShowMultiDay)&&(a.IsShowMultiDayBeforeData=n.IsShowMultiDay),we.IsNumber(n.MulitiDayWidth)&&(a.MultiDayExtendWidth.Left=n.MulitiDayWidth)}if(t.AfterClose){var n=t.AfterClose;we.IsBool(n.IsShow)&&(a.IsShowAfterData=n.IsShow),we.IsNumber(n.ShareVol)&&(a.ShareAfterVol=n.ShareVol),we.IsNumber(n.Width)&&(a.ExtendWidth.Right=n.Width),we.IsBool(n.IsShowMultiDay)&&(a.IsShowMultiDayAfterData=n.IsShowMultiDay),we.IsNumber(n.MulitiDayWidth)&&(a.MultiDayExtendWidth.Right=n.MulitiDayWidth)}if(t.SelectedChart){var n=t.SelectedChart;we.IsBool(n.EnableSelected)&&(a.SelectedChart.EnableSelected=n.EnableSelected),we.IsBool(n.EnableMoveOn)&&(a.SelectedChart.EnableMoveOn=n.EnableMoveOn)}if("MinuteChartContainer"==a.ClassName&&(t.DragSelectRect||(t.DragSelectRect={Enable:!0}),t.DragSelectRect)){var n=t.DragSelectRect,h=10;we.IsNumber(n.ZIndex)&&(h=n.ZIndex),n.Enable&&this.CreateExtraCanvasElement(l.RectDragCanvasKey,{ZIndex:h})}if(t.PageInfo&&a.SetPageInfo(t.PageInfo),a.Create(r,t),t.CorssCursorInfo){var n=t.CorssCursorInfo;isNaN(t.CorssCursorInfo.Left)||(a.ChartCorssCursor.ShowTextMode.Left=t.CorssCursorInfo.Left),isNaN(t.CorssCursorInfo.Right)||(a.ChartCorssCursor.ShowTextMode.Right=t.CorssCursorInfo.Right),isNaN(t.CorssCursorInfo.Bottom)||(a.ChartCorssCursor.ShowTextMode.Bottom=t.CorssCursorInfo.Bottom),!1===t.CorssCursorInfo.IsShowCorss&&(a.ChartCorssCursor.IsShowCorss=t.CorssCursorInfo.IsShowCorss),t.CorssCursorInfo.RightTextFormat>0&&(a.ChartCorssCursor.TextFormat.Right=t.CorssCursorInfo.RightTextFormat),1==t.CorssCursorInfo.IsOnlyDrawMinute&&(a.ChartCorssCursor.IsOnlyDrawMinute=t.CorssCursorInfo.IsOnlyDrawMinute),we.IsBool(t.CorssCursorInfo.IsFixXLastTime)&&(a.ChartCorssCursor.IsFixXLastTime=t.CorssCursorInfo.IsFixXLastTime),n.RightButton&&we.IsBool(n.RightButton.Enable)&&(a.ChartCorssCursor.RightButton.Enable=n.RightButton.Enable),we.IsNumber(n.PriceFormatType)&&(a.ChartCorssCursor.StringFormatY.PriceFormatType=n.PriceFormatType),we.IsNumber(n.DataFormatType)&&(a.ChartCorssCursor.StringFormatY.DataFormatType=n.DataFormatType),we.IsNumber(n.HPenType)&&(a.ChartCorssCursor.HPenType=n.HPenType),we.IsNumber(n.VPenType)&&(a.ChartCorssCursor.VPenType=n.VPenType),we.IsBool(n.EnableKeyboard)&&(a.ChartCorssCursor.EnableKeyboard=n.EnableKeyboard)}if(t.MinuteInfo&&a.CreateMinuteInfo(t.MinuteInfo),we.IsBool(t.IsShowRightMenu)&&(a.IsShowRightMenu=t.IsShowRightMenu),we.IsNumber(t.DayCount)&&(a.DayCount=t.DayCount),this.SetChartBorder(a,t),t.SplashTitle&&(a.ChartSplashPaint.SplashTitle=t.SplashTitle),we.IsBool(t.EnableBorderDrag)&&(a.EnableBorderDrag=t.EnableBorderDrag),this.AdjustChartBorder(a),t.Frame){for(var u=0;u<t.Frame.length;++u){var n=t.Frame[u];if(a.Frame.SubFrame[u]){var c=a.Frame.SubFrame[u].Frame;we.IsNumber(n.SplitCount)&&(a.Frame.SubFrame[u].Frame.YSplitOperator.SplitCount=n.SplitCount),n.StringFormat&&(a.Frame.SubFrame[u].Frame.YSplitOperator.StringFormat=n.StringFormat),we.IsNumber(n.SplitType)&&(a.Frame.SubFrame[u].Frame.YSplitOperator.SplitType=n.SplitType,a.Frame.SubFrame[u].Frame.YSplitOperator.DefaultSplitType=n.SplitType),we.IsNumber(n.FilterType)&&(c.YSplitOperator.FilterType=n.FilterType),0==n.IsShowLeftText&&(a.Frame.SubFrame[u].Frame.IsShowYText[0]=n.IsShowLeftText,a.Frame.SubFrame[u].Frame.YSplitOperator.IsShowLeftText=n.IsShowLeftText),0==n.IsShowRightText&&(a.Frame.SubFrame[u].Frame.IsShowYText[1]=n.IsShowRightText,a.Frame.SubFrame[u].Frame.YSplitOperator.IsShowRightText=n.IsShowRightText),n.Height>=0&&(a.Frame.SubFrame[u].Height=n.Height),n.Custom&&(a.Frame.SubFrame[u].Frame.YSplitOperator.Custom=n.Custom),n.RightTextFormat>0&&(a.Frame.SubFrame[u].Frame.YSplitOperator.RightTextFormat=n.RightTextFormat),we.IsNumber(n.TitleHeight)&&(a.Frame.SubFrame[u].Frame.ChartBorder.TitleHeight=n.TitleHeight),we.IsNumber(n.BorderLine)&&(a.Frame.SubFrame[u].Frame.BorderLine=n.BorderLine),we.IsBool(n.EnableRemoveZero)&&(a.Frame.SubFrame[u].Frame.YSplitOperator.EnableRemoveZero=n.EnableRemoveZero),we.IsNumber(n.FloatPrecision)&&(a.Frame.SubFrame[u].Frame.YSplitOperator.FloatPrecision=n.FloatPrecision),we.IsBool(n.IsShowXLine)&&(a.Frame.SubFrame[u].Frame.IsShowXLine=n.IsShowXLine),we.IsBool(n.IsShowYLine)&&(a.Frame.SubFrame[u].Frame.IsShowYLine=n.IsShowYLine),we.IsNumber(n.YTextBaseline)&&(a.Frame.SubFrame[u].Frame.YTextBaseline=n.YTextBaseline),we.IsBool(n.IsShowIndexTitle)&&(a.Frame.SubFrame[u].Frame.IsShowIndexTitle=n.IsShowIndexTitle),n.TopSpace>=0&&(a.Frame.SubFrame[u].Frame.ChartBorder.TopSpace=n.TopSpace*i),n.BottomSpace>=0&&(a.Frame.SubFrame[u].Frame.ChartBorder.BottomSpace=n.BottomSpace*i),we.IsNumber(n.CloseBeforeButton)&&(a.Frame.SubFrame[u].Frame.IsShowCloseButton=n.CloseBeforeButton),n.ClientBGColor&&(c.ClientBGColor=n.ClientBGColor),we.IsUndefined(n.HorizontalReserved)||(c.HorizontalReserved=n.HorizontalReserved)}}a.UpdateXShowText()}if(t.ExtendChart)for(var u=0;u<t.ExtendChart.length;++u){var n=t.ExtendChart[u];a.CreateExtendChart(n.Name,n)}if(t.Overlay)for(var u=0;u<t.Overlay.length;++u){var n=t.Overlay[u];a.OverlaySymbol(n.Symbol,n)}if(t.MinuteLine){if(0==t.MinuteLine.IsDrawAreaPrice&&(a.ChartPaint[0].IsDrawArea=!1),0==t.MinuteLine.IsShowLead&&(a.IsShowLead=!1),0==t.MinuteLine.IsShowAveragePrice){a.ChartPaint[1].IsShow=!1,a.TitlePaint[0].IsShowAveragePrice=!1;for(var u=0;u<a.ExtendChartPaint.length;++u){var n=a.ExtendChartPaint[u];"MinuteTooltipPaint"==n.ClassName&&(n.IsShowAveragePrice=!1)}}t.MinuteLine.SplitType>0&&(a.Frame.SubFrame[0].Frame.YSplitOperator.SplitType=t.MinuteLine.SplitType)}if(t.MinuteVol){var n=t.MinuteVol;we.IsNumber(n.BarColorType)&&(a.ChartPaint[2].BarColorType=n.BarColorType)}if(t.MinuteTitle){var n=t.MinuteTitle;we.IsBool(n.IsShowName)&&(a.TitlePaint[0].IsShowName=n.IsShowName),we.IsBool(n.IsShowDate)&&(a.TitlePaint[0].IsShowDate=n.IsShowDate),we.IsBool(n.IsShowTime)&&(a.TitlePaint[0].IsShowTime=n.IsShowTime),we.IsBool(n.IsTitleShowLatestData)&&(a.IsTitleShowLatestData=n.IsTitleShowLatestData),we.IsBool(n.IsAlwaysShowLastData)&&(a.TitlePaint[0].IsAlwaysShowLastData=n.IsAlwaysShowLastData),we.IsNumber(n.ShowLastDataFormat)&&(a.TitlePaint[0].ShowLastDataFormat=n.ShowLastDataFormat),we.IsNumber(n.TitleBaseLine)&&(a.TitlePaint[0].TitleBaseLine=n.TitleBaseLine),n.TimeFormat&&(a.TitlePaint[0].TimeFormat=n.TimeFormat)}if(we.IsBool(t.CorssCursorTouchEnd)&&(a.CorssCursorTouchEnd=t.CorssCursorTouchEnd),we.IsBool(t.IsClickShowCorssCursor)&&(a.IsClickShowCorssCursor=t.IsClickShowCorssCursor),!0===t.IsShowBeforeData&&(a.IsShowBeforeData=t.IsShowBeforeData),we.IsNonEmptyArray(t.Windows))for(var f=new s,u=0;u<t.Windows.length;++u){var d=2+u,n=t.Windows[u];if(n.Script)a.WindowIndex[d]=new Sr(n.Name,n.Script,n.Args,n);else if(n.API){var D=n.API;a.WindowIndex[d]=new br(D.Name,D.Script,D.Args,n)}else{var m=di.Get(n.Index);if(m)a.WindowIndex[d]=m.Create(),a.CreateWindowIndex(d);else{var p=f.Get(n.Index);if(!p)continue;s.ModifyAttribute(p,n),p.ID=n.Index,a.WindowIndex[d]=new Sr(p.Name,p.Script,p.Args,p),n.StringFormat>0&&(a.WindowIndex[d].StringFormat=n.StringFormat),n.FloatPrecision>=0&&(a.WindowIndex[d].FloatPrecision=n.FloatPrecision)}}var v=a.Frame.SubFrame[d].Frame;we.IsBool(n.Modify)&&(v.ModifyIndex=n.Modify),we.IsBool(n.Change)&&(v.ChangeIndex=n.Change),we.IsBool(n.Close)&&(v.CloseIndex=n.Close),we.IsBool(n.Overlay)&&(v.OverlayIndex=n.Overlay),we.IsBool(n.Export)&&(v.ExportData=n.Export),we.IsBool(n.MaxMin)&&(v.MaxMinWindow=n.MaxMin),we.IsBool(n.TitleWindow)&&(v.TitleWindow=n.TitleWindow),we.IsNumber(n.YSplitType)&&(a.Frame.SubFrame[d].Frame.YSplitOperator.SplitType=n.YSplitType),we.IsNumber(n.FilterType)&&(a.Frame.SubFrame[d].Frame.YSplitOperator.FilterType=n.FilterType),isNaN(n.TitleHeight)||(a.Frame.SubFrame[d].Frame.ChartBorder.TitleHeight=n.TitleHeight),we.IsBool(n.IsDrawTitleBG)&&(a.Frame.SubFrame[d].Frame.IsDrawTitleBG=n.IsDrawTitleBG),we.IsBool(n.IsShowNameArrow)&&(a.Frame.SubFrame[d].Frame.IsShowNameArrow=n.IsShowNameArrow),we.IsBool(n.IsShowTitleArrow)&&(v.IsShowTitleArrow=n.IsShowTitleArrow),we.IsNumber(n.TitleArrowType)&&(v.TitleArrowType=n.TitleArrowType),0==n.IsShowIndexName&&(a.Frame.SubFrame[d].Frame.IsShowIndexName=!1),0==n.IsShowOverlayIndexName&&(a.Frame.SubFrame[d].Frame.IsShowOverlayIndexName=!1),we.IsUndefined(n.HorizontalReserved)||(v.HorizontalReserved=n.HorizontalReserved)}if(this.AdjustTitleHeight(a),we.IsNonEmptyArray(t.OverlayIndex))for(var u=0;u<t.OverlayIndex.length;++u){var n=t.OverlayIndex[u];if(!(n.Windows>=a.Frame.SubFrame.length)){var g=(0,Bn.default)(n),T=JSON.parse(g);n.Index&&(T.IndexName=n.Index),n.Windows>=0&&(T.WindowIndex=n.Windows),a.CreateOverlayWindowsIndex(T)}}return a},this.CreateMinMinuteChartContainer=function(t){var e=null;e="è¿·ä½ åéèµ°å¿å¾æ¨ªå±"===t.Type?new Ei(this.CanvasElement):new Ii(this.CanvasElement),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter);if(t.BeforeOpen){var a=t.BeforeOpen;we.IsBool(a.IsShow)&&(e.IsShowBeforeData=a.IsShow),we.IsNumber(a.Width)&&(e.ExtendWidth.Left=a.Width),we.IsBool(a.IsShowMultiDay)&&(e.IsShowMultiDayBeforeData=a.IsShowMultiDay),we.IsNumber(a.MulitiDayWidth)&&(e.MultiDayExtendWidth.Left=a.MulitiDayWidth)}if(t.AfterClose){var a=t.AfterClose;we.IsBool(a.IsShow)&&(e.IsShowAfterData=a.IsShow),we.IsNumber(a.ShareVol)&&(e.ShareAfterVol=a.ShareVol),we.IsNumber(a.Width)&&(e.ExtendWidth.Right=a.Width),we.IsBool(a.IsShowMultiDay)&&(e.IsShowMultiDayAfterData=a.IsShowMultiDay),we.IsNumber(a.MulitiDayWidth)&&(e.MultiDayExtendWidth.Right=a.MulitiDayWidth)}if(t.Listener||(t.Listener={KeyDown:!1,Wheel:!1}),e.Create(2,t.Listener),t.CorssCursorInfo){var a=t.CorssCursorInfo;we.IsNumber(t.CorssCursorInfo.Left)&&(e.ChartCorssCursor.ShowTextMode.Left=t.CorssCursorInfo.Left),we.IsNumber(t.CorssCursorInfo.Right)&&(e.ChartCorssCursor.ShowTextMode.Right=t.CorssCursorInfo.Right),we.IsNumber(t.CorssCursorInfo.Bottom)&&(e.ChartCorssCursor.ShowTextMode.Bottom=t.CorssCursorInfo.Bottom),!1===t.CorssCursorInfo.IsShowCorss&&(e.ChartCorssCursor.IsShowCorss=t.CorssCursorInfo.IsShowCorss),t.CorssCursorInfo.RightTextFormat>0&&(e.ChartCorssCursor.TextFormat.Right=t.CorssCursorInfo.RightTextFormat),1==t.CorssCursorInfo.IsOnlyDrawMinute&&(e.ChartCorssCursor.IsOnlyDrawMinute=t.CorssCursorInfo.IsOnlyDrawMinute),we.IsBool(t.CorssCursorInfo.IsFixXLastTime)&&(e.ChartCorssCursor.IsFixXLastTime=t.CorssCursorInfo.IsFixXLastTime),a.RightButton&&we.IsBool(a.RightButton.Enable)&&(e.ChartCorssCursor.RightButton.Enable=a.RightButton.Enable),we.IsNumber(a.PriceFormatType)&&(e.ChartCorssCursor.StringFormatY.PriceFormatType=a.PriceFormatType),we.IsNumber(a.DataFormatType)&&(e.ChartCorssCursor.StringFormatY.DataFormatType=a.DataFormatType),we.IsNumber(t.CorssCursorInfo.HPenType)&&(e.ChartCorssCursor.HPenType=t.CorssCursorInfo.HPenType),we.IsNumber(t.CorssCursorInfo.VPenType)&&(e.ChartCorssCursor.VPenType=t.CorssCursorInfo.VPenType)}we.IsNumber(t.DayCount)&&(e.DayCount=t.DayCount),this.SetChartBorder(e,t),t.SplashTitle&&(e.ChartSplashPaint.SplashTitle=t.SplashTitle),we.IsBool(t.EnableVerifyRecvData)&&(e.EnableVerifyRecvData=t.EnableVerifyRecvData),e.TitlePaint[0].IsShow=!1;var i=e.Frame.SubFrame[0];if(i.Frame.IsShowYText[0]=!1,i.Frame.IsShowYText[1]=!1,i.Frame.IsShowXLine=!1,i.Frame.IsShowYLine=!1,i.Frame.BorderLine=0,e.Frame.SubFrame[1].Height=0,e.EnableBorderDrag=!1,t.Frame)for(var r=0;r<t.Frame.length;++r){var a=t.Frame[r];e.Frame.SubFrame[r]&&(a.SplitCount&&(e.Frame.SubFrame[r].Frame.YSplitOperator.SplitCount=a.SplitCount),a.StringFormat&&(e.Frame.SubFrame[r].Frame.YSplitOperator.StringFormat=a.StringFormat),we.IsNumber(a.SplitType)&&(e.Frame.SubFrame[r].Frame.YSplitOperator.SplitType=a.SplitType,e.Frame.SubFrame[r].Frame.YSplitOperator.DefaultSplitType=a.SplitType),we.IsBool(a.IsShowLeftText)&&(e.Frame.SubFrame[r].Frame.IsShowYText[0]=a.IsShowLeftText,e.Frame.SubFrame[r].Frame.YSplitOperator.IsShowLeftText=a.IsShowLeftText),we.IsBool(a.IsShowRightText)&&(e.Frame.SubFrame[r].Frame.IsShowYText[1]=a.IsShowRightText,e.Frame.SubFrame[r].Frame.YSplitOperator.IsShowRightText=a.IsShowRightText),a.Height>=0&&(e.Frame.SubFrame[r].Height=a.Height),a.Custom&&(e.Frame.SubFrame[r].Frame.YSplitOperator.Custom=a.Custom),a.RightTextFormat>0&&(e.Frame.SubFrame[r].Frame.YSplitOperator.RightTextFormat=a.RightTextFormat),we.IsNumber(a.TitleHeight)&&(e.Frame.SubFrame[r].Frame.ChartBorder.TitleHeight=a.TitleHeight),we.IsNumber(a.BorderLine)&&(e.Frame.SubFrame[r].Frame.BorderLine=a.BorderLine),we.IsBool(a.EnableRemoveZero)&&(e.Frame.SubFrame[r].Frame.YSplitOperator.EnableRemoveZero=a.EnableRemoveZero),we.IsNumber(a.FloatPrecision)&&(e.Frame.SubFrame[r].Frame.YSplitOperator.FloatPrecision=a.FloatPrecision),we.IsBool(a.IsShowXLine)&&(e.Frame.SubFrame[r].Frame.IsShowXLine=a.IsShowXLine),we.IsBool(a.IsShowYLine)&&(e.Frame.SubFrame[r].Frame.IsShowYLine=a.IsShowYLine),we.IsNumber(a.YTextBaseline)&&(e.Frame.SubFrame[r].Frame.YTextBaseline=a.YTextBaseline))}if(e.UpdateXShowText(),t.MinuteLine){if(0==t.MinuteLine.IsDrawAreaPrice&&(e.ChartPaint[0].IsDrawArea=!1),0==t.MinuteLine.IsShowLead&&(e.IsShowLead=!1),0==t.MinuteLine.IsShowAveragePrice){e.ChartPaint[1].IsShow=!1,e.TitlePaint[0].IsShowAveragePrice=!1;for(var r=0;r<e.ExtendChartPaint.length;++r){var a=e.ExtendChartPaint[r];"MinuteTooltipPaint"==a.ClassName&&(a.IsShowAveragePrice=!1)}}t.MinuteLine.SplitType>0&&(e.Frame.SubFrame[0].Frame.YSplitOperator.SplitType=t.MinuteLine.SplitType)}if(this.AdjustTitleHeight(e),!0===t.DisableMouseEvent&&(this.CanvasElement.onmousemove=function(t){},this.CanvasElement.oncontextmenu=function(t){},this.CanvasElement.ondblclick=function(t){},this.CanvasElement.onmousedown=function(t){},this.CanvasElement.onmouseout=function(t){},this.CanvasElement.onmouseleave=function(t){}),t.ExtendChart)for(var r=0;r<t.ExtendChart.length;++r){var a=t.ExtendChart[r];e.CreateExtendChart(a.Name,a)}return e},this.CreateKLineTrainChartContainer=function(t){var e=!1;if("ç®åKçº¿è®­ç»"==t.Type||"ç®åKçº¿è®­ç»æ¨ªå±"==t.Type){var a="ç®åKçº¿è®­ç»æ¨ªå±"==t.Type,i=new bi(this.CanvasElement,a);e=!0}else var a="Kçº¿è®­ç»æ¨ªå±"==t.Type,i=new xi(this.CanvasElement,a);if(t.NetworkFilter&&(i.NetworkFilter=t.NetworkFilter),1==t.IsApiPeriod&&(i.IsApiPeriod=t.IsApiPeriod),t.ScriptError&&(i.ScriptErrorCallback=t.ScriptError),t.KLine&&(t.KLine.Right>=0&&(i.Right=t.KLine.Right),t.KLine.Period>=0&&(i.Period=t.KLine.Period),t.KLine.MaxRequestDataCount>0&&(i.MaxRequestDataCount=t.KLine.MaxRequestDataCount),t.KLine.Info&&t.KLine.Info.length>0&&i.SetKLineInfo(t.KLine.Info,!1),t.KLine.PageSize>0&&(i.PageSize=t.KLine.PageSize),0==t.KLine.IsShowTooltip&&(i.IsShowTooltip=!1),t.KLine.MaxRequestMinuteDayCount>0&&(i.MaxRequestMinuteDayCount=t.KLine.MaxRequestMinuteDayCount),t.KLine.DrawType&&(i.KLineDrawType=t.KLine.DrawType),we.IsNumber(t.KLine.RightSpaceCount)&&!e&&(i.RightSpaceCount=t.KLine.RightSpaceCount)),t.Train&&(t.Train.DataCount&&(i.TrainDataCount=t.Train.DataCount),t.Train.Callback&&(i.TrainCallback=t.Train.Callback),t.Train.StartDate&&(i.TrainStartDate=t.Train.StartDate)),!t.Windows||t.Windows.length<=0)return null;if(i.Create(t.Windows.length),this.SetChartBorder(i,t),this.AdjustChartBorder(i),0==t.IsShowCorssCursorInfo&&(i.ChartCorssCursor.IsShowText=t.IsShowCorssCursorInfo),!0===t.IsCorssOnlyDrawKLine&&(i.ChartCorssCursor.IsOnlyDrawKLine=t.IsCorssOnlyDrawKLine),!0===t.CorssCursorTouchEnd&&(i.CorssCursorTouchEnd=t.CorssCursorTouchEnd),1==t.IsClickShowCorssCursor&&(i.IsClickShowCorssCursor=t.IsClickShowCorssCursor),t.CorssCursorInfo&&(isNaN(t.CorssCursorInfo.Left)||(i.ChartCorssCursor.ShowTextMode.Left=t.CorssCursorInfo.Left),isNaN(t.CorssCursorInfo.Right)||(i.ChartCorssCursor.ShowTextMode.Right=t.CorssCursorInfo.Right),isNaN(t.CorssCursorInfo.Bottom)||(i.ChartCorssCursor.ShowTextMode.Bottom=t.CorssCursorInfo.Bottom),!1===t.CorssCursorInfo.IsShowCorss&&(i.ChartCorssCursor.IsShowCorss=t.CorssCursorInfo.IsShowCorss),1==t.CorssCursorInfo.IsShowClose&&(i.ChartCorssCursor.IsShowClose=t.CorssCursorInfo.IsShowClose),t.CorssCursorInfo.PressTime&&(i.PressTime=t.CorssCursorInfo.PressTime),t.CorssCursorInfo.HPenType>0&&(i.ChartCorssCursor.HPenType=t.CorssCursorInfo.HPenType),t.CorssCursorInfo.VPenType>0&&(i.ChartCorssCursor.VPenType=t.CorssCursorInfo.VPenType)),t.CorssCursor={},t.CorssCursor.TitleHeight=i.ChartCorssCursor.TextHeight,t.Frame)for(var r=0;r<t.Frame.length;++r){var n=t.Frame[r];i.Frame.SubFrame[r]&&(n.SplitCount&&(i.Frame.SubFrame[r].Frame.YSplitOperator.SplitCount=n.SplitCount),n.StringFormat&&(i.Frame.SubFrame[r].Frame.YSplitOperator.StringFormat=n.StringFormat),we.IsNumber(n.FloatPrecision)&&(i.Frame.SubFrame[r].Frame.YSplitOperator.FloatPrecision=n.FloatPrecision),n.Custom&&(i.Frame.SubFrame[r].Frame.YSplitOperator.Custom=n.Custom),we.IsNumber(n.SplitType)&&(i.Frame.SubFrame[r].Frame.YSplitOperator.SplitType=n.SplitType),n.Height>0&&(i.Frame.SubFrame[r].Height=n.Height),0==n.IsShowLeftText&&(i.Frame.SubFrame[r].Frame.YSplitOperator.IsShowLeftText=n.IsShowLeftText),0==n.IsShowRightText&&(i.Frame.SubFrame[r].Frame.YSplitOperator.IsShowRightText=n.IsShowRightText))}if(t.KLine&&(0==t.KLine.ShowKLine&&(i.ChartPaint[0].IsShow=!1),t.KLine.InfoPosition>0&&(i.ChartPaint[0].InfoPosition=t.KLine.InfoPosition),0==t.KLine.IsShowMaxMinPrice&&(i.ChartPaint[0].IsShowMaxMinPrice=t.KLine.IsShowMaxMinPrice)),t.KLineTitle&&(0==t.KLineTitle.IsShowName&&(i.TitlePaint[0].IsShowName=!1),0==t.KLineTitle.IsShowSettingInfo&&(i.TitlePaint[0].IsShowSettingInfo=!1),0==t.KLineTitle.IsShow&&(i.TitlePaint[0].IsShow=!1)),we.IsNonEmptyArray(t.Overlay))for(var r=0;r<t.Overlay.length;++r){var n=t.Overlay[r];i.OverlaySymbol(n.Symbol,n)}if(t.ExtendChart)for(var r=0;r<t.ExtendChart.length;++r){var n=t.ExtendChart[r];i.CreateExtendChart(n.Name,n)}if(we.IsNonEmptyArray(t.Windows))for(var r=0;r<t.Windows.length;++r){var n=t.Windows[r];if(n.Script)i.WindowIndex[r]=new Sr(n.Name,n.Script,n.Args,n);else{var o=di.Get(n.Index);if(o)i.WindowIndex[r]=o.Create(),i.CreateWindowIndex(r);else{var l=new s,h=l.Get(n.Index);if(!h)continue;n.Lock&&(h.Lock=n.Lock),i.WindowIndex[r]=new Sr(h.Name,h.Script,h.Args,h)}}null!=n.Modify&&(i.Frame.SubFrame[r].Frame.ModifyIndex=n.Modify),null!=n.Change&&(i.Frame.SubFrame[r].Frame.ChangeIndex=n.Change),null!=n.Close&&(i.Frame.SubFrame[r].Frame.CloseIndex=n.Close),null!=n.Overlay&&(frame.OverlayIndex=n.Overlay),we.IsBool(n.Export)&&(frame.ExportData=n.Export),we.IsBool(n.MaxMin)&&(i.Frame.SubFrame[r].Frame.MaxMinWindow=n.MaxMin),we.IsBool(n.TitleWindow)&&(i.Frame.SubFrame[r].Frame.TitleWindow=n.TitleWindow),we.IsBool(n.IsDrawTitleBG)&&(i.Frame.SubFrame[r].Frame.IsDrawTitleBG=n.IsDrawTitleBG),we.IsBool(n.IsShowNameArrow)&&(i.Frame.SubFrame[r].Frame.IsShowNameArrow=n.IsShowNameArrow),we.IsNumber(n.TitleHeight)&&(i.Frame.SubFrame[r].Frame.ChartBorder.TitleHeight=n.TitleHeight),we.IsBool(n.IsShowTitleArrow)&&(i.Frame.SubFrame[r].Frame.IsShowTitleArrow=n.IsShowTitleArrow),0==n.IsShowIndexName&&(i.Frame.SubFrame[r].Frame.IsShowIndexName=!1),0==n.IsShowOverlayIndexName&&(i.Frame.SubFrame[r].Frame.IsShowOverlayIndexName=!1),we.IsNumber(n.IndexParamSpace)&&(i.Frame.SubFrame[r].Frame.IndexParamSpace=n.IndexParamSpace),we.IsNumber(n.IndexTitleSpace)&&(i.Frame.SubFrame[r].Frame.IndexTitleSpace=n.IndexTitleSpace)}return this.AdjustTitleHeight(i),i},this.CreateDepthChartContainer=function(t){var e=null;if(e=new wi(this.CanvasElement),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter),1==t.EnableScrollUpDown&&(e.EnableScrollUpDown=t.EnableScrollUpDown),we.IsPlusNumber(t.MaxVolRate)&&(e.MaxVolRate=t.MaxVolRate),t.ZoomStepPixel>0&&(e.ZoomStepPixel=t.ZoomStepPixel),we.IsString(t.SplashTitle)&&(e.LoadDataSplashTitle=t.SplashTitle),we.IsBool(t.EnableVerifyRecvData)&&(e.EnableVerifyRecvData=t.EnableVerifyRecvData),t.Language){var a=bo.GetLanguageID(t.Language);we.IsNumber(a)&&(e.LanguageID=a)}if(e.Create(t.Listener),t.Border&&(we.IsNumber(t.Border.Left)?e.Frame.ChartBorder.Left=t.Border.Left:t.Border.Left=e.Frame.ChartBorder.Left,we.IsNumber(t.Border.Right)?e.Frame.ChartBorder.Right=t.Border.Right:t.Border.Right=e.Frame.ChartBorder.Right,we.IsNumber(t.Border.Top)?e.Frame.ChartBorder.Top=t.Border.Top:t.Border.Top=e.Frame.ChartBorder.Top,we.IsNumber(t.Border.Bottom)?e.Frame.ChartBorder.Bottom=t.Border.Bottom:t.Border.Bottom=e.Frame.ChartBorder.Bottom),this.AdjustChartBorder(e),!0===t.CorssCursorTouchEnd&&(e.CorssCursorTouchEnd=t.CorssCursorTouchEnd),t.CorssCursorInfo){var i=t.CorssCursorInfo;we.IsNumber(i.HPenType)&&(e.ChartCorssCursor.HPenType=i.HPenType),we.IsNumber(i.VPenType)&&(e.ChartCorssCursor.VPenType=i.VPenType),we.IsBool(i.IsShowTooltip)&&(e.ChartCorssCursor.IsShowTooltip=i.IsShowTooltip)}if(t.Frame){var i=t.Frame;i.SplitCount&&(e.Frame.YSplitOperator.SplitCount=i.SplitCount),we.IsNumber(i.SplitType)&&(e.Frame.YSplitOperator.SplitType=i.SplitType),we.IsNumber(i.Height)&&(e.Frame.Height=i.Height),we.IsNumber(i.YLineType)&&(e.Frame.YSplitOperator.LineType=i.YLineType),we.IsNumber(i.XLineType)&&(e.Frame.XSplitOperator.LineType=i.XLineType),Array.isArray(i.IgnoreYValue)&&(e.Frame.YSplitOperator.IgnoreYValue=i.IgnoreYValue),!1!==i.IsShowLeftText&&!0!==i.IsShowLeftText||(e.Frame.IsShowYText[0]=i.IsShowLeftText,e.Frame.YSplitOperator.IsShowLeftText=i.IsShowLeftText),!1!==i.IsShowRightText&&!0!==i.IsShowRightText||(e.Frame.IsShowYText[1]=i.IsShowRightText,e.Frame.YSplitOperator.IsShowRightText=i.IsShowRightText),0==i.IsShowXLine&&(e.Frame.IsShowXLine=i.IsShowXLine),0==i.IsShowYLine&&(e.Frame.IsShowYLine=i.IsShowYLine),we.IsNumber(i.XSplitCount)&&(e.Frame.XSplitOperator.SplitCount=i.XSplitCount)}return e},this.SetOption=function(t){we.IsNumber(t.ToolbarButtonStyle)&&(So.ToolbarButtonStyle=t.ToolbarButtonStyle);var e=null;switch(t.Type){case"åå²Kçº¿å¾":case"åå²Kçº¿å¾æ¨ªå±":e=this.CreateKLineChartContainer(t);break;case"èªå®ä¹ææ°åå²Kçº¿å¾":e=this.CreateCustomKLineChartContainer(t);break;case"åéèµ°å¿å¾":case"åéèµ°å¿å¾æ¨ªå±":e=this.CreateMinuteChartContainer(t);break;case"è¿·ä½ åéèµ°å¿å¾":e=this.CreateMinMinuteChartContainer(t);break;case"Kçº¿è®­ç»":case"Kçº¿è®­ç»æ¨ªå±":case"ç®åKçº¿è®­ç»":case"ç®åKçº¿è®­ç»æ¨ªå±":e=this.CreateKLineTrainChartContainer(t);break;case"æ·±åº¦å¾":e=this.CreateDepthChartContainer(t);break;default:return!1}if(!e)return!1;if(this.JSChartContainer=e,e.DivElement=this.DivElement,1==t.EnableResize&&this.CreateResizeListener(),t.DefaultCursor&&(e.DefaultCursor=t.DefaultCursor),t.OnCreatedCallback&&t.OnCreatedCallback(e),null!=t.IsAutoUpdate&&(e.IsAutoUpdate=t.IsAutoUpdate),t.AutoUpdateFrequency>0&&(e.AutoUpdateFrequency=t.AutoUpdateFrequency),!0===t.EnablePopMenuV2&&e.InitalPopMenu(),!0===t.EnableDrawToolDialogV2&&e.InitalDrawToolDialog(),!0===t.EnableModifyDrawDialogV2&&e.InitalModifyDrawDialog(),t.TooltipDialog&&t.TooltipDialog.Enable&&e.InitalTooltipDialog(t.TooltipDialog),t.FloatTooltip&&t.FloatTooltip.Enable&&e.InitalFloatTooltip(t.FloatTooltip),t.SelectRectDialog&&t.SelectRectDialog.Enable&&e.InitalSelectRectDialog(t.SelectRectDialog),t.ModifyIndexParamDialog&&t.ModifyIndexParamDialog.Enable&&e.InitalModifyIndexParamDialog(t.ModifyIndexParamDialog),t.SearchIndexDialog&&t.SearchIndexDialog.Enable&&e.InitalSearchIndexDialog(t.SearchIndexDialog),t.EventCallback)for(var a=0;a<t.EventCallback.length;++a){var i=t.EventCallback[a];e.AddEventCallback(i)}t.Symbol?(e.Draw(),e.ChangeSymbol(t.Symbol),this.JSChartContainer=e,this.DivElement.JSChart=this,this.JSChartContainer.Draw()):(e.DrawEmpty(),this.JSChartContainer=e,this.DivElement.JSChart=this)},this.CreateResizeListener=function(){var t=this;this.ResizeListener=new ResizeObserver(function(e){t.OnDivResize(e)}),this.ResizeListener.observe(this.DivElement)},this.OnDivResize=function(t){Xn.Chart.Log("[JSChart::OnDivResize] entries=",t),this.OnSize({Type:1})},this.CreateToolbar=function(t){},this.CreateSettingDiv=function(t){},this.Focus=function(){this.CanvasElement&&this.CanvasElement.focus()},this.ChangeSymbol=function(t,e){this.JSChartContainer&&this.JSChartContainer.ChangeSymbol(t,e)},this.ChangeIndex=function(t,e,a){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeIndex&&this.JSChartContainer.ChangeIndex(t,e,a)},this.ChangeIndexWindow=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeIndexWindow&&this.JSChartContainer.ChangeIndexWindow(t,e)},this.AddIndexWindow=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddIndexWindow&&this.JSChartContainer.AddIndexWindow(t,e)},this.AddScriptIndexWindow=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddScriptIndexWindow&&this.JSChartContainer.AddScriptIndexWindow(t,e)},this.AddAPIIndexWindow=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddAPIIndexWindow&&this.JSChartContainer.AddAPIIndexWindow(t,e)},this.RemoveIndexWindow=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.RemoveIndexWindow&&this.JSChartContainer.RemoveIndexWindow(t)},this.ChangeScriptIndex=function(t,e,a){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeScriptIndex&&this.JSChartContainer.ChangeScriptIndex(t,e,a)},this.ChangePyScriptIndex=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangePyScriptIndex&&this.JSChartContainer.ChangePyScriptIndex(t,e)},this.GetIndexInfo=function(){return this.JSChartContainer&&"function"==typeof this.JSChartContainer.GetIndexInfo?this.JSChartContainer.GetIndexInfo():[]},this.ChangeInstructionIndex=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeInstructionIndex&&this.JSChartContainer.ChangeInstructionIndex(t,e)},this.ChangeInstructionScriptIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeInstructionIndex&&this.JSChartContainer.ChangeInstructionScriptIndex(t)},this.CancelInstructionIndex=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.CancelInstructionIndex&&this.JSChartContainer.CancelInstructionIndex()},this.ChangePeriod=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangePeriod&&this.JSChartContainer.ChangePeriod(t,e)},this.ChangeRight=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeRight&&this.JSChartContainer.ChangeRight(t)},this.OverlaySymbol=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.OverlaySymbol&&this.JSChartContainer.OverlaySymbol(t,e)},this.DeleteOverlaySymbol=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.DeleteOverlaySymbol&&this.JSChartContainer.DeleteOverlaySymbol(t)},this.SetFirstShowDate=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetFirstShowDate&&this.JSChartContainer.SetFirstShowDate(t)},this.ChangeKLineDrawType=function(t,e,a){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeKLineDrawType&&this.JSChartContainer.ChangeKLineDrawType(t,e,a)},this.ChangeIndexWindowCount=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeIndexWindowCount&&this.JSChartContainer.ChangeIndexWindowCount(t,e)},this.ClearOverlaySymbol=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ClearOverlaySymbol&&this.JSChartContainer.ClearOverlaySymbol()},this.DeleteKLineInfo=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.DeleteKLineInfo&&this.JSChartContainer.DeleteKLineInfo(t)},this.ClearKLineInfo=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ClearKLineInfo&&this.JSChartContainer.ClearKLineInfo()},this.AddKLineInfo=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddKLineInfo&&this.JSChartContainer.AddKLineInfo(t,e)},this.AddOverlayIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddOverlayIndex&&this.JSChartContainer.AddOverlayIndex(t)},this.MoveOverlayIndex=function(t,e,a){this.JSChartContainer&&"function"==typeof this.JSChartContainer.MoveOverlayIndex&&this.JSChartContainer.MoveOverlayIndex(t,e,a)},this.MoveOverlayIndexToNewWindow=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.MoveOverlayIndexToNewWindow&&this.JSChartContainer.MoveOverlayIndexToNewWindow(t,e)},this.DeleteOverlayWindowsIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.DeleteOverlayWindowsIndex&&this.JSChartContainer.DeleteOverlayWindowsIndex(t)},this.StopAutoUpdate=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.StopAutoUpdate&&this.JSChartContainer.StopAutoUpdate()},this.ChartDestroy=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChartDestroy&&this.JSChartContainer.ChartDestroy()},this.ChartDestory=this.ChartDestroy,this.SetDepthMapData=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetDepthMapData&&this.JSChartContainer.SetDepthMapData(t,e)},this.ForceLandscape=function(t){this.JSChartContainer&&(Xn.Chart.Log("[JSChart::ForceLandscape] bForceLandscape="+t),this.JSChartContainer.IsForceLandscape=t)},this.LockIndex=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.LockIndex&&(Xn.Chart.Log("[JSChart:LockIndex] lockData",t),this.JSChartContainer.LockIndex(t))},this.ChangeTradeDate=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeTradeDate&&(Xn.Chart.Log("[JSChart:ChangeTradeDate] date",t),this.JSChartContainer.ChangeTradeDate(t))},this.ChangeDayCount=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeDayCount&&(Xn.Chart.Log("[JSChart:ChangeDayCount] count",t),this.JSChartContainer.ChangeDayCount(t,e))},this.ShowCallAuctionData=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ShowCallAuctionData&&(Xn.Chart.Log("[JSChart:ShowCallAuctionData] obj, option ",t,e),this.JSChartContainer.ShowCallAuctionData(t,e))},this.StartAnimation=function(t){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.StartAnimation)return Xn.Chart.Log("[JSChart:StartAnimation] start."),this.JSChartContainer.StartAnimation(t)},this.StopAnimation=function(){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.StopAnimation)return Xn.Chart.Log("[JSChart:StopAnimation] start."),this.JSChartContainer.StopAnimation()},this.SaveToImage=function(t,e){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.SaveToImage)return this.JSChartContainer.SaveToImage(t,e)},this.SaveToImageUrl=function(t,e){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.SaveToImageUrl)return this.JSChartContainer.SaveToImageUrl(t,e)},this.AddEventCallback=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddEventCallback&&(Xn.Chart.Log("[JSChart:AddEventCallback] ",t),this.JSChartContainer.AddEventCallback(t))},this.SetLanguage=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetLanguage&&(Xn.Chart.Log("[JSChart:SetLanguage] ",t),this.JSChartContainer.SetLanguage(t))},this.ChangeIndexTemplate=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangeIndexTemplate&&(Xn.Chart.Log("[JSChart:ChangeIndexTemplate] ",t),this.JSChartContainer.ChangeIndexTemplate(t))},this.SetChartDrawOption=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetChartDrawOption&&(Xn.Chart.Log("[JSChart:SetChartDrawOption] ",t),this.JSChartContainer.SetChartDrawOption(t))},this.CreateChartDrawPicture=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.CreateChartDrawPicture&&(Xn.Chart.Log("[JSChart:CreateChartDrawPicture] ",t),this.JSChartContainer.CreateChartDrawPicture(t,e))},this.AddChartDrawPicture=function(t){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddChartDrawPicture)return Xn.Chart.Log("[JSChart:AddChartDrawPicture] ",t),this.JSChartContainer.AddChartDrawPicture(t)},this.ClearChartDrawPicture=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ClearChartDrawPicture&&this.JSChartContainer.ClearChartDrawPicture(t,e)},this.PasteChartDrawPicture=function(t,e,a){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.PasteChartDrawPicture)return Xn.Chart.Log("[JSChart:PasteChartDrawPicture] ",t,e,a),this.JSChartContainer.PasteChartDrawPicture(t,e,a)},this.ReloadResource=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ReloadResource&&(Xn.Chart.Log("[JSChart:ReloadResource] "),this.JSChartContainer.ReloadResource(t))},this.EnableSplashScreen=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.EnableSplashScreen&&(Xn.Chart.Log("[JSChart:EnableSplashScreen] "),this.JSChartContainer.EnableSplashScreen(t,e))},this.Draw=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Draw&&(Xn.Chart.Log("[JSChart:Draw] "),this.JSChartContainer.Draw())},this.SetFocus=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.SetFocus&&(Xn.Chart.Log("[JSChart:SetFocus] "),this.JSChartContainer.SetFocus())},this.ExportData=function(t){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.ExportData)return Xn.Chart.Log("[JSChart:ExportData] "),this.JSChartContainer.ExportData(t)},this.ChangePriceGap=function(t){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChangePriceGap)return Xn.Chart.Log("[JSChart:ChangePriceGap] "),this.JSChartContainer.ChangePriceGap(t)},this.PopupMenuByTab=function(t,e){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.PopupMenuByTab)return Xn.Chart.Log("[JSChart:PopupMenuByTab] "),this.JSChartContainer.PopupMenuByTab(t,e)},this.PopupMenuByDrapdown=function(t,e){if(this.JSChartContainer&&"function"==typeof this.JSChartContainer.PopupMenuByDrapdown)return Xn.Chart.Log("[JSChart:PopupMenuByDrapdown] "),this.JSChartContainer.PopupMenuByDrapdown(t,e)}}function h(){this.Start=[],this.Clear=function(){this.Start=[]},this.AddTouchStart=function(t,e,a){if(this.Start.length>0){var i=this.Start[this.Start.length-1],r=a-i.Time;r>0&&r<300?this.Start.push({X:t,Y:e,Time:a}):this.Start=[]}else this.Start.push({X:t,Y:e,Time:a})},this.IsVaildDBClick=function(){return 2==this.Start.length},this.AddTouchEnd=function(t){if(!(this.Start.length<=0)){var e=this.Start[this.Start.length-1],a=t-e.Time;a>=0&&a<150||(this.Start=[])}}}function u(t,e,a){var i=this;this.ClassName="JSChartContainer";if(this.Frame,this.ChartPaint=new Array,this.ChartPaintEx=[],this.ChartInfo=new Array,this.ChartInfoPaint,this.ExtendChartPaint=new Array,this.TitlePaint=new Array,this.OverlayChartPaint=new Array,this.ChartDrawPicture=new Array,this.ChartDrawStorage,this.ChartDrawOption={IsLockScreen:!1,Zoom:1,Magnet:null},this.CurrentChartDrawPicture=null,this.SelectChartDrawPicture=null,this.MoveOnChartDrawPicture=null,this.EnableEraseChartDrawPicture=!1,this.IsDrawPictureXY=!1,this.EnableShowCorssCursor={DrawPicture:!0},this.ChartPictureMenu,this.ChartCorssCursor,this.ChartDragSelectRect,this.IsClickShowCorssCursor=!1,this.ChartSplashPaint=null,this.LoadDataSplashTitle="æ°æ®å è½½ä¸­",this.DefaultCursor="default",this.CacheCanvas=null,this.CacheElement=null,a&&(this.CacheElement=a,this.CacheCanvas=a.getContext("2d")),e)this.Canvas=e.getContext("2d"),this.OffscreenCanvasElement=e,this.ShowCanvas=t.getContext("2d");else{if(!0===l.EnableCanvasWillReadFrequently){var r={willReadFrequently:!0};this.Canvas=t.getContext("2d",r)}else this.Canvas=t.getContext("2d");this.ShowCanvas=null}this.CorssCursorElement,this.CorssCursorCanvas,this.UIElement=t,this.MouseDrag,this.PhoneTouchInfo,this.DragMode=1,this.EnableBorderDrag=!0,this.BorderDrag,this.YDrag,this.TouchStatus={CorssCursorShow:!1},this.DragTimer,this.EnableScrollUpDown=!1,this.ClickChartTimer=null,this.CursorIndex=0,this.LastPoint=new E,this.IsForceLandscape=!1,this.CorssCursorTouchEnd=!1,this.IsTitleShowLatestData=!1,this.StepPixel=4,this.ZoomStepPixel=5,this.TouchMoveMinAngle=70,this.EnableAnimation=!1,this.Tooltip=document.createElement("div"),this.Tooltip.className="jschart-tooltip",this.Tooltip.style.background=So.TooltipBGColor,this.Tooltip.style.opacity=So.TooltipAlpha,this.Tooltip.style["pointer-events"]="none",this.Tooltip.id=D(),t.parentNode.appendChild(this.Tooltip),this.IsShowTooltip=!0,this.KLineTooltipConfig={EnableKeyDown:!0,Enable:!0},this.TooltipCache={Type:null,IsShow:!1,X:null,Y:null,Data:null,InnerHTML:null},this.FrameSplitData=new Vn.default,this.FrameSplitData.set("double",new ui),this.FrameSplitData.set("price",new Ci),this.mapEvent=new Vn.default,this.PhonePinch=null,this.IsOnTouch=!1,this.TouchDrawCount=0,this.DisableMouse=!1,this.LanguageID=xo.LANGUAGE_CHINESE_ID,this.PressTime=500,this.IsPress=!1,this.NetworkFilter,this.LastMouseStatus={MouseOnToolbar:null},this.ClickDownPoint,this.IsDestroy=!1,this.EnableYDrag={Left:!1,Right:!1,Wheel:!1,WheelYMove:5},this.EnableZoomIndexWindow=!1,this.EnableVerifyRecvData=!1,this.PhoneDBClick=new h,this.SelectedChart={EnableSelected:!1,EnableMoveOn:!1,Selected:{Identify:null},MoveOn:{Identify:null}},this.IndexChartDrag,this.EnableIndexChartDrag=!1,this.GlobalOption={IsValueFullRange:!1,IsDisplayLatest:!1,SelectedBorder:{Mode:0,SelFrame:0},SelectedXBorder:{Mode:0,Date:null}},this.VerticalDrag,this.EnableVerticalDrag=!1,this.ClickModel={IsShowCorssCursor:!1},this.EnableClickModel=!1,this.DisplayLatestOption={Timer:null,Enable:!1,DelayTime:18e4,LastPoint:null},this.DrawDynamicInfoOption={Timer:null,Enable:!1,DelayTime:10},this.CustomChartDrag,this.StockCache={Data:null},this.JSPopMenu,this.IsShowRightMenu=!0,this.DialogDrawTool,this.DialogModifyDraw,this.DialogTooltip,this.DialogSelectRect,this.FloatTooltip,this.DialogSearchIndex,this.DialogModifyIndexParam,this.ClearStockCache=function(){this.StockCache.Data=null},this.InitalPopMenu=function(){this.JSPopMenu||(this.JSPopMenu=new on,this.JSPopMenu.Inital())},this.InitalDrawToolDialog=function(){this.DialogDrawTool||(this.DialogDrawTool=new sn,this.DialogDrawTool.Inital(this),this.DialogDrawTool.Create())},this.InitalTooltipDialog=function(t){this.DialogTooltip||(this.DialogTooltip=new Cn,this.DialogTooltip.Inital(this,t),this.DialogTooltip.Create())},this.InitalFloatTooltip=function(t){this.FloatTooltip||(this.FloatTooltip=new cn,this.FloatTooltip.Inital(this,t),this.FloatTooltip.Create())},this.InitalModifyDrawDialog=function(){this.DialogModifyDraw||(this.DialogModifyDraw=new ln,this.DialogModifyDraw.Inital(this),this.DialogModifyDraw.Create())},this.InitalSelectRectDialog=function(t){this.DialogSelectRect||(this.DialogSelectRect=new fn,this.DialogSelectRect.Inital(this,t),this.DialogSelectRect.Create())},this.InitalSearchIndexDialog=function(t){this.DialogSearchIndex||(this.DialogSearchIndex=new dn,this.DialogSearchIndex.Inital(this,t),this.DialogSearchIndex.Create())},this.InitalModifyIndexParamDialog=function(t){this.DialogModifyIndexParam||(this.DialogModifyIndexParam=new Dn,this.DialogModifyIndexParam.Inital(this,t),this.DialogModifyIndexParam.Create())},this.ShowChangeIndexDialog=function(t){t&&this.DialogSearchIndex&&(t.Title="åæ¢ææ  [çªå£"+(t.WindowIndex+1)+"]",this.DialogSearchIndex.SetOpData(t),this.DialogSearchIndex.Show())},this.ShowAddOverlayIndexDialog=function(t){t&&this.DialogSearchIndex&&(t.Title="æ·»å å å ææ  [çªå£"+(t.WindowIndex+1)+"]",this.DialogSearchIndex.SetOpData(t),this.DialogSearchIndex.Show())},this.ShowAddIndexWindowDialog=function(t){if(this.DialogSearchIndex){var e=t;e||(e={}),e.OpType=3,e.Title="å¢å ææ çªå£",this.DialogSearchIndex.SetOpData(e),this.DialogSearchIndex.Show()}},this.ShowModifyIndexParamDialog=function(t){if(this.DialogModifyIndexParam){if(1==t.Type){var e=this.WindowIndex[t.WindowIndex];if(!e)return;t.IndexScript=e,t.Title="["+e.Name+"]åæ°ä¿®æ¹ çªå£["+(t.WindowIndex+1)+"]"}else if(2==t.Type){var a=this.GetOverlayIndexByIdentify(t.Identify);if(!a||!a.OverlayItem.Script)return;var e=a.OverlayItem.Script;t.IndexScript=e,t.Title="["+e.Name+"]åæ°ä¿®æ¹ å å çªå£["+(t.WindowIndex+1)+"]"}this.DialogModifyIndexParam.SetIndexData(t),this.DialogModifyIndexParam.Show()}},this.DrawSelectRectDialog=function(){},this.IsShowSelectRectDialog=function(){return!!this.DialogSelectRect&&this.DialogSelectRect.IsShow()},this.ShowDrawToolDialog=function(t,e){if(this.DialogDrawTool){var a=this.UIElement.getBoundingClientRect(),i=m(),r=this.UIElement.offsetTop+15,n=this.UIElement.offsetWidth-this.DialogDrawTool.DivDialog.offsetWidth-15;n+=a.left+i.Left,r+=a.top+i.Top,this.DialogDrawTool.Show(n,r)}},this.IsShowDrawToolDialog=function(){return!!this.DialogDrawTool&&this.DialogDrawTool.IsShow()},this.ShowModifyDrawDialog=function(t,e,a){if(this.DialogModifyDraw&&(this.DialogModifyDraw.SetChartPicture(t),!this.DialogModifyDraw.IsShow())){var i=this.UIElement.getBoundingClientRect(),r=m(),n=this.UIElement.offsetTop+15,o=(this.UIElement.offsetWidth-this.DialogModifyDraw.DivDialog.offsetWidth)/2;o+=i.left+r.Left,n+=i.top+r.Top,this.DialogModifyDraw.Show(o,n)}},this.CloseModifyDrawDialog=function(){this.DialogModifyDraw&&this.DialogModifyDraw.Close()},this.IsShowTooltipDialog=function(){return!!this.DialogTooltip&&this.DialogTooltip.IsShow()},this.CloseTooltipDialog=function(){this.DialogTooltip&&this.DialogTooltip.Close()},this.HideFloatTooltip=function(){this.FloatTooltip&&this.FloatTooltip.Hide()},this.DestroyTooltipDialog=function(){this.DialogTooltip&&(this.DialogTooltip.Destroy(),this.DialogTooltip=null)},this.DestroyFloatTooltip=function(){this.FloatTooltip&&(this.FloatTooltip.Destroy(),this.FloatTooltip=null)},this.DestroySearchIndexDialog=function(){this.DialogSearchIndex&&(this.DialogSearchIndex.Destroy(),this.DialogSearchIndex=null)},this.SetCorssCursorElement=function(t){t&&t.Element&&t.Canvas&&(this.CorssCursorElement=t.Element,this.CorssCursorCanvas=t.Canvas)},this.StopDisplayLatest=function(){this.GlobalOption.IsDisplayLatest=!1,this.DisplayLatestOption.Timer&&(clearTimeout(this.DisplayLatestOption.Timer),this.DisplayLatestOption.Timer=null)},this.StartStopDisplayLatest=function(){var t=this;this.StopDisplayLatest(),this.DisplayLatestOption.Enable&&(this.DisplayLatestOption.Timer=setTimeout(function(){t.DisplayLatest&&(Xn.Chart.Log("[JSChartContainer:StartStopDisplayLatest] call this.DisplayLatest()"),t.DisplayLatest())},this.DisplayLatestOption.DelayTime))},this.StopDrawDynamicInfo=function(){this.DrawDynamicInfoOption.Timer&&(clearTimeout(this.DrawDynamicInfoOption.Timer),this.DrawDynamicInfoOption.Timer=null)},this.ChartDestroy=function(){this.IsDestroy=!0,this.StopAutoUpdate(),this.DestroyTooltipDialog(),this.DestroyFloatTooltip(),this.DestroySearchIndexDialog()},this.ChartDestory=this.ChartDestroy,this.SetFocus=function(){this.UIElement&&this.UIElement.focus()},this.AddEventCallback=function(t){if(t&&t.event&&t.callback){var e={Callback:t.callback,Source:t};this.mapEvent.set(t.event,e)}},this.RemoveEventCallback=function(t){this.mapEvent.has(t)&&this.mapEvent.delete(t)},this.GetEventCallback=function(t){return this.mapEvent.has(t)?this.mapEvent.get(t):null},this.GetIndexEvent=function(){return this.GetEventCallback(Kn.RECV_INDEX_DATA)},this.GetOverlayIndexEvent=function(){return this.GetEventCallback(Kn.RECV_OVERLAY_INDEX_DATA)},t.onmousemove=function(t){i.UIOnMouseMove(t)},t.oncontextmenu=function(t){return i.UIOnContextMenu(t)},t.ondblclick=function(t){i.UIOnDblClick(t)},t.onmousedown=function(t){i.UIOnMouseDown(t)},t.onmouseout=function(t){i.UIOnMounseOut(t)},t.onmouseleave=function(t){i.UIOnMouseleave(t)},this.UIOnMouseMove=function(t){var e=C(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e;if(this.StopDisplayLatest(),this.MoveOnChartDrawPicture=null,!(this.ChartSplashPaint&&1==this.ChartSplashPaint.IsEnableSplash||1==this.DisableMouse||this.BorderDrag||this.YDrag||this.IndexChartDrag||this.CustomChartDrag)){t&&"mouseout"==t.type&&0==t.buttons&&(a=i=-1);var r={X:a,Y:i,IsInClient:this.IsMouseOnClient(a,i)};this.LastMouseStatus.OnMouseMove=r,this.LastMouseStatus.MoveOnPoint={X:a,Y:i};var n=this.GetEventCallback(Kn.ON_MOUSE_MOVE),o=this.TitlePaint[0];n&&o&&(o.OnMouseMoveEvent=n),this.MoveOnPoint={X:a,Y:i},this.OnMouseMove(a,i,t),o&&(o.OnMouseMoveEvent=null),this.StartStopDisplayLatest()}},this.IsMouseOnClient=function(t,e){var a={Left:this.Frame.ChartBorder.GetLeft(),Top:this.Frame.ChartBorder.GetTop(),Width:this.Frame.ChartBorder.GetWidth(),Height:this.Frame.ChartBorder.GetHeight()};return a.Right=a.Left+a.Width,a.Bottom=a.Top+a.Height,t>=a.Left&&t<=a.Right&&e>=a.Top&&e<=a.Bottom},this.UIOnContextMenu=function(t){if((!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash)&&this.IsShowRightMenu){var e=t.clientX-this.UIElement.getBoundingClientRect().left,a=t.clientY-this.UIElement.getBoundingClientRect().top;return"function"==typeof this.OnRightMenu&&this.OnRightMenu(e,a,t),!1}},this.UIOnDblClick=function(t){if(!this.ChartSplashPaint||!this.ChartSplashPaint.IsEnableSplash){var e=C(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e;this.OnDoubleClick(a,i,t)}},this.TryYDrag=function(t,e){if(!this.EnableYDrag)return null;if(!this.EnableYDrag.Left&&!this.EnableYDrag.Right)return null;if(!this.Frame||!this.Frame.PtInFrameY)return null;var a=this.Frame.PtInFrameY(t,e);return!a||a.Index<0?null:!0===a.IsOverlay?a.Right&&this.EnableYDrag.Right&&this.Frame.IsEnableOverlayDragY(a.Index,a.OverlayIndex)?a:null:a.Left&&this.EnableYDrag.Left&&this.Frame.IsEnableDragY(a.Index)?a:a.Right&&this.EnableYDrag.Right&&this.Frame.IsEnableDragY(a.Index)?a:null},this.TryUpDownDrag=function(t,e){var a=this.Frame.PtInFrame(t,e);if(a<0)return null;var i=this.Frame.SubFrame[a];if(!i||!i.Frame)return null;var r=i.Frame;return r.YSplitOperator&&r.YSplitOperator.FixedYMaxMin?{Index:a,X:t,Y:e}:null},this.TryRectSelectDrag=function(t,e){var a=this.GetRectSelectPaint();return a?a.GetPointCount()<=0?null:{Item:a.PtInPaint(t,e),X:t,Y:e}:null},this.TryClickCrossCursor=function(t,e,a){if(this.ChartCorssCursor){var i=this.ChartCorssCursor.PtInButton(t,e);if(!i)return!1;var r=this.GetEventCallback(Kn.ON_CLICK_CROSSCURSOR_RIGHT);if(r&&r.Callback){var n={Button:i,e:a};r.Callback(r,n,this)}return!0}},this.TryClickButton=function(t,e,a){var i=this.Frame.PtInButtons(t,e);if(i&&this.ClickFrameButton)return this.ClickFrameButton(i,a),!0;if((i=this.PtInExtendChartButtons(t,e))&&this.ClickExtendChartButton)return this.ClickExtendChartButton(i,a),!0;if((i=this.PtInDrawPictureButtons(t,e))&&this.ClickDrawPictureButton)return this.ClickDrawPictureButton(i,a),!0;if((i=this.PtInTitleButtons(t,e))&&this.ClickTitleButton)return this.ClickTitleButton(i,a),!0;var r=this.Frame.PtInHorizontalLabel(t,e);return!(!r||!this.ClickHorizontalLabel)&&(this.ClickHorizontalLabel(r,a),!0)},this.TryMouseMove_CustomChartDrag=function(t){var e=this.GetEventCallback(Kn.ON_CUSTOM_DRAG_MOUSE_MOVE);return!(!e||!e.Callback)&&e.Callback(e,t,this)},this.TryClick_CustomChartDrag=function(t){var e=this.GetEventCallback(Kn.ON_CUSTOM_DRAG_MOUSE_DOWN);if(!e||!e.Callback)return!1;t.ChartDrag=null,t.Cusrsor=null,e.Callback(e,t,this),this.CustomChartDrag=t.ChartDrag,this.SetCursor(t)},this.TryDragMove_CustomChartDrag=function(t){var e=this.GetEventCallback(Kn.ON_CUSTOM_DRAG_DOC_MOUSE_MOVE);if(e&&e.Callback){var a=t.e,i=t.Drag;Math.abs(i.LastMove.Y-a.clientY)<2&&Math.abs(i.LastMove.X-a.clientX)<2||e.Callback(e,t,this)&&(i.LastMove.X=a.clientX,i.LastMove.Y=a.clientY)}},this.TryMouseUp_CustomChartDrag=function(t){var e=this.GetEventCallback(Kn.ON_CUSTOM_DRAG_DOC_MOUSE_UP);e&&e.Callback&&e.Callback(e,t,this)},this.UIOnMouseDown=function(t){var e=this;if(this.MoveOnChartDrawPicture=null,!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){this.ClickDownPoint={X:t.clientX,Y:t.clientY},this.IsOnTouch=!0,this.BorderDrag=null,this.YDrag=null,this.UpDownDrag=null,this.RectSelectDrag=null,this.IndexChartDrag=null,this.CustomChartDrag=null;var a=C(),i=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,r=(t.clientY-this.UIElement.getBoundingClientRect().top)*a;if(this.TryClickButton(i,r,t))return void(this.IsOnTouch=!1);var n=!1;if(this.GlobalOption.SelectedBorder&&this.GlobalOption.SelectedBorder.Mode>=1){var o=this.GlobalOption.SelectedBorder,s=this.Frame.PtInFrame(i,r);s>=0&&s!=o.SelFrame&&(o.SelFrame=s,n=!0)}var l=!1;if(this.GlobalOption.SelectedXBorder&&this.GlobalOption.SelectedXBorder.Mode>=1&&this.PtInMulitDayMinute){var o=this.GlobalOption.SelectedXBorder,h=this.PtInMulitDayMinute(i,r);o.Date!=h&&(o.Date=h,l=!0)}if(this.TryClickCrossCursor(i,r,t))return void(this.IsOnTouch=!1);if(this.TryClickChartTooltipData&&this.TryClickChartTooltipData(i,r,t))return void(this.IsOnTouch=!1);if(!this.TryClickLock||!this.TryClickLock(i,r)){this.HideSelectRect(),this.ClearDragSelectRect(),this.ChartPictureMenu&&this.ChartPictureMenu.Hide();var u=this.GetRectSelectPaint();if(u&&u.GetPointCount()>0){var o=u.PtInPaint(i,r);if(o)if(4==o.Type){this.SetCursor({Cursor:"pointer"});var c={X:t.clientX};this.GetXDataIndex(c)&&(this.RectSelectDrag={DataIndex:c.DataIndex,Type:o.Type,X:t.clientX},Xn.Chart.Log("[JSChartContainer::UIOnMouseDown] drag sub rect select ",c))}else this.SetCursor({Cursor:"ew-resize"}),this.RectSelectDrag={Index:o.PointIndex,Type:o.Type},Xn.Chart.Log("[JSChartContainer::UIOnMouseDown] drag rect select ",o)}if(this.IsShowSelectRectDialog()||!this.RectSelectDrag&&this.ClearRectSelect(!1)&&this.Draw(),this.EnableBorderDrag&&this.Frame){var f=this.Frame.PtInFrameBorder(i,r);f&&f.Index>=0&&(this.SetCursor({Cursor:"n-resize"}),this.BorderDrag={Index:f.Index},Xn.Chart.Log("[JSChartContainer::UIOnMouseDown] DragBorder ",f))}if(!this.BorderDrag){var d=this.TryYDrag(i,r);if(d){var D=0==d.Position?"n-resize":"row-resize";this.SetCursor({Cursor:D}),this.YDrag=d,Xn.Chart.Log("[JSChartContainer::UIOnMouseDown] dragY ",d)}else{var m=this.TryUpDownDrag(i,r);m&&(this.SetCursor({Cursor:"pointer"}),this.UpDownDrag=m,Xn.Chart.Log("[JSChartContainer::UIOnMouseDown] dragUpDown ",m))}}var p={X:i,Y:r,e:t};if(this.TryClick_CustomChartDrag(p),0!=this.DragMode){var v={Click:{},LastMove:{},CurrentMove:{}};v.Click.X=t.clientX,v.Click.Y=t.clientY,v.Click.IsInFrameBottom=this.Frame.PtInFrameBottom(i,r),v.LastMove.X=t.clientX,v.LastMove.Y=t.clientY,this.MouseDrag=v;var g=this.GetActiveDrawPicture(),T={Chart:this.SelectedChart.Selected.Chart,Identify:this.SelectedChart.Selected.Identify};if(this.SelectChartDrawPicture=null,this.BorderDrag);else if(this.YDrag||this.RectSelectDrag||this.CustomChartDrag);else if(this.CurrentChartDrawPicture){this.UpDownDrag=null;var I=this.CurrentChartDrawPicture;2==I.Status?this.SetChartDrawPictureThirdPoint(v.Click.X,v.Click.Y):(this.SetChartDrawPictureFirstPoint(v.Click.X,v.Click.Y),this.FinishChartDrawPicturePoint()&&(I.IsDrawMain?this.Draw():this.DrawDynamicInfo())),!g.Select.Guid||this.CurrentChartDrawPicture&&g.Select.Guid==this.CurrentChartDrawPicture.Guid||g.Select.Chart.IsDrawMain&&this.Draw()}else{var S={};if(S.X=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,S.Y=(t.clientY-this.UIElement.getBoundingClientRect().top)*a,this.GetChartDrawPictureByPoint(S)){if(this.EnableEraseChartDrawPicture)this.CurrentChartDrawPicture=null,this.SelectChartDrawPicture=null,this.ClearChartDrawPicture(S.ChartDrawPicture);else{this.UpDownDrag=null,this.CurrentChartDrawPicture=S.ChartDrawPicture,this.SelectChartDrawPicture=S.ChartDrawPicture;var x=!1;g.Select.Guid&&g.Select.Chart&&g.Select.Chart.IsDrawMain?x=!0:S.ChartDrawPicture.IsDrawMain&&(x=!0),x&&this.Draw(),1==S.ChartDrawPicture.EnableMove&&(S.ChartDrawPicture.Status=20),S.ChartDrawPicture.ValueToPoint(),S.ChartDrawPicture.MovePointIndex=S.PointIndex,this.SelectChartDrawPicture.DragInfo={Click:{X:t.clientX,Y:t.clientY}}}var b=this.GetEventCallback(Kn.ON_CLICK_DRAWPICTURE);if(b&&b.Callback){var p={DrawPicture:S.ChartDrawPicture};b.Callback(b,p,this)}else this.OnSelectChartPicture(S.ChartDrawPicture)}else{null!=this.ClickChartTimer&&(clearTimeout(this.ClickChartTimer),this.ClickChartTimer=null);var y=this,E={X:this.ClickDownPoint.X,Y:this.ClickDownPoint.Y};this.ClickChartTimer=setTimeout(function(){y.TryClickPaintEvent(Kn.ON_CLICK_CHART_PAINT,E,t)},250);var w=!1;if(this.SelectedChart.EnableSelected){var F=this.PtInChart(i,r);F?(this.SelectedChart.Selected.Identify!=F.Identify&&(this.SelectedChart.Selected.Identify=F.Identify,this.SelectedChart.Selected.Chart=F.Chart,w=!0),this.EnableIndexChartDrag&&(this.IndexChartDrag={SelectedChart:F,LastMove:{X:i,Y:r},Click:{X:i,Y:r}},this.IndexChartDrag.Info=this.GetSelectedChartInfo(F),this.IndexChartDrag.Info&&(this.IndexChartDrag.Info.FrameID=this.Frame.PtInFrame(i,r)))):this.SelectedChart.Selected.Identify&&(this.SelectedChart.Selected.Identify=null,this.SelectedChart.Selected.Chart=null,w=!0)}else this.SelectedChart.Selected.Identify&&(this.SelectedChart.Selected.Identify=null,w=!0);if(null!=g.Select.Guid&&null==this.SelectChartDrawPicture||w){var M=0;if(g.Select.Guid&&g.Select.Chart&&g.Select.Chart.IsDrawMain&&(M=1),w){var L=T.Chart;L&&L.SetSelectedStatus&&(L.SetSelectedStatus(0),M=1),L=this.SelectedChart.Selected.Chart,L&&L.SetSelectedStatus&&(L.SetSelectedStatus(1),M=1)}1==M?this.Draw():this.DrawDynamicInfo()}else l?this.Draw():n&&this.DrawDynamicInfo()}}this.SelectChartDrawPicture||this.CloseModifyDrawDialog(),document.onmousemove=function(t){e.DocOnMouseMove(t)},document.onmouseup=function(t){e.DocOnMouseUp(t)}}}}},this.DocOnMouseMove=function(t){if(!this.ChartSplashPaint||!this.ChartSplashPaint.IsEnableSplash){var e=this.MouseDrag;if(e){var a=Math.abs(e.LastMove.X-t.clientX),i=Math.abs(e.LastMove.Y-t.clientY),r=this.RectSelectDrag&&this.RectSelectDrag.Index>=0,n=this.RectSelectDrag&&4==this.RectSelectDrag.Type;if(e.CurrentMove&&(e.CurrentMove.X=t.clientX,e.CurrentMove.Y=t.clientY),this.BorderDrag&&this.BorderDrag.Index>=0){if(Math.abs(e.LastMove.Y-t.clientY)<5)return;var o=t.clientY-e.LastMove.Y;this.OnMoveFromeBorder(this.BorderDrag.Index,o),e.LastMove.X=t.clientX,e.LastMove.Y=t.clientY}else if(this.YDrag&&this.YDrag.Index>=0){if(i<5)return;var o=t.clientY-e.LastMove.Y;Xn.Chart.Log("[JSChartContainer::DocOnMouseMove] YDrag ",this.YDrag,o),this.OnZoomUpDownFrameY(this.YDrag,o),e.LastMove.X=t.clientX,e.LastMove.Y=t.clientY}else if(this.IndexChartDrag&&this.IndexChartDrag.SelectedChart){if(Math.abs(e.LastMove.Y-t.clientY)<2&&Math.abs(e.LastMove.X-t.clientX)<2)return;var s=this.GetExtendChartByClassName("DragMovePaint");if(s&&s.Chart){var l=C(),h=(t.clientX-this.UIElement.getBoundingClientRect().left)*l,u=(t.clientY-this.UIElement.getBoundingClientRect().top)*l;s.Chart.Point={X:h,Y:u},s.Chart.IsShow=!0,s.Chart.Info=this.IndexChartDrag.Info,this.DrawDynamicInfo()}this.IndexChartDrag.LastMove.X=h,this.IndexChartDrag.LastMove.Y=u,e.LastMove.X=t.clientX,e.LastMove.Y=t.clientY}else if(this.CustomChartDrag){var l=C(),h=(t.clientX-this.UIElement.getBoundingClientRect().left)*l,u=(t.clientY-this.UIElement.getBoundingClientRect().top)*l,c={X:h,Y:u,e:t,ChartDrag:this.CustomChartDrag,Drag:e};this.TryDragMove_CustomChartDrag(c)}else if(this.CurrentChartDrawPicture&&!0===this.CurrentChartDrawPicture.EnableMove){var f=this.CurrentChartDrawPicture;if(1==f.Status||2==f.Status){if(Math.abs(e.LastMove.X-t.clientX)<5&&Math.abs(e.LastMove.Y-t.clientY)<5)return;this.SetChartDrawPictureSecondPoint(t.clientX,t.clientY)&&this.DrawDynamicInfo()}else if(3==f.Status)this.SetChartDrawPictureThirdPoint(t.clientX,t.clientY)&&this.DrawDynamicInfo();else if(20==f.Status){if(Math.abs(e.LastMove.X-t.clientX)<5&&Math.abs(e.LastMove.Y-t.clientY)<1)return;if(this.SelectChartDrawPicture&&this.SelectChartDrawPicture.EnableCtrlMove&&!t.ctrlKey)return;this.SelectChartDrawPicture&&this.SelectChartDrawPicture.DragInfo&&(this.SelectChartDrawPicture.DragInfo.Move={X:t.clientX,Y:t.client}),this.MoveChartDrawPicture(t.clientX-e.LastMove.X,t.clientY-e.LastMove.Y,!1,e)&&this.DrawDynamicInfo()}e.LastMove.X=t.clientX,e.LastMove.Y=t.clientY}else if(1==this.DragMode||r||n)this.OnDragMode_One({X:a,Y:i},t);else if(2==this.DragMode){var d=Math.abs(e.LastMove.Y-t.clientY);if(a<5&&d<5)return;this.SetCursor({Cursor:"default"});var D=this.PointAbsoluteToRelative(e.Click.X,e.Click.Y),m=this.PointAbsoluteToRelative(t.clientX,t.clientY);this.ShowDragSelectRect(D,m),e.LastMove.X=t.clientX,e.LastMove.Y=t.clientY}}}},this.OnDragMode_One=function(t,e){var a=t.X,i=t.Y,r=this.MouseDrag;if(!(a<5&&i<5)){var n=!1,o=!1;if(i>=5&&this.UpDownDrag&&this.UpDownDrag.Index>=0){var s=e.clientY-r.LastMove.Y;Xn.Chart.Log("[JSChartContainer::OnDragMode_One] UpDownDrag ",this.UpDownDrag,s),this.SetCursor({Cursor:"pointer"}),this.OnUpDonwFrameY(this.UpDownDrag,s)&&(n=!0,o=!0),r.LastMove.Y=e.clientY}if(a>=5){if(this.RectSelectDrag){if(this.RectSelectDrag.Index>=0){var l={X:e.clientX,Y:e.clientY,PointIndex:this.RectSelectDrag.Index,Name:"MoveRectSelectLine"};this.MoveRectSelectPoint(l)&&(n=!0)}else if(4===this.RectSelectDrag.Type){var l={X:e.clientX};if(!this.GetXDataIndex(l))return;if(l.DataIndex==this.RectSelectDrag.DataIndex)return;var h=l.DataIndex-this.RectSelectDrag.DataIndex,u=!0;if(h>0&&(u=!1),!this.MoveSubRectSelect({Step:Math.abs(h),IsLeft:u,X:e.clientX,Y:e.clientY}))return;this.RectSelectDrag.DataIndex=l.DataIndex,this.RectSelectDrag.X=e.clientX,n=!0}}else{var u=!0;r.LastMove.X<e.clientX&&(u=!1);var C="pointer";r.Click.IsInFrameBottom&&(C="ew-resize");if(a<this.GetMoveOneStepWidth())return this.SetCursor({Cursor:C}),void(n&&this.Draw());if(r.Click&&r.Click.IsInFrameBottom)this.XCoordinateZoom(a,u)&&(this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),n=!0);else if(this.DataMove(a,u))this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),n=!0;else if(!o&&this.DragDownloadData&&(this.DragDownloadData(),this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash))return;this.SetCursor({Cursor:C})}r.LastMove.X=e.clientX}n&&(this.Draw(),this.OnKLinePageChange("datamove"))}},this.GetXDataIndex=function(e){if(!this.ChartPaint[0]||!this.ChartPaint[0].Data)return!1;var a=this.ChartPaint[0].Data;if(!this.Frame.SubFrame[0])return!1;var i=this.Frame.SubFrame[0].Frame,r=C(),n=(e.X-t.getBoundingClientRect().left)*r,o=i.GetXData(n);o=parseInt(o.toFixed(0));var s=o+a.DataOffset;s>=a.Data.length&&(s=a.Data.length-1);var l=a.Data[s];return e.DataIndex=s,e.Item=l,!0},this.DocOnMouseUp=function(e){document.onmousemove=null,document.onmouseup=null;var a="MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName,i=this.RectSelectDrag&&this.RectSelectDrag.Index>=0,r=this.RectSelectDrag&&4==this.RectSelectDrag.Type,n=!0;if(this.CurrentChartDrawPicture){var o=this.CurrentChartDrawPicture;2==o.Status||1==o.Status||3==o.Status?(o.PointStatus=o.Status,this.FinishChartDrawPicturePoint()?this.DrawDynamicInfo():n=!1):20==o.Status&&this.FinishMoveChartDrawPicture()&&this.DrawDynamicInfo()}else if(this.IndexChartDrag&&this.IndexChartDrag.SelectedChart){var s=this.GetExtendChartByClassName("DragMovePaint");s&&s.Chart&&s.Chart.Clear(),this.OnDragChart(this.IndexChartDrag)||this.DrawDynamicInfo(),this.SetCursor({Cursor:"default"})}else if(this.CustomChartDrag){var l={e:e,ChartDrag:this.CustomChartDrag,Drag:this.MouseDrag};this.TryMouseUp_CustomChartDrag(l)}else if(i)this.OnDragSelectRectMouseUp&&this.OnDragSelectRectMouseUp(e);else if(r)this.OnDragSubSelectRectMouseUp&&this.OnDragSubSelectRectMouseUp(e);else if(a)this.OnMinuteSelectRectMouseUp&&this.OnMinuteSelectRectMouseUp(e);else if(2==this.DragMode){var h=this.MouseDrag;h.LastMove.X=e.clientX,h.LastMove.Y=e.clientY;var u=new w,c=C();if(u.XStart=(h.Click.X-t.getBoundingClientRect().left)*c,u.YStart=(h.Click.Y-t.getBoundingClientRect().top)*c,u.XEnd=(h.LastMove.X-t.getBoundingClientRect().left)*c,u.YEnd=(h.LastMove.Y-t.getBoundingClientRect().top)*c,u.JSChartContainer=this,u.Stock={Symbol:this.Symbol,Name:this.Name},this.ChartDragSelectRect.Enable&&!this.BorderDrag&&this.GetSelectRectData(u)){var f=this.GetEventCallback(Kn.ON_SELECT_RECT),d=this.GetRectSelectPaint(),D=!0;if(f&&f.Callback){var m=(0,On.default)({X:h.LastMove.X-t.getBoundingClientRect().left,Y:h.LastMove.Y-t.getBoundingClientRect().top,SelectData:u,RectSelectPaint:d,IsShowMenu:!0,e:e},"e",e);f.Callback(f,m,this),D=m.IsShowMenu}if(a)this.HideSelectRect(),this.UpdateSelectRect(u.Start,u.End);else if(D){var m={Chart:this,X:h.LastMove.X-t.getBoundingClientRect().left,Y:h.LastMove.Y-t.getBoundingClientRect().top,SelectData:u,RectSelectPaint:d};e.data=m,this.PopupSelectRectMenuV2(m,e)}}else this.TryClickPaintEvent(Kn.ON_CLICKUP_CHART_PAINT,this.ClickDownPoint,e)}else this.TryClickPaintEvent(Kn.ON_CLICKUP_CHART_PAINT,this.ClickDownPoint,e),this.ClickEvent(e);Xn.Chart.Log("[KLineChartContainer::document.onmouseup]",e),this.SelectChartDrawPicture&&(this.SelectChartDrawPicture.DragInfo=null),this.SetCursor({Cursor:"default"}),this.MouseDrag=null,this.ClickDownPoint=null,this.IsOnTouch=!1,1==this.EnableEraseChartDrawPicture&&(this.EnableEraseChartDrawPicture=!1,this.DialogDrawTool&&this.DialogDrawTool.SetEraseChartButtonStatus&&this.DialogDrawTool.SetEraseChartButtonStatus(!1)),this.BorderDrag&&this.BorderDrag.Index>=0&&this.Frame.SaveSubFrameHeightRate(),this.BorderDrag=null,this.YDrag=null,this.UpDownDrag=null,this.RectSelectDrag=null,this.IndexChartDrag=null,this.CustomChartDrag=null,!0===n&&(this.CurrentChartDrawPicture=null)},this.UIOnMounseOut=function(t){Xn.Chart.Log("[KLineChartContainer::UIOnMounseOut]",t),this.UIOnMouseMove(t)},this.UIOnMouseleave=function(t){Xn.Chart.Log("[KLineChartContainer::UIOnMouseleave]",t)},this.OnDragChart=function(t){if(!t)return!1;var e=t.Info,a=t.LastMove,i=e.FrameID,r=this.Frame.PtInFrame(a.X,a.Y);return r<0?-3==r&&this.MoveIndexToNewWindow({WindowIndex:i,IndexID:e.IndexID},{Operator:0}):i!=r&&this.MoveIndex({WindowIndex:i,IndexID:e.IndexID},{WindowIndex:r},{Operator:0})},this.GetSelectedChartInfo=function(t){if(!t)return null;var e={Type:0},a=t.Identify;if("Main-KLine"==a)e.Name=this.Name,e.Symbol=this.Symbol,e.Type=Do.MAIN_KLINE;else if(0==a.indexOf("Overlay-KLine-"))e.Name=t.Chart.Title,e.Symbol=t.Chart.Symbol,e.Type=Do.OVERLAY_KLINE;else if(0==a.indexOf("Overlay-Minute-"))e.Name=t.Chart.Title,e.Symbol=t.Chart.Symbol,e.Type=Do.OVERLAY_MINUTE;else if("Minute-Line"==a)e.Name=this.Name,e.Symbol=this.Symbol,e.Type=Do.MAIN_MINUTE;else if("Minute-Average-Line"==a)e.Name=this.Name,e.Symbol=this.Symbol,e.Type=Do.MAIN_AVERAGE_MINUTE;else if("Minute-Vol-Bar"==a)e.Name=this.Name,e.Symbol=this.Symbol,e.Type=Do.MAIN_MINUTE_VOL;else if(0==a.indexOf("guid"))for(var i=0;i<this.TitlePaint.length;++i){var r=this.TitlePaint[i];if("DynamicChartTitlePainting"==r.ClassName){if(r.Identify==a){e.IndexName=r.Title,e.IndexID=a,e.Type=Do.MAIN_INDEX;break}var n=!0,o=!1,s=void 0;try{for(var l,h=(0,Gn.default)(r.OverlayIndex);!(n=(l=h.next()).done);n=!0){var u=l.value;if(u[0]==a){e.IndexName=u[1].Title,e.IndexID=a,e.Type=Do.OVERLAY_INDEX;break}}}catch(t){o=!0,s=t}finally{try{!n&&h.return&&h.return()}finally{if(o)throw s}}if(e.Type>0)break}}return e},this.ClickEvent=function(e){var a=this.GetEventCallback(Kn.ON_CLICK);if(!a||!a.Callback)return!1;if(this.ClickDownPoint.X!=e.clientX||this.ClickDownPoint.Y!=e.clientY)return!1;var i=C(),r=(e.clientX-t.getBoundingClientRect().left)*i,n=(e.clientY-t.getBoundingClientRect().top)*i,o={X:e.clientX,Y:e.clientY,FrameID:-1};if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),this.Canvas.isPointInPath(r,n)){var s={},l=this.Frame.GetYData(n,s);if(we.IsNumber(s.FrameID)&&s.FrameID>=0){var h=this.Frame.GetXData(r);o.FrameID=s.FrameID,o.Data={X:h,Y:l}}}return a.Callback(a,o,this),!0},this.DBClickEvent=function(e,a){var i=this.GetEventCallback(Kn.ON_DBCLICK);if(!i||!i.Callback)return!1;var r=C(),n=(a.clientX-t.getBoundingClientRect().left)*r,o=(a.clientY-t.getBoundingClientRect().top)*r,s={X:a.clientX,Y:a.clientY,FrameID:-1,ClientPos:-1},l=this.PtInClient(n,o);if(s.ClientPos=l,l>0){var h={},u=this.Frame.GetYData(o,h);if(we.IsNumber(h.FrameID)&&h.FrameID>=0){var c=this.Frame.GetXData(n);s.FrameID=h.FrameID,s.Data={X:c,Y:u},this.GetDataItem&&(s.Data.Item=this.GetDataItem({ClientPos:l,Index:c,Point:{X:n,Y:o}}))}}return e&&e.SelectedChart&&(s.SelectedChart=this.GetSelectedChartInfo(e.SelectedChart)),i.Callback(i,s,this),!0},this.PtInChartPaintTooltip=function(t,e,a){for(var i=0;i<this.ChartPaint.length;++i){var r=this.ChartPaint[i];if(r.GetTooltipData(t,e,a))return r}return null},this.PtInOverlayIndexTooltip=function(t,e,a){var i=this.Frame.PtInFrame(t,e);if(i<0)return null;if(!this.Frame.SubFrame[i])return null;var r=this.Frame.SubFrame[i].OverlayIndex;if(!we.IsNonEmptyArray(r))return null;for(var n=0;n<r.length;++n){var o=r[n];if(we.IsNonEmptyArray(o.ChartPaint))for(var s=0;s<o.ChartPaint.length;++s){var l=o.ChartPaint[s];if(l.IsShow&&(!l.IsHideScriptIndex()&&l.GetTooltipData(t,e,a)))return a.OverlayIndex={WindowIndex:i,Identify:o.Identify},o.Script&&(a.OverlayIndex.IndexName=o.Script.Name,a.OverlayIndex.IndexID=o.Script.ID),l}}return null},this.PtInOverlayChartPaintTooltip=function(t,e,a){for(var i=0;i<this.OverlayChartPaint.length;++i){var r=this.OverlayChartPaint[i];if(r.GetTooltipData(t,e,a))return r}return null},this.PtInExtendChartPaintTooltip=function(t,e,a){return null},this.TryClickPaintEvent=function(e,a,i){var r=this.GetEventCallback(e);if(r&&r.Callback&&a.X==i.clientX&&a.Y==i.clientY){var n=C(),o=(i.clientX-t.getBoundingClientRect().left)*n,s=(i.clientY-t.getBoundingClientRect().top)*n,l=new et,h=null,u=this.PtInChartPaintTooltip(o,s,l);if(u&&(h={Symbol:this.Symbol,Name:this.Name}),u||(u=this.PtInOverlayChartPaintTooltip(o,s,l))&&(h={Symbol:l.ChartPaint.Symbol,Name:l.ChartPaint.Title}),l.Data){var c={X:i.clientX,Y:i.clientY,Stock:h,Tooltip:l};return r.Callback(r,c,this),!0}}return!1},this.IsPhoneDragging=function(t){var e=t.changedTouches.length,a=t.touches.length;return 1==e&&1==a},this.IsPhonePinching=function(t){var e=t.changedTouches.length,a=t.touches.length;return(1==e||2==e)&&2==a},this.PreventTouchEvent=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()},this.GetToucheData=function(t,e){for(var a=new Array,i=C(),r=0;r<t.touches.length;++r){var n=t.touches[r];e?a.push({clientX:n.clientY*i,clientY:n.clientX*i,pageX:n.pageY*i,pageY:n.pageX*i}):a.push({clientX:n.clientX*i,clientY:n.clientY*i,pageX:n.pageX*i,pageY:n.pageY*i})}return a},this.IsSingleTouch=function(t){return 1==t.touches.length},this.StopDragTimer=function(){we.IsNumber(this.DragTimer)&&(clearTimeout(this.DragTimer),this.DragTimer=null,this.IsPress=!1)},this.GetMoveAngle=function(t,e){var a=Math.abs(t.X-e.X),i=Math.abs(t.Y-e.Y);return 180*Math.atan(a/i)/Math.PI},t.ontouchstart=function(t){i.OnTouchStart(t)},t.ontouchmove=function(t){i.OnTouchMove(t)},t.ontouchend=function(t){i.OnTouchEnd(t)},this.AddPhoneDBClickInfo=function(t,e,a){var i={X:t,Y:e,Time:a};this.PhoneDBClickInfo.Start.push(i)},this.ClearPhoneDBClickInfo=function(){this.PhoneDBClickInfo.Start=[]},this.IsShortPhoneClick=function(t,e,a){},this.OnTouchStart=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){this.IsPress=!1,this.IsOnTouch=!0,this.TouchDrawCount=0,this.PhonePinch=null,this.StopDragTimer();var e=this.IsSingleTouch(t);if((0==this.EnableScrollUpDown||!e||this.DragMode==Jn.CLICK_TOUCH_MODE_ID&&1==this.TouchStatus.CorssCursorShow)&&t.cancelable&&t.preventDefault(),this.IsPhoneDragging(t)){var a=this.GetToucheData(t,this.IsForceLandscape),i=this.PointAbsoluteToRelative(a[0].clientX,a[0].clientY,!0);if(this.TryClickLock||this.TryClickIndexTitle){var r=i.X,n=i.Y;if(this.TryClickLock&&this.TryClickLock(r,n))return;if(this.TryClickIndexTitle&&this.TryClickIndexTitle(r,n))return}if(this.ClickFrameButton){var o=this.Frame.PtInButtons(i.X,i.Y);if(o)return void this.ClickFrameButton(o,t)}this.EnableVerticalDrag&&(this.VerticalDrag={IsDrag:!1},this.Frame.PtInFrameVertical(i.X,i.Y)&&(this.VerticalDrag.IsDrag=!0));var s=!0;this.ChartDrawOption.IsLockScreen?s=!1:this.DragMode==Jn.CLICK_TOUCH_MODE_ID?1==this.TouchStatus.CorssCursorShow&&(s=!1):this.DragMode==Jn.DISABLE_DRAG_ID?s=!1:e||(s=!1),this.VerticalDrag&&(s=!1),this.EnableClickModel&&1==this.ClickModel.IsShowCorssCursor&&(s=!1);var l={Click:{},LastMove:{}};l.Click.X=a[0].clientX,l.Click.Y=a[0].clientY,l.LastMove.X=a[0].clientX,l.LastMove.Y=a[0].clientY,this.MouseDrag=l;var h=this.GetActiveDrawPicture();this.SelectedChart.Selected.Chart,this.SelectedChart.Selected.Identify;this.PhoneTouchInfo={Start:{X:a[0].clientX,Y:a[0].clientY},End:{X:a[0].clientX,Y:a[0].clientY}},this.SelectChartDrawPicture&&(this.SelectChartDrawPicture.IsSelected=!1),this.SelectChartDrawPicture=null;if(this.CurrentChartDrawPicture){var u=this.CurrentChartDrawPicture;return 2==u.Status?this.SetChartDrawPictureThirdPoint(l.Click.X,l.Click.Y,!0):(this.SetChartDrawPictureFirstPoint(l.Click.X,l.Click.Y,!0),this.FinishChartDrawPicturePoint()&&(u.IsDrawMain?this.Draw():this.DrawDynamicInfo({Corss:!1,Tooltip:!1}))),void(t.cancelable&&t.preventDefault())}var i=this.PointAbsoluteToRelative(a[0].clientX,a[0].clientY,!0),c={X:i.X,Y:i.Y};C();if(this.GetChartDrawPictureByPoint(c)){1==c.ChartDrawPicture.EnableMove&&(c.ChartDrawPicture.Status=20),c.ChartDrawPicture.ValueToPoint(),c.ChartDrawPicture.MovePointIndex=c.PointIndex,c.ChartDrawPicture.IsSelected=!0,this.CurrentChartDrawPicture=c.ChartDrawPicture,this.SelectChartDrawPicture=c.ChartDrawPicture;var f=this.GetEventCallback(Kn.ON_CLICK_DRAWPICTURE);if(f&&f.Callback){var d={DrawPicture:c.ChartDrawPicture};f.Callback(f,d,this)}var D=0;return c.ChartDrawPicture.IsDrawMain?D=1:h.Select.Guid&&h.Select.Chart&&h.Select.Chart.IsDrawMain&&(D=1),1==D&&this.Draw(),void(t.cancelable&&t.preventDefault())}if(s){var m=this;this.DragTimer=setTimeout(function(){if(m.IsPress=!0,l.Click.X==l.LastMove.X&&l.Click.Y==l.LastMove.Y){m.MouseDrag;m.MouseDrag=null,m.DragMode==Jn.CLICK_TOUCH_MODE_ID&&(m.TouchStatus.CorssCursorShow=!0),!0===m.EnableClickModel&&(m.ClickModel.IsShowCorssCursor=!0),m.MoveCorssCursor(l.Click,t)}},m.PressTime)}this.EnableZoomIndexWindow&&(this.PhoneDBClick.AddTouchStart(a[0].clientX,a[0].clientY,Date.now()),Xn.Chart.Log("[JSChartContainer::OnTouchStart] PhoneDBClick ",this.PhoneDBClick)),this.ChartDrawOption.IsLockScreen?this.MouseDrag=null:this.DragMode==Jn.CLICK_TOUCH_MODE_ID||(this.DragMode==Jn.DISABLE_DRAG_ID?(this.MouseDrag=null,this.MoveCorssCursor(l.Click,t)):this.EnableClickModel||(this.VerticalDrag?this.VerticalDrag.IsDrag||this.MoveCorssCursor(l.Click,t):this.IsClickShowCorssCursor&&this.MoveCorssCursor(l.Click,t))),this.TouchEvent({EventID:Kn.ON_PHONE_TOUCH,FunctionName:"OnTouchStart"},t);var D=0;null!=h.Select.Guid&&h.Select.Guid&&h.Select.Chart&&(D=1),1==D&&this.Draw()}else if(this.IsPhonePinching(t)){var p={Start:{},Last:{}},a=this.GetToucheData(t,this.IsForceLandscape);p.Start={X:a[0].pageX,Y:a[0].pageY,X2:a[1].pageX,Y2:a[1].pageY},p.Last={X:a[0].pageX,Y:a[0].pageY,X2:a[1].pageX,Y2:a[1].pageY},this.PhonePinch=p,this.SelectChartDrawPicture=null}}},this.OnTouchMove=function(e){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var a=this.GetToucheData(e,this.IsForceLandscape);if(this.IsPhoneDragging(e)){var i=this.MouseDrag;if(null==i)this.IsForceLandscape&&(y=t.getBoundingClientRect().width-a[0].clientY),this.ChartDrawOption.IsLockScreen||this.MoveCorssCursor({X:a[0].clientX,Y:a[0].clientY},e);else{var r=this.GetMoveAngle(i.LastMove,{X:a[0].clientX,Y:a[0].clientY}),n=Math.abs(i.LastMove.X-a[0].clientX),o=Math.abs(i.LastMove.Y-a[0].clientY);n=parseInt(n);var s=this.DragMode==Jn.CLICK_TOUCH_MODE_ID&&1==this.TouchStatus.CorssCursorShow;if(this.VerticalDrag&&(s=!0!==this.VerticalDrag.IsDrag),this.EnableClickModel&&(s=!0===this.ClickModel.IsShowCorssCursor),this.CurrentChartDrawPicture&&!0===this.CurrentChartDrawPicture.EnableMove){var l=this.CurrentChartDrawPicture;if(1==l.Status||2==l.Status){if(n<5&&o<5)return;this.SetChartDrawPictureSecondPoint(a[0].clientX,a[0].clientY,!0)&&this.DrawDynamicInfo()}else if(3==l.Status)this.SetChartDrawPictureThirdPoint(a[0].clientX,a[0].clientY,!0)&&this.DrawDynamicInfo();else if(20==l.Status){if(n<5&&o<5)return;this.MoveChartDrawPicture(a[0].clientX-i.LastMove.X,a[0].clientY-i.LastMove.Y,!0)&&this.DrawDynamicInfo()}i.LastMove.X=a[0].clientX,i.LastMove.Y=a[0].clientY}else if(s){this.MouseDrag;this.MouseDrag=null,this.MoveCorssCursor(i.Click,e)}else if(1==this.DragMode||0==s){if((o>0&&n<=3||r<=this.TouchMoveMinAngle)&&1==this.EnableScrollUpDown)return void this.StopDragTimer();if(n<5||r<=this.TouchMoveMinAngle)return void this.PreventTouchEvent(e);if(this.EnableVerticalDrag){if(!this.VerticalDrag)return;if(!this.VerticalDrag.IsDrag)return}var h=!0;i.LastMove.X<a[0].clientX&&(h=!1);var u=this.GetMoveOneStepWidth();if(n<u)return;this.DataMove(n,h)?(this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw(),this.OnKLinePageChange("OnTouchMove")):this.DragDownloadData&&this.DragDownloadData(),i.LastMove.X=a[0].clientX,i.LastMove.Y=a[0].clientY}}this.PhoneTouchInfo&&(this.PhoneTouchInfo.End.X=a[0].clientX,this.PhoneTouchInfo.End.Y=a[0].clientY)}else if(this.IsPhonePinching(e)){if(this.DragMode==Jn.DISABLE_DRAG_ID)return;this.PreventTouchEvent(e);var C=this.PhonePinch;if(!C)return;if(C.Operator=null,this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Touch)return;var c=Math.abs(a[0].pageY-a[1].pageY),f=Math.abs(C.Last.Y-C.Last.Y2),d=c-f,D=Math.abs(a[0].pageX-a[1].pageX),m=Math.abs(C.Last.X-C.Last.X2),p=D-m,v=this.ZoomStepPixel;if(Math.abs(d)<v&&Math.abs(p)<v)return;var g=d;if(Math.abs(d)<v&&(g=p),g>0){var T={IsLockRight:this.IsZoomLockRight};if(T.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomUp(T))return;C.Operator="ZoomUp",this.CursorIndex=T.Index,this.UpdatePointByCursorIndex(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.StopDragTimer()}else{var T={IsLockRight:this.IsZoomLockRight};if(T.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomDown(T))return;C.Operator="ZoomDown",this.CursorIndex=T.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.StopDragTimer()}C.Last={X:a[0].pageX,Y:a[0].pageY,X2:a[1].pageX,Y2:a[1].pageY}}this.PreventTouchEvent(e)}},this.OnTouchEnd=function(t){if(Xn.Chart.Log("[KLineChartContainer:OnTouchEnd]",t),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=!0;if(this.CurrentChartDrawPicture){var a=this.CurrentChartDrawPicture;2==a.Status||1==a.Status||3==a.Status?(a.PointStatus=a.Status,this.FinishChartDrawPicturePoint()?this.DrawDynamicInfo():e=!1):20==a.Status&&this.FinishMoveChartDrawPicture()&&this.DrawDynamicInfo()}if(this.EnableZoomIndexWindow){var i=Date.now();this.PhoneDBClick.AddTouchEnd(i),this.PhoneDBClick.IsVaildDBClick()&&(this.OnTouchDBClick(this.PhoneDBClick.Start),this.PhoneDBClick.Clear())}this.IsOnTouch=!1,this.VerticalDrag=null,!0===e&&(this.CurrentChartDrawPicture=null),this.StopDragTimer(),this.TouchEvent({EventID:Kn.ON_PHONE_TOUCH,FunctionName:"OnTouchEnd"},t),this.OnTouchFinished(),this.TouchDrawCount=0,this.PhonePinch=null}},this.OnTouchDBClick=function(t){var e=this.PointAbsoluteToRelative(t[0].X,t[0].Y,!0),a=e.X,i=e.Y;Xn.Chart.Log("[KLineChartContainer:OnTouchDBClick] Phone dbclick absolute ["+a+","+i+"], soruce ["+t[0].X+","+t[0].Y+"]");var r=this.Frame.PtInFrame(a,i);if(Xn.Chart.Log("[KLineChartContainer::OnTouchDBClick] frameId",r),r>=this.Frame.ZoomStartWindowIndex&&this.ZoomIndexWindow(r,{X:a,Y:i}))return this.Frame.SetSizeChage(!0),this.Draw(),!0},this.TouchEvent=function(t,e){var a=t.EventID,i=this.GetEventCallback(a);if(!i||!i.Callback)return!1;var r=this.PhoneTouchInfo;if(!r||!r.Start||!r.End)return!1;var n=C(),o=r.End.X/n,s=r.End.Y/n,l=r.End.X-this.UIElement.getBoundingClientRect().left*n,h=r.End.Y-this.UIElement.getBoundingClientRect().top*n,u={X:o,Y:s,FrameID:-1,FunctionName:t.FunctionName,Drag:{Start:{X:r.Start.X/n,Y:r.Start.Y/n},End:{X:r.End.X/n,Y:r.End.Y/n}}};if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),this.Canvas.isPointInPath(l,h))if(this.Frame&&this.Frame.IsHScreen){var c={},f=this.Frame.GetYData(l,c);if(we.IsNumber(c.FrameID)&&c.FrameID>=0){var d=this.Frame.GetXData(h);u.FrameID=c.FrameID,u.Data={X:d,Y:f}}}else{var c={},f=this.Frame.GetYData(h,c);if(we.IsNumber(c.FrameID)&&c.FrameID>=0){var d=this.Frame.GetXData(l);u.FrameID=c.FrameID,u.Data={X:d,Y:f}}}return i.Callback(i,u,this),!0},this.MoveCorssCursor=function(t,e){var a=C(),i=t.X-this.UIElement.getBoundingClientRect().left*a,r=t.Y-this.UIElement.getBoundingClientRect().top*a;this.DragMode==Jn.CLICK_TOUCH_MODE_ID&&(this.TouchStatus.CorssCursorShow=!0),this.OnMouseMove(i,r,e,!0)},this.DrawEmpty=function(){this.UIElement.width<=0||this.UIElement.height<=0||(this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height),this.Frame&&(this.Frame.ScreenImageData=null,this.Frame.Draw()))},this.PtInChart=function(t,e){for(var a=null,i=0;i<this.ChartPaint.length;++i){var r=this.ChartPaint[i];if(r.PtInChart&&(!r.IsHideScriptIndex()&&(a=r.PtInChart(t,e))))return a}for(var i=0;i<this.OverlayChartPaint.length;++i){var r=this.OverlayChartPaint[i];if(r.PtInChart&&(a=r.PtInChart(t,e)))return a}return this.Frame.PtInOveralyChart&&(a=this.Frame.PtInOveralyChart(t,e))?a:null},this.DrawSelectedStatus=function(){if(this.SelectedChart.MoveOn.Identify||this.SelectedChart.Selected.Identify){for(var t=0;t<this.ChartPaint.length;++t){var e=this.ChartPaint[t];e.Identify&&(e.Identify!=this.SelectedChart.MoveOn.Identify&&e.Identify!=this.SelectedChart.Selected.Identify||e.DrawSelectedStatus&&e.DrawSelectedStatus())}for(var t=0;t<this.OverlayChartPaint.length;++t){var e=this.OverlayChartPaint[t];e.Identify&&(e.Identify!=this.SelectedChart.MoveOn.Identify&&e.Identify!=this.SelectedChart.Selected.Identify||e.DrawSelectedStatus&&e.DrawSelectedStatus())}for(var t=0;t<this.OverlayChartPaint.length;++t){var e=this.OverlayChartPaint[t];e.Identify&&(e.Identify!=this.SelectedChart.MoveOn.Identify&&e.Identify!=this.SelectedChart.Selected.Identify||e.DrawSelectedStatus&&e.DrawSelectedStatus())}this.Frame.DrawOveralySelectedStatus&&this.Frame.DrawOveralySelectedStatus(this.SelectedChart)}},this.SetCanvas=function(t){if(this.Frame)for(var e=this.Frame.SubFrame,a=0;a<e.length;++a){var i=e[a];i.Frame.Canvas=t;for(var r=0;r<i.OverlayIndex.length;++r){var n=i.OverlayIndex[r];n.Frame.Canvas=t;for(var o=0;o<n.ChartPaint.length;++o){var s=n.ChartPaint[o];s.Canvas=t}}}for(var a=0;a<this.ChartDrawPicture.length;++a){var i=this.ChartDrawPicture[a];i.Canvas=t}for(var a=0;a<this.ChartPaint.length;++a){var i=this.ChartPaint[a];i.Canvas=t}for(var a=0;a<this.ChartPaintEx.length;++a){var i=this.ChartPaintEx[a];i.Canvas=t}for(var a=0;a<this.OverlayChartPaint.length;++a){var i=this.OverlayChartPaint[a];i.Canvas=t}for(var a=0;a<this.ExtendChartPaint.length;++a){var i=this.ExtendChartPaint[a];i.Canvas=t}},this.ClearCanvas=function(t){t&&this.UIElement&&t.clearRect(0,0,this.UIElement.width,this.UIElement.height)},this.Draw=function(){var t=this;if(this.ChartCorssCursor&&(this.ChartCorssCursor.Status=0),!(this.UIElement.width<=0||this.UIElement.height<=0)){this.StopDrawDynamicInfo();var e=this.GetEventCallback(Kn.ON_BEFORE_DRAW);if(e&&e.Callback){var a={};e.Callback(e,a,this)}this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height),this.CacheCanvas&&this.CacheCanvas.clearRect(0,0,this.UIElement.width,this.UIElement.height);var i=C();if(this.Canvas.lineWidth=i,this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash){var r=this.InvokeBeforeDrawSplashScreenCallback();if(r&&!0===r.PreventDefault)return;return this.Frame.ClearCoordinateText(),this.Frame.Draw({IsEnableSplash:this.ChartSplashPaint.IsEnableSplash}),void this.ChartSplashPaint.Draw()}if(this.CacheCanvas&&this.SetCanvas(this.CacheCanvas),this.Frame.SetBeforeDrawXYCallback&&this.Frame.SetBeforeDrawXYCallback(function(e){t.BeforeDrawXYCoordinate(e)}),this.Frame.Draw(),this.Frame.DrawCustomVertical){var n=this.GetEventCallback(Kn.ON_CUSTOM_VERTICAL_DRAW);this.Frame.DrawCustomVertical(n)}this.Frame.CalculateLock();for(var o=0;o<this.ChartDrawPicture.length;++o){var s=this.ChartDrawPicture[o];s.IsDrawMain&&(s.IsDrawMain()&&s.MainDraw())}for(var o=0;o<this.ChartPaint.length;++o){var s=this.ChartPaint[o];s.IsDrawFirst&&s.Draw()}this.Frame.DrawOveraly&&this.Frame.DrawOveraly(!0);for(var o=0;o<this.ChartPaint.length;++o){var s=this.ChartPaint[o];s.IsDrawFirst||s.Draw()}for(var o=0;o<this.ChartPaintEx.length;++o){var s=this.ChartPaintEx[o];s.Draw()}for(var o=0;o<this.OverlayChartPaint.length;++o){var s=this.OverlayChartPaint[o];s.Draw()}this.Frame.DrawOveraly&&this.Frame.DrawOveraly(!1);for(var o=0;o<this.ExtendChartPaint.length;++o){var s=this.ExtendChartPaint[o];s.IsCallbackDraw||(s.DrawAfterPicture||s.IsDynamic||0!=s.IsAnimation||s.Draw())}this.Frame.DrawInsideHorizontal&&this.Frame.DrawInsideHorizontal(),this.KLineIncreaseCustomHorizontal(),this.Frame.DrawCustomHorizontal&&this.Frame.DrawCustomHorizontal(),this.Frame.DrawEx&&this.Frame.DrawEx({Symbol:this.Symbol}),this.ChartInfoPaint&&this.ChartInfoPaint.Draw(),this.Frame.DrawLock(),this.Frame.DrawLogo(),this.CacheCanvas?(this.Canvas.drawImage(this.CacheElement,0,0),this.SetCanvas(this.Canvas)):this.Frame.Snapshot(),this.Frame.DrawToolbar&&this.Frame.DrawToolbar(this.LastMouseStatus),this.DrawSelectedStatus(),this.DrawSelectedBorder(),this.DrawSelectedXBorder&&this.DrawSelectedXBorder();var l=null;this.LastMouseStatus&&this.LastMouseStatus.MoveOnPoint&&(l=this.LastMouseStatus.MoveOnPoint);for(var o=0;o<this.ExtendChartPaint.length;++o){var s=this.ExtendChartPaint[o];s.IsCallbackDraw||(s.DrawAfterPicture||s.IsDynamic&&!1===s.DrawAfterTitle&&(s.Draw(),s.DrawToolbar&&s.DrawToolbar(l)))}for(var o=0;o<this.ChartDrawPicture.length;++o){var s=this.ChartDrawPicture[o];s.IsDrawFirst&&s.Draw()}this.DrawDrawPictureXYCoordinate();var h=!1,u=null;if(null!=this.LastPoint.X||null!=this.LastPoint.Y){if(this.ChartCorssCursor){this.ChartCorssCursor.LastPoint=this.LastPoint,this.ChartCorssCursor.CursorIndex=this.CursorIndex,this.EnableNewIndex&&(this.ChartCorssCursor.CorssCursorIndex=this.CorssCursorIndex,this.ChartCorssCursor.EnableNewIndex=this.EnableNewIndex);var c=!1;this.CorssCursorCanvas&&(this.ChartCorssCursor.Canvas=this.CorssCursorCanvas,this.ChartCorssCursor.Canvas.clearRect(0,0,this.CorssCursorElement.width,this.CorssCursorElement.height),c=!0);this.PtInButton(this.LastPoint.X,this.LastPoint.Y)||(this.DragMode==Jn.CLICK_TOUCH_MODE_ID?1==this.TouchStatus.CorssCursorShow&&this.ChartCorssCursor.Draw():this.EnableClickModel?!0===this.ClickModel.IsShowCorssCursor&&this.ChartCorssCursor.Draw():!0===this.CorssCursorTouchEnd&&this.MouseDrag||1==this.CorssCursorTouchEnd&&0==this.IsOnTouch||this.ChartCorssCursor.Draw()),c&&(this.ChartCorssCursor.Canvas=this.Canvas),h=!0}u=this.Frame.PtInFrame(this.LastPoint.X,this.LastPoint.Y)}var f=this.GetDrawStatus();f.DrawName="Draw";for(var d=this.GetEventCallback(Kn.ON_TITLE_DRAW),D=this.GetEventCallback(Kn.ON_INDEXTITLE_DRAW),o=0;o<this.TitlePaint.length;++o){var s=this.TitlePaint[o];s.IsDynamic&&(s.CursorIndex=this.CursorIndex,s.LastPoint=this.LastPoint,"DynamicChartTitlePainting"==s.ClassName?s.OnDrawEvent=D:s.OnDrawEvent=d,s.OnDrawEvent&&(s.OnDrawEvent.FunctionName="Draw",s.OnDrawEvent.PointPosition=u),s.DrawStatus=f,s.Draw(l,this.LastMouseStatus))}for(var o=0;o<this.ExtendChartPaint.length;++o){var s=this.ExtendChartPaint[o];s.IsCallbackDraw||(s.DrawAfterPicture||s.IsDynamic&&!0===s.DrawAfterTitle&&0==s.IsAnimation&&s.Draw())}if(this.EnableAnimation)for(var o=0;o<this.ExtendChartPaint.length;++o){var s=this.ExtendChartPaint[o];!0===s.IsAnimation&&s.Draw()}for(var o=0;o<this.ChartDrawPicture.length;++o){var s=this.ChartDrawPicture[o];s.IsDrawFirst||(s.IsDrawMain&&s.IsDrawMain()||this.SelectChartDrawPicture&&this.SelectChartDrawPicture.Guid==s.Guid||s.Draw())}this.SelectChartDrawPicture&&this.SelectChartDrawPicture.Draw(),this.CurrentChartDrawPicture&&10!=this.CurrentChartDrawPicture.Status&&this.CurrentChartDrawPicture.Draw();for(var o=0;o<this.ExtendChartPaint.length;++o){var s=this.ExtendChartPaint[o];s.DrawAfterPicture&&s.Draw()}if(this.OffscreenToShowCanvas(),"function"==typeof this.UpdateScrollBar&&this.UpdateScrollBar(),this.LastMouseStatus.MouseOnToolbar){var m=this.LastMouseStatus.MouseOnToolbar.Frame;m&&m.DrawToolbarTooltip&&m.DrawToolbarTooltip(this.LastMouseStatus.MouseOnToolbar)}if(h&&this.DrawTooltipDialog(),this.mapEvent.has(Kn.CHART_STATUS)){var e=this.mapEvent.get(Kn.CHART_STATUS),r={};"function"==typeof this.GetChartStatus&&(r=this.GetChartStatus()),e.Callback(e,r,this)}++this.TouchDrawCount}},this.PtInButton=function(t,e){var a=this.Frame.PtInButtons(t,e);return a?{Name:"FrameButton",Button:a}:(a=this.PtInExtendChartButtons(t,e))?{Name:"ExtendChartButton",Button:a}:(a=this.PtInDrawPictureButtons(t,e))?{Name:"DrawPictureButton",Button:a}:(a=this.PtInTitleButtons(t,e),a?{Name:"TitleButton",Button:a}:null)},this.DrawDrawPictureXYCoordinate=function(){var t=null;this.CurrentChartDrawPicture?t=this.CurrentChartDrawPicture:this.SelectChartDrawPicture&&(t=this.SelectChartDrawPicture);for(var e={Symbol:this.Symbol,Period:this.Period},a=0;a<this.ChartDrawPicture.length;++a){var i=this.ChartDrawPicture[a];i&&(this.IsDrawPictureXY&&t&&(t==i||t.Guid==i.Guid)&&this.Frame.DrawPictureCoordinate(t,e)||i.IsShowYCoordinate&&i.Frame&&i.Frame.DrawPicturePointYCoordinate(i,e))}},this.BeforeDrawXYCoordinate=function(t){for(var e=0;e<this.ExtendChartPaint.length;++e){var a=this.ExtendChartPaint[e];a.IsCallbackDraw&&(["KLineYAxisBGPaint","DepthMapPaint","BackgroundPaint","MinuteBackgroundPaint","SessionBreaksPaint"].includes(a.ClassName)?a.FrameID==t.Identify&&a.Draw():fo.IsCallbackDraw(a.ClassName)&&a.FrameID==t.Identify&&a.Draw())}},this.DrawSelectedBorder=function(){if(this.GlobalOption.SelectedBorder){var t=this.GlobalOption.SelectedBorder;if(we.IsPlusNumber(t.Mode)&&(we.IsNumber(t.SelFrame)||!(t.SelFrame<0))){var e=this.Frame.SubFrame[t.SelFrame];e&&e.Frame.DrawSelectedBorder&&e.Frame.DrawSelectedBorder(t)}}},this.KLineIncreaseCustomHorizontal=function(){if(this.Frame&&this.Frame.SubFrame){var t=this.Frame.SubFrame[0].Frame;if(t){var e=sr(this.Symbol),a=!1;t.YSplitOperator&&1==t.YSplitOperator.CoordinateType&&(a=!0);for(var i=!1,r=0;r<t.CustomHorizontalInfo.length;++r){var n=t.CustomHorizontalInfo[r];if(4==n.Type&&(i=!0),a&&3==n.Type||2==n.Type){var o=this.ChartPaint[0];if(!o)continue;var s=o.Data;if(!s||!we.IsNonEmptyArray(s.Data))continue;if(!we.IsNumber(o.DrawKRange.Start)||!we.IsNumber(o.DrawKRange.End))continue;var l=s.Data[o.DrawKRange.Start],h=s.Data[o.DrawKRange.End],u=(h.Close-l.Close)/l.Close*100;n.Value=h.Close,2==n.Type?(n.Message[1]=h.Close.toFixed(e),h.Close>h.Open?n.LineColor=So.FrameLatestPrice.UpBarColor:h.Close<h.Open?n.LineColor=So.FrameLatestPrice.DownBarColor:n.LineColor=So.FrameLatestPrice.UnchagneBarColor):n.Message[1]=u.toFixed(2)+"%",this.Name&&(n.Title=this.Name)}}if(i){var C=t.CustomHorizontalInfo.filter(function(t,e,a){return 4!=t.Type});t.CustomHorizontalInfo=C}for(var r=0;r<this.OverlayChartPaint.length;++r){var o=this.OverlayChartPaint[r];if(o&&4==o.YInfoType){var s=o.Data;if(s&&we.IsNonEmptyArray(s.Data)&&we.IsNumber(o.DrawKRange.Start)&&we.IsNumber(o.DrawKRange.End)){for(var l=null,c=o.DrawKRange.Start;c<=o.DrawKRange.End;++c){var f=s.Data[c];if(we.IsNumber(f.Close)){l=f;break}}if(l){var h=s.Data[o.DrawKRange.End],u=(h.Close-l.Close)/l.Close*100,n=new F;n.Value=h.Close/o.ShowRange.FirstOverlayOpen*o.ShowRange.FirstOpen,n.Message[1]=u.toFixed(2)+"%",n.LineType=-1,n.Type=o.YInfoType,n.LineColor=o.Color,n.TextColor=So.FrameLatestPrice.OverlayTextColor,o.Title&&(n.Title=o.Title),t.CustomHorizontalInfo.push(n)}}}}}}},this.OffscreenToShowCanvas=function(){this.ShowCanvas&&(this.ShowCanvas.clearRect(0,0,this.UIElement.width,this.UIElement.height),this.ShowCanvas.drawImage(this.OffscreenCanvasElement,0,0))},this.GetDrawStatus=function(){var t={Point:{X:this.LastPoint.X,Y:this.LastPoint.Y},IsOnTouch:this.IsOnTouch,CorssCursorTouchEnd:this.CorssCursorTouchEnd,IsTitleShowLatestData:this.IsTitleShowLatestData,IsMinuteChart:"MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName};return t.FrameID=this.Frame.PtInFrame(this.LastPoint.X,this.LastPoint.Y),t},this.InvokeBeforeDrawSplashScreenCallback=function(){var t=this.GetEventCallback(Kn.ON_BEFORE_DRAW_SPLASH_SCREEN);if(!t||!t.Callback)return null;var e={PreventDefault:!1};return t.Callback(t,e,this),e},this.DrawSplashScreen=function(t){var e=this.InvokeBeforeDrawSplashScreenCallback();if((!e||!0!==e.PreventDefault)&&(null!=this.Frame.ScreenImageData||this.CacheCanvas)){this.Frame.ScreenImageData?this.Canvas.putImageData(this.Frame.ScreenImageData,0,0):this.CacheCanvas&&(this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height),this.Canvas.drawImage(this.CacheElement,0,0));var a=So.SplashScreen.BGColor;if(this.Canvas.fillStyle=a,this.Canvas.fillRect(0,0,this.UIElement.width,this.UIElement.height),this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash){var i=So.SplashScreen.Title;t&&t.Title&&(i=t.Title),this.ChartSplashPaint.SetTitle(i),this.ChartSplashPaint.Draw()}}},this.DrawDynamicInfo=function(t){this.LastMouseStatus.MouseOnToolbar=null;var e=this.GetEventCallback(Kn.ON_BEFORE_DRAW_DYNAMIC_INFO);if(e&&e.Callback){var a={};e.Callback(e,a,this)}if(null!=this.Frame.ScreenImageData||this.CacheCanvas){var i=!1;if(this.ChartCorssCursor&&(null==this.ChartCorssCursor.PointX&&null==this.ChartCorssCursor.PointY||(i=!0)),0==(i=!0))for(var r=0;r<this.ExtendChartPaint.length;++r){var n=this.ExtendChartPaint[r];if(!n.IsCallbackDraw&&(n.IsDynamic&&n.IsEraseBG)){i=!0;break}}i&&(this.Frame.ScreenImageData?this.Canvas.putImageData(this.Frame.ScreenImageData,0,0):this.CacheCanvas&&(this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height),this.Canvas.drawImage(this.CacheElement,0,0))),this.Frame.DrawToolbar&&this.Frame.DrawToolbar(this.LastMouseStatus),this.DrawSelectedStatus(),this.DrawSelectedBorder(),this.DrawSelectedXBorder&&this.DrawSelectedXBorder();var o=null;this.LastMouseStatus&&this.LastMouseStatus.MoveOnPoint&&(o=this.LastMouseStatus.MoveOnPoint);for(var r=0;r<this.ExtendChartPaint.length;++r){var n=this.ExtendChartPaint[r];n.IsCallbackDraw||(n.DrawAfterPicture||n.IsDynamic&&!1===n.DrawAfterTitle&&0==n.IsAnimation&&(n.Draw(),n.DrawToolbar&&n.DrawToolbar(o,this.LastMouseStatus)))}for(var r=0;r<this.ChartDrawPicture.length;++r){var n=this.ChartDrawPicture[r];n.IsDrawFirst&&n.Draw()}this.DrawDrawPictureXYCoordinate();var s=!1;if(this.ChartCorssCursor){this.ChartCorssCursor.LastPoint=this.LastPoint,this.ChartCorssCursor.CursorIndex=this.CursorIndex,this.EnableNewIndex&&(this.ChartCorssCursor.CorssCursorIndex=this.CorssCursorIndex,this.ChartCorssCursor.EnableNewIndex=this.EnableNewIndex);var l=!1;this.CorssCursorCanvas&&(this.ChartCorssCursor.Canvas=this.CorssCursorCanvas,this.ChartCorssCursor.Canvas.clearRect(0,0,this.CorssCursorElement.width,this.CorssCursorElement.height),l=!0),t&&0==t.Corss||(this.DragMode==Jn.CLICK_TOUCH_MODE_ID?1==this.TouchStatus.CorssCursorShow&&this.ChartCorssCursor.Draw():!1===this.IsOnTouch&&this.CurrentChartDrawPicture&&!0===this.CurrentChartDrawPicture.IsShowCorssCursor?this.ChartCorssCursor.Draw():!1===this.IsOnTouch&&!0===this.CorssCursorTouchEnd||this.CurrentChartDrawPicture?!0===this.IsOnTouch&&this.CurrentChartDrawPicture&&this.EnableShowCorssCursor&&1==this.EnableShowCorssCursor.DrawPicture&&this.ChartCorssCursor.Draw():this.ChartCorssCursor.Draw()),l&&(this.ChartCorssCursor.Canvas=this.Canvas),s=!0}var h=null;t&&t.Point&&("OnMouseMove"==t.ParentFunction||"MoveCorssCursorIndex"==t.ParentFunction)&&(h=this.Frame.PtInFrame(t.Point.X,t.Point.Y));var u=this.GetDrawStatus();u.DrawName="DrawDynamicInfo";for(var r=0;r<this.TitlePaint.length;++r){var n=this.TitlePaint[r];if(n.IsDynamic){n.CursorIndex=this.CursorIndex,n.LastPoint=this.LastPoint,n.OnDrawEvent&&(n.OnDrawEvent.FunctionName="DrawDynamicInfo",n.OnDrawEvent.PointPosition=h),n.DrawStatus=u;var C=null;t&&we.IsNumber(t.ClientPos)&&t.Point&&(C={ClientPos:t.ClientPos,Point:{X:t.Point.X,Y:t.Point.Y}}),n.PointInfo=C,n.Draw(o,this.LastMouseStatus)}}for(var r=0;r<this.ExtendChartPaint.length;++r){var n=this.ExtendChartPaint[r];if(!n.IsCallbackDraw&&!n.DrawAfterPicture){if("KLineTooltipPaint"==n.ClassName&&t){if(0==t.Tooltip)continue;t.Point&&(n.LatestPoint=t.Point)}else"MinuteTooltipPaint"==n.ClassName&&t&&t.Point&&(n.LatestPoint=t.Point);n.IsDynamic&&!0===n.DrawAfterTitle&&n.Draw(o,this.LastMouseStatus)}}if(this.EnableAnimation)for(var r=0;r<this.ExtendChartPaint.length;++r){var n=this.ExtendChartPaint[r];!0===n.IsAnimation&&n.Draw()}for(var r=0;r<this.ChartDrawPicture.length;++r){var n=this.ChartDrawPicture[r];n.IsDrawFirst||(n.IsDrawMain&&n.IsDrawMain()||this.SelectChartDrawPicture&&n.Guid==this.SelectChartDrawPicture.Guid||n.Draw(o,this.LastMouseStatus))}this.SelectChartDrawPicture&&this.SelectChartDrawPicture.Draw(o,this.LastMouseStatus),this.CurrentChartDrawPicture&&10!=this.CurrentChartDrawPicture.Status&&this.CurrentChartDrawPicture.Draw();for(var r=0;r<this.ExtendChartPaint.length;++r){var n=this.ExtendChartPaint[r];n.DrawAfterPicture&&n.Draw()}if(this.LastMouseStatus.MouseOnToolbar){var c=this.LastMouseStatus.MouseOnToolbar.Frame;c&&c.DrawToolbarTooltip&&c.DrawToolbarTooltip(this.LastMouseStatus.MouseOnToolbar)}this.OffscreenToShowCanvas(),s&&this.DrawTooltipDialog(),++this.TouchDrawCount}},this.DrawAnimation=function(){if(this.EnableAnimation){if(this.Frame.ScreenImageData&&!this.IsOnTouch){for(var t=0;t<this.ExtendChartPaint.length;++t){var e=this.ExtendChartPaint[t];!0===e.IsAnimation&&(e.IsMoveStep=!0)}this.DrawDynamicInfo()}var a=this;window.requestAnimationFrame(function(){a.DrawAnimation()})}},this.StartAnimation=function(t){for(var e=!1,a=null,i=0;i<this.ExtendChartPaint.length;++i){var r=this.ExtendChartPaint[i];if("BarragePaint"===r.ClassName){e=!0,a=r.BarrageList;break}}if(!e){var n=new Ee;n.Canvas=this.Canvas,n.ChartBorder=this.Frame.ChartBorder,n.ChartFrame=this.Frame,n.HQChart=this,n.SetOption(t),this.ExtendChartPaint.push(n),a=n.BarrageList}this.EnableAnimation=!0;var o=this;return window.requestAnimationFrame(function(){o.DrawAnimation()}),a},this.StopAnimation=function(){this.EnableAnimation=!1,this.DrawDynamicInfo()},this.GetChartTooltipData=function(t,e,a){var i=new et;if(this.ChartInfoPaint&&this.ChartInfoPaint.GetTooltipData(t,e,i))return i;if(this.PtInChartPaintTooltip(t,e,i))return i;if(we.IsNonEmptyArray(this.Frame.SubFrame))for(var r=0;r<this.Frame.SubFrame.length;++r)for(var n=this.Frame.SubFrame[r],o=0;o<n.OverlayIndex.length;++o)for(var s=n.OverlayIndex[o],l=0;l<s.ChartPaint.length;++l){var h=s.ChartPaint[l];if(h.GetTooltipData(t,e,i))return i}return this.PtInOverlayChartPaintTooltip(t,e,i)?i:this.PtInExtendChartPaintTooltip(t,e,i)?i:null},this.PtInExtendChartButtons=function(t,e){for(var a=0;a<this.ExtendChartPaint.length;++a){var i=this.ExtendChartPaint[a];if(i.PtInButtons){var r=i.PtInButtons(t,e);if(r)return r.Chart=i,r}}return null},this.ClickExtendChartButton=function(t,e){var a=this.GetEventCallback(Kn.ON_CLICK_EXTENDCHART_BUTTON);if(a&&a.Callback){var i={Info:t,PreventDefault:!1};if(a.Callback(a,i,this),i.PreventDefault)return}},this.PtInDrawPictureButtons=function(t,e){for(var a=0;a<this.ChartDrawPicture.length;++a){var i=this.ChartDrawPicture[a];if(i.PtInButtons){var r=i.PtInButtons(t,e);if(r)return r.Chart=i,r}}return null},this.ClickDrawPictureButton=function(t,e){var a=this.GetEventCallback(Kn.ON_CLICK_DRAWPICTURE_BUTTON);if(a&&a.Callback){var i={Info:t,PreventDefault:!1};if(a.Callback(a,i,this),i.PreventDefault)return}t.ID==qn.DRAW_PICTURE_DELETE?(Xn.Chart.Log(t,"ClickDrawPictureButton"),this.ClearChartDrawPicture(t.Chart)):(t.ID,qn.DRAW_PICTURE_SETTING)},this.PtInTitleButtons=function(t,e){for(var a=0;a<this.TitlePaint.length;++a){var i=this.TitlePaint[a];if(i.PtInButtons){var r=i.PtInButtons(t,e);if(r)return r.Chart=i,r}}return null},this.OnMouseMove=function(t,e,a,i){var r=this;this.StopDrawDynamicInfo(),this.LastPoint.X=t,this.LastPoint.Y=e;var n=null,o=null,s=this.Frame.PtInFrame(t,e);if(we.IsNumber(s)&&s>=0&&(this.CursorIndex=this.Frame.GetXData(t)),this.EnableBorderDrag&&this.Frame&&!this.CurrentChartDrawPicture){var l=this.Frame.PtInFrameBorder(t,e);l&&l.Index>=0&&(n={Cursor:"n-resize",Name:"DragBorder"},Xn.Chart.Log("[JSChartContainer::OnMouseMove] drag border ",l))}if(this.EnableYDrag&&this.Frame&&!this.CurrentChartDrawPicture){var h=this.TryYDrag(t,e);h&&(n={Cursor:0==h.Position?"n-resize":"row-resize",Name:"DragY"},Xn.Chart.Log("[JSChartContainer::OnMouseMove] drag y ",h))}if(this.CurrentChartDrawPicture||(o=this.PtInButton(t,e))&&(n={Cursor:"pointer",Name:o.Name},Xn.Chart.Log("[JSChartContainer::OnMouseMove] frame button ",o)),this.ChartCorssCursor){var u=this.ChartCorssCursor.PtInButton(t,e);u&&(n={Cursor:"pointer",Name:"CorssCursorButton"},Xn.Chart.Log("[JSChartContainer::OnMouseMove] cross cursor button ",u))}if("KLineChartContainer"==this.ClassName&&this.Frame.PtInFrameBottom(t,e)&&(n={Cursor:"ew-resize",Name:"FrameButtom"},Xn.Chart.Log("[JSChartContainer::OnMouseMove] frame bottom ")),this.Frame.PtInHorizontalLabel&&this.Frame.PtInHorizontalLabel(t,e)&&(n={Cursor:"pointer",Name:"HorizontalLabel"},Xn.Chart.Log("[JSChartContainer::OnMouseMove] frame Horizontal Label ")),this.SelectedChart.EnableMoveOn&&this.PtInChart&&!this.CurrentChartDrawPicture){var C=this.PtInChart(t,e);C&&C.Identify?(n={Cursor:"pointer",Name:"PtInChart"},this.SelectedChart.MoveOn.Identify=C.Identify,this.SelectedChart.MoveOn.Identify=null,Xn.Chart.Log("[JSChartContainer::OnMouseMove] Point in chart ",C)):this.SelectedChart.MoveOn.Identify=null}else this.SelectedChart.MoveOn.Identify=null;var c=this.GetRectSelectPaint();if(c&&c.GetPointCount()>0){var f=c.PtInPaint(t,e);f&&(n=4==f.Type?{Cursor:"pointer",Name:"DragRectSelect"}:{Cursor:"ew-resize",Name:"DragRectSelect"},Xn.Chart.Log("[JSChartContainer::OnMouseMove] drag rect select ",f))}var d={MouseStatus:null,X:t,Y:e,FrameID:s,e:a};this.TryMouseMove_CustomChartDrag(d)&&d.MouseStatus&&(n=d.MouseStatus);var D=!1;if(this.CurrentChartDrawPicture){var m=this.Frame.PtInChartFrame(t,e);if(20!=this.CurrentChartDrawPicture.Status){var p=!1;we.IsNumber(this.CurrentChartDrawPicture.LimitFrameID)?m>=0&&m==this.CurrentChartDrawPicture.LimitFrameID&&(p=!0):m>=0&&(p=!0),n={Cursor:p?"crosshair":"not-allowed",Name:"CurrentChartDrawPicture"}}this.CurrentChartDrawPicture.SetLastPoint&&this.CurrentChartDrawPicture.SetLastPoint({X:t,Y:e}),D=!0}else{var v={};v.X=t,v.Y=e,this.GetChartDrawPictureByPoint(v)&&v.ChartDrawPicture?(this.EnableEraseChartDrawPicture?this.SetCursor({Cursor:"grabbing"}):1==v.ChartDrawPicture.EnableMove&&(100===v.PointIndex?v.Cursor?this.SetCursor(v):this.SetCursor({Cursor:"move"}):v.Cursor?this.SetCursor(v):this.SetCursor({Cursor:"pointer"}),D=!0),this.MoveOnChartDrawPicture=v.ChartDrawPicture):this.MouseDrag||this.SetCursor({Cursor:"default"})}var g=this.PtInClient(t,e),T={ParentFunction:"OnMouseMove",Point:{X:t,Y:e},IsPhone:!0===i,ClientPos:g};if((a&&("mouseout"==a.type||"mouseleave"==a.type)||o)&&(T.Corss=!1),this.SetCorssCursorIndex&&this.SetCorssCursorIndex(T),this.DrawDynamicInfoOption.Enable?this.DrawDynamicInfoOption.Timer=setTimeout(function(){r.DrawDynamicInfo(T)},this.DrawDynamicInfoOption.DelayTime):this.DrawDynamicInfo(T),this.SetCursor(n),this.IsShowTooltip&&0==D){var I=this.GetChartTooltipData(t,e);if(I&&I.Data){if(!0===i)var S=a.touches[0],x=S.clientX-this.UIElement.getBoundingClientRect().left,b=S.clientY-this.UIElement.getBoundingClientRect().top;else var x=a.clientX-this.UIElement.getBoundingClientRect().left,b=a.clientY-this.UIElement.getBoundingClientRect().top;this.ShowTooltip(x,b,I)}else this.HideTooltip()}},this.SetCursor=function(t){t&&t.Cursor&&("default"==t.Cursor?this.UIElement.style.cursor=this.DefaultCursor:this.UIElement.style.cursor=t.Cursor)},this.OnKeyDown=function(t){var e=this;if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var a=this.GetEventCallback(Kn.ON_KEYDOWN);if(a&&a.Callback){var i={e:t,PreventDefault:!1};if(a.Callback(a,i,this),i.PreventDefault)return}var r=t.keyCode?t.keyCode:t.which,n=!1;if(this.ChartCorssCursor&&this.ChartCorssCursor.OnKeyDown){var i={e:t,KeyID:r,Draw:!1,PreventDefault:!1};this.ChartCorssCursor.OnKeyDown(i),n=i.Draw}switch(r){case 37:if(t.ctrlKey&&this.OnCustomKeyDown&&this.OnCustomKeyDown(r,t))break;if(this.CursorIndex<=.99999){if(!this.DataMoveLeft()){this.DragDownloadData&&this.DragDownloadData();break}this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.ResetFrameXSplit(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("keydown")}else--this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo(),this.ShowTooltipByKeyDown();break;case 39:if(t.ctrlKey&&this.OnCustomKeyDown&&this.OnCustomKeyDown(r,t))break;var o=0;if(o=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,this.CursorIndex+1>=o){if(!this.DataMoveRight())break;this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.ResetFrameXSplit(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("keydown")}else{var s=null;if(!(s=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data))break;if(this.CursorIndex+s.DataOffset+1>=s.Data.length)break;++this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo(),this.ShowTooltipByKeyDown()}break;case 38:if(this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Keyboard)break;var l={ZoomType:this.ZoomType,IsLockRight:this.IsZoomLockRight};if(l.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomUp(l))break;this.CursorIndex=l.Index,this.UpdatePointByCursorIndex(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.ResetFrameXSplit(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("keydown");break;case 40:if(this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Keyboard)break;var l={ZoomType:this.ZoomType,IsLockRight:this.IsZoomLockRight};if(l.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomDown(l,{ZoomDownloadDataCallback:function(t){e.ZoomDownloadData(t)}}))break;this.CursorIndex=l.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.ResetFrameXSplit(),this.ChartSplashPaint&&1==this.ChartSplashPaint.IsEnableSplash||this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("keydown");break;case 46:if(this.SelectChartDrawPicture){var h=this.SelectChartDrawPicture;Xn.Chart.Log("[JSChartContainer::OnKeyDown] delete draw picture."),this.SelectChartDrawPicture=null,this.ChartPictureMenu&&this.ChartPictureMenu.Hide(),this.ClearChartDrawPicture(h),this.CloseModifyDrawDialog()}else if(this.SelectedChart&&this.SelectedChart.Selected.Identify){var u=this.GetSelectedChartInfo(this.SelectedChart.Selected);u&&(u.Type==Do.OVERLAY_INDEX?this.DeleteOverlayWindowsIndex(u.IndexID):u.Type==Do.OVERLAY_KLINE&&this.DeleteOverlaySymbol(u.Symbol))}break;case 32:this.OnMarkRectSelect(t);break;case 27:if(this.CurrentChartDrawPicture){var h=this.CurrentChartDrawPicture;20!=h.Status&&(this.CurrentChartDrawPicture=null)}break;default:return}n&&this.DrawDynamicInfo(),t.preventDefault?t.preventDefault():t.returnValue=!1}},this.OnDoubleClick=function(t,e,a){},this.ZoomIndexWindow=function(t,e){return!(t<0||t>=this.Frame.SubFrame.length)&&this.Frame.ZoomIndexWindow(t,e)},this.ShowIndexTitleOnly=function(t,e){return!(t<0||t>=this.Frame.SubFrame.length)&&this.Frame.ShowIndexTitleOnly(t,e)},this.RemoveMinSizeWindows=function(){if(this.Frame.ZoomWindowsInfo){for(var t=[],e=[],a=0;a<this.Frame.SubFrame.length;++a){var i=this.Frame.SubFrame[a];i.Frame.ClearToolbar(),i.Frame.IsMinSize?t.push(a):e.push(a)}if(this.Frame.ZoomWindowsInfo=null,!(t.length<=0)){for(var a=0;a<t.length;++a)this.DeleteIndexPaint(t[a]);for(var r=[],n=[],o=[this.TitlePaint[0]],a=0;a<e.length;++a){var s=e[a];r[a]=this.Frame.SubFrame[s],n[a]=this.WindowIndex[s],o[a+1]=this.TitlePaint[s+1]}this.Frame.SubFrame=r,this.WindowIndex=n,this.TitlePaint=o;for(var a=0;a<this.Frame.SubFrame.length;++a){var i=this.Frame.SubFrame[a].Frame;a==this.Frame.SubFrame.length-1?i.XSplitOperator.ShowText=!0:i.XSplitOperator.ShowText=!1,i.Identify=a}if(we.IsNonEmptyArray(this.ChartDrawPicture)){for(var l=[],a=0;a<this.ChartDrawPicture.length;++a)for(var i=this.ChartDrawPicture[a],h=0;h<this.Frame.SubFrame.length;++h)if(i.Frame==this.Frame.SubFrame[h].Frame){l.push(i);break}this.ChartDrawPicture=l}}}},this.PtInClient=function(t,e){if(this.Canvas.beginPath(),!0===this.Frame.IsHScreen){var a=this.Frame.ChartBorder.GetHScreenBorder();if(a.DayBorder){for(var i=a.Right-a.Left,r=0;r<a.DayBorder.length;++r){var n=a.DayBorder[r];if(this.Canvas.beginPath(),this.Canvas.rect(a.Left,n.TopEx,i,n.BottomEx-n.TopEx),this.Canvas.isPointInPath(t,e))return 1;if(this.Canvas.beginPath(),this.Canvas.rect(a.Left,n.Top,i,n.TopEx-n.Top),this.Canvas.isPointInPath(t,e))return 200+parseInt(r);if(this.Canvas.beginPath(),this.Canvas.rect(a.Left,n.BottomEx,i,n.Bottom-n.BottomEx),this.Canvas.isPointInPath(t,e))return 300+parseInt(r)}return-1}this.Canvas.rect(a.Left,a.TopEx,a.Right-a.Left,a.BottomEx-a.TopEx)}else{var a=this.Frame.ChartBorder.GetBorder();if(a.DayBorder){for(var r=0;r<a.DayBorder.length;++r){var n=a.DayBorder[r];if(this.Canvas.beginPath(),this.Canvas.rect(n.Left,a.TopEx,n.LeftEx-n.Left,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 200+parseInt(r);if(this.Canvas.beginPath(),this.Canvas.rect(n.LeftEx,a.TopEx,n.RightEx-n.LeftEx,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 1;if(this.Canvas.beginPath(),this.Canvas.rect(n.RightEx,a.TopEx,n.Right-n.RightEx,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 300+parseInt(r)}return-1}this.Canvas.rect(a.LeftEx,a.Top,a.RightEx-a.LeftEx,a.Bottom-a.Top)}return this.Canvas.isPointInPath(t,e)?1:this.Frame.ChartBorder.LeftExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.Top,a.Right-a.Left,a.TopEx-a.Top):this.Canvas.rect(a.Left,a.Top,a.LeftEx-a.Left,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?2:this.Frame.ChartBorder.RightExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.BottomEx,a.Right-a.Left,a.Bottom-a.BottomEx):this.Canvas.rect(a.RightEx,a.Top,a.Right-a.RightEx,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?3:-1},this.OnMoveFromeBorder=function(t,e){this.Frame&&this.Frame.OnMoveFromeBorder(t,e)&&(this.Frame.SetFrameBorderSizeChange(),this.Frame.ReDrawToolbar(),this.Draw())},this.OnZoomUpDownFrameY=function(t,e){this.Frame&&this.Frame.OnZoomUpDownFrameY(t,e)&&(this.Frame.SetSizeChage(!0),this.Draw())},this.OnUpDonwFrameY=function(t,e){return!!this.Frame&&(!!this.Frame.OnUpDonwFrameY(t,e)&&(this.Frame.SetSizeChage(!0),!0))},this.CancelZoomUpDownFrameY=function(t){this.Frame&&this.Frame.CancelZoomUpDownFrameY(t)&&(this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw())},this.IsKLineContainer=function(){return"KLineChartContainer"==this.ClassName||"KLineChartHScreenContainer"==this.ClassName||"KLineTrainChartContainer"==this.ClassName||"CustomKLineChartContainer"==this.ClassName},this.IsMinuteContainer=function(){return"MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName},this.UpdatePointByCursorIndex=function(t){var e={X:null,Y:null};e.X=this.Frame.GetXFromIndex(this.CursorIndex);var a=Math.abs(this.CursorIndex-.5);this.IsKLineContainer()&&(a=this.CursorIndex);var i=this.Frame.Data;if(i.DataOffset+a<i.Data.length){var r=i.Data[i.DataOffset+a].Close;e.Y=this.Frame.GetYFromData(r)}if(1==t&&this.ChartCorssCursor)if(1==this.ChartCorssCursor.Status);else{this.LastPoint.X=this.Frame.GetXFromIndex(this.CursorIndex);var a=Math.abs(this.CursorIndex-.5);a=parseInt(a.toFixed(0)),this.IsKLineContainer()&&(a=this.CursorIndex),this.LastPoint.Y=null}else 2==t&&this.ChartCorssCursor?(this.LastPoint.Y=null,this.LastPoint.X=null):(this.LastPoint.X=e.X,this.LastPoint.Y=e.Y)},this.ShowTooltipByKeyDown=function(){if(this.KLineTooltipConfig.Enable&&this.KLineTooltipConfig.EnableKeyDown){var t=Math.abs(this.CursorIndex-.5);t=parseInt(t.toFixed(0)),"KLineChartContainer"!=this.ClassName&&"KLineTrainChartContainer"!=this.ClassName||(t=this.CursorIndex);var e=this.Frame.Data,a=new et;a.Data=e.Data[e.DataOffset+t],a.ChartPaint=this.ChartPaint[0];var i=C();0===i&&(i=1),this.ShowTooltip(this.LastPoint.X/i,this.LastPoint.Y/i,a)}},this.DrawTooltipDialog=function(){},this.DrawFloatTooltip=function(t,e){this.FloatTooltip&&this.UpdateFloatTooltip(t,e)},this.UpdateFloatTooltip=function(t,e){if(this.FloatTooltip){var a={Tooltip:e,Point:t,Symbol:this.Symbol,Name:this.Name,DataType:1};this.FloatTooltip.Update(a)}},this.UpdateHQFloatTooltip=function(t){},this.ShowTooltip=function(t,e,a){var i=this;if(this.IsShowTooltip){var r=C(),n=15/r;this.TooltipCache.Type=a.Type,this.TooltipCache.Data=null,this.TooltipCache.X=t,this.TooltipCache.Y=e;var o=!0;if(0===a.Type){if(!this.KLineTooltipConfig.Enable)return;if(this.FloatTooltip)return this.DrawFloatTooltip({X:t,Y:e,YMove:20/r},a),void(o=!1);var s=(m(),t),l=e,h=go.Create("HistoryDataStringFormat");if(h.Value=a,h.Symbol=this.Symbol,h.LanguageID=this.LanguageID,h.GetEventCallback=function(t){return i.GetEventCallback(t)},!h.Operator())return;var u=25*h.LineCount;h.Height>0&&(u=h.Height);var c=h.Width;this.Tooltip.style.width=c+"px",this.Tooltip.style.height=u+"px",this.Tooltip.style.position="absolute",s+c>this.UIElement.getBoundingClientRect().width?this.Tooltip.style.left=s-c+"px":this.Tooltip.style.left=s+"px",l+n+u>this.UIElement.getBoundingClientRect().height-5?this.Tooltip.style.top=l-u+"px":this.Tooltip.style.top=l+n+"px",this.Tooltip.className="jschart-tooltip",this.Tooltip.innerHTML=h.Text,this.Tooltip.style.display="block",this.TooltipCache.IsShow=!0,this.TooltipCache.Data={Date:a.Data.Date,Time:a.Data.Time},this.TooltipCache.InnerHTML=h.Text}else if(1===a.Type){if(this.FloatTooltip)return this.DrawFloatTooltip({X:t,Y:e,YMove:20/r},a),void(o=!1);var s=(m(),t),l=e,h=go.Create("KLineInfoDataStringFormat");if(h.Value=a,h.Symbol=this.Symbol,h.LanguageID=this.LanguageID,!h.Operator())return;var c=h.Width;this.Tooltip.className="jchart-klineinfo-tooltip",this.Tooltip.style.position="absolute",s+c>this.UIElement.getBoundingClientRect().width?this.Tooltip.style.left=s-c+"px":this.Tooltip.style.left=s+"px",this.Tooltip.style.top=l+n+"px",this.Tooltip.style.width=c+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=h.Text,this.Tooltip.style.display="block"}else if(2==a.Type){if(this.FloatTooltip)return this.DrawFloatTooltip({X:t,Y:e,YMove:20/r},a),void(o=!1);var s=t,l=e,h=go.Create("KLineTradeDataStringFormat");if(h.Value=a,h.Symbol=this.Symbol,h.LanguageID=this.LanguageID,!h.Operator())return;var c=h.Width;this.Tooltip.className="jchart-klinetrade-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=s+"px",this.Tooltip.style.top=l+n+"px",this.Tooltip.style.width=c+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=h.Text,this.Tooltip.style.display="block"}else if(3==a.Type){if(this.FloatTooltip)return this.DrawFloatTooltip({X:t,Y:e,YMove:20/r},a),void(o=!1);var s=t,l=e,h=go.Create("MinuteInfoDataStringFormat");if(h.Value=a,h.Symbol=this.Symbol,h.LanguageID=this.LanguageID,!h.Operator())return;var c=h.Width;this.Tooltip.className="jchart-minuteinfo-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=s+"px",this.Tooltip.style.top=l+n+"px",this.Tooltip.style.width=c+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=h.Text,this.Tooltip.style.display="block"}else if(4==a.Type){if(this.FloatTooltip)return this.DrawFloatTooltip({X:t,Y:e,YMove:20/r},a),void(o=!1);var s=t,l=e,h=go.Create("IconDataStringFormat");if(h.Value=a,h.Symbol=this.Symbol,h.LanguageID=this.LanguageID,!h.Operator())return;var c=h.Width;this.Tooltip.className="jchart-iconinfo-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=s+"px",this.Tooltip.style.top=l+n+"px",this.Tooltip.style.width=c+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=h.Text,this.Tooltip.style.display="block"}else if(5==a.Type){if(this.FloatTooltip)return this.DrawFloatTooltip({X:t,Y:e,YMove:20/r},a),void(o=!1);var s=t,l=e,h=go.Create("ChartOXDataStringFormat");if(h.Value=a,h.Symbol=this.Symbol,h.Period=this.Period,h.LanguageID=this.LanguageID,!h.Operator())return;var c=h.Width;this.Tooltip.className="jchart-chartox-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=s+"px",this.Tooltip.style.top=l+n+"px",this.Tooltip.style.width=c+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=h.Text,this.Tooltip.style.display="block"}else if(6==a.Type){if(this.FloatTooltip)return this.DrawFloatTooltip({X:t,Y:e,YMove:20/r},a),void(o=!1);var s=t,l=e,h=go.Create("ScatterPlotDataStringFormat");if(h.Value=a,h.Symbol=this.Symbol,h.Period=this.Period,h.LanguageID=this.LanguageID,!h.Operator())return;var c=h.Width;this.Tooltip.className="jchart-charscatterplot-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=s+"px",this.Tooltip.style.top=l+n+"px",this.Tooltip.style.width=c+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=h.Text,this.Tooltip.style.display="block"}else if(7==a.Type){if(this.FloatTooltip)return this.DrawFloatTooltip({X:t,Y:e,YMove:20/r},a),void(o=!1);var s=t,l=e,h=go.Create("ChartDrawSVGDataStringFormat");if(h.Value=a,h.Symbol=this.Symbol,h.Period=this.Period,h.LanguageID=this.LanguageID,!h.Operator())return;var c=h.Width;this.Tooltip.className="jchart-chartdrawsvg-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=s+"px",this.Tooltip.style.top=l+n+"px",this.Tooltip.style.width=c+"px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=h.Text,this.Tooltip.style.display="block"}else if(8==a.Type&&this.FloatTooltip)return this.DrawFloatTooltip({X:t,Y:e,YMove:20/r},a),void(o=!1);o&&this.HideFloatTooltip()}},this.UpdateDOMTooltip=function(t,e){var a=this;if(this.TooltipCache.IsShow&&this.TooltipCache.Type==t&&this.TooltipCache.Data&&0===this.TooltipCache.Type){if(!e||!we.IsNonEmptyArray(e.Data))return;var i=e.Data[e.Data.length-1];if(i.Date!=this.TooltipCache.Data.Date)return;if(we.IsNumber(i.Time)&&i.Time!=this.TooltipCache.Data.Time)return;var r=this.ChartPaint[0],n=go.Create("HistoryDataStringFormat");if(n.Value={Data:i,ChartPaint:r,Type:this.TooltipCache.Type},n.Symbol=this.Symbol,n.LanguageID=this.LanguageID,n.GetEventCallback=function(t){return a.GetEventCallback(t)},!n.Operator())return;if(n.Text==this.TooltipCache.InnerHTML)return;this.Tooltip.innerHTML=n.Text,this.TooltipCache.InnerHTML=n.Text}},this.HideTooltip=function(){this.TooltipCache.IsShow=!1,this.TooltipCache.Type=null,this.TooltipCache.InnerHTML=null,this.TooltipCache.Data=null,"none"!=this.Tooltip.style.display&&(this.Tooltip.style.display="none"),this.HideFloatTooltip()},this.UpdateSelectRect=function(t,e){if(this.ChartPaint[0].Data){var a=this.GetRectSelectPaint();if(a){var i=this.ChartPaint[0].Data,r=i.Data.length;e>=r&&(e=r-1);var n=i.Data[t],o=i.Data[e];Xn.Chart.Log("[JSChartContainer::UpdateSelectRect]",n,o),a.SetPoint(n,{Index:0,DataIndex:t}),a.SetPoint(o,{Index:1,DataIndex:e}),this.Draw()}}},this.HideSelectRect=function(){this.ClearDragSelectRect()},this.ResetFrameXYSplit=function(){"function"==typeof this.Frame.ResetXYSplit&&this.Frame.ResetXYSplit()},this.ResetFrameXSplit=function(){"function"==typeof this.Frame.ResetXSplit&&this.Frame.ResetXSplit()},this.ResetFrameYCustomSplit=function(t){"function"==typeof this.Frame.ResetYCustomSplit&&this.Frame.ResetYCustomSplit(t)},this.UpdateFrameMaxMinV2=function(){for(var t=new Vn.default,e=0;e<this.Frame.SubFrame.length;++e){var a=this.Frame.SubFrame[e];if(a&&a.Frame){var i=a.Frame;i.YCustomSplit=!0;for(var r=i.Identify,n={ID:r,Frame:i,ChartPaint:[],Max:null,Min:null,OverlayFrame:[],SingleOverlay:[],MainOverlayFrame:[null,null]},o=0;o<a.OverlayIndex.length;++o){var s=a.OverlayIndex[o],l=s.Frame;if(1===l.IsShowMainFrame?n.MainOverlayFrame[0]=l:2===l.IsShowMainFrame&&(n.MainOverlayFrame[1]=l),l.IsShareY){if(!l.MainFrame)continue;if(!1===l.IsCalculateYMaxMin)continue;n.OverlayFrame.push(l);for(var h=0;h<s.ChartPaint.length;++h){var u=s.ChartPaint[h];n.ChartPaint.push(u)}}else n.SingleOverlay.push(s)}t.set(r,n)}}for(var e=0;e<this.ChartPaint.length;++e){var u=this.ChartPaint[e],r=u.ChartFrame.Identify;if(t.has(r)){var C=t.get(r);C.ChartPaint.push(u)}}for(var e=0;e<this.OverlayChartPaint.length;++e){var u=this.OverlayChartPaint[e];if(u.ChartFrame){var r=u.ChartFrame.Identify;if(t.has(r)){var C=t.get(r);C.ChartPaint.push(u)}}}var c=!0,f=!1,d=void 0;try{for(var D,m=(0,Gn.default)(t);!(c=(D=m.next()).done);c=!0){for(var p=D.value,n=p[1],i=n.Frame,e=0;e<n.ChartPaint.length;++e){var u=n.ChartPaint[e];if(0!=u.IsShow&&(!u.NotSupportMessage&&u.ChartFrame&&!0!==u.IsExcludeYValue)){var v=u.GetMaxMin();null!=v&&null!=v.Max&&null!=v.Min&&((null==n.Max||n.Max<v.Max)&&(n.Max=v.Max),(null==n.Min||n.Min>v.Min)&&(n.Min=v.Min))}}if(n.Frame.YSpecificMaxMin&&(n.Min=n.Frame.YSpecificMaxMin.Max,n.Max=n.Frame.YSpecificMaxMin.Min),we.IsNumber(i.YMaxMin.Max)&&i.YMaxMin.Max==n.Max||(i.YMaxMin.Max=n.Max,i.XYSplit=!0),we.IsNumber(i.YMaxMin.Min)&&i.YMaxMin.Min==n.Min||(i.YMaxMin.Min=n.Min,i.XYSplit=!0),i.XYSplit){var g=10,T=0;null!=n.Max&&(g=n.Max),null!=n.Min&&(T=n.Min),i.HorizontalMax=g,i.HorizontalMin=T}else i.XSplit=!0;for(var o=0;o<n.OverlayFrame.length;++o)n.OverlayFrame[o].XYSplit=!0;for(var e=0;e<n.MainOverlayFrame.length;++e){var a=n.MainOverlayFrame[e];a&&(a.XYSplit=!0)}for(var e=0;e<n.SingleOverlay.length;++e){var s=n.SingleOverlay[e];s.UpdateFrameMaxMin()}}}catch(t){f=!0,d=t}finally{try{!c&&m.return&&m.return()}finally{if(f)throw d}}},this.UpdateFrameMaxMin=function(){return void this.UpdateFrameMaxMinV2()},this.DataMoveLeft=function(){var t=null;return!!(t=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data)&&(!(t.DataOffset<=0)&&(--t.DataOffset,!0))},this.DataMoveRight=function(){var t=null;if(!(t=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data))return!1;var e=0;return!!(e=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount)&&(!(e+t.DataOffset>=t.Data.length)&&(++t.DataOffset,!0))},this.UpdataDataoffset=function(){var t=null;if(t=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data){for(var e in this.ChartPaint){var a=this.ChartPaint[e];a.Data&&(a.Data.DataOffset=t.DataOffset)}for(var e in this.OverlayChartPaint){var a=this.OverlayChartPaint[e];a.Data&&(a.Data.DataOffset=t.DataOffset)}for(var e in this.Frame.SubFrame){var i=this.Frame.SubFrame[e];for(var r in i.OverlayIndex){var n=i.OverlayIndex[r];for(var o in n.ChartPaint){var a=n.ChartPaint[o];a.Data&&(a.Data.DataOffset=t.DataOffset)}}}}},this.GetMoveOneStepWidth=function(){if(we.IsPlusNumber(this.StepPixel))return this.StepPixel;var t=C(),e=this.Frame.SubFrame[0].Frame,a=e.DataWidth,i=e.DistanceWidth,r=this.StepPixel,r=(a+i)/t;return r<1&&(r=1),r},this.DataMove=function(t,e){var a=this.GetMoveOneStepWidth(),i=t;if((t=parseInt(t/a))<=0)return!1;var r=null;if(!(r=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data))return!1;var n=0;if(!(n=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount))return!1;if(this.Frame.SubFrame&&this.Frame.SubFrame.length>0&&this.Frame.SubFrame[0].Frame){var o=this.Frame.SubFrame[0].Frame;(o.DataWidth<=1||o.DistanceWidth<=1)&&we.IsPlusNumber(this.StepPixel)&&(t=parseInt(i)*this.StepPixel)}if(e){if(this.RightSpaceCount>0){if(n+r.DataOffset>=r.Data.length+this.RightSpaceCount)return!1;r.DataOffset+=t,r.DataOffset+n>=r.Data.length+this.RightSpaceCount&&(r.DataOffset=r.Data.length-(n-this.RightSpaceCount))}else{if(n+r.DataOffset>=r.Data.length)return!1;r.DataOffset+=t,r.DataOffset+n>=r.Data.length&&(r.DataOffset=r.Data.length-n)}return!0}return!(r.DataOffset<=0)&&(r.DataOffset-=t,r.DataOffset<0&&(r.DataOffset=0),!0)},this.XCoordinateZoom=function(t,e){var a=this.GetMoveOneStepWidth();return!((t=parseInt(t/a))<=0)&&this.Frame.XCoordinateZoom(e)},this.GetSubFrameIndex=function(t,e){if(!this.Frame.SubFrame||this.Frame.SubFrame.length<=0)return-1;for(var a in this.Frame.SubFrame){var i=this.Frame.SubFrame[a].Frame,r=i.ChartBorder.GetLeft(),n=i.ChartBorder.GetTop(),o=i.ChartBorder.GetHeight(),s=i.ChartBorder.GetWidth();if(this.Canvas.beginPath(),this.Canvas.rect(r,n,s,o),this.Canvas.isPointInPath(t,e))return parseInt(a)}return 0},this.GetDataIndexByPoint=function(t){var e=this.Frame;this.Frame.SubFrame&&this.Frame.SubFrame.length>0&&(e=this.Frame.SubFrame[0].Frame);var a=null;if((a=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data)&&e){var i=parseInt(e.GetXData(t));return a.DataOffset+i}},this.GetSelectRectData=function(t){if(Math.abs(t.XStart-t.XEnd)<5)return!1;var e=(this.PtInClient(t.XStart,t.YStart),this.PtInClient(t.XEnd,t.YEnd),null);if(!(e=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data))return!1;var a=this.GetDataIndexByPoint(t.XStart),i=this.GetDataIndexByPoint(t.XEnd);return!(Math.abs(a-i)<2)&&(t.Data=e,a>i?(t.Start=i,t.End=a):(t.Start=a,t.End=i),!0)},this.GetChartDrawPictureByPoint=function(t){for(var e=0;e<this.ChartDrawPicture.length;++e){var a=this.ChartDrawPicture[e],i=a.IsPointIn(t.X,t.Y,this.ChartDrawOption);if(!1!==i&&i>=0)return t.ChartDrawPicture=a,t.PointIndex=i,a.GetCursorType&&(t.Cursor=a.GetCursorType(i)),!0}return!1},this.SaveToImage=function(t,e){if(this.UIElement.width<=0||this.UIElement.height<=0)return null;if(this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash)return null;Xn.Chart.Log("[JSChartContainer::SaveToImage]",this.UIElement);var a="rgb(255,255,255)";e&&(a=e),this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height),this.Canvas.fillStyle=a,this.Canvas.fillRect(0,0,this.UIElement.width,this.UIElement.height);var i=C();this.Canvas.lineWidth=i,this.Frame.Draw();for(var r in this.ChartPaint){var n=this.ChartPaint[r];n.IsDrawFirst&&n.Draw()}for(var r in this.ChartPaint){var n=this.ChartPaint[r];n.IsDrawFirst||n.Draw()}for(var r in this.ChartPaintEx){var n=this.ChartPaintEx[r];n.Draw()}for(var r in this.OverlayChartPaint){var n=this.OverlayChartPaint[r];n.Draw()}for(var r in this.ExtendChartPaint){var n=this.ExtendChartPaint[r];n.IsDynamic||0!=n.IsAnimation||n.Draw()}this.Frame.DrawInsideHorizontal&&this.Frame.DrawInsideHorizontal(),this.Frame.DrawLock();for(var r in this.ExtendChartPaint){var n=this.ExtendChartPaint[r];n.IsDynamic&&!1===n.DrawAfterTitle&&n.Draw()}null==this.LastPoint.X&&null==this.LastPoint.Y||this.ChartCorssCursor&&(this.ChartCorssCursor.LastPoint=this.LastPoint,this.ChartCorssCursor.CursorIndex=this.CursorIndex);for(var r in this.TitlePaint){var n=this.TitlePaint[r];n.IsDynamic&&(n.CursorIndex=this.CursorIndex,n.Draw())}for(var r in this.ExtendChartPaint){var n=this.ExtendChartPaint[r];n.IsDynamic&&!0===n.DrawAfterTitle&&0==n.IsAnimation&&n.Draw()}if(this.EnableAnimation)for(var r in this.ExtendChartPaint){var n=this.ExtendChartPaint[r];!0===n.IsAnimation&&n.Draw()}for(var r in this.ChartDrawPicture){var n=this.ChartDrawPicture[r];n.Draw()}this.CurrentChartDrawPicture&&10!=this.CurrentChartDrawPicture.Status&&this.CurrentChartDrawPicture.Draw();var o=this.UIElement.toDataURL(t||"image/png",1);return Xn.Chart.Log("[JSChartContainer::SaveToImage] data= ",o),o},this.SaveToImageUrl=function(t,e){t||(t={Format:"image/png",ColorGB:"rgb(255,255,255)"});var a=this.SaveToImage(t.Format,t.ColorGB),i={Base64:a,BucketName:"downloadcache",Path:"hqchart/hq_snapshot"},r=So.Domain+"/API/FileUploadForBase64";n.HttpRequest({url:r,method:"POST",dataType:"json",data:i,success:function(t){Xn.Chart.Log("[JSChartContainer::SaveToImageUrl] recv data",t);var a={Path:t.relativeurl,Domain:"http://127.0.0.1:8087"};a.Url=a.Domain+"/"+a.Path,e&&e(!0,a,"")},error:function(t){Xn.Chart.Log("[JSChartContainer::SaveToImageUrl] error ",t),e&&e(!1,null,"upload failed")}})},this.ExportDataToCSV=function(t){for(var e="",a="",i=0,r=0;r<t.length;++r){var n=t[r];a+='"'+n.Name+'"',r==t.length-1?a+="\r\n":a+=",",we.IsNonEmptyArray(n.Data)&&(i=Math.max(i,n.Data.length))}e+=a;for(var r=0,o=0;r<i;++r){for(a="",o=0;o<t.length;++o){var n=t[o],s=null;n.Data&&r<n.Data.length&&(s=n.Data[r]),a+='"'+s+'"',o==t.length-1?a+="\r\n":a+=","}e+=a}return e="\ufeff"+e},this.SetLanguage=function(t){var e=bo.GetLanguageID(t);if(!we.IsNumber(e))return void console.warn("[JSChartContainer::SetLanguage] language="+t+" error");if(this.LanguageID!=e){this.LanguageID=e,this.ChartCorssCursor&&this.ChartCorssCursor.StringFormatY&&(this.ChartCorssCursor.StringFormatY.LanguageID=this.LanguageID);for(var a=0;a<this.TitlePaint.length;++a){var i=this.TitlePaint[a];i&&(i.LanguageID=this.LanguageID)}for(var a=0;a<this.ExtendChartPaint.length;++a){var i=this.ExtendChartPaint[a];i&&(i.LanguageID=this.LanguageID)}this.Frame&&this.Frame.SetLanguage&&this.Frame.SetLanguage(this.LanguageID),this.ResetFrameXYSplit(),this.Frame.SetSizeChage(!0),this.Draw(),this.PopMinuteChart&&this.PopMinuteChart.SetLanguage(t)}},this.ReloadTiltePaintResource=function(t){for(var e in this.TitlePaint){var a=this.TitlePaint[e];a.ReloadResource&&a.ReloadResource(t)}},this.ReloadExtendChartPaintResource=function(t){for(var e=0;e<this.ExtendChartPaint.length;++e){var a=this.ExtendChartPaint[e];a.ReloadResource&&a.ReloadResource(t)}this.ChartDragSelectRect&&this.ChartDragSelectRect.ReloadResource&&this.ChartDragSelectRect.ReloadResource(t)},this.ReloadChartDrawPictureResource=function(t){if(we.IsNonEmptyArray(this.ChartDrawPicture))for(var e=0;e<this.ChartDrawPicture.length;++e){var a=this.ChartDrawPicture[e];a.ReloadResource&&a.ReloadResource(t)}},this.ReloadResource=function(t){this.ReloadBorder(t),this.ReloadTiltePaintResource(t.Resource),this.ReloadChartPaint(t.Resource),this.ReloadFrame(t.Resource),this.ReloadExtendChartPaintResource(t.Resource),this.ReloadChartCorssCursor(t,t.Resource),this.ReloadChartDrawPictureResource(t.Resource),t.Update&&this.Update?this.Update({UpdateCursorIndexType:2}):1==t.Draw&&this.Draw(),this.PopMinuteChart&&this.PopMinuteChart.ReloadResource(t),this.DialogTooltip&&this.DialogTooltip.ReloadResource(t),this.FloatTooltip&&this.FloatTooltip.ReloadResource(t),this.DialogSelectRect&&this.DialogSelectRect.ReloadResource(t),this.DialogSearchIndex&&this.DialogSearchIndex.ReloadResource(t)},this.ReloadBorder=function(t){if(t){var e=C();if(t.Border){var a=t.Border;we.IsNumber(a.Left)&&(this.Frame.ChartBorder.Left=a.Left*e),we.IsNumber(a.Right)&&(this.Frame.ChartBorder.Right=a.Right*e),we.IsNumber(a.Top)&&(this.Frame.ChartBorder.Top=a.Top*e),we.IsNumber(a.Bottom)&&(this.Frame.ChartBorder.Bottom=a.Bottom*e)}for(var i in t.Windows){var a=t.Windows[i];if(!(i>=this.Frame.SubFrame.length)){var r=this.Frame.SubFrame[i],n=r.Frame.ChartBorder;we.IsNumber(a.TitleHeight)&&(n.TitleHeight=a.TitleHeight*e)}}for(var i in t.Frame){var a=t.Frame[i];if(!(i>=this.Frame.SubFrame.length)){var r=this.Frame.SubFrame[i],n=r.Frame.ChartBorder;a.TopSpace>=0&&(n.TopSpace=a.TopSpace*e),a.BottomSpace>=0&&(n.BottomSpace=a.BottomSpace*e)}}}},this.ReloadFrame=function(t){for(var e=0;e<this.Frame.SubFrame.length;++e){var a=this.Frame.SubFrame[e],i=a.Frame;i&&i.ReloadResource&&i.ReloadResource(t);for(var r=0;r<a.OverlayIndex.length;++r){var n=a.OverlayIndex[r];n.Frame&&n.Frame.ReloadResource&&n.Frame.ReloadResource(t)}}},this.ReloadChartPaint=function(t){for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a&&a.ReloadResource&&a.ReloadResource(t)}},this.ReloadChartCorssCursor=function(t,e){var a=C();if(t&&t.CorssCursor){var i=t.CorssCursor;we.IsNumber(i.TitleHeight)&&(this.ChartCorssCursor.TextHeight=i.TitleHeight*a)}this.ChartCorssCursor.ReloadResource&&this.ChartCorssCursor.ReloadResource(e)},this.SetDepthMapData=function(t,e){for(var a=0;a<t.length;++a)for(var i=t[a],r=0;r<this.ExtendChartPaint.length;++r){var n=this.ExtendChartPaint[r];if(n.ID==i.ID){n.Data=i.Data;break}}e&&1==e.Draw&&this.Draw()},this.PointAbsoluteToRelative=function(t,e,a){var i={X:t,Y:e},r=C(),n=this.UIElement.getBoundingClientRect();return a?(i.X=t-n.left*r,i.Y=e-n.top*r):(i.X=(t-n.left)*r,i.Y=(e-n.top)*r),i},this.SetChartDrawPictureFirstPoint=function(t,e,a){var i=this.CurrentChartDrawPicture;if(!i)return!1;if(!this.Frame.SubFrame||this.Frame.SubFrame.length<=0)return!1;for(var r=this.PointAbsoluteToRelative(t,e,a),n=r.X,o=r.Y,s=0;s<this.Frame.SubFrame.length;++s){var l=this.Frame.SubFrame[s].Frame,h=l.ChartBorder.GetLeft(),u=l.ChartBorder.GetTopEx(),C=l.ChartBorder.GetBottomEx(),c=C-u,f=l.ChartBorder.GetWidth();if(this.Canvas.beginPath(),this.Canvas.rect(h,u,f,c),this.Canvas.isPointInPath(n,o)){if(we.IsNumber(i.LimitFrameID)&&s!=i.LimitFrameID)return!1;i.Frame=l;break}}return!!i.Frame&&(i.Point[0]=new E,i.Point[0].X=n,i.Point[0].Y=o,i.Status=1,i.PointMagnetKLine(),!0)},this.SetChartDrawPictureSecondPoint=function(t,e,a){var i=this.CurrentChartDrawPicture;if(!i)return!1;var r=this.PointAbsoluteToRelative(t,e,a);return i.Point[1]=new E,i.Point[1].X=r.X,i.Point[1].Y=r.Y,i.Status=2,!0},this.SetChartDrawPictureThirdPoint=function(t,e,a){var i=this.CurrentChartDrawPicture;if(!i)return!1;var r=this.PointAbsoluteToRelative(t,e,a);return i.Point[2]=new E,i.Point[2].X=r.X,i.Point[2].Y=r.Y,i.Status=3,!0},this.MoveChartDrawPicture=function(t,e,a,i){var r=this.CurrentChartDrawPicture;if(!r)return!1;var n=C();a&&(n=1);var o=t*n,s=e*n;return r.Move(o,s,i),!0},this.FinishChartDrawPicturePoint=function(){var t=this.CurrentChartDrawPicture;if(!t)return!1;if(t.PointCount!=t.Point.length)return!1;if("ChartDrawRuler"==t.ClassName)return t.FinishedCallback&&t.FinishedCallback(t),this.CurrentChartDrawPicture=null,!0;t.PointMagnetKLine(),t.Status=10,t.PointToValue(),this.ChartDrawPicture.push(t),this.CurrentChartDrawPicture=null;var e=this.GetEventCallback(Kn.ON_FINISH_DRAWPICTURE);if(e&&e.Callback){var a={DrawPicture:t};e.Callback(e,a,this)}return t.FinishedCallback&&t.FinishedCallback(t),t.OnFinish&&t.OnFinish(),this.ChartDrawStorage&&this.ChartDrawStorage.SaveDrawData(t),!0},this.OnSelectChartPicture=function(t){if(Xn.Chart.Log("[JSChartContainer::OnSelectChartPicture]",t),this.DialogModifyDraw)if("ChartDrawPictureText"==t.ClassName||"ChartDrawVolProfile"==t.ClassName){if(this.CloseModifyDrawDialog(),this.ChartPictureMenu||(this.ChartPictureMenu=Eo.Create("ChartPictureSettingMenu",this.UIElement.parentNode)),!this.ChartPictureMenu)return;var e={data:{ChartPicture:t,HQChart:this}};this.ChartPictureMenu.DoModal(e)}else this.ShowModifyDrawDialog(t)},this.FinishMoveChartDrawPicture=function(){var t=this.CurrentChartDrawPicture;if(!t)return!1;if(t.PointCount!=t.Point.length)return!1;if(t.PointMagnetKLine(),t.Status=10,t.PointToValue(),this.ChartDrawStorage&&this.ChartDrawStorage.SaveDrawData(t),this.CurrentChartDrawPicture=null,this.SelectChartDrawPicture&&this.SelectChartDrawPicture.DragInfo){var e=this.SelectChartDrawPicture.DragInfo;if(e.Click&&e.Move&&(e.Click.X!=e.Move.X||e.Click.Y!=e.Move.Y)){var a=this.GetEventCallback(Kn.ON_FINISH_MOVE_DRAWPICTURE);if(a&&a.Callback){var i={DrawPicture:t};a.Callback(a,i,this)}t.OnMoveFinish&&t.OnMoveFinish()}}return!0},this.ClearChartDrawPicture=function(t,e){var a=!0;if(t)for(var i=0;i<this.ChartDrawPicture.length;++i){var r=this.ChartDrawPicture[i];r.Guid!=t.Guid&&r!=t||(this.ChartDrawStorage&&this.ChartDrawStorage.DeleteDrawData(t),this.ChartDrawPicture.splice(i,1),this.SelectChartDrawPicture&&(this.SelectChartDrawPicture.Guid!=t.Guid&&this.SelectChartDrawPicture!=t||(this.SelectChartDrawPicture=null)),e&&0==e.Draw&&(a=!1),a&&this.Draw())}else this.ChartDrawPicture=[],this.ChartDrawStorage&&this.ChartDrawStorage.Clear(),this.SelectChartDrawPicture=null,e&&0==e.Draw&&(a=!1),a&&this.Draw()},this.GetActiveDrawPicture=function(){var t={Move:{Guid:null},Select:{Guid:null},MoveOn:{Guid:null}};return this.CurrentChartDrawPicture&&(t.Move={Guid:this.CurrentChartDrawPicture.Guid}),this.SelectChartDrawPicture&&(t.Select={Guid:this.SelectChartDrawPicture.Guid,Chart:this.SelectChartDrawPicture}),this.MoveOnChartDrawPicture&&(t.MoveOn={Guid:this.MoveOnChartDrawPicture.Guid}),t},this.SetChartDrawOption=function(t){if(we.IsBool(t.IsLockScreen)&&(this.ChartDrawOption.IsLockScreen=t.IsLockScreen),we.IsNumber(t.Zoom)&&t.Zoom>=0&&(this.ChartDrawOption.Zoom=t.Zoom),t.Magnet){var e=t.Magnet;this.ChartDrawOption.Magnet||(this.ChartDrawOption.Magnet={Type:0,Distance:20*C(),Enable:!1}),we.IsBool(e.Enable)&&(this.ChartDrawOption.Magnet.Enable=e.Enable),we.IsNumber(e.Type)&&(this.ChartDrawOption.Magnet.Type=e.Type),we.IsNumber(e.Distance)&&(this.ChartDrawOption.Magnet.Distance=e.Distance)}},this.EnableShowCorssCursorLine=function(t){this.ChartCorssCursor&&(this.ChartCorssCursor.IsShowCorss=t)},this.GetExtendChartByClassName=function(t){for(var e=0;e<this.ExtendChartPaint.length;++e){var a=this.ExtendChartPaint[e];if(a.ClassName==t)return{Index:e,Chart:a}}return null},this.GetExtendChartByClassNameV2=function(t){for(var e=[],a=0;a<this.ExtendChartPaint.length;++a){var i=this.ExtendChartPaint[a];i.ClassName==t&&e.push({Index:a,Chart:i})}return e.length<=0?null:e},this.GetExtendChartRightWidth=function(){for(var t=0,e=0;e<this.ExtendChartPaint.length;++e){var a=this.ExtendChartPaint[e];a&&("StockChip"==a.ClassName&&we.IsNumber(a.Width)&&(t+=a.Width))}return t},this.DeleteExtendChart=function(t){t.Index>=this.ExtendChartPaint.length||this.ExtendChartPaint[t.Index]==t.Chart&&("function"==typeof t.Chart.Clear&&t.Chart.Clear(),this.ExtendChartPaint.splice(t.Index,1))},this.DeleteExtendChartByID=function(t){for(var e=0;e<this.ExtendChartPaint.length;++e){if(this.ExtendChartPaint[e].ID==t)return this.ExtendChartPaint.splice(e,1),!0}return!1},this.EnableSplashScreen=function(t,e){this.ChartSplashPaint&&(this.ChartSplashPaint.EnableSplash(t),e&&!1===e.Draw||(t?this.DrawSplashScreen(e):this.Draw()))},this.SetSubFrameAttribute=function(t,e,a){if(t&&t.Frame){var i=t.Frame;e&&(we.IsBool(e.Modify)&&(i.ModifyIndex=e.Modify),we.IsBool(e.Change)&&(i.ChangeIndex=e.Change),we.IsBool(e.Close)&&(i.CloseIndex=e.Close),we.IsBool(e.Overlay)&&(i.OverlayIndex=e.Overlay),we.IsBool(e.IsDrawTitleBG)&&(i.IsDrawTitleBG=e.IsDrawTitleBG),we.IsNumber(e.TitleHeight)?i.ChartBorder.TitleHeight=e.TitleHeight:e.TitleHeight=i.ChartBorder.TitleHeight,we.IsBool(e.IsShowTitleArrow)&&(i.IsShowTitleArrow=e.IsShowTitleArrow),we.IsNumber(e.TitleArrowType)&&(i.TitleArrowType=e.TitleArrowType),we.IsBool(e.IsShowIndexName)&&(i.IsShowIndexName=e.IsShowIndexName),we.IsNumber(e.IndexParamSpace)&&(i.IndexParamSpace=e.IndexParamSpace),we.IsNumber(e.IndexTitleSpace)&&(i.IndexTitleSpace=e.IndexTitleSpace),we.IsUndefined(e.HorizontalReserved)||(i.HorizontalReserved=e.HorizontalReserved)),a&&(a.SplitCount&&(i.YSplitOperator.SplitCount=a.SplitCount),we.IsNumber(a.SplitType)&&(i.YSplitOperator.SplitType=a.SplitType,i.YSplitOperator.DefaultSplitType=a.SplitType),we.IsBool(a.IsShowXLine)&&(i.IsShowXLine=a.IsShowXLine),we.IsBool(a.IsShowYLine)&&(i.IsShowYLine=a.IsShowYLine),we.IsBool(a.IsShowLeftText)&&(i.IsShowYText[0]=a.IsShowLeftText,i.YSplitOperator.IsShowLeftText=a.IsShowLeftText),we.IsBool(a.IsShowRightText)&&(i.IsShowYText[1]=a.IsShowRightText,i.YSplitOperator.IsShowRightText=a.IsShowRightText),we.IsNumber(a.Height)&&a.Height>=0&&(t.Height=a.Height))}},this.SetSubFrameOption=function(t,e){if(e){var a=t.Frame;if(e.Window){var i=e.Window;we.IsBool(i.Modify)&&(a.ModifyIndex=i.Modify),we.IsBool(i.Change)&&(a.ChangeIndex=i.Change),we.IsBool(i.Close)&&(a.CloseIndex=i.Close),we.IsBool(i.Overlay)&&(a.OverlayIndex=i.Overlay),we.IsBool(i.Export)&&(a.ExportData=i.Export),we.IsBool(i.MaxMin)&&(a.MaxMinWindow=i.MaxMin),we.IsBool(i.TitleWindow)&&(a.TitleWindow=i.TitleWindow),we.IsBool(i.IsDrawTitleBG)&&(a.IsDrawTitleBG=i.IsDrawTitleBG),we.IsBool(i.IsShowNameArrow)&&(a.IsShowNameArrow=i.IsShowNameArrow),i.OverlayIndexType&&(we.IsNumber(i.OverlayIndexType.Position)&&(a.OverlayIndexType.Position=i.OverlayIndexType.Position),we.IsNumber(i.OverlayIndexType.LineSpace)&&(a.OverlayIndexType.LineSpace=i.OverlayIndexType.LineSpace)),we.IsNonEmptyArray(i.CustomToolbar)&&(a.CustomToolbar=i.CustomToolbar.slice())}we.IsNumber(e.SplitCount)&&(t.Frame.YSplitOperator.SplitCount=e.SplitCount),we.IsNumber(e.TitleHeight)&&(t.Frame.ChartBorder.TitleHeight=e.TitleHeight),we.IsBool(e.IsShowTitleArrow)&&(t.Frame.IsShowTitleArrow=e.IsShowTitleArrow),we.IsNumber(e.TitleArrowType)&&(t.Frame.TitleArrowType=e.TitleArrowType),we.IsBool(e.IsShowIndexName)&&(t.Frame.IsShowIndexName=e.IsShowIndexName),we.IsBool(e.IsShowOverlayIndexName)&&(t.Frame.IsShowOverlayIndexName=e.IsShowOverlayIndexName),we.IsNumber(e.IndexParamSpace)&&(t.Frame.IndexParamSpace=e.IndexParamSpace),we.IsBool(e.IsShowXLine)&&(t.Frame.IsShowXLine=e.IsShowXLine),we.IsBool(e.IsShowYLine)&&(t.Frame.IsShowYLine=e.IsShowYLine),we.IsBool(e.IsShowIndexTitle)&&(t.Frame.IsShowIndexTitle=e.IsShowIndexTitle),we.IsBool(e.IsShowLeftText)&&(t.Frame.IsShowYText[0]=e.IsShowLeftText,t.Frame.YSplitOperator.IsShowLeftText=e.IsShowLeftText),we.IsBool(e.IsShowRightText)&&(t.Frame.IsShowYText[1]=e.IsShowRightText,t.Frame.YSplitOperator.IsShowRightText=e.IsShowRightText)}},this.AddNewSubFrame=function(t){var e=this,a=this.Frame.SubFrame.length,i=this.CreateSubFrameItem(a),r=C();i.Frame.ChartBorder.TitleHeight*=r,this.Frame.SubFrame[a]=i;var n=new ea;n.Frame=this.Frame.SubFrame[a].Frame,n.Canvas=this.Canvas,n.LanguageID=this.LanguageID,n.GetEventCallback=function(t){return e.GetEventCallback(t)},this.TitlePaint[a+1]=n,this.SetSubFrameOption(i,t);for(var o=0;o<this.Frame.SubFrame.length;++o){var s=this.Frame.SubFrame[o].Frame;o==this.Frame.SubFrame.length-1?s.XSplitOperator.ShowText=!0:s.XSplitOperator.ShowText=!1}return this.UpdataDataoffset(),this.Frame.SetSizeChage(!0),this.UpdateXShowText&&this.UpdateXShowText(),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw(),a},this.AddIndexWindow=function(t,e){var a=new s,i=a.Get(t);if(i){this.RemoveMinSizeWindows();var r=this.AddNewSubFrame(e);if(s.ModifyAttribute(i,e),this.WindowIndex[r]=new Sr(i.Name,i.Script,i.Args,i),"MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName)var n=this.SourceData;else var n=this.ChartPaint[0].Data;this.BindIndexData(r,n)}},this.AddAPIIndexWindow=function(t,e){if(t.API){this.RemoveMinSizeWindows();var a=this.AddNewSubFrame(e),i=t.API;if(this.WindowIndex[a]=new br(i.Name,i.Script,i.Args,t),"MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName)var r=this.SourceData;else var r=this.ChartPaint[0].Data;this.BindIndexData(a,r)}},this.AddScriptIndexWindow=function(t,e){if(t&&t.Script&&t.Name){this.RemoveMinSizeWindows();var a=this.AddNewSubFrame(e),i={Name:t.Name,Script:t.Script,Args:t.Args,ID:t.Name,KLineType:t.KLineType,YSpecificMaxMin:t.YSpecificMaxMin,YSplitScale:t.YSplitScale,FloatPrecision:t.FloatPrecision,Condition:t.Condition,StringFormat:t.StringFormat,OutName:t.OutName};if(t.ID&&(i.ID=t.ID),this.WindowIndex[a]=new Sr(i.Name,i.Script,i.Args,i),"MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName)var r=this.SourceData;else var r=this.ChartPaint[0].Data;this.BindIndexData(a,r)}},this.GetRectSelectPaint=function(){var t=this.GetExtendChartByClassName("RectSelectPaint");return t?t.Chart:null},this.GetRectDragPaint=function(){var t=this.GetExtendChartByClassName("RectDragPaint");return t?t.Chart:null},this.SetRectSelectData=function(t,e){var a=this.GetRectSelectPaint();if(!a)return!1;if(2==a.GetPointCount()){if(!a.SpaceReselected)return!1;var i=a.PreventClose;a.PreventClose=!1,a.ClearPoint(),a.PreventClose=i}return a.SetPoint(t,{DataIndex:e})},this.MoveRectSelectPoint=function(e){var a=this.GetRectSelectPaint();if(!a)return!1;if(!this.ChartPaint[0]||!this.ChartPaint[0].Data)return!1;var i=this.ChartPaint[0].Data;if(!this.Frame.SubFrame[0])return!1;var r=this.Frame.SubFrame[0].Frame,n=C(),o=(e.X-t.getBoundingClientRect().left)*n,s=r.GetXData(o);s=parseInt(s.toFixed(0));var l=s+i.DataOffset;l>=i.Data.length&&(l=i.Data.length-1);var h=i.Data[l];if(Xn.Chart.Log("[KLineChartContainer::MoveRectSelectPoint] point, item",e.PointIndex,h),!a.SetPoint(h,{Index:e.PointIndex,DataIndex:l}))return!1;var u=this.GetEventCallback(Kn.ON_DRAG_SELECT_RECT);if(u){var c=a.GetSelectRectData(),f={X:e.X,Y:e.Y,SelectData:c,RectSelectPaint:a};u.Callback(u,f,this)}if(this.IsShowSelectRectDialog()){var c=a.GetSelectRectData(),f={Chart:this,X:e.X,Y:e.Y,SelectData:c,RectSelectPaint:a},d={data:f};this.DrawSelectRectDialog(d)}return!0},this.MoveSubRectSelect=function(t){var e=this.GetRectSelectPaint();if(!e)return!1;if(!e.MoveSubRect(t.Step,t.IsLeft))return!1;var a=this.GetEventCallback(Kn.ON_DRAG_SUB_SELECT_RECT);if(a){var i={Start:e.SubClient.FirstPoint,End:e.SubClient.SecondPoint},r={X:t.X,Y:t.Y,SubRectSelectData:i,RectSelectPaint:e};a.Callback(a,r,this)}return!0},this.ClearRectSelect=function(t){var e=this.GetRectSelectPaint();return!!e&&(t&&(e.PreventClose=!1),e.ClearPoint())},this.DeleteWindowsOverlayIndex=function(t){if(we.IsNumber(t)&&!(t<0||t>=this.Frame.SubFrame.length)){var e=this.Frame.SubFrame[t];if(we.IsNonEmptyArray(e.OverlayIndex)){for(var a=[],i=0;i<e.OverlayIndex.length;++i){var r=e.OverlayIndex[i];a.push(r.Identify);for(var n=0;n<r.ChartPaint.length;++n){var o=r.ChartPaint[n];o&&o.OnDestroy&&o.OnDestroy()}r.ChartPaint=[]}e.OverlayIndex=[];for(var s=this.TitlePaint[t+1],i=0;i<a.length;++i){var l=a[i];s.OverlayIndex.has(l)&&s.OverlayIndex.delete(l),s.OverlayDynamicTitle.has(l)&&s.OverlayDynamicTitle.delete(l)}}}},this.DeleteOverlayIndex=function(t,e){var a=null;if(we.IsNumber(e)){if(e>=0&&e<this.Frame.SubFrame.length)for(var i=this.Frame.SubFrame[e],r=0;r<i.OverlayIndex.length;++r){var n=i.OverlayIndex[r];if(n.Identify===t){for(var o=0;o<n.ChartPaint.length;++o){var s=n.ChartPaint[o];s&&s.OnDestroy&&s.OnDestroy()}i.OverlayIndex.splice(r,1),a=e;break}}}else for(var l=0;l<this.Frame.SubFrame.length;++l)for(var i=this.Frame.SubFrame[l],r=0;r<i.OverlayIndex.length;++r){var n=i.OverlayIndex[r];if(n.Identify===t){for(var o=0;o<n.ChartPaint.length;++o){var s=n.ChartPaint[o];s&&s.OnDestroy&&s.OnDestroy()}i.OverlayIndex.splice(r,1),a=l;break}}if(null==a)return console.warn("[JSChartContainer::DeleteOverlayIndex] can't find overlay index. [identify="+t+"]"),!1;var h=a+1,u=this.TitlePaint[h];return u.OverlayIndex.has(t)&&u.OverlayIndex.delete(t),u.OverlayDynamicTitle.has(t)&&u.OverlayDynamicTitle.delete(t),!0},this.FindScriptIndex=function(t,e){if(we.IsNumber(e)&&e>=0){if(e>=this.Frame.SubFrame.length)return null;var a=this.WindowIndex[e];if(a&&a.Guid==t)return{Type:0,Data:a,WindowIndex:e};for(var a=this.Frame.SubFrame[e],i=0;i<a.OverlayIndex.length;++i){var r=a.OverlayIndex[i];if(r.Identify===t)return{Type:1,Data:r,WindowIndex:e,OverlayIndex:i}}}else for(var i=0;i<this.Frame.SubFrame.length;++i){var a=this.WindowIndex[i];if(a&&a.Guid==t)return{Type:0,Data:a,WindowIndex:i};for(var a=this.Frame.SubFrame[i],n=0;n<a.OverlayIndex.length;++n){var r=a.OverlayIndex[n];if(r.Identify===t)return{Type:1,Data:r,WindowIndex:i,OverlayIndex:n}}}return null},this.MoveIndex=function(t,e,a){var i=this;if(!t||!e||!a)return!1;if(!we.IsNumber(t.WindowIndex)||t.WindowIndex<0||t.WindowIndex>=this.Frame.SubFrame.length)return!1;if(!we.IsNumber(e.WindowIndex)||e.WindowIndex<0||e.WindowIndex>=this.Frame.SubFrame.length)return!1;var r=this.FindScriptIndex(t.IndexID,t.WindowIndex);if(!r)return!1;var n=null,o=null;if(0==r.Type?n=r.Data:1==r.Type&&(o=r.Data),!o&&!n)return!1;var s=0;if(("MinuteChartContainer"==this.ClassName||"MinuteChartHScreenContainer"==this.ClassName)&&(s=2),e.WindowIndex>=s&&null==this.WindowIndex[e.WindowIndex]){n?this.WindowIndex[e.WindowIndex]=this.CreateMainScript(n):o&&(this.WindowIndex[e.WindowIndex]=this.CreateMainScript(o.Script)),0==a.Operator&&(o?this.DeleteOverlayIndex(o.Identify,t.WindowIndex):n&&this.DeleteMainIndex(n.Guid,t.WindowIndex));var l=this.GetMainData();this.BindIndexData(e.WindowIndex,l),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}else{var h=this.Frame.SubFrame[e.WindowIndex],u=new Y,C=this.CreateOverlayFrame();C.Canvas=this.Canvas,C.MainFrame=h.Frame,C.ChartBorder=h.Frame.ChartBorder,o&&(C.IsShow=o.Frame.IsShow),C.YSplitOperator=new Me,C.YSplitOperator.LanguageID=this.LanguageID,C.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),C.YSplitOperator.Frame=C,C.YSplitOperator.ChartBorder=C.ChartBorder,C.YSplitOperator.SplitCount=h.Frame.YSplitOperator.SplitCount,C.YSplitOperator.GetEventCallback=function(t){return i.GetEventCallback(t)},u.Frame=C;var c;n?(c=this.CreateOverlayScript(n),c.OverlayIndex={IsOverlay:!0,Identify:u.Identify,WindowIndex:e.WindowIndex,Frame:u}):o&&(c=this.CreateOverlayScript(o.Script),c.OverlayIndex={IsOverlay:!0,Identify:u.Identify,WindowIndex:e.WindowIndex,Frame:u}),u.Script=c;var f=this.GetEventCallback(Kn.ON_CREATE_OVERLAY_FRAME);if(f&&f.Callback){var d={OverlayFrame:u,WindowIndex:e.WindowIndex,SubFrame:h};f.Callback(f,d,this)}h.OverlayIndex.push(u);var D=e.WindowIndex;if(0==a.Operator)if(o)this.DeleteOverlayIndex(o.Identify,t.WindowIndex);else if(n){this.DeleteMainIndex(n.Guid,t.WindowIndex);var r=this.FindScriptIndex(u.Identify);r&&(D=r.WindowIndex)}var l=this.GetMainData();this.BindOverlayIndexData(u,D,l),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.MoveIndexToNewWindow=function(t,e){var a=this;if(!t||!e)return!1;if(!we.IsNumber(t.WindowIndex)||t.WindowIndex<0||t.WindowIndex>=this.Frame.SubFrame.length)return!1;var i=this.FindScriptIndex(t.IndexID,t.WindowIndex);if(!i)return!1;var r=null,n=null;if(0==i.Type?r=i.Data:1==i.Type&&(n=i.Data),!n&&!r)return!1;if(t.WindowIndex==this.Frame.SubFrame.length-1&&this.Frame.SubFrame[t.WindowIndex].OverlayIndex<=0)return!1;this.RemoveMinSizeWindows();var o=this.Frame.SubFrame.length,s=this.CreateSubFrameItem(o),l=C();s.Frame.ChartBorder.TitleHeight*=l,this.Frame.SubFrame[o]=s;var h=new ea;h.Frame=this.Frame.SubFrame[o].Frame,h.Canvas=this.Canvas,h.LanguageID=this.LanguageID,h.SelectedChart=this.SelectedChart,h.GetEventCallback=function(t){return a.GetEventCallback(t)},this.TitlePaint[o+1]=h,this.SetSubFrameOption(s,e);for(var u=0;u<this.Frame.SubFrame.length;++u){var c=this.Frame.SubFrame[u].Frame;u==this.Frame.SubFrame.length-1?c.XSplitOperator.ShowText=!0:c.XSplitOperator.ShowText=!1}0==e.Operator&&(n?this.DeleteOverlayIndex(n.Identify,t.WindowIndex):r&&this.DeleteMainIndex(r.Guid,t.WindowIndex)),this.UpdataDataoffset(),this.Frame.SetSizeChage(!0),this.UpdateXShowText&&this.UpdateXShowText(),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw();var o=this.Frame.SubFrame.length-1;r?this.WindowIndex[o]=this.CreateMainScript(r):n&&(this.WindowIndex[o]=this.CreateMainScript(n.Script));var f=this.GetMainData();this.BindIndexData(o,f)},this.CreateOverlayScript=function(t){var e=null;switch(t.ClassName){case"ScriptIndex":e=new xr;break;case"APIScriptIndex":e=new br(null,null,null,null,!0);break;case"OverlayScriptIndex":e=new xr}return t.CopyTo(e),e},this.CreateMainScript=function(t){var e=null;switch(t.ClassName){case"ScriptIndex":case"OverlayScriptIndex":e=new Sr;break;case"APIScriptIndex":e=new br}return t.CopyTo(e),e},this.DeleteMainIndex=function(t,e){if(!this.WindowIndex[e])return!1;var a=this.Frame.SubFrame[e];if(!a)return!1;if(we.IsNonEmptyArray(a.OverlayIndex)){var i=a.OverlayIndex[0];this.DeleteOverlayIndex(i.Identify,e),this.WindowIndex[e]=this.CreateMainScript(i.Script);var r=this.GetMainData();this.BindIndexData(e,r)}else this.RemoveIndexWindow(e,{DeleteMainIndex:!0})},this.GetMainData=function(){switch(this.ClassName){case"MinuteChartContainer":case"MinuteChartHScreenContainer":return this.SourceData;case"KLineChartContainer":case"KLineChartHScreenContainer":return this.ChartPaint[0].Data}},this.CreateOverlayFrame=function(){switch(this.ClassName){case"KLineChartContainer":return new G;case"KLineChartHScreenContainer":return new V;case"MinuteChartContainer":return new P;case"MinuteChartHScreenContainer":return new B}},this.ExportData=function(t){if(!this.ExportMainData)return null;if(!this.ChartPaint[0])return null;var e=this.GetMainData();if(!e||!we.IsNonEmptyArray(e.Data))return null;var a=null,i=e.Data;t.Start&&t.End&&(a=e.GetDataRange(t.Start,t.End));var r=this.ExportMainData(e,a);if(!r)return null;for(var n=1;n<this.ChartPaint.length;++n){var o=this.ChartPaint[n];if(o&&o.ExportData){var s=o.ExportData(i,a);if(s&&we.IsNonEmptyArray(s))for(var l=0;l<s.length;++l){var h=s[l];o.IndexName?r.push({Name:h.Name+"("+o.IndexName+")",Data:h.Data}):r.push(h)}}}for(var n=0;n<this.OverlayChartPaint.length;++n){var o=this.OverlayChartPaint[n];if(o.Data&&we.IsNonEmptyArray(c.Data.Data)){var s=this.ExportMainData(o.Data,{IsOverlay:!0});if(s&&we.IsNonEmptyArray(s))for(var l=0;l<s.length;++l){var h=s[l];r.push({Name:h.Name+"("+o.Symbol+")",Data:h.Data})}}}for(var n=0,l=0,u=0;n<this.Frame.SubFrame.length;++n){var o=this.Frame.SubFrame[n];for(l=0;l<o.OverlayIndex.length;++l){var C=o.OverlayIndex[l];if(we.IsNonEmptyArray(C.ChartPaint))for(u=0;u<C.ChartPaint.length;++u){var c=C.ChartPaint[u];if(c&&c.ExportData){var s=c.ExportData(i,a);if(s&&we.IsNonEmptyArray(s))for(var f=0;f<s.length;++f){var h=s[f];c.IndexName?r.push({Name:h.Name+"("+c.IndexName+")",Data:h.Data}):r.push(h)}}}}}return t&&"CSV"==t.Type?this.ExportDataToCSV(r):r},this.ClearIndexRunCount=function(){for(var t=0;t<this.WindowIndex.length;++t){var e=this.WindowIndex[t];e&&(e.RunCount=0)}for(var t=0;t<this.Frame.SubFrame.length;++t)for(var e=this.Frame.SubFrame[t],a=0;a<e.OverlayIndex.length;++a){var i=e.OverlayIndex[a];i.Script&&(i.Script.RunCount=0)}},this.GetIndexInfo=function(){for(var t=[],e=0,a=0;e<this.WindowIndex.length;++e){var i=this.WindowIndex[e];if(i){var r={Name:i.Name,WindowIndex:e,IsOverlay:!1};if(i.ID&&(r.ID=i.ID),we.IsNonEmptyArray(i.Arguments))for(r.Args=[],a=0;a<i.Arguments.length;++a){var n=i.Arguments[a];r.Args.push({Name:n.Name,Value:n.Value})}t.push(r)}}return this.GetOverlayIndexInfo(t),t},this.GetOverlayIndexInfo=function(t){for(var e=0,a=0,i=0;e<this.Frame.SubFrame.length;++e){var r=this.Frame.SubFrame[e];if(we.IsNonEmptyArray(r.OverlayIndex))for(a=0;a<r.OverlayIndex.length;++a){var n=r.OverlayIndex[a];if(n.Script){var o=n.Script,s={Name:o.Name,ID:o.ID,WindowIndex:e,IsOverlay:!0,Identify:n.Identify};if(we.IsNonEmptyArray(o.Arguments))for(s.Args=[],i=0;i<o.Arguments.length;++i){var l=o.Arguments[i];s.Args.push({Name:l.Name,Value:l.Value})}t.push(s)}}}},this.PopupMenuByTab=function(t,e){if(this.JSPopMenu){var a=C(),i={Left:e.Left/a,Right:e.Right/a,Bottom:e.Bottom/a,Top:e.Top/a};i.Width=i.Right-i.Left,i.Height=i.Bottom-i.Top;var r=this.UIElement.getBoundingClientRect(),n=m(),o=r.left+n.Left,s=r.top+n.Top;i.Left+=o,i.Right+=o,i.Top+=s,i.Bottom+=s,this.JSPopMenu.CreatePopMenu(t),this.JSPopMenu.PopupMenuByTab(i)}},this.PopupMenuByDrapdown=function(t,e){if(this.JSPopMenu){var a=C(),i={Left:e.Left/a,Right:e.Right/a,Bottom:e.Bottom/a,Top:e.Top/a};i.Width=i.Right-i.Left,i.Height=i.Bottom-i.Top;var r=this.UIElement.getBoundingClientRect(),n=m(),o=r.left+n.Left,s=r.top+n.Top;i.Left+=o,i.Right+=o,i.Top+=s,i.Bottom+=s,this.JSPopMenu.CreatePopMenu(t),this.JSPopMenu.PopupMenuByDrapdown(i)}},this.PopupMenuByRClick=function(t,e,a){if(this.JSPopMenu){var i=this.UIElement.getBoundingClientRect(),r=m();e+=i.left+r.Left,a+=i.top+r.Top,this.JSPopMenu.CreatePopMenu(t),this.JSPopMenu.PopupMenuByRight(e,a)}},this.ExecuteMenuCommand=function(t,e){Xn.Chart.Log("[JSChartContainer::ExecuteMenuCommand] cmdID=, aryArgs=",t,e);var a=null,i=null;switch(we.IsNonEmptyArray(e)&&(i=e[0],we.IsNumber(e[0])&&(a=e[0])),t){case Qn.CMD_CHANGE_PERIOD_ID:this.ChangePeriod&&null!=a&&this.ChangePeriod(a);break;case Qn.CMD_CHANGE_WINDOW_COUNT_ID:this.ChangeIndexWindowCount&&null!=a&&this.ChangeIndexWindowCount(a);break;case Qn.CMD_CHANGE_RIGHT_ID:this.ChangeRight&&null!=a&&this.ChangeRight(a);break;case Qn.CMD_CHANGE_INDEX_ID:this.ChangeIndex&&null!=a&&e[1]&&this.ChangeIndex(a,e[1]);break;case Qn.CMD_CHANGE_API_INDEX_ID:this.ChangeAPIIndex&&null!=a&&e[1]&&this.ChangeAPIIndex(a,e[1]);break;case Qn.CMD_CHANGE_SCRIPT_INDEX_ID:this.ChangeScriptIndex&&null!=a&&e[1]&&this.ChangeScriptIndex(a,e[1],e[2]);break;case Qn.CMD_CHANGE_COLOR_INDEX_ID:case Qn.CMD_CHANGE_TRADE_INDEX_ID:this.ChangeInstructionIndex&&e[0]&&this.ChangeInstructionIndex(e[0]);break;case Qn.CMD_DELETE_COLOR_INDEX_ID:case Qn.CMD_DELETE_TRADE_INDEX_ID:this.CancelInstructionIndex&&this.CancelInstructionIndex();break;case Qn.CMD_CHANGE_KLINE_TYPE_ID:this.ChangeKLineDrawType&&null!=a&&this.ChangeKLineDrawType(a,e[1],e[2]);break;case Qn.CMD_CHANGE_PRICE_GAP_ID:this.ChangePriceGap&&we.IsBool(e[0])&&(0==e[0]?this.ChangePriceGap({Enable:e[0]}):we.IsNumber(e[1])&&this.ChangePriceGap({Enable:e[0],Count:e[1]}));break;case Qn.CMD_OVERLAY_SYMBOL_ID:!0===e[1]?this.OverlaySymbol&&e[0]&&this.OverlaySymbol(e[0]):!1===e[1]&&this.DeleteOverlaySymbol&&e[0]&&this.DeleteOverlaySymbol(e[0]);break;case Qn.CMD_DELETE_ALL_OVERLAY_SYMBOL_ID:this.ClearOverlaySymbol&&this.ClearOverlaySymbol();break;case Qn.CMD_CHANGE_COORDINATETYPE_ID:this.ChangeCoordinateType&&e[0]&&this.ChangeCoordinateType(e[0]);break;case Qn.CMD_CHANGE_KLINE_INFO_ID:e[0]&&we.IsBool(e[1])&&(1==e[1]&&this.AddKLineInfo?this.AddKLineInfo(e[0],!0):0==e[1]&&this.DeleteKLineInfo&&this.DeleteKLineInfo(e[0]));break;case Qn.CMD_DELETE_ALL_KLINE_INFO_ID:this.ClearKLineInfo&&this.ClearKLineInfo();break;case Qn.CMD_CHANGE_DRAG_MODE_ID:null!=a&&(this.DragMode=a);break;case Qn.CMD_CHANGE_BG_SPLIT_ID:if(we.IsBool(i))if(i)this.CreateExtendChart("SessionBreaksPaint",{}),this.Draw();else{var r=this.GetExtendChartByClassName("SessionBreaksPaint");r&&(this.DeleteExtendChartByID(r.Chart.ID),this.Draw())}break;case Qn.CMD_SHOW_DRAWTOOL_ID:this.IsShowDrawToolDialog()||this.ShowDrawToolDialog();break;case Qn.CMD_SHOW_STOCKCHIP_ID:var n={Name:"ç­¹ç åå¸",ShowType:1,Width:230};this.CreateExtendChart(n.Name,n);this.SetSizeChange(!0),this.Draw();break;case Qn.CMD_HIDE_STOCKCHIP_ID:var o=this.GetExtendChartByClassName("StockChip");if(o){var s=o.Chart.Width;this.DeleteExtendChart(o),this.Frame.ChartBorder.Right-=s,this.SetSizeChange(!0),this.Draw()}break;case Qn.CMD_ENABLE_SELECT_RECT_ID:we.IsBool(i)&&(this.EnableSelectRect=i);break;case Qn.CMD_CHANGE_DAY_COUNT_ID:this.ChangeDayCount&&null!=a&&this.ChangeDayCount(a);break;case Qn.CMD_SHOW_BEFORE_DATA_ID:this.ShowCallAuctionData&&we.IsBool(i)&&this.ShowCallAuctionData({Left:i,MultiDay:{Left:i}});break;case Qn.CMD_CHANGE_BASELINE_ID:this.ChangeBaselineType&&we.IsNumber(a)&&this.ChangeBaselineType(a);break;case Qn.CMD_SELECTED_ZOOM_ID:this.ShowSelectData&&i&&this.ShowSelectData(i);break;case Qn.CMD_SELECTED_SUMMARY_ID:this.DialogSelectRect&&i&&this.DrawSelectRectDialog(i);break;case Qn.CMD_SHOW_INDEX_ID:if(null==a||!we.IsNumber(e[1]))return!1;var l=a,h=e[1],u=this.WindowIndex[l];if(!u)return!1;u.IsShow=1!=h&&(2==h||!u.IsShow),this.UpdateWindowIndex(l);break;case Qn.CMD_SHOW_OVERLAY_INDEX_ID:if(!i||!we.IsNumber(e[1]))return!1;var C=i,h=e[1],c=this.GetOverlayIndexByIdentify(C);if(!c||!c.OverlayItem||!c.OverlayItem.Script)return!1;var u=c.OverlayItem.Script;1==h?u.IsShow=!1:2==h?u.IsShow:u.IsShow=!u.IsShow,this.UpdateOverlayIndex(C);break;case Qn.CMD_DELETE_OVERLAY_INDEX_ID:i&&this.DeleteOverlayWindowsIndex&&this.DeleteOverlayWindowsIndex(i);break;case Qn.CMD_SHOW_OVERLAY_Y_AXIS_ID:if(!i||!we.IsNumber(e[1]))return!1;if(!this.GetOverlayIndexByIdentify)return!1;var C=i,h=e[1],r=this.GetOverlayIndexByIdentify(C);if(!r||!r.OverlayItem)return!1;var f=r.OverlayItem.Frame;1==h?f.IsShow=!1:2==h?f.IsShow:f.IsShow=!f.IsShow,this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw();break;case Qn.CMD_ENABLE_OVERLAY_SHARE_Y_ID:if(!i||!we.IsNumber(e[1]))return!1;if(!this.GetOverlayIndexByIdentify)return!1;var C=i,h=e[1],r=this.GetOverlayIndexByIdentify(C);if(!r||!r.OverlayItem)return!1;var f=r.OverlayItem.Frame;1==h?f.IsShareY=!1:2==h?f.IsShareY:f.IsShareY=!f.IsShareY,this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw();break;case Qn.CMD_CHANGE_DEFAULTCURSOR_ID:if(!we.IsString(i))return;this.DefaultCursor=i,this.UIElement.style.cursor=this.DefaultCursor;break;case Qn.CMD_ADD_OVERLAY_INDEX_ID:if(null==a||!e[1])return!1;var d=e[1];d.WindowIndex=a,this.AddOverlayIndex(d);break;case Qn.CMD_CHANGE_LANGUAGE_ID:i&&this.SetLanguage(i);break;case Qn.CMD_CHANGE_DRAG_RECT_SHOW_MODE_ID:null!=a&&this.ChartDragSelectRect&&(this.ChartDragSelectRect.ShowMode=a);break;case Qn.CMD_SHOW_CORSS_LINE_ID:we.IsBool(i)&&this.ChartCorssCursor&&(this.ChartCorssCursor.IsShowCorss=i);break;case Qn.CMD_ENABLE_POP_MINUTE_CHART_ID:we.IsBool(i)&&(i?(this.DestroyPopMinuteChart(),this.InitalPopMinuteChart({KLine:{KLineDoubleClick:!0}})):this.DestroyPopMinuteChart());break;case Qn.CMD_CHANGE_INFO_POSITION_ID:if(null==a)return!1;var D=this.ChartPaint[0];if(!D)return!1;D.InfoPosition=a,this.Draw();break;case Qn.CMD_DIALOG_TOOLTIP_ATTRIBUTE:if(!e[0])return!1;var n=e[0];if(!we.IsBool(n.Enable))return!1;!1===n.Enable?this.DestroyTooltipDialog():(this.DestroyTooltipDialog(),this.InitalTooltipDialog(n));break;case Qn.CMD_KLINE_TOOLTIP_ATTRIBUTE:if(!e[0])return!1;var n=e[0];we.IsBool(n.Enable)&&(this.KLineTooltipConfig.Enable=n.Enable),we.IsBool(n.EnableKeyDown)&&(this.KLineTooltipConfig.EnableKeyDown=n.EnableKeyDown);break;case Qn.CMD_MODIFY_INDEX_PARAM:if(null==a)return!1;var m={e:null,WindowIndex:a,Type:1};this.ShowModifyIndexParamDialog(m);break;case Qn.CMD_MODIFY_OVERLAY_INDEX_PARAM:if(null==a)return!1;if(!e[1])return!1;var m={e:null,WindowIndex:a,Type:2,Identify:e[1]};this.ShowModifyIndexParamDialog(m)}},this.GetShowIndexMenuData=function(t,e){var a=this.WindowIndex[t];return a?{Name:a.IsShow?"éèææ ":"æ¾ç¤ºææ ",Data:{ID:Qn.CMD_SHOW_INDEX_ID,Args:[t,0]}}:null},this.GetModifyIndexMenuData=function(t){return{Name:"åæ°ä¿®æ¹",Data:{ID:Qn.CMD_MODIFY_INDEX_PARAM,Args:[t]}}},this.GetShowOverlayIndexMenuData=function(t,e){var a=this.GetOverlayIndexByIdentify(t);return a&&a.OverlayItem&&a.OverlayItem.Script?{Name:a.OverlayItem.Script.IsShow?"éèææ ":"æ¾ç¤ºææ ",Data:{ID:Qn.CMD_SHOW_OVERLAY_INDEX_ID,Args:[t,0]}}:null},this.GetModifyOverlayIndexMenuData=function(t){var e=this.GetOverlayIndexByIdentify(t);return e?{Name:"åæ°ä¿®æ¹",Data:{ID:Qn.CMD_MODIFY_OVERLAY_INDEX_PARAM,Args:[e.WindowIndex,t]}}:null},this.GetShowOverlayIndexYAxisMenuData=function(t,e){var a=this.GetOverlayIndexByIdentify(t);return a&&a.OverlayItem&&a.OverlayItem.Script?{Name:a.OverlayItem.Frame.IsShow?"éèYè½´":"æ¾ç¤ºYè½´",Data:{ID:Qn.CMD_SHOW_OVERLAY_Y_AXIS_ID,Args:[t,0]}}:null},this.GetOverlayIndexShareYMenuData=function(t,e){var a=this.GetOverlayIndexByIdentify(t);if(!a||!a.OverlayItem||!a.OverlayItem.Script)return null;var i=a.OverlayItem.Frame;return{Name:"å¬ç¨çªå£Yè½´",Data:{ID:Qn.CMD_ENABLE_OVERLAY_SHARE_Y_ID,Args:[t,0]},Checked:i.IsShareY}},this.OnClickRightMenu=function(t){if(Xn.Chart.Log("[JSChartContainer::OnClickRightMenu] ",t),t&&t.Data){var e=t.Data.ID,a=t.Data.Args,i=this.GetEventCallback(Kn.ON_MENU_COMMAND);if(i&&i.Callback){var t={PreventDefault:!1,CommandID:e,Args:a,SrcData:t};if(i.Callback(i,t,this),t.PreventDefault)return}this.ExecuteMenuCommand(e,a)}},this.PopupRightMenuV2=function(t,e){var a=this;if(this.JSPopMenu){var i=t.X,r=t.Y,n=t.FrameID,o={Menu:this.GetRightMenuData(n),Position:on.POSITION_ID.RIGHT_MENU_ID};o.ClickCallback=function(t){a.OnClickRightMenu(t)};var s=this.GetEventCallback(Kn.ON_CREATE_RIGHT_MENU);if(s&&s.Callback){var l={MenuData:o,FrameID:n};s.Callback(s,l,this)}this.PopupMenuByRClick(o,i,r)}},this.CreateChartPaintExtend=function(t,e){if(e<0)return!1;var a=this.Frame.SubFrame[e];if(!a||!a.Frame)return!1;var i=a.Frame;return t.Canvas=this.Canvas,t.ChartBorder=i.ChartBorder,t.ChartFrame=i,this.ChartPaintEx.push(t),!0},this.DeleteChartPaintExtend=function(t,e){if(t&&we.IsNonEmptyArray(this.ChartPaintEx)&&we.IsNumber(t.WindowIndex)){var a=t.WindowIndex;if(!this.Frame.SubFrame[a])return;var i=this.Frame.SubFrame[a].Frame;if(!i)return;for(var r=[],n=0,o=0;o<this.ChartPaintEx.length;++o){var s=this.ChartPaintEx[o];s.ChartFrame.Guid==i.Guid||s.ChartFrame==i?(++n,!0===e&&s&&s.OnDestroy&&s.OnDestroy()):r.push(s)}n>0&&(this.ChartPaintEx=r)}},this.ClearCurrnetDrawPicture=function(){this.CurrentChartDrawPicture=null},this.CreateDragSelectRect=function(t){var e=fo.Create("RectDragPaint",t);if(!e)return null;t&&!0===t.Enable&&(e.Enable=!0),e.ChartBorder=this.Frame.ChartBorder,e.ChartFrame=this.Frame,e.HQChart=this,e.SetOption(t),this.ChartDragSelectRect=e},this.ClearDragSelectRect=function(){this.ChartDragSelectRect&&this.ChartDragSelectRect.ClearPoint()},this.ShowDragSelectRect=function(t,e){this.ChartDragSelectRect&&(this.ChartDragSelectRect.SetFirstPoint(t.X,t.Y),this.ChartDragSelectRect.SetSecondPoint(e.X,e.Y),this.ChartDragSelectRect.Draw())},this.ChangeIndexWindow=function(t,e){if(Xn.Chart.Log("[KLineChartContainer::ChangeIndexWindow] windowIndex, option",t,e),t<0||t>=this.Frame.SubFrame.length)return!1;if(!e)return!1;var a=this.Frame.SubFrame[t];if(e.Delete){var i=e.Delete;!0===i.Window&&this.DeleteIndexPaint(t),!0===i.Overlay&&this.DeleteWindowsOverlayIndex(t)}var r=t+1;if(this.TitlePaint[r].Data=[],this.TitlePaint[r].Title=null,e.Window){this.DeleteIndexPaint(t);var i=e.Window;if(i.Script)this.WindowIndex[t]=new Sr(i.Name,i.Script,i.Args,i);else if(i.API){var n=i.API;this.WindowIndex[t]=new br(n.Name,n.Script,n.Args,i)}else{var o=i.Index,l=di.Get(o);if(l)this.WindowIndex[t]=l.Create(),this.CreateWindowIndex(t);else{var h=new s,u=h.Get(o);u&&(s.ModifyAttribute(u,i),this.WindowIndex[t]=new Sr(u.Name,u.Script,u.Args,u))}}this.SetSubFrameAttribute(a,i,e.Frame)}var C=[];if(we.IsNonEmptyArray(e.OverlayIndex)){this.DeleteWindowsOverlayIndex(t);for(var c=0;c<e.OverlayIndex.length;++c){var i=e.OverlayIndex[c];i.Index&&(i.IndexName=i.Index),i.WindowIndex=t,i.Windows>=0&&(i.WindowIndex=i.Windows);var f=this.CreateOverlayWindowsIndex(i);f&&C.push({WindowsIndex:i.WindowIndex,Overlay:f})}}var d=this.ChartPaint[0].Data;this.BindIndexData(t,d);for(var c=0;c<C.length;++c){var i=C[c];this.BindOverlayIndexData(i.Overlay,i.WindowsIndex,d)}this.UpdataDataoffset(),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw()},this.ClickHorizontalLabel=function(t,e){var a=this.GetEventCallback(Kn.ON_CLICK_HORIZONTAL_LABEL);if(a&&a.Callback){var i={Info:t,PreventDefault:!1};if(a.Callback(a,i,this),i.PreventDefault)return}},this.ResetOverlaySymbolStatus=function(){for(var t=0;t<this.OverlayChartPaint.length;++t){this.OverlayChartPaint[t].Status=co.STATUS_NONE_ID}},this.OnChangeCorssCursorStatus=function(t,e){1==t.Type&&(t.IsShowCorss||(this.HideTooltip(),this.CloseTooltipDialog()))},this.UpdateWindowIndexV2=function(t){if(!we.IsNonEmptyArray(t))return!1;for(var e=[],a=0;a<this.WindowIndex.length;++a){var i=this.WindowIndex[a];i&&(i.ID&&t.find(function(t){return t.ID==i.ID})&&e.push(a))}if(!we.IsNonEmptyArray(e))return!1;if(this.IsKLineContainer()){var r=new tt;if(r.Data=this.SourceData.Data,r.Period=this.Period,r.Right=this.Right,this.IsApiPeriod);else{if(r.Right>0){var n=r.GetRightData(r.Right,{AlgorithmType:this.RightFormula});r.Data=n}if(tt.IsDayPeriod(r.Period,!1)||tt.IsMinutePeriod(r.Period,!1)){var o=r.GetPeriodData(r.Period);r.Data=o}}}else{if(!this.IsMinuteContainer())return;var r=this.SourceData}for(var a=0;a<e.length;++a)this.BindIndexData(e[a],r);this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}}function C(){return"undefined"==typeof window?1:window.devicePixelRatio||1}function c(t,e,a){if(!t)return null;e&&(t.font=e);var i="æ";we.IsString(a)&&(i=a);var r=t.measureText(i),n=r.fontBoundingBoxAscent+r.fontBoundingBoxDescent;return we.IsNumber(n)||(n=r.width+2*C()),n}function f(t){this.JSChartContainer&&this.JSChartContainer.OnKeyDown&&this.JSChartContainer.OnKeyDown(t)}function d(t,e){var a=1;if(isNaN(t))return t;t<0&&(a=-1);var i=Math.pow(10,e),r=Math.round(Math.abs(t)*i)/i*a;if(/^(\d+(?:\.\d+)?)(e)([\-]?\d+)$/.test(r))var n=r.toFixed2(e);else var n=r.toString();var o=n.indexOf(".");for(o<0&&e>0&&(o=n.length,n+=".");n.length<=o+e;)n+="0";return n}function D(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return"guid"+(t()+t())+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function m(){var t={},e=0,a=0;return document.documentElement&&(document.documentElement.scrollTop||document.documentElement.scrollLeft)?(e=document.documentElement.scrollTop,a=document.documentElement.scrollLeft):document.body&&(e=document.body.scrollTop,a=document.body.scrollLeft),t.Top=e,t.Left=a,t}function p(t){return parseInt(t)+.5}function v(t,e){return t%2==0?Math.floor(e):Math.floor(e)+.5}function g(t){return.5+t<<0}function T(t,e,a){return t>=a.Left&&t<=a.Right&&e>=a.Top&&e<=a.Bottom}function I(t){if(!t)return null;var e=(0,Bn.default)(t);return JSON.parse(e)}function S(t,e){e&&t&&(we.IsNumber(e.Left)&&(t.Left=e.Left),we.IsNumber(e.Top)&&(t.Top=e.Top),we.IsNumber(e.Right)&&(t.Right=e.Right),we.IsNumber(e.Bottom)&&(t.Bottom=e.Bottom))}function b(){}function E(){this.X,this.Y}function w(){this.Data,this.JSChartContainer,this.Start,this.End,this.XStart,this.YStart,this.XEnd,this.YEnd}function F(){this.Value,this.Message=[],this.TextColor=So.FrameSplitTextColor,this.TextBGColor,this.TextColor2,this.Font=So.FrameSplitTextFont,this.LineColor=So.FrameSplitPen,this.LineDash=null,this.LineType=1,this.LineWidth,this.ExtendLine,this.ExtendData,this.AreaData}function M(){this.UIElement,this.Left=50,this.Right=80,this.Top=50,this.Bottom=50,this.TitleHeight=24,this.TopSpace=0,this.BottomSpace=0,this.LeftExtendWidth=0,this.RightExtendWidth=0,this.MultiDayMinute={Count:1,Left:0,Right:0},this.IsShowTitleOnly=!1,this.GetBorder=function(){var t={Left:this.Left,LeftEx:this.Left+this.LeftExtendWidth,Right:this.UIElement.width-this.Right,RightEx:this.UIElement.width-this.Right-this.RightExtendWidth,Top:this.Top,TopEx:this.Top+this.TitleHeight+this.TopSpace,TopTitle:this.Top+this.TitleHeight,Bottom:this.UIElement.height-this.Bottom,BottomEx:this.UIElement.height-this.Bottom-this.BottomSpace,ChartWidth:this.UIElement.width,ChartHeight:this.UIElement.height};if(this.MultiDayMinute&&this.MultiDayMinute.Count>1&&(this.MultiDayMinute.Left>0||this.MultiDayMinute.Right>0)){for(var e=this.UIElement.width-this.Left-this.Right,a=e/this.MultiDayMinute.Count,i=[],r=0;r<this.MultiDayMinute.Count;++r){var n={Left:this.Left+a*r,Right:this.Left+a*(r+1)};n.LeftEx=n.Left+this.MultiDayMinute.Left,n.RightEx=n.Right-this.MultiDayMinute.Right,r>0&&(n.Left+=1),i.push(n)}t.DayBorder=i}return t},this.GetHScreenBorder=function(){var t={Left:this.Left,LeftEx:this.Left+this.BottomSpace,Right:this.UIElement.width-this.Right,RightEx:this.UIElement.width-this.Right-this.TitleHeight-this.TopSpace,RightTitle:this.UIElement.width-this.Right-this.TitleHeight,Top:this.Top,TopEx:this.Top+this.LeftExtendWidth,Bottom:this.UIElement.height-this.Bottom,BottomEx:this.UIElement.height-this.Bottom-this.RightExtendWidth,ChartWidth:this.UIElement.width,ChartHeight:this.UIElement.height};if(this.MultiDayMinute&&this.MultiDayMinute.Count>1&&(this.MultiDayMinute.Left>0||this.MultiDayMinute.Right>0)){for(var e=this.UIElement.height-this.Top-this.Bottom,a=e/this.MultiDayMinute.Count,i=[],r=0;r<this.MultiDayMinute.Count;++r){var n={Top:this.Top+a*r,Bottom:this.Top+a*(r+1)};n.TopEx=n.Top+this.MultiDayMinute.Left,n.BottomEx=n.Bottom-this.MultiDayMinute.Right,i.push(n)}t.DayBorder=i}return t},this.PtInClient=function(t,e,a,i){if(i){var r=this.GetHScreenBorder();a.rect(r.Left,r.TopEx,r.Right-r.Left,r.BottomEx-r.TopEx)}else{var r=this.GetBorder();if(r.DayBorder){for(var n=0;n<r.DayBorder.length;++n){var o=r.DayBorder[n];if(a.beginPath(),a.rect(o.LeftEx,r.TopEx,o.RightEx-o.LeftEx,r.BottomEx-r.TopEx),a.isPointInPath(t,e))return 1;if(a.beginPath(),a.rect(o.Left,r.TopEx,o.LeftEx-o.Left,r.BottomEx-r.TopEx),a.isPointInPath(t,e))return 200+parseInt(n);if(a.beginPath(),a.rect(o.RightEx,r.TopEx,o.Right-o.RightEx,r.BottomEx-r.TopEx),a.isPointInPath(t,e))return 300+parseInt(n)}return-1}a.rect(r.LeftEx,r.Top,r.RightEx-r.LeftEx,r.Bottom-r.Top)}return a.isPointInPath(t,e)?1:this.LeftExtendWidth>10&&(a.beginPath(),!0===i?a.rect(r.Left,r.Top,r.Right-r.Left,r.TopEx-r.Top):a.rect(r.Left,r.Top,r.LeftEx-r.Left,r.Bottom-r.Top),a.isPointInPath(t,e))?2:this.RightExtendWidth>10&&(a.beginPath(),!0===i?a.rect(r.Left,r.BottomEx,r.Right-r.Left,r.Bottom-r.BottomEx):a.rect(r.RightEx,r.Top,r.Right-r.RightEx,r.Bottom-r.Top),a.isPointInPath(t,e))?3:-1},this.GetChartWidth=function(){return this.UIElement.width},this.GetChartHeight=function(){return this.UIElement.height},this.GetLeft=function(){return this.Left+this.LeftExtendWidth},this.GetRight=function(){return this.UIElement.width-this.Right-this.RightExtendWidth},this.GetTop=function(){return this.Top},this.GetTopEx=function(){return this.Top+this.TitleHeight+this.TopSpace},this.GetTopTitle=function(){return this.Top+this.TitleHeight},this.GetBottom=function(){return this.UIElement.height-this.Bottom},this.GetBottomEx=function(){return this.UIElement.height-this.Bottom-this.BottomSpace},this.GetWidth=function(){return this.UIElement.width-this.Left-this.Right-this.LeftExtendWidth-this.RightExtendWidth},this.GetHeight=function(){return this.UIElement.height-this.Top-this.Bottom},this.GetHeightEx=function(){return this.UIElement.height-this.Top-this.Bottom-this.TitleHeight-this.TopSpace-this.BottomSpace},this.GetRightEx=function(){return this.UIElement.width-this.Right-this.TitleHeight-this.TopSpace},this.GetWidthEx=function(){return this.UIElement.width-this.Left-this.Right-this.TitleHeight-this.TopSpace-this.BottomSpace},this.GetLeftEx=function(){return this.Left+this.BottomSpace},this.GetRightTitle=function(){return this.UIElement.width-this.Right-this.TitleHeight},this.GetTitleHeight=function(){return this.TitleHeight}}function L(){this.DataMap=new Vn.default([["KLineFrame",{Create:function(t){return new _}}],["KLineHScreenFrame",{Create:function(t){return new k}}]]),this.Create=function(t,e){return this.DataMap.has(t)?this.DataMap.get(t).Create(e):(Xn.Warn("[ChartFrameFactory::Create] can't find class="+t+"."),null)},this.Add=function(t,e){var a=null;return this.DataMap.has(t)&&(a=this.DataMap.get(t)),this.DataMap.set(t,{Create:e.Create}),a}}function N(){this.HorizontalInfo=new Array,this.VerticalInfo=new Array,this.ClassName="IChartFramePainting",this.Canvas,this.Identify,this.Guid=D(),this.ChartBorder,this.PenBorder=So.FrameBorderPen,this.TitleBGColor=So.FrameTitleBGColor,this.IsShow=!0,this.SizeChange=!0,this.XYSplit=!0,this.XSplit=!0,this.YCustomSplit=!0,this.HorizontalMax,this.HorizontalMin,this.HorizontalReserved=null,this.XPointCount=10,this.ClientBGColor,this.YMaxMin={Max:null,Min:null},this.YSplitOperator,this.XSplitOperator,this.Data,this.IsLocked=!1,this.LockPaint=null,this.YSpecificMaxMin=null,this.IsShowBorder=!0,this.IsShowTitleArrow=So.IndexTitle.EnableIndexArrow,this.TitleArrowType=So.IndexTitle.ArrowType,this.IsShowIndexName=!0,this.IsShowOverlayIndexName=!0,this.OverlayIndexType={Position:1,LineSpace:3},this.IndexParamSpace=2,this.IndexTitleSpace=0,this.IsShowIndexTitle=!0,this.IsDrawTitleBottomLine=!1,this.BorderLine=null,this.Buttons=[],this.LeftButtonWidth=0,this.IsMinSize=!1,this.LogoTextColor=So.FrameLogo.TextColor,this.LogoTextFont=So.FrameLogo.Font,this.LogoBGColor=So.FrameLogo.BGColor,this.GlobalOption,this.IsDrawRightBorder=!1,this.IsDrawLeftBorder=!1,this.HorizontalLabel,this.PtInButtons=function(t,e){for(var a=0;a<this.Buttons.length;++a){var i=this.Buttons[a];if(i.Rect){var r=i.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(r.Left,r.Top,r.Width,r.Height),this.Canvas.isPointInPath(t,e))return{ID:i.ID,Rect:r}}}return null},this.PtInHorizontalLabel=function(t,e){if(!we.IsNonEmptyArray(this.HorizontalLabel))return null;for(var a=0;a<this.HorizontalLabel.length;++a){var i=this.HorizontalLabel[a],r=i.Rect;if(T(t,e,r))return{ID:i.ID,Rect:r,Item:i.Item,LineID:i.LineID}}},this.GetBorder=function(){return this.IsHScreen?this.ChartBorder.GetHScreenBorder():this.ChartBorder.GetBorder()},this.Draw=function(){this.Buttons=[],this.HorizontalLabel=[],this.DrawClientBG(),this.DrawFrame(),this.DrawBorder(),this.SizeChange=!1,this.XYSplit=!1,this.XSplit=!1,this.YCustomSplit=!1},this.DrawFrame=function(){},this.DrawClientBG=function(){if(this.ClientBGColor){var t=1==this.IsHScreen?this.ChartBorder.GetHScreenBorder():this.ChartBorder.GetBorder(),e=p(t.Left),a=p(t.Top),i=p(t.Right),r=p(t.Bottom),n=i-e,o=r-a;this.Canvas.fillStyle=this.ClientBGColor,this.Canvas.fillRect(e,a,n,o)}},this.ClearCoordinateText=function(t){if(we.IsNonEmptyArray(this.HorizontalInfo))for(var e=0;e<this.HorizontalInfo.length;++e){var a=this.HorizontalInfo[e];a&&a.Message&&Array.isArray(a.Message)&&(a.Message[0]=a.Message[1]=null)}if(we.IsNonEmptyArray(this.VerticalInfo))for(var e=0;e<this.VerticalInfo.length;++e){var a=this.VerticalInfo[e];a&&a.Message&&Array.isArray(a.Message)&&(a.Message[0]=a.Message[1]=null)}},this.DrawBorder=function(){if(this.IsShowBorder&&!this.IsMinSize){var t=1==this.IsHScreen?this.ChartBorder.GetHScreenBorder():this.ChartBorder.GetBorder(),e=p(t.Left),a=p(t.Top),i=p(t.Right),r=p(t.Bottom),n=i-e,o=r-a;if(null==this.BorderLine)if(this.IsDrawRightBorder||this.IsDrawLeftBorder){if(this.Canvas.strokeStyle=this.PenBorder,this.IsDrawRightBorder&&this.IsDrawLeftBorder){var s=p(t.ChartWidth),l=p(0);this.Canvas.strokeRect(l,a,s-l-1,o)}else if(this.IsDrawRightBorder){var s=p(t.ChartWidth);this.Canvas.strokeRect(e,a,s-e-1,o)}else if(this.IsDrawLeftBorder){var l=p(0);this.Canvas.strokeRect(l,a,i-l,o)}this.IsDrawRightBorder&&(this.Canvas.beginPath(),this.Canvas.moveTo(i,a),this.Canvas.lineTo(i,r),this.Canvas.stroke()),this.IsDrawLeftBorder&&(this.Canvas.beginPath(),this.Canvas.moveTo(e,a),this.Canvas.lineTo(e,r),this.Canvas.stroke())}else this.Canvas.strokeStyle=this.PenBorder,this.Canvas.strokeRect(e,a,n,o);else we.IsPlusNumber(this.BorderLine)&&(this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),(1&this.BorderLine)>0&&(this.Canvas.moveTo(e,a),this.Canvas.lineTo(i,a)),(2&this.BorderLine)>0&&(this.Canvas.moveTo(e,r),this.Canvas.lineTo(i,r)),(4&this.BorderLine)>0&&(this.Canvas.moveTo(e,a),this.Canvas.lineTo(e,r)),(8&this.BorderLine)>0&&(this.Canvas.moveTo(i,a),this.Canvas.lineTo(i,r)),this.Canvas.stroke())}},this.DrawTitleBG=function(){if(!(this.ChartBorder.TitleHeight<=0)){var t=this.GetBorder(),e=p(t.Left),a=p(t.Top),i=p(t.Right),r=p(this.ChartBorder.GetTopTitle()),n=i-e,o=r-a;this.Canvas.fillStyle=this.TitleBGColor,this.Canvas.fillRect(e,a,n,o),this.IsDrawTitleBottomLine&&(this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),this.Canvas.moveTo(e,p(t.TopTitle)),this.Canvas.lineTo(i,p(t.TopTitle)),this.Canvas.stroke())}},this.DrawLock=function(){this.IsLocked&&(null==this.LockPaint&&(this.LockPaint=new ne),this.LockPaint.Canvas=this.Canvas,this.LockPaint.ChartBorder=this.ChartBorder,this.LockPaint.ChartFrame=this,this.LockPaint.Draw(!0))},this.DrawLogo=function(){var t=this.GetBorder(),e=So.FrameLogo.Text;if(we.IsString(e)){this.Canvas.font=this.LogoTextFont,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom";var a=this.Canvas.measureText("æ").width,i=this.Canvas.measureText(e).width;if(this.IsHScreen){var r=t.Left+5,n=t.Top+5;this.Canvas.save(),this.Canvas.translate(r,n),this.Canvas.rotate(90*Math.PI/180);var o={Left:0,Bottom:0,Width:i+4,Height:a+4};o.Top=o.Bottom-o.Height,o.Right=o.Left+o.Width,this.LogoBGColor&&(this.Canvas.fillStyle=this.LogoBGColor,this.Canvas.fillRect(o.Left,o.Top,o.Width,o.Height)),this.Canvas.fillStyle=this.LogoTextColor,this.Canvas.fillText(e,1,0),this.Canvas.restore()}else{var o={Left:t.Left+5,Bottom:t.Bottom-5,Width:i+4,Height:a+4};o.Top=o.Bottom-o.Height,o.Right=o.Left+o.Width,this.LogoBGColor&&(this.Canvas.fillStyle=this.LogoBGColor,this.Canvas.fillRect(o.Left,o.Top,o.Width,o.Height));var r=o.Left+1,n=o.Bottom-1;this.Canvas.fillStyle=this.LogoTextColor,this.Canvas.fillText(e,r,n)}}},this.CalculateLock=function(){this.IsLocked&&(null==this.LockPaint&&(this.LockPaint=new ne),this.LockPaint.Canvas=this.Canvas,this.LockPaint.ChartBorder=this.ChartBorder,this.LockPaint.ChartFrame=this,this.LockPaint.Draw(!1))},this.SetLock=function(t){if(!t)return void(this.IsLocked=!1);this.IsLocked=!0,this.LockPaint||(this.LockPaint=new ne),t.Callback&&(this.LockPaint.Callback=t.Callback),t.IndexName&&(this.LockPaint.IndexName=t.IndexName),t.ID&&(this.LockPaint.LockID=t.ID),t.BG&&(this.LockPaint.BGColor=t.BG),t.Text&&(this.LockPaint.Title=t.Text),t.TextColor&&(this.LockPaint.TextColor=t.TextColor),t.Font&&(this.LockPaint.Font=t.Font),t.Count&&(this.LockPaint.LockCount=t.Count),t.MinWidth>0&&(this.LockPaint.MinWidth=t.MinWidth)},this.GetLockRect=function(){return this.IsLocked&&this.LockPaint?this.LockPaint.LockRect:null},this.ReloadResource=function(t){t||(this.PenBorder=So.FrameBorderPen,this.TitleBGColor=So.FrameTitleBGColor);for(var e in this.HorizontalInfo){var a=this.HorizontalInfo[e];a.Font&&(a.Font=So.FrameSplitTextFont),a.TextColor&&(a.TextColor=So.FrameSplitTextColor),a.LineColor&&(a.LineColor=So.FrameSplitPen)}for(var e in this.VerticalInfo){var a=this.VerticalInfo[e];a.Font&&(a.Font=So.FrameSplitTextFont),a.TextColor&&(a.TextColor=So.FrameSplitTextColor),a.LineColor&&(a.LineColor=So.FrameSplitPen)}},this.GetFontHeight=function(t){return c(this.Canvas,t,"æ")},this.GetScaleTextWidth=function(){},this.IsMinuteFrame=function(t){var e=["MinuteFrame","MinuteHScreenFrame","OverlayMinuteFrame","OverlayMinuteHScreenFrame"];return!1===t&&(e=["MinuteFrame","MinuteHScreenFrame"]),e.includes(this.ClassName)},this.IsKLineFrame=function(t){var e=["KLineFrame","KLineHScreenFrame","KLineHScreenFrame","OverlayKLineHScreenFrame"];return!1===t&&(e=["KLineFrame","KLineHScreenFrame"]),e.includes(this.ClassName)}}function R(){this.newMethod=N,this.newMethod(),delete this.newMethod,this.ClassName="AverageWidthFrame",this.DataWidth=50*C(),this.DistanceWidth=10*C(),this.MinXDistance=30*C(),this.MinYDistance=12*C(),this.CoordinateType=0,this.IsShowYText=[!0,!0],this.XBottomOffset=So.Frame.XBottomOffset,this.YTextTopOffset=So.Frame.YTopOffset,this.YTextPosition=[0,0],this.YTextPadding=[So.Frame.YTextPadding[0],So.Frame.YTextPadding[1]],this.IsShowXLine=!0,this.IsShowYLine=!0,this.YInsideOffset=0,this.YTextBaseline=0,this.MultiTextFormat=0,this.RightTextMaxWidth=0,this.ShortYLineLength=5,this.ShortXLineLength=5,this.BeforeDrawXYCallback,this.GetEventCallback,this.ToolbarButtonStyle=So.ToolbarButtonStyle,this.CloseWindowButton=I(So.Buttons.CloseWindow),this.OverlayIndexButton=I(So.Buttons.OverlayIndex),this.ChangeIndexButton=I(So.Buttons.ChangeIndex),this.ModifyIndexParamButton=I(So.Buttons.ModifyIndexParam),this.MaxMinWindowButton=I(So.Buttons.MaxMinWindow),this.TitleWindowButton=I(So.Buttons.TitleWindow),this.ExportDataButton=I(So.Buttons.ExportData),this.ButtonTooltip=I(So.Buttons.Tooltip),this.YLineExtend,this.YTextExtend,this.YRightTextInfo,this.XTextExtend,this.XLineExtend,this.FrameData={SubFrameItem:null},this.DrawPicture={BGColor:So.DrawPicture.XYCoordinate.BGColor,TextBGColor:So.DrawPicture.XYCoordinate.TextBGColor,TextColor:So.DrawPicture.XYCoordinate.TextColor,Font:So.DrawPicture.XYCoordinate.Font},this.IChartFramePainting_ReloadResource=this.ReloadResource,this.ReloadResource=function(t){this.IChartFramePainting_ReloadResource(t),t||(this.ToolbarButtonStyle=So.ToolbarButtonStyle,this.CloseWindowButton=I(So.Buttons.CloseWindow),this.OverlayIndexButton=I(So.Buttons.OverlayIndex),this.ChangeIndexButton=I(So.Buttons.ChangeIndex),this.ModifyIndexParamButton=I(So.Buttons.ModifyIndexParam),this.MaxMinWindowButton=I(So.Buttons.MaxMinWindow),this.TitleWindowButton=I(So.Buttons.TitleWindow),this.ButtonTooltip=I(So.Buttons.Tooltip))},this.DrawFrame=function(){if(this.XPointCount>0){var t=this.ChartBorder.GetWidth()/(6*this.XPointCount);this.DistanceWidth=2*t,this.DataWidth=4*t}this.DrawHorizontal(),this.DrawVertical()},this.DrawTitleButton=function(t,e,a){var i=this.GetBorder();if(this.IsHScreen){var r=i.Bottom-3,n=i.RightTitle+this.ChartBorder.TitleHeight/2;this.Canvas.save(),this.Canvas.translate(n,r),this.Canvas.rotate(90*Math.PI/180);for(var o=0,s=0,l=0,h=0;h<t.length;++h){var u=t[h],C=u.Style.Size,s=l-C-u.Style.MerginLeft,c=C+"px "+u.Style.Family,f=u.Style.Color;this.Canvas.fillStyle=f,this.Canvas.font=c,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(u.Style.Text,s,0);var d={Left:n-C/2,Right:n+C/2,Bottom:r,Width:C,Height:C+u.Style.MerginLeft};d.Top=d.Bottom-C-u.Style.MerginLeft,this.Buttons.push({ID:u.ID,Rect:d}),l=s,r=d.Top}this.Canvas.restore()}else for(var D=i.Right-3,o=(i.Left,i.Top+this.ChartBorder.TitleHeight/2),h=0;h<t.length;++h){var u=t[h],C=u.Style.Size,m=D-C-u.Style.MerginLeft,c=C+"px "+u.Style.Family,d={Left:m,Top:o-C/2,Right:m+C+u.Style.MerginLeft,Bottom:o+C/2,Width:C+u.Style.MerginLeft,Height:C},f=u.Style.Color;e&&e.X>=d.Left&&e.X<d.Right&&e.Y>=d.Top&&e.Y<=d.Bottom&&(f=u.Style.MoveOnColor,a&&(a.MouseOnToolbar={Rect:d,Item:u,Frame:this,Point:{X:e.X,Y:e.Y}})),this.Canvas.fillStyle=f,this.Canvas.font=c,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(u.Style.Text,m,o),this.Buttons.push({ID:u.ID,Rect:d}),D=m}},this.DrawToolbarTooltip=function(t){if(t){var e=this.GetBorder(),a=null;if(t.Item.TooltipText)a=t.Item.TooltipText;else{var i="Toolbar-"+t.Item.ID;a=bo.GetText(i,0)}if(a){var r=(C(),this.Canvas);if(this.GetExtraCanvas){var n=this.GetExtraCanvas(l.TooltipCursorCanvasKey);n&&(r=n.Canvas)}var o=t.Rect.Left+t.Rect.Width/2;r.font=this.ButtonTooltip.Font,r.textAlign="left",r.textBaseline="bottom";var s=this.ButtonTooltip.Mergin,h=r.measureText(a).width+s.Left+s.Right,u=this.GetFontHeight(),c=u+s.Top+s.Bottom;if("TitleButton"==t.ID)var f=t.Point.X,d=t.Point.Y+20;else if(qn.CLOSE_BEFOREOPEN_ID==t.Item.ID)var f=t.Rect.Right+5,d=t.Rect.Top;else if(qn.DRAW_PICTURE_DELETE==t.Item.ID||qn.DRAW_PICTURE_SETTING==t.Item.ID||t.Item.ID>=qn.DRAW_PICTURE_BUTTON_1&&t.Item.ID<=qn.DRAW_PICTURE_BUTTON_18){var f=t.Point.X,d=t.Point.Y+20;f+h>=e.ChartWidth&&(f=e.ChartWidth-h-2)}else{var f=o-h/2,d=e.Top-c;d<0&&(d=e.TopEx+1),f+h>e.ChartWidth&&(f=e.ChartWidth-h-2)}if(we.IsNumber(this.ButtonTooltip.BorderRadius)){var D=this.ButtonTooltip.BorderRadius;r.beginPath(),r.roundRect(p(f),p(d),g(h),g(c),[D]),r.closePath(),r.fillStyle=this.ButtonTooltip.ColorBG,r.fill(),r.strokeStyle=this.ButtonTooltip.ColorBorder,r.stroke(),r.fillStyle=this.ButtonTooltip.Color,r.fillText(a,f+s.Left,d+c-s.Bottom)}else r.fillStyle=this.ButtonTooltip.ColorBG,r.fillRect(f,d,h,c),r.fillStyle=this.ButtonTooltip.Color,r.fillText(a,f+s.Left,d+c-s.Bottom)}}},this.GetYFromData=function(t,e){if(this.Logarithmic&&this.GetYLogarithmicFromData)return this.GetYLogarithmicFromData(t,e);if(!1===e){if(1==this.CoordinateType){var a=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetTopEx()+a}var a=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetBottomEx()-a}if(1==this.CoordinateType){if(t<=this.HorizontalMin)return this.ChartBorder.GetTopEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetBottomEx();var a=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetTopEx()+a}if(t<=this.HorizontalMin)return this.ChartBorder.GetBottomEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetTopEx();var a=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetBottomEx()-a},this.DrawHorizontal=function(){if(this.RightTextMaxWidth=0,we.IsNonEmptyArray(this.HorizontalInfo)&&!this.ChartBorder.IsShowTitleOnly){var t=this.ChartBorder.GetBorder(),e=t.Left,a=t.Right,i=t.Bottom,r=this.ChartBorder.GetTop(),n=this.ChartBorder.Right,o=this.ChartBorder.Left,s=o>10&&!0===this.IsShowYText[0]&&2!=this.YTextPosition[0],l=n>10&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1],h=null,u=null;we.IsNonEmptyArray(this.YLineExtend)&&(h=this.YLineExtend[1],u=this.YLineExtend[0]);var c=null,f=null;we.IsNonEmptyArray(this.YTextExtend)&&(f=this.YTextExtend[0],c=this.YTextExtend[1]);for(var d,D,m,v,g=null,T=C(),I=(t.BottomEx-t.TopEx)/this.HorizontalInfo.length,S=[],x=0,y=this.HorizontalInfo.length-1;y>=0;--y){var E=this.HorizontalInfo[y];if(we.IsNumber(E.Value)&&(!b.GT(E.Value,this.HorizontalMax)&&!b.LT(E.Value,this.HorizontalMin))){var w=this.GetYFromData(E.Value);if(!(null!=w&&null!=g&&Math.abs(w-g)<this.MinYDistance)){var F=p(w);if(w!=i&&this.IsShowYLine){var M=!1;we.IsPlusNumber(E.LineWidth)&&(this.Canvas.lineWidth=E.LineWidth*T,M=!0),this.Canvas.strokeStyle=E.LineColor,2==E.LineType?(this.Canvas.save(),E.LineDash?this.Canvas.setLineDash(E.LineDash):this.Canvas.setLineDash([5*T,5*T]),this.Canvas.beginPath(),this.Canvas.moveTo(e,F),this.Canvas.lineTo(a,F),this.Canvas.stroke(),this.Canvas.setLineDash([]),this.Canvas.restore()):3==E.LineType||8==E.LineType||9==E.LineType||E.LineType>0&&(So.FrameYLineDash?(this.Canvas.save(),this.Canvas.setLineDash(So.FrameYLineDash),this.Canvas.beginPath(),this.Canvas.moveTo(e,F),this.Canvas.lineTo(a,F),this.Canvas.stroke(),this.Canvas.setLineDash([]),this.Canvas.restore()):(this.Canvas.beginPath(),this.Canvas.moveTo(e,F),this.Canvas.lineTo(a,F),this.Canvas.stroke())),M&&(this.Canvas.lineWidth=T)}var L=w;if(w>=i-2?(this.Canvas.textBaseline="bottom",x=2):w<=r+2?(this.Canvas.textBaseline="top",L+=this.YTextTopOffset,x=0):(this.Canvas.textBaseline="middle",x=1),this.Canvas.strokeStyle=E.TextColor,this.Canvas.fillStyle=E.TextColor,null!=E.Message[0]&&s){var N=0;if(we.IsNonEmptyArray(E.YOffset)){var R=E.YOffset[0];R&&we.IsNumber(R.Offset)&&(N=R.Offset)}if(Array.isArray(E.Message[0])){if(3==this.MultiTextFormat){var A={Data:E.Message[0],X:e,Y:L,TextBaseLine:x,IsLeft:!0,Item:E,TextPadding:this.YTextPadding[0]};this.DrawMultiLineText(A)}}else{null!=E.Font&&(this.Canvas.font=E.Font);var O=e;if(u&&u.Width>1){var P=u.Width;u.Color?this.Canvas.strokeStyle=u.Color:this.Canvas.strokeStyle=E.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(O,F),this.Canvas.lineTo(O-P,F),this.Canvas.stroke(),O-=P}m=this.GetTextTopBottom(x,L),(!v||m&&!this.IsTextTopBottomOverlap(m,v))&&(f&&1===f.Align?(this.Canvas.textAlign="left",this.Canvas.fillText(E.Message[0],this.YTextPadding[0],L+N)):(this.Canvas.textAlign="right",this.Canvas.fillText(E.Message[0],O-this.YTextPadding[0],L+N),v=m))}}if(null!=E.Message[1]&&l){var N=0;if(we.IsNonEmptyArray(E.YOffset)){var R=E.YOffset[1];R&&we.IsNumber(R.Offset)&&(N=R.Offset)}null!=E.Font&&(this.Canvas.font=E.Font);var O=a;if(3==E.LineType){var P=this.ShortYLineLength*C();this.Canvas.beginPath(),this.Canvas.moveTo(O,F),this.Canvas.lineTo(O+P,F),this.Canvas.stroke(),O+=P}if(h&&h.Width>1){var P=h.Width;h.Color?this.Canvas.strokeStyle=h.Color:this.Canvas.strokeStyle=E.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(O,F),this.Canvas.lineTo(O+P,F),this.Canvas.stroke(),O+=P+2}if(this.Canvas.textAlign="left",Array.isArray(E.Message[1]))if(1==this.MultiTextFormat){E.ExtendData&&E.ExtendData.Font&&(this.Canvas.font=E.ExtendData.Font);var B={Text:[{Text:E.Message[1][0],Width:this.Canvas.measureText(E.Message[1][0]).width},{Text:E.Message[1][1],Width:this.Canvas.measureText(E.Message[1][1]).width}],X:O+2,Y:L,TextBaseline:this.Canvas.textBaseline,Item:E};S.push(B)}else if(2==this.MultiTextFormat){this.Canvas.fillText(E.Message[1][0],O+this.YTextPadding[1],L);var _=this.Canvas.measureText("M").width;I>2*_&&this.Canvas.fillText(E.Message[1][1],O+this.YTextPadding[1],L+_)}else if(3==this.MultiTextFormat){var A={Data:E.Message[1],X:O,Y:L,TextBaseLine:x,IsLeft:!1,Item:E,TextPadding:this.YTextPadding[1]};this.DrawMultiLineText(A)}else{var G=E.Message[1][0];if(E.TextColor2&&(this.Canvas.fillStyle=E.TextColor2),c&&2===c.Align&&this.YRightTextInfo){this.Canvas.textAlign="right";var k=this.YRightTextInfo.MainTextWidth+a-this.YTextPadding[1];this.Canvas.fillText(G,k,L)}else this.Canvas.fillText(G,O+this.YTextPadding[1],L)}else if(D=this.GetTextTopBottom(x,L),!d||D&&!this.IsTextTopBottomOverlap(D,d)){if(E.TextColor2&&(this.Canvas.fillStyle=E.TextColor2),c&&2===c.Align&&this.YRightTextInfo){this.Canvas.textAlign="right";var k=this.YRightTextInfo.MainTextWidth+a-this.YTextPadding[1];this.Canvas.fillText(E.Message[1],k,L+N)}else this.Canvas.fillText(E.Message[1],O+this.YTextPadding[1],L+N);d=D}}g=w}}}if(we.IsNonEmptyArray(S)&&1==this.MultiTextFormat&&this.DrawHorizontalMuText(S),l&&this.IsDrawRightBorder&&this.YRightTextInfo){var k=this.YRightTextInfo.MainTextWidth+a;if(xLine=p(k),this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),this.Canvas.moveTo(xLine,r),this.Canvas.lineTo(xLine,i),this.Canvas.stroke(),we.IsNonEmptyArray(this.YRightTextInfo.AryOverlayWidth)){this.Canvas.beginPath();for(var y=0;y<this.YRightTextInfo.AryOverlayWidth.length;++y){k+=this.YRightTextInfo.AryOverlayWidth[y],xLine=p(k),this.Canvas.moveTo(xLine,r),this.Canvas.lineTo(xLine,i)}this.Canvas.stroke()}}}},this.DrawMultiLineText=function(t){var e=this.Canvas.measureText("æ").width,a=t.Data.length,i=e*a+2*(a-1),r=t.Y;if(null!=t.Item.Font&&(this.Canvas.font=t.Item.Font),t.IsLeft){this.Canvas.textAlign="right";var n=t.X-t.TextPadding}else{this.Canvas.textAlign="left";var n=t.X+t.TextPadding}var o=this.Canvas.textBaseline;this.Canvas.textBaseline="top",1==t.TextBaseLine?r-=i/2:0==t.TextBaseLine||2==t.TextBaseLine&&(r-=i);for(var s=0;s<t.Data.length;++s){var l=t.Data[s],h=l.Text,u=null;l.Color&&(u=this.Canvas.fillStyle,this.Canvas.fillStyle=l.Color),this.Canvas.fillText(h,n,r),r+=e+2,u&&(this.Canvas.fillStyle=u)}this.Canvas.textBaseline=o},this.IsTextTopBottomOverlap=function(t,e){return e.Top>=t.Top&&e.Top<=t.Bottom||e.Bottom>=t.Top&&e.Bottom<=t.Bottom},this.GetTextTopBottom=function(t,e){var a=null,i=this.Canvas.measureText("æ").width;return 0==t?a={Top:e,Bottom:e+i}:1==t?(a={Top:e-i/2},a.Bottom=a.Top+i):2==t&&(a={Bottom:e},a.Top=a.Bottom-i),a},this.DrawHorizontalMuText=function(t){for(var e=[null,null],a=0;a<t.length;++a){var i=t[a],r=i.Text[0].Width;we.IsNumber(e[0])?e[0]<r&&(e[0]=r):e[0]=r,r=i.Text[1].Width,we.IsNumber(e[1])?e[1]<r&&(e[1]=r):e[1]=r}for(var a=0;a<t.length;++a){var i=t[a],n=i.Item;this.Canvas.textBaseline=n.TextBaseline,n.ExtendData&&n.ExtendData.Font?this.Canvas.font=n.ExtendData.Font:n.Font&&(this.Canvas.font=n.Font),n.ExtendData&&n.ExtendData.PriceColor?this.Canvas.fillStyle=n.ExtendData.PriceColor:this.Canvas.fillStyle=n.TextColor,this.Canvas.textAlign="right";var o=i.X+e[1];this.Canvas.fillText(i.Text[1].Text,o,i.Y),n.ExtendData&&n.ExtendData.SplitColor?this.Canvas.fillStyle=n.ExtendData.SplitColor:this.Canvas.fillStyle=n.TextColor,this.Canvas.textAlign="left";var s=this.Canvas.measureText("/").width;this.Canvas.fillText("/",o,i.Y),n.ExtendData&&n.ExtendData.PercentageColor?this.Canvas.fillStyle=n.ExtendData.PercentageColor:this.Canvas.fillStyle=n.TextColor,this.Canvas.textAlign="right";var o=i.X+e[1]+e[0]+s;this.Canvas.fillText(i.Text[0].Text,o,i.Y);var l=e[1]+e[0]+4*s;this.RightTextMaxWidth<l&&(this.RightTextMaxWidth=l)}},this.DrawInsideClientHorizontal=function(){var t=this.GetBorder();if(t.DayBorder&&we.IsNonEmptyArray(t.DayBorder))var e=t.DayBorder[0],a=e.LeftEx,e=t.DayBorder[t.DayBorder.length-1],i=e.RightEx,r=t.Bottom,n=t.TopTitle;else var a=t.LeftEx,i=t.RightEx,r=t.Bottom,n=t.TopTitle;for(var o=C(),s=null,l=null,h=this.HorizontalInfo.length-1;h>=0;--h){var e=this.HorizontalInfo[h],u=this.GetYFromData(e.Value);if(!(null!=u&&null!=s&&Math.abs(u-s)<this.MinYDistance)){if(e.Message[2]){null!=e.Font&&(this.Canvas.font=e.Font),this.Canvas.fillStyle=e.TextColor,this.Canvas.textAlign="left";var c=u;u>=r-2?this.Canvas.textBaseline="bottom":u<=n+2?(this.Canvas.textBaseline="top",c+=this.YTextTopOffset):this.Canvas.textBaseline="middle";var f={X:a,Y:c,Text:{BaseLine:this.Canvas.textBaseline,TextAlign:this.Canvas.textAlign,Font:this.Canvas.font,Value:e.Message[0]}};this.IsOverlayMaxMin&&this.IsOverlayMaxMin(f)||(this.Canvas.fillText(e.Message[2],a+1*o,c),(null==l||l>c)&&(this.YInsideOffset=this.Canvas.measureText(e.Message[2]).width+4*C(),l=c))}if(e.Message[3]){null!=e.Font&&(this.Canvas.font=e.Font),this.Canvas.fillStyle=e.TextColor,this.Canvas.textAlign="right";var c=u;u>=r-2?this.Canvas.textBaseline="bottom":u<=n+2?(this.Canvas.textBaseline="top",c+=this.YTextTopOffset):this.Canvas.textBaseline="middle";var d=this.Canvas.measureText(e.Message[3]).width,f={X:i-d,Y:c,Text:{BaseLine:this.Canvas.textBaseline,TextAlign:this.Canvas.textAlign,Font:this.Canvas.font,Value:e.Message[1]}};this.IsOverlayMaxMin&&this.IsOverlayMaxMin(f)||this.Canvas.fillText(e.Message[3],i-1*o,c)}s=u}}},this.DrawInsideHorizontal=function(){if(!0!==this.IsHScreen&&!(this.IsMinSize||this.ChartBorder.IsShowTitleOnly||!1===this.IsShowYText[0]&&!1===this.IsShowYText[1])){this.DrawInsideClientHorizontal();var t=this.ChartBorder.GetBorder(),e=t.Left,a=t.Right,i=t.Bottom,r=t.TopTitle,n=this.ChartBorder.Right,o=this.ChartBorder.Left,s=(this.ChartBorder.TitleHeight,(o<10||2==this.YTextPosition[0])&&!0===this.IsShowYText[0]),l=(n<10||2==this.YTextPosition[1])&&!0===this.IsShowYText[1];if(s||l)for(var h=C(),u=null,c=null,f=this.HorizontalInfo.length-1;f>=0;--f){var d=this.HorizontalInfo[f],D=this.GetYFromData(d.Value);if(!(null!=D&&null!=u&&Math.abs(D-u)<this.MinYDistance)){if(null!=d.Message[0]&&s){null!=d.Font&&(this.Canvas.font=d.Font),this.Canvas.fillStyle=d.TextColor,this.Canvas.textAlign="left";var m=this.Canvas.measureText("æ").width,p=D;D>=i-2?this.Canvas.textBaseline="bottom":D-m/2<=r?(this.Canvas.textBaseline="top",p+=this.YTextTopOffset):1==this.YTextBaseline?this.Canvas.textBaseline="bottom":this.Canvas.textBaseline="middle";var v={X:e,Y:p,Text:{BaseLine:this.Canvas.textBaseline,TextAlign:this.Canvas.textAlign,Font:this.Canvas.font,Value:d.Message[0]}};this.IsOverlayMaxMin&&this.IsOverlayMaxMin(v)||(this.Canvas.fillText(d.Message[0],e+1*h,p),(null==c||c>p)&&(this.YInsideOffset=this.Canvas.measureText(d.Message[0]).width+4*C(),c=p))}if(null!=d.Message[1]&&l){null!=d.Font&&(this.Canvas.font=d.Font),this.Canvas.fillStyle=d.TextColor,this.Canvas.textAlign="right";var m=this.Canvas.measureText("æ").width,p=D;if(D>=i-2?this.Canvas.textBaseline="bottom":D-m/2<=r?(this.Canvas.textBaseline="top",p+=this.YTextTopOffset):1==this.YTextBaseline?this.Canvas.textBaseline="bottom":this.Canvas.textBaseline="middle",Array.isArray(d.Message[1]))var g=d.Message[1][0];else var g=d.Message[1];var T=this.Canvas.measureText(g).width,v={X:a-T,Y:p,Text:{BaseLine:this.Canvas.textBaseline,TextAlign:this.Canvas.textAlign,Font:this.Canvas.font,Value:d.Message[1]}};this.IsOverlayMaxMin&&this.IsOverlayMaxMin(v)||this.Canvas.fillText(g,a-1*h,p)}u=D}}}},this.GetXFromIndex=function(t){var e=this.XPointCount;return 1==e?0==t?this.ChartBorder.GetLeft():this.ChartBorder.GetRight():e<=0?this.ChartBorder.GetLeft():t>=e?this.ChartBorder.GetRight():this.ChartBorder.GetLeft()+this.ChartBorder.GetWidth()*t/e},this.DrawVertical=function(){var t=this.GetBorder(),e=t.TopTitle,a=t.Bottom,i=t.RightEx,r=C(),n=null;this.GetVerticalXCache&&(n=this.GetVerticalXCache());var o=null;this.XTextExtend&&(o=this.XTextExtend[0]);var s=null;this.XLineExtend&&(s=this.XLineExtend[0]);for(var l=null,h=null,u=0;u<this.VerticalInfo.length;++u){var c=this.VerticalInfo[u],f=null;if((f=n&&n.has(c.Value)?n.get(c.Value):this.GetXFromIndex(c.Value))>i)break;if(!(null!=l&&Math.abs(f-l)<this.MinXDistance)){var c=this.VerticalInfo[u],d=p(f);if(this.IsShowXLine&&(2==c.LineType?(this.Canvas.strokeStyle=this.VerticalInfo[u].LineColor,c.LineDash?this.Canvas.setLineDash(c.LineDash):this.Canvas.setLineDash([5*r,5*r]),this.Canvas.beginPath(),this.Canvas.moveTo(d,e),this.Canvas.lineTo(d,a),this.Canvas.stroke(),this.Canvas.setLineDash([])):3==c.LineType||c.LineType>0&&(So.FrameXLineDash?(this.Canvas.strokeStyle=this.VerticalInfo[u].LineColor,this.Canvas.setLineDash(So.FrameXLineDash),this.Canvas.beginPath(),this.Canvas.moveTo(d,e),this.Canvas.lineTo(d,a),this.Canvas.stroke(),this.Canvas.setLineDash([])):(this.Canvas.strokeStyle=this.VerticalInfo[u].LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(d,e),this.Canvas.lineTo(d,a),this.Canvas.stroke()))),c.BG&&this.DrawDayVertical&&this.DrawDayVertical(c,f,t),null!=this.VerticalInfo[u].Message[0]&&this.ChartBorder.Bottom>5*r){this.VerticalInfo[u].Font&&(this.Canvas.font=this.VerticalInfo[u].Font);var D=0;this.Canvas.strokeStyle=c.TextColor;var m=this.Canvas.measureText(this.VerticalInfo[u].Message[0]).width,v=this.Canvas.measureText("æ").width;if(o&&1==o.Align?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",D=f):f<m/2?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",D=f):f+m/2>=this.ChartBorder.GetChartWidth()?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top",D=f-m):(this.Canvas.textAlign="center",this.Canvas.textBaseline="top",D=f-m/2),null==h||D>h){var g=a;if(3==c.LineType){var T=this.ShortXLineLength*r;this.Canvas.beginPath(),this.Canvas.moveTo(d,g),this.Canvas.lineTo(d,g+T),this.Canvas.stroke(),g+=T+2*r}if(s)if(1===s.Mode)c.Value>1&&(s.Color&&(this.Canvas.strokeStyle=s.Color),this.Canvas.beginPath(),this.Canvas.moveTo(d,a),this.Canvas.lineTo(d,t.ChartHeight),this.Canvas.stroke(),f+=1);else if(2===s.Mode&&s.Width>=1){var T=s.Width;s.Color&&(this.Canvas.strokeStyle=s.Color),this.Canvas.beginPath(),this.Canvas.moveTo(d,g),this.Canvas.lineTo(d,g+T),this.Canvas.stroke(),g+=T+2}if(c.TextBGColor){var I={Left:D,Top:g+this.XBottomOffset,Width:m,Height:v};this.Canvas.fillStyle=c.TextBGColor,this.Canvas.fillRect(I.Left-1,I.Top,I.Width+2,I.Height)}this.Canvas.fillStyle=c.TextColor,this.Canvas.fillText(this.VerticalInfo[u].Message[0],f,g+this.XBottomOffset),h=D+m}}l=f}}},this.GetYData=function(t,e){return this.Logarithmic&&this.GetYLogarithmicFromData?this.GetYLogarithmicData(t):1==this.CoordinateType?0==e?(t-this.ChartBorder.GetTopEx())/this.ChartBorder.GetHeightEx()*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin:t<this.ChartBorder.GetTopEx()?this.HorizontalMin:t>this.ChartBorder.GetBottomEx()?this.HorizontalMax:(t-this.ChartBorder.GetTopEx())/this.ChartBorder.GetHeightEx()*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin:0==e?(this.ChartBorder.GetBottomEx()-t)/this.ChartBorder.GetHeightEx()*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin:t<this.ChartBorder.GetTopEx()?this.HorizontalMax:t>this.ChartBorder.GetBottomEx()?this.HorizontalMin:(this.ChartBorder.GetBottomEx()-t)/this.ChartBorder.GetHeightEx()*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin},this.GetXData=function(t){return t<=this.ChartBorder.GetLeft()?0:t>=this.ChartBorder.GetRight()?this.XPointCount:(t-this.ChartBorder.GetLeft())*(1*this.XPointCount/this.ChartBorder.GetWidth())},this.DrawPictureXCoordinate=function(t,e,a){if(!this.IsHScreen&&e&&we.IsNonEmptyArray(e.Points)){var i=this.GetBorder(),r=i.Left,n=i.Right;this.Canvas.font=this.DrawPicture.Font;var o=this.GetFontHeight();if(this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",e.X){var s=e.X,l=s.Min.X,h=s.Max.X;l<r&&(l=r),h>n&&(h=n),this.Canvas.fillStyle=this.DrawPicture.BGColor,this.Canvas.fillRect(l,i.Bottom,h-l,o)}for(var u=0;u<e.Points.length;++u){var C=e.Points[u];if(!(C.X<r||C.X>n)){var c=this.GetXData(C.X,!1),c=Math.round(c),f=this.GetKItem(c);if(f){var d=we.FormatDateString(f.Date,null);tt.IsMinutePeriod(a.Period)?d+=" "+we.FormatTimeString(f.Time,"HH:MM"):tt.IsMilliSecondPeriod(a.Period)&&(d+=" "+we.FormatTimeString(f.Time,"HH:MM:SS.fff"));var D=this.Canvas.measureText(d).width+2,m=C.X-D/2;m<r&&(m=r),this.Canvas.fillStyle=this.DrawPicture.TextBGColor,this.Canvas.fillRect(m,i.Bottom,D,o),this.Canvas.fillStyle=this.DrawPicture.TextColor;var p=i.Bottom+o;this.Canvas.fillText(d,m+1,p)}}}}},this.GetKItem=function(t){if(!this.Data)return null;if(!we.IsNonEmptyArray(this.Data.Data))return null;var e=this.Data.DataOffset+t;return this.Data.Data[e]},this.DrawPictureYCoordinate=function(t,e,a){if(!this.IsHScreen&&e&&we.IsNonEmptyArray(e.Points)){var i=this.GetBorder(),r=i.TopEx,n=i.BottomEx,o=i.Right;this.Canvas.font=this.DrawPicture.Font;var s=this.GetFontHeight();this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom";var l=2;a&&a.Symbol&&(l=sr(a.Symbol));for(var h=0,u=0;u<e.Points.length;++u){var C=e.Points[u],c=this.GetYData(C.Y),f=c.toFixed(l),d=this.Canvas.measureText(f).width;h<d&&(h=d),e.Points[u].Text=f}if(h+=this.YTextPadding[1]+2,e.Y){var D=e.Y,m=D.Min.Y,p=D.Max.Y;D.Min.Y<r&&(m=r),D.Max.Y>n&&(p=n),this.Canvas.fillStyle=this.DrawPicture.BGColor,this.Canvas.fillRect(o,m,h+5,p-m)}for(var u=0;u<e.Points.length;++u){var C=e.Points[u];if(!(C.Y<r||C.Y>n)){this.Canvas.fillStyle=this.DrawPicture.TextBGColor,this.Canvas.fillRect(o,C.Y-s/2,h,s),this.Canvas.fillStyle=this.DrawPicture.TextColor;var v=C.Y+s/2;this.Canvas.fillText(C.Text,o+this.YTextPadding[1],v)}}}},this.DrawPicturePointYCoordinate=function(t,e){if(!this.IsHScreen&&t.GetYCoordinatePoint){var a=t.GetYCoordinatePoint();if(we.IsNonEmptyArray(a)){var i=this.GetBorder(),r=i.TopEx,n=i.BottomEx,o=i.Right;this.Canvas.font=this.DrawPicture.Font;var s=this.GetFontHeight();this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom";var l=2;e&&e.Symbol&&(l=sr(e.Symbol));for(var h=0;h<a.length;++h){var u=a[h];if(u&&!(u.Y<r||u.Y>n)){var C=u.YValue.toFixed(l),c=this.Canvas.measureText(C).width+2;c+=this.YTextPadding[1],this.Canvas.fillStyle=this.DrawPicture.TextBGColor,this.Canvas.fillRect(o,u.Y-s/2,c,s),this.Canvas.fillStyle=this.DrawPicture.TextColor;var f=u.Y+s/2;this.Canvas.fillText(C,o+this.YTextPadding[1],f)}}}}},this.GetCustomItemTextInfo=function(t,e,a){var i=e?t.Message[0]:t.Message[1],r=[],n=0;if(Array.isArray(i)){for(var o=0;o<i.length;++o){var t=i[o];if(1===t.Type)r.push({Type:t.Type});else{var s=this.Canvas.measureText(i[o].Text).width;s>n&&(n=s);var l={Text:i[o].Text,Width:s+2*a};t.TextColor&&(l.TextColor=t.TextColor),t.BGColor&&(l.BGColor=t.BGColor),we.IsBool(t.EnableBGColor)&&(l.EnableBGColor=t.EnableBGColor),r.push(l)}}n>0&&(n+=2*a)}else n=this.Canvas.measureText(i).width+2*a,r.push({Text:i,Width:n});return{MaxWidth:n,Text:r}},this.DrawOutRangeCustomItem=function(t,e){if(!0!==this.IsHScreen&&(this.IsShow||this.IsYDrawMainFrame)&&(t.Message[1]||t.Message[0])&&t.OutRange){var a=0;if(t.Value>this.HorizontalMax)a=1;else{if(!(t.Value<this.HorizontalMin))return;a=2}this.Canvas.save();var i=t.OutRange,r=this.GetBorder(),n=r.Left,o=r.Right,s=(r.Bottom,r.Top,this.ChartBorder.Right),l=this.ChartBorder.Left;this.ChartBorder.TitleHeight;this.IsHScreen&&(l=this.ChartBorder.Top,s=this.ChartBorder.Bottom,r.Top,r.Bottom);var h=C(),u=18*h,c=u;if(t.Message[0]&&l>=10){null!=t.Font&&(this.Canvas.font=t.Font);var f=this.GetCustomItemTextInfo(t,!0,h),d=f.MaxWidth,D=n-d,m=this.GetFontHeight(),c=m>u?m:u;this.Canvas.textAlign="right",this.Canvas.textBaseline="middle";var v=null;1==a?(v=r.TopEx,we.IsNumber(i.TopYOffset)&&(v+=i.TopYOffset)):2==a&&(v=r.BottomEx+c,we.IsNumber(i.BottomYOffset)&&(v+=i.BottomYOffset));for(var T=0;T<f.Text.length;++T){var I=f.Text[T],S={Left:D,Width:I.Width,Bottom:v,Height:c};if(S.Top=S.Bottom-S.Height,S.Right=S.Left+S.Width,t.ExtendLine&&t.ExtendLine[0]){var x=t.ExtendLine[0];if(we.IsNumber(x.Width)){var b=S.Bottom;2==a&&(b=S.Top);var y=t.LineType;we.IsNumber(i.ExtendLine.Type)&&(y=i.ExtendLine.Type),0==T&&this.DrawLine(n,n-x.Width,b,t.LineColor,y,t),S.Left-=x.Width,S.Right-=x.Width}}this.Canvas.fillStyle=i.BGColor,this.Canvas.fillRect(S.Left,S.Top,S.Width,S.Height),i.Border&&i.Border.Color&&(we.IsNonEmptyArray(i.Border.LineDash)&&this.Canvas.setLineDash(i.Border.LineDash),this.Canvas.strokeStyle=i.Border.Color,this.Canvas.strokeRect(p(S.Left),p(S.Top),g(S.Width),g(S.Height))),this.Canvas.fillStyle=i.TextColor,this.Canvas.fillText(I.Text,S.Right-1*h,S.Top+S.Height/2+1*h),v+=c+1}}else if(t.Message[1]&&s>=10){null!=t.Font&&(this.Canvas.font=t.Font);var f=this.GetCustomItemTextInfo(t,!1,h),d=f.MaxWidth,E=o+d,m=this.GetFontHeight(),c=m>u?m:u;this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var v=null;1==a?(v=r.TopEx,we.IsNumber(i.TopYOffset)&&(v+=i.TopYOffset)):2==a&&(v=r.BottomEx+c,we.IsNumber(i.BottomYOffset)&&(v+=i.BottomYOffset));for(var T=0;T<f.Text.length;++T){var I=f.Text[T],S={Right:E,Width:I.Width,Bottom:v,Height:c};if(S.Top=S.Bottom-S.Height,S.Left=S.Right-S.Width,t.ExtendLine&&t.ExtendLine[1]){var x=t.ExtendLine[1];if(we.IsNumber(x.Width)){var b=S.Bottom;2==a&&(b=S.Top);var y=t.LineType;we.IsNumber(i.ExtendLine.Type)&&(y=i.ExtendLine.Type),0==T&&this.DrawLine(o,o+x.Width,b,t.LineColor,y,t),S.Left+=x.Width,S.Right+=x.Width}}this.Canvas.fillStyle=i.BGColor,this.Canvas.fillRect(S.Left,S.Top,S.Width,S.Height),i.Border&&i.Border.Color&&(we.IsNonEmptyArray(i.Border.LineDash)&&this.Canvas.setLineDash(i.Border.LineDash),this.Canvas.strokeStyle=i.Border.Color,this.Canvas.strokeRect(p(S.Left),p(S.Top),g(S.Width),g(S.Height))),this.Canvas.fillStyle=i.TextColor,this.Canvas.fillText(I.Text,S.Left+1*h,S.Top+S.Height/2+1*h),v+=c+1}}this.Canvas.restore()}},this.DrawCustomItem=function(t,e){if(t.Message[1]||t.Message[0]){if(t.Value>this.HorizontalMax||t.Value<this.HorizontalMin)return this.DrawOutRangeCustomItem(t,e),void this.SendDrawCountDownEvent({IsShow:!1});var a=this.GetBorder(),i=a.Left,r=a.Right,n=a.Bottom,o=a.Top,s=this.ChartBorder.Right,l=this.ChartBorder.Left;this.ChartBorder.TitleHeight;this.IsHScreen&&(l=this.ChartBorder.Top,s=this.ChartBorder.Bottom,o=a.Top,n=a.Bottom);var h,u=C(),c=5*u,f=c;h="TopEx"==t.Value?a.TopEx:"TopTitle"==t.Value?a.TopTitle:"Top"==t.Value?a.Top:"BottomEx"==t.Value?a.BottomEx:"Bottom"==t.Value?a.Bottom:this.GetYFromData(t.Value),we.IsNumber(t.YOffset)&&(h+=t.YOffset);var d,D=0;if(t.ExtendData&&t.ExtendData.Custom){var m=t.ExtendData.Custom;we.IsNumber(m.Position)&&(D=m.Position),m.EmptyBGColor&&(d=m.EmptyBGColor)}if(t.Message[0])if(l<10||1==D||2==D){null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var v=this.GetCustomItemTextInfo(t,!0,u),T=v.MaxWidth,I=this.GetFontHeight();f=I>c?I:c;var S=t.LineColor,x=this.RGBToStruct(t.LineColor);x&&(S="rgba("+x.R+", "+x.G+", "+x.B+", "+So.FrameLatestPrice.BGAlpha+")"),t.BGColor&&(S=t.BGColor);for(var b=h,y=0;y<v.Text.length;++y){var E=v.Text[y];if(this.IsHScreen){var w=o,F=b-f/2-1*u;this.Canvas.fillStyle=S,this.Canvas.fillRect(F,w,f,E.Width),this.DrawHScreenText({X:b,Y:w},{Text:E.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==y&&this.DrawLine(w+E.Width,n,b,t.LineColor,t.LineType,t),b-=f+1*u}else if(1===E.Type);else{2==D&&(i=a.LeftEx-v.MaxWidth);var w=b-f/2-1*u,F=i+1*u;if(t.ExtendLine&&t.ExtendLine[0]&&2==D){var M=t.ExtendLine[0];if(we.IsNumber(M.Width)){var L=t.LineType;if(we.IsNumber(M.Type)&&(L=M.Type),0==y){var N=a.LeftEx-M.Width;this.DrawLine(N,N+M.Width,h,t.LineColor,L,t)}F-=M.Width}}this.Canvas.fillStyle=S,this.Canvas.fillRect(F,w,E.Width,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(E.Text,F+1*u,b),0==y&&(2==D?this.DrawLine(a.LeftEx,r,b,t.LineColor,t.LineType,t):this.DrawLine(F+E.Width,r,b,t.LineColor,t.LineType,t)),t.ClickData&&this.AddHorizontalLabel(F,w,E.Width,f,t,y),b+=f+1*u}}}else{null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle";var v=this.GetCustomItemTextInfo(t,!0,u),T=v.MaxWidth,I=this.GetFontHeight();f=I>c?I:c;for(var b=h,y=0;y<v.Text.length;++y){var E=v.Text[y];if(this.IsHScreen){if(0==y)var w=o-E.Width;else var w=o-T;var F=b-f/2-1*u;this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(F,w,f,E.Width),this.DrawHScreenText({X:b,Y:w},{Text:E.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==y&&this.DrawLine(w+E.Width,n,b,t.LineColor,t.LineType,t),b-=f+1*u}else{var w=b-f/2-1*u;if(0==y)var R=i-E.Width,F=i;else var R=i-T,F=i-(T-E.Width);if(t.ExtendLine&&t.ExtendLine[0]){var M=t.ExtendLine[0];if(we.IsNumber(M.Width)){var L=t.LineType;we.IsNumber(M.Type)&&(L=M.Type);var A=t.LineColor;M.LineColor&&(A=M.LineColor),0==y&&this.DrawLine(i,i-M.Width,h,A,L,t),F-=M.Width,R-=M.Width}}if(d)this.Canvas.fillStyle=d,this.Canvas.fillRect(R-1,w,E.Width+1,f),this.Canvas.strokeStyle=t.LineColor,this.Canvas.strokeRect(p(R-1),p(w),p(E.Width+1),p(f)),this.Canvas.fillStyle=t.LineColor,this.Canvas.fillText(E.Text,F-1*u,b);else{if(!1!==E.EnableBGColor){var O=t.LineColor;E.BGColor&&(O=E.BGColor),this.Canvas.fillStyle=O,this.Canvas.fillRect(R,w,E.Width,f)}this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(E.Text,F-1*u,b)}0==y&&this.DrawLine(i,r,b,t.LineColor,t.LineType,t),t.ClickData&&this.AddHorizontalLabel(F,w,E.Width,f,t,y),b+=f+1*u}}}else if(t.Message[1])if(s<10||1==D){null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var v=this.GetCustomItemTextInfo(t,!1,u),T=v.MaxWidth,I=this.GetFontHeight();f=I>c?I:c;var S=t.LineColor,x=this.RGBToStruct(t.LineColor);x&&(S="rgba("+x.R+", "+x.G+", "+x.B+", "+So.FrameLatestPrice.BGAlpha+")");for(var b=h,y=0;y<v.Text.length;++y){var E=v.Text[y];if(this.IsHScreen){var w=n-E.Width,F=b-f/2-1*u;this.Canvas.fillStyle=S,this.Canvas.fillRect(F,w,f,E.Width),this.DrawHScreenText({X:b,Y:w},{Text:E.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==y&&this.DrawLine(o,w,b,t.LineColor,t.LineType,t),b-=f+1*u}else if(1===E.Type){if(this.GetEventCallback){var w=b-f/2-1*u,P={Top:w,Right:r,Height:null,IsShow:!0,BGColor:t.LineColor,TextColor:t.TextColor,PixelTatio:u,Position:"Right",IsInside:!0};this.SendDrawCountDownEvent(P)&&we.IsPlusNumber(P.Height)&&(b+=f+1*u)}}else{var w=b-f/2-1*u,F=r-E.Width;this.Canvas.fillStyle=S,this.Canvas.fillRect(F,w,E.Width,f),E.TextColor?this.Canvas.fillStyle=E.TextColor:this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(E.Text,F+1*u,b),0==y&&this.DrawLine(i,F,b,t.LineColor,t.LineType,t),b+=f+1*u}}if((3==t.Type||4==t.Type)&&t.Title){var B=this.Canvas.measureText(t.Title).width+2*u;if(this.IsHScreen){var w=n-E.Width-B,F=h-f/2-1*u;this.Canvas.fillStyle=S,this.Canvas.fillRect(F,w,f,B),this.DrawHScreenText({X:h,Y:w},{Text:t.Title,Color:t.TextColor,XOffset:1*u,YOffset:2*u})}else{var w=h-f/2-1*u,F=r-T-B-1*u;this.Canvas.fillStyle=S,this.Canvas.fillRect(F,w,B,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(t.Title,F+1*u,h)}}}else{null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var v=this.GetCustomItemTextInfo(t,!1,u),T=v.MaxWidth,I=this.GetFontHeight();f=I>c?I:c;var _=null;e&&e.has(3)&&(_=e.get(3));for(var b=h,G={},y=0;y<v.Text.length;++y){var E=v.Text[y];if(this.IsHScreen){var w=n,F=b-f/2-1*u;this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(F,w,f,E.Width),this.DrawHScreenText({X:b,Y:w},{Text:E.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==y&&this.DrawLine(o,w,b,t.LineColor,t.LineType,t),b-=f+1*u}else if(1===E.Type){if(this.GetEventCallback){var w=b-f/2-1*u,P={Top:w,Left:r,Right:this.ChartBorder.GetChartWidth(),Height:null,IsShow:!0,BGColor:t.LineColor,TextColor:t.TextColor,PixelTatio:u,Position:"Right",IsInside:!1};this.SendDrawCountDownEvent(P)&&we.IsPlusNumber(P.Height)&&(b+=f+1*u)}}else{var w=b-f/2-1*u;if(0==y&&0==v.Text.length){var F=r;G.Left=F,_&&w<_.Rect.Bottom&&(b=_.Rect.Bottom,w=b-f/2-1*u)}else var F=r+T-E.Width;if(t.ExtendLine&&t.ExtendLine[1]){var M=t.ExtendLine[1];if(we.IsNumber(M.Width)){var L=t.LineType;we.IsNumber(M.Type)&&(L=M.Type),0==y&&this.DrawLine(r,F+M.Width,h,t.LineColor,L,t),F+=M.Width}}d?(this.Canvas.fillStyle=d,this.Canvas.fillRect(F,w,E.Width+1,f),this.Canvas.strokeStyle=t.LineColor,this.Canvas.strokeRect(p(F),p(w),g(E.Width+1),g(f)),this.Canvas.fillStyle=t.LineColor,this.Canvas.fillText(E.Text,F+2*u,b)):(this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(F,w,E.Width,f),E.TextColor?this.Canvas.fillStyle=E.TextColor:this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(E.Text,F+1*u,b)),0==y&&this.DrawLine(i,r,h,t.LineColor,t.LineType,t),t.ClickData&&this.AddHorizontalLabel(F,w,E.Width,f,t,y),b+=f+1*u,G.Bottom=b}}if(e&&we.IsNumber(G.Left)&&we.IsNumber(G.Bottom)&&e.set(3,{Rect:G,Item:t}),(3==t.Type||4==t.Type)&&t.Title){var S=t.LineColor,x=this.RGBToStruct(t.LineColor);x&&(S="rgba("+x.R+", "+x.G+", "+x.B+", "+So.FrameLatestPrice.BGAlpha+")");var B=this.Canvas.measureText(t.Title).width+2*u;if(this.IsHScreen){var w=n-B,F=h-f/2-1*u;this.Canvas.fillStyle=S,this.Canvas.fillRect(F,w,f,B),this.DrawHScreenText({X:h,Y:w},{Text:t.Title,Color:t.TextColor,XOffset:1*u,YOffset:2*u})}else{var w=h-f/2-1*u,F=r-B-1*u;this.Canvas.fillStyle=S,this.Canvas.fillRect(F,w,B,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(t.Title,F+1*u,h)}}}}},this.AddHorizontalLabel=function(t,e,a,i,r,n){var o={Left:t,Top:e,Width:a,Height:i};o.Right=o.Left+o.Width,o.Bottom=o.Top+o.Height;var s={Rect:o,Item:r,ID:r.ClickData.ID,Args:r.ClickData.Args,LineID:n};this.HorizontalLabel.push(s)},this.DrawCustomAreaItem=function(t){if(t.AreaData&&!this.IsHScreen&&we.IsNonEmptyArray(t.AreaData.Value)&&2==t.AreaData.Value.length){var e=Math.max(t.AreaData.Value[0],t.AreaData.Value[1]),a=Math.min(t.AreaData.Value[0],t.AreaData.Value[1]);if(!(a>=this.HorizontalMax||e<=this.HorizontalMin)){e>this.HorizontalMax&&(e=this.HorizontalMax),a<this.HorizontalMin&&(a=this.HorizontalMin);var i=this.GetBorder(),r=i.Left,n=i.Right,o=this.ChartBorder.Right,s=this.ChartBorder.Left,l=this.GetYFromData(e),h=this.GetYFromData(a);if(t.AreaData.Position.includes(0)&&s>10){var u={Left:0,Right:r-1,Top:l,Bottom:h};if(u.Height=u.Bottom-u.Top,u.Width=u.Right-u.Left,we.IsNonEmptyArray(t.AreaData.Width)){var C=t.AreaData.Width[0];we.IsNumber(C)&&u.Width>C&&(u.Width=C,u.Left=u.Right-u.Width)}this.Canvas.fillStyle=t.AreaData.BGColor,this.Canvas.fillRect(u.Left,u.Top,u.Width,u.Height),this.DrawCustomAreaText(u,t,0)}if(t.AreaData.Position.includes(1)&&o>10){var u={Left:n+1,Top:l,Bottom:h};if(u.Height=u.Bottom-u.Top,this.YRightTextInfo&&we.IsNumber(this.YRightTextInfo.MainTextWidth)?(u.Width=this.YRightTextInfo.MainTextWidth-1,u.Right=u.Left+u.Width):(u.Right=i.ChartWidth,u.Width=u.Right-u.Left),we.IsNonEmptyArray(t.AreaData.Width)){var C=t.AreaData.Width[1];we.IsNumber(C)&&u.Width>C&&(u.Width=C,u.Right=u.Left+u.Width)}this.Canvas.fillStyle=t.AreaData.BGColor,this.Canvas.fillRect(u.Left,u.Top,u.Width,u.Height),this.DrawCustomAreaText(u,t,1)}}}},this.DrawCustomAreaText=function(t,e,a){null!=e.Font&&(this.Canvas.font=e.Font);var i=this.GetFontHeight();if(!(t.Height<i)){var r,n,o=C();if(0==a){if(!e.Message[0])return;this.Canvas.textAlign="right",r=e.Message[0],n=t.Right-2*o}else if(1==a){if(!e.Message[1])return;this.Canvas.textAlign="left",r=e.Message[1],n=t.Left+2*o}var s=t.Top+t.Height/2;this.Canvas.textBaseline="middle",this.Canvas.fillStyle=e.TextColor,this.Canvas.fillText(r,n,s)}},this.SendDrawCountDownEvent=function(t){if(!this.GetEventCallback)return!1;var e=this.GetEventCallback(Kn.ON_DRAW_COUNTDOWN);return!(!e||!e.Callback)&&(e.Callback(e,t,this),!0)},this.DrawDotLine=function(t,e,a,i,r){var n=C();this.Canvas.save(),this.Canvas.strokeStyle=i,r&&we.IsPlusNumber(r.LineWidth)&&(this.Canvas.lineWidth=r.LineWidth*n),r.LineDash?this.Canvas.setLineDash(r.LineDash):this.Canvas.setLineDash([5*n,5*n]),this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(p(a),t),this.Canvas.lineTo(p(a),e)):(this.Canvas.moveTo(t,p(a)),this.Canvas.lineTo(e,p(a))),this.Canvas.stroke(),this.Canvas.restore()},this.DrawLine=function(t,e,a,i,r,n){if(-1!=r)if(0==r){var o=C();this.Canvas.strokeStyle=i;var s=!1;n&&we.IsPlusNumber(n.LineWidth)&&(this.Canvas.lineWidth=n.LineWidth*o,s=!0),this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(p(a),t),this.Canvas.lineTo(p(a),e)):(this.Canvas.moveTo(t,p(a)),this.Canvas.lineTo(e,p(a))),this.Canvas.stroke(),s&&(this.Canvas.lineWidth=o)}else if(3==r){var l=10*C();this.Canvas.strokeStyle=i,this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(p(a),t),this.Canvas.lineTo(p(a),t+l)):(this.Canvas.moveTo(t,p(a)),this.Canvas.lineTo(t+l,p(a))),this.Canvas.stroke()}else 1!=r&&2!=r||this.DrawDotLine(t,e,a,i,n)},this.DrawHScreenText=function(t,e){this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=e.Color,this.Canvas.save(),this.Canvas.translate(t.X,t.Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(e.Text,e.XOffset,e.YOffset),this.Canvas.restore()},this.RGBToStruct=function(t){if(/^(rgb|RGB)/.test(t)){var e=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),a={};return 3!=e.length?null:(a.R=Number(e[0]),a.G=Number(e[1]),a.B=Number(e[2]),a)}return null},this.GetMulitTextMaxWidth=function(t){for(var e=null,a=0;a<t.length;++a){var i=t[a],r=i.Text;if(r){var n=this.Canvas.measureText(r).width;null==e?e=n:e<n&&(e=n)}}return e},this.GetScaleTextWidth=function(){var t=(this.ChartBorder.GetBorder(),C());if(this.IsHScreen)var e=this.ChartBorder.Top,a=this.ChartBorder.Bottom,i=e>10*t&&!0===this.IsShowYText[0]&&2!=this.YTextPosition[0],r=a>10*t&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1];else var n=this.ChartBorder.Right,o=this.ChartBorder.Left,i=o>10&&!0===this.IsShowYText[0]&&2!=this.YTextPosition[0],r=n>10&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1];if(!r&&!i)return null;var s={Left:null,Right:null},l=0,h=!1;this.YSplitOperator&&1==this.YSplitOperator.CoordinateType&&(h=!0);var u=0,c=0;we.IsNonEmptyArray(this.YLineExtend)&&(this.YLineExtend[0]&&this.YLineExtend[0].Width>1&&(u=this.YLineExtend[0].Width),this.YLineExtend[1]&&this.YLineExtend[1].Width>1&&(c=this.YLineExtend[1].Width));for(var f=0;f<this.HorizontalInfo.length;++f){var d=null,D=this.HorizontalInfo[f];if(D&&(null!=D.Font&&(this.Canvas.font=D.Font),null!=D.Message[0]&&i&&(d=Array.isArray(D.Message[0])?this.GetMulitTextMaxWidth(D.Message[0]):this.Canvas.measureText(D.Message[0]).width,(null==s.Left||s.Left<d)&&(s.Left=d)),null!=D.Message[1]&&r)){if(null!=D.Font&&(this.Canvas.font=D.Font),Array.isArray(D.Message[1])){if(1==this.MultiTextFormat){if(D.ExtendData){D.ExtendData.Font&&(this.Canvas.font=D.ExtendData.Font);var m=this.Canvas.measureText(D.Message[1][0]).width,p=this.Canvas.measureText(D.Message[1][1]).width,v=this.Canvas.measureText("/").width;d=m+v,l<p&&(l=p)}}else if(2==this.MultiTextFormat){d=this.Canvas.measureText(D.Message[1][0]).width;var g=this.Canvas.measureText(D.Message[1][1]).width;d<g&&(d=g)}else if(3==this.MultiTextFormat)d=this.GetMulitTextMaxWidth(D.Message[1]);else if(d=this.Canvas.measureText(D.Message[1][0]).width,h){var T=this.Canvas.measureText("-00.00%").width;T>d&&(d=T)}}else d=this.Canvas.measureText(D.Message[1]).width;(null==s.Right||s.Right<d)&&(s.Right=d)}}return we.IsNumber(s.Right)&&(s.Right+=l),we.IsNumber(s.Left)&&(s.Left+=this.YTextPadding[0]+u),we.IsNumber(s.Right)&&(s.Right+=this.YTextPadding[1]+c),{TextWidth:s}},this.ClearToolbar=function(){if(this.ToolbarID){var t=document.getElementById(this.ToolbarID);t&&(this.ChartBorder.UIElement.parentNode.removeChild(t),this.ToolbarRect=null)}},this.HideToolbar=function(){if(this.ToolbarID){this.ToolbarRect=null;var t=document.getElementById(this.ToolbarID);t&&"none"!=t.style.display&&(t.style.display="none")}},this.GetMainOverlayFrame=function(){if(!this.FrameData||!this.FrameData.SubFrameItem)return null;for(var t=this.FrameData.SubFrameItem,e=null,a=null,i=0;i<t.OverlayIndex.length;++i){var r=t.OverlayIndex[i],n=r.Frame;2==n.IsShowMainFrame?a=n:1==n.IsShowMainFrame&&(e=n)}return e||a?[e,a]:null}}function A(){this.newMethod=R,this.newMethod(),delete this.newMethod,this.ClassName="MinuteFrame",this.DataWidth=1*C(),this.DistanceWidth=1*C(),this.MinuteCount=243,this.BeforeBGColor=So.Minute.Before.BGColor,this.AfterBGColor=So.Minute.After.BGColor,this.MultiDayBorderPen=So.MultiDayBorderPen,this.CustomHorizontalInfo=[],this.RightFrame=null,this.ToolbarID=D(),this.ReDrawToolbar=!1,this.DayCount=1,this.ModifyIndex=So.MinuteToolbar.ModifyIndex,this.ChangeIndex=So.MinuteToolbar.ChangeIndex,this.CloseIndex=So.MinuteToolbar.CloseIndex,this.MaxMinWindow=So.MinuteToolbar.MaxMinWindow,this.TitleWindow=So.MinuteToolbar.TitleWindow,this.ExportData=So.MinuteToolbar.ExportData,this.OverlayIndex=So.MinuteToolbar.OverlayIndex,this.ToolbarRect=null,this.IsShowPositionTitle=!1,this.LastCalculateStatus={Width:0,XPointCount:0},this.BeforeCloseIcon=I(So.Minute.Before.CloseIcon),this.IsShowCloseButton=!0,this.BeforeOpenVerticalInfo=[],this.AfterCloseVerticalInfo=[],this.NightDayConfig=I(So.Minute.NightDay),this.MinuteFrame_ReloadResource=this.ReloadResource,this.ReloadResource=function(t){this.MinuteFrame_ReloadResource(t),this.BeforeBGColor=So.Minute.Before.BGColor,this.AfterBGColor=So.Minute.After.BGColor,this.MultiDayBorderPen=So.MultiDayBorderPen},this.DrawFrame=function(){this.IsMinSize||(this.SplitXYCoordinate(),this.DrawBeforeDataBG(),this.YInsideOffset=0,this.BeforeDrawXYCallback&&this.BeforeDrawXYCallback(this),this.DrawNightDayBG(),this.DrawCustomBG(),this.DrawTitleBG(),this.DrawCustomHorizontalArea(),this.DrawHorizontal(),this.DrawVertical()),1!=this.SizeChange&&1!=this.ReDrawToolbar||(this.DrawToolbar(),this.ReDrawToolbar=!1)},this.DrawCustomHorizontalArea=function(){if(!this.IsMinSize&&!this.ChartBorder.IsShowTitleOnly&&we.IsNonEmptyArray(this.CustomHorizontalInfo))for(var t=0;t<this.CustomHorizontalInfo.length;++t){var e=this.CustomHorizontalInfo[t];5==e.Type&&this.DrawCustomAreaItem(e)}},this.SuperDrawBorder=this.DrawBorder,this.DrawBorder=function(){if(this.IsShowBorder&&!this.IsMinSize&&(this.SuperDrawBorder(),1==this.Identify)){var t=this.ChartBorder.GetBorder(),e=p(t.Left),a=p(t.Top),i=p(t.Right);this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),this.Canvas.moveTo(e,a),this.Canvas.lineTo(i,a),this.Canvas.save(),this.Canvas.lineWidth=2*C(),this.Canvas.stroke(),this.Canvas.restore()}},this.DrawVolTitle=function(t){if(wo.IsShowMinuteVolTitle(t)&&1==this.Identify){var e=C(),a=this.ChartBorder.GetLeft()+2*e+this.YInsideOffset,i=this.ChartBorder.GetTopEx()+2*e;if(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",So.Minute.VolBarColor||So.Minute.VolTitleColor){So.Minute.VolBarColor?this.Canvas.fillStyle=So.Minute.VolBarColor:this.Canvas.fillStyle=So.Minute.VolTitleColor;var r=this.YSplitOperator.LanguageID,n=bo.GetText("MVol-Vol",r);this.Canvas.fillText(n,a,i),a+=this.Canvas.measureText(n).width,a+=6*C()}this.IsShowPositionTitle&&(n=bo.GetText("MVol-Position",r),this.Canvas.fillStyle=So.Minute.PositionColor,this.Canvas.fillText(n,a,i))}},this.DrawToolbar=function(){if(1!=this.ToolbarButtonStyle&&!0!==So.IsDOMFrameToolbar&&void 0!==Yn.default&&!(this.Identify<2)&&this.ChartBorder.UIElement){var t=document.getElementById(this.ToolbarID);if(!t||0!=this.SizeChange||0!=this.ReDrawToolbar){if(t||(t=document.createElement("div"),t.className="klineframe-toolbar",t.id=this.ToolbarID,t.oncontextmenu=function(){return!1},t.setAttribute("identify",this.Identify.toString()),this.ChartBorder.UIElement.parentNode.appendChild(t)),!(this.ModifyIndex||this.ChangeIndex||this.OverlayIndex||this.CloseIndex))return void("none"!=t.style.display&&(t.style.display="none"));var e=C(),a=parseInt(this.ChartBorder.UIElement.parentElement.style.width.replace("px","")),i=(parseInt(this.ChartBorder.UIElement.parentElement.style.height.replace("px","")),this.ChartBorder.GetTitleHeight()),r=a-this.ChartBorder.Right/e-100,n=this.ChartBorder.GetTop()/e;if(!this.ToolbarRect||this.ToolbarRect.Left!=r||this.ToolbarRect.Top!=n||100!=this.ToolbarRect.Width||this.ToolbarRect.Height!=i/e){this.ToolbarRect={Left:r,Top:n,Width:100,Height:i/e};var o="<span class='index_param icon iconfont icon-index_param' id='modifyindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='è°æ´ææ åæ°'></span><span class='index_change icon iconfont icon-change_index' id='changeindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='åæ¢ææ '></span>";this.CloseIndex&&(o+="<span class='index_close icon iconfont icon-close' id='closeindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='å³é­ææ çªå£'></span>"),t.style.left=r+"px",t.style.top=n+"px",t.style.width="100px",t.style.height=i/e+"px",t.innerHTML=o;this.ChartBorder.UIElement.JSChartContainer,this.Identify;this.ModifyIndex?"function"==typeof this.ModifyIndexEvent&&(0,Yn.default)("#"+t.id+" .index_param").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify},this.ModifyIndexEvent):(0,Yn.default)("#"+t.id+" .index_param").hide(),this.ChangeIndex?"function"==typeof this.ChangeIndexEvent&&(0,Yn.default)("#"+t.id+" .index_change").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify,IsOverlay:!1},this.ChangeIndexEvent):(0,Yn.default)("#"+t.id+" .index_change").hide(),(0,Yn.default)("#"+t.id+" .index_close").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify},function(t){var e=t.data.Chart,a=t.data.Identify;e.RemoveIndexWindow(a)}),t.style.display="block"}}}},this.DrawToolbarV2=function(t,e){if(!0!==So.IsDOMFrameToolbar&&(0==this.Identify&&this.IsShowCloseButton&&this.DrawCloseBeforeButton(t,e),!(this.ChartBorder.TitleHeight<5))){var a=[];if(0!=this.Identify&&1!=this.Identify&&(this.CloseIndex&&a.push({ID:qn.CLOSE_INDEX_WINDOW,Style:this.CloseWindowButton}),this.MaxMinWindow&&a.push({ID:qn.MAX_MIN_WINDOW,Style:this.MaxMinWindowButton}),this.TitleWindow&&a.push({ID:qn.TITLE_WINDOW,Style:this.TitleWindowButton}),this.ExportData&&a.push({ID:qn.EXPORT_DATA,Style:this.ExportDataButton}),this.OverlayIndex&&a.push({ID:qn.OVERLAY_INDEX,Style:this.OverlayIndexButton}),this.ChangeIndex&&a.push({ID:qn.CHANGE_INDEX,Style:this.ChangeIndexButton}),this.ModifyIndex&&a.push({ID:qn.MODIFY_INDEX_PARAM,Style:this.ModifyIndexParamButton})),we.IsNonEmptyArray(this.CustomToolbar))for(var i=0;i<this.CustomToolbar.length;++i){var r=this.CustomToolbar[i];r.ID&&r.Style&&a.push({ID:r.ID,Style:r.Style,TooltipText:r.TooltipText,Data:r.Data})}this.DrawTitleButton(a,t,e)}},this.DrawCloseBeforeButton=function(t,e){if(0==this.Identify){var a=this.ChartBorder.GetBorder();if(!(a.DayBorder||this.ChartBorder.LeftExtendWidth<10)){var i={Left:a.Left,Top:a.TopEx,Width:this.BeforeCloseIcon.Size,Height:this.BeforeCloseIcon.Size};i.Right=i.Left+this.BeforeCloseIcon.Size,i.Bottom=i.Top+this.BeforeCloseIcon.Size;var r={Rect:i,Name:"éåç«ä»·å³é­æé®",ID:qn.CLOSE_BEFOREOPEN_ID},n=this.BeforeCloseIcon.Color;t&&t.X>=i.Left&&t.X<i.Right&&t.Y>=i.Top&&t.Y<=i.Bottom&&(n=this.BeforeCloseIcon.MoveOnColor,e&&(e.MouseOnToolbar={Rect:i,Item:r,Frame:this,Point:{X:t.X,Y:t.Y}}));var o=this.BeforeCloseIcon.Size+"px "+this.BeforeCloseIcon.Family;this.Canvas.font=o,this.Canvas.fillStyle=n,this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.fillText(this.BeforeCloseIcon.Text,a.Left,a.TopEx),this.Buttons.push(r)}}},this.DrawMultiDayBeforeDataBG=function(t){var e=t.DayBorder,a=p(t.Top),i=p(t.Bottom),r=i-a;this.Canvas.strokeStyle=this.MultiDayBorderPen;for(var n=0;n<e.length;++n){var o=0,s=e[n],l=p(s.Left),h=p(s.LeftEx),u=h-l;u>3&&(this.Canvas.fillStyle=this.BeforeBGColor,this.Canvas.fillRect(l,a,u,r),++o);var l=p(s.RightEx),h=p(s.Right),u=h-l;u>3&&(this.Canvas.fillStyle=this.AfterBGColor,this.Canvas.fillRect(l,a,u,r),++o),2==o&&n!=e.length-1&&(this.Canvas.beginPath(),this.Canvas.moveTo(h,a),this.Canvas.lineTo(h,i),this.Canvas.stroke())}},this.DrawCallAuctionVertical=function(t,e,a,i){if(e){var r=a.TopTitle,n=a.Bottom,o=(a.Left,a.LeftEx),s=C(),l=null,h=null;for(var u in t){var c=t[u],f=this.GetLeftExtendXFromIndex(c.Value,e);if(f>o)break;if(!(null!=l&&Math.abs(f-l)<this.MinXDistance)){var d=p(f);if(this.IsShowXLine&&(2==c.LineType?(this.Canvas.strokeStyle=c.LineColor,this.Canvas.setLineDash([5*s,5*s]),this.Canvas.beginPath(),this.Canvas.moveTo(d,r),this.Canvas.lineTo(d,n),this.Canvas.stroke(),this.Canvas.setLineDash([])):3==c.LineType||c.LineType>0&&(So.FrameXLineDash?(this.Canvas.strokeStyle=c.LineColor,this.Canvas.setLineDash(So.FrameXLineDash),this.Canvas.beginPath(),this.Canvas.moveTo(d,r),this.Canvas.lineTo(d,n),this.Canvas.stroke(),this.Canvas.setLineDash([])):(this.Canvas.strokeStyle=c.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(d,r),this.Canvas.lineTo(d,n),this.Canvas.stroke()))),null!=c.Message[0]&&this.ChartBorder.Bottom>5*s){null!=c.Font&&(this.Canvas.font=c.Font);var D=0;this.Canvas.fillStyle=c.TextColor,this.Canvas.strokeStyle=c.TextColor;var m=this.Canvas.measureText(c.Message[0]).width;if(f<m/2?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",D=f):f+m/2>=a.ChartWidth?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top",D=f-m):(this.Canvas.textAlign="center",this.Canvas.textBaseline="top",D=f-m/2),null==h||D>h){var v=n;if(3==c.LineType){var g=this.ShortXLineLength*s;this.Canvas.beginPath(),this.Canvas.moveTo(d,v),this.Canvas.lineTo(d,v+g),this.Canvas.stroke(),v+=g+2*s}this.Canvas.fillText(c.Message[0],f,v+this.XBottomOffset),h=D+m}}l=f}}}},this.DrawBeforeDataBG=function(){var t=this.ChartBorder.GetBorder();if(t.DayBorder)return void this.DrawMultiDayBeforeDataBG(t);if(!(this.ChartBorder.LeftExtendWidth<10&&this.ChartBorder.RightExtendWidth<10)){var e=p(t.Top),a=p(t.Bottom);if(this.Canvas.fillStyle=this.BeforeBGColor,this.ChartBorder.LeftExtendWidth>10){var i=p(t.Left),r=p(this.ChartBorder.GetLeft()),n=r-i,o=a-e;this.Canvas.fillRect(i,e,n,o),this.DrawCallAuctionVertical(this.BeforeOpenVerticalInfo,this.YSplitOperator.BeforeOpenData,t,!0)}if(this.ChartBorder.RightExtendWidth>10){this.Canvas.fillStyle=this.AfterBGColor;var i=p(this.ChartBorder.GetRight()),r=p(t.Right),n=r-i,o=a-e;this.Canvas.fillRect(i,e,n,o)}}},this.DrawCustomBG=function(){if(this.HQChart&&!this.IsHScreen){if(this.HQChart.Symbol){var t=this.GetEventCallback(Kn.ON_CUSTOM_MINUTE_BG);if(t&&t.Callback){var e=null;if(this.DayCount>1){if(!we.IsNonEmptyArray(this.HQChart.DayData))return;e=[];for(var a=this.HQChart.DayData.length-1;a>=0;--a)e.push({Date:this.HQChart.DayData[a].Date,BGColor:null})}else if(1==this.DayCount){if(!we.IsPlusNumber(this.HQChart.DataStatus.LatestDate))return;e=[{Date:this.HQChart.DataStatus.LatestDate,BGColor:null}]}if(we.IsNonEmptyArray(e)){var i={XPointCount:this.XPointCount,DayCount:this.DayCount,MinuteCount:this.MinuteCount,AryDay:e,PreventDefault:!1};if(t.Callback(t,i,this),!i.PreventDefault)for(var r=this.ChartBorder.GetBorder(),a=0;a<e.length;++a){var n=e[a];if(n.BGColor){var o=a*this.MinuteCount,s=o+this.MinuteCount-1,l=this.GetXFromIndex(o),h=this.GetXFromIndex(s),u={Left:l,Top:r.Top,Right:h,Bottom:r.Bottom};u.Width=u.Right-u.Left,u.Height=u.Bottom-u.Top,this.Canvas.fillStyle=n.BGColor,this.Canvas.fillRect(u.Left,u.Top,u.Width,u.Height)}}}}}}},this.DrawNightDayBG=function(){if(1==this.DayCount&&this.HQChart&&this.HQChart.EnableNightDayBG){var t=this.HQChart.Symbol;if(t){var e=-1,a=this.GetEventCallback(Kn.ON_CUSTOM_MINUTE_NIGHT_DAY_X_INDEX);if(a&&a.Callback){var i={Symbol:t,XIndex:e,MinuteTimeStringData:Fo};if(a.Callback(a,i,this),!((e=i.XIndex)<0)){var r=this.ChartBorder.GetBorder(),n=this.GetXFromIndex(e),o={Left:r.Left,Top:r.TopEx,Right:n,Bottom:r.Bottom};if(o.Width=o.Right-o.Left,o.Height=o.Bottom-o.Top,this.Canvas.fillStyle=this.NightDayConfig.NightBGColor,this.Canvas.fillRect(o.Left,o.Top,o.Width,o.Height),0==this.Identify){this.Canvas.font=this.NightDayConfig.Font,this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left";for(var s=[{Title:"å¤ç",Position:1,Config:this.NightDayConfig.Night},{Title:"æ¥ç",Position:0,Config:this.NightDayConfig.Day}],l=this.Canvas.measureText("æ").width,h=0;h<s.length;++h){var u=s[h],C=bo.GetText(u.Title,this.HQChart.LanguageID),c=this.Canvas.measureText(C).width,f={Width:c+u.Config.Margin.Left+u.Config.Margin.Right,Height:l+u.Config.Margin.Top+u.Config.Margin.Bottom,Bottom:r.Bottom};f.Top=f.Bottom-f.Height,1===u.Position?(f.Right=n-1,f.Left=f.Right-f.Width):(f.Left=n+1,f.Right=f.Left+f.Width),u.Config.BGColor&&(this.Canvas.fillStyle=u.Config.BGColor,this.Canvas.fillRect(f.Left,f.Top,f.Width,f.Height)),u.Config.BorderColor&&(this.Canvas.strokeStyle=u.Config.BorderColor,this.Canvas.strokeRect(p(f.Left),p(f.Top),g(f.Width),g(f.Height))),this.Canvas.fillStyle=u.Config.Color,this.Canvas.fillText(C,f.Left+u.Config.Margin.Left,f.Bottom-u.Config.Margin.Bottom)}}}}}}},this.DrawPictureXCoordinate=function(t,e,a){if(!this.IsHScreen&&e&&we.IsNonEmptyArray(e.Points)){var i=this.GetBorder(),r=i.Left,n=i.Right;this.Canvas.font=this.DrawPicture.Font;var o=this.GetFontHeight();if(e.X){var s=e.X,l=s.Min.X,h=s.Max.X;l<r&&(l=r),h>n&&(h=n),this.Canvas.fillStyle=this.DrawPicture.BGColor,this.Canvas.fillRect(l,i.Bottom,h-l,o)}for(var u=0;u<e.Points.length;++u){var C=e.Points[u];if(!(C.X<r||C.X>n)){var c=parseInt(this.GetXData(C.X)),f=this.GetKItem(c,a);if(f){var d=we.FormatTimeString(f.Time,"HH:MM"),D=this.Canvas.measureText(d).width+2,m=C.X-D/2;m<r&&(m=r),this.Canvas.fillStyle=this.DrawPicture.TextBGColor,this.Canvas.fillRect(m,i.Bottom,D,o),this.Canvas.fillStyle=this.DrawPicture.TextColor;var p=i.Bottom+o;this.Canvas.fillText(d,m+1,p)}}}}},this.GetKItem=function(t,e){if(!this.Data)return null;if(!we.IsNonEmptyArray(this.Data.Data))return null;if(t<this.Data.Data.length)return this.Data.Data[t];var a=this.Data.Data[this.Data.Data.length-1],i=Fo.GetTimeData(e.Symbol),r=t%i.length,n=i[r];return{Date:a.Date,Time:n}},this.DrawDayVertical=function(t,e,a){if(t.BG){var i=t.BG,r=this.GetXFromIndex(i.Index.Start),n=this.GetXFromIndex(i.Index.End),o=n-r,s=this.ChartBorder.Bottom;if(we.IsNumber(i.Height)&&(s=i.Height),i.Color){this.Canvas.fillStyle=i.Color;var l={Left:r,Width:o,Top:a.Bottom,Height:s};this.Canvas.fillRect(l.Left,l.Top,l.Width,l.Height)}if(we.IsNonEmptyArray(t.AryText)){this.Canvas.textAlign="left",this.Canvas.textBaseline="top";for(var h=a.Bottom+2,u=this.Canvas.measureText("æ").width+2,C=0,c=0;C<t.AryText.length;++C){var f=t.AryText[C],d=0,D=[];for(c=0;c<f.length;++c){var m=f[c],p=this.Canvas.measureText(m.Text).width;if(d+p>o)break;var v={Text:m.Text,Width:p,Color:m.Color,Space:m.Space};d+=p,m.Width=p,m.Space>=1&&(d+=m.Space),D.push(v)}for(var g=r+(o-d)/2,c=0;c<D.length;++c){var m=D[c];if(!we.IsNumber(m.Width))break;m.Color?this.Canvas.fillStyle=m.Color:t.TextColor&&(this.Canvas.fillStyle=t.TextColor),this.Canvas.fillText(m.Text,g,h),g+=m.Width,m.Space>=1&&(g+=m.Space)}h+=u}}}},this.SplitXYCoordinate=function(){if(0==this.XYSplit)return void(this.YCustomSplit&&this.YSplitOperator&&this.YSplitOperator.CustomCoordinate&&this.YSplitOperator.CustomCoordinate());null!=this.XSplitOperator&&this.XSplitOperator.Operator(),null!=this.YSplitOperator&&this.YSplitOperator.Operator()},this.GetMultiDayXFromIndex=function(t,e){var a=e.DayBorder,i=t%this.MinuteCount,r=parseInt(t/this.MinuteCount);r>=a.length&&(r=a.length-1);var n=a[r],o=this.MinuteCount-1;if(i>=o)return n.RightEx;var s=n.RightEx-n.LeftEx;return n.LeftEx+s*i/o},this.GetXFromIndex=function(t){var e=this.XPointCount-1,a=this.ChartBorder.GetBorder();if(a.DayBorder)return this.GetMultiDayXFromIndex(t,a);if(1==e)return 0==t?a.LeftEx:a.RightEx;if(e<=0)return a.LeftEx;if(t>=e)return a.RightEx;var i=a.RightEx-a.LeftEx;return a.LeftEx+i*t/e},this.GetMultiDayXData=function(t,e){for(var a=e.DayBorder,i=0;i<a.length;++i){var r=a[i];if(t>=r.Left&&t<=r.Right){var n=this.MinuteCount-1,o=this.MinuteCount*i;if(t<=r.LeftEx)return 0+o;if(t>=r.RightEx)return n+o;var s=r.RightEx-r.LeftEx;return(t-r.LeftEx)*(1*n/s)+o}}},this.GetXData=function(t){var e=this.XPointCount-1;e<0&&(e=0);var a=this.ChartBorder.GetBorder();if(a.DayBorder)return this.GetMultiDayXData(t,a);if(t<=a.LeftEx)return 0;if(t>=a.RightEx)return e;var i=a.RightEx-a.LeftEx;return(t-a.LeftEx)*(1*e/i)},this.DrawCustomHorizontal=function(){if(!this.IsMinSize)for(var t in this.CustomHorizontalInfo){var e=this.CustomHorizontalInfo[t];switch(e.Type){case 0:case 1:case 10:this.DrawCustomItem(e)}}},this.GetLeftExtendXFromIndex=function(t,e){var a=e.TotalCount-1,i=this.ChartBorder.GetBorder();return i.DayBorder?this.GetLeftExtendMultiDayXFromIndex(t,e,i):i.Left+this.ChartBorder.LeftExtendWidth*t/a},this.GetLeftExtendMultiDayXFromIndex=function(t,e,a){var i=a.DayBorder,r=i[e.Index],n=e.TotalCount-1,o=r.Left;return o+(r.LeftEx-o)*t/n},this.GetLeftExtendMultiDayXData=function(t,e,a){for(var i=a.DayBorder,r=0;r<i.length;++r){var n=i[r];if(t>=n.Left&&t<=n.LeftEx){if(!e[r])return null;var o=e[r].TotalCount-1,s=n.Left,l=n.LeftEx,h=l-s,u=1*o/h*(t-s);return{DayIndex:parseInt(r),DataIndex:u}}}},this.GetLeftExtendXData=function(t,e){var a=this.ChartBorder.GetBorder();if(a.DayBorder)return this.GetLeftExtendMultiDayXData(t,e,a);var i=e.TotalCount-1;i<0&&(i=0);var r=a.Left,n=a.LeftEx;return t<=r?0:t>=n?i:1*i/(n-r)*(t-r)},this.MoveXIndexLeft=function(t,e){if(Xn.Chart.Log("[MinuteFrame::MoveXIndexLeft] obj ",e),2==e.DataType){var a=e.IndexData.DayIndex,i=e.IndexData.DataIndex-t,r=-1;if(20==e.IndexData.Type)r=0;else if(10==e.IndexData.Type)r=1;else{if(30!=e.IndexData.Type)return!1;r=2}for(var n=a,o=r;n>=0;--n){for(var s=e.Data[n];o>=0;--o){var l=s[o];if(l.DayItem&&l.DayItem.Data){for(null==i&&(i=l.DayItem.Data.length-1);i>=0;--i){var h=l.DayItem.Data[i];if(h){if(10==l.Type){var u=this.MinuteCount*n+i;return e.Point.X=this.GetXFromIndex(u),e.Point.Y=this.GetYFromData(h.Close),e.IndexData.CursorIndex=u,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}if(20==l.Type){if(!we.IsNumber(h.Price))continue;return e.Point.X=this.GetLeftExtendXFromIndex(i,l.DayItem),e.Point.Y=this.GetLeftExtendYFromData(h.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}if(30==l.Type){if(!we.IsNumber(h.Price))continue;return e.Point.X=this.GetRightExtendXFromIndex(i,l.DayItem),e.Point.Y=this.GetRightExtendYFromData(h.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}}}i=null}}o=2}return!1}if(1==e.DataType){var a=e.IndexData.DayIndex,i=e.IndexData.DataIndex-t,r=-1;if(2==e.IndexData.Type)r=0;else if(1==e.IndexData.Type)r=1;else{if(3!=e.IndexData.Type)return!1;r=2}for(var n=r;n>=0;--n){var l=e.Data[n];if(l&&l.DayItem&&l.DayItem.Data){for(null==i&&(i=l.DayItem.Data.length-1);i>=0;--i){if(1==l.Type){var C=l.DayItem.DataOffset,h=l.DayItem.Data[i+C];if(!h)continue;var u=i;return e.Point.X=this.GetXFromIndex(u),e.Point.Y=this.GetYFromData(h.Close),e.IndexData.CursorIndex=u,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}if(2==l.Type){var h=l.DayItem.Data[i];if(!h)continue;if(!we.IsNumber(h.Price))continue;return e.Point.X=this.GetLeftExtendXFromIndex(i,l.DayItem),e.Point.Y=this.GetLeftExtendYFromData(h.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}if(3==l.Type){var h=l.DayItem.Data[i];if(!h)continue;if(!we.IsNumber(h.Price))continue;return e.Point.X=this.GetRightExtendXFromIndex(i,l.DayItem),e.Point.Y=this.GetRightExtendYFromData(h.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}}i=null}}}},this.MoveXIndexRight=function(t,e){if(Xn.Chart.Log("[MinuteFrame::MoveXIndexRight] obj ",e),2==e.DataType){var a=e.IndexData.DayIndex,i=e.IndexData.DataIndex+t,r=-1;if(20==e.IndexData.Type)r=0;else if(10==e.IndexData.Type)r=1;else{if(30!=e.IndexData.Type)return!1;r=2}for(var n=a,o=r;n<e.Data.length;++n){for(var s=e.Data[n];o<3;++o){var l=s[o];if(l.DayItem&&l.DayItem.Data){for(null==i&&(i=0);i<l.DayItem.Data.length;++i){var h=l.DayItem.Data[i];if(h){if(10==l.Type){var u=this.MinuteCount*n+i;return e.Point.X=this.GetXFromIndex(u),e.Point.Y=this.GetYFromData(h.Close),e.IndexData.CursorIndex=u,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}if(20==l.Type){if(!we.IsNumber(h.Price))continue;return e.Point.X=this.GetLeftExtendXFromIndex(i,l.DayItem),e.Point.Y=this.GetLeftExtendYFromData(h.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}if(30==l.Type){if(!we.IsNumber(h.Price))continue;return e.Point.X=this.GetRightExtendXFromIndex(i,l.DayItem),e.Point.Y=this.GetRightExtendYFromData(h.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=n,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}}}i=null}}o=0}return!1}if(1==e.DataType){var a=e.IndexData.DayIndex,i=e.IndexData.DataIndex+t,r=-1;if(2==e.IndexData.Type)r=0;else if(1==e.IndexData.Type)r=1;else{if(3!=e.IndexData.Type)return!1;r=2}for(var n=r;n<e.Data.length;++n){var l=e.Data[n];if(l.DayItem&&l.DayItem.Data){for(null==i&&(i=0);i<l.DayItem.Data.length;++i){if(1==l.Type){if(i>=this.XPointCount)break;var C=l.DayItem.DataOffset,h=l.DayItem.Data[i+C];if(!h)continue;var u=i;return e.Point.X=this.GetXFromIndex(u),e.Point.Y=this.GetYFromData(h.Close),e.IndexData.CursorIndex=u,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}if(2==l.Type){var h=l.DayItem.Data[i];if(!h)continue;if(!we.IsNumber(h.Price))continue;return e.Point.X=this.GetLeftExtendXFromIndex(i,l.DayItem),e.Point.Y=this.GetLeftExtendYFromData(h.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}if(3==l.Type){var h=l.DayItem.Data[i];if(!h)continue;if(!we.IsNumber(h.Price))continue;return e.Point.X=this.GetRightExtendXFromIndex(i,l.DayItem),e.Point.Y=this.GetRightExtendYFromData(h.Price),e.IndexData.CursorIndex=-1,e.IndexData.DayIndex=0,e.IndexData.DataIndex=i,e.IndexData.Type=l.Type,!0}}i=null}}}},this.GetLeftExtendXValidData=function(t,e){if(this.ChartBorder.GetBorder().DayBorder){var a=this.GetLeftExtendXData(t,e.Data);if(!a)return!1;var i=parseInt(a.DataIndex.toFixed(0)),r=e.Data[a.DayIndex];if(i>=0&&i<r.Data.length){var n=r.Data[i];if(we.IsNumber(n.Price))return e.IndexData.DataIndex=i,!0}i<0?i=0:i>=r.Data.length&&(i=r.Data.length-1);for(var o=-1,s=i;s>=0;--s){var n=r.Data[s];if(n&&we.IsNumber(n.Price)){o=s;break}}return!(o<0||(e.IndexData.DataIndex=o,e.IndexData.Point.X=this.GetLeftExtendXFromIndex(o,r),Xn.Chart.Log("[MinuteFrame::GetLeftExtendXValidData] DayIndex:"+e.IndexData.DayIndex+", Type:"+e.IndexData.Type+", x:"+t+"=>"+e.IndexData.Point.X+", index:"+i+"=>"+o),0))}var i=this.GetLeftExtendXData(t,e.Data);if((i=parseInt(i.toFixed(0)))>=0&&i<e.Data.Data.length){var n=e.Data.Data[i];if(we.IsNumber(n.Price))return e.IndexData.DataIndex=i,!0}i<0?i=0:i>=e.Data.Data.length&&(i=e.Data.Data.length-1);for(var o=-1,s=i;s>=0;--s){var n=e.Data.Data[s];if(we.IsNumber(n.Price)){o=s;break}}if(o<0)for(var s=i+1;s<e.Data.Data.length;++s){var n=e.Data.Data[s];if(we.IsNumber(n.Price)){o=s;break}}return!(o<0)&&(e.IndexData.DataIndex=o,e.IndexData.Point.X=this.GetLeftExtendXFromIndex(o,e.Data),Xn.Chart.Log("[MinuteFrame::GetLeftExtendXValidData] DayIndex:"+e.IndexData.DayIndex+", Type:"+e.IndexData.Type+", x:"+t+"=>"+e.IndexData.Point.X+", index:"+i+"=>"+o),!0)},this.GetRightExtendXValidData=function(t,e){if(this.ChartBorder.GetBorder().DayBorder){var a=this.GetRightExtendXData(t,e.Data);if(!a)return!1;var i=parseInt(a.DataIndex.toFixed(0)),r=e.Data[a.DayIndex];if(i>=0&&i<r.Data.length){var n=r.Data[i];if(we.IsNumber(n.Price))return e.IndexData.DataIndex=i,!0}i<0?i=0:i>=r.Data.length&&(i=r.Data.length-1);for(var o=-1,s=i;s>=0;--s){var n=r.Data[s];if(n&&we.IsNumber(n.Price)){o=s;break}}return!(o<0||(e.IndexData.DataIndex=o,e.IndexData.Point.X=this.GetRightExtendXFromIndex(o,r),Xn.Chart.Log("[MinuteFrame::GetRightExtendXValidData] DayIndex:"+e.IndexData.DayIndex+", Type:"+e.IndexData.Type+", x:"+t+"=>"+e.IndexData.Point.X+", index:"+i+"=>"+o),0))}if(!e||!e.Data)return!1;var i=this.GetRightExtendXData(t,e.Data);if((i=parseInt(i.toFixed(0)))>=0&&i<e.Data.Data.length){var n=e.Data.Data[i];if(we.IsNumber(n.Price))return e.IndexData.DataIndex=i,!0}i<0?i=0:i>=e.Data.Data.length&&(i=e.Data.Data.length-1);for(var o=-1,s=i;s>=0;--s){var n=e.Data.Data[s];if(we.IsNumber(n.Price)){o=s;break}}if(o<0)for(var s=i+1;s<e.Data.Data.length;++s){var n=e.Data.Data[s];if(we.IsNumber(n.Price)){o=s;break}}return!(o<0)&&(e.IndexData.DataIndex=o,e.IndexData.Point.X=this.GetRightExtendXFromIndex(o,e.Data),Xn.Chart.Log("[MinuteFrame::GetRightExtendXValidData] DayIndex:"+e.IndexData.DayIndex+", Type:"+e.IndexData.Type+", x:"+t+"=>"+e.IndexData.Point.X+", index:"+i+"=>"+o),!0)},this.GetLeftExtendYFromData=function(t,e,a){if(!a||!a.Range)return this.GetYFromData(t,e);var i=a.Range,r=this.ChartBorder.GetBorder(),n=r.BottomEx-r.TopEx,o=n*(t-i.Min)/(i.Max-i.Min);return r.BottomEx-o},this.GetLeftExtendYData=function(t,e,a){if(!a||!a.Range)return this.GetYData(t,e);var i=a.Range,r=this.ChartBorder.GetBorder(),n=r.BottomEx-r.TopEx;return(r.BottomEx-t)/n*(i.Max-i.Min)+i.Min},this.GetRightExtendMultiDayXFromIndex=function(t,e,a){var i=a.DayBorder,r=i[e.Index],n=e.TotalCount-1,o=r.RightEx;return o+(r.Right-o)*t/n},this.GetRightExtendXFromIndex=function(t,e){var a=e.TotalCount-1,i=this.ChartBorder.GetBorder();return i.DayBorder?this.GetRightExtendMultiDayXFromIndex(t,e,i):i.RightEx+this.ChartBorder.RightExtendWidth*t/a},this.GetRightExtendYFromData=function(t,e,a){return this.GetLeftExtendYFromData(t,e,a)},this.GetRightExtendYData=function(t,e,a){return a&&a.Range?this.GetLeftExtendYData(t,e,a):this.GetYData(t,e)},this.GetRightExtendMultiDayXData=function(t,e,a){for(var i=a.DayBorder,r=0;r<i.length;++r){var n=i[r];if(t>=n.RightEx&&t<=n.Right){if(!e[r])return null;var o=e[r].TotalCount-1,s=n.RightEx,l=n.Right,h=l-s,u=1*o/h*(t-s);return{DayIndex:parseInt(r),DataIndex:u}}}return null},this.GetRightExtendXData=function(t,e){var a=this.ChartBorder.GetBorder();if(a.DayBorder)return this.GetRightExtendMultiDayXData(t,e,a);var i=e.TotalCount-1;i<0&&(i=0);var r=a.RightEx,n=a.Right;return t<=r?0:t>=n?i:1*i/(n-r)*(t-r)}}function O(){this.newMethod=A,this.newMethod(),delete this.newMethod,this.ClassName="MinuteHScreenFrame",this.IsHScreen=!0,this.DrawTitleBG=function(){if(!(this.ChartBorder.TitleHeight<=0)){var t=this.ChartBorder.GetHScreenBorder(),e=p(t.RightEx),a=p(t.Top),i=p(t.Bottom),r=this.ChartBorder.TitleHeight,n=i-a;this.Canvas.fillStyle=this.TitleBGColor,this.Canvas.fillRect(e,a,r,n)}},this.DrawToolbar=function(){},this.DrawBeforeDataBG=function(){var t=this.ChartBorder.GetHScreenBorder();if(t.DayBorder)return void this.DrawMultiDayBeforeDataBG(t);if(!(this.ChartBorder.LeftExtendWidth<10&&this.ChartBorder.RightExtendWidth<10)){var e=p(t.Left),a=p(t.Right);if(this.Canvas.fillStyle=this.BeforeBGColor,this.ChartBorder.LeftExtendWidth>10){var i=p(t.Top),r=p(t.TopEx),n=a-e,o=r-i;this.Canvas.fillRect(e,i,n,o)}if(this.ChartBorder.RightExtendWidth>10){var i=t.BottomEx,r=t.Bottom,n=a-e,o=r-i;this.Canvas.fillRect(e,i,n,o)}}},this.DrawMultiDayBeforeDataBG=function(t){var e=t.DayBorder,a=p(t.Left),i=p(t.Right),r=i-a;this.Canvas.strokeStyle=this.MultiDayBorderPen;for(var n=0;n<e.length;++n){var o=0,s=e[n],l=p(s.Top),h=p(s.TopEx),u=h-l;u>3&&(this.Canvas.fillStyle=this.BeforeBGColor,this.Canvas.fillRect(a,l,r,u),++o);var l=p(s.BottomEx),h=p(s.Bottom),u=h-l;u>3&&(this.Canvas.fillStyle=this.AfterBGColor,this.Canvas.fillRect(a,l,r,u),++o),2==o&&n!=e.length-1&&(this.Canvas.beginPath(),this.Canvas.moveTo(a,h),this.Canvas.lineTo(i,h),this.Canvas.stroke())}},this.GetYData=function(t){var e=this.ChartBorder.GetHScreenBorder();if(t<e.LeftEx)return this.HorizontalMin;if(t>e.RightEx)return this.HorizontalMax;var a=e.RightEx-e.LeftEx;return(t-e.LeftEx)/a*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin},this.GetMultiDayXData=function(t,e){for(var a=e.DayBorder,i=0;i<a.length;++i){var r=a[i];if(t>=r.Top&&t<=r.Bottom){var n=this.MinuteCount-1,o=this.MinuteCount*i;if(t<=r.TopEx)return 0+o;if(t>=r.BottomEx)return n+o;var s=r.BottomEx-r.TopEx;return(t-r.TopEx)*(1*n/s)+o}}},this.GetXData=function(t){var e=this.XPointCount-1;e<0&&(e=0);var a=this.ChartBorder.GetHScreenBorder();if(a.DayBorder)return this.GetMultiDayXData(t,a);if(t<=a.TopEx)return 0;if(t>=a.BottomEx)return e;var i=a.BottomEx-a.TopEx;return(t-a.TopEx)*(1*e/i)},this.GetMultiDayXFromIndex=function(t,e){var a=e.DayBorder,i=t%this.MinuteCount,r=parseInt(t/this.MinuteCount);r>=a.length&&(r=a.length-1);var n=a[r],o=this.MinuteCount-1;if(i>=o)return n.BottomEx;var s=n.BottomEx-n.TopEx;return n.TopEx+s*i/o},this.GetXFromIndex=function(t){var e=this.XPointCount-1,a=this.ChartBorder.GetHScreenBorder();if(a.DayBorder)return this.GetMultiDayXFromIndex(t,a);if(1==e)return 0==t?a.TopEx:a.BottomEx;if(e<=0)return a.TopEx;if(t>=e)return a.BottomEx;var i=a.BottomEx-a.TopEx;return a.TopEx+i*t/e},this.GetYFromData=function(t){var e=this.ChartBorder.GetHScreenBorder();if(t<=this.HorizontalMin)return e.LeftEx;if(t>=this.HorizontalMax)return e.RightEx;var a=(e.RightEx-e.LeftEx)*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return e.LeftEx+a},this.DrawVolTitle=function(t){if(wo.IsShowMinuteVolTitle(t)&&1==this.Identify){var e=C(),a=this.ChartBorder.GetRight()-2*e,i=this.ChartBorder.GetTopEx()+2*e,r=a,n=i;this.Canvas.save(),this.Canvas.translate(r,n),this.Canvas.rotate(90*Math.PI/180);var o=this.YInsideOffset;if(this.Canvas.textAlign="left",this.Canvas.textBaseline="top",So.Minute.VolBarColor||So.Minute.VolTitleColor){So.Minute.VolBarColor?this.Canvas.fillStyle=So.Minute.VolBarColor:this.Canvas.fillStyle=So.Minute.VolTitleColor;var s=this.YSplitOperator.LanguageID,l=bo.GetText("MVol-Vol",s);this.Canvas.fillText(l,o,0),o+=this.Canvas.measureText(l).width,o+=6*C()}this.IsShowPositionTitle&&(l=bo.GetText("MVol-Position",s),this.Canvas.fillStyle=So.Minute.PositionColor,this.Canvas.fillText(l,o,0)),this.Canvas.restore()}},this.DrawHorizontal=function(){for(var t=this.ChartBorder.GetHScreenBorder(),e=t.Top,a=t.Bottom,i=t.Left,r=t.Right,n=this.ChartBorder.Top,o=this.ChartBorder.Bottom,s=null,l=this.HorizontalInfo.length-1;l>=0;--l){var h=this.HorizontalInfo[l],u=this.GetYFromData(h.Value);if(!(null!=u&&Math.abs(u-s)<this.MinYDistance)){if(this.Canvas.strokeStyle=h.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(p(u),e),this.Canvas.lineTo(p(u),a),this.Canvas.stroke(),u>=r-2)this.Canvas.textBaseline="top",u=r;else if(u<=i+2){if(this.Canvas.textBaseline="bottom",null!=(u=i)&&Math.abs(u-s)<2*this.MinYDistance)continue}else this.Canvas.textBaseline="middle";if(null!=h.Message[0]&&n>10){null!=h.Font&&(this.Canvas.font=h.Font),this.Canvas.fillStyle=h.TextColor,this.Canvas.textAlign="right";var C=u,c=e;this.Canvas.save(),this.Canvas.translate(C,c),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(h.Message[0],-2,0),this.Canvas.restore()}if(null!=h.Message[1]&&o>10){null!=h.Font&&(this.Canvas.font=h.Font),this.Canvas.fillStyle=h.TextColor,this.Canvas.textAlign="left";var C=u,c=a;this.Canvas.save(),this.Canvas.translate(C,c),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(h.Message[1],2,0),this.Canvas.restore()}s=u}}},this.DrawInsideClientHorizontal=function(){for(var t=this.GetBorder(),e=t.Left,a=t.Right,i=t.BottomEx,r=t.TopEx,n=(C(),null),o=this.HorizontalInfo.length-1;o>=0;--o){var s=this.HorizontalInfo[o];if(s&&s.Message[2]&&s.Message[3]){var l=this.GetYFromData(s.Value);if(!(null!=l&&null!=n&&Math.abs(l-n)<this.MinYDistance)){if(l>=a-2)this.Canvas.textBaseline="top",l=a;else if(l<=e+2){if(this.Canvas.textBaseline="bottom",null!=(l=e)&&Math.abs(l-n)<2*this.MinYDistance)continue}else this.Canvas.textBaseline="middle";if(s.Message[2]){null!=s.Font&&(this.Canvas.font=s.Font),this.Canvas.fillStyle=s.TextColor,this.Canvas.textAlign="left";var h=l,u=r;this.Canvas.save(),this.Canvas.translate(h,u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(s.Message[2],2,0),this.Canvas.restore()}if(s.Message[3]){null!=s.Font&&(this.Canvas.font=s.Font),this.Canvas.fillStyle=s.TextColor,this.Canvas.textAlign="right";var h=l,u=i;this.Canvas.save(),this.Canvas.translate(h,u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(s.Message[3],-2,0),this.Canvas.restore()}n=l}}}},this.DrawVertical=function(){var t=this.ChartBorder.GetHScreenBorder(),e=t.Left,a=t.Right,i=t.Bottom,r=null;for(var n in this.VerticalInfo){var o=this.GetXFromIndex(this.VerticalInfo[n].Value);if(o>i)break;if(!(null!=r&&Math.abs(o-r)<this.MinXDistance)){if(this.Canvas.strokeStyle=this.VerticalInfo[n].LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e,p(o)),this.Canvas.lineTo(a,p(o)),this.Canvas.stroke(),null!=this.VerticalInfo[n].Message[0]){null!=this.VerticalInfo[n].Font&&(this.Canvas.font=this.VerticalInfo[n].Font),this.Canvas.fillStyle=this.VerticalInfo[n].TextColor;var s=this.Canvas.measureText(this.VerticalInfo[n].Message[0]).width;o<s/2?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top"):o+s/2>=this.ChartBorder.GetChartHeight()?(this.Canvas.textAlign="right",this.Canvas.textBaseline="top"):(this.Canvas.textAlign="center",this.Canvas.textBaseline="top");var l=e,h=o;this.Canvas.save(),this.Canvas.translate(l,h),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.VerticalInfo[n].Message[0],0,0),this.Canvas.restore()}r=o}}},this.DrawInsideHorizontal=function(){if(!this.IsMinSize&&(!1!==this.IsShowYText[0]||!1!==this.IsShowYText[1])){this.DrawInsideClientHorizontal();var t=this.ChartBorder.GetHScreenBorder(),e=t.Left,a=t.RightEx,i=t.Top,r=t.Bottom,n=this.ChartBorder.Top,o=this.ChartBorder.Bottom,s=(this.ChartBorder.TitleHeight,C());if(n<10*s&&!0===this.IsShowYText[0]||o<10*s&&!0===this.IsShowYText[1])for(var s=C(),l=null,h=null,u=this.HorizontalInfo.length-1;u>=0;--u){var c=this.HorizontalInfo[u],f=this.GetYFromData(c.Value);if(!(null!=f&&null!=l&&Math.abs(f-l)<this.MinYDistance)){if(null!=c.Message[0]&&n<10*s&&!0===this.IsShowYText[0]){null!=c.Font&&(this.Canvas.font=c.Font),this.Canvas.fillStyle=c.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline=f>=a-2?"top":f<=e+2?"bottom":"middle";var d=(this.Canvas.textBaseline,this.Canvas.textAlign,this.Canvas.font,c.Message[0],f),D=i;this.Canvas.save(),this.Canvas.translate(d,D),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(c.Message[0],2*s,0),this.Canvas.restore(),(null==h||h<d)&&(this.YInsideOffset=this.Canvas.measureText(c.Message[0]).width+4*C(),h=d)}if(null!=c.Message[1]&&o<10*s&&!0===this.IsShowYText[1]){null!=c.Font&&(this.Canvas.font=c.Font),this.Canvas.fillStyle=c.TextColor,this.Canvas.textAlign="right",this.Canvas.textBaseline=f>=a-2?"top":f<=e+2?"bottom":"middle";var m=this.Canvas.measureText(c.Message[1]).width,d=(this.Canvas.textBaseline,this.Canvas.textAlign,this.Canvas.font,c.Message[1],f),D=r;this.Canvas.save(),this.Canvas.translate(d,D),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(c.Message[1],-2*s,0),this.Canvas.restore()}l=f}}}},this.GetLeftExtendXFromIndex=function(t,e){var a=e.TotalCount-1,i=this.ChartBorder.GetHScreenBorder();return i.DayBorder?this.GetLeftExtendMultiDayXFromIndex(t,e,i):i.Top+this.ChartBorder.LeftExtendWidth*t/a},this.GetLeftExtendMultiDayXFromIndex=function(t,e,a){var i=a.DayBorder,r=i[e.Index],n=e.TotalCount-1,o=r.Top;return o+(r.TopEx-o)*t/n},this.GetLeftExtendMultiDayXData=function(t,e,a){for(var i=a.DayBorder,r=0;r<i.length;++r){var n=i[r];if(t>=n.Top&&t<=n.TopEx){if(!e[r])return null;var o=e[r].TotalCount-1,s=n.Top,l=n.TopEx,h=l-s,u=1*o/h*(t-s);return{DayIndex:parseInt(r),DataIndex:u}}}return null},this.GetLeftExtendXData=function(t,e){var a=this.ChartBorder.GetHScreenBorder();if(a.DayBorder)return this.GetLeftExtendMultiDayXData(t,e,a);var i=e.TotalCount-1;i<0&&(i=0);var r=a.Top,n=a.TopEx;return t<=r?0:t>=n?i:1*i/(n-r)*(t-r)},this.GetLeftExtendYFromData=function(t,e,a){if(!a||!a.Range)return this.GetYFromData(t,e);var i=a.Range,r=this.ChartBorder.GetHScreenBorder(),n=r.RightEx-r.LeftEx,o=n*(t-i.Min)/(i.Max-i.Min);return r.LeftEx+o},this.GetLeftExtendYData=function(t,e,a){if(!a||!a.Range)return this.GetYData(y,e);var i=a.Range,r=this.ChartBorder.GetHScreenBorder(),n=r.RightEx-r.LeftEx;return(t-r.LeftEx)/n*(i.Max-i.Min)+i.Min},this.GetRightExtendMultiDayXFromIndex=function(t,e,a){var i=a.DayBorder,r=i[e.Index],n=e.TotalCount-1,o=r.BottomEx;return o+(r.Bottom-o)*t/n},this.GetRightExtendXFromIndex=function(t,e){var a=e.TotalCount-1,i=this.ChartBorder.GetHScreenBorder();return i.DayBorder?this.GetRightExtendMultiDayXFromIndex(t,e,i):i.BottomEx+this.ChartBorder.RightExtendWidth*t/a},this.GetRightExtendMultiDayXData=function(t,e,a){for(var i=a.DayBorder,r=0;r<i.length;++r){var n=i[r];if(t>=n.BottomEx&&t<=n.Bottom){if(!e[r])return null;var o=e[r].TotalCount-1,s=n.BottomEx,l=n.Bottom,h=l-s,u=1*o/h*(t-s);return{DayIndex:parseInt(r),DataIndex:u}}}return null},this.GetRightExtendXData=function(t,e){var a=this.ChartBorder.GetHScreenBorder();if(a.DayBorder)return this.GetRightExtendMultiDayXData(t,e,a);var i=e.TotalCount-1;i<0&&(i=0);var r=a.BottomEx,n=a.Bottom;return t<=r?0:t>=n?i:1*i/(n-r)*(t-r)},this.GetRightExtendYFromData=function(t,e,a){return a&&a.Range?this.GetLeftExtendYFromData(t,e,a):this.GetYFromData(t,e)},this.DrawNightDayBG=function(){if(1==this.DayCount&&this.HQChart&&this.HQChart.EnableNightDayBG){var t=this.HQChart.Symbol;if(t){var e=-1,a=this.GetEventCallback(Kn.ON_CUSTOM_MINUTE_NIGHT_DAY_X_INDEX);if(a&&a.Callback){var i={Symbol:t,XIndex:e,MinuteTimeStringData:Fo};if(a.Callback(a,i,this),!((e=i.XIndex)<0)){var r=this.ChartBorder.GetHScreenBorder(),n=this.GetXFromIndex(e),o={Left:r.Left,Top:r.Top,Right:r.RightEx,Bottom:n};if(o.Width=o.Right-o.Left,o.Height=o.Bottom-o.Top,this.Canvas.fillStyle=this.NightDayConfig.NightBGColor,this.Canvas.fillRect(o.Left,o.Top,o.Width,o.Height),0==this.Identify){this.Canvas.font=this.NightDayConfig.Font,this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left";for(var s=[{Title:"å¤ç",Position:1,Config:this.NightDayConfig.Night},{Title:"æ¥ç",Position:0,Config:this.NightDayConfig.Day}],l=this.Canvas.measureText("æ").width,h=0;h<s.length;++h){var u=s[h],C=bo.GetText(u.Title,this.HQChart.LanguageID),c=this.Canvas.measureText(C).width,f={Height:c+u.Config.Margin.Left+u.Config.Margin.Right,Width:l+u.Config.Margin.Top+u.Config.Margin.Bottom,Left:r.Left};f.Right=f.Left+f.Width,1===u.Position?(f.Bottom=n-1,f.Top=f.Bottom-f.Height):(f.Top=n+1,f.Bottom=f.Top+f.Height),u.Config.BGColor&&(this.Canvas.fillStyle=u.Config.BGColor,this.Canvas.fillRect(f.Left,f.Top,f.Width,f.Height)),u.Config.BorderColor&&(this.Canvas.strokeStyle=u.Config.BorderColor,this.Canvas.strokeRect(p(f.Left),p(f.Top),g(f.Width),g(f.Height))),this.Canvas.fillStyle=u.Config.Color;var d=f.Left,D=f.Top;this.Canvas.save(),this.Canvas.translate(d,D),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(C,u.Config.Margin.Left,-u.Config.Margin.Bottom),this.Canvas.restore()}}}}}}}}function P(){this.newMethod=A,this.newMethod(),delete this.newMethod,this.ClassName="OverlayMinuteFrame",this.IsShow=!0,this.IsShareY=!1,this.IsCalculateYMaxMin=!0,this.IsShowMainFrame=0,this.Draw=function(){this.SplitXYCoordinate(),this.IsShow,this.SizeChange=!1,this.XYSplit=!1,this.XSplit=!1,this.YCustomSplit=!1},this.DrawToolbar=function(){},this.GetScaleTextWidth=function(){return{TextWidth:0}},this.SplitXYCoordinate=function(){if(0!=this.XYSplit)if(this.IsShareY){this.HorizontalMax=this.MainFrame.HorizontalMax,this.HorizontalMin=this.MainFrame.HorizontalMin,this.HorizontalInfo=[];for(var t=0;t<this.MainFrame.HorizontalInfo.length;++t){var e=this.MainFrame.HorizontalInfo[t];this.HorizontalInfo.push(e)}}else null!=this.YSplitOperator&&this.YSplitOperator.Operator()}}function B(){this.newMethod=O,this.newMethod(),delete this.newMethod,this.ClassName="OverlayMinuteHScreenFrame",this.IsShow=!0,this.Draw=function(){this.SplitXYCoordinate(),this.IsShow,this.SizeChange=!1,this.XYSplit=!1,this.XSplit=!1,this.YCustomSplit=!1},this.SplitXYCoordinate=function(){if(0!=this.XYSplit)if(this.IsShareY){this.HorizontalMax=this.MainFrame.HorizontalMax,this.HorizontalMin=this.MainFrame.HorizontalMin,this.HorizontalInfo=[];for(var t in this.MainFrame.HorizontalInfo){var e=this.MainFrame.HorizontalInfo[t];this.HorizontalInfo.push(e)}}else null!=this.YSplitOperator&&this.YSplitOperator.Operator()}}function _(){this.newMethod=R,this.newMethod(),delete this.newMethod,this.ClassName="KLineFrame",this.ToolbarID=D(),this.ModifyIndex=So.KLineToolbar.ModifyIndex,this.ChangeIndex=So.KLineToolbar.ChangeIndex,this.CloseIndex=So.KLineToolbar.CloseIndex,this.OverlayIndex=So.KLineToolbar.OverlayIndex,this.MaxMinWindow=So.KLineToolbar.MaxMinWindow,this.TitleWindow=So.KLineToolbar.TitleWindow,this.ExportData=So.KLineToolbar.ExportData,this.SelBorderColor=So.SelFrameBorderColor,this.ToolbarRect=null,this.ReDrawToolbar=!1,this.LastCalculateStatus={Width:0,XPointCount:0},this.CustomHorizontalInfo=[],this.IsDrawTitleBG=!1,this.IsShowNameArrow=!1,this.CustomVerticalInfo=[],this.DrawCustomVerticalEvent,this.RightSpaceCount=0,this.Logarithmic=null,this.CustomToolbar=[],this.ToolbarType=0,this.DrawToolbar=function(){if(1!=this.ToolbarButtonStyle&&!0!==So.IsDOMFrameToolbar&&void 0!==Yn.default&&this.ChartBorder.UIElement&&this.ChartBorder.UIElement.parentNode){var t=document.getElementById(this.ToolbarID);if(!t||0!=this.SizeChange||0!=this.ReDrawToolbar){if(t||(t=document.createElement("div"),t.className="klineframe-toolbar",t.id=this.ToolbarID,t.oncontextmenu=function(){return!1},t.setAttribute("identify",this.Identify.toString()),this.ChartBorder.UIElement.parentNode.appendChild(t)),!(this.ModifyIndex||this.ChangeIndex||this.OverlayIndex||this.CloseIndex||we.IsNonEmptyArray(this.CustomToolbar)))return void("none"!=t.style.display&&(t.style.display="none"));var e=C(),a=parseInt(this.ChartBorder.UIElement.parentElement.style.width.replace("px","")),i=(parseInt(this.ChartBorder.UIElement.parentElement.style.height.replace("px","")),this.ChartBorder.GetTitleHeight()),r=a-this.ChartBorder.Right/e-100,n=this.ChartBorder.GetTop()/e;if(!this.ToolbarRect||this.ToolbarRect.Left!=r||this.ToolbarRect.Top!=n||100!=this.ToolbarRect.Width||this.ToolbarRect.Height!=i/e){this.ToolbarRect={Left:r,Top:n,Width:100,Height:i/e};var o="<span class='index_param icon iconfont icon-index_param' id='modifyindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='è°æ´ææ åæ°'></span><span class='index_change icon iconfont icon-change_index' id='changeindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='åæ¢ææ '></span><span class='index_overlay icon iconfont icon-overlay_index' id='overlayindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='å å ææ '></span>";if(0!==this.Identify&&this.CloseIndex&&(o+="<span class='index_close icon iconfont icon-close' id='closeindex' style='cursor:pointer;margin-left:2px;margin-right:2px;' title='å³é­ææ çªå£'></span>"),we.IsNonEmptyArray(this.CustomToolbar))for(var s=0;s<this.CustomToolbar.length;++s){var l=this.CustomToolbar[s];o+=l.Html}t.style.left=r+"px",t.style.top=n+"px",t.style.width="100px",t.style.height=i/e+"px",t.innerHTML=o;this.ChartBorder.UIElement.JSChartContainer,this.Identify;if(this.ModifyIndex?"function"==typeof this.ModifyIndexEvent&&(0,Yn.default)("#"+t.id+" .index_param").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify},this.ModifyIndexEvent):(0,Yn.default)("#"+t.id+" .index_param").hide(),this.ChangeIndex?"function"==typeof this.ChangeIndexEvent&&(0,Yn.default)("#"+t.id+" .index_change").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify,IsOverlay:!1},this.ChangeIndexEvent):(0,Yn.default)("#"+t.id+" .index_change").hide(),this.OverlayIndex?(0,Yn.default)("#"+t.id+" .index_overlay").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify,IsOverlay:!0},this.ChangeIndexEvent):(0,Yn.default)("#"+t.id+" .index_overlay").hide(),(0,Yn.default)("#"+t.id+" .index_close").click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify},function(t){var e=t.data.Chart,a=t.data.Identify;e.RemoveIndexWindow(a)}),we.IsNonEmptyArray(this.CustomToolbar))for(var s=0;s<this.CustomToolbar.length;++s){var l=this.CustomToolbar[s];(0,Yn.default)("#"+l.ID).click({Chart:this.ChartBorder.UIElement.JSChartContainer,Identify:this.Identify,ID:l.ID},l.Click)}t.style.display="block"}}}},this.DrawToolbarV2=function(t,e){if(!0!==So.IsDOMFrameToolbar&&(this.Buttons=[],this.LeftButtonWidth=0,1!=this.IsMinSize&&!(this.ChartBorder.TitleHeight<5))){var a=[];if(this.CloseIndex&&0!==this.Identify&&a.push({ID:qn.CLOSE_INDEX_WINDOW,Style:this.CloseWindowButton}),this.MaxMinWindow&&0!=this.Identify&&a.push({ID:qn.MAX_MIN_WINDOW,Style:this.MaxMinWindowButton}),this.TitleWindow&&0!=this.Identify&&a.push({ID:qn.TITLE_WINDOW,Style:this.TitleWindowButton}),this.ExportData&&a.push({ID:qn.EXPORT_DATA,Style:this.ExportDataButton}),this.OverlayIndex&&a.push({ID:qn.OVERLAY_INDEX,Style:this.OverlayIndexButton}),this.ChangeIndex&&a.push({ID:qn.CHANGE_INDEX,Style:this.ChangeIndexButton}),this.ModifyIndex&&a.push({ID:qn.MODIFY_INDEX_PARAM,Style:this.ModifyIndexParamButton}),we.IsNonEmptyArray(this.CustomToolbar))for(var i=0;i<this.CustomToolbar.length;++i){var r=this.CustomToolbar[i];if(r.ID&&r.Style){var n={ID:r.ID,Style:r.Style,TooltipText:r.TooltipText,Data:r.Data};!0===r.IsLeft||a.push(n)}}if(this.GetEventCallback){var o=this.GetEventCallback(Kn.ON_CUSTOM_RIGHT_TOOLBAR);if(o&&o.Callback){var s={PreventDefault:!1,DefaultButton:a,AryButton:null,FrameID:this.Identify};if(o.Callback(o,s,this),s.PreventDefault)return void this.DrawTitleButton(s.AryButton,t,e)}}this.DrawTitleButton(a,t,e)}},this.GetLeftToolbar=function(t){if(this.GetEventCallback){var e=this.GetEventCallback(Kn.ON_CUSTOM_LEFT_TOOLBAR);if(e&&e.Callback){var a={PreventDefault:!1,AryButton:null,FrameID:this.Identify};if(t&&(t.Overlay&&(a.Title=t.Overlay.Title),t.OverlayID&&(a.OverlayID=t.OverlayID)),e.Callback(e,a,this),a.PreventDefault)return a.AryButton}}if(!we.IsNonEmptyArray(this.CustomToolbar))return null;for(var i=[],r=0;r<this.CustomToolbar.length;++r){var n=this.CustomToolbar[r];if(n.ID&&n.Style){var o={ID:n.ID,Style:n.Style,TooltipText:n.TooltipText,Data:n.Data};!0===n.IsLeft&&i.push(o)}}return i},this.DrawFrame=function(){this.IsMinSize||(this.SplitXYCoordinate(),1==this.SizeChange&&(this.CalculateDataWidth(),this.Logarithmic&&this.SplitLogarithmicXYCoordinate()),this.BeforeDrawXYCallback&&this.BeforeDrawXYCallback(this),this.DrawTitleBG(),this.DrawCustomHorizontalArea(),this.DrawHorizontal(),this.DrawVertical()),1!=this.SizeChange&&1!=this.ReDrawToolbar||(this.DrawToolbar(),this.ReDrawToolbar=!1)},this.GetXFromIndex=function(t,e){if(!1===e)if(t>=0)for(var a=this.ChartBorder.GetLeft()+So.FrameLeftMargin+this.DistanceWidth/2+this.DataWidth/2,i=1;i<=t;++i)a+=this.DistanceWidth+this.DataWidth;else for(var a=this.ChartBorder.GetLeft()+So.FrameLeftMargin-(this.DistanceWidth/2+this.DataWidth+this.DistanceWidth),r=Math.abs(t),i=1;i<r;++i)a-=this.DistanceWidth+this.DataWidth;else{t<0&&(t=0),t>this.xPointCount-1&&(t=this.xPointCount-1);for(var a=this.ChartBorder.GetLeft()+So.FrameLeftMargin+this.DistanceWidth/2+this.DataWidth/2,i=1;i<=t;++i)a+=this.DistanceWidth+this.DataWidth}return a},this.GetXData=function(t,e){var a=this.DistanceWidth,i=this.DataWidth,r=this.ChartBorder.GetLeft()+So.FrameLeftMargin;if(0==e){if(t<this.ChartBorder.GetLeft()){for(var n=-1,o=this.ChartBorder.GetLeft()-(a/2+i+a);n>-5e5&&!(o<=t);)o-=i+a,--n;return n}for(var n=0,o=r+a/2+i+a;n<5e5&&!(o>=t);)o+=i+a,++n;return n}if(t<=this.ChartBorder.GetLeft())return 0;if(t>=this.ChartBorder.GetRight())return this.XPointCount-1;for(var s=this.ChartBorder.GetRight()-So.FrameRightMargin,n=0,o=r+a/2+i+a;o<s&&n<5e5&&n+1<this.XPointCount&&!(o>=t);)o+=i+a,++n;return n},this.CalculateDataWidth=function(){if(!(this.XPointCount<2)){var t=this.GetFrameWidth()-So.FrameMargin;if(this.ZoomIndex>=0&&this.LastCalculateStatus.Width==t&&this.LastCalculateStatus.XPointCount==this.XPointCount){var e=this.DistanceWidth/2+So.FrameLeftMargin+(this.DataWidth+this.DistanceWidth)*(this.XPointCount-1),a=(this.DataWidth+this.DistanceWidth)*this.XPointCount;if(this.DataWidth<2){if(a<=t)return}else if(e<=t)return}this.LastCalculateStatus.Width=t,this.LastCalculateStatus.XPointCount=this.XPointCount;for(var i=0;i<Co.length;++i)if((Co[i][0]+Co[i][1])*this.XPointCount<t)return this.ZoomIndex=i,this.DataWidth=Co[i][0],this.DistanceWidth=Co[i][1],this.TrimKLineDataWidth(t),void Xn.Chart.Log("[KLineFrame::CalculateDataWidth] ZOOM_SEED, DataWidth, DistanceWidth, XPointCount",Co[this.ZoomIndex],this.DataWidth,this.DistanceWidth,this.XPointCount);this.ZoomIndex=Co.length-1,this.DataWidth=t/this.XPointCount,this.DistanceWidth=0}},this.OnSize=function(t){for(var e=this.GetFrameWidth()-So.FrameMargin,a=0,i=this.DistanceWidth/2+So.FrameLeftMargin+(this.DataWidth+this.DistanceWidth);i<e;i+=this.DataWidth+this.DistanceWidth,++a);return t.CurCount=this.XPointCount,t.CalcCount=a,t.DataWidth=this.DataWidth,t.DistanceWidth=this.DistanceWidth,t.Changed=!1,this.LastCalculateStatus.Width=e,t.CurCount==t.CalcCount?t:(this.XPointCount=a,this.LastCalculateStatus.XPointCount=this.XPointCount,this.Data&&(this.Data.DataOffset+=t.CurCount-t.CalcCount,this.Data.DataOffset<0&&(this.Data.DataOffset=0),t.Changed=!0),t)},this.SetDataWidth=function(t){var e=Co.length-1;for(var a in Co){if(Co[a][0]<=t){e=parseInt(a)-1;break}}this.ZoomIndex=e,this.DataWidth=Co[this.ZoomIndex][0],this.DistanceWidth=Co[this.ZoomIndex][1];for(var i=this.GetFrameWidth()-So.FrameMargin,r=0,n=this.DistanceWidth/2+So.FrameLeftMargin+(this.DataWidth+this.DistanceWidth);n<=i;n+=this.DataWidth+this.DistanceWidth,++r);return this.XPointCount=r,this.LastCalculateStatus.XPointCount=this.XPointCount,this.LastCalculateStatus.Width=i,{XPointCount:this.XPointCount,DataWidth:this.DataWidth,DistanceWidth:this.DistanceWidth}},this.TrimKLineDataWidth=function(t){var e=Co[this.ZoomIndex][0],a=Co[this.ZoomIndex][1];if(1==e&&0==a)return void(this.DataWidth=t/this.XPointCount);for(;;){if((this.DistanceWidth+this.DataWidth)*this.XPointCount+this.DistanceWidth>t){this.DistanceWidth-=.01;break}this.DistanceWidth+=.01}},this.IsOverlayMaxMin=function(t){if(!this.ChartKLine)return!1;if(!this.ChartKLine.Max||!this.ChartKLine.Min)return!1;var e=this.Canvas.measureText(t.Text.Value).width+4;"right"===t.Text.TextAlign&&(t.X-=e);var a=this.ChartKLine.Max,i=this.ChartKLine.Min,r=!1,n=!1;if(a.X>=t.X&&a.X<=t.X+e){var o=a.Y+20,s=a.Y-20;(o>=t.Y-20&&o<=t.Y+20||s>=t.Y-20&&s<=t.Y+20)&&(r=!0)}if(1==r)return!0;if(i.X>=t.X&&i.X<=t.X+e){var o=i.Y+20,s=i.Y-20;(o>=t.Y-20&&o<=t.Y+20||s>=t.Y-20&&s<=t.Y+20)&&(n=!0)}return r||n},this.SplitXYCoordinate=function(){if(0==this.XYSplit)return this.XSplit&&this.XSplitOperator&&this.XSplitOperator.Operator(),void(this.YCustomSplit&&this.YSplitOperator&&this.YSplitOperator.CustomCoordinate&&this.YSplitOperator.CustomCoordinate());null!=this.YSplitOperator&&this.YSplitOperator.Operator(),null!=this.XSplitOperator&&this.XSplitOperator.Operator(),this.Logarithmic&&this.SplitLogarithmicXYCoordinate()},this.SplitLogarithmicXYCoordinate=function(){for(var t=this.Logarithmic.Up,e=this.Logarithmic.Down,a=0,i=0,r=Math.max(t.length,e.length),n=[],o=0;o<r;++o)n[o]=2*o;for(var o=0,s=n.length-1;o<t.length;++o,--s){var l=t[o];l.LogHeight=n[s],a+=l.LogHeight,++i}for(var o=0,s=n.length-1;o<e.length;++o,--s){var l=e[o];l.LogHeight=n[s],a+=l.LogHeight,++i}var h=2*C(),u=this.ChartBorder.GetTopEx(),c=this.ChartBorder.GetBottomEx(),f=c-u,d=(f-a*h)/i;if(d<0&&(d=0,h=f/a),1==this.CoordinateType){for(var D=u,o=e.length-1;o>=0;--o){var l=e[o];l.Height=d+h*l.LogHeight,l.Top=D,l.Bottom=l.Top+l.Height,D=l.Bottom}for(var m=c,o=t.length-1;o>=0;--o){var l=t[o];l.Height=d+h*l.LogHeight,l.Bottom=m,l.Top=m-l.Height,m=l.Top}}else{for(var D=u,o=t.length-1;o>=0;--o){var l=t[o];l.Height=d+h*l.LogHeight,l.Top=D,l.Bottom=l.Top+l.Height,D=l.Bottom}for(var m=c,o=e.length-1;o>=0;--o){var l=e[o];l.Height=d+h*l.LogHeight,l.Bottom=m,l.Top=m-l.Height,m=l.Top}}Xn.Chart.Log("[KLineFrame::SplitLogarithmicXYCoordinate]",this.Logarithmic)},this.GetYLogarithmicFromData=function(t,e){if(1==this.CoordinateType){if(t<=this.HorizontalMin)return this.ChartBorder.GetTopEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetBottomEx();if(t>this.Logarithmic.OpenPrice){var a=this.Logarithmic.Up;for(var i in a){var r=a[i];if(t>=r.Start&&t<=r.End){var n=r.Bottom-r.Top,o=n*(t-r.Start)/(r.End-r.Start);return r.Top+o}}}else{var s=this.Logarithmic.Down;for(var i in s){var r=s[i];if(t>=r.Start&&t<=r.End){var n=r.Bottom-r.Top,o=n*(t-r.Start)/(r.End-r.Start);return r.Top+o}}}}else{if(t<=this.HorizontalMin)return this.ChartBorder.GetBottomEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetTopEx();if(t>this.Logarithmic.OpenPrice){var a=this.Logarithmic.Up;for(var i in a){var r=a[i];if(t>=r.Start&&t<=r.End){var n=r.Bottom-r.Top,o=n*(t-r.Start)/(r.End-r.Start);return r.Bottom-o}}}else{var s=this.Logarithmic.Down;for(var i in s){var r=s[i];if(t>=r.Start&&t<=r.End){var n=r.Bottom-r.Top,o=n*(t-r.Start)/(r.End-r.Start);return r.Bottom-o}}}}},this.GetYLogarithmicData=function(t){if(1==this.CoordinateType){if(t<this.ChartBorder.GetTopEx())return this.HorizontalMin;if(t>this.ChartBorder.GetBottomEx())return this.HorizontalMax;var e=this.Logarithmic.Up;for(var a in e){var i=e[a];if(t>=i.Top&&t<=i.Bottom)return(t-i.Top)/i.Height*(i.End-i.Start)+i.Start}var r=this.Logarithmic.Down;for(var a in r){var i=r[a];if(t>=i.Top&&t<=i.Bottom)return(t-i.Top)/i.Height*(i.End-i.Start)+i.Start}}else{if(t<this.ChartBorder.GetTopEx())return this.HorizontalMax;if(t>this.ChartBorder.GetBottomEx())return this.HorizontalMin;var e=this.Logarithmic.Up;for(var a in e){var i=e[a];if(t>=i.Top&&t<=i.Bottom)return(i.Bottom-t)/i.Height*(i.End-i.Start)+i.Start}var r=this.Logarithmic.Down;for(var a in r){var i=r[a];if(t>=i.Top&&t<=i.Bottom)return(i.Bottom-t)/i.Height*(i.End-i.Start)+i.Start}}},this.CalculateCount=function(t){var e=Co[t][0],a=Co[t][1],i=this.GetFrameWidth()-So.FrameMargin-a/2;return parseInt(i/(e+a))},this.ZoomUp=function(t){if(this.ZoomIndex<=0)return!1;if(this.Data.DataOffset<0)return!1;var e=this.Data.Data.length,a=e+this.RightSpaceCount,i=0,r=this.Data.DataOffset+this.XPointCount-1,n=this.Data.DataOffset+t.Index;r>=e&&(i=r-(this.Data.Data.length-1),r=this.Data.Data.length-1,i>this.RightSpaceCount&&(i=this.RightSpaceCount));var o=this.CalculateCount(this.ZoomIndex-1);Xn.Chart.Log("[KLineFrame::ZoomUp] old status. XPointCount="+o+" ZoomIndex="+this.ZoomIndex+" DataCount= "+this.Data.Data.length+" rightSpaceCount="+i);var s=!1;if(--this.ZoomIndex,1==t.IsLockRight){var l=this.Data.DataOffset+this.XPointCount;if(o>l)o=l,this.XPointCount=o,this.Data.DataOffset=0;else{var h=r-(o-i)+1;this.XPointCount=o,this.Data.DataOffset=h,this.Data.DataOffset<0&&(this.Data.DataOffset=0)}}else if(o>=a)this.Data.DataOffset=0,this.XPointCount=o,s=!0,Xn.Chart.Log("[KLineFrame::ZoomUp] Show all data. XPointCount="+o+" ZoomIndex="+this.ZoomIndex+" DataCount= "+e);else{var h=r-(o-i)+1;if(1==t.ZoomType){var u=this.XPointCount-o+1,C=parseInt(t.Index/this.XPointCount*u),c=this.Data.DataOffset+C;c<e&&(h=this.Data.DataOffset+C)}this.XPointCount=o,this.Data.DataOffset=h,this.Data.DataOffset<0&&(this.Data.DataOffset=0),Xn.Chart.Log("[KLineFrame::ZoomUp] calculate. XPointCount="+o+" ZoomIndex="+this.ZoomIndex+" DataCount= "+e+" DataOffset="+this.Data.DataOffset)}if(this.DataWidth=Co[this.ZoomIndex][0],this.DistanceWidth=Co[this.ZoomIndex][1],!s){var f=this.GetFrameWidth()-So.FrameMargin;this.TrimKLineDataWidth(f)}return this.LastCalculateStatus.XPointCount=this.XPointCount,t.Index=n-this.Data.DataOffset,!0},this.SetXShowCount=function(t){for(var e=-1,a=this.GetFrameWidth()-So.FrameMargin,i=0;i<Co.length;++i){var r=Co[i],n=r[0],o=r[1],a=this.GetFrameWidth()-So.FrameMargin-o/2;if(parseInt((a-o/2)/(n+o))>=t)return e=i,this.XPointCount=t,this.ZoomIndex=e,this.DataWidth=n,this.DistanceWidth=o,n<=1&&0==o&&(this.DataWidth=a/this.XPointCount),this.LastCalculateStatus.XPointCount=this.XPointCount,void(this.LastCalculateStatus.Width=a)}this.XPointCount=t,this.ZoomIndex=Co.length-1,this.DataWidth=a/this.XPointCount,this.DistanceWidth=0,this.LastCalculateStatus.XPointCount=this.XPointCount,this.LastCalculateStatus.Width=a},this.XCoordinateZoom=function(t){var e=this.XPointCount;if(t){if(this.ZoomIndex<=0)return!1;if(this.Data.DataOffset<0)return!1;var a=this.ZoomIndex-1,i=this.CalculateCount(a),r=this.Data.Data.length,n=e-i;if(n<=0)return!1;this.Data.DataOffset+=n,this.Data.DataOffset>r&&(this.Data.DataOffset=0)}else{if(this.ZoomIndex+1>=Co.length)return!1;if(this.Data.DataOffset<0)return!1;var a=this.ZoomIndex+1,i=this.CalculateCount(a),n=i-e;this.Data.DataOffset-=n,this.Data.DataOffset<0&&(this.Data.DataOffset=0)}this.XPointCount=i,this.ZoomIndex=a,this.DataWidth=Co[this.ZoomIndex][0],this.DistanceWidth=Co[this.ZoomIndex][1];var o=this.GetFrameWidth()-So.FrameMargin;return this.TrimKLineDataWidth(o),this.LastCalculateStatus.XPointCount=this.XPointCount,!0},this.ZoomDown=function(t,e){if(this.ZoomIndex+1>=Co.length)return!1;if(this.Data.DataOffset<0)return!1;if(this.Data.DataOffset<=0&&1==t.IsLockRight)return!1;var a=this.Data.Data.length,i=a+this.RightSpaceCount,r=0,n=this.Data.DataOffset+this.XPointCount-1;n>=this.Data.Data.length&&(r=n-(this.Data.Data.length-1),n=this.Data.Data.length-1,r>this.RightSpaceCount&&(r=this.RightSpaceCount));var o=this.CalculateCount(this.ZoomIndex+1),s=this.Data.DataOffset+t.Index;Xn.Chart.Log("[KLineFrame::ZoomDown] old status. XPointCount="+o+" ZoomIndex="+this.ZoomIndex+" DataCount= "+this.Data.Data.length+" lastCursorIndex="+s+" rightSpaceCount="+r);if(++this.ZoomIndex,1==t.IsLockRight){var l=this.Data.DataOffset+this.XPointCount;if(o>l)o=l,this.XPointCount=o,this.Data.DataOffset=0;else{var h=n-(o-r)+1;this.XPointCount=o,this.Data.DataOffset=h,this.Data.DataOffset<0&&(this.Data.DataOffset=0)}}else if(o>=i)this.XPointCount=o,this.Data.DataOffset=0,Xn.Chart.Log("[KLineFrame::ZoomDown] Show all data. XPointCount="+o+" ZoomIndex="+this.ZoomIndex+" DataCount= "+a),o-this.RightSpaceCount>a&&e&&e.ZoomDownloadDataCallback&&e.ZoomDownloadDataCallback({PageSize:o,DataCount:a,RightSpaceCount:this.RightSpaceCount,Count:o-a});else{var h=n-(o-r)+1;if(1==t.ZoomType){var u=o-this.XPointCount+1,C=parseInt(t.Index/this.XPointCount*u),h=this.Data.DataOffset-C;h+(o-this.RightSpaceCount)>=a&&(h=this.Data.DataOffset-u)}this.XPointCount=o,this.Data.DataOffset=h,this.Data.DataOffset<0&&(this.Data.DataOffset=0),Xn.Chart.Log("[KLineFrame::ZoomDown] calculate. XPointCount="+o+" ZoomIndex="+this.ZoomIndex+" DataCount= "+a+" DataOffset="+this.Data.DataOffset)}this.DataWidth=Co[this.ZoomIndex][0],this.DistanceWidth=Co[this.ZoomIndex][1];var c=this.GetFrameWidth()-So.FrameMargin;return this.TrimKLineDataWidth(c),this.LastCalculateStatus.XPointCount=this.XPointCount,t.Index=s-this.Data.DataOffset,!0},this.GetFrameWidth=function(){if(this.IsHScreen){var t=this.ChartBorder.GetHScreenBorder();return t.BottomEx-t.TopEx}var t=this.ChartBorder.GetBorder();return t.RightEx-t.LeftEx},this.DrawCustomHorizontal=function(){if(!this.IsMinSize&&!this.ChartBorder.IsShowTitleOnly&&we.IsNonEmptyArray(this.CustomHorizontalInfo)){var t=this.CustomHorizontalInfo.slice();t.sort(function(t,e){return e.Value-t.Value});for(var e=new Vn.default,a=0;a<t.length;++a){var i=t[a];switch(i.Type){case 0:case 1:this.DrawCustomItem(i,e);break;case 2:case 3:case 4:case 10:this.DrawCustomItem(i,e)}}}},this.DrawCustomHorizontalArea=function(){if(!this.IsMinSize&&!this.ChartBorder.IsShowTitleOnly&&we.IsNonEmptyArray(this.CustomHorizontalInfo))for(var t=0;t<this.CustomHorizontalInfo.length;++t){var e=this.CustomHorizontalInfo[t];5==e.Type&&this.DrawCustomAreaItem(e)}},this.DrawCustomVerticalItem=function(t){this.Canvas.save(),1==t.Data.Line.Type&&this.Canvas.setLineDash([5,5]),this.Canvas.strokeStyle=t.Data.Line.Color,this.Canvas.beginPath(),t.IsHScreen?(this.Canvas.moveTo(t.Top,p(t.X)),this.Canvas.lineTo(t.Bottom,p(t.X))):(this.Canvas.moveTo(p(t.X),t.Top),this.Canvas.lineTo(p(t.X),t.Bottom)),this.Canvas.stroke(),this.Canvas.restore()},this.DrawCustomVertical=function(){if(this.CustomVerticalInfo&&!(this.CustomVerticalInfo.length<=0)&&this.Data){var t=this.IsHScreen,e=this.ChartBorder.GetTopEx(),a=this.ChartBorder.GetBottomEx(),i=this.DataWidth,r=this.DistanceWidth,n=this.ChartBorder.GetLeft()+r/2+2;t&&(n=this.ChartBorder.GetTop()+r/2+2,e=this.ChartBorder.GetLeftEx(),a=this.ChartBorder.GetRightEx());for(var o=0,s=this.Data.DataOffset;s<this.Data.Data.length&&o<this.XPointCount;++s,++o,n+=i+r){var l=this.Data.Data[s];for(var h in this.CustomVerticalInfo){var u=this.CustomVerticalInfo[h];if(0==u.Type){if(we.IsNumber(u.Time)){if(l.Date!=u.Date||l.Time!=u.Time)continue}else if(l.Date!=u.Date)continue;var C=n,c=n+i,f=C+(c-C)/2,d={X:f,Top:e,Bottom:a,Data:u,IsHScreen:t};this.DrawCustomVerticalItem(d),this.DrawCustomVerticalEvent&&this.DrawCustomVerticalEvent.Callback(this.DrawCustomVerticalEvent,d,this);break}}}for(var s=1;o<this.XPointCount;++s,++o,n+=i+r)for(var h in this.CustomVerticalInfo){var u=this.CustomVerticalInfo[h];if(1==u.Type&&u.Space==s){var C=n,c=n+i,f=C+(c-C)/2,d={X:f,Top:e,Bottom:a,Data:u,IsHScreen:t};this.DrawCustomVerticalItem(d),this.DrawCustomVerticalEvent&&this.DrawCustomVerticalEvent.Callback(this.DrawCustomVerticalEvent,d,this);break}}}},this.DrawSelectedBorder=function(t){if(0!==this.Identify){var e=1==this.IsHScreen?this.ChartBorder.GetHScreenBorder():this.ChartBorder.GetBorder(),a=p(e.Left),i=p(e.Top),r=p(e.Right),n=p(e.Bottom),o=n-i;if(this.Canvas.strokeStyle=this.SelBorderColor,1==t.Mode){var s=p(e.ChartWidth);this.Canvas.strokeRect(r,i,s-r-1,o)}else this.Canvas.strokeRect(a,i,r-a-1,o)}},this.GetVerticalXCache=function(){if(!we.IsNonEmptyArray(this.VerticalInfo))return null;for(var t=this.DataWidth,e=this.DistanceWidth,a=this.XPointCount,i=new Rn.default,r=0;r<this.VerticalInfo.length;++r){var n=this.VerticalInfo[r];i.add(n.Value)}if(this.IsHScreen)var o=this.ChartBorder.GetHScreenBorder(),s=o.TopEx+e/2+So.FrameLeftMargin;else var o=this.ChartBorder.GetBorder(),s=o.LeftEx+e/2+So.FrameLeftMargin;for(var l=new Vn.default,r=0;r<a;++r,s+=t+e){var h=s,u=s+t,C=h+(u-h)/2;i.has(r)&&l.set(r,C)}return l}}function G(){this.newMethod=_,this.newMethod(),delete this.newMethod,this.ClassName="OverlayKLineFrame",this.MainFrame=null,this.IsShareY=!1,this.IsShowMainFrame=0,this.IsCalculateYMaxMin=!0,this.RightOffset=50,this.PenBorder=So.OverlayFrame.BolderPen,this.IsShow=So.KLineToolbar.IsShowOverlayFrame,this.IsShowToolbar=So.KLineToolbar.IsShowOverlayToolbar,this.Title=null,this.TitleColor=So.OverlayFrame.TitleColor,this.TitleFont=So.OverlayFrame.TitleFont,this.IsShowTitle=!0,this.IsYDrawMainFrame=!1,this.BlankWidth=0,this.Style=0,this.YLineExtend=[{Width:2},null],this.Buttons=[],this.CloseButton=I(So.Buttons.CloseOverlayIndex),this.ModifyIndexParamButton=I(So.Buttons.ModifyIndexParam),this.DrawSelectedBorder=null,this.KLineFrame_ReloadResource=this.ReloadResource,this.ReloadResource=function(t){this.KLineFrame_ReloadResource(t),t||(this.CloseButton=I(So.Buttons.CloseOverlayIndex),this.ModifyIndexParamButton=I(So.Buttons.ModifyIndexParam),this.PenBorder=So.OverlayFrame.BolderPen,this.TitleColor=So.OverlayFrame.TitleColor,this.TitleFont=So.OverlayFrame.TitleFont)},this.Draw=function(){this.Buttons=[],this.ChartBorder.IsShowTitleOnly||(this.SplitXYCoordinate(),this.IsShow&&(this.DrawVertical(),this.DrawHorizontal(),this.DrawTitle()),this.SizeChange=!1,this.XYSplit=!1,this.XSplit=!1,this.YCustomSplit=!1)},this.GetXHorizontal=function(){var t=this.ChartBorder.GetBorder(),e=t.Right;return e+=this.RightOffset,1==this.Style||(e+=this.BlankWidth),e},this.GetHorizontalWidth=function(){var t=null;return this.YRightTextInfo&&we.IsNumber(this.TextWidthIndex)&&(t=this.YRightTextInfo.AryOverlayWidth[this.TextWidthIndex]),t},this.DrawTitle=function(){if(this.IsShowTitle&&this.Title){var t=this.ChartBorder.GetBorder(),e=this.ChartBorder.GetTopTitle(),a=t.Bottom,i=this.GetXHorizontal(),r=null,n=null;we.IsNonEmptyArray(this.YLineExtend)&&(n=this.YLineExtend[1],r=this.YLineExtend[0]),1==this.Style?(this.Canvas.textBaseline="bottom",n&&n.Width>0?i+=n.Width+1:i+=1):(this.Canvas.textBaseline="top",r&&r.Width>0?i-=r.Width:i-=2);var o=e+(a-e)/2;this.Canvas.fillStyle=this.TitleColor,this.Canvas.font=this.TitleFont,this.Canvas.textAlign="center",this.Canvas.save(),this.Canvas.translate(i,o),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.Title,0,0),this.Canvas.restore()}},this.GetScaleTextWidth=function(){if(!this.IsShow)return null;var t=(this.ChartBorder.GetBorder(),C());if(this.IsHScreen)var e=this.ChartBorder.Bottom,a=e>10*t&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1];else var i=this.ChartBorder.Right,a=i>10&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1];if(!a)return null;for(var r={Left:null,Right:0},n=0;n<this.HorizontalInfo.length;++n){var o=null,s=this.HorizontalInfo[n];s&&(null!=s.Message[1]&&a&&(null!=s.Font&&(this.Canvas.font=s.Font),o=this.Canvas.measureText(s.Message[1]).width,this.YTextPadding&&we.IsNumber(this.YTextPadding[1])&&(o+=this.YTextPadding[1]),r.Right<o&&(r.Right=o)))}if(we.IsNonEmptyArray(this.YLineExtend)){var l=this.YLineExtend[1];l&&l.Width>0&&(r.Right+=l.Width)}return{TextWidth:r}},this.SyncMainHorizontalInfo=function(){if(!this.MainFrame)return!1;this.MainFrame.YMaxMin&&(this.YMaxMin.Max=this.MainFrame.YMaxMin.Max,this.YMaxMin.Min=this.MainFrame.YMaxMin.Min),this.HorizontalMax=this.MainFrame.HorizontalMax,this.HorizontalMin=this.MainFrame.HorizontalMin,this.HorizontalInfo=[];for(var t=0;t<this.MainFrame.HorizontalInfo.length;++t){var e=this.MainFrame.HorizontalInfo[t];this.HorizontalInfo.push(e)}return this.CoordinateType=this.MainFrame.CoordinateType,!0},this.SplitXYCoordinate=function(){0!=this.XYSplit&&(this.IsShareY?this.SyncMainHorizontalInfo():null!=this.YSplitOperator&&this.YSplitOperator.Operator())},this.DrawHorizontal=function(){var t=this.ChartBorder.GetBorder(),e=(t.Left,t.Right),a=t.Bottom,i=this.ChartBorder.GetTopTitle(),r=this.ChartBorder.Right;e+=this.RightOffset;var n=this.GetXHorizontal();we.IsNumber(this.BlankWidth)&&(e+=this.BlankWidth);var o=null;we.IsNonEmptyArray(this.YTextExtend)&&(o=this.YTextExtend[1]);var s=null,l=null;we.IsNonEmptyArray(this.YLineExtend)&&(l=this.YLineExtend[1],s=this.YLineExtend[0]);for(var h=this.GetHorizontalWidth(),u=null,C=this.HorizontalInfo.length-1;C>=0;--C){var c=this.HorizontalInfo[C],f=this.GetYFromData(c.Value);if(!(null!=f&&Math.abs(f-u)<this.MinYDistance)){if(this.Canvas.textBaseline=f>=a-2?"bottom":f<=i+2?"top":"middle",s&&s.Width>0&&(this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),this.Canvas.moveTo(n-s.Width,p(f)),this.Canvas.lineTo(n,p(f)),this.Canvas.stroke()),l&&l.Width>0&&(this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),this.Canvas.moveTo(n+l.Width,p(f)),this.Canvas.lineTo(n,p(f)),this.Canvas.stroke()),null!=c.Message[1]&&r>10){null!=c.Font&&(this.Canvas.font=c.Font);var d=c.Message[1];if(Array.isArray(c.Message[1])&&(d=c.Message[1][0]),o&&o.Align){var D=h;this.Canvas.textAlign="right";var m=t.Right+this.RightOffset+D-this.YTextPadding[1];this.Canvas.fillText(d,m,f)}else{var v=e+2;l&&l.Width>0&&(v+=l.Width),this.Canvas.fillStyle=c.TextColor,this.Canvas.textAlign="left",this.Canvas.fillText(d,v,f)}}u=f}}},this.DrawVertical=function(){var t=this.ChartBorder.GetBorder(),e=t.TopEx,a=t.BottomEx,i=this.GetXHorizontal();this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),this.Canvas.moveTo(p(i),p(e)),this.Canvas.lineTo(p(i),p(a)),this.Canvas.stroke()},this.DrawToolbar=function(t,e,a){if(this.Buttons=[],1!=e&&!this.ChartBorder.IsShowTitleOnly&&!(this.ChartBorder.TitleHeight<5)&&this.IsShowToolbar){var i=[];if(i.push({ID:qn.MODIFY_OVERLAY_INDEX_PARAM,Style:this.ModifyIndexParamButton}),i.push({ID:qn.CLOSE_OVERLAY_INDEX,Style:this.CloseWindowButton}),this.GetEventCallback){var r=this.GetEventCallback(Kn.ON_CUSTOM_OVERLAY_TOOLBAR);if(r&&r.Callback){var n={PreventDefault:!1,DefaultButton:i,AryButton:null,Guid:this.Guid};if(r.Callback(r,n,this),n.PreventDefault)return void this.DrawToolbarButton(n.AryButton,t,a)}}this.DrawToolbarButton(i,t,a)}},this.DrawToolbarButton=function(t,e,a){if(we.IsNonEmptyArray(t))for(var i=this.ChartBorder.GetBorder(),r=i.Top+this.ChartBorder.TitleHeight/2,n=this.GetHorizontalWidth(),o=i.Right+this.RightOffset+n-this.CloseButton.MerginLeft,s=t.length-1;s>=0;--s){var l=t[s],h=l.Style.Size,u=h+"px "+l.Style.Family,C={Left:o-h-l.Style.MerginLeft,Top:r-h/2,Right:o,Bottom:r+h/2,Width:h+l.Style.MerginLeft,Height:h},c=this.CloseButton.Color;e&&e.X>=C.Left&&e.X<C.Right&&e.Y>=C.Top&&e.Y<=C.Bottom&&(c=l.Style.MoveOnColor,a&&(a.MouseOnToolbar={Rect:C,Item:l,Frame:this,Point:{X:e.X,Y:e.Y}})),this.Canvas.fillStyle=c,this.Canvas.font=u,this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillText(l.Style.Text,o,r),this.Buttons.push({ID:l.ID,Rect:C}),o=C.Left}},this.DrawCustomItem=function(t,e){if((this.IsShow||this.IsYDrawMainFrame)&&(t.Message[1]||t.Message[0])){if(t.Value>this.HorizontalMax||t.Value<this.HorizontalMin)return void this.SendDrawCountDownEvent({IsShow:!1});var a=this.GetBorder(),i=a.Left,r=a.Right+this.RightOffset;this.IsYDrawMainFrame&&(r=a.Right);var n=a.Bottom,o=a.Top,s=this.ChartBorder.Right,l=this.ChartBorder.Left;this.ChartBorder.TitleHeight;this.IsHScreen&&(l=this.ChartBorder.Top,s=this.ChartBorder.Bottom,o=a.Top,n=a.Bottom);var h,u=C(),c=18*u,f=c,d=this.GetYFromData(t.Value),D=0;if(t.ExtendData&&t.ExtendData.Custom){var m=t.ExtendData.Custom;we.IsNumber(m.Position)&&(D=m.Position),m.EmptyBGColor&&(h=m.EmptyBGColor)}if(t.Message[0])if(l<10||1==D){null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var v=this.GetCustomItemTextInfo(t,!0,u),T=v.MaxWidth,I=this.GetFontHeight();f=I>c?I:c;var S=t.LineColor,x=this.RGBToStruct(t.LineColor);x&&(S="rgba("+x.R+", "+x.G+", "+x.B+", "+So.FrameLatestPrice.BGAlpha+")");for(var b=d,y=0;y<v.Text.length;++y){var E=v.Text[y];if(this.IsHScreen){var w=o,F=b-f/2-1*u;this.Canvas.fillStyle=S,this.Canvas.fillRect(F,w,f,E.Width),this.DrawHScreenText({X:b,Y:w},{Text:E.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==y&&this.DrawLine(w+E.Width,n,b,t.LineColor,t.LineType,t),b-=f+1*u}else if(1===E.Type);else{var w=b-f/2-1*u,F=i+1*u;this.Canvas.fillStyle=S,this.Canvas.fillRect(F,w,E.Width,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(E.Text,F+1*u,b),0==y&&this.DrawLine(F+E.Width,r,b,t.LineColor,t.LineType,t),b+=f+1*u}}}else{null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle";var v=this.GetCustomItemTextInfo(t,!0,u),T=v.MaxWidth,I=this.GetFontHeight();f=I>c?I:c;for(var b=d,y=0;y<v.Text.length;++y){var E=v.Text[y];if(this.IsHScreen){if(0==y)var w=o-E.Width;else var w=o-T;var F=b-f/2-1*u;this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(F,w,f,E.Width),this.DrawHScreenText({X:b,Y:w},{Text:E.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==y&&this.DrawLine(w+E.Width,n,b,t.LineColor,t.LineType,t),b-=f+1*u}else{var w=b-f/2-1*u;if(0==y)var M=i-E.Width,F=i;else var M=i-T,F=i-(T-E.Width);h?(this.Canvas.fillStyle=h,this.Canvas.fillRect(M-1,w,E.Width+1,f),this.Canvas.strokeStyle=t.LineColor,this.Canvas.strokeRect(p(M-1),p(w),p(E.Width+1),p(f)),this.Canvas.fillStyle=t.LineColor,this.Canvas.fillText(E.Text,F-1*u,b)):(this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(M,w,E.Width,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(E.Text,F-1*u,b)),0==y&&this.DrawLine(i,r,b,t.LineColor,t.LineType,t),b+=f+1*u}}}else if(t.Message[1])if(s<10||1==D){null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var v=this.GetCustomItemTextInfo(t,!1,u),T=v.MaxWidth,I=this.GetFontHeight();f=I>c?I:c;var S=t.LineColor,x=this.RGBToStruct(t.LineColor);x&&(S="rgba("+x.R+", "+x.G+", "+x.B+", "+So.FrameLatestPrice.BGAlpha+")");for(var b=d,y=0;y<v.Text.length;++y){var E=v.Text[y];if(this.IsHScreen){var w=n-E.Width,F=b-f/2-1*u;this.Canvas.fillStyle=S,this.Canvas.fillRect(F,w,f,T),this.DrawHScreenText({X:b,Y:w},{Text:E.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==y&&this.DrawLine(o,w,b,t.LineColor,t.LineType,t),b-=f+1*u}else if(1===E.Type){if(this.GetEventCallback){var w=b-f/2-1*u,L={Top:w,Right:r,Height:null,IsShow:!0,BGColor:t.LineColor,TextColor:t.TextColor,PixelTatio:u,Position:"Right",IsInside:!0};this.SendDrawCountDownEvent(L)&&we.IsPlusNumber(L.Height)&&(b+=f+1*u)}}else{var w=b-f/2-1*u,F=r-E.Width;this.Canvas.fillStyle=S,this.Canvas.fillRect(F,w,T,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(E.Text,F+1*u,b),0==y&&this.DrawLine(i,F,b,t.LineColor,t.LineType,t),b+=f+1*u}}if((3==t.Type||4==t.Type)&&t.Title){var N=this.Canvas.measureText(t.Title).width+2*u;if(this.IsHScreen){var w=n-E.Width-N,F=d-f/2-1*u;this.Canvas.fillStyle=S,this.Canvas.fillRect(F,w,f,N),this.DrawHScreenText({X:d,Y:w},{Text:t.Title,Color:t.TextColor,XOffset:1*u,YOffset:2*u})}else{var w=d-f/2-1*u,F=r-T-N-1*u;this.Canvas.fillStyle=S,this.Canvas.fillRect(F,w,N,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(t.Title,F+1*u,d)}}}else{null!=t.Font&&(this.Canvas.font=t.Font),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var v=this.GetCustomItemTextInfo(t,!1,u),T=v.MaxWidth,I=this.GetFontHeight();f=I>c?I:c;var R=null;e&&e.has(3)&&(R=e.get(3));for(var b=d,A={},y=0;y<v.Text.length;++y){var E=v.Text[y];if(this.IsHScreen){var w=n,F=b-f/2-1*u;this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(F,w,f,E.Width),this.DrawHScreenText({X:b,Y:w},{Text:E.Text,Color:t.TextColor,XOffset:1*u,YOffset:2*u}),0==y&&this.DrawLine(o,w,b,t.LineColor,t.LineType,t),b-=f+1*u}else if(1===E.Type){if(this.GetEventCallback){var w=b-f/2-1*u,L={Top:w,Left:r,Right:this.ChartBorder.GetChartWidth(),Height:null,IsShow:!0,BGColor:t.LineColor,TextColor:t.TextColor,PixelTatio:u,Position:"Right",IsInside:!1};this.SendDrawCountDownEvent(L)&&we.IsPlusNumber(L.Height)&&(b+=f+1*u)}}else{var w=b-f/2-1*u;if(0==y){var F=r;A.Left=F,R&&w<R.Rect.Bottom&&(b=R.Rect.Bottom,w=b-f/2-1*u)}else var F=r+T-E.Width;h?(this.Canvas.fillStyle=h,this.Canvas.fillRect(F,w,E.Width+1,f),this.Canvas.strokeStyle=t.LineColor,this.Canvas.strokeRect(p(F),p(w),g(E.Width+1),g(f)),this.Canvas.fillStyle=t.LineColor,this.Canvas.fillText(E.Text,F+2*u,b)):(this.Canvas.fillStyle=t.LineColor,this.Canvas.fillRect(F,w,E.Width,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(E.Text,F+1*u,b)),0==y&&this.DrawLine(i,r,d,t.LineColor,t.LineType,t),b+=f+1*u,A.Bottom=b}}if(e&&we.IsNumber(A.Left)&&we.IsNumber(A.Bottom)&&e.set(3,{Rect:A,Item:t}),(3==t.Type||4==t.Type)&&t.Title){var S=t.LineColor,x=this.RGBToStruct(t.LineColor);x&&(S="rgba("+x.R+", "+x.G+", "+x.B+", "+So.FrameLatestPrice.BGAlpha+")");var N=this.Canvas.measureText(t.Title).width+2*u;if(this.IsHScreen){var w=n-N,F=d-f/2-1*u;this.Canvas.fillStyle=S,this.Canvas.fillRect(F,w,f,N),this.DrawHScreenText({X:d,Y:w},{Text:t.Title,Color:t.TextColor,XOffset:1*u,YOffset:2*u})}else{var w=d-f/2-1*u,F=r-N-1*u;this.Canvas.fillStyle=S,this.Canvas.fillRect(F,w,N,f),this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(t.Title,F+1*u,d)}}}}}}function k(){this.newMethod=_,this.newMethod(),delete this.newMethod,this.ClassName="KLineHScreenFrame",this.IsHScreen=!0,this.DrawSelectedBorder=null,this.DrawTitleBG=function(){if(!(this.ChartBorder.TitleHeight<=0)){var t=this.ChartBorder.GetHScreenBorder(),e=p(t.RightTitle),a=p(t.Top),i=p(t.Bottom),r=this.ChartBorder.TitleHeight,n=i-a;this.Canvas.fillStyle=this.TitleBGColor,this.Canvas.fillRect(e,a,r,n)}},this.DrawToolbar=function(){},this.GetYFromData=function(t,e){var a=this.ChartBorder.GetHScreenBorder();if(!1===e){var i=(a.RightEx-a.LeftEx)*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return a.LeftEx+i}if(t<=this.HorizontalMin)return a.LeftEx;if(t>=this.HorizontalMax)return a.RightEx;var i=(a.RightEx-a.LeftEx)*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return a.LeftEx+i},this.DrawHorizontal=function(){for(var t=this.ChartBorder.GetHScreenBorder(),e=t.Top,a=t.Bottom,i=this.ChartBorder.Top,r=this.ChartBorder.Bottom,n=t.Left,o=(t.Right,null),s=C(),l=i>10*s&&!0===this.IsShowYText[0]&&2!=this.YTextPosition[0],h=r>10*s&&!0===this.IsShowYText[1]&&2!=this.YTextPosition[1],u=this.HorizontalInfo.length-1;u>=0;--u){var c=this.HorizontalInfo[u],f=this.GetYFromData(c.Value);if(!(null!=f&&Math.abs(f-o)<this.MinYDistance)){if(f!=n&&(2==c.LineType?(this.Canvas.strokeStyle=c.LineColor,this.Canvas.setLineDash([5*s,5*s]),this.Canvas.beginPath(),this.Canvas.moveTo(p(f),e),this.Canvas.lineTo(p(f),a),this.Canvas.stroke(),this.Canvas.setLineDash([])):c.LineType>0&&(this.Canvas.strokeStyle=c.LineColor,So.FrameYLineDash?(this.Canvas.setLineDash(So.FrameYLineDash),this.Canvas.beginPath(),this.Canvas.moveTo(p(f),e),this.Canvas.lineTo(p(f),a),this.Canvas.stroke(),this.Canvas.setLineDash([])):(this.Canvas.beginPath(),this.Canvas.moveTo(p(f),e),this.Canvas.lineTo(p(f),a),this.Canvas.stroke()))),null!=c.Message[0]&&l){null!=c.Font&&(this.Canvas.font=c.Font),this.Canvas.fillStyle=c.TextColor,this.Canvas.textAlign="right",this.Canvas.textBaseline="middle";var d=f,D=e;this.Canvas.save(),this.Canvas.translate(d,D),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(c.Message[0],-2,0),this.Canvas.restore()}if(null!=c.Message[1]&&h){null!=c.Font&&(this.Canvas.font=c.Font),this.Canvas.fillStyle=c.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var m;m=Array.isArray(c.Message[1])?c.Message[1][0]:c.Message[1];var d=f,D=a;this.Canvas.save(),this.Canvas.translate(d,D),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(m,2,0),this.Canvas.restore()}o=f}}},this.DrawInsideHorizontal=function(){if(!this.IsMinSize&&(!1!==this.IsShowYText[0]||!1!==this.IsShowYText[1])){var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRightEx(),a=this.ChartBorder.GetTop(),i=this.ChartBorder.GetBottom(),r=this.ChartBorder.Top,n=this.ChartBorder.Bottom,o=(this.ChartBorder.TitleHeight,C()),s=(r<10*o||2==this.YTextPosition[0])&&!0===this.IsShowYText[0],l=(n<10*o||2==this.YTextPosition[1])&&!0===this.IsShowYText[1];if(s||l)for(var o=C(),h=null,u=this.HorizontalInfo.length-1;u>=0;--u){var c=this.HorizontalInfo[u],f=this.GetYFromData(c.Value);if(!(null!=f&&null!=h&&Math.abs(f-h)<this.MinYDistance)){if(null!=c.Message[0]&&s){null!=c.Font&&(this.Canvas.font=c.Font),this.Canvas.fillStyle=c.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline=f>=e-2?"top":f<=t+2?"bottom":"middle";var d=(this.Canvas.textBaseline,this.Canvas.textAlign,this.Canvas.font,c.Message[0],f),D=a;this.Canvas.save(),this.Canvas.translate(d,D),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(c.Message[0],-2,0),this.Canvas.restore()}if(null!=c.Message[1]&&l){if(null!=c.Font&&(this.Canvas.font=c.Font),this.Canvas.fillStyle=c.TextColor,this.Canvas.textAlign="right",this.Canvas.textBaseline=f>=e-2?"top":f<=t+2?"bottom":"middle",Array.isArray(c.Message[1]))var m=c.Message[1][0];else var m=c.Message[1];var p=this.Canvas.measureText(m).width,d=(this.Canvas.textBaseline,this.Canvas.textAlign,this.Canvas.font,f),D=i;this.Canvas.save(),this.Canvas.translate(d,D),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(m,-2,0),this.Canvas.restore()}h=f}}}},this.GetXFromIndex=function(t,e){if(!1===e){var a=this.ChartBorder.GetHScreenBorder();if(t>=0)for(var i=a.TopEx+So.FrameLeftMargin+this.DistanceWidth/2+this.DataWidth/2,r=1;r<=t;++r)i+=this.DistanceWidth+this.DataWidth;else for(var i=a.TopEx-(this.DistanceWidth/2+this.DataWidth+this.DistanceWidth),n=Math.abs(t),r=1;r<n;++r)i-=this.DistanceWidth+this.DataWidth}else{t<0&&(t=0),t>this.xPointCount-1&&(t=this.xPointCount-1);for(var a=this.ChartBorder.GetHScreenBorder(),i=a.TopEx+So.FrameLeftMargin+this.DistanceWidth/2+this.DataWidth/2,r=1;r<=t;++r)i+=this.DistanceWidth+this.DataWidth}return i},this.DrawVertical=function(){var t=null;this.GetVerticalXCache&&(t=this.GetVerticalXCache());for(var e=this.ChartBorder.GetHScreenBorder(),a=e.Left,i=e.RightTitle,r=e.Bottom,n=C(),o=null,s=0;s<this.VerticalInfo.length;++s){var l=this.VerticalInfo[s],h=null;if((h=t&&t.has(l.Value)?t.get(l.Value):this.GetXFromIndex(l.Value))>=r)break;if(!(null!=o&&Math.abs(h-o)<80)){if(2==l.LineType?(this.Canvas.strokeStyle=this.VerticalInfo[s].LineColor,this.Canvas.setLineDash([5*n,5*n]),this.Canvas.beginPath(),this.Canvas.moveTo(a,p(h)),this.Canvas.lineTo(i,p(h)),this.Canvas.stroke(),this.Canvas.setLineDash([])):l.LineType>0&&(this.Canvas.strokeStyle=this.VerticalInfo[s].LineColor,So.FrameXLineDash?(this.Canvas.setLineDash(So.FrameXLineDash),this.Canvas.beginPath(),this.Canvas.moveTo(a,p(h)),this.Canvas.lineTo(i,p(h)),this.Canvas.stroke(),this.Canvas.setLineDash([])):(this.Canvas.beginPath(),this.Canvas.moveTo(a,p(h)),this.Canvas.lineTo(i,p(h)),this.Canvas.stroke())),null!=this.VerticalInfo[s].Message[0]){null!=this.VerticalInfo[s].Font&&(this.Canvas.font=this.VerticalInfo[s].Font),this.Canvas.fillStyle=this.VerticalInfo[s].TextColor;h<this.Canvas.measureText(this.VerticalInfo[s].Message[0]).width/2?(this.Canvas.textAlign="left",this.Canvas.textBaseline="top"):(this.Canvas.textAlign="center",this.Canvas.textBaseline="top");var u=a,c=h;this.Canvas.save(),this.Canvas.translate(u,c),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.VerticalInfo[s].Message[0],0,this.XBottomOffset),this.Canvas.restore()}o=h}}},this.GetYData=function(t,e){var a=this.ChartBorder.GetHScreenBorder();if(!1===e){var i=a.RightEx-a.LeftEx;return(t-a.LeftEx)/i*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin}if(t<a.LeftEx)return this.HorizontalMin;if(t>a.RightEx)return this.HorizontalMax;var i=a.RightEx-a.LeftEx;return(t-a.LeftEx)/i*(this.HorizontalMax-this.HorizontalMin)+this.HorizontalMin},this.GetXData=function(t,e){var a=this.ChartBorder.GetHScreenBorder(),i=a.TopEx+So.FrameLeftMargin,r=a.BottomEx,n=this.DistanceWidth,o=this.DataWidth;if(0==e){if(t<i){for(var s=-1,l=i-(n/2+o+n);s>-1e5&&!(l<=t);)l-=o+n,--s;return s}for(var s=0,l=i+n/2+o+n;s<1e5&&!(l>=t);)l+=o+n,++s;return s}if(t<=a.TopEx)return 0;if(t>=a.BottomEx)return this.XPointCount-1;for(var s=0,l=i+n/2+o+n;l<r&&s<1e5&&s+1<this.XPointCount&&!(l>t);)l+=o+n,++s;return s},this.DrawBottons=function(){}}function V(){this.newMethod=k,this.newMethod(),delete this.newMethod,this.ClassName="OverlayKLineHScreenFrame",this.MainFrame=null,this.IsShareY=!1,this.IsCalculateYMaxMin=!0,this.RightOffset=50,this.PenBorder=So.OverlayFrame.BolderPen,this.IsShow=!0,this.Title=null,this.TitleColor=So.OverlayFrame.TitleColor,this.TitleFont=So.OverlayFrame.TitleFont,this.Draw=function(){this.SplitXYCoordinate(),this.IsShow&&(this.DrawVertical(),this.DrawHorizontal(),this.DrawTitle()),this.SizeChange=!1,this.XYSplit=!1,this.XSplit=!1,this.YCustomSplit=!1},this.DrawTitle=function(){},this.SplitXYCoordinate=function(){if(0!=this.XYSplit)if(this.IsShareY){this.HorizontalMax=this.MainFrame.HorizontalMax,this.HorizontalMin=this.MainFrame.HorizontalMin,this.HorizontalInfo=[];for(var t in this.MainFrame.HorizontalInfo){var e=this.MainFrame.HorizontalInfo[t];this.HorizontalInfo.push(e)}}else null!=this.YSplitOperator&&this.YSplitOperator.Operator()},this.DrawHorizontal=function(){},this.DrawVertical=function(){},this.GetScaleTextWidth=function(){return{TextWidth:0}}}function H(){this.Frame,this.Height,this.OverlayIndex=[]}function Y(){this.Frame,this.ChartPaint=[],this.Identify=D(),this.Scprit,this.UpdateFrameMaxMin=function(){var t={Max:null,Min:null};if(this.Frame.IsShareY)return void(this.Frame.XYSplit=!0);if(this.Frame.YSpecificMaxMin)t.Max=this.Frame.YSpecificMaxMin.Max,t.Min=this.Frame.YSpecificMaxMin.Min;else for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];if(0!=a.IsShow){var i=a.GetMaxMin();null!=i&&null!=i.Max&&null!=i.Min&&(we.IsNumber(i.Max)&&(null==t.Max||t.Max<i.Max)&&(t.Max=i.Max),we.IsNumber(i.Min)&&(null==t.Min||t.Min>i.Min)&&(t.Min=i.Min))}}if(we.IsNumber(this.Frame.YMaxMin.Max)&&this.Frame.YMaxMin.Max==t.Max||(this.Frame.YMaxMin.Max=t.Max,this.Frame.XYSplit=!0),we.IsNumber(this.Frame.YMaxMin.Min)&&this.Frame.YMaxMin.Min==t.Min||(this.Frame.YMaxMin.Min=t.Min,this.Frame.XYSplit=!0),this.Frame.XYSplit){var r=10,n=0;null!=t.Max&&(r=t.Max),null!=t.Min&&(n=t.Min),this.Frame.HorizontalMax=r,this.Frame.HorizontalMin=n}else this.Frame.XYSplit=!0}}function X(){this.SubFrame=new Array,this.SizeChange=!0,this.ChartBorder,this.Canvas,this.ScreenImageData,this.Data,this.Position,this.SizeChange=!0,this.MinSubFrameHeight=So.DragSubFrameBorder.MinFrameHeight,this.DragBorderHeight=So.DragSubFrameBorder.TopBorderHeight,this.AutoLeftBorder=null,this.AutoRightBorder=null,this.OverlayBlankWidth=30,this.AuotRightWidth,this.FixedRightWidth={Main:60,Overlay:80},this.ZoomWindowsInfo=null,this.ZoomStartWindowIndex=1,this.GetExtendChartByClassName,this.GetEventCallback,this.OnMoveFromeBorder=function(t,e){if(this.SubFrame.length<=0)return!1;for(var a=this.SubFrame[t],i=null,r=t+1;r<this.SubFrame.length;++r){var n=this.SubFrame[r];if(n.Height>0){i=n;break}}if(!a||!i)return!1;var o=a.Frame.ChartBorder.Bottom,s=i.Frame.ChartBorder.Top;a.Frame.ChartBorder.Bottom-=e,i.Frame.ChartBorder.Top+=e;var l=a.Frame.ChartBorder.GetHeightEx(),h=i.Frame.ChartBorder.GetHeightEx();return!(l<this.MinSubFrameHeight&&e<0||h<this.MinSubFrameHeight&&e>0)||(a.Frame.ChartBorder.Bottom=o,i.Frame.ChartBorder.Top=s,!1)},this.ReDrawToolbar=function(){for(var t in this.SubFrame)this.SubFrame[t].Frame.ReDrawToolbar=!0},this.SetFrameBorderSizeChange=function(){var t=this.SubFrame[0];if(t&&t.Frame){var e=t.Frame.YSplitOperator;e&&2==e.CoordinateType&&(t.Frame.XYSplit=!0)}},this.CancelZoomUpDownFrameY=function(t){var e=t.Index;if(this.SubFrame.length<=0)return!1;if(!this.SubFrame[e])return!1;var a=this.SubFrame[e],i=a.Frame;if(t.IsOverlay){var r=a.OverlayIndex[t.OverlayIndex];if(!r)return!1;r.Frame.IsShareY||(i=r.Frame)}var n=i.YSplitOperator;if(n.FixedYMaxMin){n.FixedYMaxMin=null,n.EnableZoomUpDown=!1,i.XYSplit=!0;for(var o in a.OverlayIndex){var s=a.OverlayIndex[o];s.Frame.IsShareY&&(s.Frame.XYSplit=!0)}return Xn.Chart.Log("[HQTradeFrame::CancelZoomUpDownFrameY]"),!0}return!1},this.OnZoomUpDownFrameY=function(t,e){var a=t.Index;if(this.SubFrame.length<=0)return!1;if(!this.SubFrame[a])return!1;var i=this.SubFrame[a],r=i.Frame;if(t.IsOverlay){var n=i.OverlayIndex[t.OverlayIndex];if(!n)return!1;n.Frame.IsShareY||(r=n.Frame)}var o=r.ChartBorder.GetTopEx(),s=r.ChartBorder.GetBottomEx(),l=r.HorizontalMax,h=r.HorizontalMin,u=(l-h)*Math.abs(e)/(s-o),C=r.YSplitOperator,c={Max:l,Min:h};if(1==t.Position){var f=e>0?-u:u;c.Max+=f}else if(2==t.Position){var f=e>0?-u:u;c.Min+=f}else{if(0!=t.Position)return!1;var f=e>0?u:-u;c.Max+=f,c.Min-=f}if(c.Max>c.Min){C.FixedYMaxMin=c,C.EnableZoomUpDown=!0,r.XYSplit=!0;for(var d=0;d<i.OverlayIndex.length;++d){var D=i.OverlayIndex[d];D.Frame.IsShareY&&(D.Frame.XYSplit=!0)}return Xn.Chart.Log("[HQTradeFrame::OnZoomUpDownFrameY] Max="+c.Max+", Min="+c.Min),!0}return!1},this.OnUpDonwFrameY=function(t,e){var a=t.Index;if(this.SubFrame.length<=0)return!1;if(!this.SubFrame[a])return!1;var i=this.SubFrame[a],r=i.Frame,n=r.ChartBorder.GetTopEx(),o=r.ChartBorder.GetBottomEx(),s=r.YSplitOperator;if(!s)return!1;var l=r.HorizontalMax,h=r.HorizontalMin,u=(l-h)*Math.abs(e)/(o-n),C=e>0?-u:u,c={Max:l,Min:h};c.Max-=C,c.Min-=C,s.FixedYMaxMin=c,s.EnableZoomUpDown=!0,r.XYSplit=!0;for(var f in i.OverlayIndex){var d=i.OverlayIndex[f];d.Frame.IsShareY&&(d.Frame.XYSplit=!0)}return Xn.Chart.Log("[HQTradeFrame::OnUpDonwFrameY] Max="+c.Max+", Min="+c.Min+", yMove="+e+", moveStep="+u),!0},this.ClearUpDonwFrameYData=function(t){if(!(this.SubFrame.length<=0))if(t){var e=t.Index;if(e<0||e>=this.SubFrame.length)return;var a=this.SubFrame[e];if(!a||!a.Frame||!a.Frame.YSplitOperator)return;var i=a.Frame.YSplitOperator;1==i.EnableZoomUpDown&&(i.FixedYMaxMin=null)}else for(var r=0;r<this.SubFrame.length;++r){var a=this.SubFrame[r];if(a&&a.Frame&&a.Frame.YSplitOperator){var i=a.Frame.YSplitOperator;1==i.EnableZoomUpDown&&(i.FixedYMaxMin=null)}}},this.ClearCoordinateText=function(t){for(var e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];a.Frame&&a.Frame.ClearCoordinateText(t)}},this.RestoreIndexWindows=function(){if(!this.ZoomWindowsInfo)return!1;for(var t=(this.SubFrame[this.ZoomWindowsInfo.FrameID],this.ZoomStartWindowIndex);t<this.ZoomWindowsInfo.Data.length;++t){var e=this.ZoomWindowsInfo.Data[t],a=this.SubFrame[t];a.Height=e.Height,a.Frame.IsMinSize=!1,a.Frame.ReDrawToolbar=!0,a.Frame.XSplitOperator.ShowText=e.ShowXText,a.Frame.XYSplit=!0;for(var i=0;i<a.OverlayIndex.length;++i){a.OverlayIndex[i].Frame.IsMinSize=!1}}return this.ZoomWindowsInfo=null,!0},this.ZoomIndexWindow=function(t,e){var a=this.SubFrame[t];if(!a)return!1;if(a.Frame.ChartBorder.IsShowTitleOnly=!1,this.ZoomWindowsInfo)return this.RestoreIndexWindows();for(var i={FrameID:t,Data:[]},r=0;r<this.SubFrame.length;++r){var n=this.SubFrame[r];i.Data[r]={Height:n.Height,ShowXText:n.Frame.XSplitOperator.ShowText}}this.ZoomWindowsInfo=i;for(var o=0,r=this.ZoomStartWindowIndex;r<this.SubFrame.length;++r){var n=this.SubFrame[r],s=n.Frame;if(s.XYSplit=!0,o+=n.Height,r!=t){n.Height=0,s.IsMinSize=!0,s.HideToolbar(),s.XSplitOperator.ShowText=!1;for(var l=0;l<n.OverlayIndex.length;++l){n.OverlayIndex[l].Frame.IsMinSize=!0}}}return a.Height=o,a.Frame.XSplitOperator.ShowText=!0,!0},this.SaveSubFrameHeightRate=function(){for(var t=this.ChartBorder.GetHeight(),e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e],i=a.Frame.ChartBorder.GetHeight(),r=i/t*100;a.Height=r}},this.ShowIndexTitleOnly=function(t,e){var a=this.SubFrame[t];if(!a&&!a.Frame)return!1;var i=a.Frame;if(!i.ChartBorder)return!1;var r=i.ChartBorder;return!(r.TitleHeight<10)&&(this.RestoreIndexWindows(),r.IsShowTitleOnly?r.IsShowTitleOnly=!1:r.IsShowTitleOnly=!0,!0)},this.CalculateChartBorder=function(){if(!(this.SubFrame.length<=0)){for(var t=this.ChartBorder.GetTop(),e=this.ChartBorder.GetHeight(),a=0,i=0,r=0;r<this.SubFrame.length;++r){var n=this.SubFrame[r],o=n.Frame;o&&o.ChartBorder&&o.ChartBorder.IsShowTitleOnly&&n.Height>0?i+=o.ChartBorder.TitleHeight:a+=n.Height}e-=i;for(var r=0;r<this.SubFrame.length;++r){var n=this.SubFrame[r],o=n.Frame;if(n.Frame.ChartBorder.Top=t,n.Frame.ChartBorder.Left=this.ChartBorder.Left,n.Frame.ChartBorder.Right=this.ChartBorder.Right,n.Frame.ChartBorder.LeftExtendWidth=this.ChartBorder.LeftExtendWidth,n.Frame.ChartBorder.RightExtendWidth=this.ChartBorder.RightExtendWidth,o&&o.ChartBorder&&o.ChartBorder.IsShowTitleOnly&&n.Height>0){var s=n.Frame.ChartBorder.Top+o.ChartBorder.TitleHeight;n.Frame.ChartBorder.Bottom=this.ChartBorder.GetChartHeight()-s,t=s}else{var s=e*(n.Height/a)+t;n.Frame.ChartBorder.Bottom=this.ChartBorder.GetChartHeight()-s,t=s}}if(this.GetEventCallback){var l=this.GetEventCallback(Kn.ON_SIZE_FRAME);if(l&&l.Callback){var h={SubFrame:this.SubFrame};l.Callback(l,h,this)}}}},this.SetExtendWidth=function(t){if(t){var e=null,a=null;we.IsNumber(t.Left)&&(e=t.Left,this.ChartBorder.LeftExtendWidth=e),we.IsNumber(t.Right)&&(a=t.Right,this.ChartBorder.RightExtendWidth=a);for(var i in this.SubFrame){var r=this.SubFrame[i];null!=e&&(r.Frame.ChartBorder.LeftExtendWidth=e),null!=a&&(r.Frame.ChartBorder.RightExtendWidth=a)}}},this.CalculateChartBorder2=function(){if(!(this.SubFrame.length<=0)){var t=this.ChartBorder.Top,e=this.ChartBorder.Bottom,a=this.ChartBorder.GetHeight(),i=0;for(var r in this.SubFrame){var n=this.SubFrame[r];i+=n.Height}var o=0;for(var r in this.SubFrame){var n=this.SubFrame[r];n.Frame.ChartBorder.Top=t,n.Frame.ChartBorder.Left=this.ChartBorder.Left,n.Frame.ChartBorder.Right=this.ChartBorder.Right,n.Frame.ChartBorder.X=this.ChartBorder.X,n.Frame.ChartBorder.Y=this.ChartBorder.Y,n.Frame.ChartBorder.Width=this.ChartBorder.Width,n.Frame.ChartBorder.Height=this.ChartBorder.Height;var s=a*(n.Height/i);o+=s,e=this.ChartBorder.Bottom+(a-o),n.Frame.ChartBorder.Bottom=e,t+=s}}},this.GetScaleTextWidth=function(){for(var t={Left:null,Right:null,OverlayRight:0},e=[],a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a];if(!(i.Height<=0)){var r=i.Frame;if(r&&r.XSplitOperator){r.HorizontalMax,r.HorizontalMin;r.YSplitOperator.Operator();var n=r.GetScaleTextWidth();if(n&&n.TextWidth){var o=n.TextWidth;we.IsNumber(o.Left)&&(null==t.Left||t.Left<o.Left)&&(t.Left=o.Left),we.IsNumber(o.Right)&&(null==t.Right||t.Right<o.Right)&&(t.Right=o.Right)}if(we.IsNonEmptyArray(i.OverlayIndex))for(var s=0,l=0;s<i.OverlayIndex.length;++s){var h=i.OverlayIndex[s];if(h.Frame){if(h.Frame.IsShareY){h.Frame.SyncMainHorizontalInfo&&h.Frame.SyncMainHorizontalInfo();var n=h.Frame.GetScaleTextWidth()}else{h.Frame.HorizontalMax,h.Frame.HorizontalMin;h.Frame.YSplitOperator.Operator();var n=h.Frame.GetScaleTextWidth()}if(h.RightWidth={Index:-1,Width:0},n&&n.TextWidth){var o=n.TextWidth;we.IsNumber(o.Right)&&(h.RightWidth.Index=l,h.RightWidth.Width=o.Right,e[l]?e[l][a]=h.RightWidth:(e[l]=[],e[l][a]=h.RightWidth),++l)}}}}}}for(var u=[],a=0;a<e.length;++a){for(var C=e[a],c=0,s=0;s<C.length;++s)if(C[s]){var i=C[s].Width;c<i&&(c=i)}c>0&&(c+=this.OverlayBlankWidth);for(var s=0;s<C.length;++s)C[s]&&(C[s].Width=c);u[a]=c}for(var a=0;a<u.length;++a){var n=u[a];we.IsNumber(n)&&(t.OverlayRight+=n)}return t.AryOverlayWidth=u,t},this.IsFrameXYSplit=function(){for(var t in this.SubFrame){var e=this.SubFrame[t];if(e.Frame.XYSplit)return!0;for(var a=0;a<e.OverlayIndex.length;++a){if(e.OverlayIndex[a].Frame.XYSplit)return!0}}return!1},this.Draw=function(t){!0===this.SizeChange&&this.CalculateChartBorder();var e=!1;if(t&&!0===t.IsEnableSplash&&(e=!0),0==e&&(this.AutoLeftBorder||this.AutoRightBorder)&&this.IsFrameXYSplit()){this.AutoRightOverlayWidth=[];var a=this.GetScaleTextWidth();if(we.IsNumber(a.Left)&&this.AutoLeftBorder){var i=0;we.IsNumber(this.AutoLeftBorder.Blank)&&(i=this.AutoLeftBorder.Blank);var r=a.Left+i;we.IsNumber(this.AutoLeftBorder.MinWidth)&&this.AutoLeftBorder.MinWidth>r&&(r=this.AutoLeftBorder.MinWidth),this.IsHScreen?this.ChartBorder.Top=r:this.ChartBorder.Left=r;for(var n=0;n<this.SubFrame.length;++n){var o=this.SubFrame[n];this.IsHScreen?o.Frame.ChartBorder.Top=r:o.Frame.ChartBorder.Left=r}}if(we.IsNumber(a.Right))if(this.AutoRightBorder){var s={},i=0;we.IsNumber(this.AutoRightBorder.Blank)&&(i=this.AutoRightBorder.Blank);var r=a.Right+i;if(we.IsNumber(this.AutoRightBorder.MinWidth)&&this.AutoRightBorder.MinWidth>r&&(r=this.AutoRightBorder.MinWidth),this.AuotRightWidth=r,s.MainTextWidth=r,we.IsNonEmptyArray(a.AryOverlayWidth)&&(s.AryOverlayWidth=a.AryOverlayWidth),we.IsPlusNumber(a.OverlayRight)&&(this.AuotRightWidth=r,r+=a.OverlayRight),this.GetExtendChartRightWidth){var l=this.GetExtendChartRightWidth();if(this.GetExtendChartByClassName){var h=this.GetExtendChartByClassName("StockChip");h&&h.Chart&&(h.Chart.Left=r)}r+=l}this.IsHScreen?(this.ChartBorder.Bottom!=r&&!0,this.ChartBorder.Bottom=r):(this.ChartBorder.Right!=r&&!0,this.ChartBorder.Right=r);for(var n=0;n<this.SubFrame.length;++n){var o=this.SubFrame[n];this.IsHScreen?o.Frame.ChartBorder.Bottom=r:o.Frame.ChartBorder.Right=r,o.Frame.ReDrawToolbar=!0,o.Frame.YRightTextInfo=s;for(var u=0;u<o.OverlayIndex.length;++u){var C=o.OverlayIndex[u];C.Frame.YRightTextInfo=s}}}else{var s={};if(s.MainTextWidth=this.FixedRightWidth.Main,0==a.OverlayRight)this.IsHScreen?s.MainTextWidth=this.ChartBorder.Bottom:s.MainTextWidth=this.ChartBorder.Right;else if(we.IsNonEmptyArray(a.AryOverlayWidth)){for(var n=0;n<a.AryOverlayWidth.length;++n)a.AryOverlayWidth[n]=this.FixedRightWidth.Overlay;s.AryOverlayWidth=a.AryOverlayWidth}for(var n=0;n<this.SubFrame.length;++n){var o=this.SubFrame[n];o.Frame.ReDrawToolbar=!0,o.Frame.YRightTextInfo=s;for(var u=0;u<o.OverlayIndex.length;++u){var C=o.OverlayIndex[u];C.Frame.YRightTextInfo=s}}}this.SetSizeChage(!0)}for(var n=0;n<this.SubFrame.length;++n){var o=this.SubFrame[n];if(!(o.Height<=0))if(o.Frame.Draw(),this.AutoRightBorder)for(var c=this.AuotRightWidth,u=0,f=0;u<o.OverlayIndex.length;++u){var C=o.OverlayIndex[u];C.Frame.DataWidth=o.Frame.DataWidth,C.Frame.DistanceWidth=o.Frame.DistanceWidth,C.Frame.XPointCount=o.Frame.XPointCount,C.Frame.RightOffset=c,C.Frame.BlankWidth=0,C.Frame.TextWidthIndex=f,we.IsNumber(this.OverlayBlankWidth)&&(C.Frame.BlankWidth=this.OverlayBlankWidth),C.Frame.Draw(),C.RightWidth&&(c+=C.RightWidth.Width),C.Frame.IsShow&&++f}else{var c=this.FixedRightWidth.Main;o.Frame.RightTextMaxWidth>c&&(c=o.Frame.RightTextMaxWidth);for(var u=0,f=0;u<o.OverlayIndex.length;++u){var C=o.OverlayIndex[u];C.Frame.DataWidth=o.Frame.DataWidth,C.Frame.DistanceWidth=o.Frame.DistanceWidth,C.Frame.XPointCount=o.Frame.XPointCount,C.Frame.RightOffset=c,C.Frame.BlankWidth=0,C.Frame.TextWidthIndex=f,we.IsNumber(this.OverlayBlankWidth)&&(C.Frame.BlankWidth=this.OverlayBlankWidth),C.Frame.Draw(),C.Frame.IsShow&&(c+=this.FixedRightWidth.Overlay,++f)}}}this.SizeChange=!1},this.DrawOveraly=function(t){for(var e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];if(!(a.Height<=0))for(var i=0;i<a.OverlayIndex.length;++i)for(var r=a.OverlayIndex[i],n=0;n<r.ChartPaint.length;++n){var o=r.ChartPaint[n];o.IsShow&&(t?o.IsDrawFirst&&o.Draw():o.IsDrawFirst||o.Draw())}}},this.DrawOveralySelectedStatus=function(t){if(t.MoveOn.Identify||t.Selected.Identify)for(var e in this.SubFrame){var a=this.SubFrame[e];for(var i in a.OverlayIndex){var r=a.OverlayIndex[i];for(var n in r.ChartPaint){var o=r.ChartPaint[n];o.IsShow&&(o.Identify&&(o.Identify!=t.MoveOn.Identify&&o.Identify!=t.Selected.Identify||o.DrawSelectedStatus&&o.DrawSelectedStatus()))}}}},this.PtInOveralyChart=function(t,e){var a=null;for(var i in this.SubFrame){var r=this.SubFrame[i];for(var n in r.OverlayIndex){var o=r.OverlayIndex[n];for(var s in o.ChartPaint){var l=o.ChartPaint[s];if(l.IsShow&&(!l.IsHideScriptIndex()&&l.PtInChart&&(a=l.PtInChart(t,e))))return a}}}return null},this.DrawPictureCoordinate=function(t,e){if(!t||!t.Frame)return!1;if(!we.IsNonEmptyArray(t.Point))return!1;if(!t.GetXYCoordinate)return!1;var a=t.GetXYCoordinate();a&&!1===a.IsShowYCoordinate||t.Frame.DrawPictureYCoordinate(t,a,e);for(var i=0;i<this.SubFrame.length;++i){var r=this.SubFrame[i];if(r&&r.Frame&&r.Frame.XSplitOperator.ShowText){r.Frame.DrawPictureXCoordinate(t,a,e);break}}return!0},this.DrawLock=function(){for(var t in this.SubFrame){this.SubFrame[t].Frame.DrawLock()}},this.DrawLogo=function(){for(var t=0;t<this.SubFrame.length;++t){var e=this.SubFrame[t];if(e.Frame.DrawLogo){e.Frame.DrawLogo();break}}},this.CalculateLock=function(){for(var t in this.SubFrame){this.SubFrame[t].Frame.CalculateLock()}},this.DrawInsideHorizontal=function(){for(var t in this.SubFrame){var e=this.SubFrame[t];e.Height<=0||e.Frame.DrawInsideHorizontal&&e.Frame.DrawInsideHorizontal()}},this.DrawCustomHorizontal=function(){for(var t in this.SubFrame){var e=this.SubFrame[t];e.Frame.DrawCustomHorizontal&&e.Frame.DrawCustomHorizontal();for(var a=0;a<e.OverlayIndex.length;++a){var i=e.OverlayIndex[a];i.Frame&&i.Frame.DrawCustomHorizontal&&i.Frame.DrawCustomHorizontal()}}},this.DrawEx=function(t){for(var e in this.SubFrame){var a=this.SubFrame[e];"MinuteFrame"!=a.Frame.ClassName&&"MinuteHScreenFrame"!=a.Frame.ClassName||1!=e||a.Frame.DrawVolTitle(t.Symbol)}},this.DrawCustomVertical=function(t){for(var e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];a.Frame.DrawCustomVerticalEvent=t,a.Frame.DrawCustomVertical&&a.Frame.DrawCustomVertical()}},this.DrawToolbar=function(t){var e=null;t&&t.MoveOnPoint&&(e=t.MoveOnPoint);for(var a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a];if(!(i.Height<=0)){var r=i.Frame;if(r){1==r.ToolbarButtonStyle&&r.DrawToolbarV2&&r.DrawToolbarV2(e,t);for(var n=0;n<i.OverlayIndex.length;++n){var o=i.OverlayIndex[n],s=o.Frame;s.IsShow&&(s.DrawToolbar&&s.DrawToolbar(e,r.IsMinSize,t))}}}}},this.SetSizeChage=function(t){this.SizeChange=t;for(var e in this.SubFrame){var a=this.SubFrame[e];a.Frame.SizeChange=t;for(var i in a.OverlayIndex){var r=a.OverlayIndex[i];r.Frame&&(r.Frame.SizeChange=t)}}this.ChartBorder.UIElement&&(this.Position={X:this.ChartBorder.UIElement.offsetLeft,Y:this.ChartBorder.UIElement.offsetTop,W:this.ChartBorder.UIElement.clientWidth,H:this.ChartBorder.UIElement.clientHeight})},this.SetBeforeDrawXYCallback=function(t){for(var e=0;e<this.SubFrame.length;++e){this.SubFrame[e].Frame.BeforeDrawXYCallback=t}},this.Snapshot=function(){this.ScreenImageData=this.Canvas.getImageData(0,0,this.ChartBorder.GetChartWidth(),this.ChartBorder.GetChartHeight())},this.GetXData=function(t){return this.SubFrame[0].Frame.GetXData(t)},this.GetYData=function(t,e){for(var a,i=0;i<this.SubFrame.length;++i){var r=this.SubFrame[i],n=r.Frame.ChartBorder.GetLeft(),o=r.Frame.ChartBorder.GetTopEx(),s=r.Frame.ChartBorder.GetWidth(),l=r.Frame.ChartBorder.GetHeightEx();if(r.Frame.Canvas.beginPath(),r.Frame.Canvas.rect(n,o,s,l),r.Frame.Canvas.isPointInPath(n,t)){a=r.Frame,e&&(e.FrameID=i);break}}if(null!=a){a.RightFrame&&(e.RightYValue=a.RightFrame.GetYData(t));var h=a.GetYData(t);if(1==a.YSplitOperator.CoordinateType){var u=a.YSplitOperator.GetFirstOpenPrice();e.RightYValue=((h-u)/u*100).toFixed(2)+"%"}if(a.GetMainOverlayFrame){var C=a.GetMainOverlayFrame();if(C){if(C[0]){var c=C[0],f=c.GetYData(t);e.RightYValue=h,h=f}if(C[1]){var d=C[1],f=d.GetYData(t);e.RightYValue=f}}}return h}},this.PtInFrame=function(t,e){for(var a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a],r=i.Frame.ChartBorder.GetLeft(),n=i.Frame.ChartBorder.GetTop(),o=i.Frame.ChartBorder.GetWidth(),s=i.Frame.ChartBorder.GetHeight();if(i.Frame.Canvas.beginPath(),i.Frame.Canvas.rect(r,n,o,s),i.Frame.Canvas.isPointInPath(t,e))return a}var l=this.ChartBorder.GetBottom(),h=this.ChartBorder.GetChartHeight(),r=this.ChartBorder.GetLeft(),u=this.ChartBorder.GetRight();return t>=r&&t<=u&&e>l&&e<h?-3:-1},this.PtInChartFrame=function(t,e){for(var a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a],r=i.Frame.ChartBorder.GetLeft(),n=i.Frame.ChartBorder.GetTopEx(),o=i.Frame.ChartBorder.GetWidth(),s=i.Frame.ChartBorder.GetHeightEx();if(i.Frame.Canvas.beginPath(),i.Frame.Canvas.rect(r,n,o,s),i.Frame.Canvas.isPointInPath(t,e))return a}return-1},this.PtInHorizontalLabel=function(t,e){for(var a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a];if(!(i.Height<=0)){var r=i.Frame.PtInHorizontalLabel(t,e);if(r)return r.Frame=i.Frame,r.FrameID=a,r}}return null},this.PtInButtons=function(t,e){for(var a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a];if(!(i.Height<=0)){var r=i.Frame.PtInButtons(t,e);if(r)return r.Frame=i.Frame,r.FrameID=a,r;for(var n=0;n<i.OverlayIndex.length;++n){var o=i.OverlayIndex[n],s=o.Frame;if(s&&s.PtInButtons){var r=s.PtInButtons(t,e);if(r)return r.IndexID=o.Identify,r.FrameID=a,r.OverlayFrame=s,r.Frame=i.Frame,r}}}}return null},this.PtInFrameBottom=function(t,e){var a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetBottom(),r=this.ChartBorder.GetWidth(),n=this.ChartBorder.Bottom;return this.Canvas.beginPath(),this.Canvas.rect(a,i,r,n),!!this.Canvas.isPointInPath(t,e)},this.PtInFrameVertical=function(t,e){for(var a=0;a<this.SubFrame.length;++a){var i=this.SubFrame[a];if(!(i.Height<=0)&&(i.Frame.PtInVertical&&i.Frame.PtInVertical(t,e)))return{Frame:i.Frame}}return null},this.GetXFromIndex=function(t){return this.SubFrame[0].Frame.GetXFromIndex(t)},this.GetYFromData=function(t){return this.SubFrame[0].Frame.GetYFromData(t)},this.ZoomUp=function(t){var e=this.SubFrame[0].Frame.ZoomUp(t);return this.UpdateAllFrame(),e},this.ZoomDown=function(t,e){var a=this.SubFrame[0].Frame.ZoomDown(t,e);return this.UpdateAllFrame(),a},this.SetXShowCount=function(t){var e=this.SubFrame[0].Frame.SetXShowCount(t);return this.UpdateAllFrame(),e},this.GetXShowCount=function(){var t=-1;if(!we.IsNonEmptyArray(this.SubFrame))return t;var e=this.SubFrame[0];return e.Frame?t=e.Frame.XPointCount:t},this.XCoordinateZoom=function(t,e){var a=this.SubFrame[0].Frame.XCoordinateZoom(t,e);return this.UpdateAllFrame(),a},this.ResetXYSplit=function(){for(var t in this.SubFrame)this.SubFrame[t].Frame.XYSplit=!0},this.ResetXSplit=function(){for(var t in this.SubFrame)this.SubFrame[t].Frame.XSplit=!0},this.ResetYCustomSplit=function(t){if(we.IsNonEmptyArray(this.SubFrame))if(we.IsNumber(t)&&t>=0){var e=this.SubFrame[t];e.Frame&&(e.Frame.YCustomSplit=!0)}else for(var a=0;a<this.SubFrame.length;++a)this.SubFrame[a].Frame.YCustomSplit=!0},this.ClearYCoordinateMaxMin=function(t){if(we.IsNumber(t)){var e=this.SubFrame[t];if(!e||!e.Frame)return;var a=e.Frame;a.YMaxMin&&(a.YMaxMin.Max=null,a.YMaxMin.Min=null)}else for(var i=0;i<this.SubFrame.length;++i){var e=this.SubFrame[i],a=e.Frame;a.YMaxMin&&(a.YMaxMin.Max=null,a.YMaxMin.Min=null)}},this.SetLanguage=function(t){for(var e in this.SubFrame){var a=this.SubFrame[e];a&&a.Frame&&(a.Frame.YSplitOperator&&(a.Frame.YSplitOperator.LanguageID=t),a.Frame.XSplitOperator&&(a.Frame.XSplitOperator.LanguageID=t))}},this.GetCurrentPageSize=function(){if(this.SubFrame.length<=0)return null;var t=this.SubFrame[0];return t&&t.Frame?t.Frame.XPointCount:null},this.OnSize=function(){var t={};return this.SubFrame[0].Frame.OnSize(t),this.UpdateAllFrame(),t},this.SetDataWidth=function(t){var e=this.SubFrame[0].Frame.SetDataWidth(t);return this.UpdateAllFrame(),e},this.UpdateAllFrame=function(){for(var t=this.SubFrame[0].Frame,e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];e>0&&(a.Frame.XPointCount=t.XPointCount,a.Frame.ZoomIndex=t.ZoomIndex,a.Frame.DataWidth=t.DataWidth,a.Frame.DistanceWidth=t.DistanceWidth,a.Frame.LastCalculateStatus.Width=t.LastCalculateStatus.Width,a.Frame.LastCalculateStatus.XPointCount=t.LastCalculateStatus.XPointCount);for(var i in a.OverlayIndex){var r=this.SubFrame[e].OverlayIndex[i];r.Frame.XPointCount=t.XPointCount,r.Frame.ZoomIndex=t.ZoomIndex,r.Frame.DataWidth=t.DataWidth,r.Frame.DistanceWidth=t.DistanceWidth,r.Frame.LastCalculateStatus.Width=t.LastCalculateStatus.Width,r.Frame.LastCalculateStatus.XPointCount=t.LastCalculateStatus.XPointCount}}},this.PtInFrameBorder=function(t,e){for(var a=this.DragBorderHeight,i=0;i<this.SubFrame.length-1;++i){var r=this.SubFrame[i];if(!(r.Frame.Heigh<=0)){var n=r.Frame.ChartBorder.GetBottom(),o=r.Frame.ChartBorder.GetLeft(),s=r.Frame.ChartBorder.GetRight();if(r.Frame.Canvas.beginPath(),r.Frame.Canvas.rect(o,n-a/2,s-o,a),r.Frame.Canvas.isPointInPath(t,e))return{Index:i,Bottom:!0}}}return null},this.IsEnableDragY=function(t){if(!this.SubFrame)return!1;var e=this.SubFrame[t];if(!e||!e.Frame||!e.Frame.YSplitOperator)return!1;var a=e.Frame.YSplitOperator;return"function"==typeof a.IsEnableDragY&&a.IsEnableDragY()},this.IsEnableOverlayDragY=function(t,e){if(!this.SubFrame)return!1;var a=this.SubFrame[t],i=a.OverlayIndex[e];if(!i||!i.Frame)return!1;var r=i.Frame.YSplitOperator;return i.Frame.IsShareY&&(r=i.Frame.MainFrame.YSplitOperator),!(!r||"function"!=typeof r.IsEnableDragY)&&r.IsEnableDragY()},this.PtInFrameY=function(t,e){var a=0;if(this.GetExtendChartByClassName){var i=this.GetExtendChartByClassName("StockChip");i&&i.Chart&&(a=i.Chart.Width)}for(var r=0;r<this.SubFrame.length;++r){var n=this.SubFrame[r];if(!(n.Frame.Heigh<=0)){var o=n.Frame.ChartBorder.Right;o-=a;var s=n.Frame.ChartBorder.GetBorder(),l=s.Bottom,h=s.TopTitle,u=(s.Left,s.Right),C=l-h;if(C/3>30)var c=h+30,f=l-30;else var d=C/3,c=h+d,f=l-d;var D=0;if(e<c?D=1:e>f&&(D=2),o>=10)if(we.IsNonEmptyArray(n.OverlayIndex)){var m=n.OverlayIndex[0],p=m.Frame.RightOffset;if(n.Frame.Canvas.beginPath(),n.Frame.Canvas.rect(u,h,p,l-h),n.Frame.Canvas.isPointInPath(t,e))return{Index:r,Right:!0,Left:!1,Position:D,IsOverlay:!1};for(var v=u+p,g=0;g<n.OverlayIndex.length;++g){var m=n.OverlayIndex[g];if(m.RightWidth&&we.IsNumber(m.RightWidth.Width)){var T=m.RightWidth.Width;if(n.Frame.Canvas.beginPath(),n.Frame.Canvas.rect(v,h,T,l-h),n.Frame.Canvas.isPointInPath(t,e))return{Index:r,Right:!0,Left:!1,Position:D,IsOverlay:!0,OverlayIndex:g};v+=T}}}else if(n.Frame.Canvas.beginPath(),n.Frame.Canvas.rect(u,h,o,l-h),n.Frame.Canvas.isPointInPath(t,e))return{Index:r,Right:!0,Left:!1,Position:D,IsOverlay:!1};var I=n.Frame.ChartBorder.Left;if(I>=10&&(n.Frame.Canvas.beginPath(),n.Frame.Canvas.rect(0,h,I,l-h),n.Frame.Canvas.isPointInPath(t,e)))return{Index:r,Right:!1,Left:!0,Position:D,IsOverlay:!1}}}return null},this.SetDayCount=function(t){this.ChartBorder.MultiDayMinute.Count=t;for(var e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];a.Frame&&(a.Frame.DayCount=t,a.Frame.ChartBorder.MultiDayMinute.Count=t)}},this.SetMultiDayMinuteWidth=function(t){if(t){we.IsNumber(t.Left)&&(this.ChartBorder.MultiDayMinute.Left=t.Left),we.IsNumber(t.Right)&&(this.ChartBorder.MultiDayMinute.Right=t.Right);for(var e=0;e<this.SubFrame.length;++e){var a=this.SubFrame[e];a.Frame&&(we.IsNumber(t.Left)&&(a.Frame.ChartBorder.MultiDayMinute.Left=t.Left),we.IsNumber(t.Right)&&(a.Frame.ChartBorder.MultiDayMinute.Right=t.Right))}}}}function W(){this.newMethod=X,this.newMethod(),delete this.newMethod,this.IsHScreen=!0,this.CalculateChartBorder=function(){if(!(this.SubFrame.length<=0)){for(var t=this.ChartBorder.GetHScreenBorder(),e=this.ChartBorder.Right,a=t.Right,i=t.Right-t.Left,r=0,n=0,o=0;o<this.SubFrame.length;++o){var s=this.SubFrame[o],l=s.Frame;l&&l.ChartBorder&&l.ChartBorder.IsShowTitleOnly&&s.Height>0?n+=l.ChartBorder.TitleHeight:r+=s.Height}i-=n;for(var o=0;o<this.SubFrame.length;++o){var s=this.SubFrame[o],l=s.Frame;if(s.Frame.ChartBorder.Top=this.ChartBorder.Top,s.Frame.ChartBorder.Bottom=this.ChartBorder.Bottom,s.Frame.ChartBorder.LeftExtendWidth=this.ChartBorder.LeftExtendWidth,s.Frame.ChartBorder.RightExtendWidth=this.ChartBorder.RightExtendWidth,l&&l.ChartBorder&&l.ChartBorder.IsShowTitleOnly&&s.Height>0){var h=l.ChartBorder.TitleHeight;s.Frame.ChartBorder.Right=e,s.Frame.ChartBorder.Left=a-h,e+=h,a-=h}else{var h=i*(s.Height/r);s.Frame.ChartBorder.Right=e,s.Frame.ChartBorder.Left=a-h,e+=h,a-=h}}}},this.GetYData=function(t,e){for(var a,i=0;i<this.SubFrame.length;++i){var r=this.SubFrame[i],n=r.Frame.ChartBorder.GetLeftEx(),o=r.Frame.ChartBorder.GetTop(),s=r.Frame.ChartBorder.GetWidthEx(),l=r.Frame.ChartBorder.GetHeight();if(r.Frame.Canvas.beginPath(),r.Frame.Canvas.rect(n,o,s,l),r.Frame.Canvas.isPointInPath(t,o)){a=r.Frame,e&&(e.FrameID=i);break}}if(null!=a){var h=a.GetYData(t);if(a.GetMainOverlayFrame){var u=a.GetMainOverlayFrame();if(u){if(u[0]){var C=u[0],c=C.GetYData(t);e.RightYValue=h,h=c}if(u[1]){var f=u[1],c=f.GetYData(t);e.RightYValue=c}}}return h}}}function U(){this.newMethod=R,this.newMethod(),delete this.newMethod,this.ScreenImageData,this.Position,this.ClassName="DepthChartFrame",this.VerticalRange={Max:88,Min:8,Center:null,MaxDiffer:null,Differ:null,Step:.05},this.AskPrice,this.BidPrice,this.MinZoom=.05,this.SetPriceList=function(t,e){this.AskPrice=t,this.BidPrice=e},this.DrawFrame=function(){this.SplitXYCoordinate(),this.DrawHorizontal(),this.DrawVertical()},this.GetXFromIndex=function(t){var e=this.ChartBorder.GetLeft();this.ChartBorder.GetRight();return e+this.ChartBorder.GetWidth()*(t-this.VerticalRange.Min)/(this.VerticalRange.Max-this.VerticalRange.Min)},this.GetXData=function(t){var e=this.ChartBorder.GetLeft();this.ChartBorder.GetRight();return(t-e)/this.ChartBorder.GetWidth()*(this.VerticalRange.Max-this.VerticalRange.Min)+this.VerticalRange.Min},this.GetXFromPrice=function(t){var e=!1,a=this.GetPrice(this.BidPrice,t);if(null==a&&(a=this.GetPrice(this.AskPrice,t),e=!0),null==a&&this.BidPrice&&Array.isArray(this.BidPrice)&&this.BidPrice.length>0){var i=this.BidPrice[0];t<i&&(e=!1,a=i)}if(null==a&&this.AskPrice&&Array.isArray(this.AskPrice)&&this.AskPrice.length>0){var r=this.AskPrice[this.AskPrice.length-1];t>r&&(e=!0,a=r)}return null==a?null:{X:this.GetXFromIndex(a),Price:a,IsAsk:e}},this.GetPrice=function(t,e){if(!t||!Array.isArray(t)||t.length<=0)return null;if(e<t[0]||e>t[t.length-1])return null;var a=null;for(var i in t){var r=t[i];if(e==r)return r;if(e<r)return a;a=r}},this.SplitXYCoordinate=function(){0!=this.XYSplit&&(null!=this.YSplitOperator&&this.YSplitOperator.Operator(),null!=this.XSplitOperator&&this.XSplitOperator.Operator())},this.Snapshot=function(){this.ScreenImageData=this.Canvas.getImageData(0,0,this.ChartBorder.GetChartWidth(),this.ChartBorder.GetChartHeight())},this.SetSizeChage=function(t){this.SizeChange=t,this.Position={X:this.ChartBorder.UIElement.offsetLeft,Y:this.ChartBorder.UIElement.offsetTop,W:this.ChartBorder.UIElement.clientWidth,H:this.ChartBorder.UIElement.clientHeight}},this.PtInFrame=function(t,e){var a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetTop(),r=this.ChartBorder.GetWidth(),n=this.ChartBorder.GetHeight();return this.Canvas.beginPath(),this.Canvas.rect(a,i,r,n),this.Canvas.isPointInPath(t,e)?0:-1},this.PtInFrameBorder=function(t,e){return null},this.ZoomUp=function(){var t=this.VerticalRange,e=t.Differ;return!(e<t.MaxDiffer*this.MinZoom)&&(e-=t.Differ*t.Step,t.Differ=e,t.Min=t.Center-t.Differ,t.Max=t.Center+t.Differ,!0)},this.ZoomDown=function(){var t=this.VerticalRange,e=t.Differ;return e!=t.MaxDiffer&&(e+=t.Differ*t.Step,e>t.MaxDiffer&&(e=t.MaxDiffer),t.Differ=e,t.Min=t.Center-t.Differ,t.Max=t.Center+t.Differ,!0)}}function K(){this.Date,this.YClose,this.Open,this.Close,this.High,this.Low,this.Vol,this.Amount,this.Time,this.FlowCapital=null,this.Position=null,this.IsVirtual=!1,this.IsNonTrade=!1,this.YFClose=null,this.FClose=null,this.Stop,this.Up,this.Down,this.Unchanged,this.ExtendData,this.BFactor,this.AFactor,this.RightSeed,this.OrderFlow,this.ColorData,this.HeatMap}function z(){this.Close,this.Open,this.High,this.Low,this.Vol,this.Amount,this.DateTime,this.Increase,this.Risefall,this.AvPrice,this.Lead=null,this.Time,this.Date,this.Position=null,this.YClearing,this.YClose,this.ExtendData}function J(){this.Time,this.Date,this.Price,this.AvPrice,this.Vol=[],this.ColorID,this.YClose}function q(){this.Time,this.Date,this.Price,this.AvPrice,this.Vol=[],this.ColorID,this.YClose}function Z(){this.Date,this.Time,this.Value}function Q(){this.ID,this.Date,this.Time,this.Title,this.InfoType,this.ExtendData}function $(){this.PeriodCallback=new Vn.default,this.GetPeriodCallback=function(t){return this.PeriodCallback.has(t)?this.PeriodCallback.get(t):null},this.AddPeriodCallback=function(t){if(we.IsNumber(t.Period)&&t.Callback){var e={Period:t.Period,Callback:t.Callback};this.PeriodCallback.set(t.Period,e)}},this.RemovePeriodCallback=function(t){this.PeriodCallback.has(t.ID)&&this.PeriodCallback.delete(t.ID)}}function tt(){this.Data=new Array,this.DataOffset=0,this.Period=0,this.Right=0,this.Symbol,this.Data2=new Array,this.GetCloseMA=function(t){for(var e=new Array,a=0,i=this.Data.length;a<i;a++)if(a<t)e[a]=null;else{for(var r=0,n=0;n<t;n++)r+=this.Data[a-n].Close;e[a]=r/t}return e},this.GetVolMA=function(t){for(var e=new Array,a=0,i=this.Data.length;a<i;a++)if(a<t)e[a]=null;else{for(var r=0,n=0;n<t;n++)r+=this.Data[a-n].Vol;e[a]=r/t}return e},this.GetAmountMA=function(t){for(var e=new Array,a=0,i=this.Data.length;a<i;a++)if(a<t)e[a]=null;else{for(var r=0,n=0;n<t;n++)r+=this.Data[a-n].Amount;e[a]=r/t}return e},this.GetClose=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Close;return t},this.GetYClose=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].YClose;return t},this.GetHigh=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].High;return t},this.GetLow=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Low;return t},this.GetOpen=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Open;return t},this.GetVol=function(t){var e=1;we.IsNumber(t)&&(e=t);var a=new Array;for(var i in this.Data)a[i]=this.Data[i].Vol/e;return a},this.GetAmount=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Amount;return t},this.GetPosition=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Position;return t},this.GetSettlementPrice=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].FClose;return t},this.GetIsEqual=function(){var t=[];for(var e in this.Data){var a=this.Data[e];t[e]=a.Close==a.Open?1:0}return t},this.GetIsUp=function(){var t=[];for(var e in this.Data){var a=this.Data[e];t[e]=a.Close>a.Open?1:0}return t},this.GetIsDown=function(){var t=[];for(var e in this.Data){var a=this.Data[e];t[e]=a.Close<a.Open?1:0}return t},this.GetLead=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Lead;return t},this.GetDate=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Date;return t},this.GetTime=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].Time;return t},this.GetUp=function(){var t=[];for(var e in this.Data)t[e]=this.Data[e].Up;return t},this.GetDown=function(){var t=[];for(var e in this.Data)t[e]=this.Data[e].Down;return t},this.GetYear=function(){var t=new Array;for(var e in this.Data)t[e]=parseInt(this.Data[e].Date/1e4);return t},this.GetMonth=function(){var t=new Array;for(var e in this.Data)t[e]=parseInt(this.Data[e].Date%1e4/100);return t},this.GetAvPrice=function(){var t=new Array;for(var e in this.Data){var a=this.Data[e].AvPrice;we.IsNumber(a)?t[e]=a:t[e]=0}return t},this.GetDateRange=function(){if(!this.Data||this.Data.length<=0)return null;var t=this.Data[0],e=this.Data[this.Data.length-1],a={Start:{Date:t.Date},End:{Date:e.Date}};return we.IsNumber(t.Time)&&(a.Start.Time=t.Time),we.IsNumber(e.Time)&&(a.End.Time=e.Time),a},this.GetDateList=function(){if(!this.Data||this.Data.length<=0)return null;for(var t=[],e=new Rn.default,a=0;a<this.Data.length;++a){var i=this.Data[a];we.IsNumber(i.Date)&&(e.has(i.Date)||(e.add(i.Date),t.push(i.Date)))}return t},this.GetMinutePeriodData=function(t){var e=new Array,a=5;if(5==t)a=5;else if(6==t)a=15;else if(7==t)a=30;else if(8==t)a=60;else if(11==t)a=120;else{if(12!=t)return t>ro&&t<=no?(a=t-ro,this.GetMinuteCustomPeriodData(a)):this.Data;a=240}for(var i=!1,r=null,n=null,o=0;o<this.Data.length;){i=!0;for(var s=0;s<a&&o<this.Data.length;++o){i&&(r=new K,e.push(r),i=!1);var l=this.Data[o];if(null!=l){if((925!=l.Time||null!=n&&924==n)&&(930!=l.Time||null!=n&&929==n)&&(1300!=l.Time||null!=n&&1259==n)&&++s,r.Date=l.Date,r.Time=l.Time,n=r.Time,null!=l.Open&&null!=l.Close&&(null==r.Open||null==r.Close?(r.Open=l.Open,r.High=l.High,r.Low=l.Low,r.YClose=l.YClose,r.Close=l.Close,r.Vol=l.Vol,r.Amount=l.Amount,r.FlowCapital=l.FlowCapital,r.Position=l.Position,r.YFClose=l.YFClose,r.FClose=l.FClose):(r.High<l.High&&(r.High=l.High),r.Low>l.Low&&(r.Low=l.Low),r.Close=l.Close,r.Vol+=l.Vol,null!=l.Amount&&(r.Amount+=l.Amount),r.Position=l.Position,r.FlowCapital=l.FlowCapital,r.FClose=l.FClose),o+1<this.Data.length)){var h=this.Data[o+1];if(h&&h.Date!=l.Date){++o;break}}}else++s}}return e},this.GetMinuteCustomPeriodData=function(t){for(var e=new Array,a=t,i=!1,r=null,n=0;n<this.Data.length;){i=!0;for(var o=0;o<a&&n<this.Data.length;++n,++o){i&&(r=new K,e.push(r),i=!1);var s=this.Data[n];null!=s&&(r.Date=s.Date,r.Time=s.Time,null!=s.Open&&null!=s.Close&&(null==r.Open||null==r.Close?(r.Open=s.Open,r.High=s.High,r.Low=s.Low,r.YClose=s.YClose,r.Close=s.Close,r.Vol=s.Vol,r.Amount=s.Amount,r.FlowCapital=s.FlowCapital,r.Position=s.Position,r.YFClose=s.YFClose,r.FClose=s.FClose):(r.High<s.High&&(r.High=s.High),r.Low>s.Low&&(r.Low=s.Low),r.Close=s.Close,r.Vol+=s.Vol,null!=s.Amount&&(r.Amount+=s.Amount),r.Position=s.Position,r.FlowCapital=s.FlowCapital,r.FClose=s.FClose)))}}return e},this.GetDayPeriodData=function(t){if(t>ao&&t<=io)return this.GetDayCustomPeriodData(t-ao);var e=wo.IsBIT(this.Symbol),a=new Array,i=0,r=2,n=null;for(var o in this.Data){var s=!1,l=this.Data[o];switch(t){case 1:if(e)var h=tt.GetSunday(l.Date);else var h=tt.GetFirday(l.Date);h!=i&&(s=!0,i=h);break;case 21:if(e)var h=tt.GetSunday(l.Date);else var h=tt.GetFirday(l.Date);h!=i&&(++r,r>=2&&(s=!0,r=0),i=h);break;case 2:parseInt(l.Date/100)!=parseInt(i/100)&&(s=!0,i=l.Date);break;case 3:parseInt(l.Date/1e4)!=parseInt(i/1e4)&&(s=!0,i=l.Date);break;case 22:var u=tt.GetHalfYear(l.Date);u!=i&&(s=!0,i=u);break;case 9:var C=tt.GetQuarter(l.Date);C=10*parseInt(l.Date/1e4)+C;var c=tt.GetQuarter(i);c=10*parseInt(i/1e4)+c,C!=c&&(s=!0,i=l.Date)}if(s){if(n=new K,n.Date=l.Date,a.push(n),null==l.Open||null==l.Close)continue;n.Open=l.Open,n.High=l.High,n.Low=l.Low,n.YClose=l.YClose,n.Close=l.Close,n.Vol=l.Vol,n.Amount=l.Amount,n.FlowCapital=l.FlowCapital,n.Position=l.Position,n.YFClose=l.YFClose,n.FClose=l.FClose}else{if(null==n)continue;if(null==l.Open||null==l.Close)continue;null==n.Open||null==n.Close?(n.Open=l.Open,n.High=l.High,n.Low=l.Low,n.YClose=l.YClose,n.Close=l.Close,n.Vol=l.Vol,n.Amount=l.Amount,n.FlowCapital=l.FlowCapital,n.Position=l.Position,n.YFClose=l.YFClose,n.FClose=l.FClose):(n.High<l.High&&(n.High=l.High),n.Low>l.Low&&(n.Low=l.Low),n.Close=l.Close,n.Vol+=l.Vol,null!=l.Amount&&(n.Amount+=l.Amount),n.Position=l.Position,n.FlowCapital=l.FlowCapital,n.Date=l.Date,n.FClose=l.FClose)}}return a},this.GetDayCustomPeriodData=function(t){for(var e=[],a=t,i=!1,r=null,n=0;n<this.Data.length;){i=!0;for(var o=0;o<a&&n<this.Data.length;++n,++o){i&&(r=new K,e.push(r),i=!1);var s=this.Data[n];null!=s&&(r.Date=s.Date,null!=s.Open&&null!=s.Close&&(null==r.Open||null==r.Close?(r.Open=s.Open,r.High=s.High,r.Low=s.Low,r.YClose=s.YClose,r.Close=s.Close,r.Vol=s.Vol,r.Amount=s.Amount,r.FlowCapital=s.FlowCapital,r.Position=s.Position,r.YFClose=s.YFClose,r.FClose=s.FClose):(r.High<s.High&&(r.High=s.High),r.Low>s.Low&&(r.Low=s.Low),r.Close=s.Close,r.Vol+=s.Vol,null!=s.Amount&&(r.Amount+=s.Amount),r.Position=s.Position,r.FlowCapital=s.FlowCapital,r.FClose=s.FClose)))}}return e},this.GetPeriodData=function(t){var e=eo.GetPeriodCallback(t);if(e)return e.Callback(t,this.Data,this);if(wo.IsBIT(this.Symbol)&&(5==t||6==t||7==t||8==t||t>ro&&t<=no)){var a=5;return 5==t?a=5:6==t?a=15:7==t?a=30:8==t?a=60:11==t?a=120:12==t?a=240:t>ro&&t<=no&&(a=t-ro),this.GetMinuteCustomPeriodData(a)}return tt.IsDayPeriod(t,!1)?this.GetDayPeriodData(t):tt.IsMinutePeriod(t,!1)?this.GetMinutePeriodData(t):void 0},this.GetRightData=function(t,e){var a=[];if(this.Data.length<=0)return a;if(e&&1==e.AlgorithmType){for(var i=0;i<this.Data.length;++i){var r=this.Data[i],n=1==t?r.BFactor:r.AFactor;a[i]=K.CopyRight(r,n)}return a}if(1==t){var o=this.Data.length-1,n=1,s=this.Data[o].YClose;for(a[o]=K.Copy(this.Data[o]),a[o].RightSeed=n,--o;o>=0&&s==this.Data[o].Close;--o){var l=K.Copy(this.Data[o]);l.RightSeed=n,a[o]=l,s=this.Data[o].YClose}for(;o>=0;--o){var h=this.Data[o].Close;s!=h&&0!=h&&(n*=s/h);var l=K.CopyRight(this.Data[o],n);l.RightSeed=n,a[o]=l,s=this.Data[o].YClose}}else if(2==t){var o=0,n=1,u=this.Data[o].Close;for(a[o]=K.Copy(this.Data[o]),a[o].RightSeed=n,++o;o<this.Data.length&&u==this.Data[o].YClose;++o){var l=K.Copy(this.Data[o]);l.RightSeed=n,a[o]=l,u=this.Data[o].Close}for(;o<this.Data.length;++o){u!=this.Data[o].YClose&&(n*=u/this.Data[o].YClose);var l=K.CopyRight(this.Data[o],n);l.RightSeed=n,a[o]=l,u=this.Data[o].Close}}return a},this.GetRightDate=this.GetRightData,this.GetOverlayData=function(t,e){for(var a=[],i=0,r=0;i<this.Data.length;){var n=this.Data[i].Date;if(r>=t.length)a[i]=new K,a[i].Date=n,++i;else{var o=t[r].Date;o==n?(a[i]=new K,a[i].Date=t[r].Date,a[i].YClose=t[r].YClose,a[i].Open=t[r].Open,a[i].High=t[r].High,a[i].Low=t[r].Low,a[i].Close=t[r].Close,a[i].Vol=t[r].Vol,a[i].Amount=t[r].Amount,a[i].Stop=t[r].Stop,a[i].Up=t[r].Up,a[i].Down=t[r].Down,a[i].Unchanged=t[r].Unchanged,++r,++i):o<n?++r:(a[i]=new K,a[i].Date=n,++i)}}return a},this.GetOverlayMinuteData=function(t,e){for(var a=[],i=0,r=0;i<this.Data.length;){var n=this.Data[i].Date,o=this.Data[i].Time;if(r>=t.length)a[i]=new K,a[i].Date=n,a[i].Time=o,++i;else{var s=t[r].Date,l=t[r].Time;s==n&&l==o?(a[i]=new K,a[i].Date=t[r].Date,a[i].Time=t[r].Time,a[i].YClose=t[r].YClose,a[i].Open=t[r].Open,a[i].High=t[r].High,a[i].Low=t[r].Low,a[i].Close=t[r].Close,a[i].Vol=t[r].Vol,a[i].Amount=t[r].Amount,a[i].Stop=t[r].Stop,a[i].Up=t[r].Up,a[i].Down=t[r].Down,a[i].Unchanged=t[r].Unchanged,++r,++i):s<n||s==n&&l<o?++r:(a[i]=new K,a[i].Date=n,a[i].Time=o,++i)}}return a},this.GetFittingData=function(t){for(var e=new Array,a=0,i=0;a<this.Data.length;){var r=this.Data[a].Date;if(i>=t.length)e[a]=null,++a;else{var n=t[i].Date;if(n==r){var o=new Z;o.Date=t[i].Date,o.Value=t[i].Value,e[a]=o,++i,++a}else n<r?++i:(e[a]=new Z,e[a].Date=r,++a)}}return e},this.GetFittingData2=function(t,e){for(var a=new Array,i=0,r=0;i<this.Data.length;){var n=this.Data[i].Date;if(r>=t.length)a[i]=new Z,a[i].Date=n,a[i].Value=e,++i;else{var o=t[r].Date;if(o==n){var s=new Z;s.Date=t[r].Date,s.Value=t[r].Value,a[i]=s,++r,++i}else o<n?++r:(a[i]=new Z,a[i].Date=n,a[i].Value=e,++i)}}return a},this.GetDateIndex=function(t){for(var e=0,a=0;e<this.Data.length;){var i=this.Data[e].Date;if(a>=t.length)break;var r=t[a];r.Date==i?(r.Index=e,++a):r.Date<i?++a:++e}},this.GetDateTimeIndex=function(t){for(var e=0,a=0;e<this.Data.length;){var i=this.Data[e].Date,r=this.Data[e].Time;if(a>=t.length)break;var n=t[a];n.Date==i&&n.Time==r?(n.Index=e,++a):n.Date<i||n.Date==i&&n.Time<r?++a:++e}},this.GetMinuteFittingData=function(t){for(var e=[],a=0,i=0;a<this.Data.length;){var r=this.Data[a].Date,n=this.Data[a].Time;if(i>=t.length)e[a]=null,++a;else{var o=t[i].Date,s=t[i].Time,l=t[i];if(o==r&&s==n){var h=new Z;h.Date=l.Date,h.Time=l.Time,h.Value=l.Value,e[a]=h,++i,++a}else if(o<r||o==r&&s<n)++i;else{var h=new Z;h.Date=r,h.Time=n,e[a]=h,++a}}}return e},this.GetMinuteFittingDataV2=function(t){for(var e=[],a=null,i=0,r=0;i<this.Data.length;){var n=this.Data[i].Date,o=this.Data[i].Time;if(r>=t.length)e[i]=null,++i;else{var s=t[r].Date,l=t[r].Time,h=t[r];if(s==n&&l==o){var u=new Z;u.Date=h.Date,u.Time=h.Time,u.Value=h.Value,e[i]=u,a=h,++r,++i}else if(s<n||s==n&&l<o){var C=e.length-1;if(C>=0){var u=e[C];u&&(s<u.Date||s==u.Date&&l<u.Time)&&(u.Value=h.Value)}a=h,++r}else{var u=new Z;u.Date=n,u.Time=o,a&&(u.Value=a.Value),e[i]=u,++i}}}return e},this.GetFittingFinanceData=function(t){for(var e=[],a=0,i=0;a<this.Data.length;){var r=this.Data[a].Date;if(i<t.length){if(r<t[i].Date){++a;continue}}if(i+1<t.length&&t[i].Date<r&&t[i+1].Date<=r)++i;else{var n=new Z;n.Date=r,i<t.length?(n.Value=t[i].Value,n.FinanceDate=t[i].Date):(n.Value=null,n.FinanceDate=null),e[a]=n,++a}}return e},this.GetMinuteFittingFinanceData=function(t){var e=[];if(!Array.isArray(t)||t.length<=0)return e;var a=0,i=t[0];for(a=0;a<this.Data.length;++a){var r=this.Data[a].Date,n=this.Data[a].Time;if(r>i.Date||r==i.Date&&n>=i.Time)break}for(var o=0;a<this.Data.length;){var r=this.Data[a].Date,n=this.Data[a].Time;if(o+1<t.length&&(t[o].Date<r&&t[o+1].Date<=r||t[o].Date==r&&t[o].Time<n&&t[o+1].Time<=n))++o;else{var s=new Z;s.Date=r,s.Time=n,o<t.length?(s.Value=t[o].Value,s.FinanceDate=t[o].Date,s.FinanceTime=t[o].Time):(s.Value=null,s.FinanceDate=null,s.FinanceTime=null),e[a]=s,++a}}return e},this.GetFittingTradeData=function(t,e,a){for(var i=[],r=!1,n=0,o=0;n<this.Data.length;){var s=this.Data[n].Date;if(o<t.length&&t[o].Date>s){var l=new Z;l.Date=s,l.Value=e,i[n]=l,++n}else if(o+1<t.length&&t[o].Date<s&&t[o+1].Date<=s)++o,r=!1;else{var l=new Z;if(l.Date=s,l.Value=e,l.FinanceDate=null,o<t.length){var h=t[o];0==this.Period&&!0===a?h.Date==l.Date&&(l.Value=h.Value,l.FinanceDate=h.Date,r=!0):0==r&&(l.Value=h.Value,l.FinanceDate=h.Date,r=!0)}i[n]=l,++n}}return i},this.GetMinuteFittingTradeData=function(t,e,a){for(var i=[],r=!1,n=0,o=0;n<this.Data.length;){var s=this.Data[n].Date,l=this.Data[n].Time;if(o<t.length&&(t[o].Date>s||t[o].Date==s&&t[o].Time>l)){var h=new Z;h.Date=s,h.Time=l,h.Value=e,i[n]=h,++n}else if(o+1<t.length&&(t[o].Date<s&&t[o+1].Date<=s||t[o].Date==s&&t[o].Time<l&&t[o+1].Time<=l))++o,r=!1;else{var h=new Z;if(h.Date=s,h.FinanceDate=null,h.Time=l,h.Value=e,o<t.length){var u=t[o];4==this.Period&&!0===a?u.Date==h.Date&&u.Time==h.Time&&(h.Value=u.Value,h.FinanceDate=u.Date,h.FinanceTime=u.Time,r=!0):0==r&&(h.Value=u.Value,h.FinanceDate=u.Date,h.FinanceTime=u.Time,r=!0)}i[n]=h,++n}}return i},this.GetFittingMarketValueData=function(t){for(var e=[],a=0,i=0;a<this.Data.length;){var r=this.Data[a].Date,n=this.Data[a].Close;if(i+1<t.length&&t[i].Date<r&&t[i+1].Date<=r)++i;else{var o=new Z;o.Date=r,o.Value=t[i].Value*n,o.FinanceDate=t[i].Date,e[a]=o,++a}}return e},this.GetFittingMonthData=function(t){for(var e=new Array,a=null,i=0,r=0;i<this.Data.length;){var n=this.Data[i].Date;if(r>=t.length)e[i]=null,++i;else{var o=t[r].Date;if(o==n){var s=new Z;s.Date=t[r].Date,s.Value=t[r].Value,s.Text=t[r].Text,e[i]=s,++r,++i}else if(null!=a&&a<o&&n>o){var s=new Z;s.Date=n,s.OverlayDate=t[r].Date,s.Value=t[r].Value,s.Text=t[r].Text,e[i]=s,++r,++i}else o<n?++r:(e[i]=new Z,e[i].Date=n,++i);a=n}}return e},this.GetValue=function(){var t=[];for(var e in this.Data)if(this.Data[e]&&null!=this.Data[e].Value){var a=this.Data[e].Value;isNaN(a)?a instanceof Array?t[e]=a:t[e]=null:t[e]=a}else t[e]=null;return t},this.GetObject=function(){var t=[];for(var e in this.Data)if(this.Data[e]&&this.Data[e].Value){var a=this.Data[e].Value;t[e]=a}else t[e]=null;return t},this.GetPeriodSingleData=function(t){var e=new Array,a=0,i=2,r=null;for(var n in this.Data){var o=!1,s=this.Data[n];if(null!=s&&null!=s.Date){switch(t){case 1:var l=tt.GetFirday(s.Date);l!=a&&(o=!0,a=l);break;case 21:var l=tt.GetFirday(s.Date);l!=a&&(++i,i>=2&&(o=!0,i=0),a=l);break;case 2:parseInt(s.Date/100)!=parseInt(a/100)&&(o=!0,a=s.Date);break;case 3:parseInt(s.Date/1e4)!=parseInt(a/1e4)&&(o=!0,a=s.Date);break;case 9:var h=tt.GetQuarter(s.Date);h=10*parseInt(s.Date/1e4)+h;var u=tt.GetQuarter(a);u=10*parseInt(a/1e4)+u,h!=u&&(o=!0,a=s.Date)}if(o)r=new Z,r.Date=s.Date,r.Value=s.Value,e.push(r);else{if(null==r)continue;if(null==s.Value||isNaN(s.Value))continue;(null==r.Value||isNaN(r.Value))&&(r.Value=s.Value)}}}return e},this.GetMinuteAvPrice=function(){var t=new Array;for(var e in this.Data)t[e]=this.Data[e].AvPrice;return t},this.MergeMinuteData=function(t){if(!this.Data||this.Data.length<=0)return this.Data=t,!0;for(var e=this.Data[0],a=0,i=null,r=0;r<t.length;++r){var n=t[r];if(n.Date>e.Date){a=r,i=n;break}if(n.Date==e.Date&&n.Time>=e.Time){a=r,i=n;break}}if(null==i)return!1;for(var o=null,s=!1,r=this.Data.length-1;r>=0;--r){var l=this.Data[r].Date,h=this.Data[r].Time;if(i.Date>l||i.Date==l&&i.Time>=h){o=r,i.Date==l&&i.Time==h&&(s=!0);break}}if(null==o)return!1;var u=o,r=a;if(1==s){var n=t[r];if(u-1>0){var C=this.Data[u-1];n.YClose||(n.YClose=C.Close),!we.IsNumber(n.FlowCapital)&&we.IsNumber(C.FlowCapital)&&(n.FlowCapital=C.FlowCapital)}var c=K.Copy(n);this.Data[u]=c,++u,++r}else++u;for(;r<t.length;){var n=t[r];if(u>=this.Data.length-1){if(u-1>0){var C=this.Data[u-1];n.YClose||(n.YClose=C.Close),!we.IsNumber(n.FlowCapital)&&we.IsNumber(C.FlowCapital)&&(n.FlowCapital=C.FlowCapital)}var c=K.Copy(n);this.Data[u]=c,++u,++r}else{var f=this.Data[u];f.Date==n.Date&&f.Time==n.Time?(K.CopyTo(f,n),++u,++r):++u}}return!0},this.ConverPeriod=function(t,e,a){for(var i=[],r=null,n=tt.IsMinutePeriod(e,!0),o=tt.IsMinutePeriod(a,!0),s=n&&o,l=n&&!o,h=!n&&!o,u=0,C=0;u<this.Data.length;++u){for(var c=this.Data[u];C<t.length;++C){var f=t[C];if(s){if(f.Date>c.Date||f.Date==c.Date&&f.Time>=c.Time){r=f;break}}else if((l||h)&&f.Date>=c.Date){r=f;break}}var d=null;r?(d=K.Copy(r),d.PDate=r.Date,d.PTime=r.Time):d=new K,d.Date=c.Date,(s||l)&&(d.Time=c.Time),i.push(d)}return Xn.Chart.Log("[ChartData::ConverPeriod] result",i),i},this.GetRef=function(t){for(var e=[],a=0;a<this.Data.length;++a){e[a]=null;var i=this.Data[a];if(a-t<0){var r=new K;r.Date=i.Date,r.Time=i.Time,e[a]=r}else{var n=this.Data[a-t],r=K.Copy(n);r.Date=i.Date,r.Time=i.Time,e[a]=r}}return e},this.FitKLineIndex=function(t,e,a,i){for(var r=this.Data.length,n=t.length,o=[tt.IsMinutePeriod(a,!0),tt.IsMinutePeriod(i,!0)],s=[tt.IsDayPeriod(a,!0),tt.IsDayPeriod(i,!0)],l=tt.GetKLineDataTime(this.Data[0]),h=[],u=n,C=0;C<n;++C){var c=tt.GetKLineDataTime(t[C]);if(s[0]&&s[1]||o[0]&&s[1]){if(c.Date>=l.Date){u=C;break}}else if(o[0]&&o[1]){if(c.Date>l.Date){u=C;break}if(c.Date==l.Date&&c.Time>=l.Time){u=C;break}}}for(var C=0,f=u;C<r;){var c=tt.GetKLineDataTime(this.Data[C]);if(f>=n){var d={Date:c.Date,Time:c.Time,Index:-1};h[C]=d,++C}else{var D=tt.GetKLineDataTime(t[f]);if(s[0]&&s[1]||o[0]&&s[1])if(D.Date==c.Date){var d={Date:c.Date,Time:c.Time,Index:f,Data2:D.Date,Time2:D.Time};h[C]=d,++C}else if(f+1<n){var m=tt.GetKLineDataTime(t[f+1]);if(D.Date<=c.Date&&m.Date>c.Date){var d={Date:c.Date,Time:c.Time,Index:f+1,Data2:m.Date,Time2:m.Time};h[C]=d,++C}else if(m.Date<=c.Date)++f;else{var d={Date:c.Date,Time:c.Time,Index:-1};h[C]=d,++C}}else++f;else if(o[0]&&o[1])if(D.Date==c.Date&&D.Time==c.Time){var d={Date:c.Date,Time:c.Time,Index:f,Data2:D.Date,Time2:D.Time};h[C]=d,++C}else if(f+1<n){var m=tt.GetKLineDataTime(t[f+1]);if(D.Date<c.Date&&m.Date>c.Date||D.Date==c.Date&&D.Time<c.Time&&m.Date==c.Date&&m.Time>c.Time||D.Date==c.Date&&D.Time<c.Time&&m.Date>c.Date||D.Date<c.Date&&m.Date==c.Date&&m.Time>c.Time){var d={Date:c.Date,Time:c.Time,Index:f+1,Data2:m.Date,Time2:m.Time};h[C]=d,++C}else if(m.Date<c.Date||m.Date==c.Date&&m.Time<=c.Time)++f;else{var d={Date:c.Date,Time:c.Time,Index:-1};h[C]=d,++C}}else++f}}var p=[];for(var C in e){var c=e[C];if(Array.isArray(c.Data)){var v=[];p[C]={Data:v,Name:c.Name};for(var f=0;f<h.length;++f){var g=h[f];v[f]=null,g&&g.Index>=0&&g.Index<c.Data.length&&(v[f]=c.Data[g.Index])}}else p[C]={Data:c.Data,Name:c.Name}}return p},this.FindDataIndexByDateTime=function(t){var e=0;for(var a in t)t[a].Index=-1;for(var a in this.Data){var i=this.Data[a];for(var r in t){var n=t[r];if(!(n.Index>=0)){if(we.IsNumber(n.Time)){if(n.Date==i.Date&&n.Time==i.Time){n.Index=parseInt(a),++e;break}}else if(n.Date==i.Date){n.Index=parseInt(a),++e;break}if(e>=t.length)break}}}},this.CloneData=function(t){var e=[];if("HistoryData"==t)for(var a in this.Data){var i=this.Data[a],r=K.Copy(i);e.push(r)}return e},this.GetAPIDataIndex=function(t,e){var a=[];if(t&&e){for(var i=this.Data.length,r=t.length,n=tt.GetKLineDataTime(this.Data[0]),o=r,o=r,s=0;s<r;++s){var l=t[s],h=e[s];if(l>n.Date||l==n.Date&&h>=n.Time){o=s;break}}for(var s=0,u=o;s<i;){var C=this.Data[s];if(u>=r){var c={KDate:C.Date,KTime:C.Time,KIndex:s,Index:-1};a[s]=c,++s}else{var l=t[u],h=e[u];if(l==C.Date&&h==C.Time){var c={KDate:C.Date,KTime:C.Time,KIndex:s,Index:u,Data:l,Time:h};a[s]=c,++s}else if(u+1<r){var f=t[u+1],d=e[u+1];if(l<C.Date&&f>C.Date||l==C.Date&&h<C.Time&&f==C.Date&&d>C.Time||l==C.Date&&h<C.Time&&f>C.Date||l<C.Date&&f==C.Date&&d>C.Time){var c={KDate:C.Date,KTime:C.Time,KIndex:s,Index:u,Data:l,Time:h};a[s]=c,++s}else if(f<C.Date||f==C.Date&&d<=C.Time)++u;else{var c={KDate:C.Date,KTime:C.Time,KIndex:s,Index:-1};a[s]=c,++s}}else++u}}}else if(t){for(var i=this.Data.length,r=t.length,n=tt.GetKLineDataTime(this.Data[0]),o=r,s=0;s<r;++s){var C=t[s];if(C>=n.Date){o=s;break}}for(var s=0,u=o;s<i;){var C=this.Data[s];if(u>=r){var c={KDate:C.Date,KIndex:s,Index:-1};a[s]=c,++s}else{var D=t[u];if(D==C.Date){var c={KDate:C.Date,KIndex:s,Index:u,Data:D};a[s]=c,++s}else if(u+1<r){var m=t[u+1];if(D<=C.Date&&m>C.Date){var c={KDate:C.Date,KIndex:s,Index:u,Data:D};a[s]=c,++s}else if(m<=C.Date)++u;else{var c={KDate:C.Date,KIndex:s,Index:-1};a[s]=c,++s}}else++u}}}return a},this.FixKData=function(t,e){return tt.IsDayPeriod(e,!0)?this.FixKData_Day(t):tt.IsMinutePeriod(e,!0)?this.FixKData_Minute(t):null},this.FixKData_Day=function(t){for(var e=[],a=t.length,i=0,r=0;i<this.Data.length;){var n=this.Data[i];if(r<a){var o=t[r];if(o.Date>n.Date){++i;continue}}if(r+1<a){var o=t[r],s=t[r+1];if(o.Date<n.Date&&s.Date<=n.Date){++r;continue}}var l=new K;l.Date=n.Date;var h=r<a?r:a-1,o=t[h];l.Close=o.Close,l.High=o.High,l.Low=o.Low,l.Open=o.Open,l.YClose=o.YClose,l.Amount=o.Amount,l.Vol=o.Vol,l.ExDate=o.Date,e[i]=l,++i}return e},this.FixKData_Minute=function(t){for(var e=[],a=t.length,i=0,r=0;i<this.Data.length;){var n=this.Data[i],o=tt.DateTimeToNumber(n);if(r<a){var s=t[r],l=tt.DateTimeToNumber(s);if(l>o){++i;continue}}if(r+1<a){var s=t[r],h=t[r+1],l=tt.DateTimeToNumber(s),u=tt.DateTimeToNumber(h);if(l<o&&u<=o){++r;continue}}var C=new K;C.Date=n.Date,C.Time=n.Time;var c=r<a?r:a-1,s=t[c];C.Close=s.Close,C.High=s.High,C.Low=s.Low,C.Open=s.Open,C.YClose=s.YClose,C.Amount=s.Amount,C.Vol=s.Vol,C.ExDate=s.Date,C.ExTime=s.Time,e[i]=C,++i}return e},this.GetDataRange=function(t,e){if(!we.IsNonEmptyArray(this.Data))return null;for(var a={},i=0;i<this.Data.length;++i){var r=this.Data[i];if(r.Date==t.Date&&(we.IsNumber(t.Time)?r.Time==t.Time&&(a.Start={Index:i,Date:r.Date,Time:r.Time}):a.Start={Index:i,Date:r.Date}),(r.Date=e.Date)&&(we.IsNumber(e.Time)?r.Time==e.Time&&(a.End={Index:i,Date:r.Date,Time:r.Time}):a.End={Index:i,Date:r.Date}),a.Start&&a.End)return a}return null},this.ExportArrayData=function(t,e){if(!we.IsNonEmptyArray(this.Data))return null;var a=0,i=this.Data.length-1;e&&e.Start&&e.End&&we.IsNumber(e.Start.Index)&&we.IsNumber(e.End.Index)&&(a=e.Start.Index,i=e.End.Index);for(var r=[],n=a;n<=i&&n<this.Data.length;++n)r[n]=this.Data[n];return r},this.ExportBoolData=function(t,e){if(!we.IsNonEmptyArray(this.Data))return null;var a=0,i=this.Data.length-1;e&&e.Start&&e.End&&we.IsNumber(e.Start.Index)&&we.IsNumber(e.End.Index)&&(a=e.Start.Index,i=e.End.Index);for(var r=[],n=a;n<=i&&n<this.Data.length;++n){var o=this.Data[n];r[n]=!1,we.IsPlusNumber(o)&&(r[n]=!0)}return r},this.ExportKLineData=function(t){if(!we.IsNonEmptyArray(this.Data))return null;var e=0,a=this.Data.length-1;t&&t.Start&&t.End&&we.IsNumber(t.Start.Index)&&we.IsNumber(t.End.Index)&&(e=t.Start.Index,a=t.End.Index);for(var i=[],r=[],n=[],o=[],s=[],l=[],h=[],u=[],C=e;C<=a&&C<this.Data.length;++C){var c=this.Data[C];i[C]=c.Date,r[C]=c.Open,n[C]=c.High,o[C]=c.Low,h[C]=c.Close,s[C]=c.Vol,l[C]=c.Amount,u[C]=c.Time}if(t&&t.IsOverlay){var f=[{Name:"Open",Data:r},{Name:"High",Data:n},{Name:"Low",Data:o},{Name:"Close",Data:h},{Name:"Vol",Data:s},{Name:"Amount",Data:l}];return f}var f=[{Name:"Date",Data:i}];return(tt.IsMinutePeriod(this.Period,!0)||tt.IsSecondPeriod(this.Period)||tt.IsMilliSecondPeriod(this.Period))&&f.push({Name:"Time",Data:u}),f.push({Name:"Open",Data:r},{Name:"High",Data:n},{Name:"Low",Data:o},{Name:"Close",Data:h},{Name:"Vol",Data:s},{Name:"Amount",Data:l}),f},this.ExportMinuteData=function(t){if(!we.IsNonEmptyArray(this.Data))return null;var e=[],a=[],i=[],r=[],n=[],o=[],s=[],l=[],h=[],u=[],C=0,c=this.Data.length-1;t&&t.Start&&t.End&&we.IsNumber(t.Start.Index)&&we.IsNumber(t.End.Index)&&(C=t.Start.Index,c=t.End.Index);for(var f=C;f<=c&&f<this.Data.length;++f){var d=this.Data[f];e[f]=d.Date,a[f]=d.Open,i[f]=d.High,r[f]=d.Low,s[f]=d.Close,n[f]=d.Vol,o[f]=d.Amount,l[f]=d.Time,u[f]=d.AvPrice,h[f]=d.Position}var D=[{Name:"Open",Data:a},{Name:"High",Data:i},{Name:"Low",Data:r},{Name:"Close",Data:s},{Name:"Vol",Data:n},{Name:"Amount",Data:o},{Name:"AvPrice",Data:u},{Name:"Position",Data:h}];return t&&t.IsOverlay?D:(D.splice(0,0,{Name:"Date",Data:e},{Name:"Time",Data:l}),D)}}function et(){this.ChartPaint,this.Data,this.Type=0}function at(t,e,a,i){this.X=t,this.Y=e,this.Width=a,this.Height=i}function it(){this.DataMap=new Vn.default([["ChartKLine",{Create:function(t){return new nt}}],["ChartMinuteVolumBar",{Create:function(t){return new ut}}],["ChartMinutePriceLine",{Create:function(t){return new At}}]]),this.Create=function(t,e){return this.DataMap.has(t)?this.DataMap.get(t).Create(e):(Xn.Warn("[ChartPaintFactory::Create] can't find class="+t+"."),null)},this.Add=function(t,e){this.DataMap.set(t,{Create:e.Create})}}function rt(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="IChartPainting",this.Data=new tt,this.Script,this.NotSupportMessage=null,this.MessageFont=So.Index.NotSupport.Font,this.MessageColor=So.Index.NotSupport.TextColor,this.IsDrawFirst=!1,this.IsShow=!0,this.IsVisible=!0,this.GetEventCallback,this.SelectedLineWidth=So.SelectedChart.LineWidth,this.SelectedLineColor=So.SelectedChart.LineColor,this.SelectedRadius=So.SelectedChart.Radius,this.SelectedPointMinSpace=So.SelectedChart.MinSpace,this.SelectedBGColor=So.SelectedChart.BGColor,this.DrawSelectedStatus,this.PtInChart,this.IsFullRangeMaxMin=!1,this.IsExcludeYValue=!1,this.Draw=function(){},this.GetBorder=function(){return this.ChartFrame.IsHScreen?this.ChartBorder.GetHScreenBorder():this.ChartBorder.GetBorder()},this.ClipClient=function(t){if(1==t)var e=this.ChartBorder.GetLeftEx(),a=this.ChartBorder.GetRightEx(),i=this.ChartBorder.GetTop(),r=this.ChartBorder.GetBottom();else var e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRight(),i=this.ChartBorder.GetTopEx(),r=this.ChartBorder.GetBottomEx();this.Canvas.beginPath(),this.Canvas.rect(e,i,a-e,r-i),this.Canvas.clip()},this.GetYFromData=function(t,e){return this.ChartFrame.GetYFromData(t,e)},this.IsMinuteFrame=function(){return"MinuteFrame"==this.ChartFrame.ClassName||"MinuteHScreenFrame"==this.ChartFrame.ClassName||"OverlayMinuteFrame"==this.ChartFrame.ClassName||"OverlayMinuteHScreenFrame"==this.ChartFrame.ClassName},this.DrawNotSupportmessage=function(){this.Canvas.font=this.MessageFont,this.Canvas.fillStyle=this.MessageColor;var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetWidth(),a=this.ChartBorder.GetTopEx(),i=this.ChartBorder.GetHeightEx(),r=t+e/2,n=a+i/2;this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillText(this.NotSupportMessage,r,n)},this.GetTooltipData=function(t,e,a){return!1},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset;this.ChartFrame.GlobalOption&&this.ChartFrame.GlobalOption.IsValueFullRange&&(e=0,t=this.Data.Data.length);var a={};if(a.Min=null,a.Max=null,!this.Data||!this.Data.Data)return a;for(var i=e,r=0;i<this.Data.Data.length&&r<t;++i,++r){var n=this.Data.Data[i];null==n||isNaN(n)||(null==a.Max&&(a.Max=n),null==a.Min&&(a.Min=n),a.Max<n&&(a.Max=n),a.Min>n&&(a.Min=n))}return a},this.GetDynamicFont=function(t,e,a,i,r,n){var o=C();if(a*=o,i*=o,a==i){var s=a.toFixed(0)+"px "+n;return s}var l=t+e;r&&(0==r.Type?r.Value>0&&(l=t*r.Value):1==r.Type?r.Value>0&&(l=(t+e)*r.Value):2==r.Type&&we.IsNumber(r.Value)&&(l=t+e+2*r.Value*o)),l<i?l=i:l>a&&(l=a);var s=l.toFixed(0)+"px "+n;return s},this.GetLockRect=function(){return this.ChartFrame.GetLockRect()},this.SetFillStyle=function(t,e,a,i,r){if(Array.isArray(t)){for(var n=this.Canvas.createLinearGradient(e,a,i,r),o=1/(t.length-1),s=0;s<t.length;++s){var l=s*o;n.addColorStop(l,t[s])}this.Canvas.fillStyle=n}else this.Canvas.fillStyle=t},this.GetDynamicIconSize=function(t,e,a,i,r){var n=C();if(a*=n,i*=n,a==i)return a;var o=t+e-2*n;return r&&(0==r.Type?r.Value>0&&(o=t*r.Value):1==r.Type?r.Value>0&&(o=(t+e)*r.Value):2==r.Type&&we.IsNumber(r.Value)&&(o=t+e+2*r.Value*n)),o<i?o=i:o>a&&(o=a),o},this.GetFontHeight=function(t){return c(this.Canvas,t,"æ")},this.DrawLinePoint=function(t){var e=!0===this.ChartFrame.IsHScreen;if(!e&&this.IsShow){var a=this.IsMinuteFrame(),i=this.ChartFrame.DataWidth,r=this.ChartFrame.DistanceWidth,n=this.ChartFrame.XPointCount;if(e)var o=this.ChartBorder.GetHScreenBorder(),s=o.BottomEx,l=o.TopEx+r/2+So.FrameLeftMargin;else var o=this.ChartBorder.GetBorder(),l=o.LeftEx+r/2+So.FrameLeftMargin,s=o.RightEx;var h=this.GetLockRect();h&&(s=e?h.Top:h.Left);var u=C();this.Canvas.save(),this.ClipClient(e),this.Canvas.lineWidth=this.SelectedLineWidth*u,this.Canvas.strokeStyle=this.SelectedLineColor,this.SelectedBGColor&&(this.Canvas.fillStyle=this.SelectedBGColor);var c=this.SelectedRadius,f=Math.ceil(this.SelectedPointMinSpace/(i+r));if(f<=0&&(f=1),a){var d=(o.Right-o.Left)/n;f=Math.ceil(this.SelectedPointMinSpace/d)}var D=0,m=null,p=null;t&&(t.KLineClose?D=1:t.MinuteVolBar?D=2:t.MinuteOverlayPrice?D=1==t.OverlayType?1:3:t.OverlayKLine?(D=4,m=this.GetFirstOpen()):t.StackedBar&&(D=5));for(var v=this.Data.DataOffset,g=0,T=0;v<this.Data.Data.length&&g<n;++v,++g,++T,l+=i+r){var I=null;if(1==D){var S=this.Data.Data[v];we.IsNumber(S.Close)&&(I=S.Close)}else if(2==D){var S=this.Data.Data[v];we.IsNumber(S.Vol)&&(I=S.Vol)}else if(3==D){var x=this.Data.Data[v],b=this.MainData.Data[v];if(!x||!we.IsNumber(x.Close)||!we.IsNumber(x.YClose))continue;if(!b||!we.IsNumber(b.Close)||!we.IsNumber(b.YClose))continue;var y=x.Close,I=y/x.YClose*b.YClose}else if(4==D){var E=this.Data.Data[v];null==p&&(p=E.Open),I=E.Close/p*m}else if(5==D){var w=this.Data.Data[v];if(!we.IsNonEmptyArray(w))continue;for(var F=0,M=0,T=0;T<w.length;++T){var L=w[T];we.IsNumber(L)&&(0!=L&&(L>0?F+=L:L<0&&(M+=L)))}I=(F+M)/2}else I=this.Data.Data[v];if(null!=I&&!(T<f)){if(T=0,a)var N=this.ChartFrame.GetXFromIndex(g);else{var R=l,A=l+i;if(A>s)break;var N=R+(A-R)/2}var O=this.GetYFromData(I,!1);if(N>s)break;this.Canvas.beginPath(),this.Canvas.arc(N,O,c,0,360,!1),this.Canvas.closePath(),this.SelectedBGColor&&this.Canvas.fill(),this.Canvas.stroke()}}this.Canvas.restore()}},this.PtInLine=function(t,e,a){if(this.IsShow&&!this.ChartFrame.IsMinSize){var i=!0===this.ChartFrame.IsHScreen;if(!i){var r=this.IsMinuteFrame(),n=this.ChartFrame.DataWidth,o=this.ChartFrame.DistanceWidth,s=this.ChartFrame.XPointCount;if(i)var l=this.ChartBorder.GetHScreenBorder(),h=l.BottomEx,u=l.TopEx+o/2+So.FrameLeftMargin;else var l=this.ChartBorder.GetBorder(),u=l.LeftEx+o/2+So.FrameLeftMargin,h=l.RightEx;var C=this.GetLockRect();if(C&&(h=i?C.Top:C.Left),t<u||t>h)return null;if(e>l.BottomEx||e<l.TopEx)return null;var c={},f={},d=0;a&&(a.KLineClose?d=1:a.MinuteOverlayPrice&&(d=1==a.OverlayType?1:3));for(var D=this.Data.DataOffset,m=0;D<this.Data.Data.length&&m<s;++D,++m,u+=n+o){var p=null;if(1==d){var v=this.Data.Data[D];we.IsNumber(v.Close)&&(p=v.Close)}else if(3==d){var g=this.Data.Data[D],T=this.MainData.Data[D];if(!g||!we.IsNumber(g.Close)||!we.IsNumber(g.YClose))continue;if(!T||!we.IsNumber(T.Close)||!we.IsNumber(T.YClose))continue;var I=g.Close,p=I/g.YClose*T.YClose}else p=this.Data.Data[D];if(null!=p){if(r)var S=this.ChartFrame.GetXFromIndex(m);else{var x=u,b=u+n;if(b>h)break;var S=x+(b-x)/2}var y=this.GetYFromData(p,!1);if(!(S<t)){if(S==t){c.X=f.X=S,c.Y=f.Y=y;break}f.X=S,f.Y=y;break}if(c.X=S,c.Y=y,t>h)break}}if(!we.IsNumber(c.X)||!we.IsNumber(c.Y))return null;if(!we.IsNumber(f.X)||!we.IsNumber(f.Y))return null;if(t==c.X&&e==c.Y)return{Identify:this.Identify,Chart:this};if(t==f.X&&e==f.Y)return{Identify:this.Identify,Chart:this};return this.Canvas.beginPath(),c.X==f.X?(this.Canvas.moveTo(c.X-5,c.Y),this.Canvas.lineTo(c.X+5,c.Y),this.Canvas.lineTo(f.X+5,f.Y),this.Canvas.lineTo(f.X-5,f.Y)):(this.Canvas.moveTo(c.X,c.Y+5),this.Canvas.lineTo(c.X,c.Y-5),this.Canvas.lineTo(f.X,f.Y-5),this.Canvas.lineTo(f.X,f.Y+5)),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e)?{Identify:this.Identify,Chart:this}:null}}},this.PtInBar=function(t,e,a){if(!this.IsShow||this.ChartFrame.IsMinSize)return null;if(!0===this.ChartFrame.IsHScreen)return null;var i=this.ChartFrame.DataWidth,r=this.ChartFrame.DistanceWidth,n=this.ChartBorder.GetBorder(),o=n.LeftEx+r/2+So.FrameLeftMargin,s=n.RightEx,l=this.ChartFrame.XPointCount,h=this.GetLockRect();if(h&&(s=h.Left),t<o||t>s)return null;if(e>n.BottomEx||e<n.TopEx)return null;var u=this.IsMinuteFrame(),C=this.ChartFrame.GetYFromData(0),c=null,f=!1,d=!1;a&&(a.BarWidth>0&&(c=a.BarWidth),1==a.MinuteVolBar?(f=!0,c=4):1==a.StackedBar&&(d=!0));for(var D=this.Data.DataOffset,m=0;D<this.Data.Data.length&&m<l;++D,++m,o+=i+r){var p=this.Data.Data[D];if(null!=p){if(u)var v=this.ChartFrame.GetXFromIndex(m),g=v-c/2,T=g+c;else{var g=o,T=o+i;if(T>s)break}if(f){if(!we.IsNumber(p.Vol))continue;var I=this.ChartFrame.GetYFromData(p.Vol),S=I,x=C}else if(d){var b=0,y=0;if(!we.IsNonEmptyArray(p))continue;for(var E=0;E<p.length;++E){var w=p[E];we.IsNumber(w)&&(0!=w&&(w>0?b+=w:w<0&&(y+=w)))}var S=this.ChartFrame.GetYFromData(b),x=this.ChartFrame.GetYFromData(y)}else var I=this.ChartFrame.GetYFromData(p),S=I,x=C;S>x&&(S=C,x=I);var F=g,M=T;if(c>0&&(F=g+(T-g)/2-c/2,M=F+c),t>=F&&t<=M&&e>=S&&e<=x)return{Identify:this.Identify,Chart:this};if(T>t)break}}return null},this.PtInKBar=function(t,e,a){if(!this.IsShow||this.ChartFrame.IsMinSize)return null;var i=!0===this.ChartFrame.IsHScreen;if(i)return null;var r=this.ChartFrame.DataWidth,n=this.ChartFrame.DistanceWidth,o=this.ChartBorder.GetBorder(),s=o.LeftEx+n/2+So.FrameLeftMargin,l=o.RightEx,h=this.ChartFrame.XPointCount;if(i){var o=this.ChartBorder.GetHScreenBorder();s=o.TopEx+n/2+So.FrameLeftMargin,l=o.BottomEx}if(t<s||t>l)return null;if(e>o.BottomEx||e<o.TopEx)return null;var u=null,C=0,c=null;a&&a.OverlayKLine&&(C=1,c=this.GetFirstOpen());for(var f=this.Data.DataOffset,d=0;f<this.Data.Data.length&&d<h;++f,++d,s+=r+n){var D=this.Data.Data[f];if(null!=D.Open&&null!=D.High&&null!=D.Low&&null!=D.Close){null==u&&(u=D.Open);var m=s,p=s+r;if(p>l)break;if(t>=m&&t<=p){if(1==C)var v=this.GetYFromData(D.Low/u*c,!1),g=this.GetYFromData(D.High/u*c,!1);else var v=this.GetYFromData(D.Low,!1),g=this.GetYFromData(D.High,!1);if(e<=v&&e>=g)return{Identify:this.Identify,Chart:this}}if(p>t)break}}},this.IsShowIndexTitleOnly=function(){return!!(this.ChartFrame&&this.ChartFrame.ChartBorder&&this.ChartFrame.ChartBorder.IsShowTitleOnly)},this.IsHideScriptIndex=function(){return!(!this.Script||0!=this.Script.IsShow)},this.ExportArrayData=function(t,e){var a=this.Data.ExportArrayData(t,e);return[{Name:this.Name,Data:a}]},this.ExportBoolData=function(t,e){var a=this.Data.ExportBoolData(t,e);return[{Name:this.Name,Data:a}]},this.GetArrayItemData=function(t){if(!t)return null;if(!we.IsNumber(t.Index))return null;if(!this.Data||!we.IsNonEmptyArray(this.Data.Data))return null;var e=t.Index;return e<0||e>=this.Data.Data.length?null:[{Value:this.Data.Data[e],Color:this.Color,Name:this.Name}]}}function nt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartKLine",this.Symbol,this.DrawType=0,this.CloseLineColor=So.CloseLineColor,this.CloseLineAreaColor=So.CloseLineAreaColor,this.CloseLineWidth=So.CloseLineWidth,this.UpColor=So.UpBarColor,this.DownColor=So.DownBarColor,this.UnchagneColor=So.UnchagneBarColor,this.ColorData,this.TradeData,this.TradeIcon=So.KLine.TradeIcon,this.TooltipRect=[],this.InfoTooltipRect=[],this.TradeIconTooltipRect=[],this.IsShowMaxMinPrice=!0,this.IsShowKTooltip=!0,this.TextFont=So.KLine.MaxMin.Font,this.TextColor=So.KLine.MaxMin.Color,this.InfoData,this.InfoPosition=0,this.PtMax,this.PtMin,this.TickSymbol="â³",this.TickFontName="arial",this.Period,this.ShowRange={},this.CustomKLine,this.DrawKRange={Start:null,End:null},this.IsThinAKBar=!0,this.OneLimitBarType=0,this.HighLowBarColor=So.HighLowBarColor,this.HighLowTextConfig={FontName:So.HighLowText.FontName,MaxSize:So.HighLowText.MaxSize,MinSize:So.HighLowText.MinSize,Color:So.HighLowText.Color,MaxText:So.HighLowText.MaxText},this.HLCAreaConfig={HighLineColor:So.HLCArea.HighLineColor,LowLineColor:So.HLCArea.LowLineColor,CloseLineColor:So.HLCArea.CloseLineColor,LineWidth:So.HLCArea.LineWidth,UpAreaColor:So.HLCArea.UpAreaColor,DownAreaColor:So.HLCArea.DownAreaColor},this.VirtualBarConfig={Color:So.VirtualKLine.Color,LineDash:So.VirtualKLine.LineDash},this.FFKChart,this.OrderFlow={UpColor:{BG:So.OrderFlow.UpColor.BG,Border:So.OrderFlow.UpColor.Border},DownColor:{BG:So.OrderFlow.DownColor.BG,Border:So.OrderFlow.DownColor.Border},UnchagneColor:{BG:So.OrderFlow.UnchagneColor.BG,Border:So.OrderFlow.UnchagneColor.Border},Text:{Color:So.OrderFlow.Text.Color,Family:So.OrderFlow.Text.Family,FontMaxSize:So.OrderFlow.Text.FontMaxSize,MaxValue:So.OrderFlow.Text.MaxValue},Line:{UpDownColor:So.OrderFlow.Line.UpDownColor,MiddleColor:So.OrderFlow.Line.MiddleColor},POCGBColor:So.OrderFlow.POCGBColor,ShowType:0,AskBarColor:So.OrderFlow.AskBarColor,BidBarColor:So.OrderFlow.BidBarColor,AlwaysShowOrderText:So.OrderFlow.AlwaysShowOrderText,IsShowAskText:!0,IsShowAskBar:!1,IsShowBidText:!0,IsShowBidBar:!1,IsShowPOCBG:!0},this.OrderFlow_Style2={BarWidth:So.OrderFlow_Style2.BarWidth,UpColor:So.OrderFlow_Style2.UpColor,DownColor:So.OrderFlow_Style2.DownColor,UnchagneColor:So.OrderFlow_Style2.UnchagneColor},this.OrderFlow_Style3={BarWidth:So.OrderFlow_Style3.BarWidth,UpColor:So.OrderFlow_Style3.UpColor,DownColor:So.OrderFlow_Style3.DownColor,UnchagneColor:So.OrderFlow_Style3.UnchagneColor},this.OrderFlow_Style4={UpColor:So.OrderFlow_Style4.UpColor,DownColor:So.OrderFlow_Style4.DownColor,UnchagneColor:So.OrderFlow_Style4.UnchagneColor,KBarType:1,VolBarSpace:So.OrderFlow_Style4.VolBarSpace,KBarWidth:So.OrderFlow_Style4.KBarWidth,LeftMargin:So.OrderFlow_Style4.LeftMargin,RightMargin:So.OrderFlow_Style4.RightMargin},this.OrderFlow_Style5={AskBarColor:So.OrderFlow_Style5.AskBarColor,BidBarColor:So.OrderFlow_Style5.BidBarColor,LeftMargin:So.OrderFlow_Style5.LeftMargin,RightMargin:So.OrderFlow_Style5.RightMargin},this.IsShowOrderText=!1,this.AryOrderFlowBorder=[],this.ChartHeatMap,this.PriceGap={Enable:!1,Count:1},this.PriceGapStyple={Line:{Color:So.PriceGapStyple.Line.Color},Text:{Color:So.PriceGapStyple.Text.Color,Font:So.PriceGapStyple.Text.Font}},this.AryPriceGapCache=[],this.ReloadResource=function(t){this.TextFont=So.KLine.MaxMin.Font,this.TextColor=So.KLine.MaxMin.Color,this.CloseLineColor=So.CloseLineColor,this.CloseLineAreaColor=So.CloseLineAreaColor,this.CloseLineWidth=So.CloseLineWidth,this.UpColor=So.UpBarColor,this.DownColor=So.DownBarColor,this.UnchagneColor=So.UnchagneBarColor,this.HighLowBarColor=So.HighLowBarColor,this.OrderFlow.UpColor={BG:So.OrderFlow.UpColor.BG,Border:So.OrderFlow.UpColor.Border},this.OrderFlow.DownColor={BG:So.OrderFlow.DownColor.BG,Border:So.OrderFlow.DownColor.Border},this.OrderFlow.UnchagneColor={BG:So.OrderFlow.UnchagneColor.BG,Border:So.OrderFlow.UnchagneColor.Border},this.OrderFlow.Text={Color:So.OrderFlow.Text.Color,Family:So.OrderFlow.Text.Family,FontMaxSize:So.OrderFlow.Text.FontMaxSize,MaxValue:So.OrderFlow.Text.MaxValue},this.OrderFlow.Line={UpDownColor:So.OrderFlow.Line.UpDownColor,MiddleColor:So.OrderFlow.Line.MiddleColor}},this.ClearCustomKLine=function(){this.CustomKLine=null},this.GetCustomKLine=function(t){if(!this.CustomKLine)return null;if(!t)return null;var e=1e6*t.Date;return we.IsNumber(t.Time)&&(e+=t.Time),this.CustomKLine.has(e)?this.CustomKLine.get(e):null},this.DrawHeatMap=function(){this.ChartHeatMap&&(this.ChartHeatMap.Canvas=this.Canvas,this.ChartHeatMap.ChartBorder=this.ChartBorder,this.ChartHeatMap.ChartFrame=this.ChartFrame,this.ChartHeatMap.Data=this.Data,this.ChartHeatMap.Draw())},this.ClearHeatMap=function(){this.ChartHeatMap=null},this.CreateHeatMap=function(){this.ChartHeatMap=new st},this.DrawAKLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=this.ChartBorder.GetHScreenBorder(),n=r.TopEx+a/2+So.FrameLeftMargin,o=r.BottomEx;else var r=this.ChartBorder.GetBorder(),n=r.LeftEx+a/2+So.FrameLeftMargin,o=r.RightEx;var s=this.UpColor,l=this.DownColor,h=this.UnchagneColor,u={X:null,Y:null,Value:null,Align:"left"},C={X:null,Y:null,Value:null,Align:"left"};this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset;var c=null;this.GetEventCallback&&(c=this.GetEventCallback(Kn.ON_CUSTOM_UNCHANGE_KLINE_COLOR));for(var f=null,d=this.Data.DataOffset,D=0;d<this.Data.Data.length&&D<i;++d,++D,n+=e+a,++this.ShowRange.DataCount){var m=this.Data.Data[d];if(this.ShowRange.End=d,null!=m.Open&&null!=m.High&&null!=m.Low&&null!=m.Close){var v=n,g=n+e;if(g>o)break;var T=v+(g-v)/2,I=this.GetYFromData(m.Low,!1),S=this.GetYFromData(m.High,!1),x=this.GetYFromData(m.Open,!1),b=this.GetYFromData(m.Close,!1);this.DrawKRange.End=d;var y={Data:m,Coordinate:{X:T,Low:I,High:S,Close:b,Open:x,Left:v,Right:g}};if((null==u.Value||u.Value<m.High)&&(u.X=T,u.Y=S,u.Value=m.High,u.Align=D<i/2?"left":"right"),(null==C.Value||C.Value>m.Low)&&(C.X=T,C.Y=I,C.Value=m.Low,C.Align=D<i/2?"left":"right"),h=this.UnchagneColor,m.Open<m.Close)this.Canvas.strokeStyle=this.UpColor;else if(m.Open>m.Close)this.Canvas.strokeStyle=this.DownColor;else{if(c&&c.Callback){var E={KItem:m,DataIndex:d,DefaultColor:h,BarColor:null};c.Callback(c,E,this),E.BarColor&&(h=E.BarColor)}this.Canvas.strokeStyle=h}if(this.ColorData&&(s=l=h=d<this.ColorData.length&&this.ColorData[d]>0?this.UpColor:this.DownColor),0==this.IsThinAKBar&&e>=9){var w={YLow:I,YHigh:S,YOpen:x,YClose:b,X:T,Left:v,Right:g},F={UpColor:s,DownColor:l,UnchangeColor:h};this.DrawAKBar(m,e,t,w,F)}else this.Canvas.beginPath(),t?m.High==m.Low&&e<4?(this.Canvas.moveTo(S,p(T)),this.Canvas.lineTo(I-1,p(T))):(this.Canvas.moveTo(S,p(T)),this.Canvas.lineTo(I,p(T))):m.High==m.Low&&e<4?(this.Canvas.moveTo(p(T),S),this.Canvas.lineTo(p(T),I+1)):(this.Canvas.moveTo(p(T),S),this.Canvas.lineTo(p(T),I)),this.Canvas.stroke(),e>=4&&(this.Canvas.beginPath(),t?(this.Canvas.moveTo(p(x),v),this.Canvas.lineTo(p(x),T)):(this.Canvas.moveTo(v,p(x)),this.Canvas.lineTo(T,p(x))),this.Canvas.stroke(),this.Canvas.beginPath(),t?(this.Canvas.moveTo(p(b),g),this.Canvas.lineTo(p(b),T)):(this.Canvas.moveTo(g,p(b)),this.Canvas.lineTo(T,p(b))),this.Canvas.stroke());if(0==this.Data.DataType){var M={Xleft:v,XRight:g,YMax:S,XCenter:T,YMin:I,DayData:m,Index:D};this.DrawInfo(M)}if(this.PriceGap.Enable&&f){this.CheckPriceGap(y);var L=this.IsPriceGap(y,f);L>0&&this.AryPriceGapCache.push({Data:[f,y],Type:L})}f=y}}this.PtMax=u,this.PtMin=C},this.DrawAKBar=function(t,e,a,i,r){var n=e/3,o=g(i.Left),s=[o,g(o+n),g(o+2*n),g(o+3*n)],l=i.YHigh,h=i.YLow,u=i.YOpen,C=i.YClose;if(t.Open<t.Close?(this.Canvas.strokeStyle=r.UpColor,this.Canvas.fillStyle=r.UpColor):t.Open>t.Close?(this.Canvas.strokeStyle=r.DownColor,this.Canvas.fillStyle=r.DownColor):(this.Canvas.strokeStyle=r.UnchangeColor,this.Canvas.fillStyle=r.UnchangeColor),a)if(t.High==t.Low){var c=l-n/2;this.Canvas.fillRect(c,s[1],n,s[2]-s[1])}else this.Canvas.fillRect(l,s[1],h-l,s[2]-s[1]);else if(t.High==t.Low){var c=l-n/2;this.Canvas.fillRect(s[1],c,s[2]-s[1],n)}else this.Canvas.fillRect(s[1],l,s[2]-s[1],h-l);var c=u-n/2;a?this.Canvas.fillRect(c,s[0],n,s[1]-s[0]):this.Canvas.fillRect(s[0],c,s[1]-s[0],n);var c=C-n/2;a?this.Canvas.fillRect(c,s[2],n,s[3]-s[2]):this.Canvas.fillRect(s[2],c,s[3]-s[2],n)},this.DrawCloseArea=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=this.ChartBorder.GetHScreenBorder(),n=r.TopEx+a/2+So.FrameLeftMargin,o=r.BottomEx,s=r.TopEx;else var r=this.ChartBorder.GetBorder(),n=r.LeftEx+a/2+So.FrameLeftMargin,o=r.RightEx,s=r.LeftEx;var l=!0,h=null;this.Canvas.beginPath(),this.Canvas.strokeStyle=this.CloseLineColor,we.IsNumber(this.CloseLineWidth)&&(this.Canvas.lineWidth=this.CloseLineWidth);var u=null;if(this.Data.DataOffset>0){var C=this.Data.Data[this.Data.DataOffset-1];if(C&&we.IsNumber(C.Close)){var c=s,f=this.GetYFromData(C.Close,!1);t?(this.Canvas.moveTo(f,c),h={X:f,Y:c}):(this.Canvas.moveTo(c,f),h={X:c,Y:f}),l=!1}}this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset;for(var d=null,D=this.Data.DataOffset,m=0;D<this.Data.Data.length&&m<i;++D,++m,n+=e+a,++this.ShowRange.DataCount){var C=this.Data.Data[D];if(this.ShowRange.End=D,null!=C.Open&&null!=C.High&&null!=C.Low&&null!=C.Close){var p=n,v=n+e;if(v>o)break;var c=p+(v-p)/2,f=this.GetYFromData(C.Close,!1);if(this.DrawKRange.End=D,l?(t?(this.Canvas.moveTo(f,c),h={X:f,Y:c}):(this.Canvas.moveTo(c,f),h={X:c,Y:f}),l=!1):t?this.Canvas.lineTo(f,c):this.Canvas.lineTo(c,f),D==this.Data.Data.length-1&&(u={X:c,Y:f,XLeft:p,XRight:v,KItem:C,ChartRight:o}),this.PriceGap.Enable){var g=this.GetYFromData(C.Low,!1),T=this.GetYFromData(C.High,!1),I=this.GetYFromData(C.Open,!1),S={Data:C,Coordinate:{X:c,Low:g,High:T,Close:f,Open:I,Left:p,Right:v}};if(d){this.CheckPriceGap(S);var x=this.IsPriceGap(S,d);x>0&&this.AryPriceGapCache.push({Data:[d,S],Type:x})}d=S}}}if(this.DrawLastPointEvent(u),!l){if(this.Canvas.stroke(),t?(this.Canvas.lineTo(r.Left,c),this.Canvas.lineTo(r.Left,h.Y)):(this.Canvas.lineTo(c,r.Bottom),this.Canvas.lineTo(h.X,r.Bottom)),this.Canvas.closePath(),Array.isArray(this.CloseLineAreaColor))if(t){var b=this.Canvas.createLinearGradient(this.ChartBorder.GetRightEx(),this.ChartBorder.GetTop(),this.ChartBorder.GetLeft(),this.ChartBorder.GetTop());b.addColorStop(0,this.CloseLineAreaColor[0]),b.addColorStop(1,this.CloseLineAreaColor[1]),this.Canvas.fillStyle=b}else{var y=this.Canvas.createLinearGradient(h.X,this.ChartBorder.GetTopEx(),h.X,this.ChartBorder.GetBottom());y.addColorStop(0,this.CloseLineAreaColor[0]),y.addColorStop(1,this.CloseLineAreaColor[1]),this.Canvas.fillStyle=y}else this.Canvas.fillStyle=this.CloseLineAreaColor;this.Canvas.fill()}},this.DrawCloseLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=this.ChartBorder.GetHScreenBorder(),n=r.TopEx+a/2+So.FrameLeftMargin,o=r.BottomEx;else var r=this.ChartBorder.GetBorder(),n=r.LeftEx+a/2+So.FrameLeftMargin,o=r.RightEx;var s=!0;this.Canvas.beginPath(),this.Canvas.strokeStyle=this.CloseLineColor,we.IsNumber(this.CloseLineWidth)&&(this.Canvas.lineWidth=this.CloseLineWidth),this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset;for(var l=null,h=this.Data.DataOffset,u=0;h<this.Data.Data.length&&u<i;++h,++u,n+=e+a,++this.ShowRange.DataCount){var C=this.Data.Data[h];if(this.ShowRange.End=h,null!=C.Open&&null!=C.High&&null!=C.Low&&null!=C.Close){var c=n,f=n+e;if(f>o)break;var d=c+(f-c)/2,D=this.GetYFromData(C.Close,!1);if(this.DrawKRange.End=h,s?(t?this.Canvas.moveTo(D,d):this.Canvas.moveTo(d,D),s=!1):t?this.Canvas.lineTo(D,d):this.Canvas.lineTo(d,D),this.PriceGap.Enable){var m=this.GetYFromData(C.Low,!1),p=this.GetYFromData(C.High,!1),v=this.GetYFromData(C.Open,!1),g={Data:C,Coordinate:{X:d,Low:m,High:p,Close:D,Open:v,Left:c,Right:f}};if(l){this.CheckPriceGap(g);var T=this.IsPriceGap(g,l);T>0&&this.AryPriceGapCache.push({Data:[l,g],Type:T})}l=g}}}0==s&&this.Canvas.stroke()},this.DrawKBar=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetBorder(),r=i.LeftEx+a/2+So.FrameLeftMargin,n=i.RightEx,o=this.ChartFrame.XPointCount;if(t){var i=this.ChartBorder.GetHScreenBorder();r=i.TopEx+a/2+So.FrameLeftMargin,n=i.BottomEx}var s={X:null,Y:null,Value:null,Align:"left"},l={X:null,Y:null,Value:null,Align:"left"},h=this.UpColor,u=this.DownColor,C=this.UnchagneColor;this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=o;var c=null;this.DrawKRange.Start=this.Data.DataOffset;var f=null;this.GetEventCallback&&(f=this.GetEventCallback(Kn.ON_CUSTOM_UNCHANGE_KLINE_COLOR));for(var d=null,D=this.Data.DataOffset,m=0;D<this.Data.Data.length&&m<o;++D,++m,r+=e+a,++this.ShowRange.DataCount){var p=this.Data.Data[D];if(this.ShowRange.End=D,null!=p.Open&&null!=p.High&&null!=p.Low&&null!=p.Close){var v=r,g=r+e;if(g>n)break;var T=v+(g-v)/2,I=this.GetYFromData(p.Low,!1),S=this.GetYFromData(p.High,!1),x=this.GetYFromData(p.Open,!1),b=this.GetYFromData(p.Close,!1),y=S,E={Data:p,Coordinate:{X:T,Low:I,High:S,Close:b,Open:x,Left:v,Right:g}};this.DrawKRange.End=D,(null==s.Value||s.Value<p.High)&&(s.X=T,s.Y=S,s.Value=p.High,s.Align=m<o/2?"left":"right"),(null==l.Value||l.Value>p.Low)&&(l.X=T,l.Y=I,l.Value=p.Low,l.Align=m<o/2?"left":"right"),this.ColorData&&(h=u=C=D<this.ColorData.length&&this.ColorData[D]>0?this.UpColor:this.DownColor);var w=this.GetCustomKLine(p);if(p.IsNonTrade)this.DrawVirtualBar(p,e,T,y,v,g,I,S,x,b,t);else if(w){var F=w.Color;F||(F=p.Open<p.Close?h:p.Open>p.Close?u:C);var M=this.DrawType;we.IsNumber(w.DrawType)&&(M=w.DrawType),this.DrawKBar_Custom(p,e,F,M,w,T,y,v,g,I,S,x,b,i,t)}else if(9==this.DrawType&&p.ColorData)this.DrawColorKBar(p,p.ColorData,e,T,y,v,g,I,S,x,b,t);else if(p.Open<p.Close)this.DrawKBar_Up(p,e,h,this.DrawType,T,y,v,g,I,S,x,b,t);else if(p.Open>p.Close)this.DrawKBar_Down(p,e,u,this.DrawType,T,y,v,g,I,S,x,b,t);else{var F=C;if(f&&f.Callback){var L={KItem:p,DataIndex:D,DefaultColor:F,BarColor:null};f.Callback(f,L,this),L.BarColor&&(F=L.BarColor)}this.DrawKBar_Unchagne(p,e,F,this.DrawType,T,y,v,g,I,S,x,b,t)}if(this.IsShowKTooltip&&!t){var N=Math.min(x,b),R=Math.max(x,b);Math.abs(x-b)<5&&(N=Math.min(S,N-5),R=Math.max(I,R+5)),p.IsNonTrade&&(N=S,R=I);var A=new at(v,N,e,R-N);this.TooltipRect.push([D,A])}if(0==this.Data.DataType||1==this.Data.DataType){var O={Xleft:v,XRight:g,XCenter:T,YMax:S,YMin:I,DayData:p,Index:m};this.DrawInfo(O)}if(D==this.Data.Data.length-1&&(c={X:T,Y:b,XLeft:v,XRight:g,KItem:p,ChartRight:n}),this.PriceGap.Enable&&d){this.CheckPriceGap(E);var P=this.IsPriceGap(E,d);P>0&&this.AryPriceGapCache.push({Data:[d,E],Type:P})}d=E}}this.DrawLastPointEvent(c),this.PtMax=s,this.PtMin=l},this.DrawKBar_Up=function(t,e,a,i,r,n,o,s,l,h,u,C,c){var f=3==i||6==i;if(e>=4){if(f&&e%2!=0&&(e-=1),this.Canvas.strokeStyle=a,t.High>t.Close){if(this.Canvas.beginPath(),c)this.Canvas.moveTo(p(n),p(r)),this.Canvas.lineTo(p(3==i?Math.max(C,u):C),p(r));else if(f){var d=o+e/2;this.Canvas.moveTo(p(d),p(n)),this.Canvas.lineTo(p(d),p(Math.min(C,u)))}else this.Canvas.moveTo(p(r),p(n)),this.Canvas.lineTo(p(r),p(C));this.Canvas.stroke(),n=C}else n=C;if(this.Canvas.fillStyle=a,c?Math.abs(u-n)<1?this.Canvas.fillRect(g(n),g(o),1,g(e)):f?(this.Canvas.beginPath(),this.Canvas.rect(p(n),p(o),g(u-n),g(e)),this.Canvas.stroke()):this.Canvas.fillRect(g(n),g(o),g(u-n),g(e)):Math.abs(u-n)<1?this.Canvas.fillRect(g(o),g(n),g(e),1):f?(this.Canvas.beginPath(),this.Canvas.rect(p(o),p(n),g(e),g(u-n)),this.Canvas.stroke()):this.Canvas.fillRect(g(o),g(Math.min(n,u)),g(e),g(Math.abs(u-n))),t.Open>t.Low){if(this.Canvas.beginPath(),c)this.Canvas.moveTo(p(3==i?Math.min(C,u):n),p(r)),this.Canvas.lineTo(p(l),p(r));else if(f){var d=o+e/2;this.Canvas.moveTo(p(d),p(Math.max(C,u))),this.Canvas.lineTo(p(d),p(l))}else this.Canvas.moveTo(p(r),p(n)),this.Canvas.lineTo(p(r),p(l));this.Canvas.stroke()}}else this.Canvas.beginPath(),c?(this.Canvas.moveTo(h,p(r)),this.Canvas.lineTo(l,p(r))):(this.Canvas.moveTo(p(r),h),this.Canvas.lineTo(p(r),l)),this.Canvas.strokeStyle=a,this.Canvas.stroke()},this.DrawKBar_Down=function(t,e,a,i,r,n,o,s,l,h,u,C,c){var f=6==i;if(e>=4){if(f&&e%2!=0&&(e-=1),this.Canvas.strokeStyle=a,t.High>t.Close){if(this.Canvas.beginPath(),c)this.Canvas.moveTo(p(n),p(r)),this.Canvas.lineTo(p(u),p(r));else if(f){var d=o+e/2;this.Canvas.moveTo(p(d),p(n)),this.Canvas.lineTo(p(d),p(Math.min(C,u)))}else this.Canvas.moveTo(p(r),p(n)),this.Canvas.lineTo(p(r),p(u));this.Canvas.stroke(),n=u}else n=u;if(this.Canvas.fillStyle=a,c?Math.abs(C-n)<1?this.Canvas.fillRect(g(n),g(o),1,g(e)):this.Canvas.fillRect(g(n),g(o),g(C-n),g(e)):Math.abs(C-n)<1?this.Canvas.fillRect(g(o),g(n),g(e),1):f?(this.Canvas.beginPath(),this.Canvas.rect(p(o),p(Math.min(n,C)),g(e),g(Math.abs(C-n))),this.Canvas.stroke()):this.Canvas.fillRect(g(o),g(Math.min(n,C)),g(e),g(Math.abs(C-n))),t.Open>t.Low){if(this.Canvas.beginPath(),c)this.Canvas.moveTo(p(n),p(r)),this.Canvas.lineTo(p(l),p(r));else if(f){var d=o+e/2;this.Canvas.moveTo(p(d),p(Math.max(C,u))),this.Canvas.lineTo(p(d),p(l))}else this.Canvas.moveTo(p(r),p(n)),this.Canvas.lineTo(p(r),p(l));this.Canvas.stroke()}}else this.Canvas.beginPath(),c?(this.Canvas.moveTo(h,p(r)),this.Canvas.lineTo(l,p(r))):(this.Canvas.moveTo(p(r),h),this.Canvas.lineTo(p(r),l)),this.Canvas.strokeStyle=a,this.Canvas.stroke()},this.DrawKBar_Unchagne=function(t,e,a,i,r,n,o,s,l,h,u,C,c){if(1===this.OneLimitBarType&&this.IsOneLimitBar(t)&&(a=this.GetOneLimitBarColor(t)),e>=4){if(e%2!=0&&(e-=1),this.Canvas.strokeStyle=a,this.Canvas.beginPath(),t.High>t.Close){if(c)this.Canvas.moveTo(n,p(r)),this.Canvas.lineTo(u,p(r));else{var f=p(o+e/2);this.Canvas.moveTo(f,n),this.Canvas.lineTo(f,u)}n=u}else n=u;if(c?(this.Canvas.moveTo(p(n),p(o)),this.Canvas.lineTo(p(n),p(s))):(this.Canvas.moveTo(p(o),p(n)),this.Canvas.lineTo(p(o+e),p(n))),t.Open>t.Low)if(c)this.Canvas.moveTo(p(n),p(r)),this.Canvas.lineTo(p(l),p(r));else{var f=p(o+e/2);this.Canvas.moveTo(f,p(n)),this.Canvas.lineTo(f,p(l))}this.Canvas.stroke()}else this.Canvas.beginPath(),c?t.High==t.Low?(this.Canvas.moveTo(h,p(r)),this.Canvas.lineTo(l-1,p(r))):(this.Canvas.moveTo(h,p(r)),this.Canvas.lineTo(l,p(r))):t.High==t.Low?(this.Canvas.moveTo(p(r),h),this.Canvas.lineTo(p(r),l+1)):(this.Canvas.moveTo(p(r),h),this.Canvas.lineTo(p(r),l)),this.Canvas.strokeStyle=a,this.Canvas.stroke()},this.IsOneLimitBar=function(t){return t.Open==t.Close&&t.High==t.Low&&t.Open==t.High},this.GetOneLimitBarColor=function(t){return t&&we.IsNumber(t.YClose)?t.Close>t.YClose?this.UpColor:t.Close<t.YClose?this.DownColor:this.UnchagneColor:this.UnchagneColor},this.DrawKBar_Custom=function(t,e,a,i,r,n,o,s,l,h,u,C,c,f,d){if(r.BGColor){this.Canvas.fillStyle=r.BGColor;var D=this.ChartFrame.DistanceWidth;if(d){var m=s-D/2,v=l+D/2,T=f.RightEx,I=f.LeftEx;this.Canvas.fillRect(g(I),g(m),g(T-I),g(v-m))}else{var S=s-D/2,x=l+D/2,b=f.TopEx,y=f.BottomEx;this.Canvas.fillRect(g(S),g(b),g(x-S),g(y-b))}}e>=4?(this.Canvas.strokeStyle=a,t.High>t.Close?(this.Canvas.beginPath(),d?(this.Canvas.moveTo(p(o),p(n)),this.Canvas.lineTo(p(3==i?Math.max(c,C):c),p(n))):(this.Canvas.moveTo(p(n),p(o)),this.Canvas.lineTo(p(n),p(3==i?Math.min(c,C):c))),this.Canvas.stroke(),o=c):o=c,this.Canvas.fillStyle=a,d?Math.abs(C-o)<1?this.Canvas.fillRect(g(o),g(s),1,g(e)):3==i?(this.Canvas.beginPath(),this.Canvas.rect(p(o),p(s),g(C-o),g(e)),this.Canvas.stroke()):this.Canvas.fillRect(g(o),g(s),g(C-o),g(e)):Math.abs(C-o)<1?this.Canvas.fillRect(g(s),g(o),g(e),1):3==i?(this.Canvas.beginPath(),this.Canvas.rect(p(s),p(o),g(e),g(C-o)),this.Canvas.stroke()):this.Canvas.fillRect(g(s),g(Math.min(o,C)),g(e),g(Math.abs(C-o))),t.Open>t.Low&&(this.Canvas.beginPath(),d?(this.Canvas.moveTo(p(3==i?Math.min(c,C):o),p(n)),this.Canvas.lineTo(p(h),p(n))):(this.Canvas.moveTo(p(n),p(3==i?Math.max(c,C):o)),this.Canvas.lineTo(p(n),p(h))),this.Canvas.stroke())):(this.Canvas.beginPath(),d?(this.Canvas.moveTo(u,p(n)),this.Canvas.lineTo(h,p(n))):(this.Canvas.moveTo(p(n),u),this.Canvas.lineTo(p(n),h)),this.Canvas.strokeStyle=a,this.Canvas.stroke())},this.DrawColorKBar=function(t,e,a,i,r,n,o,s,l,h,u,C){Math.abs(u-h)<1?this.DrawColorKBar_Line(t,e,a,i,r,n,o,s,l,h,u,C):e.Border||0===e.Type?this.DrawColorKBar_Border(t,e,a,i,r,n,o,s,l,h,u,C):this.DrawColorKBar_NoBorder(t,e,a,i,r,n,o,s,l,h,u,C)},this.DrawColorKBar_Border=function(t,e,a,i,r,n,o,s,l,h,u,C){if(a>=4){a%2!=0&&(a-=1);var c=Math.max(t.Close,t.Open),f=Math.min(t.Close,t.Open);if(C)var d=Math.max(u,h),D=Math.min(u,h);else var d=Math.min(u,h),D=Math.max(u,h);var m=Math.abs(u-h);if(t.High>c&&e.Line){if(this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),C)this.Canvas.moveTo(p(l),p(i)),this.Canvas.lineTo(p(d),p(i));else{var v=n+a/2;this.Canvas.moveTo(p(v),p(l)),this.Canvas.lineTo(p(v),p(d))}this.Canvas.stroke()}if(f>t.Low&&e.Line){if(this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),C)this.Canvas.moveTo(p(D),p(i)),this.Canvas.lineTo(p(s),p(i));else{var v=n+a/2;this.Canvas.moveTo(p(v),p(D)),this.Canvas.lineTo(p(v),p(s))}this.Canvas.stroke()}if(C){var T=new Path2D;T.rect(p(D),p(n),g(m),g(a))}else{var T=new Path2D;T.rect(p(n),p(d),g(a),g(m))}0==e.Type?(e.BarColor&&(this.Canvas.strokeStyle=e.BarColor,this.Canvas.stroke(T)),e.Border&&(this.Canvas.strokeStyle=e.Border.Color,this.Canvas.stroke(T))):1==e.Type&&(e.BarColor&&(this.Canvas.fillStyle=e.BarColor,this.Canvas.fill(T)),e.Border&&(this.Canvas.strokeStyle=e.Border.Color,this.Canvas.stroke(T)))}else this.DrawColorKBar_MinBar(t,e,a,i,r,n,o,s,l,h,u,C)},this.DrawColorKBar_NoBorder=function(t,e,a,i,r,n,o,s,l,h,u,C){if(a>=4){var c=Math.max(t.Close,t.Open),f=Math.min(t.Close,t.Open);if(C)var d=Math.max(u,h),D=Math.min(u,h);else var d=Math.min(u,h),D=Math.max(u,h);var m=Math.abs(u-h);if(t.High>c&&e.Line){if(this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),C)this.Canvas.moveTo(p(l),p(i)),this.Canvas.lineTo(p(d),p(i));else{var v=n+a/2;this.Canvas.moveTo(p(v),p(l)),this.Canvas.lineTo(p(v),p(d))}this.Canvas.stroke()}if(f>t.Low&&e.Line){if(this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),C)this.Canvas.moveTo(p(D),p(i)),this.Canvas.lineTo(p(s),p(i));else{var v=n+a/2;this.Canvas.moveTo(p(v),p(D)),this.Canvas.lineTo(p(v),p(s))}this.Canvas.stroke()}if(C){var T=new Path2D;T.rect(g(D),g(n),g(m),g(a))}else{var T=new Path2D;T.rect(g(n),g(d),g(a),g(m))}1==e.Type&&e.BarColor&&(this.Canvas.fillStyle=e.BarColor,this.Canvas.fill(T))}else this.DrawColorKBar_MinBar(t,e,a,i,r,n,o,s,l,h,u,C)},this.DrawColorKBar_MinBar=function(t,e,a,i,r,n,o,s,l,h,u,C){e.Line&&(this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),C?(this.Canvas.moveTo(p(l),p(i)),this.Canvas.lineTo(p(s),p(i))):(this.Canvas.moveTo(p(i),p(l)),this.Canvas.lineTo(p(i),p(s))),this.Canvas.stroke())},this.DrawColorKBar_Line=function(t,e,a,i,r,n,o,s,l,h,u,C){if(a>=4){e.Line&&(this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),C?(this.Canvas.moveTo(p(l),p(i)),this.Canvas.lineTo(p(s),p(i))):(this.Canvas.moveTo(p(i),p(l)),this.Canvas.lineTo(p(i),p(s))),this.Canvas.stroke());var c;0==e.Type?e.Border?c=e.Border.Color:e.BarColor&&(c=e.BarColor):1==e.Type&&(e.Border?c=e.Border.Color:e.BarColor&&(c=e.BarColor)),c&&(this.Canvas.strokeStyle=c,this.Canvas.beginPath(),C?(this.Canvas.moveTo(p(h),p(n)),this.Canvas.lineTo(p(h),p(o))):(this.Canvas.moveTo(p(n),p(h)),this.Canvas.lineTo(p(o),p(h))),this.Canvas.stroke())}else if(e.Line){this.Canvas.strokeStyle=e.Line.Color,this.Canvas.beginPath(),C?(this.Canvas.moveTo(p(l),p(i)),this.Canvas.lineTo(p(s),p(i))):(this.Canvas.moveTo(p(i),p(l)),this.Canvas.lineTo(p(i),p(s))),this.Canvas.stroke()}},this.DrawVirtualBar=function(t,e,a,i,r,n,o,s,l,h,u){var C=Math.min(s,o),c=Math.max(s,o);this.Canvas.strokeStyle=this.VirtualBarConfig.Color,this.Canvas.setLineDash(this.VirtualBarConfig.LineDash),u?e>=4?this.Canvas.strokeRect(p(C),p(r),g(c-C),g(e)):(this.Canvas.beginPath(),this.Canvas.moveTo(C,p(a)),this.Canvas.lineTo(c,p(a)),this.Canvas.stroke()):e>=4?this.Canvas.strokeRect(p(r),p(C),g(e),g(c-C)):(this.Canvas.beginPath(),this.Canvas.moveTo(p(a),C),this.Canvas.lineTo(p(a),c),this.Canvas.stroke()),this.Canvas.setLineDash([])},this.DrawRenkoCandle=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=this.ChartBorder.GetHScreenBorder(),n=r.TopEx+a/2+So.FrameLeftMargin,o=r.BottomEx;else var r=this.ChartBorder.GetBorder(),n=r.LeftEx+a/2+So.FrameLeftMargin,o=r.RightEx;var s={X:null,Y:null,Value:null,Align:"left"},l={X:null,Y:null,Value:null,Align:"left"};this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset;for(var h=this.Data.DataOffset,u=0;h<this.Data.Data.length&&u<i;++h,++u,n+=e+a,++this.ShowRange.DataCount){var C=this.Data.Data[h];if(this.ShowRange.End=h,null!=C.Open&&null!=C.High&&null!=C.Low&&null!=C.Close){var c=n,f=n+e;if(f>o)break;var d=c+(f-c)/2,D=this.GetYFromData(C.Low,!1),m=this.GetYFromData(C.High,!1);this.DrawKRange.End=h,(null==s.Value||s.Value<C.High)&&(s.X=d,s.Y=m,s.Value=C.High,s.Align=u<i/2?"left":"right"),(null==l.Value||l.Value>C.Low)&&(l.X=d,l.Y=D,l.Value=C.Low,l.Align=u<i/2?"left":"right"),C.YClose<C.Close?(this.Canvas.strokeStyle=this.UpColor,this.Canvas.fillStyle=this.UpColor):C.YClose>C.Close&&(this.Canvas.strokeStyle=this.DownColor,this.Canvas.fillStyle=this.DownColor),e>=4?t?this.Canvas.fillRect(g(D),g(c),g(Math.abs(D-m)),g(e)):this.Canvas.fillRect(g(c),g(m),g(e),g(Math.abs(D-m))):(this.Canvas.beginPath(),t?(this.Canvas.moveTo(m,p(d)),this.Canvas.lineTo(D,p(d))):(this.Canvas.moveTo(p(d),m),this.Canvas.lineTo(p(d),D)),this.Canvas.stroke())}}this.PtMax=s,this.PtMin=l},this.DrawLineBreak=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount,r=a/2;if(t)var n=this.ChartBorder.GetHScreenBorder(),o=n.TopEx+a/2+So.FrameLeftMargin-r,s=n.BottomEx;else var n=this.ChartBorder.GetBorder(),o=n.LeftEx+a/2+So.FrameLeftMargin-r,s=n.RightEx;var l={X:null,Y:null,Value:null,Align:"left"},h={X:null,Y:null,Value:null,Align:"left"};this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset;for(var u=this.Data.DataOffset,C=0;u<this.Data.Data.length&&C<i;++u,++C,o+=e+a,++this.ShowRange.DataCount){var c=this.Data.Data[u];if(this.ShowRange.End=u,null!=c.Open&&null!=c.High&&null!=c.Low&&null!=c.Close){var f=o,d=o+e+a;if(d>s)break;var D=f+(d-f)/2,m=this.GetYFromData(c.Low,!1),v=this.GetYFromData(c.High,!1);this.DrawKRange.End=u,(null==l.Value||l.Value<c.High)&&(l.X=D,l.Y=v,l.Value=c.High,l.Align=C<i/2?"left":"right"),(null==h.Value||h.Value>c.Low)&&(h.X=D,h.Y=m,h.Value=c.Low,h.Align=C<i/2?"left":"right"),c.YClose<c.Close?(this.Canvas.strokeStyle=this.UpColor,this.Canvas.fillStyle=this.UpColor):c.YClose>c.Close&&(this.Canvas.strokeStyle=this.DownColor,this.Canvas.fillStyle=this.DownColor),e>=4?t?this.Canvas.fillRect(g(m),g(f),g(Math.abs(m-v)),g(e+a)):this.Canvas.fillRect(g(f),g(v),g(e+a),g(Math.abs(m-v))):(this.Canvas.beginPath(),t?(this.Canvas.moveTo(v,p(D)),this.Canvas.lineTo(m,p(D))):(this.Canvas.moveTo(p(D),v),this.Canvas.lineTo(p(D),m)),this.Canvas.stroke())}}this.PtMax=l,this.PtMin=h},this.DrawKagi=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=this.ChartBorder.GetHScreenBorder(),n=r.TopEx+a/2+So.FrameLeftMargin,o=r.BottomEx,s=r.TopEx+So.FrameLeftMargin;else var r=this.ChartBorder.GetBorder(),n=r.LeftEx+a/2+So.FrameLeftMargin,o=r.RightEx,s=r.Left+So.FrameLeftMargin;var l={X:null,Y:null,Value:null,Align:"left"},h={X:null,Y:null,Value:null,Align:"left"};this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset;var u=2*C();this.Canvas.lineWidth=u;var c={Item:null,X:s,Y:null},f=this.Data.DataOffset-1;if(f>=0&&f<this.Data.Data.length){var d=this.Data.Data[f];c.Item=d,1==d.Direction?c.Y=this.GetYFromData(d.High,!1):2==d.Direction&&(c.Y=this.GetYFromData(d.Low,!1))}for(var D=this.Data.DataOffset,m=0;D<this.Data.Data.length&&m<i;++D,++m,n+=e+a,++this.ShowRange.DataCount){var p=this.Data.Data[D];if(this.ShowRange.End=D,null!=p.Open&&null!=p.High&&null!=p.Low&&null!=p.Close){var s=n,g=n+e;if(g>o)break;var T=s+(g-s)/2,I=this.GetYFromData(p.Low,!1),S=this.GetYFromData(p.High,!1);this.DrawKRange.End=D,(null==l.Value||l.Value<p.High)&&(l.X=T,l.Y=S,l.Value=p.High,l.Align=m<i/2?"left":"right"),(null==h.Value||h.Value>p.Low)&&(h.X=T,h.Y=I,h.Value=p.Low,h.Align=m<i/2?"left":"right");var x=v(u,T);if(c.Item){this.Canvas.beginPath();var b=v(u,c.Y);this.Canvas.moveTo(c.X,b),this.Canvas.lineTo(x,b);var y=null;if(1==c.Item.Direction?y=c.Item.Low:2==c.Item.Direction&&(y=c.Item.High),1==p.Direction)if(p.High<y)this.Canvas.lineTo(x,S),this.Canvas.strokeStyle=this.DownColor,this.Canvas.stroke();else{var E=this.GetYFromData(y,!1);this.Canvas.lineTo(x,E),this.Canvas.strokeStyle=this.DownColor,this.Canvas.stroke(),this.Canvas.beginPath(),this.Canvas.moveTo(x,E),this.Canvas.lineTo(x,S),this.Canvas.strokeStyle=this.UpColor,this.Canvas.stroke()}else if(2==p.Direction)if(p.Low>y)this.Canvas.lineTo(x,I),this.Canvas.strokeStyle=this.DownColor,this.Canvas.stroke();else{var E=this.GetYFromData(y,!1);this.Canvas.lineTo(x,E),this.Canvas.strokeStyle=this.DownColor,this.Canvas.stroke(),this.Canvas.beginPath(),this.Canvas.moveTo(x,E),this.Canvas.lineTo(x,I),this.Canvas.strokeStyle=this.UpColor,this.Canvas.stroke()}}else this.Canvas.beginPath(),1==p.Direction?(this.Canvas.moveTo(x,I),this.Canvas.lineTo(x,S)):2==p.Direction&&(this.Canvas.moveTo(x,S),this.Canvas.lineTo(x,I)),this.Canvas.stroke();c.Item=p,c.X=T,1==p.Direction?c.Y=S:2==p.Direction&&(c.Y=I)}}this.PtMax=l,this.PtMin=h},this.DrawTrade=function(){if(this.TradeData){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+2,r=this.ChartBorder.GetRight(),n=this.ChartFrame.XPointCount;t&&(i=this.ChartBorder.GetTop()+a/2+2,r=this.ChartBorder.GetBottom());var o=this.TradeData.Sell,s=this.TradeData.Buy,l=e;l>10&&(l=10);for(var h=this.Data.DataOffset,u=0;h<this.Data.Data.length&&u<n;++h,++u,i+=e+a){var C=this.Data.Data[h];if(null!=C.Open&&null!=C.High&&null!=C.Low&&null!=C.Close){var c=!1,f=!1;if(o&&h<o.length&&(f=o[h]>0),s&&h<s.length&&(c=s[h]>0),f||c){var d=i,D=i+e;if(D>r)break;var m=d+(D-d)/2,p=this.GetYFromData(C.Low,!1),v=this.GetYFromData(C.High,!1);this.GetYFromData(C.Open,!1),this.GetYFromData(C.Close,!1);c&&(this.Canvas.fillStyle=this.UpColor,this.Canvas.strokeStyle=this.UnchagneColor,this.Canvas.beginPath(),t?(this.Canvas.moveTo(p-1,m),this.Canvas.lineTo(p-l-1,m-l/2),this.Canvas.lineTo(p-l-1,m+l/2)):(this.Canvas.moveTo(m,p+1),this.Canvas.lineTo(m-l/2,p+l+1),this.Canvas.lineTo(m+l/2,p+l+1)),this.Canvas.closePath(),this.Canvas.fill(),this.Canvas.stroke()),f&&(this.Canvas.fillStyle=this.DownColor,this.Canvas.strokeStyle=this.UnchagneColor,this.Canvas.beginPath(),t?(this.Canvas.moveTo(v+1,m),this.Canvas.lineTo(v+l+1,m-l/2),this.Canvas.lineTo(v+l+1,m+l/2)):(this.Canvas.moveTo(m,v-1),this.Canvas.lineTo(m-l/2,v-l-1),this.Canvas.lineTo(m+l/2,v-l-1)),this.Canvas.closePath(),this.Canvas.fill(),this.Canvas.stroke())}}}}},this.DrawTick=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+2;t&&(i=this.ChartBorder.GetTop()+a/2+2);var r=this.ChartBorder.GetRight();t&&(r=this.ChartBorder.GetBottom());var n=this.ChartFrame.XPointCount,o=parseInt(e);o<=1?o=2:o>=18&&(o=18);var s=C(),l=o*s;this.Canvas.beginPath(),this.Canvas.font=o*s+"px "+this.TickFontName,this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=n,this.DrawKRange.Start=this.Data.DataOffset;for(var h=this.Data.DataOffset,u=0;h<this.Data.Data.length&&u<n;++h,++u,i+=e+a){var c=this.Data.Data[h];if(this.ShowRange.End=h,null!=c.Open&&null!=c.High&&null!=c.Low&&null!=c.Close){var f=i,d=i+e;if(d>r)break;var D=f+(d-f)/2,m=this.ChartFrame.GetYFromData(c.Close,!1);if(this.DrawKRange.End=h,0===c.Flag?this.Canvas.fillStyle=this.UpColor:1==c.Flag?this.Canvas.fillStyle=this.DownColor:this.Canvas.fillStyle=this.UnchagneColor,this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",t?this.Canvas.fillText(this.TickSymbol,m,D):this.Canvas.fillText(this.TickSymbol,D,m),this.IsShowKTooltip&&!t){var p=new at(D-l/2,m-l/2,l,l);this.TooltipRect.push([h,p])}}}},this.DrawHLCArea=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=this.ChartBorder.GetHScreenBorder(),n=r.TopEx+a/2+So.FrameLeftMargin,o=r.BottomEx,s=r.TopEx;else var r=this.ChartBorder.GetBorder(),n=r.LeftEx+a/2+So.FrameLeftMargin,o=r.RightEx,s=r.LeftEx;var l=new Path2D,h=new Path2D,u=new Path2D,C=new Path2D,c=new Path2D,f=[],d=[],D=[],m=!0;if(this.Data.DataOffset>0){var p=this.Data.Data[this.Data.DataOffset-1];if(p&&we.IsNumber(p.Close)&&we.IsNumber(p.High)&&we.IsNumber(p.Low)){var v=s,g=this.GetYFromData(p.Close,!1),T=this.GetYFromData(p.High,!1),I=this.GetYFromData(p.Low,!1);t?(u.moveTo(g,v),h.moveTo(T,v),l.moveTo(I,v),C.moveTo(T,v),c.moveTo(I,v),D.push({X:g,Y:v}),f.push({X:T,Y:v}),d.push({X:I,Y:v})):(u.moveTo(v,g),h.moveTo(v,T),l.moveTo(v,I),C.moveTo(v,T),c.moveTo(v,I),D.push({X:v,Y:g}),f.push({X:v,Y:T}),d.push({X:v,Y:I})),m=!1}}this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset;for(var S=this.Data.DataOffset,x=0;S<this.Data.Data.length&&x<i;++S,++x,n+=e+a,++this.ShowRange.DataCount){var p=this.Data.Data[S];if(this.ShowRange.End=S,p&&we.IsNumber(p.Close)&&we.IsNumber(p.High)&&we.IsNumber(p.Low)){var b=n,y=n+e;if(y>o)break;var v=b+(y-b)/2,g=this.GetYFromData(p.Close,!1),T=this.GetYFromData(p.High,!1),I=this.GetYFromData(p.Low,!1);this.DrawKRange.End=S,m?(t?(u.moveTo(g,v),h.moveTo(T,v),l.moveTo(I,v),C.moveTo(T,v),c.moveTo(I,v)):(u.moveTo(v,g),h.moveTo(v,T),l.moveTo(v,I),C.moveTo(v,T),c.moveTo(v,I)),m=!1):t?(u.lineTo(g,v),h.lineTo(T,v),l.lineTo(I,v),C.lineTo(T,v),c.lineTo(I,v)):(u.lineTo(v,g),h.lineTo(v,T),l.lineTo(v,I),C.lineTo(v,T),c.lineTo(v,I)),t?(D.push({X:g,Y:v}),f.push({X:T,Y:v}),d.push({X:I,Y:v})):(D.push({X:v,Y:g}),f.push({X:v,Y:T}),d.push({X:v,Y:I}))}}if(!m){for(var S=D.length-1;S>=0;--S){var E=D[S];C.lineTo(E.X,E.Y),c.lineTo(E.X,E.Y)}C.closePath(),c.closePath(),this.Canvas.fillStyle=this.HLCAreaConfig.UpAreaColor,this.Canvas.fill(C),this.Canvas.fillStyle=this.HLCAreaConfig.DownAreaColor,this.Canvas.fill(c),we.IsNumber(this.HLCAreaConfig.LineWidth)&&(this.Canvas.lineWidth=this.HLCAreaConfig.LineWidth),this.Canvas.strokeStyle=this.HLCAreaConfig.CloseLineColor,this.Canvas.stroke(u),this.Canvas.strokeStyle=this.HLCAreaConfig.HighLineColor,this.Canvas.stroke(h),this.Canvas.strokeStyle=this.HLCAreaConfig.LowLineColor,this.Canvas.stroke(l)}},this.ClipTickClient=function(t){var e=this.GetBorder();if(1==t)var a=this.ChartBorder.GetLeftEx(),i=this.ChartBorder.GetRightEx(),r=this.ChartBorder.GetTop(),n=this.ChartBorder.GetBottom();else var a=e.Left,i=e.Right,r=e.TopTitle,n=e.Bottom;this.Canvas.beginPath(),this.Canvas.rect(a,r,i-a,n-r),this.Canvas.clip()},this.ClipWindow=function(t){if(1==t)var e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRightEx(),i=this.ChartBorder.GetTop(),r=this.ChartBorder.GetBottom();else var e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRight(),i=this.ChartBorder.GetTopEx(),r=this.ChartBorder.GetBottom();this.Canvas.beginPath(),this.Canvas.rect(e,i,a-e,r-i),this.Canvas.clip()},this.ClipClient=function(t){if(1==t)var e=this.ChartBorder.GetLeftEx(),a=this.ChartBorder.GetRightEx(),i=this.ChartBorder.GetTop(),r=this.ChartBorder.GetBottom();else{var e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRight(),i=this.ChartBorder.GetTopEx(),r=this.ChartBorder.GetBottomEx();this.ChartBorder.BottomSpace>0&&(r+=1),13==this.DrawType&&(i=this.ChartBorder.GetTopTitle(),r=this.ChartBorder.GetBottom())}this.Canvas.beginPath(),this.Canvas.rect(e,i,a-e,r-i),this.Canvas.clip()},this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.IsVisible&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex()&&(this.IsShowOrderText=!1,this.TooltipRect=[],this.InfoTooltipRect=[],this.TradeIconTooltipRect=[],this.PtMax={X:null,Y:null,Value:null,Align:"left"},this.PtMin={X:null,Y:null,Value:null,Align:"left"},this.DrawKRange={Start:null,End:null},this.AryPriceGapCache=[],this.ChartFrame.ChartKLine={Max:null,Min:null},this.DrawHeatMap(),this.IsShow&&(!this.ChartFrame.IsMinSize||"Self Kline"!=this.Name))){if(tt.IsTickPeriod(this.Period))return this.Canvas.save(),1==this.DrawType?(this.ClipClient(this.ChartFrame.IsHScreen),this.DrawCloseLine()):4==this.DrawType?(this.ClipClient(this.ChartFrame.IsHScreen),this.DrawCloseArea()):(this.ClipTickClient(this.ChartFrame.IsHScreen),this.DrawTick()),void this.Canvas.restore();if(this.Canvas.save(),this.ClipClient(this.ChartFrame.IsHScreen),1==this.DrawType)return this.DrawCloseLine(),this.Canvas.restore(),void(this.PriceGap.Enable&&this.DrawPriceGap());2==this.DrawType?this.DrawAKLine():4==this.DrawType?this.DrawCloseArea():5==this.DrawType?this.DrawOrderFlow():7==this.DrawType?this.DrawOrderFlow_Style2():8==this.DrawType?this.DrawOrderFlow_Style3():9==this.DrawType?this.DrawKBar():10==this.DrawType?this.DrawRenkoCandle():12==this.DrawType?this.DrawLineBreak():13==this.DrawType?this.DrawHighLow():14==this.DrawType?this.FFKChart&&this.FFKChart.Draw&&this.FFKChart.Draw(this):15==this.DrawType?this.DrawHLCArea():16==this.DrawType?this.DrawKagi():17==this.DrawType?this.DrawOrderFlow_Style4():18==this.DrawType?this.DrawOrderFlow_Style5():this.DrawKBar(),this.TradeIcon?this.DrawTradeIcon():this.DrawTrade(),this.Canvas.restore(),this.PriceGap.Enable&&this.DrawPriceGap(),this.IsShowMaxMinPrice&&(!0===this.ChartFrame.IsHScreen?this.HScreenDrawMaxMinPrice(this.PtMax,this.PtMin):this.DrawMaxMinPrice(this.PtMax,this.PtMin)),14==this.DrawType&&this.FFKChart&&this.FFKChart.DrawMaxMinPrice&&this.FFKChart.DrawMaxMinPrice()}},this.OnFormatHighLowTitle=function(t,e){if(!t||!e)return null;if(!we.IsNumber(t.Value)||!we.IsNumber(e.Value))return null;var a=sr(this.Symbol),i={High:t.Value.toFixed(a),Low:e.Value.toFixed(a)};if(!this.GetEventCallback)return i;var r=this.GetEventCallback(Kn.ON_FORMAT_KLINE_HIGH_LOW_TITLE);if(!r||!r.Callback)return i;var n={Max:t,Min:e,Symbol:this.Symbol,Title:{High:i.High,Low:i.Low},Decimal:a,PreventDefault:!1};return r.Callback(r,n,this),n.PreventDefault?n.Title:i},this.DrawMaxMinPrice=function(t,e){if(null!=t.X&&null!=t.Y&&null!=t.Value&&null!=e.X&&null!=e.Y&&null!=e.Value){var a=this.OnFormatHighLowTitle(t,e);if(a){var i=So.KLine.MaxMin.LeftArrow,r=So.KLine.MaxMin.RightArrow,n=So.KLine.MaxMin.HighYOffset,o=So.KLine.MaxMin.LowYOffset;sr(this.Symbol);this.Canvas.font=this.TextFont;var s=this.ChartBorder.GetTopEx(),l=this.ChartBorder.GetBottomEx(),h=t,u=a.High,C=this.TextColor;if(1==this.ChartFrame.CoordinateType){t.Y<e.Y&&(h=e),this.Canvas.textBaseline="top";var u=a.Low;a.LowColor&&(C=a.LowColor)}else t.Y>e.Y&&(h=e),this.Canvas.textBaseline="bottom",a.HighColor&&(C=a.HighColor);this.Canvas.fillStyle=C,this.Canvas.textAlign=h.Align;var c=(h.Align,h.X);we.IsNumber(n)&&(h.Y+=n),"left"==h.Align?u=i+u:u+=r,h.Y>s-2&&(this.Canvas.fillText(u,c,h.Y),this.ChartFrame.ChartKLine.Max={X:c,Y:h.Y,Text:{BaseLine:"bottom"}});var f=e,u=a.Low,C=this.TextColor;if(1==this.ChartFrame.CoordinateType){e.Y>t.Y&&(f=t),this.Canvas.textBaseline="bottom";var u=a.High;a.HighColor&&(C=a.HighColor)}else t.Y>e.Y&&(h=e),this.Canvas.textBaseline="top",a.LowColor&&(C=a.LowColor);this.Canvas.fillStyle=C,this.Canvas.textAlign=f.Align;var c=(f.Align,f.X);we.IsNumber(o)&&(f.Y+=o),"left"==f.Align?u=i+u:u+=r,f.Y<l+1&&(this.Canvas.fillText(u,c,f.Y),this.ChartFrame.ChartKLine.Min={X:c,Y:f.Y,Text:{BaseLine:"top"}})}}},this.HScreenDrawMaxMinPrice=function(t,e){if(null!=t.X&&null!=t.Y&&null!=t.Value&&null!=e.X&&null!=e.Y&&null!=e.Value){var a=this.OnFormatHighLowTitle(t,e);if(a){var i=So.KLine.MaxMin.LeftArrow,r=So.KLine.MaxMin.RightArrow,n=So.KLine.MaxMin.HighYOffset,o=So.KLine.MaxMin.LowYOffset,s=t.Y,l=t.X;we.IsNumber(n)&&(s+=n),this.Canvas.save(),this.Canvas.translate(s,l),this.Canvas.rotate(90*Math.PI/180);var h=a.High;this.Canvas.font=this.TextFont,a.HighColor?this.Canvas.fillStyle=a.HighColor:this.Canvas.fillStyle=this.TextColor,this.Canvas.textAlign=t.Align,this.Canvas.textBaseline="bottom","left"==t.Align?h=i+h:h+=r,this.Canvas.fillText(h,0,0),this.Canvas.restore();var s=e.Y,l=e.X;we.IsNumber(o)&&(s+=o),this.Canvas.save(),this.Canvas.translate(s,l),this.Canvas.rotate(90*Math.PI/180);var h=a.Low;this.Canvas.font=this.TextFont,a.LowColor?this.Canvas.fillStyle=a.LowColor:this.Canvas.fillStyle=this.TextColor,this.Canvas.textAlign=e.Align,this.Canvas.textBaseline="top","left"==e.Align?h=i+h:h+=r,this.Canvas.fillText(h,0,0),this.Canvas.restore()}}},this.DrawInfo=function(t){if(this.InfoData&&!(this.InfoData.size<=0)){var e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetBottom(),n=this.ChartBorder.GetTop(),o=""+t.DayData.Date;if(1==this.Data.DataType&&(o=t.DayData.Date+"-"+t.DayData.Time),this.InfoData.has(o)){var s=this.InfoData.get(o);if(s&&!(s.Data.length<=0)){this.Canvas.restore(),this.Canvas.save(),this.ClipWindow(e);var l=C(),h=a+i,u=18*l,c=!0;h<=15&&(c=!1),h<u&&(h=u);var f="",d=new Vn.default,D=t.YMax+1*l,m=t.YMin+1*l+h,p=!0,v=0;for(var g in s.Data){var T=s.Data[g],I=d.get(T.InfoType);if(I)I.Data.push(T);else{var S=Pi.GetIconFont(T.InfoType);if(this.Canvas.fillStyle=S.Color,this.Canvas.font=h+"px "+S.Family,e){this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.fillText(S.HScreenText,D,t.XCenter,h);var x=new at(t.XCenter-h/2,D-h,h,h),b={Data:new Array(T),Rect:x,Type:T.InfoType,TextRect:{X:D,Y:t.XCenter}};d.set(T.InfoType,b),D+=h}else if(this.Canvas.textBaseline="bottom",this.Canvas.textAlign="center",1===this.InfoPosition){var y=r+v;this.Canvas.fillText(S.Text,t.XCenter,y,h);var x=new at(t.XCenter-h/2,y-h,h,h),b={Data:new Array(T),Rect:x,Type:T.InfoType,TextRect:{X:t.XCenter,Y:y}};d.set(T.InfoType,b),v-=h}else if(p){this.Canvas.fillText(S.Text,t.XCenter,D,h);var x=new at(t.XCenter-h/2,D-h,h,h),b={Data:new Array(T),Rect:x,Type:T.InfoType,TextRect:{X:t.XCenter,Y:D}};d.set(T.InfoType,b),D-=h,D-h<n&&(p=!1)}else{this.Canvas.fillText(S.Text,t.XCenter,m,h);var x=new at(t.XCenter-h/2,m-h,h,h),b={Data:new Array(T),Rect:x,Type:T.InfoType,TextRect:{X:t.XCenter,Y:m}};d.set(T.InfoType,b),m+=h}}}var E;So.KLine.NumIcon&&(E=e?So.KLine.NumIcon.HScreenText:So.KLine.NumIcon.Text);var w=!0,F=!1,M=void 0;try{for(var L,N=(0,Gn.default)(d);!(w=(L=N.next()).done);w=!0){var t=L.value,R=t[1];if(R.Data.length>=2&&E&&c){var A=R.Data.length;A>=E.length&&(A=0),this.Canvas.fillStyle=So.KLine.NumIcon.Color;var f=E[A];this.Canvas.fillText(f,R.TextRect.X,R.TextRect.Y,h)}e||this.InfoTooltipRect.push(R)}}catch(t){F=!0,M=t}finally{try{!w&&N.return&&N.return()}finally{if(F)throw M}}this.Canvas.restore(),this.Canvas.save(),this.ClipClient(e)}}}},this.DrawTradeIcon=function(){if(this.TradeData){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+2,r=this.ChartBorder.GetRight(),n=this.ChartFrame.XPointCount;t&&(i=this.ChartBorder.GetTop()+a/2+2,r=this.ChartBorder.GetBottom());var o=this.TradeData.Sell,s=this.TradeData.Buy,l=e+a,h=C(),u=24*h,c=12*h;l<c?l=c:l>u&&(l=u),this.Canvas.font=l+"px "+this.TradeIcon.Family;for(var f=this.Data.DataOffset,d=0;f<this.Data.Data.length&&d<n;++f,++d,i+=e+a){var D=this.Data.Data[f];if(null!=D.Open&&null!=D.High&&null!=D.Low&&null!=D.Close){var m=!1,p=!1;if(o&&f<o.length&&(p=o[f]>0),s&&f<s.length&&(m=s[f]>0),p||m){var v=i,g=i+e;if(g>r)break;var T=v+(g-v)/2,I=this.GetYFromData(D.Low,!1),S=this.GetYFromData(D.High,!1);this.GetYFromData(D.Open,!1),this.GetYFromData(D.Close,!1);if(m)if(this.Canvas.fillStyle=this.TradeIcon.Buy.Color,t)this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillText(this.TradeIcon.Buy.HScreenText,I,T);else{this.Canvas.textAlign="center",this.Canvas.textBaseline="top",this.Canvas.fillText(this.TradeIcon.Buy.Text,T,I);var x=new at(T-l/2,I,l,l),b={Data:{Type:1,KData:D,Name:this.TradeData.Name,Param:this.TradeData.Param},Rect:x,TextRect:{X:T,Y:I}};this.TradeIconTooltipRect.push(b)}if(p)if(this.Canvas.fillStyle=this.TradeIcon.Sell.Color,t)this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(this.TradeIcon.Sell.HScreenText,S,T);else{this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.Canvas.fillText(this.TradeIcon.Sell.Text,T,S);var x=new at(T-l/2,S-l,l,l),b={Data:{Type:2,KData:D,Name:this.TradeData.Name,Param:this.TradeData.Param},Rect:x,TextRect:{X:T,Y:S}};this.TradeIconTooltipRect.push(b)}}}}}},this.GetTooltipData=function(t,e,a){if(!this.IsShow)return!1;for(var i in this.TradeIconTooltipRect){var r=this.TradeIconTooltipRect[i];if(r.Rect){var n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e))return Xn.Chart.Log("[ChartKLine::GetTooltipData] trade icon ",r),a.Data=r,a.ChartPaint=this,a.Type=2,!0}}for(var i in this.InfoTooltipRect){var r=this.InfoTooltipRect[i];if(r.Rect){var n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e))return a.Data=r,a.ChartPaint=this,a.Type=1,!0}}for(var i in this.TooltipRect){var n=this.TooltipRect[i][1];if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e)){var o=this.TooltipRect[i][0];return a.Data=this.Data.Data[o],a.ChartPaint=this,a.Type=0,!0}}return!1},this.GetMaxMin=function(){if(14==this.DrawType&&this.FFKChart&&this.FFKChart.GetMaxMin)return this.FFKChart.GetMaxMin(this);var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset;this.ChartFrame.GlobalOption&&this.ChartFrame.GlobalOption.IsValueFullRange&&(e=0,t=this.Data.Data.length);var a={Max:null,Min:null};if(1==this.DrawType||4==this.DrawType)for(var i=e,r=0;i<this.Data.Data.length&&r<t;++i,++r){var n=this.Data.Data[i];we.IsNumber(n.Close)&&(null==a.Max&&(a.Max=n.Close),null==a.Min&&(a.Min=n.Close),a.Max<n.Close&&(a.Max=n.Close),a.Min>n.Close&&(a.Min=n.Close))}else for(var i=e,r=0;i<this.Data.Data.length&&r<t;++i,++r){var n=this.Data.Data[i];if(null!=n.Open&&null!=n.High&&null!=n.Low&&null!=n.Close)if(5==this.DrawType&&n.OrderFlow&&we.IsNumber(n.OrderFlow.PriceOffset)){var o=n.High,s=n.Low;if(we.IsNonEmptyArray(n.OrderFlow.High))for(var l=0;l<n.OrderFlow.High.length;++l){var h=n.OrderFlow.High[l];o<h.Price&&(o=h.Price)}if(we.IsNonEmptyArray(n.OrderFlow.Low))for(var l=0;l<n.OrderFlow.Low.length;++l){var h=n.OrderFlow.Low[l];s>h.Price&&(s=h.Price)}o+=n.OrderFlow.PriceOffset,s-=n.OrderFlow.PriceOffset,null==a.Max&&(a.Max=o),null==a.Min&&(a.Min=s),a.Max<o&&(a.Max=o),a.Min>s&&(a.Min=s)}else null==a.Max&&(a.Max=n.High),null==a.Min&&(a.Min=n.Low),a.Max<n.High&&(a.Max=n.High),a.Min>n.Low&&(a.Min=n.Low)}return a},this.GetAllPrice=function(){for(var t=this.ChartFrame.XPointCount,e=new Rn.default,a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(null!=r.Open&&null!=r.High&&null!=r.Low&&null!=r.Close){var n=r.Close;e.add(n)}}var o=[],s=!0,l=!1,h=void 0;try{for(var u,C=(0,Gn.default)(e);!(s=(u=C.next()).done);s=!0){var c=u.value;o.push(c)}}catch(t){l=!0,h=t}finally{try{!s&&C.return&&C.return()}finally{if(l)throw h}}return o.sort(function(t,e){return t-e}),o},this.DrawLastPointEvent=function(t){if(this.GetEventCallback){var e=this.GetEventCallback(Kn.ON_DRAW_KLINE_LAST_POINT);if(e){var a={Data:this.ChartFrame.DataWidth,Distance:this.ChartFrame.DistanceWidth};if(t)var i={LastPoint:{X:t.X,Y:t.Y,XLeft:t.XLeft,XRight:t.XRight},KItem:t.KItem,DrawType:this.DrawType,KWidth:a,ChartRight:t.ChartRight};else var i={LastPoint:null,KItem:null,KWidth:a};e.Callback(e,i,this)}}},this.DrawOrderFlow=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetBorder(),r=i.LeftEx+a/2+So.FrameLeftMargin,n=i.RightEx,o=this.ChartFrame.XPointCount;if(t){var i=this.ChartBorder.GetHScreenBorder();r=i.TopEx+a/2+So.FrameLeftMargin,n=i.BottomEx}this.UpColor,this.DownColor,this.UnchagneColor;this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=o,this.DrawKRange.Start=this.Data.DataOffset;this.DrawOrderFlowHBar();for(var s=this.Data.DataOffset,l=0;s<this.Data.Data.length&&l<o;++s,++l,r+=e+a,++this.ShowRange.DataCount){var h=this.Data.Data[s];if(this.ShowRange.End=s,null!=h.Open&&null!=h.High&&null!=h.Low&&null!=h.Close){var u=r,C=r+e;if(C>n)break;var c=u+(C-u)/2,f=this.GetYFromData(h.Low,!1),d=this.GetYFromData(h.High,!1),D=this.GetYFromData(h.Open,!1),m=this.GetYFromData(h.Close,!1);this.DrawKRange.End=s;var p={Low:f,High:d,Open:D,Close:m},v={Left:u,Center:c,Right:C,DataWidth:e};if(this.DrawOrderFlowBar(h.OrderFlow,h,v,p,t),this.IsShowKTooltip&&!t){var g=Math.min(D,m),T=Math.max(D,m);Math.abs(D-m)<5&&(g=Math.min(d,g-5),T=Math.max(f,T+5));var I=new at(u,g,e,T-g);this.TooltipRect.push([s,I])}if(0==this.Data.DataType){var S={Xleft:u,XRight:C,XCenter:c,YMax:d,YMin:f,DayData:h,Index:l};this.DrawInfo(S)}s==this.Data.Data.length-1&&{X:c,Y:m,XLeft:u,XRight:C,KItem:h,ChartRight:n}}}},this.DrawOrderFlowBar=function(t,e,a,i,r){var n=Math.min(i.Open,i.Close),o=Math.max(i.Open,i.Close),s=Math.abs(i.Open-i.Close),l=0;t&&we.IsNumber(t.PriceOffset)&&(l=this.GetPriceYOffset(t.PriceOffset));var h=this.GetDynamicOrderFlowFont(l,a.DataWidth/2);this.IsShowOrderText=l>5&&a.DataWidth>10,this.OrderFlow.AlwaysShowOrderText&&(this.IsShowOrderText=!0);var u;u=e.Open<e.Close?this.OrderFlow.UpColor:e.Open>e.Close?this.OrderFlow.DownColor:this.OrderFlow.UnchagneColor;var C=a.DataWidth<4;C?(this.Canvas.strokeStyle=u.Border,this.Canvas.beginPath(),this.Canvas.moveTo(p(a.Center),n-l/2),this.Canvas.lineTo(p(a.Center),o+l/2),this.Canvas.stroke()):(this.Canvas.fillStyle=u.BG,this.Canvas.fillRect(g(a.Left),g(n-l/2),g(a.DataWidth),g(s+l))),this.Canvas.textBaseline="middle",this.Canvas.textAlign="center",this.Canvas.font=h;var c=a.DataWidth/2,f=c/2;if(t&&we.IsNonEmptyArray(t.Order)){var d=0,D=0,m=null;if(this.OrderFlow.IsShowAskBar||this.OrderFlow.IsShowBidBar||this.OrderFlow.IsShowPOCBG)for(var v=0,T=0,I=0;I<t.Order.length;++I){var S=t.Order[I];T=0,S.Ask&&we.IsNumber(S.Ask.Value)&&(d+=S.Ask.Value,T+=S.Ask.Value),S.Bid&&we.IsNumber(S.Bid.Value)&&(D+=S.Bid.Value,T+=S.Bid.Value),v<T&&(v=T,m=I)}for(var I=0;I<t.Order.length;++I){var S=t.Order[I],x=this.GetYFromData(S.Price,!1),b={Left:a.Left,Right:a.Center,Bottom:x+l/2,Top:x-l/2};if(b.Width=b.Right-b.Left,b.Height=b.Bottom-b.Top,S.Ask.BG&&(this.Canvas.fillStyle=S.Ask.BG,this.Canvas.fillRect(g(b.Left),g(b.Top),g(b.Width),g(b.Height))),this.OrderFlow.IsShowPOCBG&&m==I&&(this.Canvas.fillStyle=this.OrderFlow.POCGBColor,this.Canvas.fillRect(g(b.Left),g(b.Top),g(b.Width),g(b.Height))),this.OrderFlow.IsShowAskBar&&we.IsNumber(S.Ask.Value)&&d>0){var y=b.Width*(S.Ask.Value/d);y<1&&(y=1),this.Canvas.fillStyle=this.OrderFlow.AskBarColor,this.Canvas.fillRect(g(b.Right),g(b.Top),g(-y),g(b.Height))}var E=null;if(we.IsString(S.Ask.Text)?E=S.Ask.Text:we.IsNumber(S.Ask.Value)&&(E=S.Ask.Value.toString()),E&&this.IsShowOrderText&&this.OrderFlow.IsShowAskText)if(S.Ask.Color?this.Canvas.fillStyle=S.Ask.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color,S.Ask.Font){var w=this.GetDynamicOrderFlowFont(l,a.DataWidth/2,S.Ask.Font);this.Canvas.font=w,this.Canvas.fillText(E,a.Left+f,x),this.Canvas.font=h}else this.Canvas.fillText(E,a.Left+f,x);var b={Left:a.Center,Right:a.Right,Bottom:x+l/2,Top:x-l/2};if(b.Width=b.Right-b.Left,b.Height=b.Bottom-b.Top,S.Bid.BG&&(this.Canvas.fillStyle=S.Bid.BG,this.Canvas.fillRect(g(b.Left),g(b.Top),g(b.Width),g(b.Height))),this.OrderFlow.IsShowPOCBG&&m==I&&(this.Canvas.fillStyle=this.OrderFlow.POCGBColor,this.Canvas.fillRect(g(b.Left),g(b.Top),g(b.Width),g(b.Height))),this.OrderFlow.IsShowBidBar&&we.IsNumber(S.Bid.Value)&&D>0){var y=b.Width*(S.Bid.Value/D);y<1&&(y=1),this.Canvas.fillStyle=this.OrderFlow.BidBarColor,this.Canvas.fillRect(g(b.Left),g(b.Top),g(y),g(b.Height))}var E=null;if(we.IsString(S.Bid.Text)?E=S.Bid.Text:we.IsNumber(S.Bid.Value)&&(E=S.Bid.Value.toString()),E&&this.IsShowOrderText&&this.OrderFlow.IsShowBidText)if(S.Bid.Color?this.Canvas.fillStyle=S.Bid.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color,S.Bid.Font){var w=this.GetDynamicOrderFlowFont(l,a.DataWidth/2,S.Bid.Font);this.Canvas.font=w,this.Canvas.fillText(E,a.Center+f,x),this.Canvas.font=h}else this.Canvas.fillText(E,a.Center+f,x)}}(i.High<n||i.Low>o)&&(this.Canvas.strokeStyle=this.OrderFlow.Line.UpDownColor,i.High<n&&(this.Canvas.beginPath(),this.Canvas.moveTo(p(a.Center),i.High-l/2),this.Canvas.lineTo(p(a.Center),n-l/2),this.Canvas.stroke()),i.Low>o&&(this.Canvas.beginPath(),this.Canvas.moveTo(p(a.Center),i.Low+l/2),this.Canvas.lineTo(p(a.Center),o+l/2),this.Canvas.stroke())),!C&&Math.abs(i.Open-i.Close)>1&&(this.Canvas.strokeStyle=this.OrderFlow.Line.MiddleColor,this.Canvas.beginPath(),this.Canvas.moveTo(p(a.Center),n-l/2),this.Canvas.lineTo(p(a.Center),o+l/2),this.Canvas.stroke()),C||(this.Canvas.beginPath(),this.Canvas.strokeStyle=u.Border,this.Canvas.rect(p(a.Left),p(n-l/2),g(a.DataWidth),g(s+l)),this.Canvas.stroke());var h=this.GetDynamicOrderFlowFont(l,a.DataWidth);if(t&&we.IsNonEmptyArray(t.High)&&this.IsShowOrderText)for(var I=0;I<t.High.length;++I){var E,S=t.High[I];if(we.IsString(S.Text)?E=S.Text:we.IsNumber(S.Value)&&(E=S.Value.toString()),E){S.Color?this.Canvas.fillStyle=S.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color;var x=this.GetYFromData(S.Price,!1);if(S.Font){var w=this.GetDynamicOrderFlowFont(l,a.DataWidth,S.Font);this.Canvas.font=w,this.Canvas.fillText(E,a.Center,x),this.Canvas.font=h}else this.Canvas.fillText(E,a.Center,x)}}if(t&&we.IsNonEmptyArray(t.Low)&&this.IsShowOrderText)for(var I=0;I<t.Low.length;++I){var E,S=t.Low[I];if(we.IsString(S.Text)?E=S.Text:we.IsNumber(S.Value)&&(E=S.Value.toString()),E){S.Color?this.Canvas.fillStyle=S.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color;var x=this.GetYFromData(S.Price,!1);if(S.Font){var w=this.GetDynamicOrderFlowFont(l,a.DataWidth,S.Font);this.Canvas.font=w,this.Canvas.fillText(E,a.Center,x),this.Canvas.font=h}else this.Canvas.fillText(E,a.Center,x)}}},this.GetPriceYOffset=function(t){var e=this.ChartFrame;return e.ChartBorder.GetHeightEx()*t/(e.HorizontalMax-e.HorizontalMin)},this.GetDynamicOrderFlowFont=function(t,e,a){var i=parseInt(t)-2;t<5&&(i=parseInt(t)),i>this.OrderFlow.Text.FontMaxSize?i=this.OrderFlow.Text.FontMaxSize:i<=0&&(i=1);for(var r=this.FormatFontString(i,this.OrderFlow.Text.Family,a),n=i;n>0;n-=2){var r=this.FormatFontString(n,this.OrderFlow.Text.Family,a);this.Canvas.font=r;if(this.Canvas.measureText(this.OrderFlow.Text.MaxValue).width+2<e)break}return r},this.FormatFontString=function(t,e,a){var i;return a?a.Weight&&(i=a.Weight+" "+t+"px "+e):i=t+"px "+e,i},this.DrawOrderFlowHBar=function(){for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartFrame.HorizontalMax,r=this.ChartFrame.HorizontalMin,n=this.Data.DataOffset,o=this.Data.DataOffset+a,s=0;s<this.Data.Data.length;++s){var l=this.Data.Data[s];if(l&&l.OrderFlow&&we.IsNonEmptyArray(l.OrderFlow.Order))for(var h=0;h<l.OrderFlow.Order.length;++h){var u=l.OrderFlow.Order[h];if(u.HBar&&(we.IsNumber(u.HBar.Width)&&we.IsNumber(u.Price)&&!(u.Price>i||u.Price<r))){var C=Math.ceil(s+u.HBar.Width),c=Math.min(s,C),f=Math.max(s,C);f<n||c>o||this.DrawOrderFlowHBarItem(s,l.OrderFlow,u,t,e)}}}},this.DrawOrderFlowHBarItem=function(t,e,a,i,r){var n=this.ShowRange.Start,o=(this.ShowRange.Start,this.ShowRange.ShowCount,this.GetYFromData(a.Price,!1)),s=parseInt(t+a.HBar.Width),l=t-n,h=s-n;if(l<0&&(l=0),h<0&&(h=0),l<=h){var u=(this.ChartBorder.GetRight(),this.ChartFrame.XPointCount,n),C=this.GetPriceYOffset(e.PriceOffset),c=this.ChartFrame.GetXFromIndex(l)-i/2;if(1==a.HBar.Type)for(var f=0,d=t+1;f<a.HBar.Width&&d<this.Data.Data.length;++f,++d){var D=this.Data.Data[d];if(D.Close<a.Price){h=d-1-u;break}}else if(2==a.HBar.Type)for(var f=0,d=t+1;f<a.HBar.Width&&d<this.Data.Data.length;++f,++d){var D=this.Data.Data[d];if(D.Close>a.Price){h=d-1-u;break}}if(h<0)return;var m=this.ChartFrame.GetXFromIndex(h)+i/2,p=o-C/2,v=C+.5;we.IsNumber(a.HBar.Height)&&(v=a.HBar.Height*C+.1);var T=a.HBar.Width-parseInt(a.HBar.Width);T>1e-6&&(m+=(i+r)*T),this.Canvas.fillStyle=a.HBar.Color,this.Canvas.fillRect(g(c),g(p),g(m-c),g(v))}},this.PtInChart=function(t,e){return 1==this.DrawType||4==this.DrawType?this.PtInLine(t,e,{KLineClose:!0}):this.PtInKBar(t,e)},this.DrawSelectedStatus=function(){this.DrawLinePoint({KLineClose:!0})},this.DrawOrderFlow_Style2=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetBorder(),r=i.LeftEx+a/2+So.FrameLeftMargin,n=i.RightEx,o=this.ChartFrame.XPointCount;if(this.AryOrderFlowBorder=[],t){var i=this.ChartBorder.GetHScreenBorder();r=i.TopEx+a/2+So.FrameLeftMargin,n=i.BottomEx}var s=this.OrderFlow_Style2.UpColor,l=this.OrderFlow_Style2.DownColor,h=this.OrderFlow_Style2.UnchagneColor,u=g(this.OrderFlow_Style2.BarWidth),C=e-u;C/7<u&&(u=C/7),u<=1&&(u=2),this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=o,this.DrawKRange.Start=this.Data.DataOffset,this.DrawOrderFlowHBar();for(var c=this.Data.DataOffset,f=0;c<this.Data.Data.length&&f<o;++c,++f,r+=e+a,++this.ShowRange.DataCount){var d=this.Data.Data[c];if(this.ShowRange.End=c,null!=d.Open&&null!=d.High&&null!=d.Low&&null!=d.Close){var D=r,m=r+e;if(m>n)break;var v=D+(m-D)/2,T=this.GetYFromData(d.Low,!1),I=this.GetYFromData(d.High,!1),S=this.GetYFromData(d.Open,!1),x=this.GetYFromData(d.Close,!1);this.DrawKRange.End=c;var b=Math.min(S,x),y=Math.max(S,x),E=g(D),w=E+u;d.Open<d.Close?this.Canvas.fillStyle=s:d.Open>d.Close?this.Canvas.fillStyle=l:this.Canvas.fillStyle=h;var F=0;d.OrderFlow&&we.IsNumber(d.OrderFlow.PriceOffset)&&(F=this.GetPriceYOffset(d.OrderFlow.PriceOffset)),this.Canvas.fillRect(E,g(b-F/2),u,g(y-b+F));var M={Low:T,High:I,Open:S,Close:x},L={Left:w,Center:v,Right:m,DataWidth:m-w};L.Center=L.Left+L.DataWidth/2,this.DrawOrderFlowBar_Style2(d.OrderFlow,d,L,M,t)}}if(e-u>5)for(var c=0;c<this.AryOrderFlowBorder.length;++c){var N=this.AryOrderFlowBorder[c];if(N&&N.Rect&&N.Color){var R=N.Rect;this.Canvas.strokeStyle=N.Color,this.Canvas.beginPath(),this.Canvas.rect(p(R.Left),p(R.Top),g(R.Width),g(R.Height)),this.Canvas.stroke()}}this.AryOrderFlowBorder=[]},this.DrawOrderFlow_Style3=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetBorder(),r=i.LeftEx+a/2+So.FrameLeftMargin,n=i.RightEx,o=this.ChartFrame.XPointCount;if(this.AryOrderFlowBorder=[],t){var i=this.ChartBorder.GetHScreenBorder();r=i.TopEx+a/2+So.FrameLeftMargin,n=i.BottomEx}var s=this.OrderFlow_Style3.UpColor,l=this.OrderFlow_Style3.DownColor,h=this.OrderFlow_Style3.UnchagneColor,u=g(this.OrderFlow_Style3.BarWidth);e/4<u&&(u=e/4),u<=1&&(u=2),this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=o,this.DrawKRange.Start=this.Data.DataOffset,this.DrawOrderFlowHBar();for(var C=this.Data.DataOffset,c=0;C<this.Data.Data.length&&c<o;++C,++c,r+=e+a,++this.ShowRange.DataCount){var f=this.Data.Data[C];if(this.ShowRange.End=C,null!=f.Open&&null!=f.High&&null!=f.Low&&null!=f.Close){var d=r,D=r+e;if(D>n)break;var m=this.GetYFromData(f.Low,!1),v=this.GetYFromData(f.High,!1),T=this.GetYFromData(f.Open,!1),I=this.GetYFromData(f.Close,!1);this.DrawKRange.End=C;var S=Math.min(T,I),x=Math.max(T,I),b=g(d),y=b+u;f.Open<f.Close?this.Canvas.fillStyle=s:f.Open>f.Close?this.Canvas.fillStyle=l:this.Canvas.fillStyle=h;var E=0;f.OrderFlow&&we.IsNumber(f.OrderFlow.PriceOffset)&&(E=this.GetPriceYOffset(f.OrderFlow.PriceOffset)),this.Canvas.fillRect(b,g(S-E/2),u,g(x-S+E));var w={Low:m,High:v,Open:T,Close:I},F={Left:y,Right:D,DataWidth:D-y};this.DrawOrderFlowBar_Style3(f.OrderFlow,f,F,w,t)}}if(e-u>5)for(var C=0;C<this.AryOrderFlowBorder.length;++C){var M=this.AryOrderFlowBorder[C];if(M&&M.Rect&&M.Color){var L=M.Rect;this.Canvas.strokeStyle=M.Color,this.Canvas.beginPath(),this.Canvas.rect(p(L.Left),p(L.Top),g(L.Width),g(L.Height)),this.Canvas.stroke()}}this.AryOrderFlowBorder=[]},this.DrawOrderFlowBar_Style2=function(t,e,a,i,r){var n=(Math.min(i.Open,i.Close),Math.max(i.Open,i.Close),Math.abs(i.Open-i.Close),0);t&&we.IsNumber(t.PriceOffset)&&(n=this.GetPriceYOffset(t.PriceOffset));var o=this.GetDynamicOrderFlowFont(n,a.DataWidth/2);this.IsShowOrderText=n>5&&a.DataWidth>10,this.OrderFlow.AlwaysShowOrderText&&(this.IsShowOrderText=!0),this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.font=o;a.DataWidth;if(t&&we.IsNonEmptyArray(t.Order))for(var s=0;s<t.Order.length;++s){var l=t.Order[s],h=this.GetYFromData(l.Price,!1),u={Left:a.Left,Right:a.Center,Bottom:h+n/2,Top:h-n/2};if(u.Width=u.Right-u.Left,u.Height=u.Bottom-u.Top,l.Ask.BG&&(this.Canvas.fillStyle=l.Ask.BG,this.Canvas.fillRect(g(u.Left),g(u.Top),g(u.Width),g(u.Height))),l.Ask.BorderColor){var C={Rect:u,Color:l.Ask.BorderColor};this.AryOrderFlowBorder.push(C)}var c=null;if(we.IsString(l.Ask.Text)?c=l.Ask.Text:we.IsNumber(l.Ask.Value)&&(c=l.Ask.Value.toString()),c&&this.IsShowOrderText)if(l.Ask.Color?this.Canvas.fillStyle=l.Ask.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color,l.Ask.Font){var f=this.GetDynamicOrderFlowFont(n,a.DataWidth/2,l.Ask.Font);this.Canvas.font=f,this.Canvas.fillText(c,a.Left+2,h),this.Canvas.font=o}else this.Canvas.fillText(c,a.Left+2,h);var u={Left:a.Center,Right:a.Right,Bottom:h+n/2,Top:h-n/2};if(u.Width=u.Right-u.Left,u.Height=u.Bottom-u.Top,l.Bid.BG&&(this.Canvas.fillStyle=l.Bid.BG,this.Canvas.fillRect(g(u.Left),g(u.Top),g(u.Width),g(u.Height))),l.Bid.BorderColor){var C={Rect:u,Color:l.Bid.BorderColor};this.AryOrderFlowBorder.push(C)}var c=null;if(we.IsString(l.Bid.Text)?c=l.Bid.Text:we.IsNumber(l.Bid.Value)&&(c=l.Bid.Value.toString()),c&&this.IsShowOrderText)if(l.Bid.Color?this.Canvas.fillStyle=l.Bid.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color,l.Bid.Font){var f=this.GetDynamicOrderFlowFont(n,a.DataWidth/2,l.Bid.Font);this.Canvas.font=f,this.Canvas.fillText(c,a.Center+2,h),this.Canvas.font=o}else this.Canvas.fillText(c,a.Center+2,h)}},this.DrawOrderFlowBar_Style3=function(t,e,a,i,r){var n=(Math.min(i.Open,i.Close),Math.max(i.Open,i.Close),Math.abs(i.Open-i.Close),a.DataWidth-4),o=0;t&&we.IsNumber(t.PriceOffset)&&(o=this.GetPriceYOffset(t.PriceOffset));var s=this.GetDynamicOrderFlowFont(o,n);this.IsShowOrderText=o>5&&a.DataWidth>10,this.OrderFlow.AlwaysShowOrderText&&(this.IsShowOrderText=!0),this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.font=s;if(t&&we.IsNonEmptyArray(t.Order))for(var l=0;l<t.Order.length;++l){var h=t.Order[l],u=this.GetYFromData(h.Price,!1),C={Left:a.Left,Right:a.Right,Bottom:u+o/2,Top:u-o/2};if(C.Width=C.Right-C.Left,C.Height=C.Bottom-C.Top,h.Item.BG&&(this.Canvas.fillStyle=h.Item.BG,this.Canvas.fillRect(g(C.Left),g(C.Top),g(C.Width),g(C.Height))),h.Item.BorderColor){var c={Rect:C,Color:h.Item.BorderColor};this.AryOrderFlowBorder.push(c)}var f=null;if(we.IsString(h.Item.Text)?f=h.Item.Text:we.IsNumber(h.Item.Value)&&(f=h.Item.Value.toString()),f&&this.IsShowOrderText)if(h.Item.Color?this.Canvas.fillStyle=h.Item.Color:this.Canvas.fillStyle=this.OrderFlow.Text.Color,h.Item.Font){var d=this.GetDynamicOrderFlowFont(o,n,h.Item.Font);this.Canvas.font=d,this.Canvas.fillText(f,a.Left+2,u),this.Canvas.font=s}else this.Canvas.fillText(f,a.Left+2,u)}},this.DrawOrderFlow_Style4=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetBorder(),r=i.LeftEx+a/2+So.FrameLeftMargin,n=i.RightEx,o=this.ChartFrame.XPointCount;if(this.AryOrderFlowBorder=[],t){var i=this.ChartBorder.GetHScreenBorder();r=i.TopEx+a/2+So.FrameLeftMargin,n=i.BottomEx}var s=this.OrderFlow_Style4.UpColor,l=this.OrderFlow_Style4.DownColor,h=this.OrderFlow_Style4.UnchagneColor;this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=o,this.DrawKRange.Start=this.Data.DataOffset,this.DrawOrderFlowHBar();var u=this.OrderFlow_Style4.KBarWidth;e+a<3*u&&(u=1);for(var C=this.Data.DataOffset,c=0;C<this.Data.Data.length&&c<o;++C,++c,r+=e+a,++this.ShowRange.DataCount){var f=this.Data.Data[C];if(this.ShowRange.End=C,null!=f.Open&&null!=f.High&&null!=f.Low&&null!=f.Close){var d=r,D=r+e;if(D>n)break;var m=d+(D-d)/2,p=this.GetYFromData(f.Low,!1),v=this.GetYFromData(f.High,!1),T=this.GetYFromData(f.Open,!1),I=this.GetYFromData(f.Close,!1);this.DrawKRange.End=C;var S=d+this.OrderFlow_Style4.LeftMargin,x=D+a-this.OrderFlow_Style4.RightMargin;if(1==this.OrderFlow_Style4.KBarType){var b=Math.min(T,I),y=Math.max(T,I),E=g(d)+this.OrderFlow_Style4.LeftMargin,w=S+u;f.Open<f.Close?this.Canvas.fillStyle=s:f.Open>f.Close?this.Canvas.fillStyle=l:this.Canvas.fillStyle=h;var F=0;f.OrderFlow&&we.IsNumber(f.OrderFlow.PriceOffset)&&(F=this.GetPriceYOffset(f.OrderFlow.PriceOffset)),this.Canvas.fillRect(E,g(b-F/2),u,g(y-b+F)),S=w+1}var M={Low:p,High:v,Open:T,Close:I},L={Left:S,Center:m,Right:x,DataWidth:x-S};L.Center=L.Left+L.DataWidth/2,this.DrawOrderFlowBar_Style4(f.OrderFlow,f,L,M,t)}}},this.DrawOrderFlowBar_Style4=function(t,e,a,i,r){var n=(Math.min(i.Open,i.Close),Math.max(i.Open,i.Close),Math.abs(i.Open-i.Close),0);t&&we.IsNumber(t.PriceOffset)&&(n=this.GetPriceYOffset(t.PriceOffset));var o=this.GetDynamicOrderFlowFont(n,a.DataWidth/2);this.IsShowOrderText=n>5&&a.DataWidth>10,this.OrderFlow.AlwaysShowOrderText&&(this.IsShowOrderText=!0),this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.font=o;var s=this.OrderFlow_Style4.VolBarSpace;if(n<=4&&(s=0),t&&we.IsNonEmptyArray(t.Order)){if(t.Summary||(t.Summary={}),!t.Summary.VolMaxMin){for(var l={Max:null,Min:null},h=0;h<t.Order.length;++h){var u=t.Order.length[h];(null==l.Max||l.Max<u.Vol.Value)&&(l.Max=u.Vol.Value),(null==l.Min||l.Min>u.Vol.Value)&&(l.Min=u.Vol.Value)}t.Summary.VolMaxMin=l}for(var C=null,c=t.Summary.VolMaxMin.Max,f=t.Summary.VolMaxMin.Min,h=0;h<t.Order.length;++h){var u=t.Order[h],d=this.GetYFromData(u.Price,!1);if(u.Vol)if(we.IsNonEmptyArray(u.AryVol)){for(var D=a.Right-a.Left,m=a.Left,v=m,T=0,I={Bottom:d+n/2,Top:d-n/2},S=0;S<u.AryVol.length;++S){var x=u.AryVol[S];if(we.IsNumber(x.Value)){T+=x.Value,v=D*(T-f)/(c-f)+a.Left;var b={Left:m,Right:v,Bottom:d+n/2,Top:d-n/2};C&&u.Price>C.Price&&(b.Bottom=C.Rect.Top-s),b.Width=b.Right-b.Left,b.Height=b.Bottom-b.Top,I={Left:g(b.Left),Top:g(b.Top),Width:g(b.Width),Height:g(b.Height)},I.Bottom=I.Top+I.Height,I.Right=I.Left+I.Width,I.Width<1&&(I.Width=1),x.BG&&(this.Canvas.fillStyle=x.BG,this.Canvas.fillRect(I.Left,I.Top,I.Width,I.Height)),m=I.Right}}if(I.Left=a.Left,I.Width=I.Right-I.Left,u.Vol.Text&&this.IsShowOrderText)if(this.Canvas.fillStyle=u.Vol.Color,u.Vol.Font){var y=this.GetDynamicOrderFlowFont(n,D/2,u.Vol.Font);this.Canvas.font=y,this.Canvas.fillText(text,a.Center+textXOffset,d),this.Canvas.font=o}else this.Canvas.fillText(u.Vol.Text,I.Left+2,d);C={Price:u.Price,Rect:I}}else{if(!we.IsNumber(u.Vol.Value))continue;var D=a.Right-a.Left,E=D*(u.Vol.Value-f)/(c-f),w={Left:a.Left,Right:a.Right,Bottom:d+n/2,Top:d-n/2};w.Right=w.Left+E,C&&u.Price>C.Price&&(w.Bottom=C.Rect.Top-s),w.Width=w.Right-w.Left,w.Height=w.Bottom-w.Top;var I={Left:g(w.Left),Top:g(w.Top),Width:g(w.Width),Height:g(w.Height)};if(I.Bottom=I.Top+I.Height,I.Right=I.Left+I.Width,I.Width<1&&(I.Width=1),u.Vol.BG&&(this.Canvas.fillStyle=u.Vol.BG,this.Canvas.fillRect(I.Left,I.Top,I.Width,I.Height)),u.Vol.BorderColor&&(this.Canvas.strokeStyle=u.Vol.BorderColor,this.Canvas.strokeRect(p(I.Left),p(I.Top),I.Width,I.Height)),u.Vol.Text&&this.IsShowOrderText)if(this.Canvas.fillStyle=u.Vol.Color,u.Vol.Font){var y=this.GetDynamicOrderFlowFont(n,D/2,u.Vol.Font);this.Canvas.font=y,this.Canvas.fillText(text,a.Center+textXOffset,d),this.Canvas.font=o}else this.Canvas.fillText(u.Vol.Text,I.Left+2,d);C={Price:u.Price,Rect:I}}}}},this.DrawOrderFlow_Style5=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetBorder(),r=i.LeftEx+a/2+So.FrameLeftMargin,n=i.RightEx,o=this.ChartFrame.XPointCount;if(this.AryOrderFlowBorder=[],t){var i=this.ChartBorder.GetHScreenBorder();r=i.TopEx+a/2+So.FrameLeftMargin,n=i.BottomEx}var s=this.OrderFlow_Style2.UpColor,l=this.OrderFlow_Style2.DownColor,h=this.OrderFlow_Style2.UnchagneColor,u=g(this.OrderFlow_Style2.BarWidth),C=e-u;C/7<u&&(u=C/7),u<=1&&(u=2),this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=o,this.DrawKRange.Start=this.Data.DataOffset,this.DrawOrderFlowHBar();for(var c=this.Data.DataOffset,f=0;c<this.Data.Data.length&&f<o;++c,++f,r+=e+a,++this.ShowRange.DataCount){var d=this.Data.Data[c];if(this.ShowRange.End=c,null!=d.Open&&null!=d.High&&null!=d.Low&&null!=d.Close){var D=r,m=r+e;if(m>n)break;var p=D+(m-D)/2,v=this.GetYFromData(d.Low,!1),T=this.GetYFromData(d.High,!1),I=this.GetYFromData(d.Open,!1),S=this.GetYFromData(d.Close,!1);this.DrawKRange.End=c;var x=Math.min(I,S),b=Math.max(I,S),y=g(D),E=y+u;d.Open<d.Close?this.Canvas.fillStyle=s:d.Open>d.Close?this.Canvas.fillStyle=l:this.Canvas.fillStyle=h;var w=0;d.OrderFlow&&we.IsNumber(d.OrderFlow.PriceOffset)&&(w=this.GetPriceYOffset(d.OrderFlow.PriceOffset)),this.Canvas.fillRect(y,g(x-w/2),u,g(b-x+w));var F={Low:v,High:T,Open:I,Close:S},M={Left:E,Center:p,Right:m,DataWidth:m-E};M.Center=M.Left+M.DataWidth/2,this.DrawOrderFlowBar_Style5(d.OrderFlow,d,M,F,t)}}},this.DrawOrderFlowBar_Style5=function(t,e,a,i,r){var n=(Math.min(i.Open,i.Close),Math.max(i.Open,i.Close),Math.abs(i.Open-i.Close),0);t&&we.IsNumber(t.PriceOffset)&&(n=this.GetPriceYOffset(t.PriceOffset));var o=this.GetDynamicOrderFlowFont(n,a.DataWidth/2);this.IsShowOrderText=n>5&&a.DataWidth>10,this.OrderFlow.AlwaysShowOrderText&&(this.IsShowOrderText=!0),this.Canvas.textBaseline="middle",this.Canvas.font=o;a.DataWidth;if(t&&we.IsNonEmptyArray(t.Order))for(var s=t.MaxValue,l=0;l<t.Order.length;++l){var h=t.Order[l],u=this.GetYFromData(h.Price,!1),C={Left:a.Left,Right:a.Center,Bottom:u+n/2,Top:u-n/2};if(C.Width=C.Right-C.Left,C.Height=C.Bottom-C.Top,we.IsNumber(h.Ask.Value)){var c=this.OrderFlow_Style5.AskBarColor;h.Ask.BG&&(c=h.Ask.BG),this.Canvas.fillStyle=c;var f=C.Width*h.Ask.Value/s;this.Canvas.fillRect(g(C.Right),g(C.Top),g(-f),g(C.Height));var d=null;if((d=we.IsString(h.Ask.Text)?h.Ask.Text:h.Ask.Value.toString())&&this.IsShowOrderText){var D=this.OrderFlow.Text.Color;h.Ask.Color&&(D=h.Ask.Color),this.Canvas.fillStyle=D,this.Canvas.textAlign="right";var m=C.Right-this.OrderFlow_Style5.LeftMargin;if(h.Ask.Font){var p=this.GetDynamicOrderFlowFont(n,a.DataWidth/2,h.Ask.Font);this.Canvas.font=p,this.Canvas.fillText(d,m,u),this.Canvas.font=o}else this.Canvas.fillText(d,m,u)}}var C={Left:a.Center,Right:a.Right,Bottom:u+n/2,Top:u-n/2};if(C.Width=C.Right-C.Left,C.Height=C.Bottom-C.Top,we.IsNumber(h.Bid.Value)){var c=this.OrderFlow_Style5.BidBarColor;h.Bid.BG&&(c=h.Bid.BG),this.Canvas.fillStyle=c;var f=C.Width*h.Bid.Value/s;this.Canvas.fillRect(g(C.Left),g(C.Top),g(f),g(C.Height));var d=null;if((d=we.IsString(h.Bid.Text)?h.Bid.Text:h.Bid.Value.toString())&&this.IsShowOrderText){var D=this.OrderFlow.Text.Color;h.Bid.Color&&(D=h.Bid.Color),this.Canvas.fillStyle=D,this.Canvas.textAlign="left";var m=C.Left+this.OrderFlow_Style5.RightMargin;if(h.Bid.Font){var p=this.GetDynamicOrderFlowFont(n,a.DataWidth/2,h.Bid.Font);this.Canvas.font=p,this.Canvas.fillText(d,m,u),this.Canvas.font=o}else this.Canvas.fillText(d,m,u)}}}},this.DrawHighLow=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount;if(t)var r=this.ChartBorder.GetHScreenBorder(),n=r.TopEx+a/2+So.FrameLeftMargin,o=r.BottomEx;else var r=this.ChartBorder.GetBorder(),n=r.LeftEx+a/2+So.FrameLeftMargin,o=r.RightEx;this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=i,this.DrawKRange.Start=this.Data.DataOffset,this.Canvas.fillStyle=this.HighLowBarColor,this.Canvas.strokeStyle=this.HighLowBarColor;var s=sr(this.Symbol),l=this.GetHighLowTextFont(e,a),h=!1;l&&(h=!0,this.Canvas.font=l);for(var u=this.Data.DataOffset,C=0;u<this.Data.Data.length&&C<i;++u,++C,n+=e+a,++this.ShowRange.DataCount){var c=this.Data.Data[u];if(this.ShowRange.End=u,null!=c.Open&&null!=c.High){var f=n,d=n+e;if(d>o)break;var D=f+(d-f)/2,m=this.GetYFromData(c.Low,!1),v=this.GetYFromData(c.High,!1);this.DrawKRange.End=u;var T=m,I=v-m;if(Math.abs(I)<1&&(I=1),e>=4)t?this.Canvas.fillRect(g(T),g(f),g(I),g(e)):(this.Canvas.fillRect(g(f),g(T),g(e),g(I)),h&&this.DrawHighLowText(v,m,D,c,s));else{var D=f+(d-f)/2;this.Canvas.beginPath(),t?(this.Canvas.moveTo(p(m),p(D)),this.Canvas.lineTo(p(v),p(D))):(this.Canvas.moveTo(p(D),p(m)),this.Canvas.lineTo(p(D),p(v))),this.Canvas.stroke()}if(this.IsShowKTooltip&&!t){var S=Math.min(m,v),x=Math.max(m,v);Math.abs(S-x)<5&&(S=Math.min(v,S-5),x=Math.max(m,x+5));var b=new at(f,S,e,x-S);this.TooltipRect.push([u,b])}}}},this.DrawHighLowText=function(t,e,a,i,r){this.Canvas.textAlign="center";var n=i.High.toFixed(r);this.Canvas.textBaseline="bottom",this.Canvas.fillText(n,a,t-2);var n=i.Low.toFixed(r);this.Canvas.textBaseline="top",this.Canvas.fillText(n,a,e+3)},this.GetHighLowTextFont=function(t,e){for(var a=t+e,i=this.HighLowTextConfig.MaxText,r=Math.min(this.HighLowTextConfig.MaxSize,this.HighLowTextConfig.MinSize),n=Math.max(this.HighLowTextConfig.MaxSize,this.HighLowTextConfig.MinSize),o=n;o>=r;--o){var s=o*C()+"px "+this.HighLowTextConfig.FontName;this.Canvas.font=s;if(this.Canvas.measureText(i).width<=a)return s}return null},this.DrawPriceGap=function(){if(we.IsNonEmptyArray(this.AryPriceGapCache)&&!(this.PriceGap.Count<=0)){var t=this.AryPriceGapCache.length-this.PriceGap.Count;t<0&&(t=0);var e=!0===this.ChartFrame.IsHScreen,a=null;a=e?this.ChartBorder.GetHScreenBorder():this.ChartBorder.GetBorder(),this.Canvas.font=this.PriceGapStyple.Text.Font,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom";for(var i=this.Canvas.measureText("æ").width,r=sr(this.Symbol),n=t;n<this.AryPriceGapCache.length;++n){var o=this.AryPriceGapCache[n],s=o.Data[0],l=o.Data[1],h=null,u=null,C=null;if(1==o.Type)e?(h={Left:s.Coordinate.High,Right:l.Coordinate.Low,Top:s.Coordinate.X,Bottom:a.Bottom},h.Width=h.Right-h.Left,h.Height=h.Bottom-h.Top,u={Left:s.Coordinate.High-i-2,Top:s.Coordinate.Right+2,Height:i},u.Bottom=u.Top+u.Height):(h={Left:s.Coordinate.X,Right:a.Right,Top:l.Coordinate.Low,Bottom:s.Coordinate.High},h.Width=h.Right-h.Left,h.Height=h.Bottom-h.Top,u={Left:s.Coordinate.Right+2,Top:h.Bottom+2,Right:h.Right,Height:i},u.Bottom=u.Top+u.Height),C=s.Data.High.toFixed(r)+"-"+l.Data.Low.toFixed(r);else{if(2!=o.Type)continue;e?(h={Left:s.Coordinate.Low,Right:l.Coordinate.High,Top:s.Coordinate.X,Bottom:a.Bottom},h.Width=h.Right-h.Left,h.Height=h.Bottom-h.Top,u={Left:s.Coordinate.Low+2,Top:s.Coordinate.Right+2,Height:i},u.Bottom=u.Top+u.Height):(h={Left:s.Coordinate.X,Right:a.Right,Top:s.Coordinate.Low,Bottom:l.Coordinate.High},h.Width=h.Right-h.Left,h.Height=h.Bottom-h.Top,u={Left:s.Coordinate.Right+2,Bottom:h.Top,Right:h.Right,Height:i},u.Top=u.Bottom-u.Height),C=s.Data.Low.toFixed(r)+"-"+l.Data.High.toFixed(r)}if(!h)return;if(this.Canvas.fillStyle=this.PriceGapStyple.Line.Color,this.Canvas.fillRect(h.Left,h.Top,h.Width,h.Height),u){var c=this.Canvas.measureText(C).width;u.Width=c,u.Right=u.Left+u.Width,this.Canvas.fillStyle=this.PriceGapStyple.Text.Color,e?(this.Canvas.save(),this.Canvas.translate(u.Left,u.Top),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(C,0,0),this.Canvas.restore()):(u.Right>h.Right&&(u.Right=h.Right,u.Left=u.Right-u.Width),this.Canvas.fillStyle=this.PriceGapStyple.Text.Color,this.Canvas.fillText(C,u.Left,u.Bottom))}}}},this.IsPriceGap=function(t,e){return e&&t?e.Data.Low>t.Data.High?2:e.Data.High<t.Data.Low?1:-1:0},this.CheckPriceGap=function(t){for(var e=t.Data,a=0;a<this.AryPriceGapCache.length;++a){var i=this.AryPriceGapCache[a],r=i.Data[0],n=i.Data[1];if(1==i.Type){if(e.Low<=r.Data.High){this.AryPriceGapCache.splice(a,1),--a;continue}e.Low<n.Data.Low&&(i.Data[1]=t)}else if(2==i.Type){if(e.High>=r.Data.Low){this.AryPriceGapCache.splice(a,1),--a;continue}e.High>n.Data.High&&(i.Data[1]=t)}}}}function ot(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartColorKline",this.Symbol,this.Color="rgb(0,255,44)",this.IsEmptyBar=!1,this.DrawType=0,this.KLineColor,this.DrawName,this.Draw=function(){if(this.IsShow)if("DRAWCOLORKLINE"==this.DrawName)this.DrawColorBar();else{if(!this.KLineColor)return;this.DrawBar()}},this.DrawUpBarItem=function(t,e,a,i){var r=!0===this.ChartFrame.IsHScreen,n=e,o=e+a,s=n+(o-n)/2,l=this.ChartFrame.GetYFromData(t.Low),h=this.ChartFrame.GetYFromData(t.High),u=this.ChartFrame.GetYFromData(t.Open),C=this.ChartFrame.GetYFromData(t.Close),c=h;a>=4?(t.High>t.Close?(this.Canvas.beginPath(),r?(this.Canvas.moveTo(p(c),p(s)),this.Canvas.lineTo(p(3==this.DrawType?Math.max(C,u):C),p(s))):(this.Canvas.moveTo(p(s),p(c)),this.Canvas.lineTo(p(s),p(3==this.DrawType?Math.min(C,u):C))),this.Canvas.stroke(),c=C):c=C,r?Math.abs(u-c)<1?this.Canvas.fillRect(g(c),g(n),1,g(a)):3==this.DrawType?(this.Canvas.beginPath(),this.Canvas.rect(p(c),p(n),g(u-c),g(a)),this.Canvas.stroke()):this.Canvas.fillRect(g(c),g(n),g(u-c),g(a)):Math.abs(u-c)<1?this.Canvas.fillRect(g(n),g(c),g(a),1):3==this.DrawType?(this.Canvas.beginPath(),this.Canvas.rect(p(n),p(c),g(a),g(u-c)),this.Canvas.stroke()):this.Canvas.fillRect(g(n),g(Math.min(c,u)),g(a),g(Math.abs(u-c))),t.Open>t.Low&&(this.Canvas.beginPath(),r?(this.Canvas.moveTo(p(3==this.DrawType?Math.min(C,u):c),p(s)),this.Canvas.lineTo(p(l),p(s))):(this.Canvas.moveTo(p(s),p(3==this.DrawType?Math.max(C,u):c)),this.Canvas.lineTo(p(s),p(l))),this.Canvas.stroke())):(this.Canvas.beginPath(),r?(this.Canvas.moveTo(h,p(s)),this.Canvas.lineTo(l,p(s))):(this.Canvas.moveTo(p(s),h),this.Canvas.lineTo(p(s),l)),this.Canvas.stroke())},this.DrawDownBarItem=function(t,e,a,i){var r=!0===this.ChartFrame.IsHScreen,n=e,o=e+a,s=n+(o-n)/2,l=this.ChartFrame.GetYFromData(t.Low),h=this.ChartFrame.GetYFromData(t.High),u=this.ChartFrame.GetYFromData(t.Open),C=this.ChartFrame.GetYFromData(t.Close),c=h;a>=4?(t.High>t.Close?(this.Canvas.beginPath(),r?(this.Canvas.moveTo(p(c),p(s)),this.Canvas.lineTo(p(u),p(s))):(this.Canvas.moveTo(p(s),p(c)),this.Canvas.lineTo(p(s),p(u))),this.Canvas.stroke(),c=u):c=u,r?Math.abs(C-c)<1?this.Canvas.fillRect(g(c),g(n),1,g(a)):this.Canvas.fillRect(g(c),g(n),g(C-c),g(a)):Math.abs(C-c)<1?this.Canvas.fillRect(g(n),g(c),g(a),1):this.Canvas.fillRect(g(n),g(Math.min(c,C)),g(a),g(Math.abs(C-c))),t.Open>t.Low&&(this.Canvas.beginPath(),r?(this.Canvas.moveTo(p(c),p(s)),this.Canvas.lineTo(p(l),p(s))):(this.Canvas.moveTo(p(s),p(c)),this.Canvas.lineTo(p(s),p(l))),this.Canvas.stroke())):(this.Canvas.beginPath(),r?(this.Canvas.moveTo(h,p(s)),this.Canvas.lineTo(l,p(s))):(this.Canvas.moveTo(p(s),h),this.Canvas.lineTo(p(s),l)),this.Canvas.stroke())},this.DrawUnChangeBarItem=function(t,e,a,i){var r=!0===this.ChartFrame.IsHScreen,n=e,o=e+a,s=n+(o-n)/2,l=this.ChartFrame.GetYFromData(t.Low),h=this.ChartFrame.GetYFromData(t.High),u=this.ChartFrame.GetYFromData(t.Open),C=(this.ChartFrame.GetYFromData(t.Close),h);a>=4?(this.Canvas.beginPath(),t.High>t.Close?(r?(this.Canvas.moveTo(C,p(s)),this.Canvas.lineTo(u,p(s))):(this.Canvas.moveTo(p(s),C),this.Canvas.lineTo(p(s),u)),C=u):C=u,r?(this.Canvas.moveTo(p(C),p(n)),this.Canvas.lineTo(p(C),p(o))):(this.Canvas.moveTo(p(n),p(C)),this.Canvas.lineTo(p(o),p(C))),t.Open>t.Low&&(r?(this.Canvas.moveTo(p(C),p(s)),this.Canvas.lineTo(p(l),p(s))):(this.Canvas.moveTo(p(s),p(C)),this.Canvas.lineTo(p(s),p(l)))),this.Canvas.stroke()):(this.Canvas.beginPath(),r?(this.Canvas.moveTo(h,p(s)),this.Canvas.lineTo(l,p(s))):(this.Canvas.moveTo(p(s),h),this.Canvas.lineTo(p(s),l)),this.Canvas.stroke())},this.DrawBar=function(){var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetLeft()+e/2+2,i=this.ChartBorder.GetRight(),r=this.ChartFrame.XPointCount;this.IsHScreen&&(a=this.ChartBorder.GetTop()+e/2+2,i=this.ChartBorder.GetBottom());for(var n=this.Data.DataOffset,o=0;n<this.Data.Data.length&&o<r;++n,++o,a+=t+e){var s=this.Data.Data[n];if(null!=s.Open&&null!=s.High&&null!=s.Low&&null!=s.Close&&this.KLineColor.has(n)){var l=this.KLineColor.get(n);if(a+t>i)break;l.Color?(this.Canvas.strokeStyle=l.Color,this.Canvas.fillStyle=l.Color):(this.Canvas.strokeStyle=this.Color,this.Canvas.fillStyle=this.Color),s.Open<s.Close?this.DrawUpBarItem(s,a,t,l):s.Open>s.Close?this.DrawDownBarItem(s,a,t,l):this.DrawUnChangeBarItem(s,a,t,l)}}},this.DrawColorBar=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetBorder(),r=i.LeftEx+a/2+So.FrameLeftMargin,n=i.RightEx,o=this.ChartFrame.XPointCount;if(t){var i=this.ChartBorder.GetHScreenBorder();r=i.TopEx+a/2+So.FrameLeftMargin,n=i.BottomEx}for(var s=this.Data.DataOffset,l=0;s<this.Data.Data.length&&l<o;++s,++l,r+=e+a){var h=this.Data.Data[s];if(h&&(we.IsNumber(h.Open)&&we.IsNumber(h.High)&&we.IsNumber(h.Low)&&we.IsNumber(h.Close))){var u=r,C=r+e;if(C>n)break;var c=u+(C-u)/2,f=this.GetYFromData(h.Low,!1),d=this.GetYFromData(h.High,!1),D=this.GetYFromData(h.Open,!1),m=this.GetYFromData(h.Close,!1),p=d;h.Open==h.Close?this.DrawKBar_Unchagne(h,e,this.Color,this.IsEmptyBar,c,p,u,C,f,d,D,m,t):this.DrawKBar_Custom(h,e,this.Color,this.IsEmptyBar,c,p,u,C,f,d,D,m,t)}}},this.DrawKBar_Unchagne=function(t,e,a,i,r,n,o,s,l,h,u,C,c){if(e>=4){if(e%2!=0&&(e-=1),this.Canvas.strokeStyle=a,this.Canvas.beginPath(),t.High>t.Close){if(c)this.Canvas.moveTo(n,p(r)),this.Canvas.lineTo(u,p(r));else{var f=p(o+e/2);this.Canvas.moveTo(f,n),this.Canvas.lineTo(f,u)}n=u}else n=u;if(c?(this.Canvas.moveTo(p(n),p(o)),this.Canvas.lineTo(p(n),p(s))):(this.Canvas.moveTo(p(o),p(n)),this.Canvas.lineTo(p(o+e),p(n))),t.Open>t.Low)if(c)this.Canvas.moveTo(p(n),p(r)),this.Canvas.lineTo(p(l),p(r));else{var f=p(o+e/2);this.Canvas.moveTo(f,p(n)),this.Canvas.lineTo(f,p(l))}this.Canvas.stroke()}else this.Canvas.beginPath(),c?(this.Canvas.moveTo(h,p(r)),this.Canvas.lineTo(l,p(r))):(this.Canvas.moveTo(p(r),h),this.Canvas.lineTo(p(r),l)),this.Canvas.strokeStyle=a,this.Canvas.stroke()},this.DrawKBar_Custom=function(t,e,a,i,r,n,o,s,l,h,u,C,c){if(i&&e%2!=0&&(e-=1),e>=4){if(this.Canvas.strokeStyle=a,t.High>t.Close){if(this.Canvas.beginPath(),c)this.Canvas.moveTo(p(n),p(r)),this.Canvas.lineTo(p(i?Math.max(C,u):C),p(r));else if(i){var f=o+e/2;this.Canvas.moveTo(p(f),p(n)),this.Canvas.lineTo(p(f),p(Math.min(C,u)))}else this.Canvas.moveTo(p(r),p(n)),this.Canvas.lineTo(p(r),p(C));this.Canvas.stroke(),n=C}else n=C;if(this.Canvas.fillStyle=a,c?Math.abs(u-n)<1?this.Canvas.fillRect(g(n),g(o),1,g(e)):i?(this.Canvas.beginPath(),this.Canvas.rect(p(n),p(o),g(u-n),g(e)),this.Canvas.stroke()):this.Canvas.fillRect(g(n),g(o),g(u-n),g(e)):Math.abs(u-n)<1?this.Canvas.fillRect(g(o),g(n),g(e),1):i?(this.Canvas.beginPath(),this.Canvas.rect(p(o),p(n),g(e),g(u-n)),this.Canvas.stroke()):this.Canvas.fillRect(g(o),g(Math.min(n,u)),g(e),g(Math.abs(u-n))),t.Open>t.Low){if(this.Canvas.beginPath(),c)this.Canvas.moveTo(p(i?Math.min(C,u):n),p(r)),this.Canvas.lineTo(p(l),p(r));else if(i){var f=o+e/2;this.Canvas.moveTo(p(f),p(Math.max(C,u))),this.Canvas.lineTo(p(f),p(l))}else this.Canvas.moveTo(p(r),p(n)),this.Canvas.lineTo(p(r),p(l));this.Canvas.stroke()}}else this.Canvas.beginPath(),c?(this.Canvas.moveTo(h,p(r)),this.Canvas.lineTo(l,p(r))):(this.Canvas.moveTo(p(r),h),this.Canvas.lineTo(p(r),l)),this.Canvas.strokeStyle=a,this.Canvas.stroke()},this.GetMaxMin=function(){var t={Max:null,Min:null};if("DRAWCOLORKLINE"==this.DrawName)for(var e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<e;++a,++i){var r=this.Data.Data[a];r&&(null!=r.Open&&null!=r.High&&null!=r.Low&&null!=r.Close&&(null==t.Max&&(t.Max=r.High),null==t.Min&&(t.Min=r.Low),t.Max<r.High&&(t.Max=r.High),t.Min>r.Low&&(t.Min=r.Low)))}return t}}function st(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartHeatMap",this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize)for(var t=(this.ChartFrame.IsHScreen,this.ChartFrame.DataWidth),e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetBorder(),i=a.LeftEx+So.FrameLeftMargin,r=a.RightEx,n=this.ChartFrame.XPointCount,o=this.Data.DataOffset,s=0;o<this.Data.Data.length&&s<n;++o,++s,i+=t+e){var l=this.Data.Data[o];if(l.HeatMap){var h=i,u=i+t;if(u>r)break;this.DrawHeatMap(h,u+e,l.HeatMap)}}},this.DrawHeatMap=function(t,e,a){if(we.IsNonEmptyArray(a.Order)){var i=this.ChartFrame.HorizontalMax,r=this.ChartFrame.HorizontalMin,n=0;we.IsNumber(a.PriceOffset)&&(n=this.GetPriceYOffset(a.PriceOffset));for(var o=0;o<a.Order.length;++o){var s=a.Order[o];if(we.IsNumber(s.Price)&&(s.Color&&!(s.Price>i||s.Price<r))){var l=this.GetYFromData(s.Price,!1),h={Left:t,Right:e,Bottom:l+n/2,Top:l-n/2};h.Width=h.Right-h.Left,h.Height=h.Bottom-h.Top,this.Canvas.fillStyle=s.Color,this.Canvas.fillRect(h.Left,h.Top,h.Width,h.Height)}}}},this.GetPriceYOffset=function(t){var e=this.ChartFrame;return e.ChartBorder.GetHeightEx()*t/(e.HorizontalMax-e.HorizontalMin)}}function lt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartOverlayKLine",this.Color="rgb(65,105,225)",this.MainData,this.SourceData,this.Title,this.DrawType=0,this.CustomDrawType=null,this.Status=co.STATUS_NONE_ID,this.IsDelete=!1,this.CloseLineWidth=So.CloseLineWidth,this.ShowRange={},this.DrawKRange={Start:null,End:null},this.YInfoType=4,this.SetOption=function(t){t&&(we.IsNumber(t.DrawType)&&(this.CustomDrawType=t.DrawType),we.IsNumber(t.YInfoType)&&(this.YInfoType=t.YInfoType))},this.DrawKBar=function(t){var e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetLeft()+i/2+2;e&&(r=this.ChartBorder.GetTop()+i/2+2);var n=this.ChartBorder.GetRight();e&&(n=this.ChartBorder.GetBottom());var o=this.ChartFrame.XPointCount,s=this.DrawType;null!=this.CustomDrawType&&(s=this.CustomDrawType);var l=!0,h=null;this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=o,this.ShowRange.FirstOpen=t,this.DrawKRange.Start=this.Data.DataOffset;for(var u=this.Data.DataOffset,C=0;u<this.Data.Data.length&&C<o;++u,++C,r+=a+i,++this.ShowRange.DataCount){var c=this.Data.Data[u];if(c&&null!=c.Open&&null!=c.High&&null!=c.Low&&null!=c.Close){null==h&&(h=c.Open,this.ShowRange.FirstOverlayOpen=c.Open),l&&(this.Canvas.strokeStyle=this.Color,this.Canvas.fillStyle=this.Color,this.Canvas.beginPath(),l=!1);var f=r,d=r+a;if(d>n)break;var D=f+(d-f)/2,m=this.GetYFromData(c.Low/h*t,!1),v=this.GetYFromData(c.High/h*t,!1),T=this.GetYFromData(c.Open/h*t,!1),I=this.GetYFromData(c.Close/h*t,!1),S=v;this.DrawKRange.End=u,c.Open<c.Close?a>=4?(c.High>c.Close?(e?(this.Canvas.moveTo(p(S),p(D)),this.Canvas.lineTo(p(3==this.DrawType?Math.max(I,T):I),p(D))):(this.Canvas.moveTo(p(D),p(S)),this.Canvas.lineTo(p(D),p(3==this.DrawType?Math.min(I,T):I))),S=I):S=I,e?Math.abs(T-S)<1?this.Canvas.fillRect(g(S),g(f),1,g(a)):3==s?this.Canvas.rect(p(S),p(f),g(T-S),g(a)):this.Canvas.fillRect(g(S),g(f),g(T-S),g(a)):Math.abs(T-S)<1?this.Canvas.fillRect(g(f),g(S),g(a),1):3==s?this.Canvas.rect(p(f),p(S),g(a),g(T-S)):this.Canvas.fillRect(g(f),g(S),g(a),g(T-S)),c.Open>c.Low&&(e?(this.Canvas.moveTo(p(3==this.DrawType?Math.min(I,T):S),p(D)),this.Canvas.lineTo(p(m),p(D))):(this.Canvas.moveTo(p(D),p(3==this.DrawType?Math.max(I,T):S)),this.Canvas.lineTo(p(D),p(m))))):e?(this.Canvas.moveTo(v,p(D)),this.Canvas.lineTo(m,p(D))):(this.Canvas.moveTo(p(D),v),this.Canvas.lineTo(p(D),m)):c.Open>c.Close?a>=4?(c.High>c.Close?(e?(this.Canvas.moveTo(p(S),p(D)),this.Canvas.lineTo(p(T),p(D))):(this.Canvas.moveTo(p(D),p(S)),this.Canvas.lineTo(p(D),p(T))),S=T):S=T,e?Math.abs(I-S)<1?this.Canvas.fillRect(g(S),g(f),1,g(a)):this.Canvas.fillRect(g(S),g(f),g(I-S),g(a)):Math.abs(I-S)<1?this.Canvas.fillRect(g(f),g(S),g(a),1):this.Canvas.fillRect(g(f),g(S),g(a),g(I-S)),c.Open>c.Low&&(e?(this.Canvas.moveTo(p(S),p(D)),this.Canvas.lineTo(p(m),p(D))):(this.Canvas.moveTo(p(D),p(S)),this.Canvas.lineTo(p(D),p(m))))):e?(this.Canvas.moveTo(v,p(D)),this.Canvas.lineTo(m,p(D))):(this.Canvas.moveTo(p(D),v),this.Canvas.lineTo(p(D),m)):a>=4?(c.High>c.Close?(e?(this.Canvas.moveTo(S,p(D)),this.Canvas.lineTo(T,p(D))):(this.Canvas.moveTo(p(D),S),this.Canvas.lineTo(p(D),T)),S=T):S=T,e?(this.Canvas.moveTo(p(S),p(f)),this.Canvas.lineTo(p(S),p(d))):(this.Canvas.moveTo(p(f),p(S)),this.Canvas.lineTo(p(d),p(S))),c.Open>c.Low&&(e?(this.Canvas.moveTo(p(S),p(D)),this.Canvas.lineTo(p(m),p(D))):(this.Canvas.moveTo(p(D),p(S)),this.Canvas.lineTo(p(D),p(m))))):e?c.High==c.Low?(this.Canvas.moveTo(v,p(D)),this.Canvas.lineTo(m-1,p(D))):(this.Canvas.moveTo(v,p(D)),this.Canvas.lineTo(m,p(D))):c.High==c.Low?(this.Canvas.moveTo(p(D),v),this.Canvas.lineTo(p(D),m+1)):(this.Canvas.moveTo(p(D),v),this.Canvas.lineTo(p(D),m));var x=Math.min(m,v,T,I),b=Math.max(m,v,T,I),y=new at(f,x,a,b-x);this.TooltipRect.push([u,y])}}0==l&&this.Canvas.stroke()},this.DrawAKLine=function(t){var e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetLeft()+i/2+2;e&&(r=this.ChartBorder.GetTop()+i/2+2);var n=this.ChartBorder.GetRight();e&&(n=this.ChartBorder.GetBottom());var o=this.ChartFrame.XPointCount,s=null;this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=o,this.ShowRange.FirstOpen=t,this.DrawKRange.Start=this.Data.DataOffset,this.Canvas.strokeStyle=this.Color;for(var l=this.Data.DataOffset,h=0;l<this.Data.Data.length&&h<o;++l,++h,r+=a+i,++this.ShowRange.DataCount){var u=this.Data.Data[l];if(null!=u.Open&&null!=u.High&&null!=u.Low&&null!=u.Close){null==s&&(s=u.Open,this.ShowRange.FirstOverlayOpen=u.Open);var C=r,c=r+a;if(c>n)break;var f=C+(c-C)/2,d=this.GetYFromData(u.Low/s*t,!1),D=this.GetYFromData(u.High/s*t,!1),m=this.GetYFromData(u.Open/s*t,!1),v=this.GetYFromData(u.Close/s*t,!1);this.DrawKRange.End=l,this.Canvas.beginPath(),e?(this.Canvas.moveTo(D,p(f)),this.Canvas.lineTo(d,p(f))):(this.Canvas.moveTo(p(f),D),this.Canvas.lineTo(p(f),d)),this.Canvas.stroke(),a>=4&&(this.Canvas.beginPath(),e?(this.Canvas.moveTo(p(m),C),this.Canvas.lineTo(p(m),f)):(this.Canvas.moveTo(C,p(m)),this.Canvas.lineTo(f,p(m))),this.Canvas.stroke(),this.Canvas.beginPath(),e?(this.Canvas.moveTo(p(v),c),this.Canvas.lineTo(p(v),f)):(this.Canvas.moveTo(c,p(v)),this.Canvas.lineTo(f,p(v))),this.Canvas.stroke())}}},this.DrawCloseLine=function(t){var e=!0===this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetLeft()+i/2+2;e&&(r=this.ChartBorder.GetTop()+i/2+2);var n=this.ChartBorder.GetRight();e&&(n=this.ChartBorder.GetBottom());var o=this.ChartFrame.XPointCount,s=null,l=!0;this.Canvas.strokeStyle=this.Color,we.IsNumber(this.CloseLineWidth)&&(this.Canvas.lineWidth=this.CloseLineWidth),this.ShowRange.Start=this.Data.DataOffset,this.ShowRange.End=this.ShowRange.Start,this.ShowRange.DataCount=0,this.ShowRange.ShowCount=o,this.ShowRange.FirstOpen=t,this.DrawKRange.Start=this.Data.DataOffset,this.Canvas.beginPath();for(var h=this.Data.DataOffset,u=0;h<this.Data.Data.length&&u<o;++h,++u,r+=a+i,++this.ShowRange.DataCount){var C=this.Data.Data[h];if(null!=C.Open&&null!=C.High&&null!=C.Low&&null!=C.Close){null==s&&(s=C.Open,this.ShowRange.FirstOverlayOpen=C.Open);var c=r,f=r+a;if(f>n)break;var d=c+(f-c)/2,D=this.GetYFromData(C.Close/s*t,!1);this.DrawKRange.End=h,l?(e?this.Canvas.moveTo(D,d):this.Canvas.moveTo(d,D),l=!1):e?this.Canvas.lineTo(D,d):this.Canvas.lineTo(d,D)}}0==l&&this.Canvas.stroke()},this.GetFirstOpen=function(){if(!this.MainData||!this.Data)return null;for(var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=0;e<this.MainData.Data.length&&a<t;++e,++a){var i=this.MainData.Data[e];if(null!=i.Open&&null!=i.High&&null!=i.Low&&null!=i.Close)return i.Open}return null},this.Draw=function(){if(this.TooltipRect=[],this.InfoTooltipRect=[],this.DrawKRange={Start:null,End:null},this.MainData&&this.Data){var t=(this.ChartFrame.XPointCount,this.GetFirstOpen());if(null!=t){var e=this.DrawType;null!=this.CustomDrawType&&(e=this.CustomDrawType),this.Canvas.save(),this.ClipClient(this.ChartFrame.IsHScreen),1==e?this.DrawCloseLine(t):2==e?this.DrawAKLine(t):this.DrawKBar(t),this.Canvas.restore()}}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};if(e.Max=null,e.Min=null,!this.MainData||!this.Data)return e;for(var a=null,i=this.Data.DataOffset,r=0;i<this.MainData.Data.length&&r<t;++i,++r){var n=this.MainData.Data[i];if(null!=n.Open&&null!=n.High&&null!=n.Low&&null!=n.Close){a=n.Close;break}}if(null==a)return e;for(var o,s,l=null,i=this.Data.DataOffset,r=0;i<this.Data.Data.length&&r<t;++i,++r){var n=this.Data.Data[i];n&&null!=n.Open&&null!=n.High&&null!=n.Low&&null!=n.Close&&(null==l&&(l=n.Open),o=n.High/l*a,s=n.Low/l*a,null==e.Max&&(e.Max=o),null==e.Min&&(e.Min=s),e.Max<o&&(e.Max=o),e.Min>s&&(e.Min=s))}return e},this.GetTooltipData=function(t,e,a){for(var i in this.TooltipRect){var r=this.TooltipRect[i][1];if(this.Canvas.beginPath(),this.Canvas.rect(r.X,r.Y,r.Width,r.Height),this.Canvas.isPointInPath(t,e)){var n=this.TooltipRect[i][0];return a.Data=this.Data.Data[n],a.ChartPaint=this,!0}}return!1},this.PtInChart=function(t,e){var a=this.DrawType;return we.IsNumber(this.CustomDrawType)&&(a=this.CustomDrawType),1==a||4==a?null:this.PtInKBar(t,e,{OverlayKLine:!0})},this.DrawSelectedStatus=function(){this.DrawLinePoint({OverlayKLine:!0})}}function ht(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartKlineTable",this.Data,this.RowName,this.IsShowRowName=!1,this.BGColor,this.RowCount=5,this.RowHeight=10,this.TextFontConfig=I(So.ChartKLineTable.TextFont),this.ItemMergin=I(So.ChartKLineTable.ItemMergin),this.TextFont,this.TextColor="rgb(0,0,0)",this.NameColor="rgb(0,0,0)",this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data){if(!(!0===this.ChartFrame.IsHScreen||this.RowCount<=0)){var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartFrame.GetBorder(),r=i.Bottom-i.TopTitle;this.RowHeight=r/this.RowCount;var n=i.LeftEx+So.FrameLeftMargin,o=i.RightEx,s=i.TopTitle,l=i.Bottom;if(this.BGColor){this.Canvas.fillStyle=this.BGColor;var h=i.LeftEx,u=i.RightEx-i.LeftEx,r=l-s;this.Canvas.fillRect(h,s,u,r)}var C=this.RowHeight,c=t+e;C-this.ItemMergin.Top-this.ItemMergin.Bottom>0&&(C=C-this.ItemMergin.Left-this.ItemMergin.Right),c-this.ItemMergin.Left-this.ItemMergin.Right>0&&(c=c-this.ItemMergin.Left-this.ItemMergin.Right);var f=this.GetDynamicTextFont(C,c);this.TextFont=f,this.Canvas.font=this.TextFont;for(var d=this.Data.DataOffset,D=0;d<this.Data.Data.length&&D<a;++d,++D,n+=t+e){var m=this.Data.Data[d];if(m){var h=n,p=n+t+e;if(p>o)break;if(h+(p-h)/2>o)break;0==D&&this.IsShowRowName?this.DrawRowName(s,l,h,p):this.DrawRow(m,s,l,h,p)}}}}}},this.DrawRowName=function(t,e,a,i){if(we.IsNonEmptyArray(this.RowName))for(var r=a,n=t,o=i-a,s=0;s<this.RowName.length;++s){var l=this.RowName[s],h={Left:r,Top:n,Right:i,Height:this.RowHeight,Width:o};h.Bottom=h.Top+this.RowHeight,l.Name&&h.Width>10&&(this.Canvas.fillStyle=l.Color?l.Color:this.TextColor,this.Canvas.textBaseline="middle","right"==l.TextAlign?(this.Canvas.textAlign="right",this.Canvas.fillText(l.Name,h.Right-2,h.Top+this.RowHeight/2,o-4)):"center"==l.TextAlign?(this.Canvas.textAlign="center",this.Canvas.fillText(l.Name,h.Left+h.Width/2,h.Top+this.RowHeight/2,o-4)):(this.Canvas.textAlign="left",this.Canvas.fillText(l.Name,h.Left+2,h.Top+this.RowHeight/2,o-4))),n+=this.RowHeight}},this.DrawRow=function(t,e,a,i,r){for(var n=i,o=e,s=r-i,l=0;l<t.length;++l){var h=t[l],u={Left:n,Top:o,Right:r,Height:this.RowHeight,Width:s};u.Bottom=u.Top+this.RowHeight,h.BGColor&&(this.Canvas.fillStyle=h.BGColor,this.Canvas.fillRect(u.Left,u.Top,u.Width,u.Height)),h.Color&&u.Width>10&&(this.Canvas.fillStyle=h.Color,this.Canvas.textBaseline="middle","right"==h.TextAlign?(this.Canvas.textAlign="right",this.Canvas.fillText(h.Text,u.Right-2,u.Top+this.RowHeight/2,s-4)):"center"==h.TextAlign?(this.Canvas.textAlign="center",this.Canvas.fillText(h.Text,u.Left+u.Width/2,u.Top+this.RowHeight/2,s-4)):(this.Canvas.textAlign="left",this.Canvas.fillText(h.Text,u.Left+2,u.Top+this.RowHeight/2,s-4))),o+=this.RowHeight}},this.GetDynamicTextFont=function(t,e,a){var i=parseInt(t)-2;return t<5&&(i=parseInt(t)),i>this.TextFontConfig.FontMaxSize?i=this.TextFontConfig.FontMaxSize:i<=0&&(i=1),this.FormatFontString(i,this.TextFontConfig.Family,a)},this.FormatFontString=function(t,e,a){var i;return a?a.Weight&&(i=a.Weight+" "+t+"px "+e):i=t+"px "+e,i},this.GetMaxMin=function(){return{Min:0,Max:this.RowCount}}}function ut(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMinuteVolumBar",this.UpColor=So.UpBarColor,this.DownColor=So.DownBarColor,this.UnchangeColor=So.UnchagneBarColor,this.BarColorType=1,this.CustomColor=So.Minute.VolBarColor,this.YClose,this.Symbol,this.BeforeOpenData,this.AfterCloseData,this.BeforeVolColor=So.Minute.Before.VolColor,this.ShareAfterVol=0,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.PtInChart=function(t,e){var a={MinuteVolBar:!0};return this.PtInBar(t,e,a)},this.DrawSelectedStatus=function(){return this.DrawLinePoint({MinuteVolBar:!0})},this.Draw=function(){var t=!0===this.ChartFrame.IsHScreen;if(t)var e=this.ChartBorder.GetHScreenBorder(),a=e.BottomEx;else var e=this.ChartBorder.GetBorder(),a=e.RightEx;this.DrawBeforeOpen(),this.DrawMultiDayBeforeOpen();var i=this.ChartFrame.XPointCount,r=this.ChartFrame.GetYFromData(0),n=this.YClose,o=this.Data,s=wo.IsShowMinuteColorVolBar(this.Symbol);s&&(this.Canvas.strokeStyle=this.CustomColor);for(var l=o.DataOffset,h=0;l<o.Data.length&&h<i;++l,++h){var u=o.Data[l],C=null;if(u){var c=null;if(C=u.Vol,c=u.Close,C){var f=this.ChartFrame.GetYFromData(C),d=this.ChartFrame.GetXFromIndex(h);if(d>a)break;s||(this.Canvas.strokeStyle=this.GetMinuteBarColor(c,n)),this.Canvas.beginPath(),t?(this.Canvas.moveTo(f,p(d)),this.Canvas.lineTo(r,p(d))):(this.Canvas.moveTo(p(d),f),this.Canvas.lineTo(p(d),r)),this.Canvas.stroke(),c&&(n=c)}}}this.DrawAfterClose(),this.DrawMultiDayAfterClose()},this.GetMinuteBarColor=function(t,e){return 1==this.BarColorType?t>e?this.UpColor:t<e?this.DownColor:this.UnchangeColor:t>=e?this.UpColor:this.DownColor},this.DrawBeforeOpen=function(){this.ChartBorder.LeftExtendWidth<10||this.BeforeOpenData&&this.DrawCallAuction(-1,this.BeforeOpenData,!0)},this.DrawAfterClose=function(){this.ChartBorder.RightExtendWidth<10||this.AfterCloseData&&this.DrawCallAuction(-1,this.AfterCloseData,!1)},this.DrawMultiDayBeforeOpen=function(){if(!(this.ChartBorder.MultiDayMinute.Count<=1||this.ChartBorder.MultiDayMinute.Left<=0)&&this.MultiDayBeforeOpenData){var t=0,e=this.MultiDayBeforeOpenData.length;this.DayOffset&&(we.IsNumber(this.DayOffset.Offset)&&(t=this.DayOffset.Offset),we.IsNumber(this.DayOffset.ShowDayCount)&&(e=this.DayOffset.ShowDayCount));for(var a=t,i=0;a<this.MultiDayBeforeOpenData.length&&i<e;++a,++i){var r=this.MultiDayBeforeOpenData[a];this.DrawCallAuction(i,r,!0)}}},this.DrawMultiDayAfterClose=function(){if(!(this.ChartBorder.MultiDayMinute.Count<=1||this.ChartBorder.MultiDayMinute.Right<=0)&&this.MultiDayAfterCloseData){var t=0,e=this.MultiDayAfterCloseData.length;this.DayOffset&&(we.IsNumber(this.DayOffset.Offset)&&(t=this.DayOffset.Offset),we.IsNumber(this.DayOffset.ShowDayCount)&&(e=this.DayOffset.ShowDayCount));for(var a=t,i=0;a<this.MultiDayAfterCloseData.length&&i<e;++a,++i){var r=this.MultiDayAfterCloseData[a];this.DrawCallAuction(i,r,!1)}}},this.DrawCallAuction=function(t,e,a){if(e){e.Index=t;var i=this.GetBorder(),r=!0===this.ChartFrame.IsHScreen,n=this.YClose,o=this.ChartFrame.GetYFromData(0);if(1==e.Ver)for(var s in e.Data){var l=e.Data[s];if(l&&we.IsNumber(l.Vol[0])){if(a)var h=this.ChartFrame.GetLeftExtendXFromIndex(s,e),u=this.ChartFrame.GetLeftExtendYFromData(l.Vol[0]);else var h=this.ChartFrame.GetRightExtendXFromIndex(s,e),u=this.ChartFrame.GetRightExtendYFromData(l.Vol[0]);this.Canvas.strokeStyle=l.Price>=n?this.UpColor:this.DownColor,this.Canvas.beginPath(),r?(this.Canvas.moveTo(u,p(h)),this.Canvas.lineTo(o,p(h))):(this.Canvas.moveTo(p(h),u),this.Canvas.lineTo(p(h),o)),this.Canvas.stroke(),l.Price&&(n=l.Price)}}else if(2==e.Ver||3==e.Ver){var C={Max:e.VolMax,Min:e.VolMin};for(var s in e.Data){var l=e.Data[s];if(l){if(we.IsPlusNumber(l.Vol[0])){if(a)var h=this.ChartFrame.GetLeftExtendXFromIndex(s,e),u=this.ChartFrame.GetLeftExtendYFromData(l.Vol[0],!1,{Range:C});else{var h=this.ChartFrame.GetRightExtendXFromIndex(s,e);if(1==this.ShareAfterVol)var u=this.ChartFrame.GetYFromData(l.Vol[0]);else var u=this.ChartFrame.GetRightExtendYFromData(l.Vol[0],!1,{Range:C})}this.Canvas.strokeStyle=this.GetBarColor(l.ColorID),this.Canvas.beginPath(),r?(this.Canvas.moveTo(u,p(h)),this.Canvas.lineTo(o,p(h))):(this.Canvas.moveTo(p(h),u),this.Canvas.lineTo(p(h),o)),this.Canvas.stroke()}if(we.IsPlusNumber(l.Vol[1])){if(a)var h=this.ChartFrame.GetLeftExtendXFromIndex(s,e),u=this.ChartFrame.GetLeftExtendYFromData(l.Vol[1],!1,{Range:C});else{var h=this.ChartFrame.GetRightExtendXFromIndex(s,e);if(1==this.ShareAfterVol)var u=this.ChartFrame.GetYFromData(l.Vol[1]);else var u=this.ChartFrame.GetRightExtendYFromData(l.Vol[1],!1,{Range:C})}this.Canvas.strokeStyle=this.GetBarColor(l.ColorID),this.Canvas.beginPath(),r?(u-=o,u=i.RightEx-u,this.Canvas.moveTo(u,p(h)),this.Canvas.lineTo(i.RightEx,p(h))):(u-=o,u=i.TopEx-u,this.Canvas.moveTo(p(h),u),this.Canvas.lineTo(p(h),i.TopEx)),this.Canvas.stroke()}}}}}},this.GetBarColor=function(t){switch(t){case 0:return this.UnchangeColor;case 1:return this.UpColor;case 2:return this.DownColor}if(this.BeforeVolColor&&Array.isArray(this.BeforeVolColor)){var e=t-3;if(e>=0&&e<this.BeforeVolColor.length)return this.BeforeVolColor[e]}return this.UnchangeColor},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset;this.ChartFrame.GlobalOption&&!0===this.ChartFrame.GlobalOption.IsValueFullRange&&(t=this.Data.Data.length,e=0);var a={};a.Min=0,a.Max=null;for(var i=e,r=0;i<this.Data.Data.length&&r<t;++i,++r){var n=this.Data.Data[i];n&&n.Vol&&(null==a.Max&&(a.Max=n.Vol),a.Max<n.Vol&&(a.Max=n.Vol))}return 1==this.ShareAfterVol&&(this.GetAfterCloseMaxMin(a),this.GetMultiDayAfterCloseMaxMin(a)),a},this.GetAfterCloseMaxMin=function(t){if(!(this.ChartBorder.RightExtendWidth<10)&&this.AfterCloseData){var e=this.AfterCloseData;(null==t.Max||t.Max<e.VolMax)&&(t.Max=e.VolMax)}},this.GetMultiDayAfterCloseMaxMin=function(t){if(!(this.ChartBorder.MultiDayMinute.Count<=1||this.ChartBorder.MultiDayMinute.Right<=0)&&this.MultiDayAfterCloseData)for(var e=0;e<this.MultiDayAfterCloseData.length;++e){var a=this.MultiDayAfterCloseData[e];2!=a.Ver&&3!=a.Ver||(null==t.Max||t.Max<a.VolMax)&&(t.Max=a.VolMax)}}}function Ct(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartErrorMessage",this.Draw=function(){this.IsShow&&this.NotSupportMessage&&this.DrawNotSupportmessage()}}function ct(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartLine",this.Color="rgb(255,193,37)",this.LineWidth,this.DrawType=0,this.IsDotLine=!1,this.LineDash=So.DOTLINE.LineDash,this.BreakPoint,this.DrawSelectedStatus=this.DrawLinePoint,this.PtInChart=this.PtInLine,this.ExportData=this.ExportArrayData,this.GetItemData=this.GetArrayItemData,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.IsVisible&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex()){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data)switch(this.DrawType){case 0:return this.DrawLine();case 1:return this.DrawStraightLine();case 2:return this.DrawSectionLine()}}},this.DrawLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*C()),this.IsDotLine&&this.Canvas.setLineDash(this.LineDash);for(var i=!0,r=0,n=this.Data.DataOffset,o=0;n<this.Data.Data.length&&o<a;++n,++o){var s=this.Data.Data[n];if(null!=s){var l=this.ChartFrame.GetXFromIndex(o),h=this.GetYFromData(s);if(l>e)break;i?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(h,l):this.Canvas.moveTo(l,h),i=!1):t?this.Canvas.lineTo(h,l):this.Canvas.lineTo(l,h),++r}}r>0&&this.Canvas.stroke(),this.Canvas.restore()},this.DrawStraightLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.IsMinuteFrame(),a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartFrame.XPointCount;if(t)var n=this.ChartBorder.GetHScreenBorder(),o=n.BottomEx,s=n.TopEx+i/2+So.FrameLeftMargin;else var n=this.ChartBorder.GetBorder(),s=n.LeftEx+i/2+So.FrameLeftMargin,o=n.RightEx;var l=this.GetLockRect();l&&(o=t?l.Top:l.Left),this.Canvas.save(),this.ClipClient(t),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*C()),this.Canvas.strokeStyle=this.Color,this.IsDotLine&&this.Canvas.setLineDash(this.LineDash);for(var h=!0,u=null,c=0,f=this.Data.DataOffset,d=0;f<this.Data.Data.length&&d<r;++f,++d,s+=a+i){var D=this.Data.Data[f];if(null!=D){if(e)var m=this.ChartFrame.GetXFromIndex(d);else{var p=s,v=s+a;if(v>o)break;var m=p+(v-p)/2}var g=this.GetYFromData(D,!1);if(m>o)break;h?(this.Canvas.beginPath(),t?this.Canvas.moveTo(g,m):this.Canvas.moveTo(m,g),h=!1,u={X:m,Y:g}):t?this.Canvas.lineTo(g,m):this.Canvas.lineTo(m,g),++c}else c>0&&this.Canvas.stroke(),h=!0,c=0,u=null}c>0&&(1==c&&u&&(t?this.Canvas.lineTo(u.Y,u.X+1*C()):this.Canvas.lineTo(u.X+1*C(),u.Y)),this.Canvas.stroke()),this.Canvas.restore()},this.DrawSectionLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.IsMinuteFrame(),a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartFrame.XPointCount;if(t)var n=this.ChartBorder.GetHScreenBorder(),o=n.BottomEx,s=n.TopEx+i/2+So.FrameLeftMargin;else var n=this.ChartBorder.GetBorder(),s=n.LeftEx+i/2+So.FrameLeftMargin,o=n.RightEx;var l=this.GetLockRect();l&&(o=t?l.Top:l.Left),this.Canvas.save(),this.ClipClient(t),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*C()),this.Canvas.strokeStyle=this.Color,this.IsDotLine&&this.Canvas.setLineDash(this.LineDash);for(var h=!0,u=null,c=0,f=this.Data.DataOffset,d=0;f<this.Data.Data.length&&d<r;++f,++d,s+=a+i){var D=this.Data.Data[f];if(null!=D){if(e)var m=this.ChartFrame.GetXFromIndex(d);else{var p=s,v=s+a;if(v>o)break;var m=p+(v-p)/2}var g=this.GetYFromData(D,!1);if(m>o)break;this.BreakPoint&&this.BreakPoint.has(f)&&(c>0&&this.Canvas.stroke(),h=!0,c=0,u=null),h?(this.Canvas.beginPath(),t?this.Canvas.moveTo(g,m):this.Canvas.moveTo(m,g),h=!1,u={X:m,Y:g}):t?this.Canvas.lineTo(g,m):this.Canvas.lineTo(m,g),++c}else c>0&&this.Canvas.stroke(),h=!0,c=0,u=null}c>0&&(1==c&&u&&(t?this.Canvas.lineTo(u.Y,u.X+1*C()):this.Canvas.lineTo(u.X+1*C(),u.Y)),this.Canvas.stroke()),this.Canvas.restore()}}function ft(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartArea",this.Color="rgb(255,193,37)",this.AreaColor,this.LineWidth,this.LineDash,this.AreaDirection=0,this.DrawSelectedStatus=this.DrawLinePoint,this.PtInChart=this.PtInLine,this.ExportData=this.ExportArrayData,this.GetItemData=this.GetArrayItemData,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex())return this.NotSupportMessage?void this.DrawNotSupportmessage():void(this.Data&&this.Data.Data&&this.DrawArea())},this.DrawArea=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.IsMinuteFrame(),a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartFrame.XPointCount;if(t)var n=this.ChartBorder.GetHScreenBorder(),o=n.BottomEx,s=n.TopEx+i/2+So.FrameLeftMargin;else var n=this.ChartBorder.GetBorder(),s=n.LeftEx+i/2+So.FrameLeftMargin,o=n.RightEx;var l=this.GetLockRect();l&&(o=t?l.Top:l.Left),this.Canvas.save(),this.ClipClient(t),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*C()),this.Canvas.strokeStyle=this.Color,this.AreaColor?this.Canvas.fillStyle=this.AreaColor:this.Canvas.fillStyle=aa.ColorToRGBA(this.Color,.6),we.IsNonEmptyArray(this.LineDash)&&this.Canvas.setLineDash(this.LineDas);for(var h=!0,u=null,c=null,f=0,d=this.Data.DataOffset,D=0;d<this.Data.Data.length&&D<r;++d,++D,s+=a+i){var m=this.Data.Data[d];if(we.IsNumber(m)){if(e)var p=this.ChartFrame.GetXFromIndex(D);else{var v=s,g=s+a;if(g>o)break;var p=v+(g-v)/2}var T=this.GetYFromData(m,!1);if(p>o)break;h?(this.Canvas.beginPath(),t?this.Canvas.moveTo(T,p):this.Canvas.moveTo(p,T),h=!1,u={X:p,Y:T}):(t?this.Canvas.lineTo(T,p):this.Canvas.lineTo(p,T),c={X:p,Y:T}),++f}else f>0&&this.Canvas.stroke(),u&&c&&(t?(1==this.AreaDirection?(this.Canvas.lineTo(n.RightEx,c.X),this.Canvas.lineTo(n.RightEx,u.X)):(this.Canvas.lineTo(n.LeftEx,c.X),this.Canvas.lineTo(n.LeftEx,u.X)),this.Canvas.closePath(),this.Canvas.fill()):(1==this.AreaDirection?(this.Canvas.lineTo(c.X,n.TopEx),this.Canvas.lineTo(u.X,n.TopEx)):(this.Canvas.lineTo(c.X,n.BottomEx),this.Canvas.lineTo(u.X,n.BottomEx)),this.Canvas.closePath(),this.Canvas.fill())),h=!0,f=0,u=null,c=null}f>0&&(1==f&&u&&(t?this.Canvas.lineTo(u.Y,u.X+1*C()):this.Canvas.lineTo(u.X+1*C(),u.Y)),this.Canvas.stroke(),u&&c&&(t?(1==this.AreaDirection?(this.Canvas.lineTo(n.RightEx,c.X),this.Canvas.lineTo(n.RightEx,u.X)):(this.Canvas.lineTo(n.LeftEx,c.X),this.Canvas.lineTo(n.LeftEx,u.X)),this.Canvas.closePath(),this.Canvas.fill()):(1==this.AreaDirection?(this.Canvas.lineTo(c.X,n.TopEx),this.Canvas.lineTo(u.X,n.TopEx)):(this.Canvas.lineTo(c.X,n.BottomEx),this.Canvas.lineTo(u.X,n.BottomEx)),this.Canvas.closePath(),this.Canvas.fill()))),this.Canvas.restore()}}function dt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartScatterPlot",this.Color="rgb(255,193,37)",this.Radius=3,this.TooltipData=[],this.Draw=function(){if(this.TooltipData=[],this.IsShow&&!this.ChartFrame.IsMinSize&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex())return this.NotSupportMessage?void this.DrawNotSupportmessage():void(this.Data&&this.Data.Data&&this.DrawScatterPlot())},this.DrawScatterPlot=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.IsMinuteFrame(),a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartFrame.XPointCount;if(t)var n=this.ChartBorder.GetHScreenBorder(),o=n.BottomEx,s=n.TopEx+i/2+So.FrameLeftMargin;else var n=this.ChartBorder.GetBorder(),s=n.LeftEx+i/2+So.FrameLeftMargin,o=n.RightEx;var l=this.GetLockRect();l&&(o=t?l.Top:l.Left),this.Canvas.save(),this.ClipClient(t);for(var h=this.Data.DataOffset,u=0;h<this.Data.Data.length&&u<r;++h,++u,s+=a+i){var C=this.Data.Data[h];if(C){if(e)var c=this.ChartFrame.GetXFromIndex(u);else{var f=s,d=s+a;if(d>o)break;var c=f+(d-f)/2}if(c>o)break;if(Array.isArray(C))for(var u=0;u<C.length;++u)this.DrawItem(C[u],c);else this.DrawItem(C,c)}}this.Canvas.restore()},this.DrawItem=function(t,e){if(t&&we.IsNumber(t.Value)){var a=this.GetYFromData(t.Value,!1),i=this.Radius;if(t.Radius&&(i=t.Radius),we.IsNumber(i)){this.Canvas.beginPath(),this.Canvas.arc(e,a,i,0,2*Math.PI);var r=this.Color;t.Color&&(r=t.Color),r&&(this.Canvas.fillStyle=r,this.Canvas.fill()),t.ColorBorder&&(this.Canvas.strokeStyle=t.ColorBorder,this.Canvas.stroke());var n={X:e,Y:a,Radius:i,Data:t};this.TooltipData.push(n)}}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset;this.ChartFrame.GlobalOption&&this.ChartFrame.GlobalOption.IsValueFullRange&&(e=0,t=this.Data.Data.length);var a={};if(a.Min=null,a.Max=null,!this.Data||!this.Data.Data)return a;for(var i=e,r=0;i<this.Data.Data.length&&r<t;++i,++r){var n=this.Data.Data[i];if(n)if(Array.isArray(n))for(var o=0;o<n.length;++o){var s=n[o];we.IsNumber(s.Value)&&(null==a.Max&&(a.Max=s.Value),null==a.Min&&(a.Min=s.Value),a.Max<s.Value&&(a.Max=s.Value),a.Min>s.Value&&(a.Min=s.Value))}else{if(!we.IsNumber(n.Value))continue;null==a.Max&&(a.Max=n.Value),null==a.Min&&(a.Min=n.Value),a.Max<n.Value&&(a.Max=n.Value),a.Min>n.Value&&(a.Min=n.Value)}}return a},this.GetTooltipData=function(t,e,a){if(!this.IsShow)return!1;if(!we.IsNonEmptyArray(this.TooltipData))return!1;for(var i=this.TooltipData.length-1;i>=0;--i){var r=this.TooltipData[i];if(this.Canvas.beginPath(),this.Canvas.arc(r.X,r.Y,r.Radius,0,2*Math.PI),this.Canvas.isPointInPath(t,e))return Xn.Chart.Log("[ChartScatterPlot::GetTooltipData] point",r),a.Data=r,a.ChartPaint=this,a.Type=6,!0}}}function Dt(){this.newMethod=ct,this.newMethod(),delete this.newMethod,this.ClassName="ChartSubLine",this.Color="rgb(255,193,37)",this.LineWidth,this.DrawType=0,this.IsDotLine=!1,this.SubFrame={Max:null,Min:null},this.Draw=function(){if(this.IsShow&&this.Data&&this.Data.Data)switch(this.CalculateDataMaxMin(),this.DrawType){case 0:return this.DrawLine();case 1:return this.DrawStraightLine()}},this.GetYFromData=function(t){if(!0===this.ChartFrame.IsHScreen){if(t<=this.SubFrame.Min)return this.ChartBorder.GetLeftEx();if(t>=this.SubFrame.Max)return this.ChartBorder.GetRightEx();var e=this.ChartBorder.GetWidthEx()*(t-this.SubFrame.Min)/(this.SubFrame.Max-this.SubFrame.Min);return this.ChartBorder.GetLeftEx()+e}if(t<=this.SubFrame.Min)return this.ChartBorder.GetBottomEx();if(t>=this.SubFrame.Max)return this.ChartBorder.GetTopEx();var a=this.ChartBorder.GetHeightEx()*(t-this.SubFrame.Min)/(this.SubFrame.Max-this.SubFrame.Min);return this.ChartBorder.GetBottomEx()-a},this.CalculateDataMaxMin=function(){this.SubFrame={Max:null,Min:null};var t=!0===this.ChartFrame.IsHScreen,e=this.ChartBorder.GetRight();t&&(e=this.ChartBorder.GetBottom());for(var a=this.ChartFrame.XPointCount,i=this.Data.DataOffset,r=0;i<this.Data.Data.length&&r<a;++i,++r){var n=this.Data.Data[i];if(null!=n){if(this.ChartFrame.GetXFromIndex(r)>e)break;(null==this.SubFrame.Min||this.SubFrame.Min>n)&&(this.SubFrame.Min=n),(null==this.SubFrame.Max||this.SubFrame.Max<n)&&(this.SubFrame.Max=n)}}},this.GetMaxMin=function(){return{Min:null,Max:null}}}function mt(){this.newMethod=ct,this.newMethod(),delete this.newMethod,this.MainData=new tt,this.Draw=function(){if(this.Data&&this.Data.Data&&this.MainData&&this.MainData.Data)switch(this.DrawType){case 0:return this.DrawLine();case 1:return this.DrawStraightLine()}},this.GetFirstVaildIndex=function(){for(var t=this.Data.DataOffset,e=t,a=0;e<this.MainData.Data.length&&e<this.Data.Data.length;++e,++a){var i=this.MainData.Data[e],r=this.Data.Data[e];if(we.IsNumber(i)&&we.IsNumber(r))return{Index:a,DataOffset:e,OverlayValue:r,MainValue:i}}return null},this.DrawStraightLine=function(){var t=this.GetFirstVaildIndex();if(t){var e=!0===this.ChartFrame.IsHScreen,a=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());e&&(a=this.ChartBorder.GetBottom());var i=this.ChartFrame.XPointCount,r=this.GetLockRect();r&&(a=e?r.Top:r.Left),this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*C()),this.Canvas.strokeStyle=this.Color,this.IsDotLine&&this.Canvas.setLineDash([3,5]);for(var n=!0,o=0,s=0,l=t.DataOffset,h=t.Index;l<this.Data.Data.length&&h<i;++l,++h){var u=this.Data.Data[l];if(null!=u){var c=this.ChartFrame.GetXFromIndex(h),f=u-t.OverlayValue;s=0!=t.OverlayValue?1+f/Math.abs(t.OverlayValue):1+f;var d=t.MainValue*s,D=this.GetYFromData(d);if(c>a)break;n?(this.Canvas.beginPath(),e?this.Canvas.moveTo(D,c):this.Canvas.moveTo(c,D),n=!1):e?this.Canvas.lineTo(D,c):this.Canvas.lineTo(c,D),++o}else o>0&&this.Canvas.stroke(),n=!0,o=0}o>0&&this.Canvas.stroke(),this.Canvas.restore()}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};e.Min=null,e.Max=null;var a=this.GetFirstVaildIndex();if(!a)return e;for(var i=a.DataOffset,r=a.Index;i<this.Data.Data.length&&r<t;++i,++r){var n=this.Data.Data[i];if(we.IsNumber(n)){var o=n-a.OverlayValue;0!=a.OverlayValue?rate=1+o/Math.abs(a.OverlayValue):rate=1+o;var s=a.MainValue*rate;null==e.Max&&(e.Max=s),null==e.Min&&(e.Min=s),e.Max<s&&(e.Max=s),e.Min>s&&(e.Min=s)}}return e}}function pt(){this.newMethod=ct,this.newMethod(),delete this.newMethod,this.ClassName="ChartSingleLine",this.MaxMin=null,this.Draw=function(){if(this.MaxMin=null,this.IsShow&&!this.ChartFrame.IsMinSize&&this.IsVisible&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex()&&this.Data&&this.Data.Data&&(this.MaxMin=this.GetCurrentMaxMin(),this.MaxMin&&we.IsNumber(this.MaxMin.Max)&&we.IsNumber(this.MaxMin.Min)))return this.DrawType,this.DrawStraightLine()},this.GetCurrentMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Max:null,Min:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];we.IsNumber(r)&&(null==e.Max&&(e.Max=r),null==e.Min&&(e.Min=r),e.Max<r&&(e.Max=r),e.Min>r&&(e.Min=r))}return e},this.GetMaxMin=function(){return{Max:null,Min:null}},this.GetYFromData=function(t){if(!0===this.ChartFrame.IsHScreen){if(t<=this.MaxMin.Min)return this.ChartBorder.GetLeftEx();if(t>=this.MaxMin.Max)return this.ChartBorder.GetRightEx();var e=this.ChartBorder.GetWidthEx()*(t-this.MaxMin.Min)/(this.MaxMin.Max-this.MaxMin.Min);return this.ChartBorder.GetLeftEx()+e}if(t<=this.MaxMin.Min)return this.ChartBorder.GetBottomEx();if(t>=this.MaxMin.Max)return this.ChartBorder.GetTopEx();var a=this.ChartBorder.GetHeightEx()*(t-this.MaxMin.Min)/(this.MaxMin.Max-this.MaxMin.Min);return this.ChartBorder.GetBottomEx()-a}}function vt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartPartLine",this.LineWidth,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex())return this.NotSupportMessage?void this.DrawNotSupportmessage():void(this.Data&&this.Data.Data&&this.DrawLine())},this.DrawLine=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth;if(t)var i=this.ChartBorder.GetHScreenBorder(),r=i.BottomEx,n=i.TopEx+a/2+So.FrameLeftMargin;else var i=this.ChartBorder.GetBorder(),n=i.LeftEx+a/2+So.FrameLeftMargin,r=i.RightEx;var o=this.ChartFrame.XPointCount,s=this.IsMinuteFrame();this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*C());for(var l,h=0,u={X:null,Y:null},c=!1,f=this.Data.DataOffset,d=0;f<this.Data.Data.length&&d<o;++f,++d,n+=e+a){var D=this.Data.Data[f];if(null!=D&&null!=D.Value){if(s)var m=this.ChartFrame.GetXFromIndex(d);else{var p=n,v=n+e;if(v>r)break;var m=p+(v-p)/2}var g=D.Value,T=D.RGB,I=this.ChartFrame.GetYFromData(g);if(m>r)break;T!=l||1==c?(l&&h>0&&this.Canvas.stroke(),h=0,l=T,this.Canvas.strokeStyle=T,this.Canvas.beginPath(),null!=u.X&&null!=u.Y?(t?this.Canvas.moveTo(u.Y,u.X):this.Canvas.moveTo(u.X,u.Y),t?this.Canvas.lineTo(I,m):this.Canvas.lineTo(m,I),++h):t?this.Canvas.moveTo(I,m):this.Canvas.moveTo(m,I)):(t?this.Canvas.lineTo(I,m):this.Canvas.lineTo(m,I),++h),u.X=m,u.Y=I,c=!1}else u.X=null,u.Y=null,c=!0}h>0&&this.Canvas.stroke(),this.Canvas.restore()},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};e.Min=null,e.Max=null;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];r&&r.Value&&((null==e.Max||e.Max<r.Value)&&(e.Max=r.Value),(null==e.Min||e.Min>r.Value)&&(e.Min=r.Value))}return e},this.ExportData=function(t,e){var a=[],i=[];if(we.IsNonEmptyArray(this.Data.Data)){var r=0,n=this.Data.length-1;e&&e.Start&&e.End&&we.IsNumber(e.Start.Index)&&we.IsNumber(e.End.Index)&&(r=e.Start.Index,n=e.End.Index);for(var o=r;o<=n&&o<this.Data.Data.length;++o){var s=this.Data.Data[o];a[o]=null,i[o]=null,s&&we.IsNumber(s.Value)&&(a[o]=s.Value,i[o]=s.RGB)}}return[{Name:this.Name+"-Value",Data:a},{Name:this.Name+"-Color",Data:i}]}}function gt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartStepLine",this.LineWidth=1,this.DotLine,this.IsHScreen,this.IsDotLine=!1,this.PtInChart=function(t,e){if(this.IsShow&&!this.ChartFrame.IsMinSize){var a=!0===this.ChartFrame.IsHScreen;if(!a){var i=this.IsMinuteFrame(),r=this.ChartFrame.DataWidth,n=this.ChartFrame.DistanceWidth,o=this.ChartFrame.XPointCount,s=this.GetLockRect();if(a){var l=this.ChartBorder.GetHScreenBorder(),h=l.BottomEx,u=l.TopEx+n/2+So.FrameLeftMargin;s&&(h=s.Top)}else{var l=this.ChartBorder.GetBorder(),u=l.LeftEx+n/2+So.FrameLeftMargin,h=l.RightEx;s&&(h=s.Left)}if(t<u||t>h)return null;if(e>l.BottomEx||e<l.TopEx)return null;for(var C={},c={},f=this.Data.DataOffset;f>=0;--f){var d=this.Data.Data[f];if(we.IsNumber(d)){var D=this.GetYFromData(d,!1),m=null;m=i?this.ChartFrame.GetXFromIndex(0):u,C.Y=D,C.X=m}}for(var f=this.Data.DataOffset,p=0;f<this.Data.Data.length&&p<o;++f,++p,u+=r+n){var d=this.Data.Data[f];if(we.IsNumber(d)){if(i)var v=this.ChartFrame.GetXFromIndex(p);else{var g=u,T=u+r;if(T>h)break;var v=g+(T-g)/2}var I=this.GetYFromData(d,!1);if(!(v<t)){if(v==t){C.X=c.X=v,C.Y=c.Y=I;break}c.X=v,c.Y=I;break}if(C.X=v,C.Y=I,t>h)break}}return we.IsNumber(C.X)&&we.IsNumber(C.Y)&&we.IsNumber(c.X)&&we.IsNumber(c.Y)?t==C.X||e==C.Y?{Identify:this.Identify,Chart:this}:t==c.X||e==c.Y?{Identify:this.Identify,Chart:this}:t>=C.X&&t<=c.X&&e>=C.Y-3&&e<=C.Y+3?{Identify:this.Identify,Chart:this}:t>=c.X-3&&t<=c.X+3&&e>=Math.min(C.Y,c.Y)&&e<Math.max(C.Y,c.Y)?{Identify:this.Identify,Chart:this}:null:null}}},this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize)return this.NotSupportMessage?void this.DrawNotSupportmessage():void(this.Data&&this.Data.Data&&(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.Canvas.save(),this.ClipClient(this.IsHScreen),this.DrawLine(),this.Canvas.restore()))},this.DrawLine=function(){var t=this.IsMinuteFrame(),e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartFrame.XPointCount,r=this.GetLockRect();if(this.IsHScreen){var n=this.ChartBorder.GetHScreenBorder(),o=n.BottomEx,s=n.TopEx+a/2+So.FrameLeftMargin;r&&(o=r.Top)}else{var n=this.ChartBorder.GetBorder(),s=n.LeftEx+a/2+So.FrameLeftMargin,o=n.RightEx;r&&(o=r.Left)}this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*C()),this.IsDotLine&&this.Canvas.setLineDash(So.DOTLINE.LineDash),this.DotLine&&this.Canvas.setLineDash(this.DotLine),this.Canvas.strokeStyle=this.Color;for(var l=!0,h=0,u={X:null,Y:null},c=this.Data.DataOffset;c>=0;--c){var f=this.Data.Data[c];if(we.IsNumber(f)){var d=this.GetYFromData(f,!1),D=null;D=t?this.ChartFrame.GetXFromIndex(0):s,this.Canvas.beginPath(),this.IsHScreen?this.Canvas.moveTo(d,D):this.Canvas.moveTo(D,d),l=!1,u.Y=d,u.X=D}}for(var c=this.Data.DataOffset,m=0;c<this.Data.Data.length&&m<i;++c,++m,s+=e+a){if(t)var D=this.ChartFrame.GetXFromIndex(m);else{var p=s,v=s+e;if(v>o)break;var D=p+(v-p)/2}if(D>o)break;var f=this.Data.Data[c];if(we.IsNumber(f)){var d=this.GetYFromData(f,!1);l?(this.Canvas.beginPath(),this.IsHScreen?this.Canvas.moveTo(d,D):this.Canvas.moveTo(D,d),l=!1,u.X=D,u.Y=d):(this.IsHScreen?(this.Canvas.lineTo(u.Y,D),this.Canvas.lineTo(d,D)):(this.Canvas.lineTo(D,u.Y),this.Canvas.lineTo(D,d)),u.X=D,u.Y=d),++h}}h>0&&this.Canvas.stroke()},this.DrawSelectedStatus=function(){this.DrawLinePoint()}}function Tt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartSlopeLine",this.Color="rgb(255,193,37)",this.IsDotLine=!1,this.LineWidth,this.Option,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data){this.Canvas.save(),this.Canvas.strokeStyle=this.Color,this.IsDotLine&&this.Canvas.setLineDash(So.DOTLINE.LineDash);var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetTopEx(),a=this.ChartBorder.GetRight(),i=this.ChartBorder.GetBottom(),r=this.ChartBorder.GetRight(),n=this.ChartFrame.XPointCount;this.Canvas.beginPath(),this.Canvas.rect(t,e,a-t,i-e),this.Canvas.clip();for(var o=this.Data.DataOffset,s=0;o<this.Data.Data.length&&s<n;++o,++s){var l=this.Data.Data[o];if(we.IsNumber(l)){var h=this.Option[o];if(h){var u=this.ChartFrame.GetXFromIndex(s),C=this.ChartFrame.GetYFromData(l),c=h.Length*So.DRAWSL.PixelWidth;if(u>r)break;var f=Math.sqrt(c*c/(1+h.Slope*h.Slope)),d=f*h.Slope;this.Canvas.beginPath(),2==h.Direct?(this.Canvas.moveTo(u-f,C+d),this.Canvas.lineTo(u+f,C-d)):1==h.Direct?(this.Canvas.moveTo(u,C),this.Canvas.lineTo(u-f,C+d)):(this.Canvas.moveTo(u,C),this.Canvas.lineTo(u+f,C-d)),this.Canvas.stroke()}}}this.Canvas.restore()}}}}function It(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartPointDot",this.Color="rgb(255,193,37)",this.Radius=1,this.EnableUpDownColor=!1,this.HistoryData,this.ExportData=this.ExportArrayData,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.IsVisible&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex()){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());!0===t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),this.ClipClient(t),this.Canvas.fillStyle=this.Color;for(var i,r=this.Data.DataOffset,n=0;r<this.Data.Data.length&&n<a;++r,++n){var o=this.Data.Data[r];if(null!=o){var s=this.ChartFrame.GetXFromIndex(n),l=this.ChartFrame.GetYFromData(o,!1);if(s>e)break;if(this.EnableUpDownColor){i=this.HistoryData.Data[r].Close>o?"rgb(255,61,61)":"rgb(0,199,65)",this.Canvas.fillStyle=i}this.Canvas.beginPath(),t?this.Canvas.arc(l,s,this.Radius,0,2*Math.PI,!0):this.Canvas.arc(s,l,this.Radius,0,2*Math.PI,!0),this.Canvas.closePath(),this.Canvas.fill()}}this.Canvas.restore()}}}}function St(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.Color="rgb(255,193,37)",this.LineWidth,this.ClassName="ChartStick",this.ExportData=this.ExportArrayData,this.DrawLine=function(){if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());!0===t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*C());for(var i=!0,r=0,n=this.Data.DataOffset,o=0;n<this.Data.Data.length&&o<a;++n,++o){var s=this.Data.Data[n];if(null!=s){var l=this.ChartFrame.GetXFromIndex(o),h=this.ChartFrame.GetYFromData(s);if(l>e)break;i?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(h,l):this.Canvas.moveTo(l,h),i=!1):t?this.Canvas.lineTo(h,l):this.Canvas.lineTo(l,h),++r}}r>0&&this.Canvas.stroke(),this.Canvas.restore()}},this.DrawStick=function(){if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartBorder.GetRight();t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetBottom(),r=this.ChartBorder.GetLeft();this.Canvas.save(),this.Canvas.strokeStyle=this.Color,this.LineWidth&&(this.Canvas.lineWidth=this.LineWidth*C());for(var n=this.Canvas.lineWidth,o=this.Data.DataOffset,s=0;o<this.Data.Data.length&&s<a;++o,++s){var l=this.Data.Data[o];if(null!=l){var h=this.ChartFrame.GetXFromIndex(s),u=this.ChartFrame.GetYFromData(l);if(h>e)break;if(this.Canvas.beginPath(),t)this.Canvas.moveTo(r,h),this.Canvas.lineTo(u,h),this.Canvas.stroke();else{var c=v(n,h);this.Canvas.moveTo(c,u),this.Canvas.lineTo(c,i)}this.Canvas.stroke()}}this.Canvas.restore()}},this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&!this.IsHideScriptIndex())return this.NotSupportMessage?void this.DrawNotSupportmessage():void(this.Data&&this.Data.Data&&this.DrawStick())}}function xt(){this.newMethod=St,this.newMethod(),delete this.newMethod,this.ClassName="ChartLineStick",this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex()){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();this.DrawStick(),this.DrawLine()}}}function bt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.UpColor=So.UpBarColor,this.DownColor=So.DownBarColor,this.HistoryData,this.KLineDrawType=0,this.ClassName="ChartVolStick",this.BarWidth,this.BarType,this.BarColorType=0,this.PtInChart=this.PtInBar,this.DrawSelectedStatus=this.DrawLinePoint,this.ExportData=this.ExportArrayData,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.IsVisible&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex()){if(!0===this.ChartFrame.IsHScreen)return void this.HScreenDraw();var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetBorder(),i=a.LeftEx+e/2+So.FrameLeftMargin,r=a.RightEx,n=this.ChartFrame.XPointCount,o=this.GetLockRect();o&&(r=o.Left);var s=this.IsMinuteFrame(),l=this.ChartFrame.GetYFromData(0);if(this.Canvas.save(),t>=4&&1!==this.BarWidth){l=g(l);for(var h=this.Data.DataOffset,u=0;h<this.Data.Data.length&&u<n;++h,++u,i+=t+e){var c=this.Data.Data[h],f=this.HistoryData.Data[h];if(null!=c&&null!=f&&0!=c){var d=i,D=i+t;if(D>r)break;var m=this.ChartFrame.GetYFromData(c),v=this.GetBarColor(f,c),T=v.IsUp,I=g(Math.abs(l-m)>=1?l-m:1);m=l-I;this.IsSolidBar(T)?(this.Canvas.fillStyle=v.Color,this.Canvas.fillRect(g(d),m,g(t),I)):(this.Canvas.strokeStyle=v.Color,this.Canvas.beginPath(),this.Canvas.rect(p(d),p(m),g(t),I),this.Canvas.stroke())}}}else{var S=null,v=null;this.Canvas.linewidth=1*C();for(var h=this.Data.DataOffset,u=0;h<this.Data.Data.length&&u<n;++h,++u,i+=t+e){var c=this.Data.Data[h],f=this.HistoryData.Data[h];if(null!=c&&null!=f){var m=this.ChartFrame.GetYFromData(c);if(s)var x=this.ChartFrame.GetXFromIndex(u);else var d=i,D=i+t,x=d+(D-d)/2;if(x>r)break;v=s?this.GetMinuteBarColor(f,S):this.GetBarColor(f,c),this.Canvas.strokeStyle=v.Color,this.Canvas.beginPath(),this.Canvas.moveTo(p(x),m),this.Canvas.lineTo(p(x),l),this.Canvas.stroke(),S=f}}}this.Canvas.restore()}},this.HScreenDraw=function(){var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartBorder.GetHScreenBorder(),i=a.TopEx+e/2+So.FrameLeftMargin,r=a.BottomEx,n=this.ChartFrame.XPointCount,o=this.GetLockRect();o&&(r=o.Top);var s=this.IsMinuteFrame(),l=this.ChartFrame.GetYFromData(0);if(t>=4){l=g(l);for(var h=this.Data.DataOffset,u=0;h<this.Data.Data.length&&u<n;++h,++u,i+=t+e){var C=this.Data.Data[h],c=this.HistoryData.Data[h];if(null!=C&&null!=c){var f=i,d=i+t;if(d>r)break;var D=this.ChartFrame.GetYFromData(C),m=this.GetBarColor(c,C),v=m.IsUp,T=g(D-l);this.IsSolidBar(v)?(this.Canvas.fillStyle=m.Color,this.Canvas.fillRect(l,g(f),T,g(t))):(this.Canvas.strokeStyle=m.Color,this.Canvas.beginPath(),this.Canvas.rect(p(l),p(f),T,g(t)),this.Canvas.stroke())}}}else for(var I=null,m=null,h=this.Data.DataOffset,u=0;h<this.Data.Data.length&&u<n;++h,++u,i+=t+e){var C=this.Data.Data[h],c=this.HistoryData.Data[h];if(null!=C&&null!=c){var D=this.ChartFrame.GetYFromData(C);if(s)var S=this.ChartFrame.GetXFromIndex(u);else var f=i,d=i+t,S=f+(d-f)/2;if(S>r)break;m=s?this.GetMinuteBarColor(c,I):this.GetBarColor(c,C);var v=m.IsUp;this.Canvas.strokeStyle=m.Color,this.Canvas.beginPath(),this.Canvas.moveTo(D,p(S)),this.Canvas.lineTo(l,p(S)),this.Canvas.stroke(),I=c}}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset;this.ChartFrame.GlobalOption&&this.ChartFrame.GlobalOption.IsValueFullRange&&(e=0,t=this.Data.Data.length);for(var a={Min:null,Max:null},i=e,r=0;i<this.Data.Data.length&&r<t;++i,++r){var n=this.Data.Data[i];(!we.IsNumber(a.Max)||a.Max<n)&&(a.Max=n),(!we.IsNumber(a.Min)||a.Min>n)&&(a.Min=n)}return a.Max>0&&a.Min>0?a.Min=0:a.Max<0&&a.Min<0&&(a.Max=0),a},this.GetBarColor=function(t,e){return 1===this.BarColorType?e>=0?{Color:this.UpColor,IsUp:!0}:{Color:this.DownColor,IsUp:!1}:t.Close>=t.Open?{Color:this.UpColor,IsUp:!0}:{Color:this.DownColor,IsUp:!1}},this.IsSolidBar=function(t){var e=!0;return 0===this.BarType||1===this.BarType||2===this.BarType?0===this.BarType?e=!1:2===this.BarType&&(e=t):6==this.KLineDrawType?e=!1:!t||1!=this.KLineDrawType&&2!=this.KLineDrawType&&3!=this.KLineDrawType||(e=!1),e},this.GetMinuteBarColor=function(t,e){var a=t.YClose;return e&&(a=e.Close),t.Close>=a?{Color:this.UpColor,IsUp:!0}:{Color:this.DownColor,IsUp:!1}},this.GetItemData=function(t){if(!t)return null;if(!we.IsNumber(t.Index))return null;if(!this.HistoryData||!we.IsNonEmptyArray(this.HistoryData.Data))return null;if(!this.Data||!we.IsNonEmptyArray(this.Data.Data))return null;var e=t.Index;if(e<0||e>=this.Data.Data.length||e>=this.HistoryData.Data.length)return null;var a=this.Data.Data[e],i=this.HistoryData.Data[e];return[{Value:a,Color:this.GetBarColor(i).Color,Name:this.Name}]}}function yt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartVericaltLine",this.LineWidth=2,this.LineCap,this.Draw=function(){if(!this.ChartFrame.IsMinSize){var t=1==this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.GetBorder(),r=this.ChartFrame.XPointCount;if(t)var n=i.RightEx,o=i.LeftEx,s=i.TopEx+a/2+So.FrameLeftMargin;else var n=i.TopEx,o=i.BottomEx,s=i.LeftEx+a/2+So.FrameLeftMargin;this.Canvas.save(),this.Canvas.strokeStyle=this.Color,this.LineType&&this.Canvas.setLineDash(this.LineType),this.LineCap&&(this.Canvas.lineCap=this.LineCap),this.Canvas.beginPath();var l=this.Canvas.lineWidth;this.LineWidth>0&&(l=this.LineWidth*C(),this.Canvas.lineWidth=l);for(var h=0,u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<r;++u,++c,s+=e+a){if(this.Data.Data[u]){var f=s+e/2;f=v(l,f),t?(this.Canvas.moveTo(n,f),this.Canvas.lineTo(o,f)):(this.Canvas.moveTo(f,n),this.Canvas.lineTo(f,o)),++h}}h>0&&this.Canvas.stroke(),this.Canvas.restore()}},this.GetMaxMin=function(){return{Min:null,Max:null}}}function Et(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartHorizontalLine",this.LineWidth=2,this.LineCap,this.ExtendType=0,this.Draw=function(){if(!this.ChartFrame.IsMinSize){var t=1==this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.GetBorder(),r=this.ChartFrame.XPointCount;if(t)var n=i.TopEx,o=i.BottomEx,s=i.TopEx+a/2+So.FrameLeftMargin;else var n=i.LeftEx,o=i.RightEx,s=i.LeftEx+a/2+So.FrameLeftMargin;this.Canvas.save(),this.Canvas.strokeStyle=this.Color,this.LineType&&this.Canvas.setLineDash(this.LineType),this.LineCap&&(this.Canvas.lineCap=this.LineCap),this.Canvas.beginPath();var l=this.Canvas.lineWidth;this.LineWidth>0&&(l=this.LineWidth*C(),this.Canvas.lineWidth=l);for(var h=0,u=this.Data.DataOffset,c=0;u<this.Data.Data.length&&c<r;++u,++c,s+=e+a){var f=this.Data.Data[u];if(f&&we.IsNumber(f)){var d=this.ChartFrame.GetYFromData(f);d=v(l,d);var D=s+e/2;D=v(l,D),3==this.ExtendType?t?(this.Canvas.moveTo(d,n),this.Canvas.lineTo(d,o)):(this.Canvas.moveTo(n,d),this.Canvas.lineTo(o,d)):1==this.ExtendType?t?(this.Canvas.moveTo(d,n),this.Canvas.lineTo(d,D)):(this.Canvas.moveTo(n,d),this.Canvas.lineTo(D,d)):t?(this.Canvas.moveTo(d,D),this.Canvas.lineTo(d,o)):(this.Canvas.moveTo(D,d),this.Canvas.lineTo(o,d)),++h}}h>0&&this.Canvas.stroke(),this.Canvas.restore()}}}function wt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartLineMultiData",this.Color="rgb(255,193,37)",this.PointColor,this.PointRadius,this.LineWidth,this.Draw=function(){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight());t&&(e=this.ChartBorder.GetBottom());var a=this.ChartFrame.XPointCount;this.Canvas.save(),we.IsPlusNumber(this.LineWidth)&&(this.Canvas.lineWidth=this.LineWidth*C());for(var i,r=!0,n=0,o=[],s=this.Data.DataOffset,l=0;s<this.Data.Data.length&&l<a;++s,++l){var h=this.Data.Data[s];if(h){var u=this.ChartFrame.GetXFromIndex(l);if(u>e)break;i=Array.isArray(h)?h:[h];for(var c=0;c<i.length;++c){var f=i[c];if(f){var d=f.Value,D=this.ChartFrame.GetYFromData(d);r?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(D,u):this.Canvas.moveTo(u,D),r=!1,1===f.Type&&o.push({X:u,Y:D})):(t?this.Canvas.lineTo(D,u):this.Canvas.lineTo(u,D),1===f.Type&&o.push({X:u,Y:D})),++n}}}}n>0&&this.Canvas.stroke(),this.DrawPoint(o),this.Canvas.restore()}},this.DrawPoint=function(t){if(this.PointColor&&we.IsPlusNumber(this.PointRadius))for(var e=this.PointRadius*C(),a=0;a<t.length;++a){var i=t[a];this.Canvas.beginPath(),this.Canvas.arc(i.X,i.Y,e,0,360,!1),this.Canvas.fillStyle=this.PointColor,this.Canvas.fill(),this.Canvas.closePath()}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};if(e.Min=null,e.Max=null,!this.Data||!this.Data.Data)return e;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(r){var n;n=Array.isArray(r)?r:[r];for(var i=0;i<n.length;++i){var o=n[i].Value;we.IsNumber(o)&&(null==e.Max&&(e.Max=o),null==e.Min&&(e.Min=o),e.Max<o&&(e.Max=o),e.Min>o&&(e.Min=o))}}}return e}}function Ft(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartStickLine",this.Color="rgb(255,193,37)",this.BarType=0,this.LineDotted=[3,3],this.Width=0,this.SetEmptyBar=function(){if(1!=this.BarType&&-1!=this.BarType)return!1;this.Canvas.lineWidth=C(),this.Canvas.strokeStyle=this.Color;var t=So.EmptyBarBGColor;return t&&(this.Canvas.fillStyle=t),-1==this.BarType&&this.Canvas.setLineDash(this.LineDotted),!0},this.IsEmptyBar=function(){return 1==this.BarType||-1==this.BarType},this.CalculateBarHeight=function(t,e){var a=Math.abs(t-e);return a<=0&&(a=1),a},this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.IsVisible&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex()){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetRight();this.ChartFrame.ZoomIndex;t&&(i=this.ChartBorder.GetBottom());var r=this.ChartFrame.XPointCount,n=this.ChartBorder.GetLeft()+a/2+So.FrameLeftMargin;t&&(n=this.ChartBorder.GetTop()+a/2+So.FrameLeftMargin);var o=this.IsMinuteFrame();this.Canvas.save();var s=!1,l=!1,h=So.EmptyBarBGColor;if(o)this.Width>1?this.Canvas.lineWidth=2*C():this.Canvas.lineWidth=C(),this.Canvas.strokeStyle=this.Color;else if(0==this.Width)this.SetEmptyBar(),this.Canvas.lineWidth=C(),this.Canvas.strokeStyle=this.Color;else if(3==this.Width||50==this.Width)e>=4?(l=!0,this.SetEmptyBar(),this.IsEmptyBar()||(this.Canvas.fillStyle=this.Color),this.Canvas.strokeStyle=this.Color):(this.Canvas.lineWidth=C(),this.Canvas.strokeStyle=this.Color);else if(101==this.Width){var u=e+a+1*C();this.Canvas.lineWidth=u,this.Canvas.strokeStyle=this.Color}else if(this.Width<=3){var c=2*C(),f=e*(this.Width/3);f<c&&(f=c),this.SetEmptyBar(),this.IsEmptyBar()||(this.Canvas.fillStyle=this.Color),s=!0}else{var f=this.Width*C()+e;this.SetEmptyBar(),this.IsEmptyBar()||(this.Canvas.fillStyle=this.Color),s=!0}for(var d=this.Data.DataOffset,D=0;d<this.Data.Data.length&&D<r;++d,++D,n+=e+a){var m=this.Data.Data[d];if(null!=m){var v=m.Value,T=m.Value2;if(null==T&&(T=0),o)var I=this.ChartFrame.GetXFromIndex(D);else var S=n,x=n+e,I=S+(x-S)/2;var b=this.ChartFrame.GetYFromData(v),y=this.ChartFrame.GetYFromData(T);if(I>i)break;if(s)if(t){var S=I-f/2,E=f;this.IsEmptyBar()?(this.Canvas.beginPath(),this.Canvas.rect(p(Math.min(b,y)),p(S),g(Math.abs(b-y)),g(E)),this.Canvas.stroke()):this.Canvas.fillRect(g(Math.min(b,y)),g(S),g(Math.abs(b-y)),g(E))}else{var S=I-f/2,E=f;S+E>i&&(E=i-S),this.IsEmptyBar()?(h&&this.Canvas.fillRect(g(S),g(Math.min(b,y)),g(E),g(Math.abs(b-y))),this.Canvas.beginPath(),this.Canvas.rect(p(S),p(Math.min(b,y)),g(E),g(Math.abs(b-y))),this.Canvas.stroke()):this.Canvas.fillRect(g(S),g(Math.min(b,y)),g(E),g(this.CalculateBarHeight(b,y)))}else if(l)this.IsEmptyBar()?t?(this.Canvas.beginPath(),this.Canvas.rect(p(Math.min(b,y)),p(n),g(Math.abs(b-y)),g(e)),this.Canvas.stroke()):(h&&this.Canvas.fillRect(g(n),g(Math.min(b,y)),g(e),g(Math.abs(b-y))),this.Canvas.beginPath(),this.Canvas.rect(p(n),p(Math.min(b,y)),g(e),g(Math.abs(b-y))),this.Canvas.stroke()):t?this.Canvas.fillRect(g(Math.min(b,y)),g(n),g(Math.abs(b-y)),g(e)):this.Canvas.fillRect(g(n),g(Math.min(b,y)),g(e),g(this.CalculateBarHeight(b,y)));else if(t)this.Canvas.beginPath(),this.Canvas.moveTo(b,p(I)),this.Canvas.lineTo(y,p(I)),this.Canvas.stroke();else{var w=parseInt(I.toString())+.5;this.Canvas.beginPath(),this.Canvas.moveTo(w,b),Math.abs(b-y)>0?this.Canvas.lineTo(w,y):this.Canvas.lineTo(w,b+1),this.Canvas.stroke()}}}this.Canvas.restore()}}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};if(e.Min=null,e.Max=null,!this.Data||!this.Data.Data)return e;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(null!=r){var n=r.Value2;if(null==n&&(n=0),null!=r&&!isNaN(r.Value)&&!isNaN(n)){var o=Math.max(r.Value,n),s=Math.min(r.Value,n);null==e.Max&&(e.Max=o),null==e.Min&&(e.Min=s),e.Max<o&&(e.Max=o),e.Min>s&&(e.Min=s)}}}return e}}function Mt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartSingleText",this.Color="rgb(255,193,37)",this.TextFont="14px å¾®è½¯éé»",this.Text,this.TextAlign="left",this.TextBG,this.Direction=0,this.FixedFontSize=-1,this.YOffset=0,this.Position,this.ShowOffset={X:0,Y:0},this.IconFont,this.IconSize={Max:So.DRAWICON.Icon.MaxSize,Min:So.DRAWICON.Icon.MinSize,Zoom:{Type:So.DRAWICON.Icon.Zoom.Type,Value:So.DRAWICON.Icon.Zoom.Value},YOffset:So.DRAWICON.Icon.YOffset},this.TextSize={Max:So.DRAWICON.Text.MaxSize,Min:So.DRAWICON.Text.MinSize,Zoom:{Type:So.DRAWICON.Text.Zoom.Type,Value:So.DRAWICON.Text.Zoom.Value},FontName:So.DRAWICON.Text.FontName,YOffset:So.DRAWICON.Text.YOffset},this.Font={DRAWTEXT_FIX:So.DRAWTEXT_FIX.Font,DRAWNUMBER_FIX:So.DRAWNUMBER_FIX.Font},this.ExportData=this.ExportBoolData,this.ReloadResource=function(t){"DRAWTEXT"==this.Name?this.TextSize={Max:So.DRAWTEXT.MaxSize,Min:So.DRAWTEXT.MinSize,Zoom:{Type:So.DRAWTEXT.Zoom.Type,Value:So.DRAWTEXT.Zoom.Value},FontName:So.DRAWTEXT.FontName,YOffset:So.DRAWTEXT.YOffset}:"DRAWNUMBER"==this.Name?this.TextSize={Max:So.DRAWNUMBER.MaxSize,Min:So.DRAWNUMBER.MinSize,Zoom:{Type:So.DRAWNUMBER.Zoom.Type,Value:So.DRAWNUMBER.Zoom.Value},FontName:So.DRAWNUMBER.FontName,YOffset:So.DRAWNUMBER.YOffset}:"DRAWTEXT_FIX"==this.Name?this.Font.DRAWTEXT_FIX=So.DRAWTEXT_FIX.Font:"DRAWNUMBER_FIX"==this.Name&&(this.Font.DRAWNUMBER_FIX=So.DRAWNUMBER_FIX.Font)},this.SuperGetMaxMin=this.GetMaxMin,this.GetMaxMin=function(){return"DRAWTEXT_FIX"==this.Name||"DRAWNUMBER_FIX"==this.Name?{Min:null,Max:null}:"DRAWTEXTREL"==this.Name||"DRAWTEXTABS"==this.Name?{Min:null,Max:null}:this.SuperGetMaxMin()},this.DrawRectText=function(){if(this.DrawData){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.GetBorder();if("DRAWTEXTREL"==this.Name)if(t)var a=e.RightTitle-e.LeftEx,i=e.BottomEx-e.TopEx,r=this.DrawData.Point.X/1e3*i+e.TopEx,n=e.RightTitle-this.DrawData.Point.Y/1e3*i;else var i=e.RightEx-e.LeftEx,a=e.BottomEx-e.TopTitle,r=this.DrawData.Point.X/1e3*i+e.LeftEx,n=this.DrawData.Point.Y/1e3*a+e.TopTitle;else{if("DRAWTEXTABS"!=this.Name)return;if(t)var r=this.DrawData.Point.X+e.TopEx,n=e.RightTitle-this.DrawData.Point.Y;else var r=this.DrawData.Point.X+e.LeftEx,n=this.DrawData.Point.Y+e.TopTitle}1==this.Direction?this.Canvas.textBaseline="bottom":2==this.Direction?this.Canvas.textBaseline="top":this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.font=this.TextFont,this.Canvas.fillStyle=this.Color,this.DrawText(this.DrawData.Text,r,n,t)}},this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex()){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();if("DRAWTEXTREL"==this.Name||"DRAWTEXTABS"==this.Name)return void this.DrawRectText();if(this.Position)return void this.DrawPosition();if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.IsMinuteFrame(),a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetLeft()+i/2+So.FrameLeftMargin,n=this.ChartBorder.GetRight(),o=this.ChartBorder.GetTopEx(),s=this.ChartBorder.GetBottomEx();this.Canvas.save(),this.ClipClient(this.ChartFrame.IsHScreen),t&&(n=this.ChartBorder.GetBottom(),o=this.ChartBorder.GetRightEx(),s=this.ChartBorder.GetLeftEx(),r=this.ChartBorder.GetTop()+i/2+So.FrameLeftMargin);var l=this.ChartFrame.XPointCount,h=Array.isArray(this.Text),u=C(),c={Text:{},Font:{}};if(1==this.Direction?(this.Canvas.textBaseline="bottom",c.Text={Baseline:"bottom"}):2==this.Direction?(this.Canvas.textBaseline="top",c.Text={Baseline:"top"}):(this.Canvas.textBaseline="middle",c.Text={Baseline:"middle"}),this.IconFont){if(this.Color=this.IconFont.Color,this.Text=this.IconFont.Text,this.FixedFontSize>0)var f=this.FixedFontSize;else var f=this.GetDynamicIconSize(a,i,this.IconSize.Max,this.IconSize.Min,this.IconSize.Zoom);this.Canvas.font=f+"px "+this.IconFont.Family}else this.FixedFontSize>0?this.TextFont=this.FixedFontSize+"px "+this.TextSize.FontName:this.TextFont=this.GetDynamicFont(a,i,this.TextSize.Max,this.TextSize.Min,this.TextSize.Zoom,this.TextSize.FontName),this.Canvas.font=this.TextFont;c.Font={Height:this.GetFontHeight()};for(var d=this.Data.DataOffset,D=0;d<this.Data.Data.length&&D<l;++d,++D,r+=a+i){var m=this.Data.Data[d];if(null!=m){if(e)var v=this.ChartFrame.GetXFromIndex(D);else{var g=r,T=r+a;if(T>n)break;var v=g+(T-g)/2}var I=this.ChartFrame.GetYFromData(m,!1);if(v>n)break;if(I+=this.ShowOffset.Y,v+=this.ShowOffset.X,this.Canvas.textAlign=this.TextAlign,this.Canvas.fillStyle=this.Color,c.Text.Color=this.Color,c.Text.Align=this.TextAlign,c.X=v,c.Y=I,this.YOffset>0&&this.Direction>0){var S=I;this.Canvas.setLineDash([5,10]),this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?(1==this.Direction?(I=o-this.YOffset*u,S+=5*u):(I=s+this.YOffset*u,S-=5*u),this.Canvas.moveTo(p(S),p(v)),this.Canvas.lineTo(p(I),p(v))):(1==this.Direction?(I=o+this.YOffset*u,S+=5*u):(I=s-this.YOffset*u,S-=5*u),this.Canvas.moveTo(p(v),p(S)),this.Canvas.lineTo(p(v),p(I))),this.Canvas.stroke(),this.Canvas.setLineDash([])}if(h){var x=this.Text[d];if(!x)continue;"DRAWNUMBER"==this.Name&&(1==this.Direction?I-=So.DRAWABOVE.YOffset*u:2==this.Direction&&(I+=this.TextSize.YOffset*u)),"DRAWTEXT"==this.Name?this.DrawTextV2(x,c,t):this.DrawText(x,v,I,t)}else"DRAWICON"==this.Name?1==this.Direction?I-=So.DRAWABOVE.YOffset*u:2==this.Direction&&(this.IconFont?I+=this.IconSize.YOffset*u:I+=this.TextSize.YOffset*u):"DRAWTEXT"==this.Name&&(1==this.Direction?I-=So.DRAWABOVE.YOffset*u:2==this.Direction&&(I+=this.TextSize.YOffset*u)),"DRAWTEXT"==this.Name?this.DrawTextV2(this.Text,c,t):this.DrawText(this.Text,v,I,t)}}this.Canvas.restore()}}},this.DrawPosition=function(){if(this.Text){var t=!0===this.ChartFrame.IsHScreen;if(t)var e=this.ChartBorder.GetRightEx()-this.ChartBorder.GetWidthEx()*this.Position.Y,a=this.ChartBorder.GetTop()+this.ChartBorder.GetHeight()*this.Position.X;else var a=this.ChartBorder.GetLeft()+this.ChartBorder.GetWidth()*this.Position.X,e=this.ChartBorder.GetTopEx()+this.ChartBorder.GetHeightEx()*this.Position.Y;if(this.Canvas.fillStyle=this.Color,"DRAWTEXT_FIX"==this.Name?this.Canvas.font=this.Font.DRAWTEXT_FIX:"DRAWNUMBER_FIX"==this.Name&&(this.Canvas.font=this.Font.DRAWNUMBER_FIX),0==this.Position.Type?this.Canvas.textAlign="left":1==this.Position.Type?this.Canvas.textAlign="right":this.Canvas.textAlign="center",1==this.Direction?this.Canvas.textBaseline="bottom":2==this.Direction?this.Canvas.textBaseline="top":this.Canvas.textBaseline="middle",Array.isArray(this.Text)){if(!this.Data||!this.Data.Data)return;for(var i=this.ChartFrame.XPointCount,r=this.Data.DataOffset,n=0;r<this.Data.Data.length&&n<i;++r,++n){var o=this.Text[r];if(o){this.DrawText(o,a,e,t);break}}}else this.DrawText(this.Text,a,e,t)}},this.DrawText=function(t,e,a,i){i?(this.Canvas.save(),this.Canvas.translate(a,e),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(t,0,0),this.Canvas.restore()):this.Canvas.fillText(t,e,a)},this.DrawTextV2=function(t,e,a){var i=this.Canvas.measureText(t).width;if(a){var r=e.Y,n=e.X;if("right"==e.Text.Align?n-=i:"center"==e.Text.Align&&(n-=i/2),"top"==e.Text.Baseline?r-=e.Font.Height:"middle"==e.Text.Baseline&&(r-=e.Font.Height/2),this.TextBG&&(this.TextBG.Color||this.TextBG.Border)){var o=this.TextBG.Margin,s=r-o[0],l=n-o[2],h=i+o[2]+o[3],u=e.Font.Height+o[0]+o[1];this.TextBG.Color&&(this.Canvas.fillStyle=this.TextBG.Color,this.Canvas.fillRect(s,l,u,h)),this.TextBG.Border&&(this.Canvas.strokeStyle=this.TextBG.Border,this.Canvas.strokeRect(p(s),p(l),g(u),g(h)))}this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=e.Text.Color,this.Canvas.save(),this.Canvas.translate(r,n),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(t,0,0),this.Canvas.restore()}else{var r=e.X,n=e.Y;if("right"==e.Text.Align?r-=i:"center"==e.Text.Align&&(r-=i/2),"top"==e.Text.Baseline?n+=e.Font.Height:"middle"==e.Text.Baseline&&(n+=e.Font.Height/2),this.TextBG&&(this.TextBG.Color||this.TextBG.Border)){var o=this.TextBG.Margin,s=r-o[2],l=n-e.Font.Height-o[1],h=i+o[2]+o[3],u=e.Font.Height+o[0]+o[1];this.TextBG.Color&&(this.Canvas.fillStyle=this.TextBG.Color,this.Canvas.fillRect(s,l,h,u)),this.TextBG.Border&&(this.Canvas.strokeStyle=this.TextBG.Border,this.Canvas.strokeRect(p(s),p(l),g(h),g(u)))}this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=e.Text.Color,this.Canvas.fillText(t,r,n)}}}function Lt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartTradeIcon",this.TextAlign="center",this.TextBaseline="middle",this.SVG={Family:"iconfont",Size:12},this.AryIcon,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.IsVisible&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex()&&this.Data&&this.Data.Data&&we.IsNonEmptyArray(this.AryIcon)){var t=!0===this.ChartFrame.IsHScreen;this.Canvas.font=this.SVG.Size+"px "+this.SVG.Family,this.Canvas.textAlign=this.TextAlign,this.Canvas.textBaseline="middle";var e=0;"BUY"==this.TradeType||"BUYSHORT"==this.TradeType?(this.Canvas.textBaseline="top",e+=t?-2:2):"SELL"!=this.TradeType&&"SELLSHORT"!=this.TradeType||(this.Canvas.textBaseline="bottom",e=t?2:-2);var a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetRight(),n=this.ChartFrame.XPointCount,o=this.ChartFrame.GetBorder(),s=o.LeftEx+i/2+So.FrameLeftMargin;t&&(r=this.ChartBorder.GetBottom(),s=this.ChartBorder.GetTop()+i/2+So.FrameLeftMargin);for(var l=this.Data.DataOffset,h=0;l<this.Data.Data.length&&h<n;++l,++h,s+=a+i){var u=this.Data.Data[l];if(we.IsNumber(u)&&!(u<=0)){var C=this.AryIcon[l];if(we.IsNumber(C.Value)&&C.Icon){var c=s,f=s+a;if(f>r)break;var d=c+(f-c)/2,D=this.GetYFromData(C.Value,!1);this.Canvas.fillStyle=C.Color,a>2&&(d=p(d)),this.DrawTradeIcon(C.Icon,d,D+e,t)}}}}},this.DrawTradeIcon=function(t,e,a,i){i?(this.Canvas.save(),this.Canvas.translate(a,e),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(t,0,0),this.Canvas.restore()):this.Canvas.fillText(t,e,a)},this.GetMaxMin=function(){var t={Max:null,Min:null};if(!this.Data||!this.Data.Data)return t;if(!we.IsNonEmptyArray(this.AryIcon))return t;var e=this.ChartFrame.XPointCount,a=this.Data.DataOffset;this.ChartFrame.GlobalOption&&this.ChartFrame.GlobalOption.IsValueFullRange&&(a=0,e=this.Data.Data.length);for(var i=a,r=0;i<this.Data.Data.length&&r<e;++i,++r){var n=this.Data.Data[i];if(we.IsNumber(n)&&!(n<=0)){var o=this.AryIcon[i];we.IsNumber(o.Value)&&o.Icon&&(null==t.Max?t.Max=o.Value:t.Max<o.Value&&(t.Max=o.Value),null==t.Min?t.Min=o.Value:t.Min>o.Value&&(t.Min=o.Value))}}return t}}function Nt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawText",this.Color="rgb(255,193,37)",this.TextFont="14px å¾®è½¯éé»",this.TextBaseline="middle",this.TextAlign="left",this.Text,this.TextBG,this.FixedFontSize=-1,this.YOffset=0,this.FixedPosition=-1,this.VerticalLine,this.ShowOffset={X:0,Y:0},this.ExportData=this.ExportBoolData,this.TextSize={Max:So.DRAWICON.Text.MaxSize,Min:So.DRAWICON.Text.MinSize,Zoom:{Type:So.DRAWICON.Text.Zoom.Type,Value:So.DRAWICON.Text.Zoom.Value},FontName:So.DRAWICON.Text.FontName,YOffset:So.DRAWICON.Text.YOffset},this.ReloadResource=function(t){this.TextSize={Max:So.DRAWTEXT.MaxSize,Min:So.DRAWTEXT.MinSize,Zoom:{Type:So.DRAWTEXT.Zoom.Type,Value:So.DRAWTEXT.Zoom.Value},FontName:So.DRAWTEXT.FontName,YOffset:So.DRAWTEXT.YOffset}},this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.IsVisible&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex()){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.IsMinuteFrame(),a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetLeft()+i/2+So.FrameLeftMargin,n=this.ChartBorder.GetRight(),o=this.ChartBorder.GetTopEx(),s=this.ChartBorder.GetBottomEx();this.Canvas.save(),this.ClipClient(t),t&&(n=this.ChartBorder.GetBottom(),o=this.ChartBorder.GetRightEx(),s=this.ChartBorder.GetLeftEx(),r=this.ChartBorder.GetTop()+i/2+So.FrameLeftMargin);var l=this.ChartFrame.XPointCount,h=Array.isArray(this.Text),u={Text:{Color:this.Color,Align:this.TextAlign,Baseline:this.TextBaseline},Font:{}};this.FixedFontSize>0?this.TextFont=this.FixedFontSize+"px "+this.TextSize.FontName:this.TextFont=this.GetDynamicFont(a,i,this.TextSize.Max,this.TextSize.Min,this.TextSize.Zoom,this.TextSize.FontName),this.Canvas.font=this.TextFont,u.Font={Height:this.GetFontHeight()};for(var C=this.Data.DataOffset,c=0;C<this.Data.Data.length&&c<l;++C,++c,r+=a+i){var f=this.Data.Data[C];if(null!=f){if(e)var d=this.ChartFrame.GetXFromIndex(c);else{var D=r,m=r+a;if(m>n)break;var d=D+(m-D)/2}var p;if(p=1===this.FixedPosition?o:2===this.FixedPosition?s:this.ChartFrame.GetYFromData(f,!1),d>n)break;if(p+=this.ShowOffset.Y,d+=this.ShowOffset.X,u.X=d,u.Y=p,h){var v=this.Text[C];if(!v)continue;this.DrawText(v,u,t)}else this.DrawText(this.Text,u,t);this.DrawVerticalLine(C,u,t)}}this.Canvas.restore()}}},this.DrawText=function(t,e,a){var i=this.Canvas.measureText(t).width;if(a){var r=e.Y,n=e.X;if("right"==e.Text.Align?n-=i:"center"==e.Text.Align&&(n-=i/2),"top"==e.Text.Baseline?r-=e.Font.Height:"middle"==e.Text.Baseline&&(r-=e.Font.Height/2),this.TextBG&&(this.TextBG.Color||this.TextBG.Border)){var o=this.TextBG.Margin,s=r-o[0],l=n-o[2],h=i+o[2]+o[3],u=e.Font.Height+o[0]+o[1];this.TextBG.Color&&(this.Canvas.fillStyle=this.TextBG.Color,this.Canvas.fillRect(s,l,u,h)),this.TextBG.Border&&(this.Canvas.strokeStyle=this.TextBG.Border,this.Canvas.strokeRect(p(s),p(l),g(u),g(h))),e.Rect={Bottom:s,Top:s+u}}else{var s=r,u=e.Font.Height;e.Rect={Bottom:s,Top:s+u}}this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=e.Text.Color,this.Canvas.save(),this.Canvas.translate(r,n),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(t,0,0),this.Canvas.restore()}else{var r=e.X,n=e.Y;if("right"==e.Text.Align?r-=i:"center"==e.Text.Align&&(r-=i/2),"top"==e.Text.Baseline?n+=e.Font.Height:"middle"==e.Text.Baseline&&(n+=e.Font.Height/2),this.TextBG&&(this.TextBG.Color||this.TextBG.Border)){var o=this.TextBG.Margin,s=r-o[2],l=n-e.Font.Height-o[1],h=i+o[2]+o[3],u=e.Font.Height+o[0]+o[1];this.TextBG.Color&&(this.Canvas.fillStyle=this.TextBG.Color,this.Canvas.fillRect(s,l,h,u)),this.TextBG.Border&&(this.Canvas.strokeStyle=this.TextBG.Border,this.Canvas.strokeRect(p(s),p(l),g(h),g(u))),e.Rect={Top:l,Bottom:l+u}}else{var l=n-e.Font.Height,u=e.Font.Height;e.Rect={Top:l,Bottom:l+u}}this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=e.Text.Color,this.Canvas.fillText(t,r,n)}},this.DrawVerticalLine=function(t,e,a){if(this.VerticalLine){var i=this.VerticalLine.Data[t];if(i&&we.IsNumber(i.High)&&we.IsNumber(i.Low)){var r,n,o=this.ChartFrame.GetYFromData(i.High),s=this.ChartFrame.GetYFromData(i.Low);if(a)if(e.Rect.Bottom>o)r=e.Rect.Bottom-1,n=o+1;else{if(!(e.Rect.Top<s))return;r=e.Rect.Top-1,n=s-1}else if(e.Rect.Bottom<o)r=e.Rect.Bottom+1,n=o-1;else{if(!(e.Rect.Top>s))return;r=e.Rect.Top-1,n=s+1}this.Canvas.save();var l=C(),h=e.X;1==this.VerticalLine.LineType&&(this.VerticalLine.LineDotted?this.Canvas.setLineDash(this.VerticalLine.LineDotted):this.Canvas.setLineDash([5,10])),we.IsPlusNumber(this.VerticalLine.LineWidth)&&(this.Canvas.lineWidth=this.VerticalLine.LineWidth*l),this.Canvas.strokeStyle=this.VerticalLine.Color,this.Canvas.beginPath(),a?(this.Canvas.moveTo(p(r),p(h)),this.Canvas.lineTo(p(n),p(h))):(this.Canvas.moveTo(p(h),p(r)),this.Canvas.lineTo(p(h),p(n))),this.Canvas.stroke(),this.Canvas.restore()}}}}function Rt(){this.newMethod=Nt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawNumber",this.ReloadResource=function(t){this.TextSize={Max:So.DRAWNUMBER.MaxSize,Min:So.DRAWNUMBER.MinSize,Zoom:{Type:So.DRAWNUMBER.Zoom.Type,Value:So.DRAWNUMBER.Zoom.Value},FontName:So.DRAWNUMBER.FontName,YOffset:So.DRAWNUMBER.YOffset}}}function At(){this.newMethod=ct,this.newMethod(),delete this.newMethod,this.ClassName="ChartMinutePriceLine",this.YClose,this.IsDrawArea=!0,this.AreaColor="rgba(0,191,255,0.1)",this.IsShowLead=!1,this.LeadData,this.UpColor=So.UpBarColor,this.DownColor=So.DownBarColor,this.BeforeOpenData,this.BeforeLineColor=So.Minute.Before.LineColor,this.BeforeAvPriceColor=So.Minute.Before.AvPriceColor,this.BeforePoint=I(So.Minute.Before.Point),this.AfterCloseData,this.AfterLineColor=So.Minute.After.LineColor,this.AfterAvPriceColor=So.Minute.After.AvPriceColor,this.AfterPoint=I(So.Minute.After.Point),this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.ColorLineData,this.Source,this.PtInChart=this.PtInLine,this.DrawSelectedStatus=this.DrawLinePoint,this.PtInChart=this.PtInLine,this.DrawSelectedStatus=this.DrawLinePoint,this.DayOffset,this.LastPoint={},this.FFMChart,this.DrawType=0,this.UpdateLastPoint=function(t,e,a,i){we.IsNumber(this.LastPoint.DateTime)&&this.LastPoint.DateTime>t||(this.LastPoint.DateTime=t,this.LastPoint.X=e,this.LastPoint.Y=a,this.LastPoint.Data=i,this.LastPoint.Value=i.Value)},this.Draw=function(){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.LastPoint={},this.IsShow){if(14==this.DrawType)return void(this.FFMChart&&this.FFMChart.Draw&&this.FFMChart.Draw(this));var t=!0===this.ChartFrame.IsHScreen;this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight();!0===t&&this.ChartBorder.GetBottom();var e=this.ChartFrame.XPointCount,a=this.ChartFrame.MinuteCount,i=this.ChartBorder.GetBottom(),r=this.ChartBorder.GetLeft(),n=this.Data;if(this.DrawBeforeOpen(),this.DrawMultiDayBeforeOpen(),this.IsShowLead&&this.DrawLead(),n){var o=!0,s={},l=0,h=0;this.Canvas.save(),we.IsPlusNumber(this.LineWidth>0)&&(this.Canvas.lineWidth=this.LineWidth);for(var u=n.DataOffset,c=0;u<n.Data.length&&c<e;++u,++c){var f=null;if(f=n.Data[u],++h,null!=f){var d=this.ChartFrame.GetXFromIndex(c),D=this.ChartFrame.GetYFromData(f);if(o?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(D,d):this.Canvas.moveTo(d,D),o=!1,s={X:d,Y:D}):t?this.Canvas.lineTo(D,d):this.Canvas.lineTo(d,D),this.Source){var m=this.Source.Data[u],p=1e6*m.Date+100*m.Time;this.UpdateLastPoint(p,d,D,{Value:f,Index:u,Date:m.Date,Time:m.Time,Type:0,Explain:"çä¸­"})}++l,h>=a&&(o=!0,this.Canvas.stroke(),this.IsDrawArea&&(t?(this.Canvas.lineTo(r,d),this.Canvas.lineTo(r,s.X),this.SetFillStyle(this.AreaColor,this.ChartBorder.GetRightEx(),i,this.ChartBorder.GetLeftEx(),i)):(this.Canvas.lineTo(d,i),this.Canvas.lineTo(s.X,i),this.SetFillStyle(this.AreaColor,r,this.ChartBorder.GetTopEx(),r,i)),this.Canvas.fill()),h=0,l=0)}}if(l>0&&(1==l?(this.Canvas.beginPath(),t?this.Canvas.arc(s.Y,s.X,1,0,360,!1):this.Canvas.arc(s.X,s.Y,1,0,360,!1),this.Canvas.closePath(),this.Canvas.fillStyle=this.Color,this.Canvas.fill()):(this.Canvas.stroke(),this.IsDrawArea&&(t?(this.Canvas.lineTo(r,d),this.Canvas.lineTo(r,s.X),this.SetFillStyle(this.AreaColor,this.ChartBorder.GetRightEx(),i,this.ChartBorder.GetLeftEx(),i)):(this.Canvas.lineTo(d,i),this.Canvas.lineTo(s.X,i),this.SetFillStyle(this.AreaColor,r,this.ChartBorder.GetTopEx(),r,i)),this.Canvas.fill()))),this.Canvas.restore(),this.DrawColorLine(),this.DrawAfterClose(),this.DrawMultiDayAfterClose(),this.GetEventCallback){var v=this.GetEventCallback(Kn.ON_DRAW_MINUTE_LAST_POINT);if(v){var g=C(),n={InterLastPoint:{X:this.LastPoint.X,Y:this.LastPoint.Y},LastPoint:{X:this.LastPoint.X/g,Y:this.LastPoint.Y/g},Price:this.LastPoint.Price,Data:this.LastPoint.Data,PixelRatio:g};v.Callback(v,n,this)}}}}},this.DrawLead=function(){if(this.LeadData){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.XPointCount,a=this.ChartFrame.MinuteCount,i=(this.ChartBorder.GetBottomEx(),this.ChartBorder.GetTopEx());if(!0===t&&(i=this.ChartBorder.GetRightEx()),!(e>a)){for(var r=[],n=null,o=null,s=this.ChartFrame.GetYFromData(this.YClose),l=(s-i)/3,h=this.LeadData,u=h.DataOffset,C=0;u<h.Data.length&&C<e;++u,++C){var c=h.Data[u];if(we.IsNumber(c)&&0!=c){var f=this.ChartFrame.GetXFromIndex(C);(null==n||n<c)&&(n=c),(null==o||o>c)&&(o=c),r.push({X:f,Value:c})}}if(!(r.length<=0)){var d=Math.max(Math.abs(n),Math.abs(o));for(var u in r){var D=r[u];D.Value>0?this.Canvas.strokeStyle=this.UpColor:this.Canvas.strokeStyle=this.DownColor;var m=s-D.Value*l/d,f=p(D.X);this.Canvas.beginPath(),!0===t?(this.Canvas.moveTo(s,f),this.Canvas.lineTo(m,f)):(this.Canvas.moveTo(f,s),this.Canvas.lineTo(f,m)),this.Canvas.stroke()}}}}},this.DrawBeforeOpen=function(){this.ChartBorder.LeftExtendWidth<10||this.BeforeOpenData&&this.DrawCallAuction(-1,this.BeforeOpenData,!0)},this.DrawAfterClose=function(){this.ChartBorder.RightExtendWidth<10||this.AfterCloseData&&this.DrawCallAuction(-1,this.AfterCloseData,!1)},this.DrawMultiDayBeforeOpen=function(){if(!(this.ChartBorder.MultiDayMinute.Count<=1||this.ChartBorder.MultiDayMinute.Left<=0)&&this.MultiDayBeforeOpenData){var t=0,e=this.MultiDayBeforeOpenData.length;this.DayOffset&&(we.IsNumber(this.DayOffset.Offset)&&(t=this.DayOffset.Offset),we.IsNumber(this.DayOffset.ShowDayCount)&&(e=this.DayOffset.ShowDayCount));for(var a=t,i=0;a<this.MultiDayBeforeOpenData.length&&i<e;++a,++i){var r=this.MultiDayBeforeOpenData[a];this.DrawCallAuction(i,r,!0)}}},this.DrawMultiDayAfterClose=function(){if(!(this.ChartBorder.MultiDayMinute.Count<=1||this.ChartBorder.MultiDayMinute.Right<=0)&&this.MultiDayAfterCloseData){var t=0,e=this.MultiDayAfterCloseData.length;this.DayOffset&&(we.IsNumber(this.DayOffset.Offset)&&(t=this.DayOffset.Offset),we.IsNumber(this.DayOffset.ShowDayCount)&&(e=this.DayOffset.ShowDayCount));for(var a=t,i=0;a<this.MultiDayAfterCloseData.length&&i<e;++a,++i){var r=this.MultiDayAfterCloseData[a];this.DrawCallAuction(i,r,!1)}}},this.DrawCallAuction=function(t,e,a){if(e){e.Index=t;var i=!0===this.ChartFrame.IsHScreen,r=!0,n=0;e.TotalCount;if(3==e.Ver){for(var o=0;o<e.Data.length;++o){var s=e.Data[o];if(s&&we.IsNumber(s.AvPrice)){if(a)var l=this.ChartFrame.GetLeftExtendXFromIndex(o,e),h=this.ChartFrame.GetLeftExtendYFromData(s.AvPrice);else var l=this.ChartFrame.GetRightExtendXFromIndex(o,e),h=this.ChartFrame.GetRightExtendYFromData(s.AvPrice);r?(this.Canvas.strokeStyle=this.BeforeAvPriceColor,this.Canvas.beginPath(),i?this.Canvas.moveTo(h,l):this.Canvas.moveTo(l,h),r=!1):i?this.Canvas.lineTo(h,l):this.Canvas.lineTo(l,h),++n}}n>0&&this.Canvas.stroke()}for(var r=!0,n=0,u=[],o=0;o<e.Data.length;++o){var s=e.Data[o];if(s&&we.IsNumber(s.Price)){if(a)var l=this.ChartFrame.GetLeftExtendXFromIndex(o,e),h=this.ChartFrame.GetLeftExtendYFromData(s.Price);else var l=this.ChartFrame.GetRightExtendXFromIndex(o,e),h=this.ChartFrame.GetRightExtendYFromData(s.Price);r?(this.Canvas.strokeStyle=a?this.BeforeLineColor:this.AfterLineColor,this.Canvas.beginPath(),i?this.Canvas.moveTo(h,l):this.Canvas.moveTo(l,h),r=!1,u.push({X:l,Y:h})):(i?this.Canvas.lineTo(h,l):this.Canvas.lineTo(l,h),u.push({X:l,Y:h}));var C=1e6*s.Date+s.Time;this.UpdateLastPoint(C,l,h,{Value:s.Price,Index:o,Date:s.Date,Time:s.Time,Type:a?1:2,Explain:a?"çå":"çå"}),++n}else if(0==o&&a&&we.IsNumber(this.YClose)){var l=this.ChartFrame.GetLeftExtendXFromIndex(o,e),h=this.ChartFrame.GetLeftExtendYFromData(this.YClose);this.Canvas.strokeStyle=this.BeforeLineColor,this.Canvas.beginPath(),i?this.Canvas.moveTo(h,l):this.Canvas.moveTo(l,h),r=!1}}if(n>0&&this.Canvas.stroke(),2==e.Ver&&this.BeforePoint.Radius>0){this.Canvas.fillStyle=a?this.BeforePoint.Color:this.AfterPoint.Color;for(var o in u){var s=u[o];this.Canvas.beginPath(),i?this.Canvas.arc(s.Y,s.X,this.BeforePoint.Radius,0,2*Math.PI):this.Canvas.arc(s.X,s.Y,this.BeforePoint.Radius,0,2*Math.PI),this.Canvas.fill()}}}},this.FindColorLineItem=function(t){if(!t||!this.ColorLineData)return null;for(var e in this.ColorLineData){var a=this.ColorLineData[e];if(a.Date==t.Date&&t.Time>=a.Start&&t.Time<=a.End)return a}return null},this.DrawColorLine=function(){if(this.ColorLineData&&this.Source&&this.Data){var t=!0===this.ChartFrame.IsHScreen,e=(this.ChartBorder.GetBorder(),this.ChartFrame.XPointCount),a=(this.ChartFrame.MinuteCount,this.Data),i=!0,r={},n=0,o=null;this.Canvas.save();for(var s=a.DataOffset,l=0;s<a.Data.length&&l<e;++s,++l){var h=null;h=a.Data[s];var u=this.Source.Data[s];if(h&&u){var C=this.FindColorLineItem(u);if(C){o&&o!=C.Color&&(this.Canvas.stroke(),i=!0);var c=this.ChartFrame.GetXFromIndex(l),f=this.ChartFrame.GetYFromData(h);i?(this.Canvas.strokeStyle=C.Color,we.IsNumber(C.LineWidth)&&(this.Canvas.lineWidth=C.LineWidth),this.Canvas.beginPath(),t?this.Canvas.moveTo(f,c):this.Canvas.moveTo(c,f),i=!1,{X:c,Y:f},o=C.Color):t?this.Canvas.lineTo(f,c):this.Canvas.lineTo(c,f),r.X=c,r.Y=f,r.Price=h,++n}else n>0&&(this.Canvas.stroke(),i=!0)}}n>0&&this.Canvas.stroke(),this.Canvas.restore()}},this.GetMaxMin=function(){if(14==this.DrawType&&this.FFMChart&&this.FFMChart.GetMaxMin)return this.FFMChart.GetMaxMin(this);var t=this.ChartFrame.XPointCount,e={};if(null==this.YClose)return e;if(!this.IsShow)return e;if(e.Min=this.YClose,e.Max=this.YClose,this.ChartBorder.LeftExtendWidth>10&&this.BeforeOpenData)for(var a in this.BeforeOpenData.Data){var i=this.BeforeOpenData.Data[a];i&&(we.IsNumber(i.Price)&&(null==e.Max&&(e.Max=i.Price),null==e.Min&&(e.Min=i.Price),e.Max<i.Price&&(e.Max=i.Price),e.Min>i.Price&&(e.Min=i.Price)),3==this.BeforeOpenData.Ver&&we.IsNumber(i.AvPrice)&&(null==e.Max&&(e.Max=i.AvPrice),null==e.Min&&(e.Min=i.AvPrice),e.Max<i.AvPrice&&(e.Max=i.AvPrice),e.Min>i.AvPrice&&(e.Min=i.AvPrice)))}for(var r=this.Data,a=r.DataOffset,n=0;a<r.Data.length&&n<t;++a,++n){var o=null;o=r.Data[a],null!=o&&(null==e.Max&&(e.Max=o),null==e.Min&&(e.Min=o),e.Max<o&&(e.Max=o),e.Min>o&&(e.Min=o))}if(e.Max==this.YClose&&e.Min==this.YClose)return e.Max=this.YClose+.1*this.YClose,e.Min=this.YClose-.1*this.YClose,e;var s=Math.max(Math.abs(this.YClose-e.Max),Math.abs(this.YClose-e.Min));return e.Max=this.YClose+s,e.Min=this.YClose-s,e},this.GetTooltipData=function(t,e,a){var i=!0===this.ChartFrame.IsHScreen;if(i)return!1;if(!this.IsShow)return!1;if(!this.Data||!we.IsNonEmptyArray(this.Data.Data))return!1;if(1!=this.ChartBorder.PtInClient(t,e,this.Canvas,i))return!1;var r=this.Data,n=this.ChartFrame.GetXData(t),o=Math.ceil(n),s=Math.floor(n);if(o>=r.Data.length||s>=r.Data.length)return!1;if(o==s){r.Data[s]}else{var l=r.Data[s],h=r.Data[o],u={X:this.ChartFrame.GetXFromIndex(s),Y:this.ChartFrame.GetYFromData(l)},C={X:this.ChartFrame.GetXFromIndex(o),Y:this.ChartFrame.GetYFromData(h)};if(this.Canvas.beginPath(),this.Canvas.moveTo(u.X,u.Y+5),this.Canvas.lineTo(u.X,u.Y-5),this.Canvas.lineTo(C.X,C.Y-5),this.Canvas.lineTo(C.X,C.Y+5),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e))return a.Data={Index:n,Start:{Index:s,Item:r.Data[s]},End:{Index:o,Value:r.Data[o]}},a.ChartPaint=this,a.Type=5,!0}return!1}}function Ot(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.Color="rgb(65,105,225)",this.MainData,this.SourceData,this.ClassName="ChartOverlayMinutePriceLine",this.Title,this.Symbol,this.Status=co.STATUS_NONE_ID,this.OverlayType=0,this.IsCalcuateMaxMin=!0,this.SetOption=function(t){t&&(we.IsNumber(t.OverlayType)&&(this.OverlayType=t.OverlayType),we.IsBool(t.IsCalcuateMaxMin)&&(this.IsCalcuateMaxMin=t.IsCalcuateMaxMin))},this.PtInChart=function(t,e){var a={MinuteOverlayPrice:!0,OverlayType:this.OverlayType};return this.PtInLine(t,e,a)},this.DrawSelectedStatus=function(){var t={MinuteOverlayPrice:!0,OverlayType:this.OverlayType};this.DrawLinePoint(t)},this.Draw=function(){if(this.Data&&we.IsNonEmptyArray(this.Data.Data)){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();var t=!0===this.ChartFrame.IsHScreen;this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight();!0===t&&this.ChartBorder.GetBottom();var e=this.ChartFrame.XPointCount,a=this.ChartFrame.MinuteCount;this.Canvas.save(),this.ClipClient(t);for(var i=!0,r=0,n=0,o=null,s=null,l=0,h=this.Data.DataOffset+0,u=0;h<this.Data.Data.length&&u<e;++h,++u){var C=this.Data.Data[h];if(C&&we.IsNumber(C.Close)){if(i){o=C.YClose;s=this.MainData.Data[h].YClose}var c=C.Close;n=c,0==this.OverlayType&&(n=c/o*s);var f=this.ChartFrame.GetXFromIndex(u),d=this.ChartFrame.GetYFromData(n,!1);i?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(d,f):this.Canvas.moveTo(f,d),i=!1):t?this.Canvas.lineTo(d,f):this.Canvas.lineTo(f,d),++r}++l,l>=a&&(i=!0,l=0,r>0&&this.Canvas.stroke(),r=0)}r>0&&this.Canvas.stroke(),this.Canvas.restore()}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={Min:null,Max:null};if(!this.IsCalcuateMaxMin)return e;for(var a=this.ChartFrame.MinuteCount,i=null,r=null,n=!0,o=0,s=this.Data.DataOffset,l=0;s<this.Data.Data.length&&l<t;++s,++l){var h=this.Data.Data[s];if(h&&we.IsNumber(h.Close)){if(n){i=h.YClose;r=this.MainData.Data[s].YClose,n=!1}var u=h.Close;0==this.OverlayType&&(u=u/i*r),null==e.Max&&(e.Max=u),null==e.Min&&(e.Min=u),e.Max<u&&(e.Max=u),e.Min>u&&(e.Min=u),++o,o>=a&&(n=!0,o=0)}else++o}return e},this.GetTooltipData=function(t,e,a){var i=!0===this.ChartFrame.IsHScreen;if(i)return!1;if(!this.IsShow)return!1;if(!this.Data||!we.IsNonEmptyArray(this.Data.Data))return!1;if(!we.IsNumber(this.YClose)||!we.IsNumber(this.MainYClose))return!1;if(1!=this.ChartBorder.PtInClient(t,e,this.Canvas,i))return!1;var r=this.Data,n=this.ChartFrame.GetXData(t),o=Math.ceil(n),s=Math.floor(n);if(o>=r.Data.length||s>=r.Data.length)return!1;if(o==s){r.Data[s]}else{var l=r.Data[s].Close;l=l/this.YClose*this.MainYClose;var h=r.Data[o].Close;h=h/this.YClose*this.MainYClose;var u={X:this.ChartFrame.GetXFromIndex(s),Y:this.ChartFrame.GetYFromData(l)},C={X:this.ChartFrame.GetXFromIndex(o),Y:this.ChartFrame.GetYFromData(h)};if(this.Canvas.beginPath(),this.Canvas.moveTo(u.X,u.Y+5),this.Canvas.lineTo(u.X,u.Y-5),this.Canvas.lineTo(C.X,C.Y-5),this.Canvas.lineTo(C.X,C.Y+5),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e))return a.Data={Index:n,Start:{Index:s,Item:r.Data[s]},End:{Index:o,Value:r.Data[o]}},a.ChartPaint=this,a.Type=6,!0}return!1}}function Pt(){this.newMethod=ct,this.newMethod(),delete this.newMethod,this.ClassName="ChartMinutePositionLine",this.Draw=function(){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.IsShow){var t=!0===this.ChartFrame.IsHScreen;this.ChartFrame.DataWidth,this.ChartFrame.DistanceWidth,this.ChartBorder.GetRight();!0===t&&this.ChartBorder.GetBottom();var e=this.ChartFrame.XPointCount,a=this.ChartFrame.MinuteCount,i=(this.ChartBorder.GetBottomEx(),this.ChartBorder.GetLeftEx(),this.Data);if(i){var r=!0,n={},o={},s=0,l=0;this.Canvas.save(),we.IsPlusNumber(this.LineWidth>0)&&(this.Canvas.lineWidth=this.LineWidth),this.IsDotLine&&this.Canvas.setLineDash(So.DOTLINE.LineDash);for(var h=i.DataOffset,u=0;h<i.Data.length&&u<e;++h,++u){var C=null;if(C=i.Data[h],++l,null!=C){var c=this.ChartFrame.GetXFromIndex(u),f=this.ChartFrame.GetYFromData(C);r?(this.Canvas.strokeStyle=this.Color,this.Canvas.beginPath(),t?this.Canvas.moveTo(f,c):this.Canvas.moveTo(c,f),r=!1,n={X:c,Y:f}):t?this.Canvas.lineTo(f,c):this.Canvas.lineTo(c,f),o.X=c,o.Y=f,o.Price=C,++s,l>=a&&(r=!0,this.Canvas.stroke(),l=0,s=0)}}s>0&&(1==s?(this.Canvas.beginPath(),t?this.Canvas.arc(n.Y,n.X,1,0,360,!1):this.Canvas.arc(n.X,n.Y,1,0,360,!1),this.Canvas.closePath(),this.Canvas.fillStyle=this.Color,this.Canvas.fill()):this.Canvas.stroke()),this.Canvas.restore()}}}}function Bt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMinuteInfo",this.Data=new Vn.default,this.SourceData,this.ChartMinutePrice,this.YClose,this.HQChartBorder,this.TextColor=So.MinuteInfo.TextColor,this.Font=So.MinuteInfo.Font,this.PointColor=So.MinuteInfo.PointColor,this.PointRadius=So.MinuteInfo.PointRadius,this.LineColor=So.MinuteInfo.LineColor,this.TextBGColor=So.MinuteInfo.TextBGColor,this.PixelTatio=C(),this.TextHeight=20,this.TextRectCache=[],this.InfoDrawCache=[],this.FrameBottom,this.FrameTop,this.FrameLeft,this.FrameRight,this.YOffset=5,this.IsHScreen=!1,this.IsDrawFull=!1,this.TooltipRect=[],this.SetOption=function(t){t.TextColor&&(this.TextColor=t.TextColor),t.TextBGColor&&(this.TextBGColor=t.TextBGColor),t.Font&&(this.Font=t.Font),t.PointColor&&(this.PointColor=t.PointColor),t.LineColor&&(this.LineColor=t.LineColor),t.TextHeight>0&&(this.TextHeight=t.TextHeight),1==t.IsDrawFull&&(this.IsDrawFull=!0)},this.Draw=function(){if(this.TooltipRect=[],this.ChartMinutePrice&&this.Data&&!(this.Data.size<=0)){this.TextRectCache=[],this.InfoDrawCache=[],this.PixelTatio=C(),this.YOffset=5*this.PixelTatio,this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount;this.ChartFrame.MinuteCount;this.FrameBottom=this.ChartBorder.GetBottom(),this.IsDrawFull&&this.HQChartBorder&&(this.FrameBottom=this.HQChartBorder.GetBottom()),this.FrameTop=this.ChartBorder.GetTop(),this.FrameLeft=this.ChartBorder.GetLeft(),this.FrameRight=this.ChartBorder.GetRight(),this.IsHScreen&&(this.FrameRight=this.ChartBorder.GetBottom(),this.FrameLeft=this.ChartBorder.GetTop(),this.FrameBottom=this.ChartBorder.GetLeft(),this.FrameTop=this.ChartBorder.GetRight()),this.YClose=this.ChartMinutePrice.YClose;for(var e=this.ChartMinutePrice.Source,a=e.DataOffset,i=0;a<e.Data.length&&i<t;++a,++i){var r=e.Data[a];if(r){var n=r.DateTime;this.Data.has(n)&&(this.IsHScreen?this.CalcuateInfoHScreenPosition(this.Data.get(n),i,r):this.CalcuateInfoPosition(this.Data.get(n),i,r))}}for(var a in this.InfoDrawCache){var r=this.InfoDrawCache[a];this.DrawInfoLines(r)}for(var a in this.InfoDrawCache){var r=this.InfoDrawCache[a];if(this.DrawInfoText(r),!this.IsHScreen){var o=r.Border,s=new at(o.X,o.Y,o.Width,o.Height),l={Data:{Item:r},Rect:s};this.TooltipRect.push(l)}}this.TextRectCache=[],this.InfoDrawCache=[]}},this.CalcuateInfoPosition=function(t,e,a){if(t&&t.Data&&!(t.Data.length<=0)){var i=t.Data[0];this.Canvas.font=this.Font;var r,n=this.Canvas.measureText(i.Title).width+4*this.PixelTatio,o=this.TextHeight*this.PixelTatio,s=this.ChartFrame.GetXFromIndex(e);r=we.IsNumber(i.Price)?this.ChartFrame.GetYFromData(i.Price):this.ChartFrame.GetYFromData(a.Close),s=p(s);var l=s<this.FrameLeft+Math.abs(this.FrameLeft-this.FrameRight)/2,h=[2,4,6,8,3,5,7],u=o+h[e%h.length]*this.PixelTatio,C={Y:[{Value:r+(o+this.YOffset),Offset:u},{Value:r-(2*o+this.YOffset),Offset:-u}]};a.Close<this.YClose&&(C.Y=C.Y.reverse());var c={X:s,Y:null,Width:n,Height:o};l||(c.X-=c.Width),this.FixTextRect(c,C);var f={Border:c,Start:{X:s,Y:r},IsLeft:l,Title:i.Title,Date:i.Date,Time:i.Time};i.Content&&(f.Content=i.Content),i.Link&&(f.Link=i.Link),i.Color&&(f.Color=i.Color),i.BGColor&&(f.BGColor=i.BGColor),this.InfoDrawCache.push(f),this.TextRectCache.push(c)}},this.CalcuateInfoHScreenPosition=function(t,e,a){if(t&&t.Data&&!(t.Data.length<=0)){var i=t.Data[0];this.Canvas.font=this.Font;var r,n=this.Canvas.measureText(i.Title).width+4*this.PixelTatio,o=this.TextHeight*this.PixelTatio,s=this.ChartFrame.GetXFromIndex(e);r=we.IsNumber(i.Price)?this.ChartFrame.GetYFromData(i.Price):this.ChartFrame.GetYFromData(a.Close),s=p(s);var l=s<this.FrameLeft+Math.abs(this.FrameLeft-this.FrameRight)/2,h=[2,4,6,8,3,5,7],u=o+h[e%h.length]*this.PixelTatio,C={X:[{Value:r+(o+this.YOffset),Offset:u},{Value:r-(2*o+this.YOffset),Offset:-u}]};a.Close>this.YClose&&(C.X=C.X.reverse());var c={X:null,Y:s,Width:o,Height:n};l||(c.Y-=c.Height),this.FixHScreenTextRect(c,C);var f={Border:c,Start:{X:r,Y:s},IsLeft:l,Title:i.Title};i.Content&&(f.Content=i.Content),i.Link&&(f.Link=i.Link),i.Color&&(f.Color=i.Color),i.BGColor&&(f.BGColor=i.BGColor),this.InfoDrawCache.push(f),this.TextRectCache.push(c)}},this.DrawInfoLines=function(t){var e=t.Border,a=t.IsLeft;this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(p(t.Start.X),t.Start.Y),a?this.Canvas.lineTo(p(t.Start.X),e.Y):this.IsHScreen?this.Canvas.lineTo(e.X,e.Y+e.Height):this.Canvas.lineTo(p(t.Start.X),e.Y),this.Canvas.stroke(),this.Canvas.fillStyle=this.PointColor,this.Canvas.beginPath(),this.Canvas.arc(t.Start.X,t.Start.Y,this.PointRadius,0,2*Math.PI),this.Canvas.closePath(),this.Canvas.fill()},this.DrawInfoText=function(t){var e=t.Border,a=e.X,i=e.Y;t.BGColor?this.Canvas.fillStyle=t.BGColor:this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(a,i,e.Width,e.Height),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.rect(a,i,e.Width,e.Height),this.Canvas.stroke(),this.IsHScreen&&(this.Canvas.save(),this.Canvas.translate(e.X,e.Y),this.Canvas.rotate(90*Math.PI/180),a=0,i=0),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",t.Color?this.Canvas.fillStyle=t.Color:this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.IsHScreen?this.Canvas.fillText(t.Title,a+2*this.PixelTatio,i-e.Width/2):this.Canvas.fillText(t.Title,a+2*this.PixelTatio,i+e.Height/2),this.IsHScreen&&this.Canvas.restore()},this.FixTextRect=function(t,e){for(var a in e.Y){var i=e.Y[a];t.Y=i.Value;for(var r,n=0;n<10;++n){var o=!1;for(var s in this.TextRectCache){var l=this.TextRectCache[s];if(this.IsOverlap(l,t)){o=!0;break}}if(0==o)return;if(r=t.Y,(r+=i.Offset)+t.Height>this.FrameBottom||r<this.FrameTop)break;t.Y=r}}},this.FixHScreenTextRect=function(t,e){for(var a in e.X){var i=e.X[a];t.X=i.Value;for(var r,n=0;n<10;++n){var o=!1;for(var s in this.TextRectCache){var l=this.TextRectCache[s];if(this.IsOverlap(l,t)){o=!0;break}}if(0==o)return;if(r=t.X,(r+=i.Offset)+t.Width<this.FrameBottom||r>this.FrameTop)break;t.X=r}}},this.IsOverlap=function(t,e){return t.X+t.Width>e.X&&e.X+e.Width>t.X&&t.Y+t.Height>e.Y&&e.Y+e.Height>t.Y},this.GetMaxMin=function(){return{Min:null,Max:null}},this.GetTooltipData=function(t,e,a){for(var i in this.TooltipRect){var r=this.TooltipRect[i];if(r.Rect){var n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e))return a.Data=r,a.ChartPaint=this,a.Type=3,!0}}return!1}}function _t(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMACD",this.UpColor=So.UpBarColor,this.DownColor=So.DownBarColor,this.LineWidth=1,this.DrawSelectedStatus=this.DrawLinePoint,this.ExportData=this.ExportArrayData,this.PtInChart=function(t,e){var a=this.ChartFrame.DataWidth,i=this.LineWidth*C();return 50==this.barWidth?i=null:i>a&&(i=a),i<4&&(i=4),this.PtInBar(t,e,{BarWidth:i})},this.DrawBars=function(t,e){var a=this.IsMinuteFrame(),i=this.ChartFrame.DataWidth,r=this.ChartFrame.DistanceWidth,n=this.ChartFrame.XPointCount,o=!0===this.ChartFrame.IsHScreen;if(o){var s=this.ChartBorder.GetHScreenBorder(),l=s.TopEx+r/2+So.FrameLeftMargin,h=s.BottomEx,u=this.GetLockRect();u&&(h=u.Top)}else{var s=this.ChartBorder.GetBorder(),l=s.LeftEx+r/2+So.FrameLeftMargin,h=s.RightEx,u=this.GetLockRect();u&&(h=u.Left)}this.Canvas.strokeStyle=e?this.UpColor:this.DownColor;var C=this.ChartFrame.GetYFromData(0);this.Canvas.beginPath();for(var c=0,f=this.Data.DataOffset,d=0;f<this.Data.Data.length&&d<n;++f,++d,l+=i+r){var D=this.Data.Data[f];if(null!=D){if(e){if(D<0)continue}else if(D>=0)continue;if(a)var m=this.ChartFrame.GetXFromIndex(d);else{var g=l,T=l+i;if(T>h)break;var m=g+(T-g)/2}if(m>h)break;var I=this.ChartFrame.GetYFromData(D),S=v(t,m);o?(this.Canvas.moveTo(C,p(m)),this.Canvas.lineTo(I,p(m))):(this.Canvas.moveTo(S,C),this.Canvas.lineTo(S,I)),++c}}c>0&&this.Canvas.stroke()},this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.IsVisible&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex()){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();var t=this.ChartFrame.DataWidth,e=this.LineWidth*C();50==this.LineWidth?e=t:e>t&&(e=t);var a=this.Canvas.lineWidth;this.Canvas.lineWidth=e,this.DrawBars(e,!0),this.DrawBars(e,!1),this.Canvas.lineWidth=a}},this.GetItemData=function(t){if(!t)return null;if(!we.IsNumber(t.Index))return null;if(!this.Data||!we.IsNonEmptyArray(this.Data.Data))return null;var e=t.Index;if(e<0||e>=this.Data.Data.length)return null;var a=this.Data.Data[e];return[{Value:a,Color:a>0?this.UpColor:this.DownColor,Name:this.Name}]}}function Gt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartClipColorStick",this.UpColor=So.UpBarColor,this.DownColor=So.DownBarColor,this.LineWidth=1,this.Style=0,this.DownDiffColor=So.DownBarColor,this.UpDiffColor=So.UpBarColor,this.TextLabelConfig={Font:12*C()+"px å¾®è½¯éé»",TextMargin:{Left:2,Right:2,Bottom:2,Top:2},TextColor:"rgb(230,230,230)",UpColor:"rgb(137,16,19)",DownColor:"rgb(44,104,57)",UnchangeColor:"rgb(111,112,115)",BorderColor:"rgb(0,0,0)",LabelWidth:0,TextHeight:0,MaxTextWidth:0},this.BaseLineColor,this.BaseValue=0,this.Super_GetMaxMin=this.GetMaxMin,this.ValueRange,this.IsShowText=!1,this.SetOption=function(t){t&&(t.UpColor&&(this.UpColor=t.UpColor),t.DownColor&&(this.DownColor=t.DownColor),t.DownDiffColor&&(this.DownDiffColor=t.DownDiffColor),t.UpDiffColor&&(this.UpDiffColor=t.UpDiffColor),t.BaseLineColor&&(this.BaseLineColor=t.BaseLineColor),we.IsNumber(t.BaseValue)&&(this.BaseValue=t.BaseValue),we.IsNumber(t.Style)&&(this.Style=t.Style),t.ValueRange&&(this.ValueRange=t.ValueRange))},this.Draw=function(){if(this.IsShowText=!1,this.TextLabelConfig.LabelWidth=0,this.TextLabelConfig.TextHeight=0,this.TextLabelConfig.MaxTextWidth=0,this.IsShow&&!this.ChartFrame.IsMinSize&&this.IsVisible&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex()){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=!0===this.ChartFrame.IsHScreen,r=this.LineWidth*C();if(50==this.LineWidth?r=t:r>t&&(r=t),!i){var n=t+e;if(this.IsMinuteFrame()){var o=this.ChartBorder.GetBorder();n=(o.Right-o.Left)/(a-1)}this.Canvas.font=this.TextLabelConfig.Font,this.TextLabelConfig.MaxTextWidth=this.Canvas.measureText("-888").width,this.TextLabelConfig.LabelWidth=this.TextLabelConfig.MaxTextWidth+this.TextLabelConfig.TextMargin.Left+this.TextLabelConfig.TextMargin.Right,this.IsShowText=n>this.TextLabelConfig.LabelWidth,this.TextLabelConfig.TextHeight=this.Canvas.measureText("æ").width}this.Canvas.save(),we.IsNumber(this.BaseValue)&&0!=this.BaseValue?(this.DrawBaseLine(),this.BaseValue>0?this.DrawBars(r,!0,!0):this.DrawBars(r,!1,!0)):(this.DrawBars(r,!0,!0),this.DrawBars(r,!1)),this.Canvas.restore()}},this.DrawBars=function(t,e,a){var i=this.IsMinuteFrame(),r=this.ChartFrame.DataWidth,n=this.ChartFrame.DistanceWidth,o=this.ChartFrame.XPointCount;if(!0===this.ChartFrame.IsHScreen){var s=this.ChartBorder.GetHScreenBorder(),l=s.TopEx+n/2+So.FrameLeftMargin,h=s.BottomEx,u=this.GetLockRect();u&&(h=u.Top)}else{var s=this.ChartBorder.GetBorder(),l=s.LeftEx+n/2+So.FrameLeftMargin,h=s.RightEx,u=this.GetLockRect();u&&(h=u.Left)}var C=this.ChartFrame.GetYFromData(this.BaseValue),c=[],f=[],d=[],D=null,m=this.Data.DataOffset;m-1>0&&(D=this.Data.Data[m-1]);for(var p=m,v=0;p<this.Data.Data.length&&v<o;++p,++v,l+=r+n){var g=this.Data.Data[p];if(null!=g){if(i)var T=this.ChartFrame.GetXFromIndex(v);else{var I=l,S=l+r;if(S>h)break;var T=I+(S-I)/2}if(T>h)break;var x={X:T,Value:g};if(we.IsNumber(D)&&(x.DiffValue=g-D),d.push(x),D=g,e){if(g<0)continue}else if(g>=0)continue;var b=!1,y=null;if(this.BaseValue>0?g<this.BaseValue&&(b=!0,y=1==this.Style?this.BaseValue+(this.BaseValue-g):this.BaseValue-(this.BaseValue-g)):this.BaseValue<0&&g>this.BaseValue&&(b=!0,y=1==this.Style?this.BaseValue-(g-this.BaseValue):this.BaseValue+(g-this.BaseValue)),b){var E=this.ChartFrame.GetYFromData(y);f.push({X:T,Y:E})}else{var E=this.ChartFrame.GetYFromData(g);c.push({X:T,Y:E})}}}this.Canvas.lineWidth=t,this.Canvas.strokeStyle=e?this.UpColor:this.DownColor,this.DrawStick(c,t,C),this.BaseValue>0?(this.Canvas.strokeStyle=this.UpDiffColor,this.DrawStick(f,t,C)):this.BaseValue<0&&(this.Canvas.strokeStyle=this.DownDiffColor,this.DrawStick(f,t,C)),this.IsShowText&&a&&this.DrawStickText(d)},this.DrawStick=function(t,e,a){if(we.IsNonEmptyArray(t)){var i=!0===this.ChartFrame.IsHScreen,r=0;this.Canvas.beginPath();for(var n=0;n<t.length;++n){var o=t[n],s=o.Y,l=v(e,o.X);i?(this.Canvas.moveTo(a,p(x)),this.Canvas.lineTo(s,p(x))):(this.Canvas.moveTo(l,a),this.Canvas.lineTo(l,s)),++r}r>0&&this.Canvas.stroke()}},this.DrawBaseLine=function(){if(we.IsNumber(this.BaseValue)&&0!=this.BaseValue&&this.BaseLineColor){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.GetBorder(),a=this.ChartFrame.GetYFromData(this.BaseValue);if(this.Canvas.strokeStyle=this.BaseLineColor,this.Canvas.lineWidth=1*C(),t);else{var i=p(a);this.Canvas.beginPath(),this.Canvas.moveTo(e.Left,i),this.Canvas.lineTo(e.Right,i),this.Canvas.stroke()}}},this.DrawStickText=function(t){var e=this.TextLabelConfig;this.Canvas.font=e.Font;for(var a=this.ChartBorder.GetBorder(),i=2*e.TextHeight+e.TextMargin.Bottom+e.TextMargin.Top,r=0;r<t.length;++r){var n=t[r],o=n.Value,s=n.X,l=s-e.LabelWidth/2,h={Left:l,Width:e.LabelWidth,Top:a.BottomEx+1,Height:i};if(h.Right=h.Left+h.Width,h.Bottom=h.Top+h.Height,we.IsNumber(o)){var u=e.UnchangeColor;o>0?u=e.UpColor:o<0&&(u=e.DownColor),this.DrawTextLabel(o,u,e.BorderColor,e.TextColor,h,e.TextHeight,e.MaxTextWidth,e.TextMargin)}var o=n.DiffValue,h={Left:l,Width:e.LabelWidth,Bottom:a.TopEx-1,Height:i};if(h.Right=h.Left+h.Width,h.Top=h.Bottom-h.Height,we.IsNumber(o)){var u=e.UnchangeColor;o>0?u=e.UpColor:o<0&&(u=e.DownColor),this.DrawTextLabel(o,u,e.BorderColor,e.TextColor,h,e.TextHeight,e.MaxTextWidth,e.TextMargin)}}},this.DrawTextLabel=function(t,e,a,i,r,n,o,s){e&&(this.Canvas.fillStyle=e,this.Canvas.fillRect(r.Left,r.Top,r.Width,r.Height)),a?(this.Canvas.lineWidth=2,this.Canvas.strokeStyle=a,this.Canvas.strokeRect(r.Left,r.Top,r.Width,r.Height)):(this.Canvas.lineWidth=1,this.Canvas.strokeStyle="rgb(0,0,0)",this.Canvas.strokeRect(r.Left,r.Top,r.Width,r.Height));var l=[null,null],h="";if(t<0&&(t=Math.abs(t),h="-"),t>999){var u=parseInt(t/1e3),C=parseInt(t%1e3);l[0]=""+h+u,l[1]=""+C,C<10?l[1]="00"+C:C<100&&(l[1]="0"+C)}else l[1]=""+h+t.toFixed(0);this.Canvas.textAlign="right",this.Canvas.textBaseline="top";var c=r.Right-(r.Right-r.Left-o)/2;this.Canvas.fillStyle=i;for(var f=s.Top+r.Top,d=0;d<l.length;++d){var D=l[d];D&&this.Canvas.fillText(D,c,f),f+=n}},this.GetMaxMin=function(){if(!we.IsNumber(this.BaseValue)||0==this.BaseValue)return this.Super_GetMaxMin();if(this.ValueRange){var t={Min:this.ValueRange.Min,Max:this.ValueRange.Max};return t}var e=this.ChartFrame.XPointCount,a=this.Data.DataOffset;this.ChartFrame.GlobalOption&&this.ChartFrame.GlobalOption.IsValueFullRange&&(a=0,e=this.Data.Data.length);var t={Min:null,Max:null},i=null;if(!this.Data||!this.Data.Data)return t;this.BaseValue>0?t.Min=this.BaseValue:t.Max=this.BaseValue;for(var r=a,n=0;r<this.Data.Data.length&&n<e;++r,++n){var o=this.Data.Data[r];if(null!=o&&!isNaN(o)){if(this.BaseValue>0){if(o<0)continue;if(o<this.BaseValue){var s=this.BaseValue-o;(null==i||i<s)&&(i=s);continue}}else{if(o>0)continue;if(o>this.BaseValue){var s=o-this.BaseValue;(null==i||i<s)&&(i=s);continue}}null==t.Max&&(t.Max=o),null==t.Min&&(t.Min=o),t.Max<o&&(t.Max=o),t.Min>o&&(t.Min=o)}}if(this.BaseValue>0)if(1==this.Style){if(we.IsNumber(i)){var o=this.BaseValue+i;(we.IsNumber(t.Max)||t.Max<o)&&(t.Max=o)}}else we.IsNumber(i)&&we.IsNumber(t.Min)&&(t.Min-=i);else if(1==this.Style){if(we.IsNumber(i)){var o=this.BaseValue-i;(we.IsNumber(t.Min)||t.Min>o)&&(t.Min=o)}}else we.IsNumber(i)&&we.IsNumber(t.Max)&&(t.Max+=i);return t}}function kt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.ClassName="ChartBand",this.FirstColor=So.Index.LineColor[0],this.SecondColor=So.Index.LineColor[1],this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.IsVisible&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex()){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();for(var t=this.IsMinuteFrame(),e=this.ChartFrame.IsHScreen,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartFrame.XPointCount,n=this.ChartBorder.GetLeft()+i/2+2,o=0,s=0,l=0,h=[],u=[],C=this.Data.DataOffset,c=0;C<this.Data.Data.length&&c<r;++C,++c,n+=a+i){for(h=[],u=[];C<this.Data.Data.length&&c<r;++C,++c,n+=a+i){var f=this.Data.Data[C];if(null==f||null==f.Value||null==f.Value2)break;if(t)o=this.ChartFrame.GetXFromIndex(c);else{var d=n;o=d+(n+a-d)/2}s=this.ChartFrame.GetYFromData(f.Value),l=this.ChartFrame.GetYFromData(f.Value2),e?(h.push({x:s,y:o}),u.push({x:l,y:o})):(h.push({x:o,y:s}),u.push({x:o,y:l}))}h.length>1&&u.length>1&&this.DrawBand(h,u)}}},this.ClipTop=function(t){var e=this.ChartFrame.IsHScreen;this.Canvas.beginPath();for(var a=0;a<t.length;++a)0==a?this.Canvas.moveTo(t[a].x,t[a].y):this.Canvas.lineTo(t[a].x,t[a].y);var i=t[0],r=t[t.length-1];if(e){var n=this.ChartBorder.GetRightEx();this.Canvas.lineTo(n,r.y),this.Canvas.lineTo(n,i.y)}else{var o=this.ChartBorder.GetTopEx();this.Canvas.lineTo(r.x,o),this.Canvas.lineTo(i.x,o)}this.Canvas.closePath(),this.Canvas.clip()},this.ClipBottom=function(t){var e=this.ChartFrame.IsHScreen;this.Canvas.beginPath();for(var a=0;a<t.length;++a)0==a?this.Canvas.moveTo(t[a].x,t[a].y):this.Canvas.lineTo(t[a].x,t[a].y);var i=t[0],r=t[t.length-1];if(e){var n=this.ChartBorder.GetLeftEx();this.Canvas.lineTo(n,r.y),this.Canvas.lineTo(n,i.y)}else{var o=this.ChartBorder.GetBottomEx();this.Canvas.lineTo(r.x,o),this.Canvas.lineTo(i.x,o)}this.Canvas.closePath(),this.Canvas.clip()},this.DrawArea=function(t,e,a){this.Canvas.beginPath();for(var i=0;i<t.length;++i)0==i?this.Canvas.moveTo(t[i].x,t[i].y):this.Canvas.lineTo(t[i].x,t[i].y);for(var i=e.length-1;i>=0;--i)this.Canvas.lineTo(e[i].x,e[i].y);this.Canvas.closePath(),this.Canvas.fillStyle=a,this.Canvas.fill()},this.DrawBand=function(t,e){this.FirstColor&&(this.Canvas.save(),this.ClipTop(t),this.DrawArea(t,e,this.FirstColor),this.Canvas.restore()),this.SecondColor&&(this.Canvas.save(),this.ClipBottom(t),this.DrawArea(t,e,this.SecondColor),this.Canvas.restore())},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};e.Min=null,e.Max=null;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(null!=r&&null!=r.Value&&null!=r.Value2){var n=r.Value>r.Value2?r.Value:r.Value2,o=r.Value<r.Value2?r.Value:r.Value2;null==e.Max?e.Max=n:e.Max<n&&(e.Max=n),null==e.Min?e.Min=o:e.Min>o&&(e.Min=o)}}return e}}function Vt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.ClassName="ChartLineArea",this.Color="rgb(56,67,99)",this.IsHScreen=!1,this.Draw=function(){if(!this.ChartFrame.IsMinSize){if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data){for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+So.FrameLeftMargin,r=0,n=0,o=0,s=[],l=this.Data.DataOffset,h=0;l<this.Data.Data.length&&h<a;++l,++h,i+=t+e){var u=this.Data.Data[l];s[l]=null,null!=u&&null!=u.Value&&null!=u.Value2&&(r=this.ChartFrame.GetXFromIndex(h),n=this.ChartFrame.GetYFromData(u.Value),o=this.ChartFrame.GetYFromData(u.Value2),this.IsHScreen?s[l]={Line:{X:n,Y:r},Line2:{X:o,Y:r}}:s[l]={Line:{X:r,Y:n},Line2:{X:r,Y:o}})}this.Canvas.fillStyle=this.Color;var C=!0,c=0,f=[];for(var l in s){var d=s[l];if(d)C?(this.Canvas.beginPath(),this.Canvas.moveTo(d.Line.X,d.Line.Y),C=!1):this.Canvas.lineTo(d.Line.X,d.Line.Y),f.push(d),++c;else{if(c>0){for(var h=f.length-1;h>=0;--h){var D=f[h];this.Canvas.lineTo(D.Line2.X,D.Line2.Y)}this.Canvas.closePath(),this.Canvas.fill()}C=!0,c=0,f=[]}}if(c>0){for(var h=f.length-1;h>=0;--h){var D=f[h];this.Canvas.lineTo(D.Line2.X,D.Line2.Y)}this.Canvas.closePath(),this.Canvas.fill()}}}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};e.Min=null,e.Max=null;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(r&&null!=r.Value&&null!=r.Value2){var n=r.Value>r.Value2?r.Value:r.Value2,o=r.Value<r.Value2?r.Value:r.Value2;null==e.Max?e.Max=n:e.Max<n&&(e.Max=n),null==e.Min?e.Min=o:e.Min>o&&(e.Min=o)}}return e}}function Ht(){this.newMethod=Vt,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.IsHScreen=!1,this.ClassName="ChartFillRGN",this.DrawRGB=function(t){var e=!0,a=0,i=[],r=null;for(var n in t){var o=t[n];if(!o||r&&o.Color!=r){if(a>0){for(var s=i.length-1;s>=0;--s){var l=i[s];this.Canvas.lineTo(l.Line2.X,l.Line2.Y)}this.Canvas.closePath(),this.Canvas.fillStyle=r,this.Canvas.fill()}e=!0,a=0,i=[],r=null}o&&(e?(this.Canvas.beginPath(),this.Canvas.moveTo(o.Line.X,o.Line.Y),e=!1,r=o.Color):this.Canvas.lineTo(o.Line.X,o.Line.Y),i.push(o),++a)}if(a>0){for(var s=i.length-1;s>=0;--s){var l=i[s];this.Canvas.lineTo(l.Line2.X,l.Line2.Y)}this.Canvas.closePath(),this.Canvas.fillStyle=r,this.Canvas.fill()}},this.Draw=function(){if(!this.ChartFrame.IsMinSize){if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data){for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+So.FrameLeftMargin,r=0,n=0,o=0,s=[],l=this.Data.DataOffset,h=0;l<this.Data.Data.length&&h<a;++l,++h,i+=t+e){var u=this.Data.Data[l];s[l]=null,null!=u&&null!=u.Value&&null!=u.Value2&&u.Color&&(r=this.ChartFrame.GetXFromIndex(h),n=this.ChartFrame.GetYFromData(u.Value),o=this.ChartFrame.GetYFromData(u.Value2),this.IsHScreen?s[l]={Line:{X:n,Y:r},Line2:{X:o,Y:r},Color:u.Color}:s[l]={Line:{X:r,Y:n},Line2:{X:r,Y:o},Color:u.Color})}this.DrawRGB(s)}}}}function Yt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!1,this.ClassName="ChartFLOATRGN",this.Color="rgb(56,67,99)",this.IsHScreen=!1,this.Draw=function(){if(!this.ChartFrame.IsMinSize){if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data){for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+So.FrameLeftMargin,r=0,n=0,o=0,s=[],l=this.Data.DataOffset,h=0;l<this.Data.Data.length&&h<a;++l,++h,i+=t+e){var u=this.Data.Data[l];s[l]=null,u&&we.IsNumber(u.Value)&&we.IsNumber(u.Value2)&&u.Color&&(r=this.ChartFrame.GetXFromIndex(h),n=this.ChartFrame.GetYFromData(u.Value),this.IsHScreen?s[l]={Line:{X:n,Y:r},Line2:{X:n+u.Value2*C(),Y:r},Color:u.Color}:s[l]={Line:{X:r,Y:n},Line2:{X:r,Y:n-u.Value2*C()},Color:u.Color})}var c=null;for(var l in s){var u=s[l];if(c&&u)if(this.IsHScreen){var f=u.Line.Y-c.Line.Y;r=c.Line.Y+f/2,n=c.Line.X+(u.Line.X-c.Line.X)/2,o=c.Line2.X+(u.Line2.X-c.Line2.X)/2,c.RightLine={X:n,Y:r},c.RightLine2={X:o,Y:r},u.LeftLine={X:n,Y:r},u.LeftLine2={X:o,Y:r}}else{var f=u.Line.X-c.Line.X;r=c.Line.X+f/2,n=c.Line.Y+(u.Line.Y-c.Line.Y)/2,o=c.Line2.Y+(u.Line2.Y-c.Line2.Y)/2,c.RightLine={X:r,Y:n},c.RightLine2={X:r,Y:o},u.LeftLine={X:r,Y:n},u.LeftLine2={X:r,Y:o}}c=u}this.DrawRGB(s)}}},this.DrawRGB=function(t){var e=!0,a=0,i=[],r=null;if(this.IsHScreen)var n=this.ChartBorder.GetLeftEx(),o=this.ChartBorder.GetRightEx(),s=this.ChartBorder.GetTop(),l=this.ChartBorder.GetBottom();else var n=this.ChartBorder.GetLeft(),o=this.ChartBorder.GetRight(),s=this.ChartBorder.GetTopEx(),l=this.ChartBorder.GetBottomEx();this.Canvas.save(),this.Canvas.beginPath(),this.Canvas.rect(n,s,o-n,l-s),this.Canvas.clip();for(var h in t){var u=t[h];if(!u||r&&u.Color!=r){if(a>0){var C=i[i.length-1],c=i[0];C.RightLine&&(this.Canvas.lineTo(C.RightLine.X,C.RightLine.Y),this.Canvas.lineTo(C.RightLine2.X,C.RightLine2.Y));for(var f=i.length-1;f>=0;--f){var d=i[f];this.Canvas.lineTo(d.Line2.X,d.Line2.Y)}c.LeftLine2&&this.Canvas.lineTo(c.LeftLine2.X,c.LeftLine2.Y),this.Canvas.closePath(),this.Canvas.fillStyle=r,this.Canvas.fill()}e=!0,a=0,i=[],r=null}u&&(e?(this.Canvas.beginPath(),u.LeftLine?(this.Canvas.moveTo(u.LeftLine.X,u.LeftLine.Y),this.Canvas.lineTo(u.Line.X,u.Line.Y)):this.Canvas.moveTo(u.Line.X,u.Line.Y),e=!1,r=u.Color):this.Canvas.lineTo(u.Line.X,u.Line.Y),i.push(u),++a)}if(a>0){var C=i[i.length-1],c=i[0];C.RightLine&&(this.Canvas.lineTo(C.RightLine.X,C.RightLine.Y),this.Canvas.lineTo(C.RightLine2.X,C.RightLine2.Y));for(var f=i.length-1;f>=0;--f){var d=i[f];this.Canvas.lineTo(d.Line2.X,d.Line2.Y)}c.LeftLine2&&this.Canvas.lineTo(c.LeftLine2.X,c.LeftLine2.Y),this.Canvas.closePath(),this.Canvas.fillStyle=r,this.Canvas.fill()}this.Canvas.restore()},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};e.Min=null,e.Max=null;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(r&&we.IsNumber(r.Value)){var n=r.Value;null==e.Max?e.Max=n:e.Max<n&&(e.Max=n),null==e.Min?e.Min=n:e.Min>n&&(e.Min=n)}}return e}}function Xt(){this.newMethod=Ht,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.IsHScreen=!1,this.ClassName="ChartFillBGRGN",this.DrawVerticalRGN=function(){for(var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+So.FrameLeftMargin,r=this.ChartBorder.GetTopEx(),n=this.ChartBorder.GetBottomEx(),o=r,s=n,l=[],h=this.Data.DataOffset,u=0;h<this.Data.Data.length&&u<a;++h,++u,i+=t+e){var C=this.Data.Data[h];l[h]=null,C&&C.Color&&(x=this.ChartFrame.GetXFromIndex(u),this.IsHScreen?l[h]={Line:{X:o,Y:x},Line2:{X:s,Y:x},Color:C.Color}:l[h]={Line:{X:x,Y:o},Line2:{X:x,Y:s},Color:C.Color})}this.DrawRGB(l)},this.Draw=function(){if(!this.ChartFrame.IsMinSize){if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.Data&&this.Data.Data){if("FILLVERTICALRGN"==this.Name)return void this.DrawVerticalRGN();var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount,i=this.ChartBorder.GetLeft()+e/2+So.FrameLeftMargin,r=this.ChartBorder.GetTopEx(),n=this.ChartBorder.GetBottomEx(),o=0,s=0,l=r;"FILLBOTTOMRGN"==this.Name&&(l=n);for(var h=[],u=this.Data.DataOffset,C=0;u<this.Data.Data.length&&C<a;++u,++C,i+=t+e){var c=this.Data.Data[u];h[u]=null,null!=c&&null!=c.Value&&c.Color&&(o=this.ChartFrame.GetXFromIndex(C),s=this.ChartFrame.GetYFromData(c.Value),this.IsHScreen?h[u]={Line:{X:s,Y:o},Line2:{X:l,Y:o},Color:c.Color}:h[u]={Line:{X:o,Y:s},Line2:{X:o,Y:l},Color:c.Color})}this.DrawRGB(h)}}},this.DrawRGB=function(t){var e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=(a+e)/2,r=!0,n=0,o=[],s=null;for(var l in t){var h=t[l];if(!h||s&&h.Color!=s){if(n>0){for(var u=o.length-1;u>=0;--u){var C=o[u];this.Canvas.lineTo(C.Line2.X+i,C.Line2.Y),this.Canvas.lineTo(C.Line2.X-i,C.Line2.Y)}this.Canvas.closePath(),this.Canvas.fillStyle=s,this.Canvas.fill()}r=!0,n=0,o=[],s=null}h&&(r?(this.Canvas.beginPath(),this.Canvas.moveTo(h.Line.X-i,h.Line.Y),this.Canvas.lineTo(h.Line.X+i,h.Line.Y),r=!1,s=h.Color):(this.Canvas.lineTo(h.Line.X-i,h.Line.Y),this.Canvas.lineTo(h.Line.X+i,h.Line.Y)),o.push(h),++n)}if(n>0){for(var u=o.length-1;u>=0;--u){var C=o[u];this.Canvas.lineTo(C.Line2.X+i,C.Line2.Y),this.Canvas.lineTo(C.Line2.X-i,C.Line2.Y)}this.Canvas.closePath(),this.Canvas.fillStyle=s,this.Canvas.fill()}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};e.Min=null,e.Max=null;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(r&&null!=r.Value){var r=r.Value;null==e.Max?e.Max=r:e.Max<r&&(e.Max=r),null==e.Min?e.Min=r:e.Min>r&&(e.Min=r)}}return e}}function Wt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.IsDrawFirst=!0,this.ClassName="ChartChannel",this.IsHScreen=!1,this.PointCount=0,this.DataWidth=0,this.DistanceWidth=0,this.ChartRight=0,this.LineColor="RGB(255,0,0)",this.LineDotted=[3,3],this.AreaColor="RGB(255,222,173)",this.LineWidth=1,this.CalculateData=function(){for(var t=[],e=[],a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<this.PointCount;++a,++i){var r=this.Data.Data[a];if(r&&we.IsNumber(r.Value)&&we.IsNumber(r.Value2)){var n=this.ChartFrame.GetXFromIndex(i);if(n>this.ChartRight)break;var o=this.ChartFrame.GetYFromData(r.Value),s=this.ChartFrame.GetYFromData(r.Value2);e.push({X:n,Y:o,Y2:s})}else e.length>0&&(t.push(e),e=[])}return e.length>0&&t.push(e),t},this.DrawArea=function(t){if(!(t.length<=0)){this.Canvas.beginPath();var e=0,a=t[0];this.IsHScreen?this.Canvas.moveTo(a.Y,a.X):this.Canvas.moveTo(a.X,a.Y);for(var i=1;i<t.length;++i){var r=t[i];this.IsHScreen?this.Canvas.lineTo(r.Y,r.X):this.Canvas.lineTo(r.X,r.Y),++e}for(var i=t.length-1;i>=0;--i){var r=t[i];this.IsHScreen?this.Canvas.lineTo(r.Y2,r.X):this.Canvas.lineTo(r.X,r.Y2),++e}this.Canvas.closePath(),this.Canvas.fillStyle=this.AreaColor,this.Canvas.fill()}},this.DrawLine=function(t){this.Canvas.strokeStyle=this.LineColor;for(var e=0;e<2;++e){for(var a=!0,i=0,r=0;r<t.length;++r){var n=t[r];a?(this.Canvas.beginPath(),this.IsHScreen?this.Canvas.moveTo(0===e?n.Y:n.Y2,n.X):this.Canvas.moveTo(n.X,0===e?n.Y:n.Y2),a=!1):this.IsHScreen?this.Canvas.lineTo(0===e?n.Y:n.Y2,n.X):this.Canvas.lineTo(n.X,0===e?n.Y:n.Y2),++i}i>0&&this.Canvas.stroke()}},this.Draw=function(){if(!this.ChartFrame.IsMinSize){if(this.NotSupportMessage)return void this.DrawNotSupportmessage();this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.PointCount=this.ChartFrame.XPointCount,this.DataWidth=this.ChartFrame.DataWidth,this.DistanceWidth=this.ChartFrame.DistanceWidth,this.IsHScreen?this.ChartRight=this.ChartBorder.GetBottom():this.ChartRight=this.ChartBorder.GetRight();var t=this.CalculateData();if(t&&!(t.length<=0)){this.Canvas.save(),this.Canvas.lineWidth=this.LineWidth*C(),this.Canvas.setLineDash(this.LineDotted);for(var e=0;e<t.length;++e){var a=t[e];this.DrawArea(a),this.DrawLine(a)}this.Canvas.restore()}}},this.GetMaxMin=function(){for(var t=this.ChartFrame.XPointCount,e={Min:null,Max:null},a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(null!=r&&null!=r.Value&&null!=r.Value2){var n=r.Value>r.Value2?r.Value:r.Value2,o=r.Value<r.Value2?r.Value:r.Value2;null==e.Max?e.Max=n:e.Max<n&&(e.Max=n),null==e.Min?e.Min=o:e.Min>o&&(e.Min=o)}}return e}}function Ut(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartBackground",this.Color=null,this.ColorAngle=0,this.IsDrawFirst=!0,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Color&&!(this.Color.length<=0)){if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,2==this.Color.length){if(this.IsHScreen)if(0==this.ColorAngle)var t={X:this.ChartBorder.GetRight(),Y:this.ChartBorder.GetTopEx()},e={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetTopEx()};else var t={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetTopEx()},e={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetBottomEx()};else if(0==this.ColorAngle)var t={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetTopEx()},e={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetBottomEx()};else var t={X:this.ChartBorder.GetLeft(),Y:this.ChartBorder.GetTopEx()},e={X:this.ChartBorder.GetRight(),Y:this.ChartBorder.GetTopEx()};var a=this.Canvas.createLinearGradient(t.X,t.Y,e.X,e.Y);a.addColorStop(0,this.Color[0]),a.addColorStop(1,this.Color[1]),this.Canvas.fillStyle=a}else{if(1!=this.Color.length)return;this.Canvas.fillStyle=this.Color[0]}if("DRAWGBK2"==this.Name||"KLINE_BG"==this.Name)return void this.DrawRegion();if(this.IsHScreen)var i=this.ChartBorder.GetLeftEx(),r=this.ChartBorder.GetTop(),n=this.ChartBorder.GetWidthEx(),o=this.ChartBorder.GetHeight();else var i=this.ChartBorder.GetLeft(),r=this.ChartBorder.GetTopEx(),n=this.ChartBorder.GetWidth(),o=this.ChartBorder.GetHeightEx();this.Canvas.fillRect(i,r,n,o)}},this.DrawRegion=function(){var t=this.ChartFrame.XPointCount,e=this.ChartBorder.GetLeft()+i/2+So.FrameLeftMargin,a=this.ChartFrame.DataWidth,i=this.ChartFrame.DistanceWidth,r=this.ChartBorder.GetTopEx(),n=this.ChartBorder.GetBottomEx();this.IsHScreen&&(r=this.ChartBorder.GetRightEx(),n=this.ChartBorder.GetLeftEx());for(var o=[],s=this.Data.DataOffset,l=0;s<this.Data.Data.length&&l<t;++s,++l,e+=a+i){var h=this.Data.Data[s];if(o[s]=null,we.IsNumber(h)&&!(h<=0)){var u=this.ChartFrame.GetXFromIndex(l);this.ChartFrame.GetYFromData(h.Value);this.IsHScreen?o[s]={Line:{X:n,Y:u},Line2:{X:r,Y:u}}:o[s]={Line:{X:u,Y:r},Line2:{X:u,Y:n}}}}this.DrawBG(o)},this.DrawBG=function(t){var e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=(a+e)/2,r=!0,n=0,o=[],s=null;for(var l in t){var h=t[l];if(!h||s&&h.Color!=s){if(n>0){for(var u=o.length-1;u>=0;--u){var C=o[u];this.IsHScreen?(this.Canvas.lineTo(C.Line2.X,C.Line2.Y+i),this.Canvas.lineTo(C.Line2.X,C.Line2.Y-i)):(this.Canvas.lineTo(C.Line2.X+i,C.Line2.Y),this.Canvas.lineTo(C.Line2.X-i,C.Line2.Y))}this.Canvas.closePath(),this.Canvas.fill()}r=!0,n=0,o=[],s=null}h&&(r?(this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(h.Line.X,h.Line.Y-i),this.Canvas.lineTo(h.Line.X,h.Line.Y+i)):(this.Canvas.moveTo(h.Line.X-i,h.Line.Y),this.Canvas.lineTo(h.Line.X+i,h.Line.Y)),r=!1,s=h.Color):this.IsHScreen?(this.Canvas.lineTo(h.Line.X,h.Line.Y-i),this.Canvas.lineTo(h.Line.X,h.Line.Y+i)):(this.Canvas.lineTo(h.Line.X-i,h.Line.Y),this.Canvas.lineTo(h.Line.X+i,h.Line.Y)),o.push(h),++n)}if(n>0){for(var u=o.length-1;u>=0;--u){var C=o[u];this.IsHScreen?(this.Canvas.lineTo(C.Line2.X,C.Line2.Y+i),this.Canvas.lineTo(C.Line2.X,C.Line2.Y-i)):(this.Canvas.lineTo(C.Line2.X+i,C.Line2.Y),this.Canvas.lineTo(C.Line2.X-i,C.Line2.Y))}this.Canvas.closePath(),this.Canvas.fill()}},this.GetMaxMin=function(){return{Min:null,Max:null}}}function Kt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartBackgroundDiv",this.AryColor,this.ColorType=0,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&we.IsNonEmptyArray(this.AryColor)&&this.Data&&this.Data.Data){var t,e,a,i,r,n=!0===this.ChartFrame.IsHScreen,o=this.ChartFrame.DataWidth,s=this.ChartFrame.DistanceWidth,l=this.ChartFrame.XPointCount;n?(t=this.ChartBorder.GetHScreenBorder(),e=t.TopEx+s/2+So.FrameLeftMargin,a=t.BottomEx,i=t.LeftEx,r=t.RightEx):(t=this.ChartBorder.GetBorder(),e=t.LeftEx+s/2+So.FrameLeftMargin,a=t.RightEx,i=t.TopEx,r=t.BottomEx);for(var h=null,u=this.Data.DataOffset,C=0;u<this.Data.Data.length&&C<l;++u,++C,e+=o+s){var c=this.Data.Data[u],f=e,d=e+o;if(d>a)break;if(c){var D=i,m=r;if(we.IsNonEmptyArray(c.AryValue)){var p=this.ChartFrame.GetYFromData(c.AryValue[0]),v=this.ChartFrame.GetYFromData(c.AryValue[1]);D=Math.min(p,v),m=Math.max(p,v)}n?h?(h.Bottom=d,h.Left>D&&(h.Left=D),h.Right<m&&(h.Right=m)):h={Left:D,Right:m,Top:f,Bottom:d}:h?(h.Right=d,h.Top>D&&(h.Top=D),h.Bottom<m&&(h.Bottom=m)):h={Left:f,Right:d,Top:D,Bottom:m}}else h&&this.DrawDiv(h,n),h=null}}},this.DrawDiv=function(t,e){if(2==this.ColorType)this.Canvas.strokeStyle=this.AryColor[0],this.Canvas.strokeRect(p(t.Left),p(t.Top),g(t.Right-t.Left),g(t.Bottom-t.Top));else if(3==this.ColorType)this.Canvas.fillStyle=this.AryColor[1],this.Canvas.fillRect(g(t.Left),g(t.Top),g(t.Right-t.Left),g(t.Bottom-t.Top)),this.Canvas.strokeStyle=this.AryColor[0],this.Canvas.strokeRect(p(t.Left),p(t.Top),g(t.Right-t.Left),g(t.Bottom-t.Top));else{if(0!=this.ColorType&&1!=this.ColorType)return;var a=null;a=e?0==this.ColorType?this.Canvas.createLinearGradient(t.Left,t.Top,t.Right,t.Top):this.Canvas.createLinearGradient(t.Left,t.Top,t.Left,t.Bottom):0==this.ColorType?this.Canvas.createLinearGradient(t.Left,t.Top,t.Left,t.Bottom):this.Canvas.createLinearGradient(t.Left,t.Top,t.Right,t.Top),a.addColorStop(.5,this.AryColor[0]),a.addColorStop(1,this.AryColor[1]),this.Canvas.fillStyle=a,this.Canvas.fillRect(g(t.Left),g(t.Top),g(t.Right-t.Left),g(t.Bottom-t.Top))}}}function zt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartRectangle",this.Color=[],this.Rect,this.BorderColor=So.FrameBorderPen,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Color&&this.Rect&&!(this.Color.length<=0)){this.Canvas.strokeStyle=this.BorderColor;var t=!1;if(2==this.Color.length)this.Canvas.fillStyle=this.Color[0],t=!0;else{if(1!=this.Color.length)return;this.Color[0]&&(this.Canvas.fillStyle=this.Color[0],t=!0)}var e=this.ChartBorder.GetWidth(),a=this.ChartBorder.GetHeightEx(),i=this.Rect.Left/1e3*e,r=this.Rect.Top/1e3*a,n=this.Rect.Right/1e3*e,o=this.Rect.Bottom/1e3*a;i=this.ChartBorder.GetLeft()+i,r=this.ChartBorder.GetTopEx()+r,n=this.ChartBorder.GetLeft()+n,o=this.ChartBorder.GetTopEx()+o;var s=Math.abs(i-n),l=Math.abs(r-o);t&&this.Canvas.fillRect(i,r,s,l),this.Canvas.beginPath(),this.Canvas.rect(p(i),p(r),g(s),g(l)),this.Canvas.stroke()}}}function Jt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartTextLine",this.Text,this.Line,this.Price,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Text&&this.Line&&we.IsNumber(this.Price)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRight(),a=this.ChartBorder.GetBottomEx(),i=this.ChartBorder.GetTopEx(),r=this.ChartFrame.GetYFromData(this.Price),n=0;if(this.Text.Title){var o=t+2*C(),s=r;this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var l=8*C();r-l<i?(this.Canvas.textBaseline="top",s=i):r+l>a&&(this.Canvas.textBaseline="bottom",s=a),this.Canvas.fillStyle=this.Text.Color,this.Canvas.font=this.Text.Font,this.Canvas.fillText(this.Text.Title,o,s),n=this.Canvas.measureText(this.Text.Title).width+4*C()}if(this.Line.Type>0){2==this.Line.Type&&(this.Canvas.save(),this.Canvas.setLineDash([3,5]));var o=t+n;this.Canvas.strokeStyle=this.Line.Color,this.Canvas.beginPath(),this.Canvas.moveTo(o,p(r)),this.Canvas.lineTo(e,p(r)),this.Canvas.stroke(),2==this.Line.Type&&this.Canvas.restore()}}},this.GetMaxMin=function(){var t={Min:null,Max:null};return we.IsNumber(this.Price)&&(t.Min=this.Price,t.Max=this.Price),t}}function qt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiBar",this.Bars=[],this.IsHScreen=!1,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.IsVisible&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex()&&this.Data&&!(this.Data.length<=0)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=this.ChartFrame.DataWidth,i=C(),r=[];for(var n in this.Bars){var o=this.Bars[n],s={Point:[],Color:o.Color,Width:a,Type:0};o.Type>0&&(s.Type=o.Type),o.Width>0?(s.Width=o.Width*i,s.Width>a&&(s.Width=a)):s.Width<4&&(s.Width=1*i);for(var l in o.Point){var h=o.Point[l];if(we.IsNumber(h.Index)){var u=h.Index-e;if(u>=0&&u<t){var c=this.ChartFrame.GetXFromIndex(u),f=this.ChartFrame.GetYFromData(h.Value),d=this.ChartFrame.GetYFromData(h.Value2);s.Point.push({X:c,Y:f,Y2:d})}}}s.Point.length>0&&r.push(s)}for(var n in r){var o=r[n];o.Width>=4?1==o.Type?this.DrawHollowBar(o):this.DrawFillBar(o):this.DrawLineBar(o)}}},this.DrawLineBar=function(t){this.Canvas.strokeStyle=t.Color;var e=this.Canvas.lineWidth;this.Canvas.lineWidth=t.Width;for(var a in t.Point){var i=t.Point[a];this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(p(i.Y),p(i.X)),this.Canvas.lineTo(p(i.Y2),p(i.X))):(this.Canvas.moveTo(p(i.X),p(i.Y)),this.Canvas.lineTo(p(i.X),p(i.Y2))),this.Canvas.stroke()}this.Canvas.lineWidth=e},this.DrawFillBar=function(t){this.Canvas.fillStyle=t.Color;for(var e in t.Point){var a=t.Point[e],i=a.X-t.Width/2,r=Math.min(a.Y,a.Y2),n=t.Width,o=Math.abs(a.Y-a.Y2);this.IsHScreen?this.Canvas.fillRect(g(r),g(i),g(o),g(n)):this.Canvas.fillRect(g(i),g(r),g(n),g(o))}},this.DrawHollowBar=function(t){this.Canvas.strokeStyle=t.Color;for(var e in t.Point){var a=t.Point[e],i=a.X-t.Width/2,r=Math.min(a.Y,a.Y2),n=t.Width,o=Math.abs(a.Y-a.Y2);this.Canvas.beginPath(),this.IsHScreen?this.Canvas.rect(p(r),p(i),g(o),g(n)):this.Canvas.rect(p(i),p(r),g(n),g(o)),this.Canvas.stroke()}this.Canvas.lineWidth=1},this.GetMaxMin=function(){var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var r in this.Bars){var n=this.Bars[r];for(var o in n.Point){var s=n.Point[o];if(s.Index>=a&&s.Index<i){var l=Math.min(s.Value,s.Value2),h=Math.max(s.Value,s.Value2);null==t.Max?t.Max=h:t.Max<h&&(t.Max=h),null==t.Min?t.Min=l:t.Min>l&&(t.Min=l)}}}return t}}function Zt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiLine",this.Lines=[],this.LineDash,this.LineWidth=1,this.IsHScreen=!1,this.ArrawAngle=35,this.ArrawLength=10,this.ArrawLineWidth=5,this.Arrow={Start:!1,End:!1},this.IsFullRangeMaxMin=!1,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.IsVisible&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex()&&this.Data&&!(this.Data.length<=0)&&we.IsNonEmptyArray(this.Lines)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;for(var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=[],i=[],r=0;r<this.Lines.length;++r){var n=this.Lines[r],o={Point:[],Color:n.Color,AryCircle:null},s={Start:[],End:[]};n.BGColor&&(o.BGColor=n.BGColor),we.IsNonEmptyArray(n.Circle)&&(o.AryCircle=n.Circle);var l=!1;if(we.IsBool(n.IsExtendLine)&&(l=n.IsExtendLine),l){for(var h=null,u=!0,c=0;c<n.Point.length;++c){var f=n.Point[c];if(we.IsNumber(f.Index)){var d=f.Index-e;if(d>0&&d<t){if(u){if(h){var D=h.Index-e,m=this.ChartFrame.GetXFromIndex(D,!1),p=this.ChartFrame.GetYFromData(h.Value,!1),v={X:m,Y:p,End:!1};o.Point.push(v)}u=!1}var m=this.ChartFrame.GetXFromIndex(d,!1),p=this.ChartFrame.GetYFromData(f.Value,!1),v={X:m,Y:p,End:!1};o.Point.push(v)}else if(o.Point.length>0){var m=this.ChartFrame.GetXFromIndex(d,!1),p=this.ChartFrame.GetYFromData(f.Value,!1),v={X:m,Y:p,End:!0};o.Point.push(v),u=!0,h=null}h=f}}o.Point.length>=2&&(a.push(o),i.push(s))}else{for(var c=0;c<n.Point.length;++c){var f=n.Point[c];if(we.IsNumber(f.Index)){var d=f.Index-e;if(d>=0&&d<t){var m=this.ChartFrame.GetXFromIndex(d),p=this.ChartFrame.GetYFromData(f.Value,!1),v={X:m,Y:p,End:!1};o.Point.push(v),0!=c&&1!=c||s.Start.push(v),c!=n.Point.length-1&&c!=n.Point.length-2||s.End.push(v)}else o.Point.length>0&&(o.Point[o.Point.length-1].End=!0)}}o.Point.length>=2&&(a.push(o),i.push(s))}}var g=C();this.Canvas.save(),this.ClipClient(this.IsHScreen);for(var r=0;r<a.length;++r){this.LineDash&&this.Canvas.setLineDash(this.LineDash),we.IsPlusNumber(this.LineWidth)?this.Canvas.lineWidth=this.LineWidth*g:this.Canvas.lineWidth=1*g;var T=a[r];this.DrawLine(T,i[r]),T.AryCircle&&this.DrawCircle(T)}this.Canvas.restore()}},this.DrawCircle=function(t){for(var e=C(),a=0;a<t.Point.length;++a)for(var i=t.Point[a],r=0;r<t.AryCircle.length;++r){var n=t.AryCircle[r],o=0;we.IsNumber(n.Type)&&(o=n.Type),this.Canvas.beginPath(),this.Canvas.arc(i.X,i.Y,n.Radius,0,2*Math.PI),1==o?(we.IsPlusNumber(n.LineWidth)&&(this.Canvas.lineWidth=n.LineWidth*e),this.Canvas.strokeStyle=n.Color,this.Canvas.stroke()):(this.Canvas.fillStyle=n.Color,this.Canvas.fill())}},this.DrawLine=function(t,e){if(t.BGColor){this.Canvas.fillStyle=t.BGColor;for(var a=0;a<t.Point.length;++a){var i=t.Point[a];0==a?(this.Canvas.beginPath(),this.IsHScreen?this.Canvas.moveTo(i.Y,i.X):this.Canvas.moveTo(i.X,i.Y)):this.IsHScreen?this.Canvas.lineTo(i.Y,i.X):this.Canvas.lineTo(i.X,i.Y)}this.Canvas.closePath(),this.Canvas.fill()}this.Canvas.strokeStyle=t.Color;for(var r=0,a=0;a<t.Point.length;++a){var i=t.Point[a];0==r?(this.Canvas.beginPath(),this.IsHScreen?this.Canvas.moveTo(i.Y,i.X):this.Canvas.moveTo(i.X,i.Y),++r):(this.IsHScreen?this.Canvas.lineTo(i.Y,i.X):this.Canvas.lineTo(i.X,i.Y),++r),1==i.End&&(r>0&&this.Canvas.stroke(),r=0)}r>0&&this.Canvas.stroke(),2==e.End.length&&1==this.Arrow.End&&this.DrawArrow(e.End[0],e.End[1]),2==e.Start.length&&1==this.Arrow.Start&&this.DrawArrow(e.Start[1],e.Start[0])},this.DrawArrow=function(t,e){var a=this.ArrawAngle,i=this.ArrawLength,r=180*Math.atan2(t.Y-e.Y,t.X-e.X)/Math.PI,n=(r+a)*Math.PI/180,o=(r-a)*Math.PI/180,s=i*Math.cos(n),l=i*Math.sin(n),h=i*Math.cos(o),u=i*Math.sin(o);this.Canvas.beginPath();var c=e.X+s,f=e.Y+l;this.Canvas.moveTo(c,f),this.Canvas.lineTo(e.X,e.Y),c=e.X+h,f=e.Y+u,this.Canvas.lineTo(c,f),this.Canvas.setLineDash([]),this.Canvas.lineWidth=this.ArrawLineWidth*C(),this.Canvas.stroke()},this.GetMaxMin=function(){if(this.IsFullRangeMaxMin)return this.GetFullRangeMaxMin();var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var r in this.Lines){var n=this.Lines[r];for(var o in n.Point){var s=n.Point[o];s.Index>=a&&s.Index<i&&(null==t.Max?t.Max=s.Value:t.Max<s.Value&&(t.Max=s.Value),null==t.Min?t.Min=s.Value:t.Min>s.Value&&(t.Min=s.Value))}}return t},this.GetFullRangeMaxMin=function(){var t={Min:null,Max:null};if(!we.IsNonEmptyArray(this.Lines))return t;for(var e=0;e<this.Lines.length;++e){var a=this.Lines[e];if(we.IsNonEmptyArray(a.Point))for(var i=0;i<a.Point.length;++i){var r=a.Point[i];null==t.Max?t.Max=r.Value:t.Max<r.Value&&(t.Max=r.Value),null==t.Min?t.Min=r.Value:t.Min>r.Value&&(t.Min=r.Value)}}return t}}function jt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiPoint",this.PointGroup=[],this.IsHScreen=!1,this.LineWidth=1,this.PointRadius=5,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&!(this.Data.length<=0)&&we.IsNonEmptyArray(this.PointGroup)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=C();this.Canvas.save(),this.ClipClient(this.IsHScreen);for(var i=0;i<this.PointGroup.length;++i){var r=this.PointGroup[i],n=r.Color,o=r.BGColor,s=this.LineWidth,l=this.PointRadius;we.IsNumber(r.LineWidth)&&(s=r.LineWidth),we.IsNumber(r.PointRadius)&&(l=r.PointRadius);for(var h=new Path2D,u=0,c=0;c<r.Point.length;++c){var f=r.Point[c];if(we.IsNumber(f.Index)){var d=f.Index-e;if(d>=0&&d<t){var D=this.ChartFrame.GetXFromIndex(d),m=this.ChartFrame.GetYFromData(f.Value,!1),p=new Path2D;this.IsHScreen?p.arc(m,D,l*a,0,360,!1):p.arc(D,m,l*a,0,360,!1),h.addPath(p),++u}}}u>0&&(o||n)&&(this.Canvas.lineWidth=s*a,this.Canvas.fillStyle=o,this.Canvas.strokeStyle=n,o&&this.Canvas.fill(h),n&&this.Canvas.stroke(h))}this.Canvas.restore()}},this.GetMaxMin=function(){for(var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e,r=0;r<this.PointGroup.length;++r){var n=this.PointGroup[r];if(we.IsNonEmptyArray(n.Point))for(var o=0;o<n.Point.length;++o){var s=n.Point[o];s.Index>=a&&s.Index<i&&(null==t.Max?t.Max=s.Value:t.Max<s.Value&&(t.Max=s.Value),null==t.Min?t.Min=s.Value:t.Min>s.Value&&(t.Min=s.Value))}}return t}}function Qt(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiText",this.Texts=[],this.Font=So.DefaultTextFont,this.Color=So.DefaultTextColor,this.IsHScreen=!1,this.BuildKey=function(t){if(we.IsNumber(t.Time))var e=t.Date+"-"+t.Time;else var e=""+t.Date;return e},this.GetShowTextData=function(){for(var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=new Vn.default,i=0;i<this.Texts.length;++i){var r=this.Texts[i];if(r.Text&&we.IsNumber(r.Index)){var n=r.Index-e;if(n>=0&&n<t){var o=this.BuildKey(r);if(a.has(o)){var s=a.get(o);s.Data.push(r)}else{var s={Data:[r]};a.set(o,s)}}}}return a},this.DrawAllText=function(t){var e=!0===this.ChartFrame.IsHScreen,a=(this.IsMinuteFrame(),this.ChartFrame.DataWidth),i=this.ChartFrame.DistanceWidth,r=this.ChartFrame.XPointCount;if(e)var n=this.ChartBorder.GetHScreenBorder(),o=n.BottomEx,s=n.TopEx,l=n.TopEx+i/2+So.FrameLeftMargin,h=this.ChartBorder.GetTop(),u=this.ChartBorder.GetBottom(),C=n.RightEx,c=n.LeftEx;else var n=this.ChartBorder.GetBorder(),l=n.LeftEx+i/2+So.FrameLeftMargin,o=n.RightEx,s=n.LeftEx,h=this.ChartBorder.GetLeft(),u=this.ChartBorder.GetRight(),C=n.TopEx,c=n.BottomEx;for(var f=this.Data.DataOffset,d=0;f<this.Data.Data.length&&d<r;++f,++d,l+=a+i){var D=this.Data.Data[f];if(D){var m=this.BuildKey(D);if(t.has(m)){var h=l,u=l+a;if(u>o)break;for(var v=h+(u-h)/2,g=t.get(m),T=0;T<g.Data.length;++T){var I=g.Data[T],S=C;S="TOP"==I.Value?C:"BOTTOM"==I.Value?c:this.ChartFrame.GetYFromData(I.Value,!1),I.Color?this.Canvas.fillStyle=I.Color:this.Canvas.fillStyle=this.Color,I.Font?this.Canvas.font=I.Font:this.Canvas.font=this.Font;var x=this.Canvas.measureText(I.Text).width;if(this.Canvas.textAlign="center",v+x/2>=o?(this.Canvas.textAlign="right",v=o):v-x/2<s&&(this.Canvas.textAlign="left",v=s),1==I.Baseline?this.Canvas.textBaseline="top":2==I.Baseline?this.Canvas.textBaseline="bottom":this.Canvas.textBaseline="middle",this.IsHScreen?(this.Canvas.save(),this.Canvas.translate(S,v),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(I.Text,0,0),this.Canvas.restore()):(we.IsNumber(I.YMove)&&(S+=I.YMove),this.Canvas.fillText(I.Text,v,S)),I.Line){var D=this.Data.Data[I.Index],b="H"==I.Line.KData?D.High:D.Low,y=this.ChartFrame.GetYFromData(b,!1),E=S;Array.isArray(I.Line.Offset)&&2==I.Line.Offset.length&&(E>y?(E-=I.Line.Offset[1],y+=I.Line.Offset[0]):E<y&&(E+=I.Line.Offset[1],y-=I.Line.Offset[0])),this.Canvas.save(),I.Line.Dash&&this.Canvas.setLineDash(I.Line.Dash),I.Line.Width>0&&(this.Canvas.lineWidth=I.Line.Width),this.Canvas.strokeStyle=I.Line.Color,this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(E,p(v)),this.Canvas.lineTo(y,p(v))):(this.Canvas.moveTo(p(v),E),this.Canvas.lineTo(p(v),y)),this.Canvas.stroke(),this.Canvas.restore()}}}}}},this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.IsVisible&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex()&&this.Data&&!(this.Data.length<=0)&&this.Texts){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.GetShowTextData();t.size<=0||(this.Canvas.save(),this.ClipClient(this.IsHScreen),this.DrawAllText(t),this.Canvas.restore())}},this.GetMaxMin=function(){var t={Min:null,Max:null};if(!this.Texts)return t;var e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var r in this.Texts){var n=this.Texts[r];we.IsNumber(n.Value)&&(n.Index>=a&&n.Index<i&&(null==t.Max?t.Max=n.Value:t.Max<n.Value&&(t.Max=n.Value),null==t.Min?t.Min=n.Value:t.Min>n.Value&&(t.Min=n.Value)))}return t}}function $t(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiSVGIconV2",this.AryIcon,this.IconSize={Max:So.DRAWICON.Icon.MaxSize,Min:So.DRAWICON.Icon.MinSize,Zoom:{Type:So.DRAWICON.Icon.Zoom.Type,Value:So.DRAWICON.Icon.Zoom.Value}},this.Family,this.Color=So.DefaultTextColor,this.IsHScreen=!1,this.IconRect=[],this.MapCache=null,this.BuildKey=function(t){return we.IsNumber(t.Time)?t.Date+"-"+t.Time:t.Date},this.BuildCacheData=function(){var t=new Vn.default;if(this.MapCache=t,we.IsNonEmptyArray(this.AryIcon))for(var e=0;e<this.AryIcon.length;++e){var a=this.AryIcon[e],i=this.BuildKey(a);if(t.has(i)){var r=t.get(i);r.Data.push(a)}else t.set(i,{Data:[a]})}},this.ClipClient=function(t){if(1==t)var e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRight(),i=this.ChartBorder.GetTop(),r=this.ChartBorder.GetBottom();else var e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRight(),i=this.ChartBorder.GetTop(),r=this.ChartBorder.GetBottom();this.Canvas.beginPath(),this.Canvas.rect(e,i,a-e,r-i),this.Canvas.clip()},this.Draw=function(){if(this.IconRect=[],this.IsShow&&!this.ChartFrame.IsMinSize&&this.IsVisible&&!this.IsShowIndexTitleOnly()&&!this.IsHideScriptIndex()&&this.Data&&we.IsNonEmptyArray(this.Data.Data)&&this.Family&&this.MapCache&&!(this.MapCache.size<=0)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.IsMinuteFrame(),r=this.GetBorder();if(this.IsHScreen)var n=r.TopEx+a/2+So.FrameLeftMargin,o=r.BottomEx,s=r.TopEx;else var n=r.LeftEx+a/2+So.FrameLeftMargin,o=r.RightEx,s=r.LeftEx;this.Canvas.save(),this.ClipClient(this.ChartFrame.IsHScreen);var l=this.GetDynamicIconSize(e,a,this.IconSize.Max,this.IconSize.Min,this.IconSize.Zoom);this.Canvas.font=l+"px "+this.Family;for(var h={Left:s,Right:o,FontSize:l,DataWidth:e,DistanceWidth:a},u=this.Data.DataOffset,C=0;u<this.Data.Data.length&&C<t;++u,++C,n+=e+a){var c=this.Data.Data[u],f=this.BuildKey(c);if(this.MapCache.has(f)){var d=this.MapCache.get(f);if(i)var D=this.ChartFrame.GetXFromIndex(C);else{var m=n,p=n+e;if(p>o)break;var D=m+(p-m)/2}this.DrawItem(d,c,D,h)}}this.Canvas.restore()}},this.GetKValue=function(t,e){switch(e){case"HIGH":case"H":return t.High;case"L":case"LOW":return t.Low;case"C":case"CLOSE":return t.Close;case"O":case"OPEN":return KItem.Open;default:return null}},this.DrawItem=function(t,e,a,i){if(we.IsNonEmptyArray(t.Data))for(var r=i.FontSize,n=(i.Left,i.Right,i.DataWidth,0);n<t.Data.length;++n){var o=t.Data[n],s=o.Value;if(we.IsString(o.Value)&&(s=this.GetKValue(e,o.Value)),we.IsNumber(s)){var l=this.ChartFrame.GetYFromData(o.Value,!1);o.Color?this.Canvas.fillStyle=o.Color:this.Canvas.fillStyle=this.Color;this.Canvas.measureText(o.Symbol).width;this.Canvas.textAlign="center";var h=new at(a-r/2,l-r/2,r,r);if(1==o.Baseline?(this.Canvas.textBaseline="top",h.Y=l):2==o.Baseline?(this.Canvas.textBaseline="bottom",h.Y=l-r):(this.Canvas.textBaseline="middle",h.Y=l-r/2),this.IsHScreen?(this.Canvas.save(),this.Canvas.translate(l,a),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(o.Symbol,0,0),this.Canvas.restore()):(we.IsNumber(o.YMove)&&(l+=o.YMove),this.Canvas.fillText(o.Symbol,a,l),o.Text?this.IconRect.push({Rect:h,Item:o,KItem:e}):we.IsNonEmptyArray(o.AryText)&&this.IconRect.push({Rect:h,Item:o,KItem:e})),o.Line){var u="H"==o.Line.KData?e.High:e.Low,C=this.ChartFrame.GetYFromData(u,!1),c=l;Array.isArray(o.Line.Offset)&&2==o.Line.Offset.length&&(c>C?(c-=o.Line.Offset[1],C+=o.Line.Offset[0]):c<C&&(c+=o.Line.Offset[1],C-=o.Line.Offset[0])),this.Canvas.save(),o.Line.Dash&&this.Canvas.setLineDash(o.Line.Dash),o.Line.Width>0&&(this.Canvas.lineWidth=o.Line.Width),this.Canvas.strokeStyle=o.Line.Color,this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(c,p(a)),this.Canvas.lineTo(C,p(a))):(this.Canvas.moveTo(p(a),c),this.Canvas.lineTo(p(a),C)),this.Canvas.stroke(),this.Canvas.restore()}}}},this.GetTooltipData=function(t,e,a){if(!we.IsNonEmptyArray(this.IconRect))return!1;for(var i=0;i<this.IconRect.length;++i){var r=this.IconRect[i];if(r.Rect){var n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e))return Xn.Chart.Log("[ChartMultiSVGIconV2::GetTooltipData] icon ",r),a.Data=r,a.ChartPaint=this,a.Type=4,!0}}return!1},this.GetMaxMin=function(){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t={Min:null,Max:null};if(!this.Data||!we.IsNonEmptyArray(this.Data.Data))return t;if(this.MapCache&&!(this.MapCache.size<=0)){for(var e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=0,r=0;a<this.Data.Data.length&&i<e;++a,++i){var n=this.Data.Data[a],o=this.BuildKey(n);if(this.MapCache.has(o)){var s=this.MapCache.get(o);if(we.IsNonEmptyArray(s.Data))for(r=0;r<s.Data.length;++r){var l=s.Data[r],h=l.Value;we.IsString(l.Value)&&(h=this.GetKValue(n,l.Value)),we.IsNumber(h)&&(null==t.Max?t.Max=h:t.Max<h&&(t.Max=h),null==t.Min?t.Min=h:t.Min>h&&(t.Min=h))}}}return t}}}function te(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartMultiHtmlDom",this.Texts=[],this.IsHScreen=!1,this.DrawCallback,this.DrawItem=[],this.EnableDraw=!0,this.HQChart,this.IsDestroy=!1,this.Draw=function(){this.EnableDraw&&(this.IsDestroy||(this.DrawItem=[],this.DrawCallback&&this.DrawCallback(1,{Self:this}),this.DrawDom(),this.DrawCallback&&this.DrawCallback(2,{Self:this,DrawItem:this.DrawItem})))},this.OnDestroy=function(){this.IsDestroy=!0,this.DrawCallback&&this.DrawCallback(4,{Self:this})},this.DrawDom=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&!(this.Data.length<=0)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=this.ChartBorder.GetTopEx(),i=this.ChartBorder.GetBottomEx(),r=C();if(this.HQChart)var n=this.HQChart.UIElement.getBoundingClientRect().left,o=this.HQChart.UIElement.getBoundingClientRect().top;else var n=null,o=null;for(var s in this.Texts){var l=this.Texts[s];if(l.Text&&we.IsNumber(l.Index)){var h=this.IsMinuteFrame(),u=l.Index-e,c=this.Data.Data[l.Index],f={KData:c,Item:l,IsShow:!1,Self:this};if(u>=0&&u<t){var d=this.ChartFrame.GetXFromIndex(u);if("Top"==l.Value)var D=a;else if("Bottom"==l.Value)var D=i;else var D=this.ChartFrame.GetYFromData(l.Value);f.X=d/r,f.Y=D/r,f.UIElement={Left:n,Top:o},f.IsShow=!0}if(this.DrawItem.push(f),this.DrawCallback&&this.DrawCallback(3,f),l.Line){if(h)var m=this.Data.Data[l.Index];else var c=this.Data.Data[l.Index],m="H"==l.Line.KData?c.High:c.Low;var g=this.ChartFrame.GetYFromData(m),T=D;Array.isArray(l.Line.Offset)&&2==l.Line.Offset.length&&(T>g?(T-=l.Line.Offset[1],g+=l.Line.Offset[0]):T<g&&(T+=l.Line.Offset[1],g-=l.Line.Offset[0])),this.Canvas.save(),l.Line.Dash&&this.Canvas.setLineDash(l.Line.Dash);var I=C(),S=1*I;l.Line.Width>0&&(S=l.Line.Width*I),this.Canvas.lineWidth=S,this.Canvas.strokeStyle=l.Line.Color,this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(T,p(d)),this.Canvas.lineTo(g,p(d))):(this.Canvas.moveTo(v(S,d),T),this.Canvas.lineTo(v(S,d),g)),this.Canvas.stroke(),this.Canvas.restore()}}}}},this.GetMaxMin=function(){var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;for(var r in this.Texts){var n=this.Texts[r];we.IsNumber(n.Index)&&(n.Index>=a&&n.Index<i&&(null==t.Max?t.Max=n.Value:t.Max<n.Value&&(t.Max=n.Value),null==t.Min?t.Min=n.Value:t.Min>n.Value&&(t.Min=n.Value)))}return t}}function ee(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawSVG",this.Family,this.TextFont,this.Texts=[],this.IsHScreen=!1,this.IsDestroy=!1,this.EnableTooltip=!0,this.TooltipRect=[],this.ExcludeArea=null,this.AutoPosition=null,this.AryDrawRect=[],this.AutoYOffset=0,this.Draw=function(){this.TooltipRect=[],this.AryDrawRect=[],this.AutoYOffset=0,this.IsShow&&!this.ChartFrame.IsMinSize&&this.IsVisible&&(this.IsShowIndexTitleOnly()||this.IsHideScriptIndex()||this.DrawSVG())},this.DrawDetail=function(t,e,a){if(we.IsNonEmptyArray(e.Content)){var i=2,r=2,n=2,o={Left:t.Right,Right:t.Right,Bottom:t.Bottom},s=0;we.IsNumber(e.ItemSpace)&&(n=e.ItemSpace),we.IsNumber(e.YOffset)&&(o.Bottom+=e.YOffset),we.IsNumber(e.XOffset)&&(o.Left+=e.XOffset),we.IsNumber(e.LeftMargin)&&(i=e.LeftMargin),we.IsNumber(e.RightMargin)&&(r=e.RightMargin),we.IsNumber(e.RightBorder)&&(s=e.RightBorder),e.Font?this.Canvas.font=e.Font:this.Canvas.font=this.TextFont,this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left";var l=this.Canvas.measureText("æ").width+2;o.Height=l+5;for(var h=o.Bottom-(o.Height-l)/2,u=o.Left+i,C=[],c=0;c<e.Content.length;++c){C.length>0&&(u+=n);var f=e.Content[c];if(f.Text){var d=this.Canvas.measureText(f.Text).width+2;C.push({X:u,Y:h,Width:d,Data:f}),u+=d,o.Right=u}}o.Right+=r,o.Width=o.Right-o.Left,o.Top=o.Bottom-o.Height;var D=this.ChartBorder.GetChartWidth()-1;if(1==s&&(D=this.ChartBorder.GetRight()),o.Right>D){o.Right=t.Left,we.IsNumber(e.XOffset)&&(o.Right-=e.XOffset),o.Left=o.Right-o.Width;for(var u=o.Left+i,c=0;c<C.length;++c){c>0&&(u+=n);var f=C[c];f.X=u,u+=f.Width}}e.BGColor&&(this.Canvas.fillStyle=e.BGColor,this.Canvas.fillRect(o.Left,o.Top,o.Width,o.Height)),e.BorderColor&&(this.Canvas.strokeStyle=e.BorderColor,this.Canvas.strokeRect(p(o.Left),p(o.Top),g(o.Width),g(o.Height)));for(var c=0;c<C.length;++c){var f=C[c];this.Canvas.fillStyle=f.Data.Color,this.Canvas.fillText(f.Data.Text,f.X,f.Y)}this.AryDrawRect.push({Left:o.Left,Top:o.Top,Right:o.Right,Bottom:o.Bottom,Type:"Detail",Data:a})}},this.GetDetailPosition=function(t,e){if(!we.IsNonEmptyArray(e.Content))return null;var a=2,i=2,r=2,n={Left:t.Right,Right:t.Right,Bottom:t.Bottom},o=0;we.IsNumber(e.ItemSpace)&&(r=e.ItemSpace),we.IsNumber(e.YOffset)&&(n.Bottom+=e.YOffset),we.IsNumber(e.XOffset)&&(n.Left+=e.XOffset),we.IsNumber(e.LeftMargin)&&(a=e.LeftMargin),we.IsNumber(e.RightMargin)&&(i=e.RightMargin),we.IsNumber(e.RightBorder)&&(o=e.RightBorder),e.Font?this.Canvas.font=e.Font:this.Canvas.font=this.TextFont;var s=this.Canvas.measureText("æ").width+2;n.Height=s+5;for(var l=(n.Bottom,n.Height,n.Left+a),h=!0,u=0;u<e.Content.length;++u){h||(l+=r);var C=e.Content[u];if(C.Text){l+=this.Canvas.measureText(C.Text).width+2,n.Right=l,h=!1}}n.Right+=i,n.Width=n.Right-n.Left,n.Top=n.Bottom-n.Height;var c=this.ChartBorder.GetChartWidth()-1;return 1==o&&(c=this.ChartBorder.GetRight()),n.Right>c&&(n.Right=t.Left,we.IsNumber(e.XOffset)&&(n.Right-=e.XOffset),n.Left=n.Right-n.Width),n},this.CalculateShowPosition=function(t,e){var a=e.X,i=e.Y,r=t.SVG;we.IsNumber(r.YOffset)&&(i+=r.YOffset);var n=r.Size+"px "+this.Family;this.Canvas.font=n;var o=r.Size/2,s={Left:a-o,Right:a+o,Top:i-r.Size,Bottom:i,Height:r.Size,Width:r.Size};0===r.VAlign?(s.Top=i,s.Bottom=s.Top+r.Size):1===r.VAlign&&(s.Top=i-r.Size/2,s.Bottom=s.Top+r.Size),s.Top<0&&(s.Top=0,s.Bottom=r.Size,i=s.Bottom);var l=null;t.Detail&&(l=this.GetDetailPosition(s,t.Detail));var h=0,u=-5;we.IsNumber(this.AutoPosition.MoveYStep)&&(u=-Math.abs(this.AutoPosition.MoveYStep));for(var C=0;C<20;++C){if(s&&!l){if(!this.IsRectOverlap(s))break}else if(s&&l&&!this.IsRectOverlap(s)&&!this.IsRectOverlap(l))break;if(h+=u,Math.abs(h)>=this.AutoPosition.MaxYOffset)break;s.Top+=u,s.Bottom+=u,l&&(l.Top+=u,l.Bottom+=u)}e.X=a,e.Y=i+h},this.IsRectOverlap=function(t){for(var e=0;e<this.AryDrawRect.length;++e){var a=this.AryDrawRect[e];if((t.Left>=a.Left&&t.Left<=a.Right||t.Right>=a.Left&&t.Right<=a.Right)&&(t.Top>=a.Top&&t.Top<=a.Bottom||t.Bottom>=a.Top&&t.Bottom<=a.Bottom))return!0}return!1},this.DrawSVG=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&we.IsNonEmptyArray(this.Data.Data)&&we.IsNonEmptyArray(this.Texts)&&this.Family){this.IsHScreen=!0===this.ChartFrame.IsHScreen;for(var t=this.ChartFrame.XPointCount,e=this.Data.DataOffset,a=this.ChartBorder.GetTopEx(),i=this.ChartBorder.GetBottomEx(),r=C(),n=0,o=0,s=0;s<this.Texts.length;++s){var l=this.Texts[s];if(l.SVG&&l.SVG.Symbol&&we.IsNumber(l.Index)){var h=(this.IsMinuteFrame(),l.Index-e),u=this.Data.Data[l.Index];if(!(h<0||h>=t)){n=this.ChartFrame.GetXFromIndex(h),o="Top"==l.Value?a:"Bottom"==l.Value?i:this.ChartFrame.GetYFromData(l.Value,!1),we.IsNumber(l.YOffset)&&(o+=l.YOffset);var c=l.SVG;if(we.IsNumber(c.YOffset)&&(o+=c.YOffset),this.AutoPosition){var f={X:n,Y:o};this.CalculateShowPosition(l,f),n=f.X,o=f.Y}var d=c.Size+"px "+this.Family;this.Canvas.font=d;var D=c.Size/2,m="bottom",g={Left:n-D,Right:n+D,Top:o-c.Size,Bottom:o,Height:c.Size,Width:c.Size};if(0===c.VAlign?(m="top",g.Top=o,g.Bottom=g.Top+c.Size):1===c.VAlign&&(m="middle",g.Top=o-c.Size/2,g.Bottom=g.Top+c.Size),g.Top<0&&(g.Top=0,g.Bottom=c.Size,o=g.Bottom),this.Canvas.textBaseline=m,this.Canvas.textAlign="center",this.Canvas.fillStyle=c.Color,this.Canvas.fillText(c.Symbol,n,o),this.AryDrawRect.push({Left:g.Left,Top:g.Top,Right:g.Right,Bottom:g.Bottom,Type:"SVG",Data:l}),this.EnableTooltip&&this.TooltipRect.push({Rect:g,Index:s}),l.Text&&l.Text.Content&&this.TextFont){var T=l.Text;this.Canvas.font=this.TextFont,this.Canvas.fillStyle=T.Color;var I=o;we.IsNumber(T.YOffset)&&(I+=T.YOffset),this.Canvas.fillText(T.Content,n,I)}if(l.Detail&&this.DrawDetail(g,l.Detail,l),l.Line){var S=l.Line,x=null,b=null,u=this.Data.Data[l.Index];if("Bottom"==S.Value)b=i;else if("Top"==S.Value)b=a;else{switch(S.Value){case"C":x=u.Close;break;case"H":x=u.High;break;case"L":x=u.Low}if(!we.IsNumber(x))continue;b=this.ChartFrame.GetYFromData(x)}if(b>=g.Top&&b<=g.Bottom)continue;var I;b<g.Top?(I=g.Top,we.IsNumber(S.SVGBlank)&&(I-=S.SVGBlank)):(I=g.Bottom,we.IsNumber(S.SVGBlank)&&(I+=S.SVGBlank)),S.Dash&&this.Canvas.setLineDash(S.Dash);var y=1*r;S.Width>0&&(y=S.Width*r),this.Canvas.lineWidth=y,this.Canvas.strokeStyle=S.Color,this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(I,p(n)),this.Canvas.lineTo(b,p(n))):(this.Canvas.moveTo(v(y,n),I),this.Canvas.lineTo(v(y,n),b)),this.Canvas.stroke(),this.Canvas.setLineDash([])}}}}}},this.GetMaxMin=function(){var t={Min:null,Max:null},e=this.ChartFrame.XPointCount,a=this.Data.DataOffset,i=a+e;if(!we.IsNonEmptyArray(this.Texts))return t;for(var r=0;r<this.Texts.length;++r){var n=this.Texts[r];if(we.IsNumber(n.Index)&&(n.Index>=a&&n.Index<i)){if(!we.IsNumber(n.Value))continue;null==t.Max?t.Max=n.Value:t.Max<n.Value&&(t.Max=n.Value),null==t.Min?t.Min=n.Value:t.Min>n.Value&&(t.Min=n.Value)}}return t},this.GetTooltipData=function(t,e,a){if(!this.IsShow)return!1;for(var i=0;i<this.TooltipRect.length;++i){var r=this.TooltipRect[i];if(r.Rect){var n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.Left,n.Top,n.Width,n.Height),this.Canvas.isPointInPath(t,e)){var o=this.Texts[r.Index];return Xn.Chart.Log("[ChartDrawSVG::GetTooltipData] svg icon.",r),a.Data={Rect:r.Rect,Item:o,Index:r.Index},a.ChartPaint=this,a.Type=7,o.Tooltip&&2==o.Tooltip.Ver&&(a.Type=8),!0}}}return!1}}function ae(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartOX",this.Font,this.Family=So.ChartOX.Family,this.Color=[So.ChartOX.Up.Color,So.ChartOX.Down.Color],this.Text=[So.ChartOX.Up.Text,So.ChartOX.Down.Text],this.IsHScreen=!1,this.SquareSize=10,this.OXData=null,this.SquareLineColor=So.ChartOX.SquareLineColor,this.TooltipData=[],this.CalcualteSquare=function(){if(this.IsHScreen)var t=this.ChartBorder.GetHScreenBorder(),e=t.LeftEx,a=t.RightEx;else var t=this.ChartBorder.GetBorder(),e=t.TopEx,a=t.BottomEx;this.SquareSize=(a-e)/(this.OXData.Max-this.OXData.Min)*this.OXData.BlockSize;var i=parseInt(this.SquareSize);this.Font=i+"px "+this.Family},this.DrawSquares=function(){if(this.Canvas.beginPath(),this.Canvas.strokeStyle=this.SquareLineColor,this.IsHScreen)var t=this.ChartBorder.GetHScreenBorder(),e=t.Top,a=t.Bottom;else var t=this.ChartBorder.GetBorder(),e=t.Left,a=t.Right,i=t.TopEx,r=t.BottomEx;for(var n=this.OXData.StartPrice;n<this.OXData.Max;n+=this.OXData.BlockSize){var o=this.ChartFrame.GetYFromData(n);this.IsHScreen?(this.Canvas.moveTo(p(o),t.Top),this.Canvas.lineTo(p(o),t.Bottom)):(this.Canvas.moveTo(e,p(o)),this.Canvas.lineTo(a,p(o)))}for(var n=this.OXData.StartPrice;n>this.OXData.Min;n-=this.OXData.BlockSize){var o=this.ChartFrame.GetYFromData(n);this.IsHScreen?(this.Canvas.moveTo(p(o),t.Top),this.Canvas.lineTo(p(o),t.Bottom)):(this.Canvas.moveTo(e,p(o)),this.Canvas.lineTo(a,p(o)))}for(var s=e+So.FrameLeftMargin,l=s;l<a;l+=this.SquareSize)this.IsHScreen?(this.Canvas.moveTo(t.LeftEx,p(l)),this.Canvas.lineTo(t.RightEx,p(l))):(this.Canvas.moveTo(p(l),i),this.Canvas.lineTo(p(l),r));this.Canvas.stroke()},this.Draw=function(){if(this.TooltipData=[],!this.ChartFrame.IsMinSize){if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.NotSupportMessage)return void this.DrawNotSupportmessage();if(this.OXData&&this.OXData.Data)if(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.CalcualteSquare(),this.DrawSquares(),this.IsHScreen){var t=this.ChartBorder.GetTop(),e=this.ChartBorder.GetBottom(),a=t+So.FrameLeftMargin;this.Canvas.textBaseline="middle",this.Canvas.textAlign="center",this.Canvas.font=this.Font;for(var i=0;i<this.OXData.Data.length&&!(a>e);++i,a+=this.SquareSize){var r=this.OXData.Data[i];this.Canvas.fillStyle=this.Color[r.Type];var n=this.Text[r.Type];if(we.IsNonEmptyArray(r.Data))for(var o=0;o<r.Data.length;++o){var s=r.Data[o],l=this.ChartFrame.GetYFromData(s+this.OXData.BlockSize/2);this.Canvas.fillText(n,l,a+this.SquareSize/2)}}}else{var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRight(),a=t+So.FrameLeftMargin;this.Canvas.textBaseline="middle",this.Canvas.textAlign="center",this.Canvas.font=this.Font;for(var i=0;i<this.OXData.Data.length&&!(a>e);++i,a+=this.SquareSize){var r=this.OXData.Data[i];this.Canvas.fillStyle=this.Color[r.Type];var n=this.Text[r.Type],h={X:a,Width:this.SquareSize},u=null,C=null;if(we.IsNonEmptyArray(r.Data)){for(var o=0;o<r.Data.length;++o){var s=r.Data[o],l=this.ChartFrame.GetYFromData(s+this.OXData.BlockSize/2);this.Canvas.fillText(n,a+this.SquareSize/2,l),null==u?u=s:u<s&&(u=s),null==C?C=s:C>s&&(C=s)}h.Y=this.ChartFrame.GetYFromData(u+this.OXData.BlockSize),h.Height=this.ChartFrame.GetYFromData(C)-h.Y;var c={Data:r,Rect:h};this.TooltipData.push(c)}}}}},this.GetTooltipData=function(t,e,a){for(var i in this.TooltipData){var r=this.TooltipData[i];if(r.Rect){var n=r.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(n.X,n.Y,n.Width,n.Height),this.Canvas.isPointInPath(t,e))return Xn.Chart.Log("[ChartOX::GetTooltipData] item ",r),a.Data=r,a.ChartPaint=this,a.Type=5,!0}}return!1},this.GetMaxMin=function(){var t={Min:null,Max:null};return this.OXData&&(we.IsNumber(this.OXData.Max)&&(t.Max=this.OXData.Max),we.IsNumber(this.OXData.Min)&&(t.Min=this.OXData.Min)),t}}function ie(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartVolProfileVisibleRange",this.IsDrawFirst=!0,this.IsShowText=!0,this.VolType=0,this.BarPosition=1,this.BarWidthRate=.3,this.VolFont,this.HQChart,this.IsDestroy=!1,this.Data=null,this.MaxVol,this.MaxVolPrice,this.VolLineColor=So.ChartVolProfileVisibleRange.VolLineColor,this.VolLineFont=So.ChartVolProfileVisibleRange.VolLineFont,this.VolLineTextColor=So.ChartVolProfileVisibleRange.VolLineTextColor,this.VAHLineColor=So.ChartVolProfileVisibleRange.VAHLineColor,this.VAHTextColor=So.ChartVolProfileVisibleRange.VAHTextColor,this.VALLineColor=So.ChartVolProfileVisibleRange.VALLineColor,this.VALTextColor=So.ChartVolProfileVisibleRange.VALTextColor,this.VAFont=So.ChartVolProfileVisibleRange.VAFont,this.TextConfig=(0,On.default)({Color:So.ChartVolProfileVisibleRange.Text.Color,Family:So.ChartVolProfileVisibleRange.Text.Family,FontMaxSize:So.ChartVolProfileVisibleRange.Text.FontMaxSize,FontMinSize:So.ChartVolProfileVisibleRange.Text.FontMinSize},"Color",So.ChartVolProfileVisibleRange.Text.Color),this.BarColor=[So.ChartVolProfileVisibleRange.UpVolColor,So.ChartVolProfileVisibleRange.DownVolColor,So.ChartVolProfileVisibleRange.AreaUpColor,So.ChartVolProfileVisibleRange.AreaDonwColor],this.MaxVolLine,this.OnDestroy=function(){this.IsDestroy=!0},this.SetOption=function(t){t&&(we.IsBool(t.IsShowText)&&(this.IsShowText=t.IsShowText),we.IsNumber(t.VolType)&&(this.IsShowText=t.VolType),we.IsNumber(t.BarPosition)&&(this.BarPosition=t.BarPosition),we.IsNumber(t.BarWidthRate)&&(this.IsShowText=t.BarWidthRate))},this.PtInChart=function(t,e){return this.MaxVolLine&&t>=this.MaxVolLine.Start.X&&t<=this.MaxVolLine.End.X&&e>=this.MaxVolLine.Start.Y-5&&e<this.MaxVolLine.Start.Y+5?{Identify:this.Identify,Chart:this}:null},this.SetSelectedStatus=function(t){this.IsDrawFirst=0==t},this.DrawSelectedStatus=function(){var t=this.SelectedRadius,e=C();if(this.Canvas.save(),this.MaxVolLine){this.Canvas.lineWidth=this.SelectedLineWidth*e,this.Canvas.strokeStyle=this.SelectedLineColor,this.SelectedBGColor&&(this.Canvas.fillStyle=this.SelectedBGColor);for(var a=(this.MaxVolLine.End.X-this.MaxVolLine.Start.X)/6,i=[],r=this.MaxVolLine.Start.X+a;r<this.MaxVolLine.End.X;r+=a)i.push({X:r,Y:this.MaxVolLine.Start.Y});for(var n=0;n<i.length;++n){var o=i[n];this.Canvas.beginPath(),this.Canvas.arc(o.X,o.Y,t,0,360,!1),this.Canvas.closePath(),this.SelectedBGColor&&this.Canvas.fill(),this.Canvas.stroke()}}this.Canvas.restore()},this.Draw=function(){if(this.VolFont=null,this.MaxVolLine=null,this.IsHScreen=!0===this.ChartFrame.IsHScreen,!this.ChartFrame.IsMinSize)return this.NotSupportMessage?void this.DrawNotSupportmessage():void(this.Data&&this.Data.Data&&(this.Canvas.save(),this.DrawVolBar(),this.Canvas.restore()))},this.DrawPriceLine=function(){var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRight(),a=C(),i=[],r=this.MaxVolPrice;we.IsNumber(this.Data.MaxVolPrice)&&(r=this.Data.MaxVolPrice),r>=this.ChartFrame.HorizontalMin&&r<=this.ChartFrame.HorizontalMax&&i.push({Price:r,Font:this.VolLineFont,LineColor:this.VolLineColor,LineWidth:2,TextColor:this.VolLineTextColor,Type:1}),we.IsNumber(this.Data.VAHPrice)&&this.Data.VAHPrice>=this.ChartFrame.HorizontalMin&&this.Data.VAHPrice<=this.ChartFrame.HorizontalMax&&i.push({Price:this.Data.VAHPrice,Font:this.VAFont,LineColor:this.VAHLineColor,LineWidth:2,TextColor:this.VAHTextColor,Type:2}),we.IsNumber(this.Data.VALPrice)&&this.Data.VALPrice>=this.ChartFrame.HorizontalMin&&this.Data.VALPrice<=this.ChartFrame.HorizontalMax&&i.push({Price:this.Data.VALPrice,Font:this.VAFont,LineColor:this.VALLineColor,LineWidth:2,TextColor:this.VALTextColor,Type:3});for(var n=0;n<i.length;++n){var o=i[n],s=v(o.LineWidth,this.ChartFrame.GetYFromData(o.Price,!1));if(this.Canvas.lineWidth=o.LineWidth,this.Canvas.strokeStyle=o.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t,s),this.Canvas.lineTo(e,s),this.Canvas.stroke(),1==o.Type&&(this.MaxVolLine={Start:{X:t,Y:s},End:{X:e,Y:s}}),this.ChartBorder.Right>10){var l=sr(this.HQChart.Symbol),h=o.Price.toFixed(l);this.Canvas.font=o.Font,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var u=this.GetFontHeight(),c=this.Canvas.measureText(h).width+2*a;this.Canvas.fillStyle=o.LineColor,this.Canvas.fillRect(e,s-u/2,c,u),this.Canvas.fillStyle=o.TextColor,this.Canvas.fillText(h,e+1*a,s)}}},this.DrawVolBar=function(){var t=this.GetPriceYOffset(this.Data.PriceOffset),e=this.ChartBorder.GetLeft(),a=this.ChartBorder.GetRight(),i=(this.ChartFrame.GetYFromData(this.Data.MaxPrice),this.ChartFrame.GetYFromData(this.Data.MinPrice),a-e),r=i*this.BarWidthRate;this.IsShowText&&(this.VolFont=this.GetDynamicVolTextFont(t,r),this.VolFont&&(this.Canvas.font=this.VolFont));for(var n=0;n<this.Data.Data.length;++n){var o=this.Data.Data[n];o.Price<this.ChartFrame.HorizontalMin||o.Price>this.ChartFrame.HorizontalMax||this.DrawVolBarItem(o,e,a,r,t)}this.DrawPriceLine()},this.DrawVolBarItem=function(t,e,a,i,r){var n=e,o=a,s=this.ChartFrame.GetYFromData(t.Price)-r/2,l=r-1;if(l<1&&(l=1),1==this.VolType){if(!t.TotalVol)return;if(!we.IsNumber(t.TotalVol.Value))return;var h,u=t.TotalVol.Value*i/this.MaxVol;if(we.IsNumber(t.TotalVol.ColorID)?h=this.BarColor[t.TotalVol.ColorID]:t.TotalVol.Color&&(h=t.TotalVol.Color),this.Canvas.fillStyle=h,1==this.BarPosition?this.Canvas.fillRect(o,g(s),-u,g(l)):this.Canvas.fillRect(n,g(s),u,g(l)),this.IsShowText&&this.VolFont){var C=we.FormatVolString(t.TotalVol.Value,this.HQChart.LanguageID);this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextConfig.Color,1==this.BarPosition?(this.Canvas.textAlign="right",this.Canvas.fillText(C,a-5,s+r/2)):(this.Canvas.textAlign="left",this.Canvas.fillText(C,e+5,s+r/2))}}else{for(var C="",c=0;c<t.Vol.length;++c){var f=t.Vol[c];if(we.IsNumber(f.Value)){var h;if(we.IsNumber(f.ColorID)?h=this.BarColor[f.ColorID]:f.Color&&(h=f.Color),h){var u=f.Value*i/this.MaxVol;this.Canvas.fillStyle=h,1==this.BarPosition?(this.Canvas.fillRect(o,g(s),-u,g(l)),o-=u):(this.Canvas.fillRect(n,g(s),u,g(l)),n+=u);var d=we.FormatVolString(f.Value,this.HQChart.LanguageID);C.length>0&&(C+="x"),C+=d}}}this.IsShowText&&this.VolFont&&(this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextConfig.Color,1==this.BarPosition?(this.Canvas.textAlign="right",this.Canvas.fillText(C,a-5,s+r/2)):(this.Canvas.textAlign="left",this.Canvas.fillText(C,e+5,s+r/2)))}},this.GetPriceYOffset=function(t){var e=this.ChartFrame;return e.ChartBorder.GetHeightEx()*t/(e.HorizontalMax-e.HorizontalMin)},this.GetDynamicVolTextFont=function(t,e,a){var i=parseInt(t)-2;return t<5&&(i=parseInt(t)),i>this.TextConfig.FontMaxSize?i=this.TextConfig.FontMaxSize:i<=0&&(i=1),i<this.TextConfig.FontMinSize?null:this.FormatFontString(i,this.TextConfig.Family,a)},this.FormatFontString=function(t,e,a){var i;return a?a.Weight&&(i=a.Weight+" "+t+"px "+e):i=t+"px "+e,i},this.GetMaxMin=function(){return{Min:null,Max:null}}}function re(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartStackedBar",this.Data,this.BarName=[],this.BarColor=["rgb(255,165,0)","rgb(95,158,160)"],this.LineWidth=1,this.BarType=0,this.IsHScreen,this.Draw=function(){if(this.IsShow&&!this.ChartFrame.IsMinSize&&this.Data&&we.IsNonEmptyArray(this.Data.Data)){this.IsHScreen=!0===this.ChartFrame.IsHScreen;var t=this.ChartFrame.DataWidth,e=this.ChartFrame.DistanceWidth,a=this.ChartFrame.XPointCount;if(this.IsHScreen)var i=this.ChartBorder.GetHScreenBorder(),r=i.TopEx+e/2+So.FrameLeftMargin,n=i.BottomEx,o=i.RightEx,s=i.LeftEx;else{var i=this.ChartFrame.GetBorder(),r=i.LeftEx+e/2+So.FrameLeftMargin,n=i.RightEx,o=i.TopEx,s=i.BottomEx,l=this.GetLockRect();l&&(n=l.Left)}var h=this.IsMinuteFrame();if(this.Canvas.save(),1==this.BarType);else{this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*C());var u=this.Canvas.lineWidth}for(var c=this.ChartFrame.GetYFromData(0),f=this.Data.DataOffset,d=0;f<this.Data.Data.length&&d<a;++f,++d,r+=t+e){var D=this.Data.Data[f];if(we.IsNonEmptyArray(D)){if(h)var m=this.ChartFrame.GetXFromIndex(d);else{var p=r,v=r+t;if(v>n)break;var m=p+(v-p)/2}if(m>n)break;1==this.BarType&&t>=4?this.DrawKBarItem(D,m,p,v,o,s,c,t):this.DrawBarItem(D,m,o,s,c,u)}}this.Canvas.restore()}},this.DrawKBarItem=function(t,e,a,i,r,n,o,s){for(var l=0,h=o,u=0,C=o,c=0;c<t.length;++c){var f=t[c];if(we.IsNumber(f)&&0!=f){if(this.Canvas.fillStyle=this.BarColor[c],f>0){l+=f;var d=this.ChartFrame.GetYFromData(l),D={Left:a,Top:d,Width:s,Height:h-d};h=d}else{u+=f;var d=this.ChartFrame.GetYFromData(u),D={Left:a,Top:d,Width:s,Height:C-d};C=d}this.IsHScreen?this.Canvas.fillRect(D.Top,D.Left,D.Height,D.Width):this.Canvas.fillRect(D.Left,D.Top,D.Width,D.Height)}}},this.DrawBarItem=function(t,e,a,i,r,n){for(var e=v(n,e),o=0,s=r,l=0,h=r,u=0;u<t.length;++u){var C=t[u];if(we.IsNumber(C)&&0!=C){var c={};if(C>0){o+=C;var f=this.ChartFrame.GetYFromData(o),c={X:e,Y:s,X2:e,Y2:f};s=f}else{l+=C;var f=this.ChartFrame.GetYFromData(l),c={X:e,Y:h,X2:e,Y2:f};h=f}this.Canvas.beginPath(),this.IsHScreen?(this.Canvas.moveTo(c.Y,c.X),this.Canvas.lineTo(c.Y2,c.X2)):(this.Canvas.moveTo(c.X,c.Y),this.Canvas.lineTo(c.X2,c.Y2)),this.Canvas.strokeStyle=this.BarColor[u],this.Canvas.stroke()}}},this.GetMaxMin=function(){var t=this.ChartFrame.XPointCount,e={};if(e.Min=null,e.Max=null,!this.Data||!this.Data.Data)return e;for(var a=this.Data.DataOffset,i=0;a<this.Data.Data.length&&i<t;++a,++i){var r=this.Data.Data[a];if(r&&we.IsNonEmptyArray(r)){for(var n=0,o=0,s=0;s<r.length;++s){var l=r[s];we.IsNumber(l)&&(0!=l&&(l>0?n+=l:l<0&&(o+=l)))}null==e.Max&&(e.Max=n,e.Min=o),e.Max<n&&(e.Max=n),e.Min>o&&(e.Min=o)}}return e},this.PtInChart=function(t,e){var a={StackedBar:!0};return 0==this.BarType&&(a.BarWidth=4),this.PtInBar(t,e,a)},this.DrawSelectedStatus=function(){this.DrawLinePoint({StackedBar:!0})}}function ne(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartLock",this.WidthDiv=.2,this.LockCount=20,this.BGColor=So.LockBGColor,this.TextColor=So.LockTextColor,this.Font=So.DefaultTextFont,this.Title="ðå¼éæé",this.LockRect=null,this.LockID,this.Callback,this.IndexName,this.MinWidth=null,this.Draw=function(t){if(this.LockRect=null,this.NotSupportMessage)return void this.DrawNotSupportmessage();if(!0===this.ChartFrame.IsHScreen)return void this.HScreenDraw(t);var e=this.ChartBorder.GetRight(),a=0;if(null!=this.ChartFrame.Data){var i=this.ChartFrame.DataWidth,r=this.ChartFrame.DistanceWidth;e=this.ChartBorder.GetLeft()+r/2+2;for(var n=this.ChartBorder.GetRight(),o=this.ChartFrame.XPointCount,s=this.ChartFrame.Data.DataOffset,l=0;s<this.ChartFrame.Data.Data.length&&l<o;++s,++l,e+=i+r){var h=this.ChartFrame.Data.Data[s];if(null!=h.Open&&null!=h.High&&null!=h.Low&&null!=h.Close){if(e+i>n)break}}a=(i+r)*this.LockCount}0==a&&(a=(e-this.ChartBorder.GetLeft())*this.WidthDiv);var u=e-a;u<this.ChartBorder.GetLeft()&&(u=this.ChartBorder.GetLeft());var C=this.ChartBorder.GetBottom()-this.ChartBorder.GetTop(),c=this.ChartBorder.GetRight()-u;if(this.MinWidth>10&&c<this.MinWidth&&(c=this.MinWidth,(u=this.ChartBorder.GetRight()-c)<this.ChartBorder.GetLeft()&&(u=this.ChartBorder.GetLeft())),t){this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(u,this.ChartBorder.GetTop(),c,C);var f=u+c/2,d=this.ChartBorder.GetTop()+C/2;this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.Canvas.fillText(this.Title,f,d)}this.LockRect={Left:u,Top:this.ChartBorder.GetTop(),Width:c,Heigh:C}},this.HScreenDraw=function(t){var e=this.ChartBorder.GetBottom(),a=0;if(null!=this.ChartFrame.Data){var i=this.ChartFrame.DataWidth,r=this.ChartFrame.DistanceWidth;e=this.ChartBorder.GetTop()+r/2+2;for(var n=this.ChartBorder.GetBottom(),o=this.ChartFrame.XPointCount,s=this.ChartFrame.Data.DataOffset,l=0;s<this.ChartFrame.Data.Data.length&&l<o;++s,++l,e+=i+r){var h=this.ChartFrame.Data.Data[s];if(null!=h.Open&&null!=h.High&&null!=h.Low&&null!=h.Close){if(e+i>n)break}}a=(i+r)*this.LockCount}0==a&&(a=(e-this.ChartBorder.GetTop())*this.WidthDiv);var u=e-a;u<this.ChartBorder.GetTop()&&(u=this.ChartBorder.GetTop());var C=this.ChartBorder.GetRight()-this.ChartBorder.GetLeft(),c=this.ChartBorder.GetBottom()-u;this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(this.ChartBorder.GetLeft(),u,C,c);var f=this.ChartBorder.GetLeft()+C/2,d=u+c/2;this.Canvas.save(),this.Canvas.translate(f,d),this.Canvas.rotate(90*Math.PI/180),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.Canvas.fillText(this.Title,0,0),this.Canvas.restore(),this.LockRect={Left:this.ChartBorder.GetLeft(),Top:u,Width:C,Heigh:c}},this.GetTooltipData=function(t,e,a){return null!=this.LockRect&&(this.Canvas.beginPath(),this.Canvas.rect(this.LockRect.Left,this.LockRect.Top,this.LockRect.Width,this.LockRect.Heigh),!!this.Canvas.isPointInPath(t,e)&&(a.Data={ID:this.LockID,Callback:this.Callback,IndexName:this.IndexName},a.ChartPaint=this,!0))}}function oe(){this.newMethod=Mt,this.newMethod(),delete this.newMethod,this.ClassName="ChartBuySell",this.TextFont=So.KLineTrain.Font,this.LastDataIcon=So.KLineTrain.LastDataIcon,this.BuyIcon=So.KLineTrain.BuyIcon,this.SellIcon=So.KLineTrain.SellIcon,this.BuySellData=new Vn.default,this.IconFont=So.KLineTrain.IconFont,this.LastDataDrawType=0,this.LastDataIndex=-1,this.AddTradeItem=function(t){if(this.BuySellData.has(t.Key)){this.BuySellData.get(t.Key).Data.push(t)}else this.BuySellData.set(t.Key,{Data:[t]})},this.ClearTradeData=function(){this.BuySellData=new Vn.default},this.Draw=function(){if(this.Data&&this.Data.Data){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.DataWidth,a=this.ChartFrame.DistanceWidth,i=this.ChartBorder.GetRight();!0===t&&(i=this.ChartBorder.GetBottom());var r=this.ChartFrame.XPointCount;if(this.IconFont){var n=C(),o=e+a,s=18*n;o<s&&(o=s),this.Canvas.font=o+"px "+this.IconFont.Family}else this.Canvas.font=this.TextFont;for(var l=this.Data.DataOffset,h=0;l<this.Data.Data.length&&h<r;++l,++h){var u=this.Data.Data[l];if(null!=u){var c=this.ChartFrame.GetXFromIndex(h);if(c>i)break;var f=!1;if(1==this.LastDataDrawType?l==this.LastDataIndex&&(f=!0):l==this.Data.Data.length-1&&(f=!0),f){var c=this.ChartFrame.GetXFromIndex(h),d=this.ChartFrame.GetYFromData(u.High);this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.IconFont?(this.Canvas.fillStyle=this.IconFont.Last.Color,this.DrawText(this.IconFont.Last.Text,c,d,t)):(this.Canvas.fillStyle=this.LastDataIcon.Color,this.Canvas.font=this.TextFont,this.DrawText(this.LastDataIcon.Text,c,d,t))}var D=l;if(this.BuySellData.has(D)){var m=this.BuySellData.get(D),d=this.ChartFrame.GetYFromData(u.High),p=this.ChartFrame.GetYFromData(u.Low),v=[!1,!1];for(var g in m.Data){if(1==v[0]&&1==v[1])break;var T=m.Data[g];0==T.Op&&0==v[0]?(this.Canvas.textAlign="center",this.Canvas.textBaseline="top",this.IconFont?(this.Canvas.fillStyle=this.IconFont.Buy.Color,this.DrawText(this.IconFont.Buy.Text,c,p,t)):(this.Canvas.fillStyle=this.BuyIcon.Color,this.DrawText(this.BuyIcon.Text,c,p,t)),v[0]=!0):1==T.Op&&0==v[1]&&(this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.IconFont?(this.Canvas.fillStyle=this.IconFont.Sell.Color,this.DrawText(this.IconFont.Sell.Text,c,d,t)):(this.Canvas.fillStyle=this.SellIcon.Color,this.DrawText(this.SellIcon.Text,c,d,t)),v[1]=!0)}}}}}}}function se(){this.newMethod=rt,this.newMethod(),delete this.newMethod,this.ClassName="ChartOrderbookDepth",this.Data=null,this.AskColor={Line:So.DepthChart.AskColor.Line,Area:So.DepthChart.AskColor.Area},this.BidColor={Line:So.DepthChart.BidColor.Line,Area:So.DepthChart.BidColor.Area},this.LineWidth=So.DepthChart.LineWidth,this.Draw=function(){if(this.Data){var t=this.Canvas.lineWidth;this.Canvas.lineWidth=this.LineWidth*C(),this.DrawArea(this.Data.Bids,this.BidColor.Line,this.BidColor.Area,!0),this.DrawArea(this.Data.Asks,this.AskColor.Line,this.AskColor.Area,!1),this.Canvas.lineWidth=t}},this.DrawArea=function(t,e,a,i){var r=this.ChartFrame.VerticalRange,n=[];for(var o in t){var s=t[o];if(i){if(s.Price<r.Min)break}else if(s.Price>r.Max)break;var l=this.ChartFrame.GetXFromIndex(s.Price),h=this.ChartFrame.GetYFromData(s.Vol);n.push({X:l,Y:h})}if(!(n.length<=1)){var u=this.ChartBorder.GetLeft(),C=this.ChartBorder.GetBottom(),c=this.ChartBorder.GetRight();this.Canvas.beginPath(),this.Canvas.moveTo(n[0].X,C);for(var o in n){var s=n[o];this.Canvas.lineTo(s.X,s.Y)}this.Canvas.lineTo(i?u:c,n[n.length-1].Y),this.Canvas.lineTo(i?u:c,C),this.Canvas.lineTo(n[0].X,C),this.Canvas.closePath(),this.Canvas.fillStyle=a,this.Canvas.fill(),this.Canvas.beginPath(),this.Canvas.moveTo(n[0].X,C);for(var o in n){var s=n[o];this.Canvas.lineTo(s.X,s.Y)}this.Canvas.lineTo(i?u:c,n[n.length-1].Y),this.Canvas.strokeStyle=e,this.Canvas.stroke()}},this.GetMaxMin=function(){var t={Min:null,Max:null,XMin:null,XMax:null},e=this.ChartFrame.VerticalRange;for(var a in this.Data.Asks){var i=this.Data.Asks[a];if(i.Price>e.Max)break;(null==t.XMin||t.XMin>i.Price)&&(t.XMin=i.Price),(null==t.XMax||t.XMax<i.Price)&&(t.XMax=i.Price),(null==t.Min||t.Min>i.Vol)&&(t.Min=i.Vol),(null==t.Max||t.Max<i.Vol)&&(t.Max=i.Vol)}for(var a in this.Data.Bids){var i=this.Data.Bids[a];if(i.Price<e.Min)break;(null==t.XMin||t.XMin>i.Price)&&(t.XMin=i.Price),(null==t.XMax||t.XMax<i.Price)&&(t.XMax=i.Price),(null==t.Min||t.Min>i.Vol)&&(t.Min=i.Vol),(null==t.Max||t.Max<i.Vol)&&(t.Max=i.Vol)}return t}}function le(){this.DataMap=new Vn.default([["FrameSplitPaint",{Create:function(){return new De}}],["RectSelectPaint",{Create:function(){return new me}}],["RectDragPaint",{Create:function(){return new pe}}],["DragMovePaint",{Create:function(){return new Se}}],["SessionBreaksPaint",{Create:function(){return new xe}}],["FrameButtomToolbarPaint",{Create:function(){return new be}}]]),this.SetCallbackDraw=new Rn.default,this.Create=function(t){return this.DataMap.has(t)?this.DataMap.get(t).Create():null},this.Add=function(t,e){this.DataMap.set(t,{Create:e.Create})},this.AddCallbackDrawClassName=function(t){t&&this.SetCallbackDraw.add(t)},this.IsCallbackDraw=function(t){return this.SetCallbackDraw.has(t)}}function he(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.Data,this.IsDynamic=!1,this.IsAnimation=!1,this.ClassName="IExtendChartPainting",this.SizeChange=!0,this.IsEraseBG=!1,this.DrawAfterTitle=!1,this.DrawAfterPicture=!1,this.IsCallbackDraw=!1,this.ID=D(),this.Left=5,this.Right=5,this.Top=5,this.Bottom=5,this.Draw=function(){},this.SetOption=function(t){},this.GetFontHeight=function(t){return c(this.Canvas,t,"æ")}}function ue(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.IsDynamic=!0,this.IsEraseBG=!0,this.DrawAfterTitle=!0,this.ClassName="KLineTooltipPaint",this.BorderColor=So.TooltipPaint.BorderColor,this.BGColor=So.TooltipPaint.BGColor,this.TitleColor=So.TooltipPaint.TitleColor,this.DateTimeColor=So.TooltipPaint.DateTimeColor,this.VolColor=So.TooltipPaint.VolColor,this.AmountColor=So.TooltipPaint.AmountColor,this.LatestPoint,this.ShowPosition=0,this.Left=1*C(),this.Top=5*C(),this.Width=50,this.Height=100,this.LineHeight=15*C(),this.LineSpace=2,this.Mergin={Left:2,Top:3,Bottom:5,Right:5},this.ExtendLineWidth=2,this.Font=[So.TooltipPaint.TitleFont],this.HQChart,this.KLineTitlePaint,this.IsHScreen=!1,this.LanguageID=xo.LANGUAGE_CHINESE_ID,this.ReloadResource=function(t){this.BorderColor=So.TooltipPaint.BorderColor,this.BGColor=So.TooltipPaint.BGColor,this.TitleColor=So.TooltipPaint.TitleColor,this.DateTimeColor=So.TooltipPaint.DateTimeColor,this.VolColor=So.TooltipPaint.VolColor,this.AmountColor=So.TooltipPaint.AmountColor},this.GetLeft=function(){return this.IsHScreen?this.ChartBorder.GetRightEx()-this.Height-this.Top:0==this.ShowPosition?this.ChartBorder.GetLeft()+this.Left:this.ChartBorder.GetRight()-this.Width-this.Left},this.GetTop=function(){return this.IsHScreen?0==this.ShowPosition?this.ChartBorder.GetTop()+this.Left:this.ChartBorder.GetBottom()-this.Width-this.Left:this.ChartBorder.GetTopEx()+this.Top},this.IsEnableDraw=function(){if(!this.HQChart||!this.HQChart.TitlePaint||!this.HQChart.TitlePaint[0])return!1;if(this.HQChart.DragMode==Jn.CLICK_TOUCH_MODE_ID){if(0==this.HQChart.TouchStatus.CorssCursorShow)return!1}else if(this.HQChart.EnableClickModel){if(!1===this.HQChart.ClickModel.IsShowCorssCursor)return!1}else if(this.HQChart.VerticalDrag){if(this.HQChart.VerticalDrag.IsDrag)return!1}else if(!this.HQChart.IsOnTouch)return!1;return!this.HQChart.CurrentChartDrawPicture},this.Draw=function(){if(this.IsEnableDraw()){this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.KLineTitlePaint=this.HQChart.TitlePaint[0];var t=this.KLineTitlePaint.GetCurrentKLineData();if(t){var e=this.GetFormatTitle({Data:t});e&&we.IsNonEmptyArray(e.AryText)&&(this.CalculateTooltipSize(e),this.CalculateShowPosition(),this.DrawBG(),this.DrawTooltipData(e),this.DrawBorder())}}},this.CalculateTooltipSize=function(t){this.Canvas.font=this.Font[0],this.LineHeight=this.Canvas.measureText("æ").width;for(var e=C(),a=0,i=0,r=0,n=0,o=0;o<t.AryText.length;++o){var s=t.AryText[o];a>0&&(a+=this.LineSpace);var l=0;if(s.Title){var h=this.Canvas.measureText(s.Title).width+2;i<h&&(i=h),l+=h}if(s.Text){var h=this.Canvas.measureText(s.Text).width+2;r<h&&(r=h),l+=h}n<l&&(n=l),a+=this.LineHeight}return this.Height=a+(this.Mergin.Top+this.Mergin.Bottom)*e,this.Width=n+(this.Mergin.Left+this.Mergin.Right+this.ExtendLineWidth)*e,{Height:this.Height,Width:this.Width,MaxTitleWidth:i,MaxTextWidth:r}},this.CalculateShowPosition=function(){if(this.ShowPosition=0,this.LatestPoint)if(this.IsHScreen){var t=this.ChartBorder.GetTop(),e=this.ChartBorder.GetHeight(),a=t+e/2;this.LatestPoint.Y<a&&(this.ShowPosition=1)}else{var i=this.ChartBorder.GetLeft(),r=this.ChartBorder.GetWidth(),n=i+r/2;this.LatestPoint.X<n&&(this.ShowPosition=1)}},this.GetFormatTitle=function(t){if(t&&t.Data){var e,a=t.Data;this.HQChart.Symbol&&(e=this.HQChart.Symbol.toUpperCase());var i,r,n,o=sr(this.HQChart.Symbol),s=[],l={AryText:s};i=we.FormatDateString(a.Date),s.push({Text:i,Color:this.DateTimeColor});var h=this.HQChart.Period;if(tt.IsMinutePeriod(h,!0)&&we.IsNumber(a.Time)?(i=we.FormatTimeString(a.Time),s.push({Text:i,Color:this.DateTimeColor})):tt.IsSecondPeriod(h)&&we.IsNumber(a.Time)?(i=we.FormatTimeString(a.Time,"HH:MM:SS"),s.push({Text:i,Color:this.DateTimeColor})):tt.IsMilliSecondPeriod(h)&&we.IsNumber(a.Time)&&(i=we.FormatTimeString(a.Time,"HH:MM:SS.fff"),s.push({Text:i,Color:this.DateTimeColor})),we.IsNumber(a.Open)&&(r=bo.GetText("Tooltip-Open",this.LanguageID),n=this.KLineTitlePaint.GetColor(a.Open,a.YClose),i=a.Open.toFixed(o),s.push({Title:r,TitleColor:this.TitleColor,Text:i,Color:n})),we.IsNumber(a.High)&&(r=bo.GetText("Tooltip-High",this.LanguageID),n=this.KLineTitlePaint.GetColor(a.High,a.YClose),i=a.High.toFixed(o),s.push({Title:r,TitleColor:this.TitleColor,Text:i,Color:n})),we.IsNumber(a.Low)&&(r=bo.GetText("Tooltip-Low",this.LanguageID),n=this.KLineTitlePaint.GetColor(a.Low,a.YClose),i=a.Low.toFixed(o),s.push({Title:r,TitleColor:this.TitleColor,Text:i,Color:n})),we.IsNumber(a.Close)&&(r=bo.GetText("Tooltip-Close",this.LanguageID),n=this.KLineTitlePaint.GetColor(a.Close,a.YClose),i=a.Close.toFixed(o),s.push({Title:r,TitleColor:this.TitleColor,Text:i,Color:n})),r=bo.GetText("Tooltip-Increase",this.LanguageID),we.IsNumber(a.YFClose)&&wo.IsChinaFutures(e)){var u=(a.Close-a.YFClose)/a.YFClose*100;n=this.KLineTitlePaint.GetColor(u,0),i=u.toFixed(2)+"%"}else if(we.IsNumber(a.YClose)){var u=(a.Close-a.YClose)/a.YClose*100;n=this.KLineTitlePaint.GetColor(u,0),i=u.toFixed(2)+"%"}else i="--.--",n=this.KLineTitlePaint.GetColor(0,0);if(s.push({Title:r,TitleColor:this.TitleColor,Text:i,Color:n}),we.IsNumber(a.Vol)){r=bo.GetText("Tooltip-Vol",this.LanguageID);var C=a.Vol;e&&wo.IsSHSZ(e)&&(C/=100),i=we.FromatIntegerString(C,2,this.LanguageID),s.push({Title:r,TitleColor:this.TitleColor,Text:i,Color:this.VolColor})}if(we.IsNumber(a.Amount)){r=bo.GetText("Tooltip-Amount",this.LanguageID);var i=we.FormatValueString(a.Amount,2,this.LanguageID);s.push({Title:r,TitleColor:this.TitleColor,Text:i,Color:this.AmountColor})}if(wo.IsSHSZStockA(this.HQChart.Symbol)&&a.FlowCapital>0){r=bo.GetText("Tooltip-Exchange",this.LanguageID);var u=a.Vol/a.FlowCapital*100,i=u.toFixed(2)+"%";s.push({Title:r,TitleColor:this.TitleColor,Text:i,Color:this.TitleColor})}if(wo.IsFutures(e)&&we.IsNumber(a.Position)){r=bo.GetText("Tooltip-Position",this.LanguageID);var i=we.FromatIntegerString(a.Position,2,this.LanguageID);s.push({Title:r,TitleColor:this.TitleColor,Text:i,Color:this.TitleColor})}return l}},this.DrawTooltipData=function(t){if(t&&we.IsNonEmptyArray(t.AryText)){var e=C(),a=this.GetLeft()+2*e,i=this.GetTop()+3*e;if(this.IsHScreen){this.Canvas.save();var r=this.GetLeft()+this.Height,n=this.GetTop();this.Canvas.translate(r,n),this.Canvas.rotate(90*Math.PI/180),a=2*e,i=3*e}this.Canvas.textBaseline="top";var o=a+this.Width-this.Mergin.Right*e;a+=this.Mergin.Left*e,i+=this.Mergin.Top*e;for(var s=0;s<t.AryText.length;++s){var l=t.AryText[s];l.Title&&(this.Canvas.textAlign="left",this.Canvas.fillStyle=l.TitleColor,this.Canvas.fillText(l.Title,a,i)),l.Text&&(this.Canvas.textAlign="right",this.Canvas.fillStyle=l.Color,this.Canvas.fillText(l.Text,o,i)),i+=this.LineHeight+this.LineSpace}this.IsHScreen&&this.Canvas.restore()}},this.DrawBorder=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.GetLeft(),a=this.GetTop();this.Canvas.strokeStyle=this.BorderColor,t?this.Canvas.strokeRect(p(e),p(a),this.Height,this.Width):this.Canvas.strokeRect(p(e),p(a),g(this.Width),g(this.Height))},this.DrawBG=function(){var t=!0===this.ChartFrame.IsHScreen,e=this.GetLeft(),a=this.GetTop();this.Canvas.fillStyle=this.BGColor,t?this.Canvas.fillRect(e,a,this.Height,this.Width):this.Canvas.fillRect(e,a,this.Width,this.Height)},this.SetOption=function(t){t.LineHeight>0&&(this.LineHeight=t.LineHeight*C()),t.BGColor&&(this.BGColor=t.BGColor),t.LanguageID>0&&(this.LanguageID=t.LanguageID)}}function Ce(){this.newMethod=ue,this.newMethod(),delete this.newMethod,this.ClassName="MinuteTooltipPaint",this.Left=1*C(),this.Top=1*C(),this.YClose,this.IsShowAveragePrice=!0,this.TitlePaint,this.GetTop=function(){if(this.IsHScreen){var t=this.ChartBorder.GetHScreenBorder();return 0==this.ShowPosition?t.TopEx+this.Left:t.BottomEx-this.Width-this.Left}var t=this.ChartBorder.GetBorder();return t.Top+this.Top},this.GetLeft=function(){if(this.IsHScreen){var t=this.ChartBorder.GetHScreenBorder();return t.Right-this.Height-this.Top}var t=this.ChartBorder.GetBorder();return 0==this.ShowPosition?t.LeftEx+this.Left:t.RightEx-this.Width-this.Left},this.Draw=function(){if(this.IsEnableDraw()&&(this.IsHScreen=!0===this.ChartFrame.IsHScreen,this.TitlePaint=this.HQChart.TitlePaint[0],this.TitlePaint)){var t,e=this.TitlePaint.PointInfo;if(e&&(2==e.ClientPos||3==e.ClientPos||e.ClientPos>=200&&e.ClientPos<=299||e.ClientPos>=300&&e.ClientPos<=399)){var a=this.TitlePaint.GetCurrentAuctionData();if(!a)return;t={Type:1,Data:a}}else{var i=this.TitlePaint.GetCurrentKLineData();if(!i)return;t={Type:0,Data:i}}var r=this.GetFormatTitle(t);r&&we.IsNonEmptyArray(r.AryText)&&(this.CalculateTooltipSize(r),this.CalculateShowPosition(),this.DrawBG(),this.DrawTooltipData(r),this.DrawBorder())}},this.GetFormatTitle=function(t){if(t&&t.Data){var e,a,i,r;if(0==t.Type)e=t.Data,a=e.Close,i=e.Vol,r=e.Amount;else if(1==t.Type){if(!(e=t.Data.Data))return;a=e.Price}var n;this.HQChart.Symbol&&(n=this.HQChart.Symbol.toUpperCase());var o=wo.IsFutures(n),s=sr(this.HQChart.Symbol);this.YClose=this.TitlePaint.YClose,this.YClose=e.YClose,o&&we.IsNumber(e.YClearing)&&(this.YClose=e.YClearing);var l,h,u,C=[],c={AryText:C};we.IsNumber(e.Date)&&(l=we.FormatDateString(e.Date),C.push({Text:l,Color:this.DateTimeColor})),we.IsNumber(e.Time)&&(l=we.FormatTimeString(e.Time),C.push({Text:l,Color:this.DateTimeColor})),we.IsNumber(a)&&(h=bo.GetText("Tooltip-Price",this.LanguageID),u=this.TitlePaint.GetColor(a,this.YClose),l=a.toFixed(s),C.push({Title:h,TitleColor:this.TitleColor,Text:l,Color:u}));var f=!0;if(wo.IsForeignExchange(n)?f=!1:wo.IsET(n)&&!wo.IsETShowAvPrice(n)?f=!1:wo.IsShowAvPrice&&!wo.IsShowAvPrice(n)&&(f=!1),f&&we.IsNumber(e.AvPrice)&&this.IsShowAveragePrice){h=bo.GetText("Tooltip-AvPrice",this.LanguageID);var u=this.TitlePaint.GetColor(e.AvPrice,this.YClose);l=e.AvPrice.toFixed(s),C.push({Title:h,TitleColor:this.TitleColor,Text:l,Color:u})}if(we.IsNumber(a)&&we.IsNumber(this.YClose)){if(h=bo.GetText("Tooltip-Increase",this.LanguageID),0===this.YClose)l="--.--",u=this.TitleColor;else{var d=(a-this.YClose)/this.YClose*100;u=this.TitlePaint.GetColor(d,0),l=d.toFixed(2)+"%"}C.push({Title:h,TitleColor:this.TitleColor,Text:l,Color:u})}if(we.IsNumber(i)){h=bo.GetText("Tooltip-Vol",this.LanguageID);var l=we.FromatIntegerString(i,2,this.LanguageID);C.push({Title:h,TitleColor:this.TitleColor,Text:l,Color:this.VolColor})}if(we.IsNumber(r)){h=bo.GetText("Tooltip-Amount",this.LanguageID);var l=we.FormatValueString(r,2,this.LanguageID);C.push({Title:h,TitleColor:this.TitleColor,Text:l,Color:this.AmountColor})}if(we.IsNumber(e.Position)){h=bo.GetText("Tooltip-Position",this.LanguageID);var l=we.FormatValueString(e.Position,2,this.LanguageID);C.push({Title:h,TitleColor:this.TitleColor,Text:l,Color:this.TitleColor})}return c}}}function ce(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.IsDynamic=!0,this.IsEraseBG=!0,this.DrawAfterTitle=!0,this.ClassName="MinuteLeftTooltipPaint",this.BorderColor=So.PCTooltipPaint.BorderColor,this.BGColor=So.PCTooltipPaint.BGColor,this.TitleColor=So.PCTooltipPaint.TitleColor,this.DateTimeColor=So.PCTooltipPaint.DateTimeColor,this.VolColor=So.PCTooltipPaint.VolColor,this.AmountColor=So.PCTooltipPaint.AmountColor,this.PositionColor=So.PCTooltipPaint.PositionColor,this.LanguageID=xo.LANGUAGE_CHINESE_ID,this.TitlePaint,this.UpColor=So.UpTextColor,this.DownColor=So.DownTextColor,this.UnchagneColor=So.UnchagneTextColor,this.YClose,this.Mergin={Left:2,Top:3,Bottom:2,Right:2},this.LineHeight=15,this.FixedWidth,this.Font=So.PCTooltipPaint.TitleFont,this.HQChart,this.SetOption=function(t){t.BGColor&&(this.BGColor=t.BGColor),t.LanguageID>0&&(this.LanguageID=t.LanguageID),we.IsNumber(t.FixedWidth)&&(this.FixedWidth=t.FixedWidth)},this.ReloadResource=function(t){this.BorderColor=So.PCTooltipPaint.BorderColor,this.BGColor=So.PCTooltipPaint.BGColor,this.TitleColor=So.PCTooltipPaint.TitleColor,this.DateTimeColor=So.PCTooltipPaint.DateTimeColor,this.VolColor=So.PCTooltipPaint.VolColor,this.AmountColor=So.PCTooltipPaint.AmountColor,this.UpColor=So.UpTextColor,this.DownColor=So.DownTextColor,this.UnchagneColor=So.UnchagneTextColor,this.Font=So.PCTooltipPaint.TitleFont},this.IsEnableDraw=function(){if(!this.HQChart||!this.HQChart.TitlePaint||!this.HQChart.TitlePaint[0])return!1;var t=this.HQChart.LastPoint;return!!t&&(!(this.HQChart.ChartCorssCursor&&!this.HQChart.ChartCorssCursor.IsShowCorss)&&this.HQChart.IsMouseOnClient(t.X,t.Y))},this.Draw=function(){if(this.IsEnableDraw()&&(this.TitlePaint=this.HQChart.TitlePaint[0],this.TitlePaint)){var t,e=this.TitlePaint.PointInfo;if(e&&(2==e.ClientPos||3==e.ClientPos||e.ClientPos>=200&&e.ClientPos<=299||e.ClientPos>=300&&e.ClientPos<=399)){var a=this.TitlePaint.GetCurrentAuctionData();if(!a)return;t={Type:1,Data:a}}else{var i=this.TitlePaint.GetCurrentKLineData();if(!i)return;t={Type:0,Data:i}}this.YClose=this.TitlePaint.YClose;var r=this.GetForamtTitle(t);if(we.IsNonEmptyArray(r)){this.Canvas.font=this.Font,this.Canvas.textBaseline="top",this.LineHeight=c(this.Canvas,null,"æ");var n=this.ChartBorder.GetBorder(),o=this.LineHeight*r.length*2,s={Left:1,Top:1,Right:n.Left};s.Bottom=s.Top+o,s.Width=s.Right-s.Left,s.Height=s.Bottom-s.Top,s.Height+=this.Mergin.Top+this.Mergin.Bottom,s.Bottom=s.Top+s.Height,we.IsNumber(this.FixedWidth)&&(s.Width=this.FixedWidth),this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(s.Left,s.Top,s.Width,s.Height),this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(p(s.Left),p(s.Top),g(s.Width),g(s.Height));var l=s.Left+s.Width-this.Mergin.Right,h=this.Mergin.Left+s.Left,u=this.Mergin.Top+s.Top,C={Left:h,Top:u,Right:l};C.Width=C.Right-C.Left;for(var f=0;f<r.length;++f){var d=r[f];this.DrawText(d,C)}}}},this.DrawText=function(t,e){this.Canvas.fillStyle=t.TitleColor,this.Canvas.textAlign="left",this.Canvas.fillText(t.Title,e.Left,e.Top),e.Top+=this.LineHeight,e.Bottom=e.Top+this.LineHeight,this.Canvas.textAlign="right",this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(t.Text,e.Right,e.Top),e.Top+=this.LineHeight,e.Bottom=e.Top+this.LineHeight},this.GetForamtTitle=function(t){if(!t||!t.Data)return null;var e,a=[],i=!1;this.HQChart.Symbol&&(e=this.HQChart.Symbol.toUpperCase());var r=sr(e);if(e&&(i=wo.IsFutures(e)),0==t.Type){var n=t.Data;if(!n)return;this.YClose=n.YClose,i&&we.IsNumber(n.YClearing)&&(this.YClose=n.YClearing);var o=this.FormatDate(n.Date);o&&a.push(o);var o=this.ForamtTime(n.Time,"HH:MM","PCTooltip-Time");o&&a.push(o);var o=this.ForamtPrice(n.Close,r,"PCTooltip-Price");o&&a.push(o);var o=this.ForamtPrice(n.AvPrice,r,"PCTooltip-AvPrice");o&&a.push(o);var o=this.ForamtIncrease(n.Close,"PCTooltip-Increase");o&&a.push(o);var o=this.FormatVol(n.Vol,"PCTooltip-Vol");if(o&&a.push(o),we.IsNumber(n.Amount)){var o={Title:bo.GetText("PCTooltip-Amount",this.LanguageID),TitleColor:this.TitleColor,Text:we.FromatIntegerString(n.Amount,2,this.LanguageID),TextColor:this.AmountColor};a.push(o)}if(i&&we.IsNumber(n.Position)){var o=this.FormatPosition(n.Position,"PCTooltip-Position");o&&a.push(o)}}else if(1==t.Type){var n=t.Data.Data;if(!n)return;this.YClose=n.YClose,i&&we.IsNumber(n.YClearing)&&(this.YClose=n.YClearing);var o=this.FormatDate(n.Date);o&&a.push(o);var s="HH:MM:SS";1===n.Ver&&(s="HH:MM");var o=this.ForamtTime(n.Time,s,"PCTooltip-Time");o&&a.push(o);var o=this.ForamtPrice(n.Price,r,"PCTooltip-AC-Price");o&&a.push(o);var o=this.ForamtIncrease(n.Price,"PCTooltip-AC-Increase");if(o&&a.push(o),we.IsNonEmptyArray(n.Vol)){var o=this.FormatVol(n.Vol[0],"PCTooltip-AC-Vol");o&&a.push(o);var o=this.FormatVol(n.Vol[1],"PCTooltip-AC-NotMatchVol");o&&a.push(o)}}return a},this.GetColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchagneColor},this.FormatDate=function(t){return we.IsNumber(t)?{Title:bo.GetText("PCTooltip-Date",this.LanguageID),TitleColor:this.TitleColor,Text:we.FormatDateString(t,"MM-DD",this.LanguageID),TextColor:this.DateTimeColor}:null},this.ForamtTime=function(t,e,a){return we.IsNumber(t)?{Title:bo.GetText(a,this.LanguageID),TitleColor:this.TitleColor,Text:we.FormatTimeString(t,e,this.LanguageID),TextColor:this.DateTimeColor}:null},this.ForamtPrice=function(t,e,a){return we.IsNumber(t)?{Title:bo.GetText(a,this.LanguageID),TitleColor:this.TitleColor,Text:t.toFixed(e),TextColor:this.GetColor(t,this.YClose)}:null},this.ForamtIncrease=function(t,e){if(!we.IsNumber(t)||0==t)return null;var a=(t-this.YClose)/this.YClose*100,i={Title:bo.GetText(e,this.LanguageID),TitleColor:this.TitleColor,Text:a.toFixed(2)+"%",TextColor:this.GetColor(a,0)};return 0===this.YClose&&(i.Text="--.--",i.TextColor=this.TitleColor),i},this.FormatVol=function(t,e){return we.IsNumber(t)?{Title:bo.GetText(e,this.LanguageID),TitleColor:this.TitleColor,Text:we.FromatIntegerString(t,2,this.LanguageID),TextColor:this.VolColor}:null},this.FormatPosition=function(t,e){return we.IsNumber(t)?{Title:bo.GetText(e,this.LanguageID),TitleColor:this.TitleColor,Text:t.toFixed(0),TextColor:this.PositionColor}:null}}function fe(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.Left=80,this.Right=1,this.Top=1,this.Bottom=1,this.BorderColor=So.FrameBorderPen,this.Symbol,this.Name,this.TitleFont=["14px å¾®è½¯éé»"],this.Draw=function(){var t=this.ChartBorder.GetRight()+this.Left,e=this.ChartBorder.GetChartWidth()-this.Right,a=this.Top+18,i=t+(e-t)/2;this.Symbol&&this.Name&&(this.Canvas.font=this.TitleFont[0],this.Canvas.textAlign="right",this.Canvas.textBaseline="bottom",this.Canvas.fillText(this.Symbol,i-2,a),this.Canvas.textAlign="left",this.Canvas.fillText(this.Name,i+2,a)),this.Canvas.strokeStyle=this.BorderColor,this.Canvas.moveTo(t,a),this.Canvas.lineTo(e,a),this.Canvas.stroke(),a+=30,this.DrawBorder()},this.DrawBorder=function(){var t=this.ChartBorder.GetRight()+this.Left,e=this.ChartBorder.GetChartWidth()-this.Right,a=this.Top,i=this.ChartBorder.GetChartHeight()-this.Bottom;this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(t,a,e-t,i-a)}}function de(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.Name="ç­¹ç åå¸",this.ClassName="StockChip",this.HQChart,this.PenBorder=So.FrameBorderPen,this.ColorProfit="rgb(255,0,0)",this.ColorNoProfit="rgb(90,141,248)",this.ColorAveragePrice="rgb(0,139,0)",this.ColorBG="rgb(190,190,190)",this.PixelRatio=C(),this.ShowType=0,this.IsDynamic=!0,this.ClientRect={},this.Font=So.TitleFont,this.InfoColor=So.StockChip.InfoColor,this.DayInfoColor=So.StockChip.DayInfoColor,this.LineHeight=16,this.Left=50*this.PixelRatio,this.IsShowX=!1,this.ShowXCount=3,this.Width=150*this.PixelRatio,this.CalculateType=0,this.PriceZoom=100,this.NotSupportMessage="ä¸æ¯æç­¹ç å¾",this.Buttons=[],this.DefaultButton=I(So.StockChip.DefaultButton),this.LongButton=I(So.StockChip.LongButton),this.RecentButton=I(So.StockChip.RecentButton),this.ButtonTooltip=I(So.Buttons.Tooltip),this.DAY_COLOR=[["rgb(255,0,0)","rgb(255,128,128)","rgb(255,0,128)","rgb(255,100,0)","rgb(192,128,0)","rgb(255,192,0)"],["rgb(120,80,225)","rgb(160,160,225)","rgb(80,80,255)","rgb(120,120,255)","rgb(32,64,192)","rgb(0,64,128)"]],this.SetOption=function(t){t&&(t.ShowType>0&&(this.ShowType=t.ShowType),t.IsShowX&&(this.IsShowX=t.IsShowX),t.ShowXCount>0&&(this.ShowXCount=t.ShowXCount),t.Width>100&&(this.Width=t.Width*C()),t.CalculateType>0&&(this.CalculateType=t.CalculateType),we.IsNumber(t.PriceZoom)&&(this.PriceZoom=t.PriceZoom))},this.ReloadResource=function(t){this.PenBorder=So.FrameBorderPen,this.Font=So.TitleFont,this.InfoColor=So.StockChip.InfoColor,this.DayInfoColor=So.StockChip.DayInfoColor,this.DefaultButton=I(So.StockChip.DefaultButton),this.LongButton=I(So.StockChip.LongButton),this.RecentButton=I(So.StockChip.RecentButton),this.ButtonTooltip=I(So.Buttons.Tooltip)},this.Draw=function(){this.PixelRatio=C();var t=p(this.ChartBorder.GetRight()+this.Left),e=p(this.ChartBorder.GetTop()),a=p(t+this.Width-1*this.PixelRatio),i=p(this.ChartBorder.GetBottom()),r=a-t,n=i-e;if(this.ClientRect={Left:t,Top:e,Width:r,Height:n},tt.IsTickPeriod(this.HQChart.Period)){this.Canvas.font=this.Font,this.Canvas.fillStyle=this.InfoColor;var o=t+r/2,s=e+n/2;return this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillText(this.NotSupportMessage,o,s),void this.DrawBorder()}this.CalculateChip()?(this.DrawFrame(),this.DrawAllChip(),1!=this.ShowType&&2!=this.ShowType||this.DrawDayChip(),this.CalculateCast(),this.DrawChipInfo()):Xn.Chart.Log("[StockChip::Draw] no data"),this.DrawBorder(),this.SizeChange=!1},this.DrawChipInfo=function(){var t=this.ClientRect.Top+this.ClientRect.Height-1,e=this.ClientRect.Left+2,a=this.ClientRect.Left+this.ClientRect.Width;this.Canvas.font=this.Font,this.Canvas.fillStyle=this.InfoColor,this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left";var i=this.LineHeight*C(),r="70%ææ¬ä»· --.--";we.IsNonEmptyArray(this.Data.Cast)&&(r="70%ææ¬ä»·"+this.Data.Cast[1].MinPrice.toFixed(2)+"-"+this.Data.Cast[1].MaxPrice.toFixed(2)+"éä¸­"+this.Data.Cast[1].Rate.toFixed(2)+"%"),this.Canvas.fillText(r,e,t),t-=i,r="90%ææ¬ä»· --.--",we.IsNonEmptyArray(this.Data.Cast)&&(r="90%ææ¬ä»·"+this.Data.Cast[0].MinPrice.toFixed(2)+"-"+this.Data.Cast[0].MaxPrice.toFixed(2)+"éä¸­"+this.Data.Cast[0].Rate.toFixed(2)+"%"),this.Canvas.fillText(r,e,t),t-=i,r="å¹³åææ¬ï¼"+this.Data.ChipInfo.AveragePrice.toFixed(2)+"å",this.Canvas.fillText(r,e,t),t-=i,r=+this.Data.YPrice.toFixed(2)+"å¤è·å©çï¼"+this.Data.ChipInfo.YProfitRate.toFixed(2)+"%",this.Canvas.fillText(r,e,t),t-=i,r="è·å©æ¯ä¾ï¼",this.Canvas.fillText(r,e,t);var n=this.Canvas.measureText(r).width+2,o=e+n,s=a-5-o;if(this.Canvas.strokeStyle=this.ColorNoProfit,this.Canvas.strokeRect(o,t-i,s,i),this.Canvas.strokeStyle=this.ColorProfit,this.Canvas.strokeRect(o,t-i,s*(this.Data.ChipInfo.ProfitRate/100),i),r=this.Data.ChipInfo.ProfitRate.toFixed(2)+"%",this.Canvas.textAlign="center",this.Canvas.fillText(r,o+s/2,t),t-=i,this.Canvas.textAlign="left",r="ææ¬åå¸,æ¥æï¼"+we.FormatDateString(this.Data.SelectData.Date),this.Data.SelectData.Time&&(r+=" "+we.FormatTimeString(this.Data.SelectData.Time)),this.Canvas.fillText(r,e,t),t-=i,1==this.ShowType||2==this.ShowType){var a=this.ClientRect.Left+this.ClientRect.Width-1;this.Canvas.textAlign="right";var n=50;this.Data.DayChip.sort(function(t,e){return e.Day-t.Day});for(var l in this.Data.DayChip){var h=this.Data.DayChip[l],u=0;this.Data.ChipInfo&&this.Data.ChipInfo.Vol>0&&(u=h.Vol/this.Data.ChipInfo.Vol*100),r=h.Day+"å¨æ"+(1==this.ShowType?"å":"å")+"ææ¬"+(we.IsNumber(u)?u.toFixed(2)+"%":"--.--%"),0==l&&(n=this.Canvas.measureText(r).width+8),this.Canvas.fillStyle=h.Color,this.Canvas.fillRect(a-n,t-i,n,i),this.Canvas.fillStyle=this.DayInfoColor,this.Canvas.fillText(r,a,t),t-=i}}},this.DrawDayChip=function(){var t=this.HQChart.Frame.SubFrame[0].Frame;for(var e in this.Data.DayChip){var a=[],i=this.Data.DayChip[e].Chip;if(i){for(var r=0,n=0;n<i.length;++n){var o=i[n];if(o){r+=o;var s=(n+this.Data.MinPrice)/100,l=t.GetYFromData(s),h=o/this.Data.MaxVol*this.ClientRect.Width+this.ClientRect.Left;a.push({X:h,Y:l})}}this.Data.DayChip[e].Vol=r,this.DrawArea(a,this.Data.DayChip[e].Color)}}},this.DrawToolbar=function(t,e){this.Buttons=[];for(var a=(this.ClientRect.Left,this.ClientRect.Left+this.ClientRect.Width),i=this.ClientRect.Top+this.ChartBorder.TitleHeight/2,r=[{ID:qn.CHIP_RECENT,Style:this.RecentButton,ShowType:2},{ID:qn.CHIP_LONG,Style:this.LongButton,ShowType:1},{ID:qn.CHIP_DEFULT,Style:this.DefaultButton,ShowType:0}],n=0;n<r.length;++n){var o=r[n],s=o.Style.Size,l=a-s-o.Style.MerginLeft,h=s+"px "+o.Style.Family,u={Left:l,Top:i-s/2,Right:l+s+o.Style.MerginLeft,Bottom:i+s/2,Width:s+o.Style.MerginLeft,Height:s},C=o.Style.Color,c={ID:o.ID,Rect:u};this.ShowType==o.ShowType?(C=o.Style.SelectedColor,e&&t&&t.X>=u.Left&&t.X<u.Right&&t.Y>=u.Top&&t.Y<=u.Bottom&&(e.MouseOnToolbar={Rect:u,Item:c,Frame:this,Point:{X:t.X,Y:t.Y}})):t&&t.X>=u.Left&&t.X<u.Right&&t.Y>=u.Top&&t.Y<=u.Bottom&&(C=o.Style.MoveOnColor,e&&(e.MouseOnToolbar={Rect:u,Item:c,Frame:this,Point:{X:t.X,Y:t.Y}})),this.Canvas.fillStyle=C,this.Canvas.font=h,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(o.Style.Text,l,i),this.Buttons.push(c),a=l}},this.DrawToolbarTooltip=function(t){if(t){var e=(this.ClientRect.Left,this.ClientRect.Left+this.ClientRect.Width),a="Toolbar-"+t.Item.ID;if(text=bo.GetText(a,0),text){var i=t.Rect,r=i.Left+i.Width/2;this.Canvas.font=this.ButtonTooltip.Font,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle";var n=this.Canvas.measureText(text).width+8,o=this.GetFontHeight(),s=o+8,l=r-n/2,h=i.Top-s;h<0&&(h=i.Bottom+1),l+n>e&&(l=e-n-2),this.Canvas.fillStyle=this.ButtonTooltip.ColorBG,this.Canvas.fillRect(l,h,n,s),this.Canvas.fillStyle=this.ButtonTooltip.Color,this.Canvas.fillText(text,l+4,h+s/2)}}},this.PtInButtons=function(t,e){for(var a=0;a<this.Buttons.length;++a){var i=this.Buttons[a];if(i.Rect){var r=i.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(r.Left,r.Top,r.Width,r.Height),this.Canvas.isPointInPath(t,e))return{ID:i.ID,Rect:r}}}return null},this.DrawAllChip=function(){for(var t=this.HQChart.Frame.SubFrame[0].Frame,e=this.Data.SelectData.Close,a=[],i=[],r=0,n=0,o=0,s=0,l=this.Data.YPrice,h=t.HorizontalMax,u=t.HorizontalMin,C=1,c=0;c<this.Data.AllChip.length;++c){var f=this.Data.AllChip[c];if(f){var d=(c+this.Data.MinPrice)/this.PriceZoom;r+=f,n+=d*f,d<l&&(s+=f),d<e&&(o+=f),d<=h&&d>=u&&C<f&&(C=f)}}this.Data.MaxVol=C;for(var c=0;c<this.Data.AllChip.length;++c){var f=this.Data.AllChip[c];if(f){var d=(c+this.Data.MinPrice)/this.PriceZoom;if(!(d>h||d<u)){var D=t.GetYFromData(d),m=f/this.Data.MaxVol*this.ClientRect.Width+this.ClientRect.Left;d<e?a.push({X:m,Y:D}):i.push({X:m,Y:D})}}}if(this.Data.ChipInfo={Vol:r,AveragePrice:n/r,ProfitVol:o,ProfitRate:r>0?o/r*100:0,YProfitRate:r>0?s/r*100:0},0==this.ShowType){this.DrawLines(a,this.ColorProfit),this.DrawLines(i,this.ColorNoProfit);var p=this.Data.ChipInfo.AveragePrice;p>0&&p<=h&&p>=u&&(p=p.toFixed(2),this.DrawAveragePriceLine(a,i,t.GetYFromData(p),this.ColorAveragePrice))}else this.DrawLines(a,this.ColorBG),this.DrawLines(i,this.ColorBG)},this.CalculateCast=function(){if(this.Data.ChipInfo&&this.Data.ChipInfo.Vol){for(var t=[{Start:.05,End:.95,MaxPrice:0,MinPrice:0,Rate:0},{Start:.15,End:.85,MaxPrice:0,MinPrice:0,Rate:0}],e=(this.Data.ChipInfo.AveragePrice,this.Data.ChipInfo.ProfitVol),a=0,i=0,r=0;i<this.Data.AllChip.length&&4!=r;++i){var n=this.Data.AllChip[i];if(!(n<=0)){var o=(i+this.Data.MinPrice)/this.PriceZoom;a+=n;var s=a/e;for(var l in t){var h=t[l];h.MinPrice<=0&&s>h.Start&&(h.MinPrice=o,++r),h.MaxPrice<=0&&s>h.End&&(h.MaxPrice=o,++r)}}}for(var i in t){var u=t[i],C=u.MaxPrice+u.MinPrice;C&&(u.Rate=Math.abs(u.MaxPrice-u.MinPrice)/C*100)}this.Data.Cast=t}},this.DrawArea=function(t,e){if(!(t.length<=0)){this.Canvas.fillStyle=e,this.Canvas.beginPath(),this.Canvas.moveTo(this.ClientRect.Left,t[0].Y);for(var a in t){var i=t[a];this.Canvas.lineTo(i.X,i.Y)}this.Canvas.lineTo(this.ClientRect.Left,t[t.length-1].Y),this.Canvas.fill()}},this.DrawLines=function(t,e){if(!(t.length<=0)){this.Canvas.strokeStyle=e,this.Canvas.beginPath();for(var a in t){var i=t[a];this.Canvas.moveTo(this.ClientRect.Left,i.Y),this.Canvas.lineTo(i.X,i.Y)}this.Canvas.stroke()}},this.DrawAveragePriceLine=function(t,e,a,i){for(var r in t){var n=t[r];if(n.Y==a)return this.Canvas.strokeStyle=i,this.Canvas.beginPath(),this.Canvas.moveTo(this.ClientRect.Left,n.Y),this.Canvas.lineTo(n.X,n.Y),void this.Canvas.stroke()}for(var r in e){var n=e[r];if(n.Y==a)return this.Canvas.strokeStyle=i,this.Canvas.beginPath(),this.Canvas.moveTo(this.ClientRect.Left,n.Y),this.Canvas.lineTo(n.X,n.Y),void this.Canvas.stroke()}},this.DrawBorder=function(){this.Canvas.strokeStyle=this.PenBorder,this.Canvas.strokeRect(this.ClientRect.Left,this.ClientRect.Top,this.ClientRect.Width,this.ClientRect.Height)},this.EvenlyDistribute=function(t,e){var a=e.Low,i=e.High,r=e.MaxPrice,n=e.MinPrice,o=1;if(i-a!=0){for(var s=e.Vol/(i-a),l=a;l<=i&&l<=r;++l){var h=l-n;t[h]+=s,o<t[h]&&(o=t[h])}e.MaxVol=o}},this.TriangleDistribute=function(t,e){for(var a=e.Low,i=e.High,r=(e.MaxPrice,e.MinPrice),n=1,o=3.1415926535,s=(i-a)/2+a,l=0,h=[],u=a+1,C=1;u<=s;++u,++C){var c=Math.tan(45*o/180)*C;l+=c,h.push({Index:u-r,Value:c})}for(var u=i-1,C=1;u>s;--u,++C){var c=Math.tan(45*o/180)*C;l+=c,h.push({Index:u-r,Value:c})}if(l>0){for(var u=0;u<h.length;++u){var f=h[u];t[f.Index]+=f.Value*e.Vol/l,n<t[f.Index]&&(n=t[f.Index])}e.MaxVol=n}},this.CalculateDistribute=function(t,e){1==this.CalculateType?this.TriangleDistribute(t,e):this.EvenlyDistribute(t,e)},this.CalculateChip=function(){if(!this.HQChart)return!1;if(!this.HQChart.FlowCapitalReady)return!1;var t=this.HQChart.Symbol;if(!t)return!1;if(wo.IsSHSZIndex(t))return!1;var e=this.HQChart.ChartPaint[0].Data,a=e.DataOffset+parseInt(this.HQChart.CursorIndex);a>=e.Data.length&&(a=e.Data.length-1);var i=e.Data[a],r=i.Close,n=this.HQChart.LastPoint.Y;n&&(r=this.HQChart.Frame.SubFrame[0].Frame.GetYData(n));for(var o,s,l,h=[],u=1,C=a;C>=0;--C){var c=e.Data[C],f=1;c.FlowCapital>0&&(f=c.Vol/c.FlowCapital),o=C==a?c.Vol*f:c.Vol*u;var d={Vol:o,High:c.High,Low:c.Low};h.push(d),u*=1-1*f,(!s||s<c.High)&&(s=c.High),(!l||l>c.Low)&&(l=c.Low)}if(!s||!l)return!0;var D=this.PriceZoom;s=parseInt(s*D),l=parseInt(l*D);for(var m=s-l,p=new Array,v=0;v<=m;++v)p.push(0);var g,T=[];if(2==this.ShowType){var T=[{Day:100,Color:this.DAY_COLOR[1][5]},{Day:60,Color:this.DAY_COLOR[1][4]},{Day:30,Color:this.DAY_COLOR[1][3]},{Day:20,Color:this.DAY_COLOR[1][2]},{Day:10,Color:this.DAY_COLOR[1][1]},{Day:5,Color:this.DAY_COLOR[1][0]}];for(var I in h){var c=h[I],S=parseInt(c.High*D),x=parseInt(c.Low*D),b=c.Vol;if(S-x>0&&(b=c.Vol/(S-x)),!(b<=1e-9)){for(var y=0;y<T.length;++y)if(I==T[y].Day){T[y].Chip=p.slice(0);break}g={Low:x,High:S,Vol:c.Vol,MaxPrice:s,MinPrice:l},this.CalculateDistribute(p,g)}}}else if(1==this.ShowType)for(var T=[{Day:5,Color:this.DAY_COLOR[0][0]},{Day:10,Color:this.DAY_COLOR[0][1]},{Day:20,Color:this.DAY_COLOR[0][2]},{Day:30,Color:this.DAY_COLOR[0][3]},{Day:60,Color:this.DAY_COLOR[0][4]},{Day:100,Color:this.DAY_COLOR[0][5]}],E=h.length-1;E>=0;--E){var c=h[E],S=parseInt(c.High*D),x=parseInt(c.Low*D),b=c.Vol;if(S-x>0&&(b=c.Vol/(S-x)),!(b<=1e-9)){for(var y=0;y<T.length;++y)if(E==T[y].Day){T[y].Chip=p.slice(0);break}g={Low:x,High:S,Vol:c.Vol,MaxPrice:s,MinPrice:l},this.CalculateDistribute(p,g)}}else for(var w in h){var c=h[w],S=parseInt(c.High*D),x=parseInt(c.Low*D),b=c.Vol;S-x>0&&(b=c.Vol/(S-x)),b<=1e-9||(g={Low:x,High:S,Vol:c.Vol,MaxPrice:s,MinPrice:l},this.CalculateDistribute(p,g))}return!!g&&(this.Data={AllChip:p,MaxVol:g.MaxVol,MaxPrice:s,MinPrice:l,SelectData:i,DayChip:T,YPrice:r},!0)},this.DrawFrame=function(){if(0!=this.IsShowX&&!(this.Data.MaxVol<=0)){var t=1!==this.HQChart.Frame.SubFrame.length,e=this.HQChart.Frame.SubFrame[0].Frame,a=e.ChartBorder,i=p(a.GetBottomEx()+1);t||(i=this.ClientRect.Top+this.ClientRect.Height);var r=this.ClientRect.Left,n=r+this.ClientRect.Width;this.Canvas.strokeStyle=this.PenBorder,this.Canvas.beginPath(),t&&(this.Canvas.moveTo(r,i),this.Canvas.lineTo(n,i));var o=this.ShowXCount,s=this.Data.MaxVol,l=Math.floor(s/o);this.Canvas.font=this.Font,this.Canvas.textBaseline="top",this.Canvas.fillStyle=this.InfoColor;for(var h=(C(),1);h<=o;++h){var u=l*h,c=u/this.Data.MaxVol*this.ClientRect.Width+this.ClientRect.Left;if(c=p(c),h==o){this.Canvas.textAlign="right";var f=we.FormatValueString(s,1);this.Canvas.fillText(f,c,i+2)}else{this.Canvas.moveTo(c,this.ClientRect.Top),this.Canvas.lineTo(c,i),this.Canvas.textAlign="center";var f=we.FormatValueString(u,1),d=this.Canvas.measureText(f).width;this.Canvas.fillText(f,Math.floor(c-.25*d),i+2)}}this.Canvas.stroke()}}}function De(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.ClassName="FrameSplitPaint",this.LineColor="rgb(255,0,0)",this.TextColor="rgb(255,0,0)",this.LineWidth=2,this.Font="bold "+18*C()+"px å¾®è½¯éé»",this.TextTopOffset=10*C(),this.SetOption=function(t){t&&(t.LineColor&&(this.LineColor=t.LineColor),t.TextColor&&(this.TextColor=t.TextColor),t.Font&&(this.Font=t.Font),we.IsNumber(t.LineWidth)&&(this.LineWidth=t.LineWidth),we.IsNumber(t.TextTopOffset)&&(this.TextTopOffset=t.TextTopOffset))},this.Draw=function(){if(this.HQChart&&(0==this.HQChart.Period||1==this.HQChart.Period)&&this.HQChart.ChartPaint[0]){var t=this.HQChart.ChartPaint[0].Data;if(t&&(this.Data=t,this.ChartFrame&&this.ChartFrame.SubFrame)){var e=this.ChartFrame.SubFrame[0].Frame;if(e){var a=!0===e.IsHScreen,i=e.DataWidth,r=e.DistanceWidth,n=e.XPointCount,o=this.LineWidth*C();if(a)var s=this.ChartBorder.GetHScreenBorder(),l=s.TopEx+r/2+So.FrameLeftMargin,h=s.BottomEx;else var s=this.ChartBorder.GetBorder(),l=s.LeftEx+r/2+So.FrameLeftMargin,h=s.RightEx,u=s.ChartHeight-s.TopTitle-5*C();this.Canvas.save(),this.Canvas.lineWidth=o,this.Canvas.font=this.Font,this.Canvas.textAlign="center",this.Canvas.textBaseline="top";for(var c={Left:s.LeftEx,Top:v(o,s.TopTitle),Height:u,LineWidth:o},f=this.Data.DataOffset,d=0;f<this.Data.Data.length&&d<n;++f,++d,l+=i+r){var D=this.Data.Data[f];if(D){var m=this.GetQuarter(D.Date);if(m){var p=l,g=l+i;if(g>h)break;var T=p+(g-p)/2;if(c.DateInfo){var I=c.DateInfo;I.Year!=m.Year||I.Quarter!=m.Quarter?(c.Right=T,this.DrawQuarter(c),c.Left=T,c.Right=null,c.DateInfo=m):c.Right=T}else c.DateInfo=m,c.Right=T}}}this.DrawQuarter(c),this.Canvas.restore()}}}},this.DrawQuarter=function(t){if(we.IsNumber(t.Left)&&we.IsNumber(t.Right)){var e=v(t.LineWidth,t.Left),a=v(t.LineWidth,t.Right),i=a-e;this.Canvas.strokeStyle=this.LineColor,this.Canvas.strokeRect(e,t.Top,i,t.Height);var r=t.DateInfo,n=r.Year%100;if(n<10)var o="0"+n;else var o=n.toString();var s=o+"å¹´"+r.Quarter+"å­£åº¦";if(this.Canvas.measureText(s).width<i+5){var l=e+i/2,h=t.Top+this.TextTopOffset;this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(s,l,h)}}},this.GetQuarter=function(t){if(!we.IsNumber(t))return null;var e=parseInt(t/1e4),a=parseInt(t%1e4/100);switch(a){case 1:case 2:case 3:var i=1;break;case 4:case 5:case 6:var i=2;break;case 7:case 8:case 9:var i=3;break;case 10:case 11:case 12:var i=4;break;default:return null}return{Year:e,Month:a,Quarter:i}}}function me(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.ClassName="RectSelectPaint",this.LineColor=So.RectSelect.LineColor,this.LineWidth=So.RectSelect.LineWidth,this.LineDotted=So.RectSelect.LineDotted,this.AreaColor=So.RectSelect.AreaColor,this.SubAreaColor=So.RectSelect.SubAreaColor,this.MarkConfig={Family:So.RectSelect.Mark.Family,Text:So.RectSelect.Mark.Text,Color:So.RectSelect.Mark.Color,Size:So.RectSelect.Mark.Size,IsShow:!1,Position:{Index:So.RectSelect.Mark.Position.Index,Top:So.RectSelect.Mark.Position.Top}},this.FirstPoint,this.SecondPoint,this.CenterPoint,this.PreventClose=!1,this.SpaceReselected=!1,this.SubClient={FirstPoint:null,SecondPoint:null,Start:null,End:null},this.StartDate,this.EndDate,this.CenterDate,this.HQChart,this.DragRect,this.ShowRangeText={Enable:!1,Position:0,Font:So.RectSelect.RangeTextFont,Color:So.RectSelect.RangeTextColor,BGColor:So.RectSelect.RangeTextBGColor,SubPosition:0,SubFont:So.RectSelect.RangeTextSubFont,SubColor:So.RectSelect.RangeTextSubColor,SubBGColor:So.RectSelect.RangeTextSubBGColor},this.BorderCache,this.IsOnlyOnePoint=!1,this.IsFullFrame=!1,this.SetOption=function(t){if(t){if(t.LineColor&&(this.LineColor=t.LineColor),t.AreaColor&&(this.AreaColor=t.AreaColor),we.IsBool(t.SpaceReselected)&&(this.SpaceReselected=t.SpaceReselected),t.ShowRangeText){var e=t.ShowRangeText;we.IsBool(e.Enable)&&(this.ShowRangeText.Enable=e.Enable),we.IsNumber(e.Position)&&(this.ShowRangeText.Position=e.Position),we.IsNumber(e.SubPosition)&&(this.ShowRangeText.SubPosition=e.SubPosition)}if(t.Mark){var e=t.Mark;we.IsBool(e.IsShow)&&(this.MarkConfig.IsShow=e.IsShow),e.Position&&(we.IsNumber(e.Position.Index)&&(this.MarkConfig.Position.Index=e.Position.Index),e.Position.Top&&(this.MarkConfig.Position.Top=e.Position.Top))}}},this.ReloadResource=function(t){this.LineColor=So.RectSelect.LineColor,this.LineWidth=So.RectSelect.LineWidth,this.LineDotted=So.RectSelect.LineDotted,this.AreaColor=So.RectSelect.AreaColor,this.ShowRangeText.Font=So.RectSelect.RangeTextFont,this.ShowRangeText.Color=So.RectSelect.RangeTextColor,this.ShowRangeText.BGColor=So.RectSelect.RangeTextBGColor},this.IsMinuteChart=function(){var t=this.HQChart.ClassName;return"MinuteChartContainer"==t||"MinuteChartHScreenContainer"==t},this.GetKData=function(){if(!this.HQChart)return null;var t=this.IsMinuteChart(),e=null;if(t){if(!this.HQChart.SourceData)return null;e=this.HQChart.SourceData}else{if(!this.HQChart.ChartPaint[0])return null;if(!(e=this.HQChart.ChartPaint[0].Data))return null}return e},this.GetPointCount=function(){var t=0;return this.FirstPoint&&++t,this.SecondPoint&&++t,t},this.DateToNumber=function(t,e){if(e)return we.IsNumber(t.Date)?1e4*t.Date+t.Time:t.Time;var a=this.HQChart.Period;return tt.IsDayPeriod(a,!0)?t.Date:tt.IsMinutePeriod(a,!0)?1e4*t.Date+t.Time:tt.IsSecondPeriod(a)||tt.IsTickPeriod(a)?1e6*t.Date+t.Time:tt.IsMilliSecondPeriod(a)?1e9*t.Date+t.Time:null},this.GetSelectRectDataByOnePoint=function(){if(!this.FirstPoint)return null;var t=this.GetKData();if(!t)return null;for(var e=this.IsMinuteChart(),a=this.DateToNumber(this.FirstPoint,e),i={Start:null,End:null,Data:t},r=0;r<t.Data.length;++r){var n=t.Data[r];if(n){if(a==this.DateToNumber(n,e))return i.Start=r,i.End=r,i}}return null},this.GetSelectRectData=function(){if(this.IsOnlyOnePoint)return this.GetSelectRectDataByOnePoint();if(!this.FirstPoint||!this.SecondPoint)return null;var t=this.GetKData();if(!t)return null;for(var e=this.IsMinuteChart(),a=this.DateToNumber(this.FirstPoint,e),i=this.DateToNumber(this.SecondPoint,e),r={Start:null,End:null,Data:t},n=0;n<t.Data.length;++n){var o=t.Data[n];if(o){var s=this.DateToNumber(o,e);if(a==s&&(r.Start=n),i==s&&(r.End=n),we.IsNumber(r.Start)&&we.IsNumber(r.End)){if(r.Start>r.End){var l=r.Start;r.Start=r.End,r.End=l}return r}}}return null},this.SortPoint=function(){var t=this.IsMinuteChart();if(this.CenterData=null,this.FirstPoint&&!this.SecondPoint)this.StartDate={Date:this.DateToNumber(this.FirstPoint,t),Index:0};else if(this.FirstPoint&&this.SecondPoint){var e=this.DateToNumber(this.FirstPoint,t),a=this.DateToNumber(this.SecondPoint,t);if(e<a?(this.StartDate={Date:e,Index:0},this.EndDate={Date:a,Index:1}):(this.StartDate={Date:a,Index:1},this.EndDate={Date:e,Index:0}),this.CenterPoint){var i=this.DateToNumber(this.CenterPoint,t);this.CenterDate={Date:i,Index:2}}if(this.SubClient.FirstPoint&&this.SubClient.SecondPoint){var e=this.DateToNumber(this.SubClient.FirstPoint,t),a=this.DateToNumber(this.SubClient.SecondPoint,t);e<a?(this.SubClient.Start={Date:e,Index:3},this.SubClient.End={Date:a,Index:4}):(this.SubClient.Start={Date:a,Index:4},this.SubClient.End={Date:e,Index:3}),this.SubClient.End.Date<=this.StartDate.Date||this.SubClient.Start.Date>=this.EndDate.Date?(this.SubClient.Start=null,this.SubClient.End=null):(this.SubClient.Start.Date<this.StartDate.Date&&(this.SubClient.Start.Date=this.StartDate.Date),this.SubClient.End.Date>this.EndDate.Date&&(this.SubClient.End.Date=this.EndDate.Date))}}},this.GetCenterPoint=function(){if(!this.FirstPoint||!this.SecondPoint)return null;if(!we.IsNumber(this.FirstPoint.DataIndex))return null;if(!we.IsNumber(this.SecondPoint.DataIndex))return null;var t=this.FirstPoint.DataIndex-this.SecondPoint.DataIndex;if(Math.abs(t)<3)return null;var e=parseInt(this.FirstPoint.DataIndex+(this.SecondPoint.DataIndex-this.FirstPoint.DataIndex)/2);if(e<0)return null;var a=this.GetKData();if(!a||!a.Data)return null;var i=a.Data[e];return i?{Date:i.Date,Time:i.Time,DataIndex:e}:null},this.MovePoint=function(t){if(!this.FirstPoint||!this.SecondPoint)return!1;var e=this.GetKData();if(!e||!e.Data)return!1;var a=this.FirstPoint.DataIndex+t,i=e.Data[a];if(!i)return!1;var r={Date:i.Date,Time:i.Time,DataIndex:a},a=this.SecondPoint.DataIndex+t,i=e.Data[a];if(!i)return!1;var n={Date:i.Date,Time:i.Time,DataIndex:a},a=this.CenterPoint.DataIndex+t,i=e.Data[a];if(!i)return!1;var o={Date:i.Date,Time:i.Time,DataIndex:a};return this.FirstPoint=r,this.SecondPoint=n,this.CenterPoint=o,!0},this.MoveSubRect=function(t,e){if(!this.FirstPoint||!this.SecondPoint)return!1;if(!this.SubClient||!this.SubClient.FirstPoint||!this.SubClient.SecondPoint)return!1;var a=this.GetKData();if(!a||!a.Data)return!1;var i=Math.min(this.FirstPoint.DataIndex,this.SecondPoint.DataIndex),r=Math.max(this.FirstPoint.DataIndex,this.SecondPoint.DataIndex),n=this.SubClient.FirstPoint,o=this.SubClient.SecondPoint;if(this.SubClient.FirstPoint.DataIndex>this.SubClient.SecondPoint.DataIndex)var n=this.SubClient.SecondPoint,o=this.SubClient.FirstPoint;var s=n.DataIndex,l=o.DataIndex;if(e){if(s<=i)return!1;s-=t,l-=t}else{if(o.DataIndex>=r)return!1;s+=t,l+=t}var h=!1;if(s!=n.DataIndex){n.DataIndex=s;var u=a.Data[s];n.Date=u.Date,n.Time=u.Time,h=!0}if(l!=n.DataIndex){o.DataIndex=l;var u=a.Data[l];o.Date=u.Date,o.Time=u.Time,h=!0}return h},this.SetPoint=function(t,e){var a=null;if(e&&we.IsNumber(e.DataIndex)&&(a=e.DataIndex),!e||!we.IsNumber(e.Index))return this.IsOnlyOnePoint?(this.FirstPoint={Date:t.Date,Time:t.Time,DataIndex:a},!0):this.FirstPoint?!this.SecondPoint&&(this.SecondPoint={Date:t.Date,Time:t.Time,DataIndex:a},this.CenterPoint=this.GetCenterPoint(),!0):(this.FirstPoint={Date:t.Date,Time:t.Time,DataIndex:a},!0);switch(e.Index){case 0:return this.FirstPoint={Date:t.Date,Time:t.Time,DataIndex:a},this.CenterPoint=this.GetCenterPoint(),!0;case 1:return this.SecondPoint={Date:t.Date,Time:t.Time,DataIndex:a},this.CenterPoint=this.GetCenterPoint(),!0;case 2:var i=a-this.CenterPoint.DataIndex;return Math.abs(i)>0&&this.MovePoint(i);case 3:return this.SubClient.FirstPoint={Date:t.Date,Time:t.Time,DataIndex:a},!0;case 4:return this.SubClient.SecondPoint={Date:t.Date,Time:t.Time,DataIndex:a},!0;default:return!1}},this.ClearPoint=function(){if(this.PreventClose)return!1;var t=!1;return this.FirstPoint&&(this.FirstPoint=null,t=!0),this.SecondPoint&&(this.SecondPoint=null,t=!0),this.SubClient.FirstPoint=null,this.SubClient.SecondPoint=null,t},this.Draw=function(){if(this.BorderCache=null,this.StartDate=null,this.EndDate=null,this.CenterDate=null,this.DragRect=[],this.SubClient.Start=null,this.SubClient.End=null,this.FirstPoint||this.SecondPoint){this.SortPoint();var t=this.GetKData();if(t&&(this.Data=t,this.ChartFrame&&this.ChartFrame.SubFrame)){var e=this.ChartFrame.SubFrame[0].Frame;if(e){var a=!0===e.IsHScreen,i=e.DataWidth,r=e.DistanceWidth,n=e.XPointCount;if(a){var o=e.GetBorder(),s=o.TopEx+r/2+So.FrameLeftMargin;o.BottomEx;this.BorderCache=o}else{var o=e.GetBorder();this.IsFullFrame&&(o=this.ChartFrame.ChartBorder.GetBorder());var s=o.LeftEx+r/2+So.FrameLeftMargin,l=(o.RightEx,o.ChartHeight,o.TopTitle,C(),o.TopEx),h=o.BottomEx;this.BorderCache=o}this.Canvas.save();for(var u=(tt.IsDayPeriod(this.HQChart.Period,!0),this.IsMinuteChart()),c=null,f=null,d=null,D=null,m=[],p=this.Data.DataOffset,v=0;p<this.Data.Data.length&&v<n;++p,++v,s+=i+r){var g=this.Data.Data[p];if(g){var T=s,I=s+i;if(u)var S=e.GetXFromIndex(v);else var S=T+(I-T)/2;var x=this.DateToNumber(g,u);if(this.StartDate&&x==this.StartDate.Date&&(c={XIndex:p,X:S,Top:l,Bottom:h,PointIndex:this.StartDate.Index,Type:0,Item:g},m.push(c)),this.EndDate&&x==this.EndDate.Date&&(f={XIndex:p,X:S,Top:l,Bottom:h,PointIndex:this.EndDate.Index,Type:1,Item:g},m.push(f)),this.CenterDate&&x==this.CenterDate.Date){var b={XIndex:p,X:S,Top:l,Bottom:h,PointIndex:this.CenterDate.Index,Type:2,Item:g};m.push(b)}if(this.SubClient&&this.SubClient.Start&&this.SubClient.End&&(x==this.SubClient.Start.Date&&(this.SubClient.Start.Point={Date:x,X:S,Top:l,Bottom:h,KItem:g}),x==this.SubClient.End.Date&&(this.SubClient.End.Point={Date:x,X:S,Top:l,Bottom:h,kItem:g})),d?(D.Date=x,D.X=S):(d={Date:x,X:S,Top:l,Bottom:h},D={Date:x,X:S,Top:l,Bottom:h}),c&&f)break}}if(this.DrawLines(m),this.DrawArea(c,f,d,D,this.AreaColor),this.DrawMark(c,f),this.SubClient&&this.SubClient.Start&&this.SubClient.End&&(this.DrawArea(this.SubClient.Start.Point,this.SubClient.End.Point,d,D,this.SubAreaColor,4),this.SubClient.Start.Point)){var g=this.SubClient.Start.Point,y={X:g.X,Top:g.Top,Bottom:g.Bottom,PointIndex:g.DataIndex,Type:3,Item:g.KItem};m.push(y)}this.DrawRangeText(m),this.Canvas.restore()}}}},this.DrawRangeText=function(t){if(this.ShowRangeText&&0!=this.ShowRangeText.Enable)for(var e,a,i,r=this.BorderCache,n=this.IsMinuteChart(),o=this.HQChart.Period,s=0;s<t.length;++s){var l=t[s];if(0===l.Type||1==l.Type||3==l.Type){if(n){var h=we.FormatDateString(l.Item.Date,"YYYY-MM-DD"),u=we.FormatTimeString(l.Item.Time,"HH:MM");i=h+" "+u}else{var h=we.FormatDateString(l.Item.Date,"YYYY-MM-DD"),u=null;tt.IsMinutePeriod(o,!0)?u=we.FormatTimeString(l.Item.Time,"HH:MM"):(tt.IsSecondPeriod(o)||tt.IsTickPeriod(o))&&(u=we.FormatTimeString(l.Item.Time,"HH:MM:SS")),i=u?h+" "+u:h}if(3==l.Type){var C=this.ShowRangeText.SubPosition,c=this.ShowRangeText.SubBGColor,f=this.ShowRangeText.SubColor;this.Canvas.font=this.ShowRangeText.SubFont;var d=this.GetFontHeight()}else{var C=this.ShowRangeText.Position,c=this.ShowRangeText.BGColor,f=this.ShowRangeText.Color;this.Canvas.font=this.ShowRangeText.Font;var d=this.GetFontHeight()}var D=this.Canvas.measureText(i).width+4,m={Height:d,Width:D};0==l.Type||3==l.Type?D>l.X?(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",e=l.X+2,m.X=l.X):(this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",e=l.X-2,m.X=l.X-D):1==l.Type&&(D>r.Right-l.X?(this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",e=l.X-2,m.X=l.X-D):(this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",e=l.X+2,m.X=l.X)),1==C?(a=l.Top+(l.Bottom-l.Top)/2,3==l.Type&&(a+=d),m.Y=a-d/2):2==C?(a=l.Bottom,m.Y=a-d/2):(a=l.Top,m.Y=a-d/2),c&&(this.Canvas.fillStyle=c,this.Canvas.fillRect(p(m.X),p(m.Y),g(m.Width),g(m.Height))),f&&(this.Canvas.fillStyle=f,this.Canvas.fillText(i,e,a,D))}}},this.DrawLines=function(t){if(we.IsNonEmptyArray(t)){var e=this.LineWidth*C();this.Canvas.strokeStyle=this.LineColor,this.Canvas.lineWidth=e;for(var a=0;a<t.length;++a){var i=t[a],r=v(e,i.X);0==i.Type||1==i.Type?(this.LineDotted&&this.Canvas.setLineDash(this.LineDotted),this.Canvas.beginPath(),this.Canvas.moveTo(r,i.Top),this.Canvas.lineTo(r,i.Bottom),this.Canvas.stroke(),this.LineDotted&&this.Canvas.setLineDash([])):(this.Canvas.beginPath(),this.Canvas.moveTo(r,i.Top),this.Canvas.lineTo(r,i.Bottom),this.Canvas.stroke());var n=new at(r-3,i.Top,10,i.Bottom-i.Top);this.DragRect[a]={Rect:n,PointIndex:i.PointIndex,Type:i.Type}}}},this.PtInPaint=function(t,e){if(!we.IsNonEmptyArray(this.DragRect))return null;for(var a=0;a<this.DragRect.length;++a){var i=this.DragRect[a],r=i.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(r.X,r.Y,r.Width,r.Height),this.Canvas.isPointInPath(t,e))return(0,On.default)({Index:a,PointIndex:i.PointIndex,Type:i.Type,Self:this},"Type",i.Type)}return null},this.DrawArea=function(t,e,a,i,r,n){if(a&&i&&this.StartDate&&this.EndDate){var o;if(t&&e?o=[t,e]:!t&&e?o=[a,e]:t&&!e?o=[t,i]:a.Date>this.StartDate.Date&&i.Date<this.EndDate.Date&&(o=[a,i]),o&&2==o.length){var s=o[0],l=o[1],h=p(s.X),u=p(l.X),C=u-h,c=s.Bottom-s.Top;this.Canvas.fillStyle=r,this.Canvas.fillRect(h,s.Top,C,c);var f={X:h,Y:s.Top,Right:u,Bottom:s.Top+c,Width:C,Height:c};we.IsNumber(n)&&this.DragRect.push({Rect:f,Type:n})}}},this.DrawMark=function(t,e){if(t&&e&&this.ChartFrame&&this.ChartFrame.SubFrame){var a=this.ChartFrame.SubFrame[0].Frame;if(a&&this.MarkConfig){var i=this.MarkConfig;if(i.IsShow){var r=i.Size+"px "+i.Family;this.Canvas.font=r;var n=null;switch(i.Position.Top){case"TopEx":n=a.ChartBorder.GetTopEx();break;case"Top":n=a.ChartBorder.GetTop();break;case"TopTitle":n=a.ChartBorder.GetTopTitle();break;default:return}var o=t.X,s=n;this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.Canvas.fillStyle=i.Color,this.Canvas.fillText(i.Text,o,s)}}}}}function pe(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.ClassName="RectDragPaint",this.LineColor=So.RectDrag.LineColor,this.LineWidth=So.RectDrag.LineWidth,this.BGColor=So.RectDrag.BGColor,this.ShowMode=0,this.Enable=!1,this.FirstPoint,this.SecondPoint,this.IsClearCanvas=!0,this.SetOption=function(t){t&&(t.LineColor&&(this.LineColor=t.LineColor),t.BGColor&&(this.BGColor=t.BGColor),we.IsNumber(t.ShowMode)&&(this.ShowMode=t.ShowMode))},this.ReloadResource=function(t){this.LineColor=So.RectDrag.LineColor,this.LineWidth=So.RectDrag.LineWidth,this.BGColor=So.RectDrag.BGColor},this.ClearPoint=function(){this.FirstPoint=null,this.SecondPoint=null,this.IsClearCanvas||this.Draw()},this.SetFirstPoint=function(t,e){this.FirstPoint={X:t,Y:e}},this.SetSecondPoint=function(t,e){this.SecondPoint={X:t,Y:e}},this.DrawSelectedBorderMode=function(t){this.Canvas.strokeStyle=this.LineColor,this.Canvas.strokeRect(p(t.Left),p(t.Top),g(t.Width),g(t.Height))},this.DrawUnselectedMaskMode=function(t,e){if(this.BGColor){this.Canvas.save();var a=new Path2D;a.rect(e.Left,e.Top,e.Width,t.Top-e.Top);var i=new Path2D;i.rect(e.Left,t.Top,t.Left-e.Left,t.Height),a.addPath(i);var r=new Path2D;r.rect(t.Right,t.Top,e.Right-t.Right,t.Height),a.addPath(r);var n=new Path2D;n.rect(e.Left,t.Bottom,e.Width,e.Bottom-t.Bottom),a.addPath(n),this.Canvas.clip(a),this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(e.Left,e.Top,e.Width,e.Height),this.Canvas.restore()}this.Canvas.strokeStyle=this.LineColor,this.Canvas.strokeRect(p(t.Left),p(t.Top),g(t.Width),g(t.Height))},this.DrawFullselectedMode=function(t,e){if(this.BGColor){this.Canvas.save();var a=new Path2D;a.rect(e.Left,e.Top,t.Left-e.Left,e.Height);var i=new Path2D;i.rect(t.Right,e.Top,e.Right-t.Right,e.Height),a.addPath(i),this.Canvas.clip(a),this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(e.Left,e.Top,e.Width,e.Height),this.Canvas.restore()}this.Canvas.strokeStyle=this.LineColor,this.Canvas.strokeRect(p(t.Left),p(e.Top),g(t.Width),g(e.Height))},this.Draw=function(){if(this.Enable&&this.HQChart){var t=this.HQChart.GetExtraCanvas(l.RectDragCanvasKey);if(t&&(this.Canvas=t.Canvas,this.HQChart.ClearCanvas(this.Canvas),this.IsClearCanvas=!0,this.FirstPoint||this.SecondPoint)){var e=this.ChartBorder.GetTop(),a=this.ChartBorder.GetBottom(),i=this.ChartBorder.GetLeft(),r=this.ChartBorder.GetRight(),n={Left:i,Top:e,Right:r,Bottom:a};n.Width=n.Right-n.Left,n.Height=n.Bottom-n.Top;var o={Left:Math.min(this.FirstPoint.X,this.SecondPoint.X),Right:Math.max(this.FirstPoint.X,this.SecondPoint.X),Top:Math.min(this.FirstPoint.Y,this.SecondPoint.Y),Bottom:Math.max(this.FirstPoint.Y,this.SecondPoint.Y)};switch(o.Top<e?o.Top=e:o.Top>a&&(o.Top=a),o.Bottom<e?o.Bottom=e:o.Bottom>a&&(o.Bottom=a),o.Left<i?o.Left=i:o.Left>r&&(o.Left=r),o.Right<i?o.Right=i:o.Right>r&&(o.Right=r),o.Width=o.Right-o.Left,o.Height=o.Bottom-o.Top,this.ShowMode){case 1:this.DrawUnselectedMaskMode(o,n);break;case 2:this.DrawFullselectedMode(o,n);break;default:this.DrawSelectedBorderMode(o)}this.IsClearCanvas=!1}}}}function ve(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.ClassName="DepthMapPaint",this.LineColor=So.DepthMapPaint.LineColor,this.AreaColor=I(So.DepthMapPaint.AreaColor),this.TextColor=So.DepthMapPaint.TextColor,this.TextBGColor=So.DepthMapPaint.TextBGColor,this.FrameID=0,this.ID=D(),this.IsDynamic=!1,this.IsCallbackDraw=!0,this.YRange,this.WidthRate=.8,this.IsShow=!0,this.SetOption=function(t){t.FrameID>0&&(this.FrameID=t.FrameID),we.IsObjectExist(t.ID)&&(this.ID=t.ID),t.IsShowCorssCursor&&(this.IsShowCorssCursor=t.IsShowCorssCursor),we.IsNumber(t.WidthRate)&&(this.WidthRate=t.WidthRate)},this.Draw=function(){if(this.Data&&we.IsNonEmptyArray(this.Data)&&this.ChartFrame&&this.ChartFrame.SubFrame&&!(this.ChartFrame.SubFrame.length<=this.FrameID)){var t=!0===this.ChartFrame.IsHScreen,e=this.ChartFrame.SubFrame[this.FrameID].Frame,a=e.ChartBorder,i=a.GetHeightEx(),r=a.GetRight(),n=a.GetTopEx(),o=a.GetBottomEx(),s=this.ChartBorder.Right*this.WidthRate;if(t){r=a.GetBottom(),n=a.GetRight(),o=a.GetLeft();var s=this.Width;s>this.ChartBorder.Bottom&&(s=this.ChartBorder.Bottom)}var l={Left:r,Top:n,Right:r+s,Bottom:o,Height:i,Width:s};this.YRange={Max:null,Min:0};for(var h=0;h<this.Data.length;++h){var u=this.Data[h];this.CalculateYRange(u,this.YRange)}for(var h=0;h<this.Data.length;++h){var u=this.Data[h];u.Height>0&&u.Height<=1?l.Height=i*u.Height:l.Height=i,1==u.Type?(l.Top=n,l.Bottom=n+l.Height,this.DrawUpArea(u,l)):2==u.Type?(l.Bottom=o,l.Top=l.Bottom-l.Height,this.DrawDownArea(u,l)):(l.Top=n,l.Bottom=o,this.DrawDefaultArea(u,l))}}},this.CalculateYRange=function(t,e){for(var a in t.Data){var i=t.Data[a];(null==e.Max||e.Max<i.Y)&&(e.Max=i.Y),(null==e.Min||e.Min>i.Y)&&(e.Min=i.Y)}},this.GetXFromData=function(t,e,a){var i=e.Width*(t-a.Min)/(a.Max-a.Min);return e.Left+i},this.GetYFromData=function(t,e,a,i){if(i){var r=e.Height*(t-a.Min)/(a.Max-a.Min);return e.Bottom-r}var r=e.Height*(t-a.Min)/(a.Max-a.Min);return e.Top+r},this.DrawDefaultArea=function(t,e){for(var a=this.ChartFrame.SubFrame[this.FrameID].Frame,i=t.Range&&t.Range.Y?t.Range.Y:this.YRange,r=[],n=0;n<t.Data.length;++n){var o=t.Data[n],s=this.GetXFromData(o.Y,e,i);if(!(o.X>a.HorizontalMax||o.X<a.HorizontalMin)){var l=a.GetYFromData(o.X);r.push({X:s,Y:l})}}var h=t.LineColor?t.LineColor:this.LineColor,u=t.AreaColor?t.AreaColor:this.AreaColor;r.length>0&&(1==t.DrawType?this.DrawHLine(r,h,e):this.DrawLine(r,h,u,e))},this.DrawUpArea=function(t,e){var a=[];for(var i in t.Data){var r=t.Data[i],n=this.GetXFromData(r.Y,e,t.Range.Y),o=this.GetYFromData(r.X,e,t.Range.X,t.IsASC);a.push({X:n,Y:o})}var s=t.LineColor?t.LineColor:this.LineColor,l=t.AreaColor?t.AreaColor:this.AreaColor;a.length>0&&this.DrawLine(a,s,l,e)},this.DrawDownArea=function(t,e){var a=[];for(var i in t.Data){var r=t.Data[i],n=this.GetXFromData(r.Y,e,t.Range.Y),o=this.GetYFromData(r.X,e,t.Range.X,t.IsASC);a.push({X:n,Y:o})}var s=t.LineColor?t.LineColor:this.LineColor,l=t.AreaColor?t.AreaColor:this.AreaColor;a.length>0&&this.DrawLine(a,s,l,e)},this.DrawHLine=function(t,e,a){var i=!0===this.ChartFrame.IsHScreen;this.Canvas.strokeStyle=e,this.Canvas.beginPath();for(var r=0,n=0;n<t.length;++n){var o=t[n];i||(this.Canvas.moveTo(a.Left,o.Y),this.Canvas.lineTo(o.X,o.Y)),++r}r>0&&this.Canvas.stroke()},this.DrawLine=function(t,e,a,i){var r=!0===this.ChartFrame.IsHScreen,n=!0,o=0;this.Canvas.strokeStyle=e;for(var s in t){var l=t[s];n?(this.Canvas.beginPath(),r?this.Canvas.moveTo(l.Y,l.X):this.Canvas.moveTo(l.X,l.Y),n=!1):r?this.Canvas.lineTo(l.Y,l.X):this.Canvas.lineTo(l.X,l.Y),++o}o>0&&this.Canvas.stroke();var h=t[0],u=t[t.length-1];if(r?(this.Canvas.lineTo(u.Y,i.Left),this.Canvas.lineTo(h.Y,i.Left)):(this.Canvas.lineTo(i.Left,u.Y),this.Canvas.lineTo(i.Left,h.Y)),this.Canvas.closePath(),Array.isArray(a))if(r){var C=this.Canvas.createLinearGradient(this.ChartBorder.GetRightEx(),this.ChartBorder.GetTop(),this.ChartBorder.GetLeft(),this.ChartBorder.GetTop());C.addColorStop(0,a[0]),C.addColorStop(1,a[1]),this.Canvas.fillStyle=C}else{for(var c=this.Canvas.createLinearGradient(i.Right,i.Top,i.Left,i.Top),f=1/a.length,s=0;s<a.length;++s)c.addColorStop(s*f,a[s]);this.Canvas.fillStyle=c}else this.Canvas.fillStyle=a;this.Canvas.fill()},this.GetYValueByXValue=function(t,e){for(var a=[],i=po[e],r=0;r<this.Data.length;++r){var n=this.Data[r];if(0==n.Type&&n.Data&&!(n.Data.length<0)&&0!=n.IsShowCorssCursor){for(var o=!1,s=0;s<n.Data.length;++s){var l=n.Data[s];if(parseInt(l.X*i)==t){o=!0;var h={X:l.X,Y:l.Y,TextColor:n.TextColor?n.TextColor:this.TextColor,TextBGColor:n.TextBGColor?n.TextBGColor:this.TextBGColor};l.YText&&(h.YText=l.YText),a.push(h);break}}if(!o){var u=n.Data[0],C=n.Data[n.Data.length-1];t>u.X*i&&t<C.X*i&&a.push({X:null,Y:null,TextColor:n.TextColor?n.TextColor:this.TextColor,TextBGColor:n.TextBGColor?n.TextBGColor:this.TextBGColor})}}}return a}}function ge(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.ClassName="KLineYAxisBGPaint",this.SplitData=[],this.Font=So.KLineYAxisBGPaint.Font,this.FrameID=0,this.ID=D(),this.IsDynamic=!1,this.IsCallbackDraw=!0,this.IsShow=!0,this.BGWidth=50,this.LineColor=So.KLineYAxisBGPaint.LineColor,this.DiffValutTextColor=So.KLineYAxisBGPaint.DiffValutTextColor,this.DiffValueBGColor=So.KLineYAxisBGPaint.DiffValueBGColor,this.KLineFrame,this.KLineData,this.Range={Max:null,Min:null},this.SetOption=function(t){t&&we.IsNonEmptyArray(t.SplitData)&&(this.SplitData=t.SplitData)},this.Draw=function(){if(this.IsShow&&this.ChartFrame&&this.ChartFrame.SubFrame&&!(this.ChartFrame.SubFrame.length<=this.FrameID)){var t=this.HQChart.ChartPaint[0];if(t){if(!(!0===this.ChartFrame.IsHScreen)){this.KLineFrame=this.ChartFrame.SubFrame[this.FrameID].Frame;var e=this.KLineFrame.ChartBorder,a=this.KLineFrame.DataWidth,i=this.KLineFrame.DistanceWidth,r=this.KLineFrame.XPointCount,n=e.GetBorder(),o=n.LeftEx+i/2+So.FrameLeftMargin,s=n.RightEx;this.KLineData=t.Data;for(var l=null,h=null,u=this.KLineData.DataOffset,C=0;u<this.KLineData.Data.length&&C<r;++u,++C,o+=a+i){var c=this.KLineData.Data[u];if(null!=c.Open&&null!=c.High&&null!=c.Low&&null!=c.Close){if(o+a>s)break;(null==l||l<c.High)&&(l=c.High),(null==h||h>c.Low)&&(h=c.Low)}}we.IsNumber(l)&&we.IsNumber(h)&&(this.Range.Max=l,this.Range.Min=h,this.DrawBackground())}}}},this.DrawBackground=function(){var t=this.Range.Min,e=this.KLineFrame.ChartBorder.GetBorder(),a=this.KLineFrame.GetYFromData(t,!1),i=e.Right,r=i+this.BGWidth;this.Canvas.font=this.Font,this.Canvas.textBaseline="top",this.Canvas.textAlign="left";for(var n=0;n<this.SplitData.length;++n){var o=this.SplitData[n];if(o.Value+t>this.KLineFrame.HorizontalMax)break;var s=this.KLineFrame.GetYFromData(t+o.Value,!1);this.Canvas.fillStyle=o.Color,this.Canvas.fillRect(g(i),g(s),g(r-i),g(a-s)),o.Text&&o.TextColor&&(this.Canvas.fillStyle=o.TextColor,this.Canvas.fillText(o.Text,r+1,s)),a=s}var l=this.Range.Max-this.Range.Min,h=sr(this.HQChart.Symbol),u=l.toFixed(h),C=this.KLineFrame.GetYFromData(this.Range.Max,!1);this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(p(i),p(C)),this.Canvas.lineTo(p(r),p(C)),this.Canvas.stroke();var c=this.Canvas.measureText(u).width+4,f=this.Canvas.measureText("æ").width+2,d={Left:r+1,Top:C-f,Width:c,Height:f};this.DiffValueBGColor&&(this.Canvas.fillStyle=this.DiffValueBGColor,this.Canvas.fillRect(d.Left,d.Top,d.Width,d.Height)),this.Canvas.textBaseline="bottom",this.Canvas.fillStyle=this.DiffValutTextColor,this.Canvas.fillText(u,d.Left+1,C)}}function Te(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.ClassName="BackgroundPaint",this.IsDynamic=!1,this.IsCallbackDraw=!0,this.FrameID=0,this.Data,this.ID=D(),this.ChartSubFrame,this.ChartBorder,this.KData,this.Period,this.XPointCount=0,this.SetOption=function(t){t.FrameID>0&&(this.FrameID=t.FrameID),we.IsObjectExist(t.ID)&&(this.ID=t.ID)},this.Draw=function(){if(this.Data&&this.HQChart&&this.ChartFrame&&this.ChartFrame.SubFrame&&!(this.ChartFrame.SubFrame.length<=this.FrameID)){var t=this.HQChart.ChartPaint[0];if(t&&t.Data&&(this.ChartSubFrame=this.ChartFrame.SubFrame[this.FrameID].Frame,this.ChartBorder=this.ChartSubFrame.ChartBorder,this.KData=t.Data,this.Period=this.HQChart.Period,this.KData&&!(this.KData.Data.length<=0))){var e=!0===this.ChartSubFrame.IsHScreen;this.XPointCount=this.ChartSubFrame.XPointCount;var a=this.ChartSubFrame.XPointCount,i=this.KData.Data[this.KData.DataOffset],r=this.KData.DataOffset+a-1;r>=this.KData.Data.length&&(r=this.KData.Data.length-1);var n=this.KData.Data[r],o=this.GetShowData(i,n);if(o&&!(o.length<=0)){var s=this.BuildKLineMap(),l=this.ChartBorder.GetBottomEx(),h=this.ChartBorder.GetTopEx(),u=this.ChartBorder.GetHeightEx();e&&(h=this.ChartBorder.GetRightEx(),l=this.ChartBorder.GetLeftEx(),u=this.ChartBorder.GetWidthEx());for(var C in o){var c=o[C],f=this.GetBGCoordinate(c,s);if(f){if(Array.isArray(c.Color)){var d;d=e?this.Canvas.createLinearGradient(l,f.Left,h,f.Left):this.Canvas.createLinearGradient(f.Left,h,f.Left,l);var D=1/c.Color.length;for(var C in c.Color)d.addColorStop(C*D,c.Color[C]);this.Canvas.fillStyle=d}else this.Canvas.fillStyle=c.Color;e?this.Canvas.fillRect(g(l),g(f.Left),g(u),g(f.Width)):this.Canvas.fillRect(g(f.Left),g(h),g(f.Width),g(u))}}}}}},this.GetShowData=function(t,e){if(!we.IsNonEmptyArray(this.Data))return null;for(var a=[],i=0;i<this.Data.length;++i){var r=this.Data[i],n={};r.Start.Date>=t.Date&&r.Start.Date<=e.Date&&(n.Start=r.Start),r.End.Date>=t.Date&&r.End.Date<=e.Date&&(n.End=r.End),r.Start.Date<t.Date&&r.End.Date>e.Date&&(n.Start=t,n.End=e),(n.Start||n.End)&&(n.Color=r.Color,a.push(n))}return a},this.BuildKLineMap=function(){var t=!0===this.ChartSubFrame.IsHScreen,e=this.ChartSubFrame.DataWidth,a=this.ChartSubFrame.DistanceWidth,i=this.ChartBorder.GetLeft()+a/2+So.FrameLeftMargin;t&&(i=this.ChartBorder.GetTop()+a/2+So.FrameLeftMargin);var r=this.ChartBorder.GetRight();t&&(r=this.ChartBorder.GetBottom());for(var n={Data:new Vn.default,Start:null,End:null},o=this.KData.DataOffset,s=0;o<this.KData.Data.length&&s<this.XPointCount;++o,++s,i+=e+a){var l=this.KData.Data[o],h=i,u=i+e;if(u>r)break;var C=h+(u-h)/2;0==s&&(n.XLeft=h),n.XRight=u;var c={Index:o,ShowIndex:s,X:C,Right:u,Left:h,Date:l.Date};if(tt.IsMinutePeriod(this.Period,!0)){var f="Date:"+l.Date+" Time:"+l.Time;c.Time=l.Time}else var f="Date:"+l.Date;n.Data.set(f,c),0==s&&(n.Start=c),n.End=c}return n},this.GetBGCoordinate=function(t,e){var a=null,i=null,r=tt.IsMinutePeriod(this.Period,!0),n=!1;if(r?t.Start&&t.End&&t.Start.Date==t.End.Date&&t.Start.Time==t.End.Time&&(n=!0):t.Start&&t.End&&t.Start.Date==t.End.Date&&(n=!0),n){if(r)var o="Date:"+t.Start.Date+" Time:"+t.Start.Time;else var o="Date:"+t.Start.Date;if(!e.Data.has(o))return null;var s=e.Data.get(o);return a=s.Left,i=s.Right,{Left:a,Right:i,Width:i-a}}if(t.Start){if(r)var o="Date:"+t.Start.Date+" Time:"+t.Start.Time;else var o="Date:"+t.Start.Date;if(e.Data.has(o)){var s=e.Data.get(o);a=s.Left}else if(r)if(t.Start.Date<e.Start.Date||t.Start.Date==e.Start.Date&&t.Start.Time<=e.Start.Time)a=e.Start.Left;else{var l=!0,h=!1,u=void 0;try{for(var C,c=(0,Gn.default)(e.Data);!(l=(C=c.next()).done);l=!0){var f=C.value,d=f[1];if(d.Date>t.Start.Date||d.Date==t.Start.Date&&d.Time>t.Start.Time){a=d.Left;break}}}catch(t){h=!0,u=t}finally{try{!l&&c.return&&c.return()}finally{if(h)throw u}}}else if(t.Start.Date<=e.Start.Date)a=e.Start.Left;else{var D=!0,m=!1,p=void 0;try{for(var v,g=(0,Gn.default)(e.Data);!(D=(v=g.next()).done);D=!0){var f=v.value,d=f[1];if(d.Date>t.Start.Date){a=d.Left;break}}}catch(t){m=!0,p=t}finally{try{!D&&g.return&&g.return()}finally{if(m)throw p}}}}else a=e.XLeft;if(t.End){if(r)var o="Date:"+t.End.Date+" Time:"+t.End.Time;else var o="Date:"+t.End.Date;if(e.Data.has(o)){var s=e.Data.get(o);i=s.Right}else if(r){if(t.End.Date<e.Start.Date||t.End.Date==e.Start.Date&&t.End.Time<e.Start.Time)return null;if(t.End.Date<e.End.Date||t.End.Date==e.End.Date&&t.End.Time>=e.End.Time)i=e.End.Right;else{var T=null,I=!0,S=!1,x=void 0;try{for(var b,y=(0,Gn.default)(e.Data);!(I=(b=y.next()).done);I=!0){var f=b.value,d=f[1];if(d.Date>t.End.Date||d.Date==t.End.Date&&d.Time>t.End.Time){i=T;break}T=d.Right}}catch(t){S=!0,x=t}finally{try{!I&&y.return&&y.return()}finally{if(S)throw x}}}}else{if(t.End.Date<e.Start.Date)return null;if(t.End.Date<=e.End.Date)i=e.End.Right;else{var T=null,E=!0,w=!1,F=void 0;try{for(var M,L=(0,Gn.default)(e.Data);!(E=(M=L.next()).done);E=!0){var f=M.value,d=f[1];if(d.Date>t.End.Date){i=T;break}T=d.Right}}catch(t){w=!0,F=t}finally{try{!E&&L.return&&L.return()}finally{if(w)throw F}}}}}else i=e.XRight;return null==a||null==i?null:{Left:a,Right:i,Width:i-a}}}function Ie(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.ClassName="MinuteBackgroundPaint",this.IsDynamic=!0,this.IsCallbackDraw=!1,this.HQChart,this.Data,this.Font=So.DefaultTextFont,this.TextColor=So.DefaultTextColor,this.MerginTop=20,this.ID=D(),this.FrameID=0,this.SetOption=function(t){t&&(t.Font&&(this.Font=t.Font),we.IsObjectExist(t.ID)&&(this.ID=t.ID),t.FrameID>0&&(this.FrameID=t.FrameID),t.MerginTop>0&&(this.MerginTop=t.MerginTop))},this.Draw=function(){if(this.Data&&this.HQChart&&this.ChartFrame&&this.ChartFrame.SubFrame&&!(this.ChartFrame.SubFrame.length<=this.FrameID)){var t=this.ChartFrame.SubFrame[this.FrameID];if(t&&t.Frame){var e=t.Frame,a=this.HQChart.SourceData;if(a){for(var i=e.XPointCount,r=0,n=null,o=new Vn.default,s=a.DataOffset,l=0;s<a.Data.length&&l<i;++s,++l){var h=a.Data[s];h&&(h.Date!=r&&(r=h.Date,n?(n.Right=this.ChartFrame.GetXFromIndex(l-1),o.set(n.Date,n),n={Left:this.ChartFrame.GetXFromIndex(l),Date:h.Date}):n={Left:this.ChartFrame.GetXFromIndex(l),Date:h.Date}))}n&&!n.Right&&(n.Right=this.ChartFrame.GetXFromIndex(i-1),o.set(n.Date,n)),this.Canvas.textAlign="center",this.Canvas.textBaseline="top";for(var u=e.ChartBorder.GetTopEx()+this.MerginTop,s=0;s<this.Data.length;++s){var h=this.Data[s];if(o.has(h.Date)){var n=o.get(h.Date),C=n.Left+(n.Right-n.Left)/2;h.Font?this.Canvas.font=h.Font:this.Canvas.font=this.Font,h.TextColor?this.Canvas.fillStyle=h.TextColor:this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(h.Text,C,u)}}}}}}}function Se(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.ClassName="DragMovePaint",this.DrawAfterTitle=!0,this.IsDynamic=!0,this.Info,this.IsShow=!1,this.Point,this.TextColor=So.DragMovePaint.TextColor,this.Font=So.DragMovePaint.Font,this.ReloadResource=function(t){this.TextColor=So.DragMovePaint.TextColor,this.Font=So.DragMovePaint.Font},this.Clear=function(){this.Info=null,this.IsShow=!1,this.Point=null},this.Draw=function(){if(this.Info&&this.IsShow&&this.Point){var t,e=this.Info.FrameID+1;this.Info.Type==Do.MAIN_KLINE?t="Kçº¿:"+this.Info.Name+", çªå£:"+e:this.Info.Type==Do.OVERLAY_KLINE?t="å å Kçº¿:"+this.Info.Name+", çªå£:"+e:this.Info.Type==Do.MAIN_INDEX?t="ææ :"+this.Info.IndexName+", çªå£:"+e:this.Info.Type==Do.OVERLAY_INDEX?t="å å ææ :"+this.Info.IndexName+", çªå£:"+e:this.Info.Type==Do.OVERLAY_MINUTE?t="èµ°å¿å¾, å å ä»·æ ¼çº¿:"+this.Info.Name+", çªå£:"+e:this.Info.Type==Do.MAIN_MINUTE?t="èµ°å¿å¾, ä»·æ ¼çº¿:"+this.Info.Name+", çªå£:"+e:this.Info.Type==Do.MAIN_AVERAGE_MINUTE?t="èµ°å¿å¾, åçº¿:"+this.Info.Name+", çªå£:"+e:this.Info.Type==Do.MAIN_MINUTE_VOL&&(t="èµ°å¿å¾, æäº¤é:"+this.Info.Name+", çªå£:"+e),t&&(this.Canvas.font=this.Font,this.Canvas.fillStyle=this.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",this.Canvas.fillText(t,this.Point.X,this.Point.Y))}}}function xe(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.ClassName="SessionBreaksPaint",this.IsDynamic=!1,this.IsCallbackDraw=!0,this.FrameID=0,this.KDataFeature,this.Data,this.ChartFrame,this.BGColor=So.SessionBreaksPaint.BGColor.slice(),this.SplitLine={Color:So.SessionBreaksPaint.SplitLine.Color,Width:So.SessionBreaksPaint.SplitLine.Width,Dash:So.SessionBreaksPaint.SplitLine.Dash},this.MapPeriod=new Vn.default([[0,{SplitType:1}],[1,{SplitType:1}],[2,{SplitType:2}],[21,{SplitType:2}],[4,{SplitType:3}],[5,{SplitType:3}],[6,{SplitType:3}],[7,{SplitType:3}],[8,{SplitType:3}]]),this.SetOption=function(t){t.FrameID>0&&(this.FrameID=t.FrameID)},this.Draw=function(){if(this.HQChart){var t=this.HQChart.ChartOperator_Temp_GetHistroyData();if(t&&we.IsNonEmptyArray(t.Data)&&(this.IsKDataChange(t)&&this.BuildCacheData(t),we.IsNonEmptyArray(this.Data))){var e=this.HQChart.Frame.SubFrame[0].Frame,a=!0===this.ChartFrame.IsHScreen,i=e.DataWidth,r=e.DistanceWidth,n=e.XPointCount;if(a)var o=this.ChartBorder.GetHScreenBorder(),s=o.BottomEx,l=o.TopEx+r/2+So.FrameLeftMargin;else var o=this.ChartBorder.GetBorder(),l=o.LeftEx+r/2+So.FrameLeftMargin,s=o.RightEx;for(var h=null,u=[],C=null,c=t.DataOffset,f=0;c<t.Data.length&&f<n;++c,++f,l+=i+r){var d=this.Data[c];if(d){var D=l,m=l+i;if(m>s)break;var p=D-r/2,v=m+r/2,g=d.ID;if(we.IsNumber(g))if(null==h){if(C={Start:{X:p},End:{X:v},ColorIndex:g,Count:1,IsStart:!1,IsEnd:!1},h=g,c-1>=0){var T=this.Data[c-1];T&&T.ID!=g&&(C.IsStart=!0)}}else h!=g?(C.End.X=p,C.IsEnd=!0,u.push(C),C={Start:{X:p},End:{X:v},ColorIndex:g,Count:1,IsStart:!0,IsEnd:!1},h=g):(C.End.X=v,++C.Count)}}C&&C.Count>=2&&u.push(C),this.Canvas.save(),this.DrawBG(u),this.Canvas.restore()}}},this.DrawBG=function(t){if(we.IsNonEmptyArray(t)){var e=!0===this.ChartFrame.IsHScreen;if(e)var a=this.ChartBorder.GetHScreenBorder(),i=a.RightEx,r=a.Left,n=r-i;else var a=this.ChartBorder.GetBorder(),i=a.TopEx,r=a.BottomEx,n=r-i;var o=!1;this.SplitLine.Color&&(o=!0);for(var s=0,l=0;l<t.length;++l){var h=t[l],u=h.Start.X,C=h.End.X,c=h.ColorIndex%this.BGColor.length,f=this.BGColor[c];f&&(this.Canvas.fillStyle=f,e?this.Canvas.fillRect(p(i),p(u),g(n),g(C-u)):this.Canvas.fillRect(p(u),p(i),g(C-u),g(n))),o&&h.IsStart&&(0==s&&this.Canvas.beginPath(),e?(this.Canvas.moveTo(i,p(u)),this.Canvas.lineTo(r,p(u))):(this.Canvas.moveTo(p(u),i),this.Canvas.lineTo(p(u),r)),++s)}o&&s>=1&&(this.SplitLine.Width>=1&&(this.Canvas.linewidth=this.SplitLine.Width),this.SplitLine.Dash&&this.Canvas.setLineDash(this.SplitLine.Dash),this.SplitLine.Color&&(this.Canvas.strokeStyle=this.SplitLine.Color),this.Canvas.stroke())}},this.IsKDataChange=function(t){return!this.KDataFeature||(this.KDataFeature.Symbol!=this.HQChart.Symbol||(this.KDataFeature.Period!=this.HQChart.Period||this.KDataFeature.DataCount!=t.Data.length))},this.BuildCacheData=function(t){var e=this.HQChart.Period;if(!this.MapPeriod.has(e))return this.Data=[],void(this.KDataFeature={Symbol:this.HQChart.Symbol,Period:e,DataCount:t.Data.length});var a=this.MapPeriod.get(e).SplitType,i=0,r=-1;this.Data=[];for(var n=0;n<t.Data.length;++n){var o=t.Data[n];switch(a){case 1:parseInt(o.Date/100)!=parseInt(i/100)&&(i=o.Date,++r),this.Data.push({ID:r,Date:o.Date});break;case 2:parseInt(o.Date/1e4)!=parseInt(i/1e4)&&(i=o.Date,++r),this.Data.push({ID:r,Date:o.Date});break;case 3:o.Date!=i&&(i=o.Date,++r),this.Data.push({ID:r,Date:o.Date})}}this.KDataFeature={Symbol:this.HQChart.Symbol,Period:e,DataCount:t.Data.length}}}function be(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.ClassName="FrameButtomToolbarPaint",this.FrameID=-1,this.FrameGuid=null,this.IsDynamic=!0,this.DrawAfterTitle=!0,this.AryButton=[],this.SelectedID=null,this.AryRectButton=[],this.BGColor=So.FrameButtomToolbar.BGColor,this.BorderColor=So.FrameButtomToolbar.BorderColor,this.ButtonConfig=I(So.FrameButtomToolbar.Button),this.ReloadResource=function(t){this.BGColor=So.FrameButtomToolbar.BGColor,this.BorderColor=So.FrameButtomToolbar.BorderColor,this.ButtonConfig=I(So.FrameButtomToolbar.Button)},this.SetOption=function(t){t&&(we.IsNumber(t.FrameID)&&(this.FrameID=t.FrameID),t.FrameGuid&&(this.FrameGuid=t.FrameGuid),we.IsNonEmptyArray(t.AryButton)&&(this.AryButton=t.AryButton.slice()),t.SelectedID&&(this.SelectedID=t.SelectedID))},this.SetSelectedID=function(t){this.SelectedID=t},this.Draw=function(t,e){this.AryRectButton=[];var a=this.GetFrame();if(a&&!a.IsHScreen&&!a.IsMinSize&&!a.ChartBorder.IsShowTitleOnly){var i=a.ChartBorder.GetBorder(),r={Left:i.Left+1,Right:i.Right-1,Top:i.BottomEx+1,Bottom:i.Bottom-1};if(r.Width=r.Right-r.Left,r.Height=r.Bottom-r.Top,!(r.Height<10)){this.BGColor&&(this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(r.Left,r.Top,r.Width,r.Height));var n=this.GetTitleFont(r.Height-this.ButtonConfig.Mergin.Top-this.ButtonConfig.Mergin.Bottom),o=this.GetSVGFont(r.Height-this.ButtonConfig.Mergin.Top-this.ButtonConfig.Mergin.Bottom);this.Canvas.textBaseline="middle",this.Canvas.textAlign="center",this.Canvas.font=n;for(var s=r.Left,l=0;l<this.AryButton.length;++l){var h=this.AryButton[l];if(!(h.Title||h.SVGButton&&h.SVGButton.Symbol))return;var u=0;h.Title&&(u=this.Canvas.measureText(h.Title).width+2);var C=0;h.SVGButton&&h.SVGButton.Symbol&&(C=this.ButtonConfig.SVG.Size,u>0&&(C+=this.ButtonConfig.SVG.MerginLeft));var c=u+C+this.ButtonConfig.Mergin.Left+this.ButtonConfig.Mergin.Right,f={Left:s,Top:r.Top,Bottom:r.Bottom,Height:r.Height,Width:c};f.Right=f.Left+f.Width;var d=this.ButtonConfig.BGColor.Default,D=this.ButtonConfig.TitleColor.Default;if(t&&t.X>=f.Left&&t.X<f.Right&&t.Y>=f.Top&&t.Y<=f.Bottom&&(d=this.ButtonConfig.BGColor.MoveOn,D=this.ButtonConfig.TitleColor.MoveOn,e&&(e.MouseOnToolbar={Rect:f,Item:h,Frame:a,Point:{X:t.X,Y:t.Y},ID:"TitleButton"})),this.SelectedID&&this.SelectedID==h.ID&&(d=this.ButtonConfig.BGColor.Selected,D=this.ButtonConfig.TitleColor.Selected),d&&(this.Canvas.fillStyle=d,this.Canvas.fillRect(f.Left,f.Top,f.Width,f.Height)),this.ButtonConfig.BorderColor&&(this.Canvas.strokeStyle=this.ButtonConfig.BorderColor,this.Canvas.beginPath(),this.Canvas.moveTo(p(f.Right),f.Top),this.Canvas.lineTo(p(f.Right),f.Bottom),this.Canvas.stroke()),h.Title){this.Canvas.fillStyle=D;var m=f.Left+(f.Width-C)/2,v=f.Top+this.ButtonConfig.Mergin.Top+(f.Height-this.ButtonConfig.Mergin.Top-this.ButtonConfig.Mergin.Bottom)/2;this.Canvas.fillText(h.Title,m,v)}var g=null;if(h.SVGButton&&h.SVGButton.Symbol){this.Canvas.font=o,this.Canvas.fillStyle=D;var m=f.Right-this.ButtonConfig.SVG.Size/2-this.ButtonConfig.Mergin.Right;this.Canvas.fillText(h.SVGButton.Symbol,m,v),this.Canvas.font=n,g={Left:f.Right-this.ButtonConfig.Mergin.Right-this.ButtonConfig.SVG.Size,Top:f.Top,Width:this.ButtonConfig.SVG.Size,Height:this.ButtonConfig.SVG.Size},g.Right=g.Left+g.Width,g.Bottom=g.Top+g.Height}if(u>0&&C>0){var T={Left:f.Left,Top:f.Top,Bottom:f.Bottom};T.Right=T.Left+u+this.ButtonConfig.Mergin.Left+this.ButtonConfig.SVG.MerginLeft/2;var I={Rect:T,ID:h.ID,Data:h,RectCell:f,ButtonType:0};this.AryRectButton.push(I);var g={Left:T.Right,Right:f.Right,Top:f.Top,Bottom:f.Bottom},I={Rect:g,ID:h.ID,Data:h,RectCell:f,ButtonType:1};this.AryRectButton.push(I)}else{var I={Rect:f,ID:h.ID,Data:h,RectCell:f};u>0?I.ButtonType=0:C>0&&(I.ButtonType=1),this.AryRectButton.push(I)}s+=c+1}this.BorderColor&&(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),this.Canvas.moveTo(i.Left,p(i.BottomEx)),this.Canvas.lineTo(i.Right,p(i.BottomEx)),this.Canvas.stroke())}}},this.GetFrame=function(){if(!this.ChartFrame)return null;if(this.FrameID>=0){var t=this.ChartFrame.SubFrame[this.FrameID];return t&&t.Frame?t.Frame:null}return null},this.GetTitleFont=function(t){var e=this.ButtonConfig.Font,a=t*C();return we.IsPlusNumber(e.Size)&&(a=e.Size),a+"px "+e.Family},this.GetSVGFont=function(t){var e=this.ButtonConfig.SVG,a=t*C();return we.IsPlusNumber(e.Size)&&(a=e.Size),a+"px "+e.Family},this.PtInButtons=function(t,e){for(var a=0;a<this.AryRectButton.length;++a){var i=this.AryRectButton[a],r=i.Rect;if(t>r.Left&&t<r.Right&&e>r.Top&&e<r.Bottom){var n=this.GetFrame();return{ID:i.Data.ID,Rect:r,FrameID:this.FrameID,Frame:n,Data:i.Data,ButtonType:i.ButtonType,RectCell:i.RectCell}}}return null}}function ye(){this.PlayList=[],this.Cache=[],this.MinLineHeight=40*C(),this.Height,this.Step=1,this.GetPlayList=function(t){for(var e=t.Canves,a=t.Right,i=t.Left,r=a-i,n=t.IsMoveStep,o=[],s=0,l=0;l<this.PlayList.length;++l){var h=this.PlayList[l],u=this.MinLineHeight;h.Height>this.MinLineHeight&&(u=h.Height);for(var C=!0,c=!1,f=0;f<h.Data.length;++f){var d=h.Data[f],D={X:d.X,Y:s,Text:d.Text,Color:d.Color,Height:u,Font:d.Font,Info:d.Info};o.push(D),n&&(f==h.Data.length-1&&this.Cache.length>0?(C=!1,d.TextWidth||(d.Font&&d.Font.Name?e.font=d.Font.Name:e.font=t.Font,d.TextWidth=e.measureText(D.Text+"ææ").width),d.X>=d.TextWidth&&(C=!0)):0==f&&(c=!1,d.TextWidth||(d.Font&&d.Font.Name?e.font=d.Font.Name:e.font=t.Font,d.TextWidth=e.measureText(D.Text+"ææ").width),d.X>r+d.TextWidth&&(c=!0)),d.X+=this.Step)}if(n&&C&&this.Cache.length>0){var m=this.Cache.shift(),p={X:0,Text:m.Text,Color:m.Color,Font:m.Font,Info:m.Info};h.Data.push(p)}if(n&&c&&h.Data.length>0){var v=h.Data.shift();this.OnItemPlayEnd(t.HQChart,v)}s+=u}return o},this.CacluatePlayLine=function(t){this.Height=t;var e=parseInt(t/this.MinLineHeight);if(this.PlayList.length<e)for(var a=e-this.PlayList.length,i=0;i<a;++i)this.PlayList.push({Data:[]});else if(this.PlayList.length>e)for(var r=this.PlayList.length-e,i=0;i<r;++i)for(var n=this.PlayList.pop(),o=0;o<n.Data.length;++o){var s=n.Data[o],l={Text:s.Text,Color:s.Color,Font:s.Font,Info:s.Info};this.Cache.unshift(l)}Xn.Chart.Log("[BarrageList::CacluatePlayLine] LineCount="+this.PlayList.length+" Height="+this.Height)},this.AddBarrage=function(t){for(var e in t){var a=t[e];this.Cache.push(a)}},this.OnItemPlayEnd=function(t,e){if(t.mapEvent.has(Kn.BARRAGE_PLAY_END)){var a=t.mapEvent.get(Kn.BARRAGE_PLAY_END);a.Callback&&a.Callback(a,e,this)}},this.Count=function(){return this.Cache.length}}function Ee(){this.newMethod=he,this.newMethod(),delete this.newMethod,this.ClassName="BarragePaint",this.IsAnimation=!0,this.IsEraseBG=!0,this.HQChart,this.Font=So.Barrage.Font,this.TextColor=So.Barrage.Color,this.FontHeight=So.Barrage.Height,this.BarrageList=new ye,this.IsMoveStep=!1,this.SetOption=function(t){t&&(t.Step>0&&(this.BarrageList.Step=t.Step),t.MinLineHeight&&(this.Barrage.MinLineHeight=t.MinLineHeight))},this.DrawHScreen=function(){var t=this.ChartBorder.GetWidth(),e=this.ChartBorder.GetTop(),a=this.ChartBorder.GetBottom(),i=this.ChartBorder.GetRightEx();this.ChartBorder.GetChartWidth();t!=this.BarrageList.Height&&this.BarrageList.CacluatePlayLine(t),this.Canvas.textBaseline="middle",this.Canvas.textAlign="left";var r=this.BarrageList.GetPlayList({Canves:this.Canvas,Right:a,Left:e,Font:this.Font,IsMoveStep:this.IsMoveStep,HQChart:this.HQChart});if(this.IsMoveStep=!1,r){this.Canvas.save(),this.Canvas.translate(this.ChartBorder.GetChartHeight(),0),this.Canvas.rotate(90*Math.PI/180);for(var n=0;n<r.length;++n){var o=r[n];o.Color?this.Canvas.fillStyle=o.Color:this.Canvas.fillStyle=this.TextColor,o.Font?this.Canvas.font=o.Font.Name:this.Canvas.font=this.Font;var s=this.FontHeight;o.Font&&o.Font.Height>0&&(s=o.Font.Height);var l=o.Y+parseInt((o.Height-s)/2);this.Canvas.fillText(o.Text,a-o.X,i+l)}this.Canvas.restore()}},this.Draw=function(){if(this.ChartFrame.IsHScreen)return void this.DrawHScreen();var t=this.ChartBorder.GetLeft(),e=this.ChartBorder.GetRight(),a=this.ChartBorder.GetTopEx(),i=this.ChartBorder.GetHeight();i!=this.BarrageList.Height&&this.BarrageList.CacluatePlayLine(i),this.Canvas.textBaseline="middle",this.Canvas.textAlign="left";var r=this.BarrageList.GetPlayList({Canves:this.Canvas,Right:e,Left:t,Font:this.Font,IsMoveStep:this.IsMoveStep,HQChart:this.HQChart});if(this.IsMoveStep=!1,r)for(var n=0;n<r.length;++n){var o=r[n];o.Color?this.Canvas.fillStyle=o.Color:this.Canvas.fillStyle=this.TextColor,o.Font?this.Canvas.font=o.Font.Name:this.Canvas.font=this.Font;var s=this.FontHeight;o.Font&&o.Font.Height>0&&(s=o.Font.Height);var l=o.Y+parseInt((o.Height-s)/2);this.Canvas.fillText(o.Text,e-o.X,a+l)}}}function we(){this.ChartBorder,this.Frame,this.FrameSplitData,this.SplitCount=5,this.StringFormat=0,this.IsShowLeftText=!0,this.IsShowRightText=!0,this.LanguageID=xo.LANGUAGE_CHINESE_ID,this.GetEventCallback,this.GetKLineChartCallback,this.IntegerCoordinateSplit=function(t){var e=this.FrameSplitData.Find(t.Interval);if(!e)return!1;if(t.Interval==e.FixInterval)return!0;var a=t.Max,i=t.Min,r=t.Max/e.FixInterval,n=t.Min/e.FixInterval;we.IsFloat(r)&&(a=parseInt((r+.5).toFixed(0))*e.FixInterval),we.IsFloat(n)&&(i=parseInt((n-.5).toFixed(0))*e.FixInterval),0==t.Min&&(i=0),i<0&&t.Min>0&&(i=0);for(var o=0,s=i;s-a<1e-8;s+=e.FixInterval)++o;return t.Interval=e.FixInterval,t.Max=a,t.Min=i,t.Count=o,!0},this.Filter=function(t,e,a){if(this.SplitCount<=0||t.length<=0||t.length<=this.SplitCount)return t;var i=parseInt(t.length/this.SplitCount);i<=1&&(i=2);var r=[];if(1==a)for(var n=0;n<t.length;n+=i)r.push(t[n]);else for(var n=0;n<t.length;n+=i)n+i>=t.length&&n!=t.length-1?r.push(t[t.length-1]):r.push(t[n]);if(2==this.SplitCount&&r.length>2)for(var n=1;n<r.length-1;++n){var o=r[n];o.Message[0]=null,o.Message[1]=null}if(e){for(var s=!1,n=0;n<r.length;++n){var o=r[n];if(Math.abs(o.Value)<1e-8){s=!0;break}}if(0==s){var l=new F;l.Value=0,l.Message[0]=null,l.Message[1]=null,r.push(l)}}return r},this.RemoveZero=function(t){for(var e=[!0,!0,!0,!0],a=0;a<t.length;++a){var i=t[a],r=i.Message[0];this.IsDecimalZeroEnd(r)||(e[0]=!1);var r=i.Message[1];this.IsDecimalZeroEnd(r)||(e[1]=!1);var r=i.Message[2];this.IsDecimalZeroEnd(r)||(e[2]=!1);var r=i.Message[3];this.IsDecimalZeroEnd(r)||(e[3]=!1)}if(0!=e[0]||0!=e[1]||0!=e[2]||0!=e[3])for(var a=0;a<t.length;++a){var i=t[a];if(e[0]){var r=i.Message[0];null!=r&&("number"==typeof r&&(r=r.toString()),i.Message[0]=r.replace(/[.][0]+/g,""))}if(e[1]){var r=i.Message[1];null!=r&&("number"==typeof r&&(r=r.toString()),i.Message[1]=r.replace(/[.][0]+/g,""))}if(e[2]){var r=i.Message[2];null!=r&&("number"==typeof r&&(r=r.toString()),i.Message[2]=r.replace(/[.][0]+/g,""))}if(e[3]){var r=i.Message[3];null!=r&&("number"==typeof r&&(r=r.toString()),i.Message[3]=r.replace(/[.][0]+/g,""))}}},this.IsDecimalZeroEnd=function(t){if(null==t)return!0;if("number"==typeof t&&(t=t.toString()),"0"==t)return!0;var e=t.search(/[.]/);if(e<0)return!1;for(var a=e+1;a<t.length;++a){var i=t.charAt(a);if(i>="1"&&i<="9")return!1}return!0},this.GetKLinePageInfo=function(){if(!this.GetKLineChartCallback)return null;var t=this.GetKLineChartCallback();if(!(t&&t.Data&&t.Data.DataOffset>=0))return null;if(!we.IsNonEmptyArray(t.Data.Data))return null;var e=t.Data.Data,a=t.Data.DataOffset,i=t.Data.DataOffset+t.ChartFrame.XPointCount-1;return i>=e.length&&(i=e.length-1),{Start:{Item:e[a],Index:a},End:{Item:e[i],Index:i},IsLast:i==e.length-1}},this.CustomLatestIndexDataCoordinate=function(t){var e=this.GetKLinePageInfo();if(e&&this.HQChart){var a=null;this.GetEventCallback&&(a=this.GetEventCallback(Kn.ON_FORMAT_INDEX_Y_LABEL));var i=e.End.Index,r=2;we.IsNumber(this.FloatPrecision)&&(r=this.FloatPrecision);for(var n=0,o=0;n<this.HQChart.ChartPaint.length;++n){var s=this.HQChart.ChartPaint[n];if(s.ChartFrame&&(s.GetItemData&&(s.ChartFrame.Identify==this.Frame.Identify||s.ChartFrame==this.Frame))){var l=s.GetItemData({Index:i});if(!we.IsNonEmptyArray(l))continue;for(o=0;o<l.length;++o){var h=l[o],u=new F;u.Type=1,u.TextColor=So.FrameLatestPrice.TextColor,u.LineColor=h.Color,u.LineType=-1,u.IsLast=e.IsLast,we.IsNumber(t.LineType)&&(u.LineType=t.LineType),u.Value=h.Value;var C=we.FormatValueString(h.Value,r,this.LanguageID);if("left"==t.Position?u.Message[0]=C:u.Message[1]=C,!e.IsLast){var c={};e.IsLast||(c.EmptyBGColor=So.FrameLatestPrice.EmptyBGColor),u.ExtendData={Custom:c}}if(a){var f={PreventDefault:!1,Label:u,Data:h,IndexName:s.IndexName,FrameID:this.Frame.Identify};if(a.Callback(a,f,this),f.PreventDefault)continue}this.Frame.CustomHorizontalInfo.push(u)}}}}},this.CustomLatestOverlayIndexDataCoordinate=function(t){var e=this.GetKLinePageInfo();if(e&&this.OverlayIndex&&we.IsNonEmptyArray(this.OverlayIndex.ChartPaint)){var a=null;this.GetEventCallback&&(a=this.GetEventCallback(Kn.ON_FORMAT_OVERLAY_INDEX_Y_LABEL));var i=e.End.Index,r=2;we.IsNumber(this.FloatPrecision)&&(r=this.FloatPrecision);for(var n=0,o=0;n<this.OverlayIndex.ChartPaint.length;++n){var s=this.OverlayIndex.ChartPaint[n];if(s.ChartFrame&&s.GetItemData){var l=s.GetItemData({Index:i});if(we.IsNonEmptyArray(l))for(o=0;o<l.length;++o){var h=l[o],u=new F;u.Type=1,u.TextColor=So.FrameLatestPrice.TextColor,u.LineColor=h.Color,u.LineType=-1,u.IsLast=e.IsLast,we.IsNumber(t.LineType)&&(u.LineType=t.LineType),u.Value=h.Value;var C=we.FormatValueString(h.Value,r,this.LanguageID);if("left"==t.Position?u.Message[0]=C:u.Message[1]=C,!e.IsLast){var c={};e.IsLast||(c.EmptyBGColor=So.FrameLatestPrice.EmptyBGColor),u.ExtendData={Custom:c}}if(a){var f={PreventDefault:!1,Label:u,Data:h,IndexName:s.IndexName,OverlayIdentify:this.OverlayIndex.Identify};if(a.Callback(a,f,this),f.PreventDefault)continue}this.Frame.CustomHorizontalInfo.push(u)}}}}},this.InvokeCustomYCoordinateCallback=function(){if(!this.GetEventCallback)return null;var t=this.GetEventCallback(Kn.ON_CREATE_CUSTOM_Y_COORDINATE);if(!t||!t.Callback)return null;var e={ID:this.Frame.Identify,Frame:this.Frame,PreventDefault:!1,Custom:this.Custom};return this.OverlayIdentify&&(e.OverlayIdentify=this.OverlayIdentify),t.Callback(t,e,this),e},this.Reset=function(){},this.SetOption=function(t){},this.ReservedHeight=function(t){if(this.Frame&&!this.Frame.IsHScreen){var e=this.Frame.HorizontalReserved;if(e){var a=0;if(we.IsPlusNumber(e.Top)&&(a+=e.Top),we.IsPlusNumber(e.Bottom)&&(a+=e.Bottom),!(a<=0)){var i=this.Frame.GetBorder(),r=i.TopEx,n=i.BottomEx;if(!(n-r<a)){var o=t.Max,s=t.Min;we.IsPlusNumber(e.Top)&&(r-=e.Top),we.IsPlusNumber(e.Bottom)&&(n+=e.Bottom);var l=(o-s)/(n-r);if(we.IsPlusNumber(e.Top)){o+=l*e.Top}if(we.IsPlusNumber(e.Bottom)){s-=l*e.Bottom}t.Max=o,t.Min=s,this.Frame.HorizontalMax=t.Max,this.Frame.HorizontalMin=t.Min}}}}}}function Fe(){this.newMethod=we,this.newMethod(),delete this.newMethod,this.CoordinateType=0,this.Symbol,this.Data,this.FrameSplitData2,this.FloatPrecision=null,this.Period,this.KLineChart,this.Custom=[],this.SplitType=0,this.DefaultSplitType=0,this.DefaultYMaxMin,this.FixedYMaxMin,this.EnableZoomUpDown=!1,this.LastMaxMin,this.PercentageTextFormat=0,this.IsEnableDragY=function(){return 0==this.CoordinateType||1==this.CoordinateType},this.Operator=function(){var t={};if(t.Max=this.Frame.HorizontalMax,t.Min=this.Frame.HorizontalMin,t.Count=this.SplitCount,this.Frame.YMaxMin){var e=this.Frame.YMaxMin;we.IsNumber(e.Max)&&we.IsNumber(e.Min)&&(t.Max=e.Max,t.Min=e.Min)}t.Max==t.Min&&(t.Max+=.01*t.Max,t.Min-=.01*t.Min);var a=this.FixedYMaxMin&&we.IsNumber(this.FixedYMaxMin.Max)&&we.IsNumber(this.FixedYMaxMin.Min);if(a)t.Max=this.FixedYMaxMin.Max,t.Min=this.FixedYMaxMin.Min;else if(this.DefaultYMaxMin){var i=this.DefaultYMaxMin;we.IsNumber(i.Max)&&(t.Min>i.Max?t.Min=i.Max:t.Max<i.Max&&(t.Max=i.Max)),we.IsNumber(i.Min)&&(t.Max<i.Min?t.Max=i.Min:t.Min>i.Min&&(t.Min=i.Min))}t.Interval=(t.Max-t.Min)/(t.Count-1);var r=C(),n=this.Frame.ChartBorder.GetChartWidth(),o=n<450*r,s=sr(this.Symbol);o&&wo.IsSHSZIndex(this.Symbol)&&(s=0),null!=this.FloatPrecision&&(s=this.FloatPrecision),Xn.Chart.Log("[FrameSplitKLinePriceY::Operator] Max="+t.Max+" Min="+t.Min+" Count="+t.Count+" isPhoneModel="+o+" defaultfloatPrecision="+s+" "),this.Frame.Logarithmic=null,this.Frame.MultiTextFormat=0;var l=!0;if(t.IsFixedMaxMin=a,t.IsFilter=l,tt.IsTickPeriod(this.Period))this.SplitTickData(t,s),l=t.IsFilter;else if(Fe.SplitCustom)Fe.SplitCustom(this,t,s),l=!1;else switch(this.CoordinateType){case 1:this.SplitPercentage(t,s,a)?(this.Frame.MultiTextFormat=this.PercentageTextFormat,l=!1):this.SplitDefault(t,s,a);break;case 3:this.SplitIncrease(t,s)?l=!1:this.SplitDefault(t,s);break;case 4:this.SplitAverage(t,s),l=!1;break;case 5:this.SplitGoldenSection(t,s),l=!1;break;case 2:this.SplitLogarithmic(t,s)?l=!1:this.SplitDefault(t,s);break;default:1==this.SplitType?(this.SplitFixed(t,s),l=!1):2==this.SplitType?(this.SplitFixedV2(t,s),l=!1):this.SplitDefault(t,s,a)}if(this.CustomCoordinate(s),l&&(this.Frame.HorizontalInfo=this.Filter(this.Frame.HorizontalInfo,!1)),this.Frame.HorizontalMax=t.Max,this.Frame.HorizontalMin=t.Min,1!=this.EnableZoomUpDown||this.FixedYMaxMin||(this.FixedYMaxMin={Max:t.Max,Min:t.Min}),this.ReservedHeight(t),Xn.Chart.Log("[FrameSplitKLinePriceY::Operator] fixed . Max="+t.Max+" Min="+t.Min+" Count="+t.Count),this.GetEventCallback){var h=this.GetEventCallback(Kn.ON_SPLIT_YCOORDINATE);if(h&&h.Callback){var u={ID:this.Frame.Identify,Frame:this.Frame};h.Callback(h,u,this)}}},this.SplitTickData=function(t,e){switch(this.CoordinateType){case 1:this.SplitPercentage(t,e,t.IsFixedMaxMin)?(this.Frame.MultiTextFormat=this.PercentageTextFormat,t.IsFilter=!1):this.SplitDefault(t,e,t.IsFixedMaxMin);break;default:3==this.SplitType?this.SplitTickPrice(t,e):this.SplitDefault(t,e,t.IsFixedMaxMin)}},this.SplitTickPrice=function(t,e){var a=this.KLineChart.GetAllPrice();this.Frame.HorizontalInfo=[];for(var i in a){var r=a[i];this.Frame.HorizontalInfo[i]=new F,this.Frame.HorizontalInfo[i].Value=r,this.IsShowLeftText&&(this.Frame.HorizontalInfo[i].Message[0]=r.toFixed(e)),this.IsShowRightText&&(this.Frame.HorizontalInfo[i].Message[1]=r.toFixed(e))}},this.SplitPercentage=function(t,e,a){var i=this.GetFirstOpenPrice();if(!we.IsNumber(i))return!1;t.Max=(t.Max-i)/i,t.Min=(t.Min-i)/i,t.Interval=(t.Max-t.Min)/(t.Count-1),a||this.IntegerCoordinateSplit2(t);var r,n=(1+t.Min)*i,o=(1+t.Max)*i;if(So.Frame&&So.Frame.PercentageText){var s=So.Frame.PercentageText;r={PriceColor:s.PriceColor,PercentageColor:s.PercentageColor,SplitColor:s.SplitColor,Font:s.Font}}for(var l=[],h=0;h<=t.Max;h+=t.Interval){var u=(h+1)*i,s=new F;if(s.Value=u,this.IsShowLeftText&&(s.Message[0]=u.toFixed(e)),this.IsShowRightText){var C=u.toFixed(e),c=(100*h).toFixed(2);c=we.RemoveZero(c),c+="%",s.Message[1]=[c,C],s.ExtendData=r}l.push(s)}for(var h=-t.Interval;h>=t.Min;h-=t.Interval){var u=(h+1)*i;if(!(u<n||u>o)){var s=new F;if(s.Value=u,this.IsShowLeftText&&(s.Message[0]=u.toFixed(e)),this.IsShowRightText){var C=u.toFixed(e),c=(100*h).toFixed(2);c=we.RemoveZero(c),c+="%",s.Message[1]=[c,C],s.ExtendData=r}l.push(s)}}return l.sort(function(t,e){return t.Value-e.Value}),this.Frame.HorizontalInfo=l,t.Min=n,t.Max=o,!0},this.SplitIncrease=function(t,e){var a=this.GetLast2ndClose();if(!we.IsNumber(a))return!1;this.IntegerCoordinateSplit(t),this.Frame.HorizontalInfo=[];for(var i=So.FrameSplitIncrease.Increase,r=[],n=a;n<t.Max;n*=1+i){var o=new F;o.Value=n;var s=n.toFixed(e);this.IsShowLeftText&&(o.Message[0]=s),this.IsShowRightText&&(o.Message[1]=s),r.push(o)}for(var n=.9*a;n>t.Min;n*=1-i){var o=new F;o.Value=n;var s=n.toFixed(e);this.IsShowLeftText&&(o.Message[0]=s),this.IsShowRightText&&(o.Message[1]=s),r.push(o)}return this.Frame.HorizontalInfo=r,!0},this.SplitAverage=function(t,e){var a=t.Max,i=t.Min;this.Frame.HorizontalInfo=[];for(var r=So.FrameSplitAverage.Count,n=(a-i)/r,o=0;o<=r;++o){var s=new F;s.Value=i+n*o;var l=s.Value.toFixed(e);this.IsShowLeftText&&(s.Message[0]=l),this.IsShowRightText&&(s.Message[1]=l),this.Frame.HorizontalInfo[o]=s}},this.SplitGoldenSection=function(t,e){var a=t.Max,i=t.Min;this.Frame.HorizontalInfo=[];var r=[],n=So.FrameGoldenSection.Golden;for(var o in n){var s=(a-i)*n[o]+i;item=new F,item.Value=s;var l=s.toFixed(e);this.IsShowLeftText&&(item.Message[0]=l),this.IsShowRightText&&(item.Message[1]=l),r.push(item)}this.Frame.HorizontalInfo=r},this.SplitLogarithmic=function(t,e){var a=So.FrameLogarithmic.MinInterval,i=this.GetFirstOpenPrice();if(!we.IsNumber(i))return!1;for(var r=this.ChartBorder.GetHeightEx(),n=[.01,.02,.04,.08,.1,.2],o=n[n.length-1],s=0;s<n.length;++s){var l=n[s];if(i*l*(r/(t.Max-t.Min))>a){o=l;break}}var h=[],u=i,s=o;do{var C={Start:u};u=i*(1+s),C.End=u,h.push(C),s+=o}while(u<t.Max);var c=u,f=[],u=i,s=o;do{var C={End:u};u=i*(1-s),C.Start=u,f.push(C),s+=o}while(u>t.Min);var d=u;t.Max=c,t.Min=d,Xn.Chart.Log("[FrameSplitKLinePriceY::SplitLogarithmic] up, down",h,f),this.Frame.HorizontalInfo=[];var C=new F;C.Value=i,C.Font=So.FrameLogarithmic.OpenPriceFont;var D=C.Value.toFixed(e);this.IsShowLeftText&&(C.Message[0]=D),this.IsShowRightText&&(C.Message[1]=D),this.Frame.HorizontalInfo.push(C);for(var s in h){var C=new F;C.Value=h[s].End;var D=C.Value.toFixed(e);this.IsShowLeftText&&(C.Message[0]=D),this.IsShowRightText&&(C.Message[1]=D),this.Frame.HorizontalInfo.push(C)}for(var s in f){var C=new F;C.Value=f[s].End;var D=C.Value.toFixed(e);this.IsShowLeftText&&(C.Message[0]=D),this.IsShowRightText&&(C.Message[1]=D),this.Frame.HorizontalInfo.splice(0,0,C)}return this.Frame.Logarithmic={Up:h,Down:f,OpenPrice:i},!0},this.SplitDefault=function(t,e,a){a||this.IntegerCoordinateSplit(t),this.Frame.HorizontalInfo=[];for(var i=0,r=t.Min;i<t.Count;++i,r+=t.Interval)this.Frame.HorizontalInfo[i]=new F,this.Frame.HorizontalInfo[i].Value=r,this.IsShowLeftText&&(this.Frame.HorizontalInfo[i].Message[0]=r.toFixed(e)),this.IsShowRightText&&(this.Frame.HorizontalInfo[i].Message[1]=r.toFixed(e))},this.SplitFixed=function(t,e){this.Frame.HorizontalInfo=[];for(var a=0,i=t.Min;a<t.Count;++a,i+=t.Interval)this.Frame.HorizontalInfo[a]=new F,this.Frame.HorizontalInfo[a].Value=i,this.IsShowLeftText&&(this.Frame.HorizontalInfo[a].Message[0]=i.toFixed(e)),this.IsShowRightText&&(this.Frame.HorizontalInfo[a].Message[1]=i.toFixed(e))},this.SplitFixedV2=function(t,e){this.Frame.HorizontalInfo=[];for(var a=0,i=t.Min;a<t.Count;++a,i+=t.Interval)this.Frame.HorizontalInfo[a]=new F,this.Frame.HorizontalInfo[a].Value=i,this.IsShowLeftText&&(this.Frame.HorizontalInfo[a].Message[0]=i.toFixed(e)),this.IsShowRightText&&(this.Frame.HorizontalInfo[a].Message[1]=i.toFixed(e));t.IsFixedMaxMin||(0==e?(t.Max+=1,t.Min-=1):1==e?(t.Max+=.1,t.Min-=.1):2==e&&(t.Max+=.01,t.Min-=.01))},this.CustomCoordinate=function(t){if(!we.IsNumber(t)){var e=C(),a=this.Frame.ChartBorder.GetChartWidth(),i=a<450*e;t=sr(this.Symbol),i&&wo.IsSHSZIndex(this.Symbol)&&(t=0),null!=this.FloatPrecision&&(t=this.FloatPrecision)}this.Frame.CustomHorizontalInfo=[];var r=this.InvokeCustomYCoordinateCallback();if(!r||1!=r.PreventDefault){for(var n,o,s=0;s<this.Custom.length;++s){var l=this.Custom[s];if(l.Type==mo.LATEST_VALUE_ID||l.Type==mo.PAGE_DATA_INCREASE||l.Type==mo.PAGE_LAST_PRICE_ID){var h=t;we.IsNumber(l.FloatPrecision)&&l.FloatPrecision>=0&&(h=l.FloatPrecision);var u=this.GetLatestPrice(h,l);u&&(l.Type==mo.LATEST_VALUE_ID?n=u:l.Type==mo.PAGE_LAST_PRICE_ID?o=u:this.Frame.CustomHorizontalInfo.push(u))}else l.Type==mo.FIXED_VALUE_ID?this.CustomFixedCoordinate(l):l.Type==mo.PAGE_LAST_INDEX_VALUE_ID&&this.CustomLatestIndexDataCoordinate(l)}(n||o)&&(n&&o&&!0===o.IsLast?this.Frame.CustomHorizontalInfo.unshift(n):(n&&this.Frame.CustomHorizontalInfo.unshift(n),o&&this.Frame.CustomHorizontalInfo.push(o)))}},this.GetLatestPrice=function(t,e){if(!this.Data||!this.Data.Data)return null;if(this.Data.Data.length<=0)return null;var a=this.Data.Data[this.Data.Data.length-1],i=!0;if(2==e.Type){var r=this.GetKLinePageInfo();r&&(a=r.End.Item,i=r.IsLast)}var n=new F;n.Type=0,e&&we.IsNumber(e.Type)&&(n.Type=e.Type),n.Value=a.Close,n.TextColor=So.FrameLatestPrice.TextColor,n.LineType=2;var o=a.Close.toFixed(t);if(a.Close>a.Open?n.LineColor=So.FrameLatestPrice.UpBarColor:a.Close<a.Open?n.LineColor=So.FrameLatestPrice.DownBarColor:n.LineColor=So.FrameLatestPrice.UnchagneBarColor,3==e.Type){var r=this.GetKLinePageInfo();if(r&&we.IsNumber(r.Start.Item.YClose)){var s=(r.End.Item.Close-r.Start.Item.YClose)/r.Start.Item.YClose*100,o=s.toFixed(2)+"%";n.LineColor=s>0?So.FrameLatestPrice.UpBarColor:s<0?So.FrameLatestPrice.DownBarColor:So.FrameLatestPrice.UnchagneBarColor,n.Value=r.End.Item.Close,i=r.IsLast}}if("HH:MM"==e.DateTime&&tt.IsMinutePeriod(this.Period,!0)){var l=we.FormatTimeString(a.Time,e.DateTime),h=[{Text:o},{Text:l}];"left"==e.Position?n.Message[0]=h:n.Message[1]=h}else if(we.IsBool(e.CountDown)){var h=[{Text:o},{Type:1}];"left"==e.Position?n.Message[0]=h:n.Message[1]=h}else"left"==e.Position?n.Message[0]=o:n.Message[1]=o;if(we.IsNumber(e.LineType)&&(n.LineType=e.LineType),we.IsPlusNumber(e.LineWidth)&&(n.LineWidth=e.LineWidth),e.LineDash&&(n.LineDash=e.LineDash),0==e.IsShowLine&&(n.LineType=-1),n.IsLast=i,!i||1===e.PositionEx){var u={};i||(u.EmptyBGColor=So.FrameLatestPrice.EmptyBGColor),1===e.PositionEx&&(u.Position=1),n.ExtendData={Custom:u}}return n},this.GetFirstOpenPrice=function(){if(!this.Data)return null;for(var t=this.Frame.XPointCount,e=this.Data.DataOffset,a=0;e<this.Data.Data.length&&a<t;++e,++a){var i=this.Data.Data[e];if(null!=i.Open&&null!=i.High&&null!=i.Low&&null!=i.Close)return tt.IsTickPeriod(this.Period)?i.YClose:i.Open}return null},this.GetLast2ndClose=function(){if(!this.Data)return null;if(this.Data.Data.length<=0)return null;var t=this.Frame.XPointCount,e=this.Data.DataOffset+t-1;e>=this.Data.Data.length&&(e=this.Data.Data.length-1);for(var a=null,i=e,r=0;i>=0&&i<this.Data.Data.length;--i){var n=this.Data.Data[i];if(null!=n.Open&&null!=n.High&&null!=n.Low&&null!=n.Close&&(0==r?a=n.Open:1==r&&(a=n.Close),++r>=2))break}return a},this.CustomFixedCoordinate=function(t){for(var e=sr(this.Symbol),a=0;a<t.Data.length;++a){var i=t.Data[a],r=new F;r.Type=1,r.TextColor=i.TextColor,r.LineColor=i.Color,r.LineType=2,we.IsNumber(t.LineType)&&(r.LineType=t.LineType),we.IsPlusNumber(t.LineWidth)&&(r.LineWidth=t.LineWidth),t.LineDash&&(r.LineDash=t.LineDash),0==t.IsShowLine&&(r.LineType=-1),r.Value=i.Value;var n;n=i.Text?i.Text:r.Value.toFixed(e),"left"==t.Position?r.Message[0]=n:r.Message[1]=n,1===t.PositionEx&&(r.ExtendData={Custom:{Position:1}}),we.IsNonEmptyArray(i.ExtendLine)&&(r.ExtendLine=i.ExtendLine.slice()),this.Frame.CustomHorizontalInfo.push(r)}},this.IntegerCoordinateSplit2=function(t){var e=this.FrameSplitData2.Find(t.Interval);if(!e)return!1;if(t.Interval==e.FixInterval)return!0;var a=parseInt((t.Max/e.FixInterval+.5).toFixed(0))*e.FixInterval,i=parseInt((t.Min/e.FixInterval-.5).toFixed(0))*e.FixInterval;0==t.Min&&(i=0),i<0&&t.Min>0&&(i=0);for(var r=0,n=i;n-a<1e-8;n+=e.FixInterval)++r;return t.Interval=e.FixInterval,t.Max=a,t.Min=i,t.Count=r,!0}}function Me(){this.newMethod=we,this.newMethod(),delete this.newMethod,this.SplitCount=3,this.FloatPrecision=2,this.FLOATPRECISION_RANGE=[1,.1,.01,.001,1e-4],this.SplitType=0,this.FilterType=0,this.DefaultSplitType=0,this.Custom=[],this.DefaultYMaxMin,this.EnableRemoveZero=So.Frame.EnableRemoveZero,this.LineType=null,this.IgnoreYValue=null,this.FixedYMaxMin,this.EnableZoomUpDown=!1,this.IsBeforeData=!1,this.BeforeOpenData,this.IsAfterData=!1,this.AfterCloseData,this.ShareAfterVol=0,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.OverlayIdentify,this.HQChart,this.OverlayIndex,this.IsEnableDragY=function(){return!0},this.Reset=function(){this.EnableRemoveZero=So.Frame.EnableRemoveZero,this.StringFormat=So.Frame.StringFormat},this.SetOption=function(t){t&&(we.IsNumber(t.FloatPrecision)&&(this.FloatPrecision=t.FloatPrecision),we.IsNumber(t.StringFormat)&&(this.StringFormat=t.StringFormat),we.IsBool(t.EnableRemoveZero)&&(this.EnableRemoveZero=t.EnableRemoveZero))},this.GetFloatPrecision=function(t,e){if(t>this.FLOATPRECISION_RANGE[0])return e;if(e<0)return 2;for(;e<this.FLOATPRECISION_RANGE.length&&!(t>this.FLOATPRECISION_RANGE[e]);++e);return e},this.Operator=function(){var t={};if(t.Max=this.Frame.HorizontalMax,t.Min=this.Frame.HorizontalMin,this.Frame.YMaxMin){var e=this.Frame.YMaxMin;we.IsNumber(e.Max)&&we.IsNumber(e.Min)&&(t.Max=e.Max,t.Min=e.Min)}t.Max==t.Min&&(0==t.Max?(t.Max=1,t.Min=-1):(t.Max+=.01*t.Max,t.Min-=.01*t.Min));var a=!1;if(this.FixedYMaxMin&&we.IsNumber(this.FixedYMaxMin.Max)&&we.IsNumber(this.FixedYMaxMin.Min)&&(a=!0),a)t.Max=this.FixedYMaxMin.Max,t.Min=this.FixedYMaxMin.Min;else if(this.DefaultYMaxMin){var i=this.DefaultYMaxMin;we.IsNumber(i.Max)&&(t.Min>i.Max?t.Min=i.Max:t.Max<i.Max&&(t.Max=i.Max)),we.IsNumber(i.Min)&&(t.Max<i.Min?t.Max=i.Min:t.Min>i.Min&&(t.Min=i.Min))}if(this.Frame.YSpecificMaxMin?(t.Count=this.Frame.YSpecificMaxMin.Count,t.Interval=(t.Max-t.Min)/(t.Count-1)):1==this.SplitType||a?(t.Count=this.SplitCount,t.Interval=(t.Max-t.Min)/(t.Count-1)):2==this.SplitType?(t.Max=100,t.Min=0,t.Count=this.SplitCount,t.Interval=(t.Max-t.Min)/(t.Count-1)):(t.Count=this.SplitCount,t.Interval=(t.Max-t.Min)/(t.Count-1),this.IntegerCoordinateSplit(t)),this.Frame.HorizontalMax=t.Max,this.Frame.HorizontalMin=t.Min,this.Frame.HorizontalInfo=[],this.Frame.YSplitScale)for(var r in this.Frame.YSplitScale){var n=this.Frame.YSplitScale[r],o=new F;o.Value=n,we.IsNumber(this.LineType)&&(o.LineType=this.LineType);var s=Math.abs(n);if(s<1e-10)o.Message[1]=0;else if(s<this.FLOATPRECISION_RANGE[this.FLOATPRECISION_RANGE.length-1])o.Message[1]=n.toExponential(2).toString();else{var l=this.GetFloatPrecision(s,this.FloatPrecision);o.Message[1]=we.FormatValueString(n,l,this.LanguageID)}o.Message[0]=o.Message[1],0==this.IsShowLeftText&&(this.Frame.HorizontalInfo[r].Message[0]=null),0==this.IsShowRightText&&(this.Frame.HorizontalInfo[r].Message[1]=null),this.Frame.HorizontalInfo.push(o)}else for(var r=0,n=t.Min;r<t.Count;++r,n+=t.Interval){var o=new F;this.Frame.HorizontalInfo[r]=o,o.Value=n,we.IsNumber(this.LineType)&&(o.LineType=this.LineType);var h=this.FormatValueString(n);this.Frame.HorizontalInfo[r].Message[0]=this.Frame.HorizontalInfo[r].Message[1]=h,0==this.IsShowLeftText&&(this.Frame.HorizontalInfo[r].Message[0]=null),0==this.IsShowRightText&&(this.Frame.HorizontalInfo[r].Message[1]=null)}if(this.FilterIgnoreYValue(),this.CustomCoordinate(),1!=this.SplitType&&(this.Frame.HorizontalInfo=this.Filter(this.Frame.HorizontalInfo,t.Max>0&&t.Min<0,this.FilterType)),this.RightFrameSplitY(),this.MainOverlayFrameSplitY(),this.CallAcutionSplitY(this.SplitCount,t),this.EnableRemoveZero&&this.RemoveZero(this.Frame.HorizontalInfo),this.DynamicMessageText(),this.Frame.HorizontalMax=t.Max,this.Frame.HorizontalMin=t.Min,1!=this.EnableZoomUpDown||this.FixedYMaxMin||(this.FixedYMaxMin={Max:t.Max,Min:t.Min}),this.ReservedHeight(t),this.GetEventCallback){var u=this.GetEventCallback(Kn.ON_SPLIT_YCOORDINATE);if(u&&u.Callback){var C={ID:this.Frame.Identify,Frame:this.Frame};this.OverlayIdentify&&(C.OverlayIdentify=this.OverlayIdentify),u.Callback(u,C,this)}}},this.FormatValueString=function(t){var e;if(1==this.StringFormat){var a=this.FloatPrecision;we.IsNumber(t)&&Math.abs(t)>1e3&&(a=0),e=we.FormatValueString(t,a,this.LanguageID)}else if(2==this.StringFormat)e=""+t.toFixed(this.FloatPrecision);else{var i=Math.abs(t);if(i<1e-10)e=0;else if(i<this.FLOATPRECISION_RANGE[this.FLOATPRECISION_RANGE.length-1])e=t.toExponential(2).toString();else{var a=this.GetFloatPrecision(i,this.FloatPrecision);e=we.FormatValueString(t,a,this.LanguageID)}}return e},this.FilterIgnoreYValue=function(){if(this.IgnoreYValue&&!(this.IgnoreYValue.length<=0)){var t=new Rn.default(this.IgnoreYValue);this.Frame.HorizontalInfo=this.Frame.HorizontalInfo.filter(function(e){return!t.has(e.Value)})}},this.DynamicMessageText=function(){if(2==this.SplitType)for(var t=0;t<this.Frame.HorizontalInfo.length;++t){var e=this.Frame.HorizontalInfo[t];e.Message[0]&&(e.Message[0]+="%"),e.Message[1]&&(e.Message[1]+="%")}},this.CallAcutionSplitY=function(t,e){if(1!=this.Frame.Identify)return null;var a=this.GetCallAcutionSplitY(t,e);if(a){for(var i=0;i<this.Frame.HorizontalInfo.length;++i){var r=this.Frame.HorizontalInfo[i];a.IsBeforeData&&(r.Message[2]=r.Message[0],r.Message[0]=null),!a.IsAfterData||0!=this.ShareAfterVol&&2!=this.ShareAfterVol||(r.Message[3]=r.Message[1],r.Message[1]=null)}for(var i=0;i<a.HorizontalInfo.length;++i){var r=a.HorizontalInfo[i];this.Frame.HorizontalInfo.push(r)}}},this.GetCallAcutionSplitY=function(t,e){if(1!=this.Frame.Identify)return null;var a=1==this.IsBeforeData&&this.BeforeOpenData&&(2==this.BeforeOpenData.Ver||3==this.BeforeOpenData.Ver),i=1==this.IsAfterData&&this.AfterCloseData&&(2==this.AfterCloseData.Ver||3==this.AfterCloseData.Ver);if(a||i){var r=(e.Max-e.Min)/(t-1);if(a)var n=(this.BeforeOpenData.VolMax-this.BeforeOpenData.VolMin)/(t-1);if(i)var o=(this.AfterCloseData.VolMax-this.AfterCloseData.VolMin)/(t-1);for(var s=[],l=0;l<t;++l){var h=new F,u=r*l;if(h.Value=u,h.LineType=8,a){var C=n*l;h.Message[0]=this.FormatValueString(C)}if(i&&(0==this.ShareAfterVol||2==this.ShareAfterVol)){var c=o*l;h.Message[1]=this.FormatValueString(c)}s.push(h)}return{HorizontalInfo:s,IsBeforeData:a,IsAfterData:i}}var f=!1,n=null;if(this.MultiDayBeforeOpenData&&we.IsNonEmptyArray(this.MultiDayBeforeOpenData)){f=!0;var d=this.MultiDayBeforeOpenData[0];if(2==d.Ver||3==d.Ver)var n=(d.VolMax-d.VolMin)/(t-1)}var D=!1,o=null;if(this.MultiDayAfterCloseData&&we.IsNonEmptyArray(this.MultiDayAfterCloseData)){D=!0;var d=this.MultiDayAfterCloseData[0];if(2==d.Ver||3==d.Ver)var o=(d.VolMax-d.VolMin)/(t-1)}if(f||D){for(var r=(e.Max-e.Min)/(t-1),s=[],l=0;l<t;++l){var h=new F,u=r*l;h.Value=u,h.LineType=9;var m=!1;if(null!=n){var C=n*l;h.Message[0]=this.FormatValueString(C),m=!0}if(null!=o&&(0==this.ShareAfterVol||2==this.ShareAfterVol)){var c=o*l;h.Message[1]=this.FormatValueString(c),m=!0}m&&s.push(h)}if(we.IsNonEmptyArray(s))return{HorizontalInfo:s,IsBeforeData:f,IsAfterData:D}}return null},this.RightFrameSplitY=function(){if(this.Frame.RightFrame){var t=this.Frame.RightFrame;t.YSplitOperator&&t.YSplitOperator.Operator();for(var e=0;e<this.Frame.HorizontalInfo.length;++e){var a=this.Frame.HorizontalInfo[e],i=this.Frame.GetYFromData(a.Value),r=t.GetYData(i);a.Message[1]=we.FormatValueString(r,this.FloatPrecision,this.LanguageID)}}},this.MainOverlayFrameSplitY=function(){if(this.Frame.GetMainOverlayFrame){var t=this.Frame.GetMainOverlayFrame();if(t){if(t[1]){var e=t[1],a=e.YSplitOperator;a&&a.Operator();for(var i=0;i<this.Frame.HorizontalInfo.length;++i){var r=this.Frame.HorizontalInfo[i],n=this.Frame.GetYFromData(r.Value),o=e.GetYData(n);a&&a.FormatValueString?r.Message[1]=a.FormatValueString(o):r.Message[1]=this.FormatValueString(o)}}if(t[0]){var s=t[0],a=s.YSplitOperator;a&&a.Operator();for(var i=0;i<this.Frame.HorizontalInfo.length;++i){var r=this.Frame.HorizontalInfo[i],n=this.Frame.GetYFromData(r.Value),o=s.GetYData(n);a&&a.FormatValueString?r.Message[0]=a.FormatValueString(o):r.Message[0]=this.FormatValueString(o)}}}}},this.CustomCoordinate=function(){this.Frame.CustomHorizontalInfo=[];var t=this.InvokeCustomYCoordinateCallback();if((!t||1!=t.PreventDefault)&&we.IsNonEmptyArray(this.Custom))for(var e=0;e<this.Custom.length;++e){var a=this.Custom[e];a.Type==mo.PAGE_LAST_INDEX_VALUE_ID?this.CustomLatestIndexDataCoordinate(a):a.Type==mo.FIXED_VALUE_ID?this.CustomFixedCoordinate(a):a.Type==mo.PAGE_LAST_OVERLAY_INDEX_VALUE_ID&&this.CustomLatestOverlayIndexDataCoordinate(a)}},this.CustomFixedCoordinate=function(t){if(we.IsNonEmptyArray(t.Data))for(var e=0;e<t.Data.length;++e){var a=t.Data[e],i=new F;i.Type=1,i.TextColor=a.TextColor,i.LineColor=a.Color,i.LineType=2,we.IsNumber(t.LineType)&&(i.LineType=t.LineType),0==t.IsShowLine&&(i.LineType=-1),i.Value=a.Value;var r;r=a.Text?a.Text:i.Value.toFixed(2),"left"==t.Position?i.Message[0]=r:i.Message[1]=r,this.Frame.CustomHorizontalInfo.push(i)}}}function Le(){this.newMethod=we,this.newMethod(),delete this.newMethod,this.ShowText=!0,this.Period,this.Symbol,this.MinTextDistance=50*C(),this.MinBarDistance=5,this.SplitDateTime=function(){this.Frame.VerticalInfo=[];for(var t=this.Frame.DistanceWidth+this.Frame.DataWidth,e=this.Frame.Data.DataOffset,a=this.Frame.XPointCount,i=0,r=0,n=0,o=e;n<a&&o<this.Frame.Data.Data.length;++n,++o){i+=t,++r;var s=null;if(0==n){s={Value:o-e,Text:we.FormatDateString(this.Frame.Data.Data[o].Date,"MM-DD")}}else if(i>this.MinTextDistance&&r>=this.MinBarDistance){var l=we.FormatTimeString(this.Frame.Data.Data[o].Time);s={Value:o-e,Text:l}}if(s){var h=new F;h.Value=s.Value,this.ShowText&&(h.Message[0]=s.Text),0==h.Value&&(h.LineType=-1),this.Frame.VerticalInfo.push(h),i=0,r=0,0==n&&(i=-this.MinTextDistance/2)}}},this.SplitSecond=function(){this.Frame.VerticalInfo=[];for(var t=this.Frame.DistanceWidth+this.Frame.DataWidth,e=this.Frame.Data.DataOffset,a=this.Frame.XPointCount,i=0,r=0,n=0,o=e;n<a&&o<this.Frame.Data.Data.length;++n,++o){i+=t,++r;var s=null;if(0==n){s={Value:o-e,Text:we.FormatDateString(this.Frame.Data.Data[o].Date,"MM-DD")}}else if(i>this.MinTextDistance&&r>=this.MinBarDistance){var l=we.FormatTimeString(this.Frame.Data.Data[o].Time,"HH:MM:SS");s={Value:o-e,Text:l}}if(s){var h=new F;h.Value=s.Value,this.ShowText&&(h.Message[0]=s.Text),this.Frame.VerticalInfo.push(h),i=0,r=0,0==n&&(i=-this.MinTextDistance/2)}}},this.SplitMilliSecond=function(){this.Frame.VerticalInfo=[];for(var t=this.Frame.DistanceWidth+this.Frame.DataWidth,e=this.Frame.Data.DataOffset,a=this.Frame.XPointCount,i=0,r=0,n=0,o=e;n<a&&o<this.Frame.Data.Data.length;++n,++o){i+=t,++r;var s=null;if(0==n){s={Value:o-e,Text:we.FormatDateString(this.Frame.Data.Data[o].Date,"HH:MM:SS.fff")}}else if(i>this.MinTextDistance&&r>=this.MinBarDistance){var l=we.FormatTimeString(this.Frame.Data.Data[o].Time,"HH:MM:SS.fff");s={Value:o-e,Text:l}}if(s){var h=new F;h.Value=s.Value,this.ShowText&&(h.Message[0]=s.Text),this.Frame.VerticalInfo.push(h),i=0,r=0,0==n&&(i=-this.MinTextDistance/2)}}},this.SplitDate=function(){this.Frame.VerticalInfo=[];for(var t=this.Frame.Data.DataOffset,e=this.Frame.XPointCount,a=null,i=null,r=0,n=0,o=t,s=12;n<e&&o<this.Frame.Data.Data.length;++n,++o){var l=parseInt(this.Frame.Data.Data[o].Date/1e4),h=parseInt(this.Frame.Data.Data[o].Date/100)%100;if(i!=h&&++r,s<12||null!=a&&a==l&&null!=i&&i==h)i=h,++s;else{var u=new F;u.Value=o-t;var C;null==a||a!=l?C=l.toString():null!=i&&i==h||(C=h.toString()+"æ",C=bo.GetText(C,this.LanguageID)),a=l,i=h,this.ShowText&&(u.Message[0]=C),0==u.Value&&(u.LineType=-1),this.Frame.VerticalInfo.push(u),s=0}}0==this.Period&&r<=2&&this.SplitShortDate()},this.SplitShortDate=function(){this.Frame.VerticalInfo=[];for(var t=this.Frame.Data.DataOffset,e=this.Frame.XPointCount,a=!0,i=0,r=t,n=12;i<e&&r<this.Frame.Data.Data.length;++i,++r){var o=parseInt(this.Frame.Data.Data[r].Date/1e4);if(n<12)++n;else{var s=new F;s.Value=r-t;var l;a?(l=o.toString(),a=!1):l=we.FormatDateString(this.Frame.Data.Data[r].Date,"MM-DD"),this.ShowText&&(s.Message[0]=l),0==s.Value&&(s.LineType=-1),this.Frame.VerticalInfo.push(s),n=0}}if(1==this.Frame.VerticalInfo.length){var h=this.Frame.VerticalInfo[0],r=h.Value+t,u=this.Frame.Data.Data[r],l=we.FormatDateString(u.Date,"YYYY-MM");this.ShowText&&(h.Message[0]=l)}},this.Operator=function(){if(null!=this.Frame.Data&&(Le.SplitCustom?Le.SplitCustom(this):tt.IsMinutePeriod(this.Period,!0)?this.SplitDateTime():tt.IsSecondPeriod(this.Period)?this.SplitSecond():tt.IsTickPeriod(this.Period)?this.SplitSecond():tt.IsMilliSecondPeriod(this.Period)?this.SplitMilliSecond():this.SplitDate(),this.GetEventCallback)){var t=this.GetEventCallback(Kn.ON_SPLIT_XCOORDINATE);if(t&&t.Callback){var e={ID:this.Frame.Identify,Frame:this.Frame};t.Callback(t,e,this)}}},this.CreateCoordinateInfo=function(){return new F}}function Ne(){this.newMethod=we,this.newMethod(),delete this.newMethod,this.High=null,this.Low=null,this.YClose,this.Data,this.SourceData,this.OverlayChartPaint,this.SplitCount=7,this.Symbol,this.SplitType=0,this.DefaultSplitType=0,this.LimitPrice,this.Custom,this.RightTextFormat=0,this.BeforeOpenData,this.IsBeforeData=!1,this.AfterCloseData,this.IsAfterData=!1,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.DayOffset,this.AverageData,this.DayCount=1,this.GlobalOption,this.HQChart,this.IsEnableDragY=function(){return!1},this.Operator=function(){if(this.Frame.HorizontalInfo=[],this.Frame.CustomHorizontalInfo=[],this.Data){var t=this.GetMaxMin();if(this.Symbol&&wo.IsUSA(this.Symbol.toUpperCase())?this.USASplit(t):2==this.SplitType?this.USASplit(t):this.DefaultSplit(t),this.CustomCoordinate(),this.ReservedHeight({Max:this.Frame.HorizontalMax,Min:this.Frame.HorizontalMin}),this.GetEventCallback){var e=this.GetEventCallback(Kn.ON_SPLIT_YCOORDINATE);if(e&&e.Callback){var a={ID:this.Frame.Identify,Frame:this.Frame};e.Callback(e,a,this)}}}},this.CustomCoordinate=function(){this.Frame.CustomHorizontalInfo=[];var t=this.InvokeCustomYCoordinateCallback();if((!t||1!=t.PreventDefault)&&this.Custom){var e=sr(this.Symbol);for(var a in this.Custom){var i=this.Custom[a];if(1==i.Type)this.CustomFixedCoordinate(i);else if(0==i.Type){var r=this.GetLatestPrice(e,i);r&&this.Frame.CustomHorizontalInfo.push(r)}}}},this.GetLatestPrice=function(t,e){if(!this.Data||!this.Data.Data)return null;if(this.Data.Data.length<=0)return null;var a=this.Data.Data[this.Data.Data.length-1];if(!we.IsNumber(a)||!we.IsNumber(this.YClose))return null;var i=new F;i.Type=0,i.Value=a,i.TextColor=So.FrameLatestPrice.TextColor,i.LineType=2;var r=a.toFixed(t);if("HH:MM"==e.DateTime){var n=this.Frame.Data.Data[this.Frame.Data.Data.length-1],o=we.FormatTimeString(n.Time,e.DateTime),s=[{Text:r},{Text:o}];"left"==e.Position?i.Message[0]=s:i.Message[1]=s}else"left"==e.Position?i.Message[0]=r:i.Message[1]=r;return a>this.YClose?i.LineColor=So.FrameLatestPrice.UpBarColor:a<this.YClose?i.LineColor=So.FrameLatestPrice.DownBarColor:i.LineColor=So.FrameLatestPrice.UnchagneBarColor,we.IsNumber(e.LineType)&&(i.LineType=e.LineType),we.IsPlusNumber(e.LineWidth)&&(i.LineWidth=e.LineWidth),e.LineDash&&(i.LineDash=e.LineDash),0==e.IsShowLine&&(i.LineType=-1),1===e.PositionEx&&(i.ExtendData={Custom:{Position:1}}),i},this.CustomFixedCoordinate=function(t){for(var e=sr(this.Symbol),a=0;a<t.Data.length;++a){var i=t.Data[a],r=new F;if(r.Type=1,r.TextColor=i.TextColor,r.LineColor=i.Color,r.LineType=2,we.IsNumber(t.LineType)&&(r.LineType=t.LineType),we.IsPlusNumber(t.LineWidth)&&(r.LineWidth=t.LineWidth),t.LineDash&&(r.LineDash=t.LineDash),0==t.IsShowLine&&(r.LineType=-1),1===t.PositionEx&&(r.ExtendData={Custom:{Position:1}}),we.IsNumber(i.Increase)){if(!we.IsNumber(this.YClose))continue;r.Value=this.YClose*(1+i.Increase)}else r.Value=i.Value;var n;n=i.Text?i.Text:r.Value.toFixed(e),"left"==t.Position?r.Message[0]=n:r.Message[1]=n,this.Frame.CustomHorizontalInfo.push(r)}},this.GetCallAuctionMaxMin=function(t,e){for(var a in t.Data){var i=t.Data[a];i&&(we.IsNumber(i.Price)&&(null==e.Max&&(e.Max=i.Price),null==e.Min&&(e.Min=i.Price),e.Max<i.Price&&(e.Max=i.Price),e.Min>i.Price&&(e.Min=i.Price)),3==t.Ver&&we.IsNumber(i.AvPrice)&&(null==e.Max&&(e.Max=i.AvPrice),null==e.Min&&(e.Min=i.AvPrice),e.Max<i.AvPrice&&(e.Max=i.AvPrice),e.Min>i.AvPrice&&(e.Min=i.AvPrice)))}},this.GetMultiDayBeforeOpenData=function(){if(!this.MultiDayBeforeOpenData||!we.IsNonEmptyArray(this.MultiDayBeforeOpenData))return null;if(!this.DayOffset)return this.MultiDayBeforeOpenData;if(!we.IsNumber(this.DayOffset.Offset)||!we.IsNumber(this.DayOffset.ShowDayCount))return null;if(this.GlobalOption&&!0===this.GlobalOption.IsValueFullRange)return this.MultiDayBeforeOpenData;var t=this.DayOffset.ShowDayCount,e=this.DayOffset.Offset;return this.MultiDayBeforeOpenData.slice(e,e+t)},this.GetMultiDayAfterCloseData=function(){if(!this.MultiDayAfterCloseData||!we.IsNonEmptyArray(this.MultiDayAfterCloseData))return null;if(!this.DayOffset)return this.MultiDayAfterCloseData;if(!we.IsNumber(this.DayOffset.Offset)||!we.IsNumber(this.DayOffset.ShowDayCount))return null;if(this.GlobalOption&&!0===this.GlobalOption.IsValueFullRange)return this.MultiDayAfterCloseData;var t=this.DayOffset.ShowDayCount,e=this.DayOffset.Offset;return this.MultiDayAfterCloseData.slice(e,e+t)},this.GetMaxMin=function(){var t=this.YClose,e=this.YClose,a=this.Data,i=!1;if(this.SourceData&&(a=this.SourceData,i=!0),this.DayCount>1){var r=this.DayOffset.DataOffset,n=this.DayOffset.ShowDataCount;this.GlobalOption&&!0===this.GlobalOption.IsValueFullRange&&(r=0,n=a.Data.length);for(var o=r,s=0;o<a.Data.length&&s<n;++o,++s){var l=null;if(i){var h=a.Data[o];l=h.Before?h.Before.Close:h.Close}else l=a.Data[o];null!=l&&(t<l&&(t=l),e>l&&(e=l))}if(this.AverageData)for(var o=r,s=0;o<this.AverageData.Data.length&&s<n;++o,++s)null!=this.AverageData.Data[o]&&(t<this.AverageData.Data[o]&&(t=this.AverageData.Data[o]),e>this.AverageData.Data[o]&&(e=this.AverageData.Data[o]))}else{for(var o=0;o<a.Data.length;++o){var l=null;if(i){var h=a.Data[o];l=h.Before?h.Before.Close:h.Close}else l=a.Data[o];null!=l&&(t<l&&(t=l),e>l&&(e=l))}if(this.AverageData)for(var o=0;o<this.AverageData.Data.length;++o)null!=this.AverageData.Data[o]&&(t<this.AverageData.Data[o]&&(t=this.AverageData.Data[o]),e>this.AverageData.Data[o]&&(e=this.AverageData.Data[o]))}for(var o in this.OverlayChartPaint){var h=this.OverlayChartPaint[o],u=h.GetMaxMin();u.Max&&u.Max>t&&(t=u.Max),u.Min&&u.Min<e&&(e=u.Min)}1==this.SplitType&&this.LimitPrice&&(t<this.LimitPrice.Max&&(t=this.LimitPrice.Max),e>this.LimitPrice.Min&&(e=this.LimitPrice.Min)),we.IsNumber(this.High)&&we.IsNumber(this.Low)&&(t<this.High&&(t=this.High),e>this.Low&&(e=this.Low));var u={Max:null,Min:null};this.IsAfterData&&this.AfterCloseData&&this.GetCallAuctionMaxMin(this.AfterCloseData,u),this.IsBeforeData&&this.BeforeOpenData&&this.GetCallAuctionMaxMin(this.BeforeOpenData,u);var C=this.GetMultiDayBeforeOpenData();if(C&&this.ChartBorder.MultiDayMinute.Count>1&&this.ChartBorder.MultiDayMinute.Left>0)for(var o=0;o<C.length;++o){var c=C[o];this.GetCallAuctionMaxMin(c,u)}var f=this.GetMultiDayAfterCloseData();if(f&&this.ChartBorder.MultiDayMinute.Count>1&&this.ChartBorder.MultiDayMinute.Right>0)for(var o=0;o<f.length;++o){var c=f[o];this.GetCallAuctionMaxMin(c,u)}we.IsNumber(u.Max)&&t<u.Max&&(t=u.Max),we.IsNumber(u.Min)&&e>u.Min&&(e=u.Min);var d=this.GetOverlayMaxMin();return d&&(we.IsNumber(d.Max)&&d.Max>t&&(t=d.Max),we.IsNumber(d.Min)&&d.Min<e&&(e=d.Min)),{Max:t,Min:e}},this.GetOverlayMaxMin=function(){if(!this.HQChart)return null;if(!this.HQChart.Frame||!this.HQChart.Frame.SubFrame)return null;var t=this.HQChart.Frame.SubFrame[0];if(!t)return null;if(!we.IsNonEmptyArray(t.OverlayIndex))return null;for(var e={Max:null,Min:null},a=0;a<t.OverlayIndex.length;++a){var i=t.OverlayIndex[a];if(i&&i.Frame){var r=i.Frame;if(1==r.IsShareY&&!1!==r.IsCalculateYMaxMin)for(var n=0;n<i.ChartPaint.length;++n){var o=i.ChartPaint[n];if(0!=o.IsShow){var s=o.GetMaxMin();null!=s&&null!=s.Max&&null!=s.Min&&((null==e.Max||e.Max<s.Max)&&(e.Max=s.Max),(null==e.Min||e.Min>s.Min)&&(e.Min=s.Min))}}}}return e},this.USASplit=function(t){var e=t.Max,a=t.Min;if(e==a)e+=.1*e,a-=.1*a;else{var i=C(),r=this.Frame.ChartBorder.GetHeight(),n=5*i*(e-a)/r;e+=n,a-=n,a<0&&(a=t.Min)}var o=this.SplitCount,s=(e-a)/(o-1),l=[1,.1,.01,.001,1e-4],h=sr(this.Symbol);s<l[h]&&(s=l[h],e=a+s*o);for(var u=0;u<o;++u){var c=a+s*u;if(!this.YClose||c!=this.YClose){var f=new F;f.Value=c;var d=c.toFixed(h);if(this.IsShowLeftText&&(f.Message[0]=d),this.YClose&&0!=this.YClose){var D=100*(c/this.YClose-1);D>0?f.TextColor=So.UpTextColor:D<0&&(f.TextColor=So.DownTextColor),this.IsShowRightText&&(1==this.RightTextFormat?f.Message[1]=d:f.Message[1]=we.FormatValueString(D,2)+"%")}this.Frame.HorizontalInfo.push(f)}}if(this.YClose>a&&this.YClose<e){var f=new F;f.Value=this.YClose,f.LineType=2,So.FrameDotSplitPen&&(f.LineColor=So.FrameDotSplitPen);var d=this.YClose.toFixed(h);this.IsShowLeftText&&(f.Message[0]=d),this.IsShowRightText&&(1==this.RightTextFormat?f.Message[1]=d:f.Message[1]="0.00%"),this.Frame.HorizontalInfo.push(f)}this.Frame.HorizontalInfo.sort(function(t,e){return t.Value-e.Value}),this.Frame.HorizontalMax=e,this.Frame.HorizontalMin=a},this.DefaultSplit=function(t){var e=t.Max,a=t.Min;if(this.YClose==e&&this.YClose==a)e=this.YClose+.1*this.YClose,a=this.YClose-.1*this.YClose;else{var i=Math.max(Math.abs(this.YClose-e),Math.abs(this.YClose-a));e=this.YClose+i,a=this.YClose-i,a<0&&(a=t.Min)}var r=C(),n=this.Frame.ChartBorder.GetChartWidth(),o=n<450*r;Xn.Chart.Log("[FrameSplitMinutePriceY]max="+e+" min="+a+" isPhoneModel="+o);var s=this.SplitCount,l=(e-a)/(s-1),h=[1,.1,.01,.001,1e-4],u=sr(this.Symbol);o&&wo.IsSHSZIndex(this.Symbol)&&(u=0),l<h[u]&&(l=h[u],e=this.YClose+l*(s-1)/2,a=this.YClose-l*(s-1)/2);for(var c=0;c<s;++c){var f=a+l*c,d=new F;this.Frame.HorizontalInfo[c]=d,d.Value=f;var D=f.toFixed(u);if(this.IsShowLeftText&&(d.Message[0]=D),we.IsNumber(this.YClose)&&0!=this.YClose){var m=100*(f/this.YClose-1);m>0?d.TextColor=So.UpTextColor:m<0&&(d.TextColor=So.DownTextColor),this.IsShowRightText&&(1==this.RightTextFormat?d.Message[1]=D:d.Message[1]=we.FormatValueString(m,2)+"%"),Math.abs(f-this.YClose)<1e-11&&(d.LineType=2,d.TextColor=So.UnchagneTextColor,So.FrameDotSplitPen&&(d.LineColor=So.FrameDotSplitPen))}}this.Frame.HorizontalMax=e,this.Frame.HorizontalMin=a}}function Re(){this.newMethod=we,this.newMethod(),delete this.newMethod,this.ShowText=!0,this.Symbol=null,this.DayCount=1,this.DateFormat=0,this.Operator=function(){this.Frame.VerticalInfo=[];var t=(this.Frame.XPointCount,this.Frame.ChartBorder.GetWidth());!0===this.Frame.IsHScreen&&(t=this.Frame.ChartBorder.GetHeight()),t/=C();var e=Mo,a=e.GetCoordinateData(this.Symbol,t),i=a.Count,r=a.MiddleCount>0?a.MiddleCount:parseInt(i/2),n=a.Data;if(this.Frame.XPointCount=i*this.DayCount,this.Frame.MinuteCount=i,this.Frame.VerticalInfo=[],this.Frame.GlobalOption){var o=this.Frame.GlobalOption;we.IsNumber(o.XDateFormat)&&(this.DateFormat=o.XDateFormat)}if(this.DayCount<=1){this.DayOffset.DataOffset=0,this.DayOffset.ShowDataCount=i,this.DayOffset.PageInfo=null;for(var s=0;s<n.length;++s){var l=new F,o=n[s];So.Minute.FrameSplitTextColor&&(l.TextColor=So.Minute.FrameSplitTextColor),l.Value=o[0],this.ShowText&&(l.Message[0]=o[3]),o[4]&&(l.LineColor=o[4]),o[5]&&(l.TextBGColor=o[5]),this.Frame.VerticalInfo[s]=l}}else{var h=0,u=this.DayData.length;this.DayOffset&&(we.IsNumber(this.DayOffset.Offset)&&(h=this.DayOffset.Offset),we.IsNumber(this.DayOffset.ShowDayCount)&&(u=this.DayOffset.ShowDayCount)),this.DayOffset.DataOffset=h*i,this.DayOffset.ShowDataCount=this.DayOffset.ShowDayCount*i,this.DayOffset.PageInfo={Day:[]};for(var s=this.DayData.length-1-h,c=0;s>=0&&c<u;--s,++c){var l=new F;l.Value=c*i+r,l.LineType=-1,this.ShowText&&(l.Message[0]=this.FormatDate(this.DayData[s].Date),l.BG={Index:{Start:c*i+1,End:(c+1)*i-1},Date:this.DayData[s].Date}),this.Frame.VerticalInfo.push(l);var l=new F;l.Value=(c+1)*i,this.Frame.VerticalInfo.push(l),this.DayOffset.PageInfo.Day.push({Date:this.DayData[s].Date,Index:s})}}if(this.GetEventCallback){var f=this.GetEventCallback(Kn.ON_SPLIT_XCOORDINATE);if(f&&f.Callback){var d={ID:this.Frame.Identify,Frame:this.Frame};f.Callback(f,d,this)}}},this.FormatDate=function(t){switch(this.DateFormat){case 1:return we.FormatDateString(t,"MM/DD");case 2:return we.FormatDateString(t,"MM/DD/W");default:return we.FormatDateString(t,"MM-DD")}}}function Ae(){this.newMethod=we,this.newMethod(),delete this.newMethod,this.ShowText=!0,this.SplitCount=3,this.Symbol,this.LineType=3,this.Operator=function(){var t=this.Frame.VerticalRange;if(t){this.Frame.VerticalInfo=[];var e=2;this.Symbol&&(e=sr(this.Symbol));var a=t.Max,i=t.Min;if(t.Bid)for(var r=(t.Bid.Max-i)/this.SplitCount,n=0;n<this.SplitCount;++n){var o=new F;o.Value=i+r*n,o.Value<=0||(we.IsNumber(this.LineType)&&(o.LineType=this.LineType),this.ShowText&&(o.Message[0]=o.Value.toFixed(e)),this.Frame.VerticalInfo.push(o))}var o=new F;if(o.Value=t.Center,this.Frame.VerticalInfo.push(o),t.Ask)for(var r=(a-t.Ask.Min)/this.SplitCount,n=1;n<=this.SplitCount;++n){var o=new F;o.Value=t.Ask.Min+r*n,we.IsNumber(this.LineType)&&(o.LineType=this.LineType),this.ShowText&&(o.Message[0]=o.Value.toFixed(e)),this.Frame.VerticalInfo.push(o)}if(this.GetEventCallback){var s=this.GetEventCallback(Kn.ON_SPLIT_XCOORDINATE);if(s&&s.Callback){var l={ID:this.Frame.Identify,Frame:this.Frame};s.Callback(s,l,this)}}}}}function Oe(){this.Frame,this.Value,this.Point,this.ClientPos,this.BeforOpeneData,this.AfterCloseData,this.X,this.Item,this.DataIndex,this.DayIndex,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.DayOffset,this.Operator=function(){return this.Item=null,this.DataIndex=null,this.DayIndex=null,2==this.ClientPos?this.GetBeforeOpenXIndex():3==this.ClientPos?this.GetAfterCloseXIndex():this.ClientPos>=200&&this.ClientPos<=299?this.GetMultiDayBeforeOpenXIndex():this.ClientPos>=300&&this.ClientPos<=399&&this.GetMultiDayAfterCloseXIndex()},this.GetBeforeOpenXIndex=function(){if(!we.IsNumber(this.Value))return!1;if(!this.BeforeOpenData||!this.BeforeOpenData.Data)return!1;var t=this.Frame.GetLeftExtendXData(this.Value,this.BeforeOpenData);if((t=parseInt(t.toFixed(0)))>=0&&t<this.BeforeOpenData.Data.length){var e=this.BeforeOpenData.Data[t];if(we.IsNumber(e.Price))return this.Item=e,this.X=this.Value,this.DataIndex=t,!0}t<0?t=0:t>=this.BeforeOpenData.Data.length&&(t=this.BeforeOpenData.Data.length-1);for(var a=-1,i=t;i>=0;--i){var e=this.BeforeOpenData.Data[i];if(we.IsNumber(e.Price)){a=i;break}}if(a<0)for(var i=t+1;i<this.BeforeOpenData.Data.length;++i){var e=this.BeforeOpenData.Data[i];if(we.IsNumber(e.Price)){a=i;break}}return!(a<0)&&(this.Item=e,this.DataIndex=a,this.X=this.Frame.GetLeftExtendXFromIndex(a,this.BeforeOpenData),!0)},this.GetMultiDayBeforeOpenData=function(){if(!this.MultiDayBeforeOpenData||!we.IsNonEmptyArray(this.MultiDayBeforeOpenData))return null;if(this.DayOffset||this.MultiDayBeforeOpenData,!we.IsNumber(this.DayOffset.Offset)||!we.IsNumber(this.DayOffset.ShowDayCount))return null;var t=this.DayOffset.ShowDayCount,e=this.DayOffset.Offset;return this.MultiDayBeforeOpenData.slice(e,e+t)},this.GetMultiDayBeforeOpenXIndex=function(){var t=this.GetMultiDayBeforeOpenData();if(!t||!we.IsNonEmptyArray(t))return!1;var e=this.ClientPos-200;if(e<0||e>=t.length)return!1;var a=t[e],i=this.Frame.GetLeftExtendXData(this.Value,t);if(!i||!we.IsNumber(i.DataIndex))return!1;var r=parseInt(i.DataIndex.toFixed(0)),e=i.DayIndex;if(r>=0&&r<a.Data.length){var n=a.Data[r];if(we.IsNumber(n.Price))return this.Item=n,this.X=this.Value,this.DataIndex=r,this.DayIndex=e,!0}r<0?r=0:r>=a.Data.length&&(r=a.Data.length-1);for(var o=-1,s=r;s>=0;--s){var n=a.Data[s];if(n&&we.IsNumber(n.Price)){o=s;break}}return!(o<0)&&(this.Item=n,this.DataIndex=o,this.DayIndex=e,this.X=this.Frame.GetLeftExtendXFromIndex(o,a),!0)},this.GetAfterCloseXIndex=function(){if(!we.IsNumber(this.Value))return!1;if(!this.AfterCloseData||!this.AfterCloseData.Data)return!1;var t=this.Frame.GetRightExtendXData(this.Value,this.AfterCloseData);if((t=parseInt(t.toFixed(0)))>=0&&t<this.AfterCloseData.Data.length){var e=this.AfterCloseData.Data[t];if(we.IsNumber(e.Price))return this.Item=e,this.X=this.Value,this.DataIndex=t,!0}t<0?t=0:t>=this.AfterCloseData.Data.length&&(t=this.AfterCloseData.Data.length-1);for(var a=-1,i=t;i>=0;--i){var e=this.AfterCloseData.Data[i];if(we.IsNumber(e.Price)){a=i;break}}if(a<0)for(var i=t+1;i<this.AfterCloseData.Data.length;++i){var e=this.AfterCloseData.Data[i];if(we.IsNumber(e.Price)){a=i;break}}return!(a<0)&&(this.Item=e,this.DataIndex=a,this.X=this.Frame.GetRightExtendXFromIndex(a,this.AfterCloseData),!0)},this.GetMultiDayAfterCloseData=function(){if(!this.MultiDayAfterCloseData||!we.IsNonEmptyArray(this.MultiDayAfterCloseData))return null;if(this.DayOffset||this.MultiDayAfterCloseData,!we.IsNumber(this.DayOffset.Offset)||!we.IsNumber(this.DayOffset.ShowDayCount))return null;var t=this.DayOffset.ShowDayCount,e=this.DayOffset.Offset;return this.MultiDayAfterCloseData.slice(e,e+t)},this.GetMultiDayAfterCloseXIndex=function(){var t=this.GetMultiDayAfterCloseData();if(t&&we.IsNonEmptyArray(t)){var e=this.ClientPos-300;if(!(e<0||e>=t.length)){var a=t[e],i=this.Frame.GetRightExtendXData(this.Value,t);if(i){var r=parseInt(i.DataIndex.toFixed(0)),e=i.DayIndex;if(r>=0&&r<a.Data.length){var n=a.Data[r];if(we.IsNumber(n.Price))return this.Item=n,this.X=this.Value,this.DataIndex=r,this.DayIndex=e,!0}r<0?r=0:r>=a.Data.length&&(r=a.Data.length-1);for(var o=-1,s=r;s>=0;--s){var n=a.Data[s];if(n&&we.IsNumber(n.Price)){o=s;break}}return!(o<0)&&(this.Item=n,this.DataIndex=o,this.DayIndex=e,this.X=this.Frame.GetRightExtendXFromIndex(o,a),!0)}}}}}function Pe(){this.ClassName="ChartCorssCursor",this.Frame,this.Canvas,this.HPenColor=So.CorssCursorHPenColor,this.HPenType=0,this.VPenColor=So.CorssCursorVPenColor,this.VPenType=0,this.VLineType=0,this.Font=So.CorssCursorTextFont,this.TextColor=So.CorssCursorTextColor,this.TextBGColor=So.CorssCursorBGColor,this.BorderColor=So.CorssCursorBorderColor,this.XRangeBGColor=So.CorssCursorXRangeBGColor,this.TextHeight=20,this.LastPoint,this.LastValue,this.CursorIndex,this.IsOnlyDrawKLine=!1,this.IsOnlyDrawMinute=!1,this.IsFixXLastTime=!1,this.IsDrawXRangeBG=!1,this.EnableNewIndex=!1,this.CorssCursorIndex,this.PointX,this.PointY,this.StringFormatX,this.StringFormatY,this.ShowTextMode={Left:1,Right:1,Bottom:1},this.TextFormat={Right:0},this.IsShowCorss=!0,this.IsShow=!0,this.IsShowClose=!1,this.ClientPos=-1,this.CallAcutionXOperator,this.EnableKeyboard=!1,this.OnChangeStatusCallback,this.RightButton={Enable:!1,Rect:null,BGColor:So.CorssCursor.RightButton.BGColor,PenColor:So.CorssCursor.RightButton.PenColor,Icon:So.CorssCursor.RightButton.Icon},this.RightMargin={Left:2,Right:2,Top:4,Bottom:3},S(this.RightMargin,So.CorssCursor.RightMargin),this.Close=null,this.Status=0,this.ReloadResource=function(t){this.Font=So.CorssCursorTextFont,this.HPenColor=So.CorssCursorHPenColor,this.VPenColor=So.CorssCursorVPenColor,this.TextColor=So.CorssCursorTextColor,this.TextBGColor=So.CorssCursorBGColor,this.BorderColor=So.CorssCursorBorderColor,this.XRangeBGColor=So.CorssCursorXRangeBGColor},this.GetCloseYPoint=function(t){if(!this.StringFormatX.Data)return null;var e=this.StringFormatX.Data;if(!e.Data||e.Data.length<=0)return null;var a=e.DataOffset+t;if(a>=e.Data.length&&(a=e.Data.length-1),a<0)return null;var i=e.Data[a];return i?(this.Close=i.Close,this.Frame.GetYFromData(this.Close)):null},this.GetMinuteCloseYPoint=function(t){if(this.EnableNewIndex&&this.CorssCursorIndex){if(!this.StringFormatX||!this.StringFormatX.GetMinuteCloseYPoint)return null;var e=this.StringFormatX.GetMinuteCloseYPoint(this.CorssCursorIndex);return e?(this.Close=e.Price,e.Y):null}if(!we.IsNumber(t))return null;if(t=parseInt(t),!this.StringFormatX.Data)return null;var a=this.StringFormatX.Data;if(!a.Data||a.Data.length<=0)return null;var i=a.DataOffset+t;if(i>=a.Data.length&&(i=a.Data.length-1),i<0)return null;var r=a.Data[i];return we.IsNumber(t)?(this.Close=r,this.Frame.GetYFromData(this.Close)):null},this.GetDateTimeRange=function(t,e){if(!we.IsNumber(t))return null;t=parseInt(t);var a=this.StringFormatX.Data;if(!a.Data||a.Data.length<=0)return null;var i=a.DataOffset+t;if(i>=a.Data.length||i<0)return null;if(!this.Frame||!this.Frame.SubFrame[0]||!this.Frame.SubFrame[0].Frame)return null;var r=this.Frame.SubFrame[0].Frame,n=r.DataWidth,o=r.DistanceWidth,s=r.XPointCount,l=a.Data[i];if(!l)return null;for(var h=1e6*l.Date,u=100*parseInt(l.Time/100),C=h+u,c=h+u+59,f=i,d=i;d<a.Data.length;++d){var D=a.Data[d],m=1e6*D.Date+D.Time;if(m>c)break;if(d-a.DataOffset>=s)break;f=d}for(var p=i,d=i;d>=0&&d>=a.DataOffset;--d){var D=a.Data[d],m=1e6*D.Date+D.Time;if(m<C)break;p=d}var v={StartIndex:p,EndIndex:f};return v.XStart=this.Frame.GetXFromIndex(p-a.DataOffset),v.XEnd=this.Frame.GetXFromIndex(f-a.DataOffset),v.XStart-=(o+n)/2,v.XEnd+=(o+n)/2,v},this.FixMinuteLastTimeXPoint=function(t){if(!we.IsNumber(t))return null;if(t=parseInt(t),!this.StringFormatX.Data)return null;var e=this.StringFormatX.Data;if(!e.Data||e.Data.length<=0)return null;var a=e.DataOffset+t;return a<e.Data.length?null:(a=e.Data.length-1,a-=e.DataOffset,{X:this.Frame.GetXFromIndex(a),Index:a})},this.PtInClient=function(t,e){if(this.Canvas.beginPath(),!0===this.Frame.IsHScreen){var a=this.Frame.ChartBorder.GetHScreenBorder();this.Canvas.rect(a.Left,a.TopEx,a.Right-a.Left,a.BottomEx-a.TopEx)}else{var a=this.Frame.ChartBorder.GetBorder();this.Canvas.rect(a.LeftEx,a.Top,a.RightEx-a.LeftEx,a.Bottom-a.Top)}return this.Canvas.isPointInPath(t,e)?1:this.Frame.ChartBorder.LeftExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.Top,a.Right-a.Left,a.TopEx-a.Top):this.Canvas.rect(a.Left,a.Top,a.LeftEx-a.Left,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?2:this.Frame.ChartBorder.RightExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.BottomEx,a.Right-a.Left,a.Bottom-a.BottomEx):this.Canvas.rect(a.RightEx,a.Top,a.Right-a.RightEx,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?3:-1},this.GetFontHeight=function(t){return c(this.Canvas,t,"æ")},this.Draw=function(){if(this.Status=0,this.RightButton.Rect=null,this.LastValue=null,this.LastPoint){this.Close=null;var t=this.LastPoint.X,e=this.LastPoint.Y,a=this.PtInClient(t,e);if(this.PointY=null,this.PointY,this.ClientPos=a,!(a<=0)){if(!0===this.Frame.IsHScreen)return void this.HScreenDraw();var i=this.Frame.ChartBorder.GetBorder(),r=i.Left,n=i.Right,o=i.TopTitle,s=i.Bottom,l=this.Frame.ChartBorder.Right,h=i.ChartWidth;if(this.IsOnlyDrawKLine){if(t=this.Frame.GetXFromIndex(this.CursorIndex),this.IsShowClose){var u=this.GetCloseYPoint(this.CursorIndex);null!=u&&(e=u)}}else if(this.IsOnlyDrawMinute){var u=this.GetMinuteCloseYPoint(this.CursorIndex);null!=u&&(e=u)}if(this.CallAcutionXOperator&&(this.CallAcutionXOperator.Value=t,this.CallAcutionXOperator.Point={X:t,Y:e},this.CallAcutionXOperator.ClientPos=a,this.CallAcutionXOperator.Operator()&&(t=this.CallAcutionXOperator.X)),this.IsFixXLastTime){var c=this.FixMinuteLastTimeXPoint(this.CursorIndex);c&&(t=c.X,this.CursorIndex=c.Index)}if(this.PointY=[[r,e],[n,e]],this.PointX=[[t,o],[t,s]],this.IsShowCorss){var f=null;this.IsDrawXRangeBG&&(f=this.GetDateTimeRange(this.CursorIndex));var d=C();if(1!=this.HPenType&&0!=this.HPenType||(this.Canvas.strokeStyle=this.HPenColor,0==this.HPenType&&this.Canvas.setLineDash([3*d,2*d]),this.Canvas.beginPath(),this.Canvas.moveTo(r,p(e)),this.Canvas.lineTo(n,p(e)),this.Canvas.stroke(),0==this.HPenType&&this.Canvas.setLineDash([])),this.Canvas.save(),this.Canvas.strokeStyle=this.VPenColor,0==this.VPenType)this.Canvas.setLineDash([3*d,2*d]);else if(2==this.VPenType){var D=this.Frame.SubFrame[0].Frame.DataWidth;D>2*d&&(this.Canvas.lineWidth=D)}if(this.Canvas.beginPath(),1==this.VLineType)f&&(this.Canvas.fillStyle=this.XRangeBGColor,this.Canvas.fillRect(f.XStart,i.Top,f.XEnd-f.XStart,i.Bottom-i.Top)),this.Canvas.moveTo(p(t),i.Top),this.Canvas.lineTo(p(t),i.Bottom);else if(this.Frame.SubFrame.length>0)for(var m in this.Frame.SubFrame){var v=this.Frame.SubFrame[m].Frame,T=v.ChartBorder.GetBorder();o=T.TopTitle,s=T.Bottom,f&&(this.Canvas.fillStyle=this.XRangeBGColor,this.Canvas.fillRect(f.XStart,o,f.XEnd-f.XStart,s-o)),this.Canvas.moveTo(p(t),o),this.Canvas.lineTo(p(t),s)}else this.Canvas.moveTo(p(t),o),this.Canvas.lineTo(p(t),s);this.Canvas.stroke(),this.Canvas.restore()}var I=(this.Frame.GetXData(t),{}),S=this.Frame.GetYData(e,I);(this.IsOnlyDrawMinute||this.IsShowClose)&&null!=this.Close&&(S=this.Close),this.LastValue={Y:{Value:S,Extend:I}},this.StringFormatX.Value=this.CursorIndex,this.StringFormatX.Point={X:t,Y:e},this.StringFormatX.ClientPos=a,this.StringFormatY.Value=S,this.StringFormatY.RValue=I.RightYValue,this.StringFormatY.FrameID=I.FrameID,this.StringFormatY.Point={X:t,Y:e},this.StringFormatY.ClientPos=a,this.Canvas.font=this.Font;var x=this.GetFontHeight();if(x>this.TextHeight&&(this.TextHeight=x),(1==this.ShowTextMode.Left&&this.Frame.ChartBorder.Left>=30||2==this.ShowTextMode.Left||1==this.ShowTextMode.Right&&this.Frame.ChartBorder.Right>=30||2==this.ShowTextMode.Right)&&this.StringFormatY.Operator()){var b=this.StringFormatY.Text;this.Canvas.font=this.Font;var y=this.Canvas.measureText(b).width+4,E={Width:y,Height:this.TextHeight,Text:[]},w={Y:e,YValue:S,FrameID:I.FrameID};this.Frame.ChartBorder.Left>=30&&1==this.ShowTextMode.Left?r<y?(this.DrawTextBGRect(p(2),p(e-this.TextHeight/2),g(y),g(this.TextHeight)),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(b,4,e,y)):(this.DrawTextBGRect(r-2,e-this.TextHeight/2,-y,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(b,r-4,e,y)):2==this.ShowTextMode.Left&&(this.DrawTextBGRect(r,e-this.TextHeight/2,y,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(b,r+2,e,y));var F={ShowType:0,Font:this.Font,Color:this.TextColor,Text:[{Text:b,Margin:this.RightMargin}]},M=e-this.TextHeight/2;if(this.StringFormatY.PercentageText&&0==this.TextFormat.Right&&(b=this.StringFormatY.PercentageText+"%",F.Text[0].Text=b),this.StringFormatY.RText&&(b=this.StringFormatY.RText,F.Text[0].Text=b),this.StringFormatY.RComplexText&&we.IsNonEmptyArray(this.StringFormatY.RComplexText.Text)&&(F=this.StringFormatY.RComplexText,F.Font||(F.Font=this.Font),F.Color||(F.Color=this.TextColor)),this.CalculateComplexTextSize(F,E),this.Frame.ChartBorder.Right>=30&&1==this.ShowTextMode.Right){var L=!1,N=null;if(I.FrameID>=0){var v=this.Frame.SubFrame[I.FrameID];if(L=v.OverlayIndex.length>0,N=null,L)for(var m=0;m<=v.OverlayIndex.length;++m){var R=v.OverlayIndex[m];if(R&&R.Frame&&(!1!==R.Frame.IsShow&&R.Frame.GetXHorizontal)){var A=R.Frame.GetXHorizontal();N=A-n;break}}}if(L&&E.Width>N&&N>0){var O=n+N;O>h&&(O=h);var P=O-2-E.Width;this.DrawTextBGRect(P,M,E.Width,E.Height),this.DrawComplexTextV2(P,M,F,E),this.RightButton.Enable&&this.DrawRightButton(M,P,this.TextHeight,this.TextHeight,w)}else if(l<E.Width){var P=h-2-E.Width;this.DrawTextBGRect(P,M,E.Width,E.Height),this.DrawComplexTextV2(P,M,F,E),this.RightButton.Enable&&this.DrawRightButton(M,h-2-E.Width,this.TextHeight,this.TextHeight,w)}else{var P=n+2;this.DrawTextBGRect(P,M,E.Width,E.Height),this.DrawComplexTextV2(P,M,F,E),this.RightButton.Enable&&this.DrawRightButton(M,n+2,this.TextHeight,this.TextHeight,w)}}else if(2==this.ShowTextMode.Right){this.Canvas.fillStyle=this.TextBGColor;var B=n-E.Width;this.DrawTextBGRect(B,M,E.Width,E.Height),this.DrawComplexTextV2(B,M,F,E),this.RightButton.Enable&&this.DrawRightButton(M,B,this.TextHeight,this.TextHeight,w)}}if((1==this.ShowTextMode.Bottom||2==this.ShowTextMode.Bottom||8==this.ShowTextMode.Bottom)&&this.StringFormatX.Operator()){var b=this.StringFormatX.Text;this.Canvas.font=this.Font,this.Canvas.fillStyle=this.TextBGColor;var y=this.Canvas.measureText(b).width+4,_=s+2+this.TextHeight/2,M=s+2,G=!0;if(2==this.ShowTextMode.Bottom)_=s-this.TextHeight/2-2,M=s-this.TextHeight-2;else if(8==this.ShowTextMode.Bottom){var k=this.GetEventCallback(Kn.ON_CUSTOM_CORSSCURSOR_POSITION);if(k&&k.Callback){var V={YCenter:_,YTop:M,Height:this.TextHeight,IsShowText:G};k.Callback(k,V,this),_=V.YCenter,M=V.YTop,G=V.IsShowText}}G&&(t-y/2<3?(this.DrawTextBGRect(t-1,M,y,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(b,t+1,_,y)):t+y/2>=n?(this.DrawTextBGRect(n-y,M,y,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(b,n-2,_,y)):(this.DrawTextBGRect(t-y/2,M,y,this.TextHeight),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(b,t,_,y)))}if(I.FrameID>=0){var v=this.Frame.SubFrame[I.FrameID],A=n;this.Canvas.font=this.Font;for(var m=0;m<v.OverlayIndex.length;++m){var R=v.OverlayIndex[m];if(!1!==R.Frame.IsShow&&R.Frame.GetXHorizontal){A=R.Frame.GetXHorizontal();var S=R.Frame.GetYData(e),b=we.FormatValueString(S,2),y=this.Canvas.measureText(b).width+4;this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(A+1,e-this.TextHeight/2,y,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(b,A+4,e,y)}}}this.Status=1}}},this.DrawComplexTextV2=function(t,e,a,i){this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom";var r=0;if(1==a.ShowType&&(r=a.ShowType),1==r)for(var n=t,o=e,s=0;s<a.Text.length;++s){var l=a.Text[s],h=i.Text[s];l.Font?this.Canvas.font=l.Font:this.Canvas.font=a.Font,l.Color?this.Canvas.fillStyle=l.Color:this.Canvas.fillStyle=a.Color;var u=o+h.Height,C=n;if(l.Margin){var c=l.Margin;we.IsNumber(c.Bottom)&&(u-=c.Bottom),we.IsNumber(c.Left)&&(C+=c.Left)}this.Canvas.fillText(l.Text,C,u,h.Width),o+=h.Height}else for(var f=t,d=e+i.Height,s=0;s<a.Text.length;++s){var l=a.Text[s],h=i.Text[s];l.Font?this.Canvas.font=l.Font:this.Canvas.font=a.Font,l.Color?this.Canvas.fillStyle=l.Color:this.Canvas.fillStyle=a.Color;var u=d,C=f;if(l.Margin){var c=l.Margin;we.IsNumber(c.Bottom)&&(u-=c.Bottom),we.IsNumber(c.Left)&&(C+=c.Left)}this.Canvas.fillText(l.Text,C,u,h.Width),f+=h.Width}},this.CalculateComplexTextSize=function(t,e){if(t&&we.IsNonEmptyArray(t.Text)){var a=0;if(1==t.ShowType&&(a=t.ShowType),1==a){for(var i=0,r=0,n=0;n<t.Text.length;++n){var o=t.Text[n];o.Font?this.Canvas.font=o.Font:this.Canvas.font=t.Font;var s=this.Canvas.measureText(o.Text).width,l=this.Canvas.measureText("æ").width;if(o.Margin){var h=o.Margin;we.IsNumber(h.Left)&&(s+=h.Left),we.IsNumber(h.Right)&&(s+=h.Right),we.IsNumber(h.Top)&&(l+=h.Top),we.IsNumber(h.Bottom)&&(l+=h.Bottom)}e.Text[n]={Width:s,Height:l},i<s&&(i=s),r+=l}e.Width=i,e.Height=r}else{for(var i=0,r=0,n=0;n<t.Text.length;++n){var o=t.Text[n];o.Font?this.Canvas.font=o.Font:this.Canvas.font=t.Font;var s=this.Canvas.measureText(o.Text).width,l=this.Canvas.measureText("æ").width;if(o.Margin){var h=o.Margin;we.IsNumber(h.Left)&&(s+=h.Left),we.IsNumber(h.Right)&&(s+=h.Right),we.IsNumber(h.Top)&&(l+=h.Top),we.IsNumber(h.Bottom)&&(l+=h.Bottom)}e.Text[n]={Width:s,Height:l},i+=s,r<l&&(r=l)}e.Width=i,e.Height=r}}},this.DrawRightButton=function(t,e,a,i,r){this.Canvas.fillStyle=this.RightButton.BGColor;var n={Left:e-a,Top:t,Width:a,Height:i};n.Right=n.Left+n.Width,n.Bottom=n.Top+n.Height,this.RightButton.Rect=n,this.RightButton.Data=r,this.Canvas.fillRect(p(n.Left+1),p(n.Top),g(n.Width),g(n.Height));var o=C(),s=n.Top+3+(n.Height-6)/2,l=n.Left+3+(n.Width-6)/2;if(this.RightButton.Icon){var h=this.RightButton.Icon;this.Canvas.font=h.Size*o+"px "+h.Family,this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=h.Color,this.Canvas.fillText("î£",l,s)}else{this.Canvas.strokeStyle=this.RightButton.PenColor;var u=rtButtom.Left+3,c=rtButtom.Top+3;this.Canvas.save(),this.Canvas.linewidth=1*o,this.Canvas.beginPath(),this.Canvas.moveTo(p(u),p(s)),this.Canvas.lineTo(p(u+n.Width-6),p(s)),this.Canvas.moveTo(p(l),p(c)),this.Canvas.lineTo(p(l),p(c+n.Height-6)),this.Canvas.stroke(),this.Canvas.restore()}},this.PtInButton=function(t,e){if(!this.RightButton.Enable)return null;if(!this.RightButton.Rect)return null;var a=this.RightButton.Rect;return this.Canvas.beginPath(),this.Canvas.rect(a.Left,a.Top,a.Width,a.Height),this.Canvas.isPointInPath(t,e)?{Data:this.RightButton.Data,Rect:a}:void 0},this.DrawTextBGRect=function(t,e,a,i){this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(p(t),p(e),g(a),g(i)),this.BorderColor&&(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(p(t),p(e),g(a),g(i)))},this.HScreenDraw=function(){var t=this.LastPoint.X,e=this.LastPoint.Y;if(this.IsOnlyDrawKLine){if(e=this.Frame.GetXFromIndex(this.CursorIndex),this.IsShowClose){var a=this.GetCloseYPoint(this.CursorIndex);null!=a&&(t=a)}}else if(this.IsOnlyDrawMinute){var a=this.GetMinuteCloseYPoint(this.CursorIndex);null!=a&&(t=a)}var i=this.Frame.ChartBorder.GetHScreenBorder(),r=i.Left,n=i.Right,o=i.Top,s=i.Bottom,l=this.Frame.ChartBorder.Bottom;if(this.CallAcutionXOperator&&(this.CallAcutionXOperator.Value=e,this.CallAcutionXOperator.Point={X:t,Y:e},this.CallAcutionXOperator.ClientPos=this.ClientPos,this.CallAcutionXOperator.Operator()&&(e=this.CallAcutionXOperator.X)),this.PointY=[[r,e],[n,e]],this.PointX=[[t,o],[t,s]],this.IsShowCorss){var h=C();if(this.Canvas.save(),this.Canvas.strokeStyle=this.HPenColor,0==this.HPenType&&this.Canvas.setLineDash([3*h,2*h]),this.Canvas.beginPath(),this.Canvas.moveTo(p(t),o),this.Canvas.lineTo(p(t),s),this.Canvas.stroke(),this.Canvas.restore(),this.Canvas.save(),this.Canvas.strokeStyle=this.VPenColor,0==this.VPenType)this.Canvas.setLineDash([3*h,2*h]);else if(2==this.VPenType){var u=this.Frame.SubFrame[0].Frame.DataWidth;u>2*h&&(this.Canvas.lineWidth=u)}if(this.Canvas.beginPath(),1==this.VLineType)this.Canvas.moveTo(r,p(e)),this.Canvas.lineTo(n,p(e));else if(this.Frame.SubFrame.length>0)for(var c in this.Frame.SubFrame){var f=this.Frame.SubFrame[c].Frame,d=f.ChartBorder.GetHScreenBorder();this.Canvas.moveTo(d.Left,p(e)),this.Canvas.lineTo(d.RightEx,p(e))}else this.Canvas.moveTo(r,p(e)),this.Canvas.lineTo(n,p(e));this.Canvas.stroke(),this.Canvas.restore()}var D=this.Frame.GetXData(e),m={},v=this.Frame.GetYData(t,m);this.StringFormatX.Value=D,this.StringFormatX.Point={X:t,Y:e},this.StringFormatX.ClientPos=this.ClientPos,this.StringFormatY.Value=v,this.StringFormatY.FrameID=m.FrameID,this.StringFormatY.RValue=m.RightYValue,this.StringFormatY.Point={X:t,Y:e},this.StringFormatY.ClientPos=this.ClientPos,this.Canvas.font=this.Font;var g=this.GetFontHeight();if(g>this.TextHeight&&(this.TextHeight=g),(1==this.ShowTextMode.Left&&this.Frame.ChartBorder.Top>=30||2==this.ShowTextMode.Left||1==this.ShowTextMode.Right&&this.Frame.ChartBorder.Bottom>=30||2==this.ShowTextMode.Right)&&this.StringFormatY.Operator()){var T=this.StringFormatY.Text;this.Canvas.font=this.Font;var I=this.Canvas.measureText(T).width+4;if(this.Frame.ChartBorder.Top>=30&&1==this.ShowTextMode.Left){var S=t,x=o;this.Canvas.save(),this.Canvas.translate(S,x),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextBGColor,o>=I?(this.Canvas.fillRect(0,-this.TextHeight/2,-I,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(T,-2,0,I)):(this.Canvas.fillRect(I-o,-this.TextHeight/2,-I,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(T,I-o-2,0,I)),this.Canvas.restore()}else if(2==this.ShowTextMode.Left){var S=t,x=o;this.Canvas.save(),this.Canvas.translate(S,x),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(0,-this.TextHeight/2,I,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(T,2,0,I),this.Canvas.restore()}if(this.StringFormatY.RText){T=this.StringFormatY.RText;var I=this.Canvas.measureText(T).width+4}if(this.Frame.ChartBorder.Bottom>=30&&1==this.ShowTextMode.Right){var S=t,x=s;if(this.Canvas.save(),this.Canvas.translate(S,x),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextBGColor,l>I?(this.Canvas.fillRect(0,-this.TextHeight/2,I,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(T,2,0,I)):(this.Canvas.fillRect(l-I,-this.TextHeight/2,I,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(T,l-I+2,0,I)),this.StringFormatY.RExtendText&&this.StringFormatY.RExtendText.length>0){var b=0;for(var c in this.StringFormatY.RExtendText){var y=this.StringFormatY.RExtendText[c],E="--.--";y.YText?E=y.YText:we.IsNumber(y.Y)&&(E=y.Y.toFixed(0));var w=this.Canvas.measureText(E).width+4;if(this.Canvas.fillStyle=y.TextBGColor,l>w)this.Canvas.fillRect(0,b+this.TextHeight/2,w,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=y.TextColor,this.Canvas.fillText(E,2,b+this.TextHeight,w);else{var F=l-w;this.Canvas.fillRect(F,b+this.TextHeight/2,w,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=y.TextColor,this.Canvas.fillText(E,F+2,b+this.TextHeight,w)}b+=this.TextHeight}}this.Canvas.restore()}else if(2==this.ShowTextMode.Right){var S=t,x=s;this.Canvas.save(),this.Canvas.translate(S,x),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextBGColor,this.Canvas.fillRect(0,-this.TextHeight/2,-I,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(T,-2,0,I),this.Canvas.restore()}}if((1===this.ShowTextMode.Bottom||8==this.ShowTextMode.Bottom)&&this.StringFormatX.Operator()){var T=this.StringFormatX.Text;this.Canvas.font=this.Font,this.Canvas.fillStyle=this.TextBGColor;var I=this.Canvas.measureText(T).width+4,S=r,M=!0;if(8==this.ShowTextMode.Bottom){var L=this.GetEventCallback(Kn.ON_CUSTOM_CORSSCURSOR_POSITION);if(L&&L.Callback){var N={XText:S,Height:this.TextHeight,IsShowText:M};L.Callback(L,N,this),S=N.XText,M=N.IsShowText}}if(M)if(e-I/2<3){var x=e;this.Canvas.save(),this.Canvas.translate(S,x),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillRect(0,0,I,this.TextHeight),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(T,2,this.TextHeight/2,I),this.Canvas.restore()}else if(e+I/2>=s){var x=e;this.Canvas.save(),this.Canvas.translate(S,x),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillRect(-I,0,I,this.TextHeight),this.Canvas.textAlign="right",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(T,-2,this.TextHeight/2,I),this.Canvas.restore()}else{var x=e;this.Canvas.save(),this.Canvas.translate(S,x),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillRect(-I/2,0,I,this.TextHeight),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(T,0,this.TextHeight/2,I),this.Canvas.restore()}}this.Status=1},this.OnKeyDown=function(t){if(this.EnableKeyboard){var e=t.KeyID;if(27==e){if(!this.IsShowCorss)return;this.IsShowCorss=!1,t.Draw=!0,this.OnChangeStatusCallback&&this.OnChangeStatusCallback({Type:1,IsShowCorss:this.IsShowCorss},this)}else if(37==e||39==e){if(this.IsShowCorss)return;this.IsShowCorss=!0,t.Draw=!0,this.OnChangeStatusCallback&&this.OnChangeStatusCallback({Type:1,IsShowCorss:this.IsShowCorss},this)}}}}function Be(){this.Frame,this.HQChart,this.Canvas,this.Data,this.Symbol,this.HPenType=0,this.VPenType=0,this.LineDash=So.DepthCorss.LineDash,this.IsShowTooltip=!0,this.AskColor=So.DepthCorss.AskColor.Line,this.BidColor=So.DepthCorss.BidColor.Line,this.LineWidth=So.DepthCorss.LineWidth,this.ClassName="DepthChartCorssCursor",this.Tooltip={Border:{Top:So.DepthCorss.Tooltip.Border.Top,Left:So.DepthCorss.Tooltip.Border.Left,Right:So.DepthCorss.Tooltip.Border.Right,Bottom:So.DepthCorss.Tooltip.Border.Bottom,ItemSpace:So.DepthCorss.Tooltip.Border.ItemSpace},Font:So.DepthCorss.Tooltip.Font,TextColor:So.DepthCorss.Tooltip.TextColor,BGColor:So.DepthCorss.Tooltip.BGColor},this.Font=So.CorssCursorTextFont,this.TextColor=So.CorssCursorTextColor,this.TextBGColor=So.CorssCursorBGColor,this.TextHeight=20,this.LastPoint,this.PointX,this.PointY,this.StringFormatX,this.StringFormatY,this.IsShowCorss=!0,this.IsShow=!0,this.GetVol=function(t,e){if(!this.Data)return null;var a=e?this.Data.Asks:this.Data.Bids;if(!a||!Array.isArray(a)||a.length<=0)return null;for(var i in a){var r=a[i];if(r.Price==t)return r.Vol}return null},this.Draw=function(){if(this.Status=0,this.LastPoint&&this.Data&&this.IsShow){var t=this.LastPoint.X,e=this.LastPoint.Y,a=!1;if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),a=this.Canvas.isPointInPath(t,e),this.PointY=null,this.PointY,a&&!0!==this.Frame.IsHScreen){var i=this.Frame.ChartBorder.GetLeft(),r=this.Frame.ChartBorder.GetRight(),n=this.Frame.ChartBorder.GetTopTitle(),o=this.Frame.ChartBorder.GetBottom(),s=(this.Frame.ChartBorder.Right,this.Frame.ChartBorder.GetChartWidth(),this.Frame.GetXData(t)),l=this.Frame.GetXFromPrice(s);if(l){var h=this.GetVol(l.Price,l.IsAsk);if(e=this.Frame.GetYFromData(h),l.Vol=h,l.Y=e,this.PointY=[[i,e],[r,e]],this.PointX=[[t,n],[t,o]],this.IsShowCorss){l.IsAsk?this.Canvas.strokeStyle=this.AskColor:this.Canvas.strokeStyle=this.BidColor;var u=this.Canvas.lineWidth,c=C();this.Canvas.lineWidth=this.LineWidth*c;var f=this.Canvas.lineWidth;if(1==this.HPenType||0==this.HPenType){0==this.HPenType&&this.Canvas.setLineDash(this.LineDash);var d=v(f,e);this.Canvas.beginPath(),this.Canvas.moveTo(i,d),this.Canvas.lineTo(r,d),this.Canvas.stroke(),0==this.HPenType&&this.Canvas.setLineDash([])}0==this.VPenType&&this.Canvas.setLineDash(this.LineDash);var D=v(f,l.X);this.Canvas.beginPath(),this.Canvas.moveTo(D,n),this.Canvas.lineTo(D,o),this.Canvas.stroke(),0==this.VPenType&&this.Canvas.setLineDash([]),this.Canvas.lineWidth=u}if(this.HQChart){var m=this.HQChart.GetEventCallback(Kn.ON_DRAW_DEPTH_TOOLTIP);m&&m.Callback(m,l,this)}if(this.IsShowTooltip){var p=this.GetFormatTooltip(l);this.DrawTooltip(p,l)}}}}},this.GetFormatTooltip=function(t){var e=[],a=2;this.Symbol&&(a=sr(this.Symbol));var i={Title:bo.GetText("Depth-Price",this.HQChart.LanguageID),TitleColor:this.Tooltip.TextColor,Text:t.Price.toFixed(a),Color:this.Tooltip.TextColor};e.push(i);var i={Title:bo.GetText("Depth-Sum",this.HQChart.LanguageID),TitleColor:this.Tooltip.TextColor,Text:t.Vol.toFixed(4),Color:this.Tooltip.TextColor};return e.push(i),e},this.DrawTooltip=function(t,e){if(we.IsNonEmptyArray(t)){this.Canvas.font=this.Tooltip.Font;for(var a=0,i=0,r=0,n=0;n<t.length;++n){var o=t[n];if(o){var s=!1;if(o.Title){var l=this.Canvas.measureText(o.Title).width;a<l&&(a=l),++i,s=!0}if(o.Text){var l=this.Canvas.measureText(o.Text).width;a<l&&(a=l),++i,s=!0}s&&++r}}if(!(a<=0||i<=0)){this.Tooltip.LineHeight=this.Canvas.measureText("æ").width+2;var h=C(),u=this.Tooltip.Border;this.Tooltip.Width=a+(u.Left+u.Right)*h,this.Tooltip.Height=this.Tooltip.LineHeight*i+(u.Top+u.Bottom)*h+u.ItemSpace*h*(r-1);var c=this.Frame.ChartBorder.GetRight(),f=this.Frame.ChartBorder.GetTop(),d=e.X,D=e.Y-this.Tooltip.Height;d+this.Tooltip.Width>=c&&(d=e.X-this.Tooltip.Width),D<f&&(D=e.Y),this.Canvas.fillStyle=this.Tooltip.BGColor,this.Canvas.fillRect(d,D,this.Tooltip.Width,this.Tooltip.Height),this.Canvas.textBaseline="top",this.Canvas.textAlign="left";for(var m=u.Left*h+d,p=u.Top*h+D,n=0;n<t.length;++n){var o=t[n],s=!1;o.Title&&(o.TitleColor?this.Canvas.fillStyle=o.TitleColor:this.Canvas.fillStyle=this.Tooltip.TextColor,this.Canvas.fillText(o.Title,m,p),p+=this.Tooltip.LineHeight,s=!0),o.Text&&(o.Color?this.Canvas.fillStyle=o.Color:this.Canvas.fillStyle=this.Tooltip.TextColor,this.Canvas.fillText(o.Text,m,p),p+=this.Tooltip.LineHeight,s=!0),s&&(p+=u.ItemSpace*h)}}}},this.PtInButton=function(t,e){return null}}function _e(){this.Frame,this.Canvas,this.Font=So.SplashScreen.Font,this.TextColor=So.SplashScreen.TextColor,this.IsEnableSplash=!1,this.SplashTitle="æ°æ®å è½½ä¸­",this.HQChart,this.Position=0,this.EnableSplash=function(t){if(this.IsEnableSplash=t,this.HQChart){var e=this.HQChart.GetEventCallback(Kn.ON_ENABLE_SPLASH_DRAW);if(e){var a={Enable:t};e.Callback(e,a,this)}}},this.SetTitle=function(t){this.SplashTitle=t},this.Draw=function(){if(this.IsEnableSplash){if(!0===this.Frame.IsHScreen)return void this.HScreenDraw();var t=null,e=null;if(1==this.Position&&this.HQChart.Frame&&this.HQChart.Frame.SubFrame&&this.HQChart.Frame.SubFrame[0]){var a=this.HQChart.Frame.SubFrame[0].Frame;a&&(t=(a.ChartBorder.GetLeft()+a.ChartBorder.GetRight())/2,e=(a.ChartBorder.GetTop()+a.ChartBorder.GetBottom())/2)}if(!we.IsNumber(t)||!we.IsNumber(e))var t=(this.Frame.ChartBorder.GetLeft()+this.Frame.ChartBorder.GetRight())/2,e=(this.Frame.ChartBorder.GetTop()+this.Frame.ChartBorder.GetBottom())/2;this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.Canvas.fillText(this.SplashTitle,t,e)}},this.HScreenDraw=function(){var t=(this.Frame.ChartBorder.GetLeft()+this.Frame.ChartBorder.GetRight())/2,e=(this.Frame.ChartBorder.GetTop()+this.Frame.ChartBorder.GetBottom())/2;this.Canvas.save(),this.Canvas.translate(t,e),this.Canvas.rotate(90*Math.PI/180),this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.font=this.Font,this.Canvas.fillText(this.SplashTitle,0,0),this.Canvas.restore()}}function Ge(){this.Data,this.Value,this.Text,this.Operator=function(){return!1},this.GetMultiDayBeforeOpenData=function(){if(!this.MultiDayBeforeOpenData||!we.IsNonEmptyArray(this.MultiDayBeforeOpenData))return null;if(this.DayOffset||this.MultiDayBeforeOpenData,!we.IsNumber(this.DayOffset.Offset)||!we.IsNumber(this.DayOffset.ShowDayCount))return null;var t=this.DayOffset.ShowDayCount,e=this.DayOffset.Offset;return this.MultiDayBeforeOpenData.slice(e,e+t)},this.GetMultiDayAfterCloseData=function(){if(!this.MultiDayAfterCloseData||!we.IsNonEmptyArray(this.MultiDayAfterCloseData))return null;if(this.DayOffset||this.MultiDayAfterCloseData,!we.IsNumber(this.DayOffset.Offset)||!we.IsNumber(this.DayOffset.ShowDayCount))return null;var t=this.DayOffset.ShowDayCount,e=this.DayOffset.Offset;return this.MultiDayAfterCloseData.slice(e,e+t)}}function ke(){this.newMethod=Ge,this.newMethod(),delete this.newMethod,this.Symbol,this.FrameID,this.Frame,this.LanguageID=xo.LANGUAGE_CHINESE_ID,this.YClose,this.PercentageText,this.RValue,this.RText,this.RComplexText,this.Point,this.ClientPos=-1,this.ExtendChartPaint,this.RExtendText=[],this.BeforeOpenData,this.AfterCloseData,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.ShareAfterVol=0,this.PriceFormatType=0,this.DataFormatType=0,this.GetEventCallback,this.GetBeforeOpen=function(){if(!this.Frame)return!1;var t=this.Frame.SubFrame[this.FrameID];if(!t||!t.Frame)return!1;if(!this.BeforeOpenData)return!1;var e={Max:this.BeforeOpenData.VolMax,Min:this.BeforeOpenData.VolMin},a=this.Frame.IsHScreen?this.Point.X:this.Point.Y,i=t.Frame.GetLeftExtendYData(a,!1,{Range:e});we.IsNumber(i)&&(this.RText=this.Text=we.FormatValueString(i,2,this.LanguageID))},this.GetAfterClose=function(){if(!this.Frame)return!1;var t=this.Frame.SubFrame[this.FrameID];if(!t||!t.Frame)return!1;if(!this.AfterCloseData)return!1;var e={Max:this.AfterCloseData.VolMax,Min:this.AfterCloseData.VolMin},a=this.Frame.IsHScreen?this.Point.X:this.Point.Y,i=t.Frame.GetRightExtendYData(a,!1,{Range:e});we.IsNumber(i)&&(this.RText=this.Text=we.FormatValueString(i,2,this.LanguageID))},this.GetMultiDayBeforeOpen=function(){if(!this.Frame)return!1;var t=this.Frame.SubFrame[this.FrameID];if(!t||!t.Frame)return!1;var e=this.GetMultiDayBeforeOpenData();if(e&&we.IsNonEmptyArray(e)){var a=this.ClientPos-200;if(a<0||a>=e.length)return!1;var i=e[a],r={Max:i.VolMax,Min:i.VolMin},n=this.Frame.IsHScreen?this.Point.X:this.Point.Y,o=t.Frame.GetLeftExtendYData(n,!1,{Range:r});we.IsNumber(o)&&(this.RText=this.Text=we.FormatValueString(o,2,this.LanguageID))}},this.GetMultiDayAfterClose=function(){if(!this.Frame)return!1;var t=this.Frame.SubFrame[this.FrameID];if(!t||!t.Frame)return!1;var e=this.GetMultiDayAfterCloseData();if(e&&we.IsNonEmptyArray(e)){var a=this.ClientPos-300;if(a<0||a>=e.length)return!1;var i=e[a],r={Max:i.VolMax,Min:i.VolMin},n=this.Frame.IsHScreen?this.Point.X:this.Point.Y,o=t.Frame.GetRightExtendYData(n,!1,{Range:r});we.IsNumber(o)&&(this.RText=this.Text=we.FormatValueString(o,2,this.LanguageID))}},this.Operator=function(){if(this.RText=null,this.RComplexText=null,this.RExtendText=[],we.IsString(this.RValue)&&(this.RText=this.RValue),!this.Value)return!1;this.PercentageText=null;var t=2;if(0==this.FrameID){var t=sr(this.Symbol);1==this.PriceFormatType?this.Text=we.FormatValueThousandsString(this.Value,t):this.Text=this.Value.toFixed(t),this.YClose>0&&(this.PercentageText=(100*(this.Value-this.YClose)/this.YClose).toFixed(2)),this.GetExtendPaintData(t)}else 1==this.FrameID?(1==this.DataFormatType?(this.Text=we.FormatValueThousandsString(this.Value,t),we.IsNumber(this.RValue)&&(this.RText=we.FormatValueString(this.RValue,t,this.LanguageID))):(this.Text=we.FormatValueString(this.Value,t,this.LanguageID),we.IsNumber(this.RValue)&&(this.RText=we.FormatValueString(this.RValue,t,this.LanguageID))),2==this.ClientPos?this.GetBeforeOpen():3==this.ClientPos?0!=this.ShareAfterVol&&2!=this.ShareAfterVol||this.GetAfterClose():this.ClientPos>=200&&this.ClientPos<=299?this.GetMultiDayBeforeOpen():this.ClientPos>=300&&this.ClientPos<=399&&(0!=this.ShareAfterVol&&2!=this.ShareAfterVol||this.GetMultiDayAfterClose())):(1==this.DataFormatType?this.Text=we.FormatValueThousandsString(this.Value,t):this.Text=we.FormatValueString(this.Value,t,this.LanguageID),we.IsNumber(this.RValue)&&(this.RText=we.FormatValueString(this.RValue,t,this.LanguageID)));if(this.GetEventCallback){var e=this.GetEventCallback(Kn.ON_FORMAT_CORSSCURSOR_Y_TEXT);if(e){var a={Value:this.Value,FrameID:this.FrameID,PreventDefault:!1};if(e.Callback(e,a,this),1==a.PreventDefault)return!1}}return!0},this.GetExtendPaintData=function(t){var e=parseInt(this.Value*po[t]);for(var a in this.ExtendChartPaint){var i=this.ExtendChartPaint[a];if("DepthMapPaint"==i.ClassName&&i.FrameID==this.FrameID){var r=i.GetYValueByXValue(e,t);for(var n in r)this.RExtendText.push(r[n])}}}}function Ve(){this.newMethod=Ge,this.newMethod(),delete this.newMethod,this.DateFormatType=0,this.LanguageID=0,this.Operator=function(){if(!we.IsNumber(this.Value))return!1;if(!this.Data)return!1;var t=this.Value;if(t=parseInt(t.toFixed(0)),this.Data.DataOffset+t>=this.Data.Data.length)return!1;var e=this.Data.Data[this.Data.DataOffset+t],a="YYYY-MM-DD";if(1==this.DateFormatType?a="YYYY/MM/DD":2==this.DateFormatType?a="YYYY/MM/DD/W":3==this.DateFormatType&&(a="DD/MM/YYYY"),this.Text=we.FormatDateString(e.Date,a,this.LanguageID),tt.IsMinutePeriod(this.Data.Period,!0)){var i=we.FormatTimeString(e.Time);this.Text=this.Text+"  "+i}else if(tt.IsSecondPeriod(this.Data.Period)){var i=we.FormatTimeString(e.Time,"HH:MM:SS");this.Text=this.Text+"  "+i}else if(tt.IsMilliSecondPeriod(this.Data.Period)){var i=we.FormatTimeString(e.Time,"HH:MM:SS.fff");this.Text=this.Text+"  "+i}else if(tt.IsTickPeriod(this.Data.Period)){var i=we.FormatTimeString(e.Time);this.Text=this.Text+"  "+i}if(this.GetEventCallback){var r=this.GetEventCallback(Kn.ON_FORMAT_CORSSCURSOR_X_TEXT);if(r){var n={Item:e,Period:this.Data.Period,Date:e.Date,Time:e.Time,Index:this.Data.DataOffset+t,PreventDefault:!1};if(r.Callback(r,n,this),1==n.PreventDefault)return!1}}return!0}}function He(){this.newMethod=Ge,this.newMethod(),delete this.newMethod,this.ClassName="HQMinuteTimeStringFormat",this.Frame,this.Symbol,this.Point,this.ClientPos=-1,this.BeforeOpenData,this.AfterCloseData,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.GetEventCallback,this.GetBeforeOpen=function(){if(!this.BeforeOpenData||!this.BeforeOpenData.Data)return!1;var t=1==this.Frame.IsHScreen?this.Point.Y:this.Point.X,e=this.Frame.GetLeftExtendXData(t,this.BeforeOpenData);if((e=parseInt(e.toFixed(0)))>=this.BeforeOpenData.Data.length)return!1;var a=this.BeforeOpenData.Data[e];return this.Text=this.FormatCallAcutionDateTime(a,this.BeforeOpenData),!0},this.GetAfterClose=function(){if(!this.AfterCloseData||!this.AfterCloseData.Data)return!1;var t=1==this.Frame.IsHScreen?this.Point.Y:this.Point.X,e=this.Frame.GetRightExtendXData(t,this.AfterCloseData);if((e=parseInt(e.toFixed(0)))>=this.AfterCloseData.Data.length)return!1;var a=this.AfterCloseData.Data[e];return this.Text=this.FormatCallAcutionDateTime(a,this.AfterCloseData),!0},this.GetMultiDayBeforeOpen=function(){var t=this.GetMultiDayBeforeOpenData();if(!t)return!1;if(this.Frame.ChartBorder.MultiDayMinute.Count<=1||this.Frame.ChartBorder.MultiDayMinute.Left<=0)return!1;var e=1==this.Frame.IsHScreen?this.Point.Y:this.Point.X,a=this.Frame.GetLeftExtendXData(e,t);if(!a)return!1;if(a.DayIndex>=t.length)return!1;var i=t[a.DayIndex];if(a.DataIndex=parseInt(a.DataIndex.toFixed(0)),a.DataIndex>=i.Data.length||a.DataIndex<0)return!1;var r=i.Data[a.DataIndex];return this.Text=this.FormatCallAcutionDateTime(r,i),!0},this.GetMultiDayAfterClose=function(){var t=this.GetMultiDayAfterCloseData();if(!t)return!1;if(this.Frame.ChartBorder.MultiDayMinute.Count<=1||this.Frame.ChartBorder.MultiDayMinute.Right<=0)return!1;var e=1==this.Frame.IsHScreen?this.Point.Y:this.Point.X,a=this.Frame.GetRightExtendXData(e,t);if(!a)return!1;if(a.DayIndex>=t.length)return!1;var i=t[a.DayIndex];if(a.DataIndex=parseInt(a.DataIndex.toFixed(0)),a.DataIndex>=i.Data.length)return!1;var r=i.Data[a.DataIndex];return this.Text=this.FormatCallAcutionDateTime(r,i),!0},this.FormatCallAcutionDateTime=function(t,e){var a=t.Time;return 1==e.Ver?we.FormatTimeString(a,"HH:MM"):we.FormatTimeString(a,"HH:MM:SS")},this.Operator=function(){if(2==this.ClientPos)return this.GetBeforeOpen();if(3==this.ClientPos)return this.GetAfterClose();if(this.ClientPos>=200&&this.ClientPos<=299)return this.GetMultiDayBeforeOpen();if(this.ClientPos>=300&&this.ClientPos<=399)return this.GetMultiDayAfterClose();if(!we.IsNumber(this.Value))return!1;var t=Math.abs(this.Value);t=parseInt(t.toFixed(0));var e=t;this.Frame&&this.Frame.MinuteCount&&(e=t%this.Frame.MinuteCount);var a=Fo,i=a.GetTimeData(this.Symbol);if(!i)return!1;e<0?e=0:e>i.length&&(e=i.length-1),this.Frame&&t>=this.Frame.XPointCount&&(e=i.length-1);var r=i[e];if(this.Text=we.FormatTimeString(r),this.GetEventCallback){var n=this.GetEventCallback(Kn.ON_FORMAT_CORSSCURSOR_X_TEXT);if(n){var o={Time:r,Index:e,PreventDefault:!1};if(n.Callback(n,o,this),1==o.PreventDefault)return!1}}return!0},this.GetMinuteCloseYPoint=function(t){var e=t.Type;if(1==e||2==e||3==e){if(1==e){if(!this.Data||this.Data.Data.length<=0)return null;var a=t.DataIndex;(a<0||a>=this.Data.Data.length)&&(a=this.Data.Data.length-1);var i=this.Data.Data[a],r=this.Frame.GetYFromData(i);return{Price:i,Y:r}}if(2==e){if(!this.BeforeOpenData||!this.BeforeOpenData.Data)return!1;if(t.DataIndex<0||t.DataIndex>=this.BeforeOpenData.Data.length)return null;var n=this.BeforeOpenData.Data[t.DataIndex],i=n.Price,r=this.Frame.GetYFromData(i);return{Price:i,Y:r}}if(3==e){if(!this.AfterCloseData||!this.AfterCloseData.Data)return!1;if(t.DataIndex<0||t.DataIndex>=this.AfterCloseData.Data.length)return null;var n=this.AfterCloseData.Data[t.DataIndex],i=n.Price,r=this.Frame.GetYFromData(i);return{Price:i,Y:r}}}else if(10==e||20==e||30==e){if(10==e){if(!this.Data||this.Data.Data.length<=0)return null;var a=this.Frame.MinuteCount*t.DayIndex+t.DataIndex;(a<0||a>=this.Data.Data.length)&&(a=this.Data.Data.length-1);var i=this.Data.Data[a],r=this.Frame.GetYFromData(i);return{Price:i,Y:r}}if(20==e){var o=this.GetMultiDayBeforeOpenData();if(!o)return null;if(t.DayIndex<0||t.DayIndex>=o.length)return null;var s=o[t.DayIndex];if(t.DataIndex<0||t.DataIndex>=s.Data.length)return null;var n=s.Data[t.DataIndex],i=n.Price,r=this.Frame.GetYFromData(i);return{Price:i,Y:r}}if(30==e){var l=this.GetMultiDayAfterCloseData();if(!l)return null;if(t.DayIndex<0||t.DayIndex>=l.length)return null;var s=l[t.DayIndex];if(t.DataIndex<0||t.DataIndex>=s.Data.length)return null;var n=s.Data[t.DataIndex],i=n.Price,r=this.Frame.GetYFromData(i);return{Price:i,Y:r}}}return null}}function Ye(){this.newMethod=Ge,this.newMethod(),delete this.newMethod,this.ClassName="HistoryDataStringFormat",this.Symbol,this.UpColor=So.UpTextColor,this.DownColor=So.DownTextColor,this.UnchagneColor=So.UnchagneTextColor,this.VolColor=So.Title.VolColor,this.AmountColor=So.Title.AmountColor,this.TurnoverRateColor=So.Title.TurnoverRateColor,this.PositionColor=So.Title.PositionColor,this.LanguageID=xo.LANGUAGE_CHINESE_ID,this.LineCount=0,this.LineHeight=So.PCTooltip.LineHeight,this.Width=157,this.Height=5*this.LineHeight,this.Operator=function(){var t=this.Value.Data;if(!t)return!1;this.Width=157,this.LanguageID==xo.LANGUAGE_ENGLISH_ID&&(this.Width=180);var e=this.GetFormatTitle(t);if(!e)return!1;var a=this.GenerateTitleHtml(e);return!!a&&(this.Text=a.Html,this.Height=a.LineCount*this.LineHeight,!0)},this.GenerateTitleHtml=function(t){var e,a=0,i="";if(t.Name&&(e="<span style='color:rgb(0,0,0);font:å¾®è½¯éé»;font-size:12px;text-align:center;display: block;'>"+t.Name+"</span>",i+=e,++a),t.Title)if(Array.isArray(t.Title))for(var r=0;r<t.Title.length;++r){var n=t.Title[r];e="<span class='tooltip-title'>"+n+"</span>",i+=e,++a}else e="<span class='tooltip-title'>"+t.Title+"</span>",i+=e,++a;if(we.IsNonEmptyArray(t.AryText))for(var r=0;r<t.AryText.length;++r){var n=t.AryText[r];r>0&&(i+="<br/>");var e="<span class='tooltip-con'>"+n.Title+"</span><span class='tooltip-num' style='color:"+n.Color+";'>"+n.Text+"</span>";i+=e,++a}return{Html:i,LineCount:a}},this.GetFormatTitle=function(t){if(!t)return null;var e,a=this.Symbol.toUpperCase(),i=sr(this.Symbol),r=new Date(parseInt(t.Date/1e4),t.Date/100%100-1,t.Date%100),n=we.FormatDateString(t.Date),o=n,s=tt.IsTickPeriod(this.Value.ChartPaint.Data.Period);tt.IsDayPeriod(this.Value.ChartPaint.Data.Period,!0)?(e=bo.GetText(vo[r.getDay()],this.LanguageID),o=n+"&nbsp&nbsp"+e):tt.IsMinutePeriod(this.Value.ChartPaint.Data.Period,!0)?(e=we.FormatTimeString(t.Time),o=n+"&nbsp&nbsp"+e):tt.IsSecondPeriod(this.Value.ChartPaint.Data.Period)||s?(e=we.FormatTimeString(t.Time,"HH:MM:SS"),o=n+"&nbsp&nbsp"+e):tt.IsMilliSecondPeriod(this.Value.ChartPaint.Data.Period)&&(e=we.FormatTimeString(t.Time,"HH:MM:SS.fff"),o=[n+"&nbsp&nbsp"+bo.GetText(vo[r.getDay()],this.LanguageID),e]);var l={AryText:null,Title:o,Name:null};if(s){var h=[{Title:bo.GetText("DivTooltip-Price",this.LanguageID),Text:we.IsNumber(t.Open)?t.Open.toFixed(i):"--",Color:this.GetColor(t.Open,t.YClose)}];if(we.IsNumber(t.YClose)){var u=(t.Close-t.YClose)/t.YClose*100,C={Title:bo.GetText("DivTooltip-Increase",this.LanguageID),Text:u.toFixed(2)+"%",Color:this.GetColor(u,0)};h.push(C)}l.AryText=h}else if(t.IsNonTrade);else{var c=t.Vol;a&&wo.IsSHSZ(a)&&(c/=100);var f=null;this.GetEventCallback&&(f=this.GetEventCallback(Kn.ON_CUSTOM_UNCHANGE_KLINE_TITLE_COLOR));var h=[{Title:bo.GetText("DivTooltip-Open",this.LanguageID),Text:we.IsNumber(t.Open)?t.Open.toFixed(i):"--",Color:this.GetPriceColor("DivTooltip-Open",t.Open,t.YClose,t,f)},{Title:bo.GetText("DivTooltip-High",this.LanguageID),Text:we.IsNumber(t.High)?t.High.toFixed(i):"--",Color:this.GetPriceColor("DivTooltip-High",t.High,t.YClose,t,f)},{Title:bo.GetText("DivTooltip-Low",this.LanguageID),Text:we.IsNumber(t.Low)?t.Low.toFixed(i):"--",Color:this.GetPriceColor("DivTooltip-Low",t.Low,t.YClose,t,f)},{Title:bo.GetText("DivTooltip-Close",this.LanguageID),Text:we.IsNumber(t.Close)?t.Close.toFixed(i):"--",Color:this.GetPriceColor("DivTooltip-Close",t.Close,t.YClose,t,f)},{Title:bo.GetText("DivTooltip-Vol",this.LanguageID),Text:we.IsNumber(c)?we.FormatValueString(c,2,this.LanguageID):"--",Color:this.VolColor},{Title:bo.GetText("DivTooltip-Amount",this.LanguageID),Text:we.IsNumber(t.Amount)?we.FormatValueString(t.Amount,2,this.LanguageID):"--",Color:this.AmountColor}];if(we.IsNumber(t.YClose)){var u=(t.Close-t.YClose)/t.YClose*100,C={Title:bo.GetText("DivTooltip-Increase",this.LanguageID),Text:u.toFixed(2)+"%",Color:this.GetColor(u,0)};h.push(C)}if(wo.IsSHSZStockA(this.Symbol)&&t.FlowCapital>0){var e=t.Vol/t.FlowCapital*100,C={Title:bo.GetText("DivTooltip-Exchange",this.LanguageID),Text:e.toFixed(2)+"%",Color:this.TurnoverRateColor};h.push(C)}if(wo.IsFutures(a)&&we.IsNumber(t.Position))var C={Title:bo.GetText("DivTooltip-Position",this.LanguageID),Text:""+t.Position,Color:this.PositionColor};"Overlay-KLine"==this.Value.ChartPaint.Name&&(l.Name=this.Value.ChartPaint.Title),l.AryText=h}return l},this.GetColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchagneColor},this.GetPriceColor=function(t,e,a,i,r){var n=this.GetColor(e,a);if(e==a&&r&&r.Callback){var o={Item:i,TitleName:t,DefaultColor:n,TitleColor:null,ClassName:this.ClassName};r.Callback(r,o),o.TitleColor&&(n=o.TitleColor)}return n}}function Xe(){this.newMethod=Ge,this.newMethod(),delete this.newMethod,this.UpColor=So.UpTextColor,this.DownColor=So.DownTextColor,this.UnchagneColor=So.UnchagneTextColor,this.Width=500,this.Operator=function(){if(!this.Value)return!1;var t=this.Value.Data.Data,e=this.Value.Data.Type,a="";for(var i in t){var r=t[i],n="";switch(e){case to.BLOCKTRADING:n=this.BlockTradingFormat(r);break;case to.TRADEDETAIL:n=this.TradeDetailFormat(r);break;case to.RESEARCH:n=this.ResearchFormat(r);break;case to.PFORECAST:n=this.PerformanceForecastFormat(r);break;default:n=this.DefaultFormat(r)}a+=n}var o="<div class='title-length'>"+a+"</div>";if(t.length>8){o+="<div class='total-list'>å±"+t.length+"æ¡</div>"}return this.Text=o,!0},this.DefaultFormat=function(t){var e=we.FormatDateString(t.Date);if(we.IsNumber(t.Time)){e+=" "+we.FormatTimeString(t.Time)}return"<span>"+e+"&nbsp;&nbsp;&nbsp;"+t.Title+"</span>"},this.BlockTradingFormat=function(t){var e=t.ExtendData;return"<span><i class='date-tipbox'>"+we.FormatDateString(t.Date)+"</i>&nbsp;&nbsp;<i class='tipBoxTitle'>æäº¤ä»·:&nbsp;"+e.Price.toFixed(2)+"</i><i class='tipBoxTitle'>æ¶çä»·:&nbsp;"+e.ClosePrice.toFixed(2)+"</i><br/><i class='rate-discount tipBoxTitle'>æº¢æä»·ç:&nbsp;<strong style='color:"+this.GetColor(e.Premium.toFixed(2))+"'>"+e.Premium.toFixed(2)+"%</strong></i><i class='tipBoxTitle'>æäº¤é(ä¸è¡):&nbsp;"+e.Vol.toFixed(2)+"</i></span>"},this.TradeDetailFormat=function(t){var e=t.ExtendData.Detail,a=we.FormatDateString(t.Date),i=[];for(var r in e)i+="<i>"+e[r].TypeExplain+"</i><br/>";return"<span><i class='trade-time'>"+a+"&nbsp;&nbsp;&nbsp;ä¸æ¦åå :&nbsp;&nbsp;</i><i class='reason-list'>"+i+"</i><br/><i class='trade-detall'>ä¸å¨åæ¶¨å¹:&nbsp;<strong style='color:"+this.GetColor(t.ExtendData.FWeek.Week1.toFixed(2))+"'>"+t.ExtendData.FWeek.Week1.toFixed(2)+"%</strong>&nbsp;&nbsp;&nbsp;åå¨åæ¶¨å¹:&nbsp;<strong style='color:"+this.GetColor(t.ExtendData.FWeek.Week4.toFixed(2))+";'>"+t.ExtendData.FWeek.Week4.toFixed(2)+"%</strong></i></span>"},this.ResearchFormat=function(t){var e=t.ExtendData.Level,a="";if(0==e.length)a="<i>ä¸è¬è°ç </i>";else{for(var i in e)0==e[i]?a+="<i style='color:#00a0e9'>è¯å¸ä»£è¡¨&nbsp;&nbsp;&nbsp;</i>":1==e[i]?a+="<i>è£ç§&nbsp;&nbsp;&nbsp;</i>":2==e[i]?a+="<i style='color:#00a0e9'>æ»ç»ç&nbsp;&nbsp;&nbsp;</i>":3==e[i]&&(a+="<i style='color:#00a0e9'>è£äºé¿&nbsp;&nbsp;&nbsp;</i>");a="æ¥å¾:&nbsp;&nbsp;&nbsp;"+a}var r="";return t.ExtendData.Type&&"å¶ä»"!=t.ExtendData.Type&&(r="&nbsp;&nbsp;&nbsp;<i>"+t.ExtendData.Type+"</i>",0==e.length&&(a="")),"<span>"+we.FormatDateString(t.Date)+"&nbsp;&nbsp;&nbsp;"+r+a+"</span>"},this.PerformanceForecastFormat=function(t){var e,a=t.ExtendData.ReportDate,i=parseInt(a/1e4),r=a%1e4;1231==r?e="å¹´æ¥":331==r?e="ä¸å­£åº¦æ¥":630==r?e="åå¹´åº¦æ¥":930==r&&(e="ä¸å­£åº¦æ¥");var n="";return t.ExtendData.FWeek&&(null!=t.ExtendData.FWeek.Week1&&(n+="ä¸å¨åæ¶¨å¹:<i class='increase' style='color:"+this.GetColor(t.ExtendData.FWeek.Week1.toFixed(2))+"'>"+t.ExtendData.FWeek.Week1.toFixed(2)+"%</i>"),null!=t.ExtendData.FWeek.Week4&&(n+="&nbsp;åå¨åæ¶¨å¹:<i class='increase' style='color:"+this.GetColor(t.ExtendData.FWeek.Week4.toFixed(2))+"'>"+t.ExtendData.FWeek.Week4.toFixed(2)+"%</i>"),n.length>0&&(n="<br/>&nbsp;&nbsp;<i class='prorecast-week'>"+n+"</i>")),"<span>"+we.FormatDateString(t.Date)+"&nbsp;&nbsp;"+i+e+t.Title+"&nbsp;"+n+"</span>"},this.GetColor=function(t){return t>0?this.UpColor:t<0?this.DownColor:this.UnchagneColor}}function We(){this.newMethod=Ge,this.newMethod(),delete this.newMethod,this.Width=120,this.Operator=function(){var t=this.Value.Data;if(!t)return!1;var e,a=t.Data,i="<span class='tooltip-index-name'>"+a.Name+a.Param+":</span>";return e=1==a.Type?"<span class='tooltip-index-buy'>ä¹°å¥</span>":"<span class='tooltip-index-sell'>ååº</span>",this.Text=i+e,!0}}function Ue(){this.newMethod=Ge,this.newMethod(),delete this.newMethod,this.Width=200,this.Operator=function(){var t=this.Value.Data;if(!t)return!1;var e=t.Data.Item,a=we.FormatTimeString(e.Time),i="<span class='tooltip-minuteinfo-time'>"+a+" </span>",r="<span class='tooltip-minuteinfo-content'>"+e.Title+"</span>";return e.Content&&(r="<span class='tooltip-minuteinfo-content'>"+e.Content+"</span>"),this.Text=i+r,!0}}function Ke(){this.newMethod=Ge,this.newMethod(),delete this.newMethod,this.Width=200,this.Operator=function(){if(!this.Value||!this.Value.Data)return!1;var t=this.Value.Data;return!!t.Item&&(!!t.Item.Text&&(this.Text=t.Item.Text,!0))}}function ze(){this.newMethod=Ge,this.newMethod(),delete this.newMethod,this.Width=200,this.Operator=function(){if(!this.Value||!this.Value.Data)return!1;var t=this.Value.Data;return!!t.Item&&(!(!t.Item.Tooltip||!t.Item.Tooltip.Text)&&(this.Text=t.Item.Tooltip.Text,!0))}}function Je(){this.newMethod=Ge,this.newMethod(),delete this.newMethod,this.Width=200,this.Period=0,this.Operator=function(){var t=this.Value.Data;if(!t||!t.Data)return!1;if(tt.IsDayPeriod(this.Period,!0)){var e=we.FormatDateString(t.Data.Start.Date),a=we.FormatDateString(t.Data.End.Date);if(e==a)return this.Text="<span class='tooltip-minuteinfo-content'>"+e+"</span>",!0;var i="<span class='tooltip-minuteinfo-content'>èµ·å§æ¶é´:"+e+"</span>",r="<span class='tooltip-minuteinfo-content'>ç»ææ¶é´:"+a+"</span>";return this.Text=i+"<br>"+r,!0}if(tt.IsMinutePeriod(this.Period,!0)){var e=we.FormatDateString(t.Data.Start.Date),n=we.FormatTimeString(t.Data.Start.Time,"HH:MM"),a=we.FormatDateString(t.Data.End.Date),o=we.FormatTimeString(t.Data.End.Time,"HH:MM"),i="<span class='tooltip-minuteinfo-content'>èµ·å§æ¶é´:"+e+" "+n+"</span>",r="<span class='tooltip-minuteinfo-content'>ç»ææ¶é´:"+a+" "+o+"</span>";return this.Text=i+"<br>"+r,!0}return!1}}function qe(){this.newMethod=Ge,this.newMethod(),delete this.newMethod,this.Width=200,this.Operator=function(){var t=this.Value.Data;if(!t||!t.Data)return!1;if(!we.IsNonEmptyArray(t.Data.Tooltip))return!1;this.Text="";for(var e=0;e<t.Data.Tooltip.length;++e){var a=t.Data.Tooltip[e],i="<span class='tooltip-minuteinfo-content'>"+a+"</span>";this.Text+=i+"<br>"}return!0}}function Ze(){this.DataMap=new Vn.default([["KLineTradeDataStringFormat",{Create:function(){return new We}}],["MinuteInfoDataStringFormat",{Create:function(){return new Ue}}],["HistoryDataStringFormat",{Create:function(){return new Ye}}],["KLineInfoDataStringFormat",{Create:function(){return new Xe}}],["IconDataStringFormat",{Create:function(){return new Ke}}],["ChartOXDataStringFormat",{Create:function(){return new Je}}],["ScatterPlotDataStringFormat",{Create:function(){return new qe}}],["ChartDrawSVGDataStringFormat",{Create:function(){return new ze}}],["CorssCursor_XStringFormat",{Create:function(){return new Ve}}],["CorssCursor_YStringFormat",{Create:function(){return new ke}}],["CorssCursor_Minute_XStringFormat",{Create:function(){return new He}}]]),this.Create=function(t){return this.DataMap.has(t)?this.DataMap.get(t).Create():null}}function je(){this.Frame,this.Data=new Array,this.Canvas,this.IsDynamic=!1,this.Position=0,this.CursorIndex,this.LastPoint,this.Font=So.TitleFont,this.Title,this.TitleColor=So.DefaultTextColor,this.ClassName="IChartTitlePainting",this.DrawStatus,this.GetEventCallback,this.GlobalOption,this.ReloadResource=function(){this.Font=So.TitleFont,this.TitleColor=So.DefaultTextColor}}function Qe(){this.newMethod=je,this.newMethod(),delete this.newMethod,this.ClassName="DynamicKLineTitlePainting",this.IsDynamic=!0,this.IsShow=!0,this.Period,this.UpColor=So.UpTextColor,this.DownColor=So.DownTextColor,this.UnchagneColor=So.UnchagneTextColor,this.VolColor=So.Title.VolColor,this.AmountColor=So.Title.AmountColor,this.DateTimeColor=So.Title.DateTimeColor,this.NameColor=So.Title.NameColor,this.SettingColor=So.Title.SettingColor,this.TurnoverRateColor=So.Title.TurnoverRateColor,this.PositionColor=So.Title.PositionColor,this.Symbol,this.Name,this.SpaceWidth=2*C(),this.OverlayChartPaint,this.IsShowName=!0,this.IsShowSettingInfo=!0,this.IsShowDateTime=!0,this.LanguageID=xo.LANGUAGE_CHINESE_ID,this.OnDrawEvent,this.OnMouseMoveEvent,this.HQChart,this.ReloadResource=function(){this.Font=So.TitleFont,this.TitleColor=So.DefaultTextColor,this.UpColor=So.UpTextColor,this.DownColor=So.DownTextColor,this.UnchagneColor=So.UnchagneTextColor,this.VolColor=So.Title.VolColor,this.AmountColor=So.Title.AmountColor,this.DateTimeColor=So.Title.DateTimeColor,this.NameColor=So.Title.NameColor,this.SettingColor=So.Title.SettingColor,this.TurnoverRateColor=So.Title.TurnoverRateColor,this.PositionColor=So.Title.PositionColor},this.GetCurrentKLineData=function(){if(null==this.CursorIndex||!this.Data)return null;if(this.Data.length<=0)return null;var t=this.CursorIndex;t=parseInt(t.toFixed(0));var e=this.Data.DataOffset+t;return e>=this.Data.Data.length&&(e=this.Data.Data.length-1),e<0?null:this.Data.Data[e]},this.GetFormatTitle=function(t){if(t&&t.Data){var e=sr(this.Symbol),a=this.Symbol.toUpperCase(),i=t.Data,r=[],n={AryText:r};if(this.IsShowName&&r.push({Text:this.Name,Color:this.NameColor}),this.IsShowSettingInfo){var o="";o=this.Data.Period>ro&&this.Data.Period<=no?this.Data.Period-ro+bo.GetText("èªå®ä¹åé",this.LanguageID):this.Data.Period>ao&&this.Data.Period<=io?this.Data.Period-ao+bo.GetText("èªå®ä¹æ¥çº¿",this.LanguageID):this.Data.Period>oo&&this.Data.Period<=so?this.Data.Period-oo+bo.GetText("èªå®ä¹ç§",this.LanguageID):this.Data.Period>lo&&this.Data.Period<=ho?this.Data.Period-lo+bo.GetText("èªå®ä¹æ¯«ç§",this.LanguageID):bo.GetText(tt.GetPeriodName(this.Data.Period),this.LanguageID);var s=bo.GetText(To[this.Data.Right],this.LanguageID),l="("+o+" "+s+")";wo.IsEnableRight(this.Data.Period,this.Symbol,this.HQChart.RightFormula)||(l="("+o+")"),r.push({Text:l,Color:this.SettingColor})}var l=this.GetKLineCalculateTitle();if(l&&r.push({Text:l,Color:this.NameColor}),this.IsShowDateTime){var l=we.FormatDateString(i.Date);r.push({Text:l,Color:this.DateTimeColor})}var h=tt.IsTickPeriod(this.Period);if(tt.IsMinutePeriod(this.Period,!0)&&we.IsNumber(i.Time)){var l=we.FormatTimeString(i.Time);r.push({Text:l,Color:this.DateTimeColor})}else if(tt.IsSecondPeriod(this.Period)&&we.IsNumber(i.Time)){var l=we.FormatTimeString(i.Time,"HH:MM:SS");r.push({Text:l,Color:this.DateTimeColor})}else if(tt.IsMilliSecondPeriod(this.Period)&&we.IsNumber(i.Time)){var l=we.FormatTimeString(i.Time,"HH:MM:SS.fff");r.push({Text:l,Color:this.DateTimeColor})}else if(h){var l=we.FormatTimeString(i.Time,"HH:MM:SS");r.push({Text:l,Color:this.DateTimeColor})}if(h){var u=this.GetColor(i.Open,i.YClose),l=bo.GetText("KTitle-Price",this.LanguageID)+i.Open.toFixed(e);if(r.push({Text:l,Color:u}),we.IsNumber(i.YClose)&&0!=i.YClose){var C=(i.Close-i.YClose)/i.YClose*100,u=this.GetColor(C,0),l=bo.GetText("KTitle-Increase",this.LanguageID)+C.toFixed(2)+"%";r.push({Text:l,Color:u})}return n}if(i.IsNonTrade)return n;var c=null;if(this.GetEventCallback&&(c=this.GetEventCallback(Kn.ON_CUSTOM_UNCHANGE_KLINE_TITLE_COLOR)),we.IsNumber(i.Open)){var u=this.GetColor(i.Open,i.YClose),l=bo.GetText("KTitle-Open",this.LanguageID)+i.Open.toFixed(e);if(i.Open==i.YClose&&c){var f={Item:i,TitleName:"KTitle-Open",DefaultColor:u,TitleColor:null};this.OnUnchangeTitleColor(c,f)&&(u=f.TitleColor)}r.push({Text:l,Color:u})}if(we.IsNumber(i.High)){var u=this.GetColor(i.High,i.YClose),l=bo.GetText("KTitle-High",this.LanguageID)+i.High.toFixed(e);if(i.High==i.YClose&&c){var f={Item:i,TitleName:"KTitle-High",DefaultColor:u,TitleColor:null};this.OnUnchangeTitleColor(c,f)&&(u=f.TitleColor)}r.push({Text:l,Color:u})}if(we.IsNumber(i.Low)){var u=this.GetColor(i.Low,i.YClose),l=bo.GetText("KTitle-Low",this.LanguageID)+i.Low.toFixed(e);if(i.Low==i.YClose&&c){var f={Item:i,TitleName:"KTitle-Low",DefaultColor:u,TitleColor:null};this.OnUnchangeTitleColor(c,f)&&(u=f.TitleColor)}r.push({Text:l,Color:u})}if(we.IsNumber(i.Close)){var u=this.GetColor(i.Close,i.YClose),l=bo.GetText("KTitle-Close",this.LanguageID)+i.Close.toFixed(e);if(i.Close==i.YClose&&c){var f={Item:i,TitleName:"KTitle-Close",DefaultColor:u,TitleColor:null};this.OnUnchangeTitleColor(c,f)&&(u=f.TitleColor)}r.push({Text:l,Color:u})}if(i.YFClose>0&&wo.IsChinaFutures(a)){var C=(i.Close-i.YFClose)/i.YFClose*100,u=this.GetColor(C,0),l=bo.GetText("KTitle-Increase",this.LanguageID)+C.toFixed(2)+"%";r.push({Text:l,Color:u})}else if(i.YClose>0){var C=(i.Close-i.YClose)/i.YClose*100,u=this.GetColor(C,0),l=bo.GetText("KTitle-Increase",this.LanguageID)+C.toFixed(2)+"%";r.push({Text:l,Color:u})}if(we.IsNumber(i.Vol)){var d=i.Vol;a&&wo.IsSHSZ(a)&&(d/=100);var l=bo.GetText("KTitle-Vol",this.LanguageID)+we.FromatIntegerString(d,2,this.LanguageID);r.push({Text:l,Color:this.VolColor})}if(we.IsNumber(i.Amount)){var l=bo.GetText("KTitle-Amount",this.LanguageID)+we.FormatValueString(i.Amount,2,this.LanguageID);r.push({Text:l,Color:this.AmountColor})}if(wo.IsSHSZStockA(this.Symbol)&&i.FlowCapital>0){var C=i.Vol/i.FlowCapital*100,l=bo.GetText("KTitle-Exchange",this.LanguageID)+we.FormatValueString(C,2,this.LanguageID)+"%";r.push({Text:l,Color:this.TurnoverRateColor})}if(wo.IsFutures(a)&&we.IsNumber(i.Position)){var l=bo.GetText("KTitle-Position",this.LanguageID)+i.Position;r.push({Text:l,Color:this.PositionColor})}if(we.IsNonEmptyArray(this.OverlayChartPaint))for(var D=0;D<this.OverlayChartPaint.length;++D){var i=this.OverlayChartPaint[D];if(i.Symbol&&i.Title){var m=i.Color,l="["+i.Title+"]";r.push({Text:l,Color:m})}}return n}},this.DrawItem=function(t){var e=!0===this.Frame.IsHScreen,a=this.Frame.ChartBorder.GetLeft(),i=this.Frame.ChartBorder.GetTop()-this.Frame.ChartBorder.Top/2,r=(this.Frame.ChartBorder.GetRight(),C());if(e){if(this.Frame.ChartBorder.Right<5*r)return;var a=2,i=this.Frame.ChartBorder.Right/2,n=(this.Frame.ChartBorder.GetHeight(),this.Frame.ChartBorder.GetChartWidth()),o=this.Frame.ChartBorder.GetTop();this.Canvas.translate(n,o),this.Canvas.rotate(90*Math.PI/180)}else if(this.Frame.ChartBorder.Top<5*r)return;this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.font=this.Font;var s={Left:a,Bottom:i,IsHScreen:e},l=this.GetFormatTitle({Data:t});if(l&&we.IsNonEmptyArray(l.AryText))for(var h=0;h<l.AryText.length;++h){var t=l.AryText[h];if(!this.DrawText(t.Text,t.Color,s))break}},this.Draw=function(){if(this.IsShow){if(null==this.CursorIndex||!this.Data||this.Data.length<=0)return void this.OnDrawEventCallback(null);this.Canvas.font=this.Font,this.SpaceWidth=this.Canvas.measureText("0").width;var t=this.CursorIndex;t=parseInt(t.toFixed(0));var e=this.Data.DataOffset+t;if(e>=this.Data.Data.length&&(e=this.Data.Data.length-1),e<0)return void this.OnDrawEventCallback(null);this.IsShowLastData()&&(e=this.Data.Data.length-1);var a=this.Data.Data[e];this.OnDrawEventCallback(a),this.Canvas.save(),this.DrawItem(a),this.Canvas.restore()}},this.OnDrawEventCallback=function(t){var e=this.OnDrawEvent&&this.OnDrawEvent.Callback,a=this.OnMouseMoveEvent&&this.OnMouseMoveEvent.Callback;if(e||a){var i={Draw:t,Name:this.ClassName};if(this.Data&&this.Data.Data){var r=Math.abs(this.CursorIndex);r=parseInt(r.toFixed(0));var n=this.Data.DataOffset+r,o=this.Data.Data.length;i.DataIndex=n,i.DataCount=o}if(we.IsNonEmptyArray(this.OverlayChartPaint)){i.OverlayStock=[];for(var s=0;s<this.OverlayChartPaint.length;++s){var l=this.OverlayChartPaint[s];l.Symbol&&l.Title&&i.OverlayStock.push({Symbol:l.Symbol,Name:l.Title,Data:l.Data,Color:l.Color})}}e&&this.OnDrawEvent.Callback(this.OnDrawEvent,i,this),a&&this.OnMouseMoveEvent.Callback(this.OnMouseMoveEvent,i,this)}},this.GetColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchagneColor},this.OnUnchangeTitleColor=function(t,e){return!(!t||!t.Callback)&&(e.ClassName=this.ClassName,t.Callback(t,e,this),!(!e||!e.TitleColor))},this.DrawText=function(t,e,a){if(!t)return!0;var i=!0===this.Frame.IsHScreen,r=this.Frame.ChartBorder.GetRight();i&&(r=this.Frame.ChartBorder.GetHeight()),this.Canvas.fillStyle=e;var n=this.Canvas.measureText(t).width;return!(a.Left+n>r)&&(this.IsShow&&this.Canvas.fillText(t,a.Left,a.Bottom,n),a.Left+=n+this.SpaceWidth,!0)},this.GetKLineCalculateTitle=function(){if(!this.HQChart)return null;var t=this.HQChart.GetKLineCalulate();return t&&t.GetTitle?t.GetTitle():null},this.IsShowLastData=function(){var t=!1;if(this.DrawStatus&&this.DrawStatus.IsTitleShowLatestData){var e=this.DrawStatus;!we.IsNumber(e.FrameID)||e.FrameID<0?t=!0:e.CorssCursorTouchEnd&&0==e.IsOnTouch&&(t=!0)}return t}}function $e(){this.newMethod=Qe,this.newMethod(),delete this.newMethod,this.ClassName="DynamicMinuteTitlePainting",this.SpaceWidth=1*C(),this.YClose,this.IsShowDate=!1,this.IsShowTime=!0,this.IsShowName=!0,this.IsShowAveragePrice=!0,this.OverlayChartPaint,this.LanguageID=xo.LANGUAGE_CHINESE_ID,this.LastShowData,this.OnDrawEvent,this.PointInfo=null,this.IsAlwaysShowLastData=!1,this.ShowLastDataFormat=0,this.MultiDayBeforeOpenData,this.MultiDayAfterCloseData,this.TitleBaseLine=1,this.TimeFormat,this.CallAuctionShowTitle=new Rn.default(["MTitle-AC-Price","MTitle-AC-Vol","MTitle-AC-NotMatchVol","MTitle-AC-Increase","MTitle-AC-AvPrice"]),this.GetCurrentKLineData=function(){if(this.LastShowData)return this.LastShowData;if(null==this.CursorIndex||!this.Data)return null;if(this.Data.length<=0)return null;var t=Math.abs(this.CursorIndex);t=parseInt(t.toFixed(0));var e=this.Data.DataOffset+t;return e>=this.Data.Data.length&&(e=this.Data.Data.length-1),e<0?null:this.Data.Data[e]},this.GetCurrentAuctionData=function(){var t=!0===this.Frame.IsHScreen,e={ClientPos:this.PointInfo.ClientPos,X:this.PointInfo.Point.X,Y:this.PointInfo.Point.Y};if(2==this.PointInfo.ClientPos){if(!this.BeforeOpenData)return e;if(!this.CallAcutionXOperator)return e;if(this.CallAcutionXOperator.Value=t?this.PointInfo.Point.Y:this.PointInfo.Point.X,this.CallAcutionXOperator.Point={X:this.PointInfo.Point.X,Y:this.PointInfo.Point.Y},this.CallAcutionXOperator.ClientPos=this.PointInfo.ClientPos,!this.CallAcutionXOperator.Operator())return e;var a={Explain:"BeforeOpen",Data:null,DataIndex:null,DataTotalCount:this.BeforeOpenData.TotalCount};return a.DataIndex=this.CallAcutionXOperator.DataIndex,a.Data=this.CallAcutionXOperator.Item,a.Ver=this.BeforeOpenData.Ver,a}if(3==this.PointInfo.ClientPos){if(!this.AfterCloseData)return e;if(!this.CallAcutionXOperator)return e;if(this.CallAcutionXOperator.Value=t?this.PointInfo.Point.Y:this.PointInfo.Point.X,this.CallAcutionXOperator.Point={X:this.PointInfo.Point.X,Y:this.PointInfo.Point.Y},this.CallAcutionXOperator.ClientPos=this.PointInfo.ClientPos,!this.CallAcutionXOperator.Operator())return e;var a={Explain:"AfterClose",Data:null,DataIndex:null,DataTotalCount:this.AfterCloseData.TotalCount};return a.DataIndex=this.CallAcutionXOperator.DataIndex,a.Data=this.CallAcutionXOperator.Item,a.Ver=this.AfterCloseData.Ver,a}if(this.PointInfo.ClientPos>=200&&this.PointInfo.ClientPos<=299){if(!this.MultiDayBeforeOpenData||!we.IsNonEmptyArray(this.MultiDayBeforeOpenData))return e;var i=1==this.Frame.IsHScreen?this.PointInfo.Point.Y:this.PointInfo.Point.X;if(this.CallAcutionXOperator.Value=i,this.CallAcutionXOperator.Point={X:this.PointInfo.Point.X,Y:this.PointInfo.Point.Y},this.CallAcutionXOperator.ClientPos=this.PointInfo.ClientPos,!this.CallAcutionXOperator.Operator())return e;var r=this.MultiDayBeforeOpenData[this.CallAcutionXOperator.DayIndex],a={Explain:"MultiDayBeforeOpen",Data:null,DataIndex:null};return a.DataIndex=this.CallAcutionXOperator.DataIndex,a.DayIndex=this.CallAcutionXOperator.DayIndex,a.Data=this.CallAcutionXOperator.Item,a.Ver=r.Ver,a}if(this.PointInfo.ClientPos>=300&&this.PointInfo.ClientPos<=399){if(!this.MultiDayAfterCloseData||!we.IsNonEmptyArray(this.MultiDayAfterCloseData))return e;var i=1==this.Frame.IsHScreen?this.PointInfo.Point.Y:this.PointInfo.Point.X;if(this.CallAcutionXOperator.Value=i,this.CallAcutionXOperator.Point={X:this.PointInfo.Point.X,Y:this.PointInfo.Point.Y},this.CallAcutionXOperator.ClientPos=this.PointInfo.ClientPos,!this.CallAcutionXOperator.Operator())return e;var r=this.MultiDayAfterCloseData[this.CallAcutionXOperator.DayIndex],a={Explain:"MultiDayAfterClose",Data:null,DataIndex:null};return a.DataIndex=this.CallAcutionXOperator.DataIndex,a.DayIndex=this.CallAcutionXOperator.DayIndex,a.Data=this.CallAcutionXOperator.Item,a.Ver=r.Ver,a}return e},this.GetLatestKLineData=function(t){var e,a=null,i=1;if(we.IsNonEmptyArray(this.MultiDayBeforeOpenData)){var r=this.MultiDayBeforeOpenData[this.MultiDayBeforeOpenData.length-1];r&&we.IsNonEmptyArray(r.Data)&&(i=r.Ver,a=r.Data[r.Data.length-1],e="MultiDayBeforeOpen")}else this.BeforeOpenData&&we.IsNonEmptyArray(this.BeforeOpenData.Data)&&(a=this.BeforeOpenData.Data[this.BeforeOpenData.Data.length-1],i=this.BeforeOpenData.Ver,e="BeforeOpen");var n,o=null,s=1;if(we.IsNonEmptyArray(this.MultiDayAfterCloseData)){var r=this.MultiDayAfterCloseData[this.MultiDayAfterCloseData.length-1];r&&we.IsNonEmptyArray(r.Data)&&(s=r.Ver,o=r.Data[r.Data.length-1],n="MultiDayAfterClose",r.Data.length==r.TotalCount&&(o=null))}else this.AfterOpenData&&we.IsNonEmptyArray(this.AfterOpenData.Data)&&(o=this.AfterOpenData.Data[this.AfterOpenData.Data.length-1],s=this.AfterOpenData.Ver,n="AfterClose");var l=null;if(this.Data&&we.IsNonEmptyArray(this.Data.Data)){var h=this.Data.Data.length;l=this.Data.Data[h-1]}return a||o||l?t?l?a&&l&&(a.Date>l.Date||a.Date==l.Date&&a.Time>l.Time&&1==i||a.Date==l.Date&&parseInt(a.Time>l.Time)&&2==i)?{Type:2,Data:a,Ver:i,Explain:e}:o&&l&&o.Date>=l.Date?{Type:1,Data:o,Ver:s,Explain:n}:{Type:0,Data:l}:{Type:1,Data:a,Ver:i,Explain:e}:{Type:0,Data:l}:null},this.GetFormatTitle=function(t){if(t&&t.Data){var e=this.Symbol.toUpperCase(),a=sr(this.Symbol),i=wo.IsFutures(e),r=t.Data,n=t.IsLastOne,o=[];if(this.IsShowName&&o.push({Text:this.Name,Color:this.NameColor}),this.IsShowDate||this.IsShowTime){var s=!1;if(n&&1==this.ShowLastDataFormat&&this.Data&&this.Data.UpdateTime&&we.IsNumber(this.Data.UpdateTime.Date)&&we.IsNumber(this.Data.UpdateTime.Time)){var l=we.FormatTimeString(this.Data.UpdateTime.Time,"HH:MM:SS");o.push({Text:l,Color:this.DateTimeColor}),s=!0}if(!s)if(this.TimeFormat){var h=null,u=null,l=null;this.IsShowDate&&(h=we.FormatDateString("YYYY-MM-DD",r.Date)),this.IsShowTime&&(u=we.FormatTimeString(r.Time,this.TimeFormat)),h&&u?l=h+" "+u:h?l=h:u&&(l=u),l&&o.push({Text:l,Color:this.DateTimeColor})}else{var l=we.FormatDateTimeString(r.DateTime,this.IsShowDate,this.IsShowTime);o.push({Text:l,Color:this.DateTimeColor})}}var C=r.Close,c=r.Increase,f=r.Vol,d=r.Amount,D=r.YClose;if(we.IsNumber(D)||(D=this.YClose),i&&we.IsNumber(r.YClearing)&&(D=r.YClearing),we.IsNumber(C)){var m=this.GetColor(C,D),l=bo.GetText("MTitle-Close",this.LanguageID)+C.toFixed(a);o.push({Text:l,Color:m})}if(we.IsNumber(c)){var m=this.GetColor(c,0),l=bo.GetText("MTitle-Increase",this.LanguageID)+c.toFixed(2)+"%";o.push({Text:l,Color:m})}var p=!0,e=this.Symbol.toUpperCase();if(wo.IsET(e)&&!wo.IsETShowAvPrice(e)?p=!1:wo.IsShowAvPrice&&!wo.IsShowAvPrice(e)&&(p=!1),we.IsNumber(r.AvPrice)&&p&&this.IsShowAveragePrice){var m=this.GetColor(r.AvPrice,D),l=bo.GetText("MTitle-AvPrice",this.LanguageID)+r.AvPrice.toFixed(a);o.push({Text:l,Color:m})}if(we.IsNumber(f)){var l=bo.GetText("MTitle-Vol",this.LanguageID)+we.FromatIntegerString(f,2,this.LanguageID);o.push({Text:l,Color:this.VolColor})}if(we.IsNumber(d)){var l=bo.GetText("MTitle-Amount",this.LanguageID)+we.FormatValueString(d,2,this.LanguageID);o.push({Text:l,Color:this.AmountColor})}if(we.IsNumber(r.Position)){var l=bo.GetText("MTitle-Position",this.LanguageID)+we.FromatIntegerString(r.Position,2,this.LanguageID);o.push({Text:l,Color:this.VolColor})}if(n&&0==this.ShowLastDataFormat&&this.Data&&this.Data.UpdateTime&&we.IsNumber(this.Data.UpdateTime.Date)&&we.IsNumber(this.Data.UpdateTime.Time)){var l=bo.GetText("MTitle-UpdateTime",this.LanguageID)+we.FormatTimeString(this.Data.UpdateTime.Time,"HH:MM:SS");o.push({Text:l,Color:this.DateTimeColor})}if(we.IsNonEmptyArray(this.OverlayChartPaint))for(var v=0;v<this.OverlayChartPaint.length;++v){var r=this.OverlayChartPaint[v];if(r.Symbol&&r.Title){var g=r.Color,l="["+r.Title+"]";o.push({Text:l,Color:g})}}return{AryText:o}}},this.DrawItem=function(t,e){if(t){var a=C(),i=!0===this.Frame.IsHScreen,r=this.Frame.GetBorder(),n=r.Left,o=r.Top-this.Frame.ChartBorder.Top/2;sr(this.Symbol);if(this.Canvas.font=this.Font,i){if(this.Frame.ChartBorder.Right<5*a)return;var n=2,o=this.Frame.ChartBorder.Right/2,s=r.ChartWidth,l=r.Top;this.Canvas.translate(s,l),this.Canvas.rotate(90*Math.PI/180)}else if(this.Frame.ChartBorder.Top<5*a)return;if(this.Canvas.textAlign="left",0==this.TitleBaseLine)this.Canvas.textBaseline="top",o=2*a;else if(2==this.TitleBaseLine){this.Canvas.textBaseline="bottom";var o=r.Top}else this.Canvas.textBaseline="middle";var h={Left:n,Bottom:o,IsHScreen:i},u=this.GetFormatTitle({Data:t,IsLastOne:e});if(u&&we.IsNonEmptyArray(u.AryText))for(var c=0;c<u.AryText.length;++c){var t=u.AryText[c];if(!this.DrawText(t.Text,t.Color,h))break}}},this.FormatCallAuctionTitle=function(t){var e=[],a=sr(this.Symbol);if(this.IsShowName&&e.push({Text:this.Name,Color:this.NameColor}),t&&t.Data){var i,r,n,o=t.Data;n=we.FormatDateString(o.Date);var s=o.YClose;if(r=1==t.Ver?we.FormatTimeString(o.Time,"HH:MM"):we.FormatTimeString(o.Time,"HH:MM:SS"),i="MultiDayBeforeOpen"==t.Explain||"MultiDayAfterClose"==t.Explain?n+" "+r:r,e.push({Text:i,Color:this.DateTimeColor}),we.IsNumber(o.Price)&&this.CallAuctionShowTitle.has("MTitle-AC-Price")){var l=this.GetColor(o.Price,s),h="MTitle-AC-Price";1==t.Ver&&(h="MTitle-Close");var i=bo.GetText(h,this.LanguageID)+o.Price.toFixed(a);e.push({Text:i,Color:l})}if(we.IsPlusNumber(s)&&we.IsNumber(o.Price)&&this.CallAuctionShowTitle.has("MTitle-AC-Increase")){var u=(o.Price-s)/s*100,l=this.GetColor(u,0),h="MTitle-AC-Increase";1==t.Ver&&(h="MTitle-Increase");var i=bo.GetText(h,this.LanguageID)+u.toFixed(2)+"%";e.push({Text:i,Color:l})}if(we.IsNumber(o.AvPrice)&&this.CallAuctionShowTitle.has("MTitle-AC-AvPrice")){var l=this.GetColor(o.AvPrice,s),i=bo.GetText("MTitle-AC-AvPrice",this.LanguageID)+o.AvPrice.toFixed(a);e.push({Text:i,Color:l})}if(we.IsNumber(o.Vol[0])&&this.CallAuctionShowTitle.has("MTitle-AC-Vol")){var h="MTitle-AC-Vol";1==t.Ver&&(h="MTitle-Vol");var i=bo.GetText(h,this.LanguageID)+we.FromatIntegerString(o.Vol[0],2);e.push({Text:i,Color:this.VolColor})}if(we.IsNumber(o.Vol[1])&&this.CallAuctionShowTitle.has("MTitle-AC-NotMatchVol")){var i=bo.GetText("MTitle-AC-NotMatchVol",this.LanguageID)+we.FromatIntegerString(o.Vol[1],2);e.push({Text:i,Color:this.VolColor})}if(o.ExtendData&&we.IsNonEmptyArray(o.ExtendData.Amount)){var C=o.ExtendData.Amount;if(we.IsNumber(C[0])&&this.CallAuctionShowTitle.has("MTitle-AC-Amount")){var i=bo.GetText("MTitle-AC-Amount",this.LanguageID)+we.FromatIntegerString(C[0],2);e.push({Text:i,Color:this.AmountColor})}if(we.IsNumber(C[1])&&this.CallAuctionShowTitle.has("MTitle-AC-NotMatchAmount")){var i=bo.GetText("MTitle-AC-NotMatchAmount",this.LanguageID)+we.FromatIntegerString(C[1],2);e.push({Text:i,Color:this.AmountColor})}}}return{AryText:e}},this.DrawCallAuction=function(){var t=!0===this.Frame.IsHScreen,e=this.Frame.GetBorder(),a=C(),i=e.Left,r=e.Top-this.Frame.ChartBorder.Top/2,n=!0;if(t){if(this.Frame.ChartBorder.Right<5*a)return;var i=2,r=this.Frame.ChartBorder.Right/2,o=e.ChartWidth,s=e.Top;this.Canvas.translate(o,s),this.Canvas.rotate(90*Math.PI/180)}else this.Frame.ChartBorder.Top<5&&(n=!1);if(this.Canvas.textAlign="left",this.Canvas.font=this.Font,0==this.TitleBaseLine)this.Canvas.textBaseline="top",r=2*a;else if(2==this.TitleBaseLine){this.Canvas.textBaseline="bottom";var r=e.Top}else this.Canvas.textBaseline="middle";var l={Left:i,Bottom:r,IsHScreen:t},h=this.GetCurrentAuctionData(),u=this.FormatCallAuctionTitle(h);if(n&&u&&we.IsNonEmptyArray(u.AryText))for(var c=0;c<u.AryText.length;++c){var f=u.AryText[c];if(!this.DrawText(f.Text,f.Color,l))break}this.OnDrawCallAuctionEventCallback(h)},this.OnDrawCallAuctionEventCallback=function(t){if(this.OnDrawEvent&&this.OnDrawEvent.Callback){var e={Draw:t,Name:this.ClassName};this.OnDrawEvent.Callback(this.OnDrawEvent,e,this)}if(this.OnMouseMoveEvent&&this.OnMouseMoveEvent.Callback){var e={Draw:t,Name:this.ClassName};this.OnMouseMoveEvent.Callback(this.OnDrawEvent,e,this)}},this.DrawNone=function(){this.OnDrawEventCallback(null),this.IsAlwaysShowLastData&&(this.Canvas.save(),this.DrawLastDataItem(),this.Canvas.restore())},this.Draw=function(){if(this.LastShowData=null,this.GlobalOption=this.Frame.GlobalOption,!this.IsShow){if(!(this.OnDrawEvent&&this.OnDrawEvent.Callback||this.OnMouseMoveEvent&&this.OnMouseMoveEvent.Callback))return}if(this.PointInfo&&(2==this.PointInfo.ClientPos||3==this.PointInfo.ClientPos||this.PointInfo.ClientPos>=200&&this.PointInfo.ClientPos<=299||this.PointInfo.ClientPos>=300&&this.PointInfo.ClientPos<=399))return this.Canvas.save(),this.DrawCallAuction(),void this.Canvas.restore();if(!this.Data||!this.Data.Data||this.Data.Data.length<=0)return void this.DrawNone();if(!(null!=this.CursorIndex||this.GlobalOption&&this.GlobalOption.IsDisplayLatest))return void this.DrawNone();this.Canvas.font=this.Font,this.SpaceWidth=this.Canvas.measureText("0").width;var t=!1;if(this.DrawStatus&&this.DrawStatus.IsTitleShowLatestData){var e=this.DrawStatus;!we.IsNumber(e.FrameID)||e.FrameID<0?t=!0:e.CorssCursorTouchEnd&&0==e.IsOnTouch&&(t=!0)}else this.GlobalOption&&this.GlobalOption.IsDisplayLatest&&(t=!0);var a=!1;if(t){var i=null,r=this.GetLatestKLineData(!0);r&&0==r.Type&&(i=r.Data),a=!0}else{var n=this.CursorIndex;n=parseInt(n.toFixed(0));var o=n+this.Data.DataOffset;o>=this.Data.Data.length&&(o=this.Data.Data.length-1);var i=this.Data.Data[o];o==this.Data.Data.length-1&&(a=!0)}this.LastShowData=i,this.Canvas.save(),this.OnDrawEventCallback(i),this.IsAlwaysShowLastData?this.DrawLastDataItem():this.DrawItem(i,a),this.Canvas.restore()},this.DrawCallAuctionItem=function(t,e){if(t){var a=t.Data,i=(t.Ver,!0===this.Frame.IsHScreen),r=this.Frame.GetBorder(),n=r.Left,o=r.Top-this.Frame.ChartBorder.Top/2,s=!0;if(i){var n=2,o=this.Frame.ChartBorder.Right/2,l=r.ChartWidth,h=r.Top;this.Canvas.translate(l,h),this.Canvas.rotate(90*Math.PI/180)}else this.Frame.ChartBorder.Top<5&&(s=!1);if(this.Canvas.textAlign="left",this.Canvas.font=this.Font,0==this.TitleBaseLine)this.Canvas.textBaseline="top",o=2*C();else if(2==this.TitleBaseLine){this.Canvas.textBaseline="bottom";var o=r.Top}else this.Canvas.textBaseline="middle";var u={Left:n,Bottom:o,IsHScreen:i},c=this.FormatCallAuctionTitle(t);if(s&&c&&we.IsNonEmptyArray(c.AryText))for(var f=0;f<c.AryText.length;++f){var a=c.AryText[f];if(!this.DrawText(a.Text,a.Color,u))break}}},this.DrawLastDataItem=function(){var t=this.GetLatestKLineData(!0);t&&(0==t.Type?this.DrawItem(t.Data,!0):1!=t.Type&&2!=t.Type||this.DrawCallAuctionItem(t,!0))}}function ta(t,e,a){this.Data=t,this.Name=e,this.Color=a,this.DataType,this.ChartClassName,this.StringFormat=Io.DEFAULT,this.FloatPrecision=2,this.IsShow=!0,this.Callback,this.ExtendData}function ea(){this.newMethod=je,this.newMethod(),delete this.newMethod,this.ClassName="DynamicChartTitlePainting",this.IsDynamic=!0,this.Data=[],this.Explain,this.ColorIndex,this.IsShowColorIndexTitle=!0,this.IsShowUpDownArrow=!0,this.TitleArrowType=0,this.IsShowIndexName=!0,this.IsShowIndexTitle=!0,this.IsShowNameArrow=!1,this.NameArrowConfig=I(So.IndexTitle.NameArrow),this.TradeIndex,this.IsShowTradeIndexTitle=!0,this.OverlayIndex=new Vn.default,this.IsShowOverlayIndexName=!0,this.OverlayIndexType={Position:0,LineSpace:5,BGColor:So.OverlayIndexTitleBGColor},this.LanguageID=xo.LANGUAGE_CHINESE_ID,this.TitleRect,this.IsDrawTitleBG=!1,this.BGColor=So.IndexTitleBGColor,this.BGBorderColor=So.IndexTitleBorderColor,this.BGBorderMoveOnColor=So.IndexTitleBorderMoveOnColor,this.BorderRoundRadius=2,this.NameButtonStyle=So.IndexTitleBorderStyle,this.OnDrawEvent,this.ParamSpace=2,this.TitleSpace=2,this.TitleColor=So.IndexTitleColor,this.SelectedColor=So.IndexTitleSelectedColor,this.IsKLineFrame=!1,this.IsMinuteFrame=!1,this.Identify,this.SelectedChart,this.ArgumentsText,this.MerginLeft=So.IndexTitleMerginLeft,this.Buttons=[],this.UpDownArrowConfig={UpColor:So.IndexTitle.UpDownArrow.UpColor,DownColor:So.IndexTitle.UpDownArrow.DownColor,UnchangeColor:So.IndexTitle.UpDownArrow.UnchangeColor},this.DynamicTitle={OutName:null,OutValue:null},this.OverlayDynamicTitle=new Vn.default,this.IsShowMainIndexTitle=!0,this.MainTitlePaint=null,this.ReloadResource=function(){this.Font=So.TitleFont,this.TitleColor=So.DefaultTextColor,this.OverlayIndexType.BGColor=So.OverlayIndexTitleBGColor},this.SetDynamicTitleData=function(t,e,a){a.OutName?a.OutName.clear():a.OutName=new Vn.default,a.OutValue?a.OutValue.clear():a.OutValue=new Vn.default;var i=new Vn.default;for(var r in e){var n=e[r];i.set("{"+n.Name+"}",n)}for(var r in t){var n=t[r];if(n.DynamicName){var o=n.DynamicName.match(/{\w*}/i);if(!o||o.length<=0)a.OutName.set(n.Name,n.DynamicName);else{for(var s=n.DynamicName,l=!0,h=0;h<o.length;++h){var u=o[h];if(!i.has(u)){l=!1;break}var C=i.get(u).Value;s=s.replace(u,C.toString())}l&&a.OutName.set(n.Name,s)}}n.DynamicValue&&a.OutValue.set(n.Name,n.DynamicValue)}},this.SetDynamicTitle=function(t,e,a){if(we.IsString(a)){var i=null;this.OverlayDynamicTitle.has(a)?i=this.OverlayDynamicTitle.get(a):(i={OutName:null,OutValue:null},this.OverlayDynamicTitle.set(a,i)),this.SetDynamicTitleData(t,e,i)}else this.SetDynamicTitleData(t,e,this.DynamicTitle)},this.GetDynamicOutName=function(t,e){if(we.IsString(e)){if(!this.OverlayDynamicTitle.has(e))return null;var a=this.OverlayDynamicTitle.get(e),i=a.OutName}else var i=this.DynamicTitle.OutName;return!i||i.size<=0?null:i.has(t)?i.get(t):null},this.GetDynamicOutValue=function(t,e){var a=this.DynamicTitle.OutValue;if(!a||a.size<=0)return null;if(!a.has(t))return null;var i=a.get(t);return i=i.replace("{Value}",e)},this.IsClickTitle=function(t,e){return!!this.TitleRect&&(t>this.TitleRect.Left&&t<this.TitleRect.Left+this.TitleRect.Width&&e>this.TitleRect.Top&&e<this.TitleRect.Top+this.TitleRect.Height)},this.FormatValue=function(t,e){return e.StringFormat==Io.DEFAULT?we.FormatValueString(t,e.FloatPrecision,this.LanguageID):e.StringFormat==Io.THOUSANDS?we.FormatValueThousandsString(t,e.FloatPrecision):e.StringFormat==Io.ORIGINAL?t.toFixed(e.FloatPrecision).toString():e.StringFormat==Io.INTEGER?we.FromatIntegerString(t,e.FloatPrecision,this.LanguageID):void 0},this.FormatMultiReport=function(t,e){var a="";for(var i in t){var r=t[i],n=r.Quarter,o=r.Year,s=r.Value;switch(a.length>0&&(a+=","),a+=o.toString(),n){case 1:a+="ä¸å­£æ¥ ";break;case 2:a+="åå¹´æ¥ ";break;case 3:a+="ä¸å­£æ¥ ";break;case 4:a+="å¹´æ¥ "}a+=this.FormatValue(s,e)}return a},this.FromatMultiDataLine=function(t,e){var a="";if(Array.isArray(t))for(var i=0;i<t.length;++i){var r=t[i];if(0!=r.Type&&we.IsNumber(r.Value)){var n=this.FormatValue(r.Value,e);a.length>0&&(a+=","),a+=n}}else 0!=t.Type&&we.IsNumber(t.Value)&&(a=this.FormatValue(t.Value,e));return a.length<=0?null:a},this.FromatStackedBarTitle=function(t,e){if(!we.IsNonEmptyArray(t))return null;if(!we.IsNonEmptyArray(e.Color))return null;for(var a=[],i=0;i<t.length;++i){var r=t[i];if(we.IsNumber(r)){var n={Text:r.toFixed(2)};e.Name&&e.Name[i]&&(n.Name=e.Name[i]),n.Color=e.Color[i],a.push(n)}}return a.length<=0?null:a},this.ForamtMultiLineTitle=function(t,e){if(!we.IsNonEmptyArray(e.Lines))return null;for(var a=[],i=0;i<e.Lines.length;++i)for(var r=e.Lines[i],n=0;n<r.Point.length;++n){var o=r.Point[n];if(o.Index==t){var o={Text:o.Value.toFixed(2)};0==a.length&&(o.Name=e.Name),o.Color=r.Color,a.push(o);break}}return we.IsNonEmptyArray(a)?a:null},this.ForamtMultiPointTitle=function(t,e){if(!we.IsNonEmptyArray(e.PointGroup))return null;for(var a=[],i=0;i<e.PointGroup.length;++i)for(var r=e.PointGroup[i],n=0;n<r.Point.length;++n){var o=r.Point[n];if(o.Index==t){var o={Text:o.Value.toFixed(2)};0==a.length&&(o.Name=e.Name),o.Color=r.BGColor,a.push(o);break}}return we.IsNonEmptyArray(a)?a:null},this.FormatVPVRTitle=function(t,e){var a=e.Chart,i=[];if(0==a.VolType){var r={Text:" Up/Down ",Color:this.TitleColor};i.push(r)}else{var r={Text:" Total ",Color:this.TitleColor};i.push(r)}if(!we.IsNumber(t.Y))return i;var n=this.Frame.ChartBorder.GetTopEx(),o=this.Frame.ChartBorder.GetBottomEx();if(t.Y<n||t.Y>o)return i;for(var s=this.Frame.GetYData(t.Y),l=null,h=0;h<e.Data.Data.length;++h){var r=e.Data.Data[h];if(s>=r.Price-e.Data.PriceOffset/2&&s<r.Price+e.Data.PriceOffset/2){l=r;break}}if(!l)return null;if(0==a.VolType){for(var u=0,h=0;h<l.Vol.length;++h){var C=l.Vol[h];if(we.IsNumber(C.Value)){var r={Text:we.FormatVolString(C.Value,this.LanguageID)};u+=C.Value,we.IsNumber(C.ColorID)?r.Color=a.BarColor[C.ColorID]:C.Color&&(r.Color=C.Color),i.push(r)}}var r={Text:we.FormatVolString(u,this.LanguageID),Color:this.TitleColor};i.push(r)}else if(l.TotalVol&&we.IsNumber(l.TotalVol.Value)){var r={Text:we.FormatVolString(l.TotalVol.Value,this.LanguageID)};we.IsNumber(l.TotalVol.ColorID)?r.Color=a.BarColor[l.TotalVol.ColorID]:l.TotalVol.Color&&(r.Color=l.TotalVol.Color),i.push(r)}return i},this.IsShowLastData=function(){var t=!1;if(this.DrawStatus&&this.DrawStatus.IsTitleShowLatestData){var e=this.DrawStatus;!we.IsNumber(e.FrameID)||e.FrameID<0?t=!0:e.CorssCursorTouchEnd&&0==e.IsOnTouch&&(t=!0)}else this.GlobalOption&&this.GlobalOption.IsDisplayLatest&&(t=!0);return t},this.OnDrawTitleEvent=function(){var t=this.GetEventCallback(Kn.ON_INDEXTITLE_DRAW);if(t){var e={Index:null,Data:this.Data,Title:this.Title,Script:this.Script,FrameID:this.Frame.Identify,OverlayIndex:this.OverlayIndex,IsShowTitleOnly:!1};if(this.ArgumentsText&&(e.ArgumentsText=this.ArgumentsText),this.Frame&&this.Frame.ChartBorder&&(e.IsShowTitleOnly=this.Frame.ChartBorder.IsShowTitleOnly),we.IsNumber(this.CursorIndex)){var a=Math.abs(this.CursorIndex);a=parseInt(a.toFixed(0)),e.Index=a}var i=C(),r=this.Frame.GetBorder();e.Left=r.LeftEx/i,e.Top=r.Top/i,e.Right=r.RightEx/i,t.Callback(t,e,this)}},this.IsSelectedChart=function(t){return!!t&&(!!this.SelectedChart&&(!!this.SelectedChart.Selected&&this.SelectedChart.Selected.Identify==t))},this.Draw=function(t,e){if(this.Buttons=[],!this.Frame.IsMinSize&&(this.IsKLineFrame=this.Frame.IsKLineFrame(!1),this.IsMinuteFrame=this.Frame.IsMinuteFrame(!1),this.IsDrawTitleBG=this.Frame.IsDrawTitleBG,this.IsShowNameArrow=this.Frame.IsShowNameArrow,this.IsShowUpDownArrow=this.Frame.IsShowTitleArrow,this.TitleArrowType=this.Frame.TitleArrowType,this.IsShowIndexName=this.Frame.IsShowIndexName,this.IsShowOverlayIndexName=this.Frame.IsShowOverlayIndexName,this.OverlayIndexType.Position=this.Frame.OverlayIndexType.Position,this.OverlayIndexType.LineSpace=this.Frame.OverlayIndexType.LineSpace,this.ParamSpace=this.Frame.IndexParamSpace,this.TitleSpace=this.Frame.IndexTitleSpace,this.TitleRect=null,this.GlobalOption=this.Frame.GlobalOption,this.OnDrawTitleEvent(),0!=this.Frame.IsShowIndexTitle&&!0!==So.IsDOMFrameTitle&&this.Data&&!(this.Frame.ChartBorder.TitleHeight<5)&&(null!=this.CursorIndex||this.GlobalOption&&this.GlobalOption.IsDisplayLatest))){if(!0===this.Frame.IsHScreen)return this.Canvas.save(),this.HScreenDraw(),void this.Canvas.restore();var a=this.Frame.ChartBorder.GetLeft()+this.MerginLeft,i=this.Frame.ChartBorder.GetTop()+this.Frame.ChartBorder.TitleHeight/2,r=this.Frame.ChartBorder.GetRight(),n={Width:0,YCenter:i};this.DrawToolbar(n,t,e),a+=n.Width,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.font=this.Font;var o=C();if(this.Title&&this.IsShowIndexName&&this.IsShowMainIndexTitle)if(this.IsDrawTitleBG){var s={Left:a,YCenter:i,Width:0};this.DrawNameButton(s,t,e),this.Buttons.push({ID:qn.INDEX_NAME_BUTTON,Rect:s,FrameID:this.Frame.Identify,Type:2}),this.IsSelectedChart(this.Identify)&&this.DrawSelectedLine(a,i,l),this.TitleRect=s,a+=s.Width+3*o,a+=this.TitleSpace}else{var l=this.Canvas.measureText(this.Title).width+2;this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(this.Title,a,i,l),this.IsSelectedChart(this.Identify)&&this.DrawSelectedLine(a,i,l),a+=l,a+=this.TitleSpace}if(this.ArgumentsText&&this.IsShowIndexName&&this.IsShowMainIndexTitle){var l=this.Canvas.measureText(this.ArgumentsText).width+2;this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(this.ArgumentsText,a,i,l),a+=l,a+=this.TitleSpace}var h=this.IsShowLastData(),u=this.Frame.GetLockRect();if(u){var c=Math.abs(this.CursorIndex);this.IsKLineFrame&&(c=this.CursorIndex);if(this.Frame.GetXFromIndex(c.toFixed(0))>=u.Left)return;if(h)return}var f={Left:a,Right:a};if(this.IsMinuteFrame&&this.PointInfo&&(2==this.PointInfo.ClientPos||3==this.PointInfo.ClientPos||this.PointInfo.ClientPos>=200&&this.PointInfo.ClientPos<=299||this.PointInfo.ClientPos>=300&&this.PointInfo.ClientPos<=399)){var d={PreventDefault:!1};this.DrawMainCallAuction({Left:a,Right:r,Bottom:i},f,d),!1===d.PreventDefault&&this.DrawMainIndexTitle({Left:a,Right:r,Bottom:i},h,f)}else this.DrawMainIndexTitle({Left:a,Right:r,Bottom:i},h,f);if(a=f.Left,this.Explain){this.Canvas.fillStyle=this.TitleColor;var D="è¯´æ:"+this.Explain,l=this.Canvas.measureText(D).width+2;a+l<r&&(this.Canvas.fillText(D,a,i,l),a+=l)}if(this.ColorIndex&&this.IsShowColorIndexTitle){this.Canvas.fillStyle=So.Title.ColorIndexColor;var m=this.ColorIndex.Name+this.ColorIndex.Param,l=this.Canvas.measureText(m).width+2;this.Canvas.fillText(m,a,i,l),a+=l}if(this.TradeIndex&&this.IsShowTradeIndexTitle){this.Canvas.fillStyle=So.Title.TradeIndexColor;var m=this.TradeIndex.Name+this.TradeIndex.Param,l=this.Canvas.measureText(m).width+2;this.Canvas.fillText(m,a,i,l),a+=l}if(1==this.OverlayIndexType.Position)this.Frame.ChartBorder.IsShowTitleOnly||this.DrawOverlayIndexSingleLine(t,e);else{var p=10*C();this.IsShowMainIndexTitle||(p=0),this.DrawOverlayIndex(a+p)}}},this.GetTitleItem=function(t,e,a){if(!t||!t.Data||!t.Data.Data)return null;if(Array.isArray(t.Data.Data)&&t.Data.Data.length<=0)return null;if(!1===t.IsShow)return null;if(!1===t.IsVisible)return null;var i=null,r=null,n=null,o=null;if("StraightLine"==t.DataType)n=t.Data.Data[0],i=this.FormatValue(n,t);else{if("ChartVolProfileVisibleRange"==t.ChartClassName)return r=this.FormatVPVRTitle(this.LastPoint,t),r?{Text:null,ArrayText:r}:null;if(e)var s=t.Data.Data.length-1;else{var l=Math.abs(this.CursorIndex);l=parseInt(l.toFixed(0)),this.IsKLineFrame&&(l=this.CursorIndex);var s=t.Data.DataOffset+l;if(s>=t.Data.Data.length&&(s=t.Data.Data.length-1),s<0)return null}if("ChartMultiLine"==t.DataType)return r=this.ForamtMultiLineTitle(s,t),r?{Text:null,ArrayText:r}:null;if("ChartMultiPoint"==t.DataType)return r=this.ForamtMultiPointTitle(s,t),r?{Text:null,ArrayText:r}:null;if(null==(n=t.Data.Data[s])&&"ChartStepLine"==t.ChartClassName){if(!(o=this.GetPreVaildItem(t.Data.Data,s)))return null;if(preText=this.FormatValue(o.Item,t),t.Name){var h=this.GetDynamicOutValue(t.Name,preText);h&&(preText=h)}return i="--("+preText+")",{Text:i,ArrayText:r}}if(null==n)return null;if("HistoryData-Vol"==t.DataType)n=n.Vol,i=this.FormatValue(n,t);else if("MultiReport"==t.DataType)i=this.FormatMultiReport(n,t);else if("MULTI_POINT_LINE"==t.DataType){if(!(i=this.FromatMultiDataLine(n,t)))return null}else{if("ChartStackedBar"==t.DataType)return r=this.FromatStackedBarTitle(n,t),r?{Text:null,ArrayText:r}:null;if(Zo.Has(t.DataType)){var u=Zo.Get(t.DataType);if(u&&u.FormatTitleCallback)return u.FormatTitleCallback(n,t,s)}else{if(this.GetEventCallback){var C=this.GetEventCallback(Kn.ON_FORMAT_INDEX_OUT_TEXT);if(C){var c={Item:t,Index:a,Data:this.Data,FrameID:this.Frame.Identify,DataIndex:s,Value:n,Out:null};if(C.Callback(C,c,this),c.Out)return c.Out}}if("ChartBand"==t.DataType)return null;var f=null;if(this.IsShowUpDownArrow){var d=null;s-1>=0&&(d=t.Data.Data[s-1]),we.IsNumber(d)&&(f=d>n?{Text:"â",TextColor:this.UpDownArrowConfig.DownColor}:d<n?{Text:"â",TextColor:this.UpDownArrowConfig.UpColor}:{Text:"â",TextColor:this.UpDownArrowConfig.UnchangeColor},1==this.TitleArrowType&&(f.TextColor=t.Color))}if(i=this.FormatValue(n,t),t.Name){var h=this.GetDynamicOutValue(t.Name,i);h&&(i=h)}if(f){var D={Name:null,Text:i,Color:t.Color,TextEx:[f]};if(t.Name){var m=t.Name,p=this.GetDynamicOutName(t.Name);p&&(m=p),D.Name=m}r=[D],i=null}}}}return{Text:i,ArrayText:r}},this.DrawMainIndexTitle=function(t,e,a){if(this.IsShowMainIndexTitle){for(var i=t.Left,r=t.Right,n=t.Bottom,o=0;o<this.Data.length;++o){var s=this.Data[o],l=this.GetTitleItem(s,e,o);if(l){var h=l.Text,u=l.ArrayText;if(u)for(var c,f=0;f<u.length;++f){var d=u[f];c=d.Name?d.Name+":"+d.Text:d.Text;var D=this.ParamSpace*C(),m=this.Canvas.measureText(c).width,p=m;if(we.IsNonEmptyArray(d.TextEx))for(var v=i,g=0;g<d.TextEx.length;++g){var T=d.TextEx[g],I=this.Canvas.measureText(T.Text).width+2;T.Width=I,T.Left=v,p+=I,v+=I}if(i+p+D>r)break;if(d.BG){var S=this.Canvas.measureText("æ").width+2,x={Left:i,Top:n-S/2,Width:p,Height:S};if(this.Canvas.fillStyle=d.BG,this.Canvas.fillRect(x.Left,x.Top-1,x.Width,x.Height),this.Canvas.fillStyle=d.Color,this.Canvas.fillText(c,x.Left+1,n,m),i+=m,we.IsNonEmptyArray(d.TextEx))for(var g=0;g<d.TextEx.length;++g){var T=d.TextEx[g];this.Canvas.fillStyle=T.TextColor,this.Canvas.fillText(T.Text,i,n,T.Width),i+=T.Width}i+=D}else{if(this.Canvas.fillStyle=d.Color,this.Canvas.fillText(c,i,n,m),i+=m,we.IsNonEmptyArray(d.TextEx))for(var g=0;g<d.TextEx.length;++g){var T=d.TextEx[g];this.Canvas.fillStyle=T.TextColor,this.Canvas.fillText(T.Text,i,n,T.Width),i+=T.Width}i+=D}}else{this.Canvas.fillStyle=s.Color;var c=h;if(s.Name){var b=this.GetDynamicOutName(s.Name);c=b?b+":"+h:s.Name+":"+h}var D=this.ParamSpace*C(),p=this.Canvas.measureText(c).width+D;if(i+p>r)break;this.Canvas.fillText(c,i,n,p),i+=p}}}a.Left=i}},this.DrawMainCallAuction=function(t,e,a){if(this.IsShowMainIndexTitle&&this.MainTitlePaint){var i=this.MainTitlePaint.GetCurrentAuctionData();if(i&&i.Data&&this.GetEventCallback){var r=this.GetEventCallback(Kn.ON_FORMAT_CALL_AUCTION_INDEX_TITLE);if(r){var n={AuctionData:i,Data:this.Data,FrameID:this.Frame.Identify,Out:null,PreventDefault:!1};if(r.Callback(r,n,this),a.PreventDefault=n.PreventDefault,we.IsNonEmptyArray(n.Out)){for(var o=t.Left,s=t.Right,l=t.Bottom,h=C(),u=n.Out,c=0;c<u.length;++c){var f=u[c];if(f.Text){var d=this.Canvas.measureText(f.Text).width+2;if(o+d>s)break;if(f.BGColor){var D=this.Canvas.measureText("æ").width+2,m={Left:o,Top:l-D/2,Width:d,Height:D};this.Canvas.fillStyle=f.BGColor,this.Canvas.fillRect(m.Left,m.Top-1,m.Width,m.Height),o+=1}this.Canvas.fillStyle=f.Color,this.Canvas.fillText(f.Text,o,l,d),o+=d,we.IsPlusNumber(f.Space)&&(o+=f.Space*h)}}e.Left=o}}}}},this.GetCallAuctionTitleItem=function(t,e,a){if(!1===t.IsShow)return null;if(!1===t.IsVisible)return null;if(!t||!t.Data||!t.Data.Data)return null;if(Zo.Has(t.DataType)){var i=Zo.Get(t.DataType);if(i&&i.FormatTitleCallback)return i.FormatTitleCallback(value,t,dataIndex)}},this.GetPreVaildItem=function(t,e){for(var a=e;a>=0;--a){var i=t[a];if(i)return{Item:i,Index:a}}return null},this.DrawSelectedLine=function(t,e,a){this.Canvas.save();var i=this.GetFontHeight();this.Canvas.strokeStyle=this.SelectedColor;var r=v(4,e+i/2);this.Canvas.lineWidth=4,this.Canvas.beginPath(),this.Canvas.moveTo(t,r),this.Canvas.lineTo(t+a,r),this.Canvas.stroke(),this.Canvas.restore()},this.DrawOverlayIndexSingleLine=function(t,e){var a=C(),i=this.Frame.GetBorder();if(!0===this.Frame.IsHScreen)var r=1,n=2*a,o=this.Frame.ChartBorder.GetHeight(),s=this.Frame.ChartBorder.GetWidthEx();else{var n=i.TopTitle+2*a;this.IsShowMainIndexTitle||(n=this.Frame.ChartBorder.GetTop()+2*a);var r=this.Frame.ChartBorder.GetLeft()+this.MerginLeft,o=i.Right,s=i.Bottom}var l=this.OverlayIndexType.LineSpace*a,h=r,u=n,f=c(this.Canvas,this.Font,"æ");u=n+f/2;var d=!0,D=!1,m=void 0;try{for(var p,v=(0,Gn.default)(this.OverlayIndex);!(d=(p=v.next()).done);d=!0){y=p.value;var g=y[1],T=y[0],I={Width:0,YCenter:u,ID:T};if(this.DrawOverlayToolbar(g,I,t,e),g.IsShowIndexTitle&&g.Frame.IsShowIndexTitle){if(h=r+I.Width,this.Canvas.font=this.Font,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",g.Title&&this.IsShowOverlayIndexName){var S=this.Canvas.measureText(g.Title).width+2;if(h+S<o){if(this.OverlayIndexType.BGColor){this.Canvas.fillStyle=this.OverlayIndexType.BGColor;var x={Left:h,Top:u-f/2,Width:S,Height:f+l};this.Canvas.fillRect(x.Left,x.Top,x.Width,x.Height)}this.IsSelectedChart(T)&&this.DrawSelectedLine(h,u,S,g.Title),this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(g.Title,h,u,S)}h+=S}for(var b=0;b<g.Data.length;++b){var y=g.Data[b];if(y&&y.Data&&y.Data.Data&&y.Name&&(!1!==y.IsVisible&&!(y.Data.Data.length<=0))){var E=null,w=null,F=null;if("StraightLine"==y.DataType)E=y.Data.Data[0],w=this.FormatValue(E,y);else{var M=Math.abs(this.CursorIndex-.5);M=parseInt(M.toFixed(0)),this.IsKLineFrame&&(M=this.CursorIndex);var L=y.Data.DataOffset+M;if(L>=y.Data.Data.length&&(L=y.Data.Data.length-1),L<0)continue;if(null==(E=y.Data.Data[L]))continue;if("HistoryData-Vol"==y.DataType)E=E.Vol,w=this.FormatValue(E,y);else if("MultiReport"==y.DataType)w=this.FormatMultiReport(E,y);else if("ChartStackedBar"==y.DataType){if(!(F=this.FromatStackedBarTitle(E,y)))continue}else w=this.FormatValue(E,y)}if(F)for(var N,R=0;R<F.length;++R){var A=F[R];N=A.Name?A.Name+":"+A.Text:A.Text;var S=this.Canvas.measureText(N).width+2;if(h+S>o)break;if(this.OverlayIndexType.BGColor){this.Canvas.fillStyle=this.OverlayIndexType.BGColor;var x={Left:h,Top:u-f/2,Width:S,Height:f+l};this.Canvas.fillRect(x.Left,x.Top,x.Width,x.Height)}this.Canvas.fillStyle=A.Color,this.Canvas.fillText(N,h,u,S),h+=S}else{var N=w;if(y.Name){var O=this.GetDynamicOutName(y.Name,T);N=O?O+":"+w:y.Name+":"+w}var S=this.Canvas.measureText(N).width+2;if(h+S>o)break;if(this.OverlayIndexType.BGColor){this.Canvas.fillStyle=this.OverlayIndexType.BGColor;var x={Left:h,Top:u-f/2,Width:S,Height:f+l};this.Canvas.fillRect(x.Left,x.Top,x.Width,x.Height)}this.Canvas.fillStyle=y.Color,this.Canvas.fillText(N,h,u,S),h+=S}}}if((u+=f+l)+f+l>=s)break}}}catch(t){D=!0,m=t}finally{try{!d&&v.return&&v.return()}finally{if(D)throw m}}},this.DrawOverlayIndex=function(t){var e=this.Frame.ChartBorder.GetTop()+this.Frame.ChartBorder.TitleHeight/2,a=this.Frame.ChartBorder.GetRight();if(!0===this.Frame.IsHScreen&&(e=-this.Frame.ChartBorder.TitleHeight/2,a=this.Frame.ChartBorder.GetHeight()),!(t>a)){var i=5*C(),r=t,n=0,o=!0,s=!1,l=void 0;try{for(var h,u=(0,Gn.default)(this.OverlayIndex);!(o=(h=u.next()).done);o=!0){m=h.value,n>0&&(t+=i);var c=m[1],f=m[0];if(c.Title&&this.IsShowOverlayIndexName){this.Canvas.fillStyle=this.TitleColor;var d=this.Canvas.measureText(c.Title).width+2;if(r=t,(t+=d)>a)break;this.Canvas.fillText(c.Title,r,e,d),this.IsSelectedChart(f)&&this.DrawSelectedLine(r,e,d)}for(var D in c.Data){var m=c.Data[D];if(m&&m.Data&&m.Data.Data&&m.Name&&!(m.Data.Data.length<=0)){var p=null,v=null;if("StraightLine"==m.DataType)p=m.Data.Data[0],v=this.FormatValue(p,m);else{var g=Math.abs(this.CursorIndex-.5);g=parseInt(g.toFixed(0)),this.IsKLineFrame&&(g=this.CursorIndex);var T=m.Data.DataOffset+g;if(T>=m.Data.Data.length&&(T=m.Data.Data.length-1),T<0)continue;if(null==(p=m.Data.Data[T]))continue;"HistoryData-Vol"==m.DataType?(p=p.Vol,v=this.FormatValue(p,m)):v="MultiReport"==m.DataType?this.FormatMultiReport(p,m):this.FormatValue(p,m)}this.Canvas.fillStyle=m.Color;var I=m.Name+":"+v,d=this.Canvas.measureText(I).width+2;if(r=t,(t+=d)>a)break;this.Canvas.fillText(I,r,e,d)}}if(t>a)break;++n}}catch(t){s=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}}},this.HScreenDraw=function(){var t=this.Frame.ChartBorder.GetHScreenBorder(),e=this.Frame.ChartBorder.GetRightTitle(),a=t.TopEx;this.Canvas.translate(e,a),this.Canvas.rotate(90*Math.PI/180);var i=1,r=-this.Frame.ChartBorder.TitleHeight/2,n=this.Frame.ChartBorder.GetHeight();this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.font=this.Font;var o=C();if(this.Title&&this.IsShowIndexName){var s=this.Canvas.measureText(this.Title).width+2;if(this.IsDrawTitleBG){var l=this.Title,s=this.Canvas.measureText(l).width,h=0;this.IsShowNameArrow&&this.NameArrowConfig&&(h=this.Canvas.measureText(this.NameArrowConfig.Symbol).width,we.IsNumber(this.NameArrowConfig.Space)&&(h+=this.NameArrowConfig.Space));var u=this.Canvas.measureText("æ").width+4*o,c=s+h+4*o;this.TitleRect={Top:t.Top,Left:this.Frame.ChartBorder.GetRightTitle()+this.Frame.ChartBorder.TitleHeight/2-u/2,Width:u,Height:c},this.Canvas.fillStyle=this.BGColor;var f={Left:i,Top:r-u/2,Width:c,Height:u};this.Canvas.fillRect(f.Left,f.Top,f.Width,f.Height),this.BGBorderColor&&(this.Canvas.strokeStyle=this.BGBorderColor,this.Canvas.strokeRect(p(f.Left),p(f.Top),g(f.Width),g(f.Height)));var e=i+2*o;this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(l,e,r),e+=s,this.IsShowNameArrow&&this.NameArrowConfig&&(we.IsNumber(this.NameArrowConfig.Space)&&(e+=this.NameArrowConfig.Space),this.Canvas.fillStyle=this.NameArrowConfig.Color,this.Canvas.fillText(this.NameArrowConfig.Symbol,e,r)),i+=c+2*o,i+=this.TitleSpace}else this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(this.Title,i,r),i+=s,i+=this.TitleSpace}if(this.ArgumentsText&&this.IsShowIndexName){var s=this.Canvas.measureText(this.ArgumentsText).width+2;this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(this.ArgumentsText,i,r,s),i+=s,i+=this.TitleSpace}var d=this.IsShowLastData(),D=this.Frame.GetLockRect();if(D){var m=Math.abs(this.CursorIndex-.5);this.IsKLineFrame&&(m=this.CursorIndex);if(this.Frame.GetXFromIndex(m.toFixed(0))>=D.Top)return;if(d)return}for(var v in this.Data){var T=this.Data[v],I=this.GetTitleItem(T,d);if(I){var S=I.Text,x=I.ArrayText;if(x)for(var b,y=0;y<x.length;++y){var E=x[y];b=E.Name?E.Name+":"+E.Text:E.Text;var w=this.ParamSpace*C(),s=this.Canvas.measureText(b).width+w;if(i+s>n)break;this.Canvas.fillStyle=E.Color,this.Canvas.fillText(b,i,r,s),i+=s}else{this.Canvas.fillStyle=T.Color;var b=S;if(T.Name){var F=this.GetDynamicOutName(T.Name);b=F?F+":"+S:T.Name+":"+S}var w=this.ParamSpace*C(),s=this.Canvas.measureText(b).width+w;if(i+s>n)break;this.Canvas.fillText(b,i,r,s),i+=s}}}if(this.Explain){this.Canvas.fillStyle=this.TitleColor;var b="è¯´æ:"+this.Explain,s=this.Canvas.measureText(b).width+2;i+s<n&&(this.Canvas.fillText(b,i,r,s),i+=s)}1==this.OverlayIndexType.Position?this.Frame.ChartBorder.IsShowTitleOnly||this.DrawOverlayIndexSingleLine():this.DrawOverlayIndex(i+5*C())},this.OnDrawEventCallback=function(t){if(this.OnDrawEvent&&this.OnDrawEvent.Callback){var e={Draw:t,Name:"DynamicChartTitlePainting"};this.OnDrawEvent.Callback(this.OnDrawEvent,e,this)}},this.GetFontHeight=function(t){return c(this.Canvas,t,"æ")},this.DrawNameButton=function(t,e,a){var i=C(),r=this.Title,n=this.Canvas.measureText(r).width,o=0;this.IsShowNameArrow&&this.NameArrowConfig&&(o=this.Canvas.measureText(this.NameArrowConfig.Symbol).width,we.IsNumber(this.NameArrowConfig.Space)&&(o+=this.NameArrowConfig.Space));var s=this.Canvas.measureText("æ").width+4*i,l=this.BorderRoundRadius*i,h=n+o+4*i+2*l;t.Top=t.YCenter-s/2-1,t.Width=h,t.Height=s,t.Right=t.Left+t.Width,t.Bottom=t.Top+t.Height;var u=this.BGBorderColor;if(e&&e.X>=t.Left&&e.X<t.Right&&e.Y>=t.Top&&e.Y<=t.Bottom&&(this.BGBorderMoveOnColor&&(u=this.BGBorderMoveOnColor),a)){var c={ID:qn.INDEX_NAME_BUTTON};a.MouseOnToolbar={ID:"IndexNameButton",Rect:t,Item:c,Frame:this.Frame,Point:{X:e.X,Y:e.Y}}}this.Canvas.roundRect&&1==this.NameButtonStyle?(this.Canvas.beginPath(),this.Canvas.roundRect(p(t.Left),p(t.Top),g(t.Width),g(t.Height),[l]),this.Canvas.closePath(),this.Canvas.fillStyle=this.BGColor,this.Canvas.fill(),u&&(this.Canvas.strokeStyle=u,this.Canvas.stroke())):(this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(t.Left,t.Top,t.Width,t.Height),u&&(this.Canvas.strokeStyle=u,this.Canvas.strokeRect(p(t.Left),p(t.Top),g(t.Width),g(t.Height),[l])));var f=t.Left+l+2*i;this.Canvas.fillStyle=this.TitleColor,this.Canvas.fillText(r,f,t.YCenter),f+=n,this.IsShowNameArrow&&this.NameArrowConfig&&(we.IsNumber(this.NameArrowConfig.Space)&&(f+=this.NameArrowConfig.Space),this.Canvas.fillStyle=this.NameArrowConfig.Color,this.Canvas.fillText(this.NameArrowConfig.Symbol,f,t.YCenter))},this.DrawButton=function(t,e,a,i){var r=t.Style.Size;we.IsNumber(t.Style.YMoveOffset)&&(e.YCenter+=t.Style.YMoveOffset);var n=r+"px "+t.Style.Family;e.Top=e.YCenter-r/2,e.Width=r+t.Style.MerginLeft,e.Height=r,e.Bottom=e.Top+e.Height,e.Right=e.Left+e.Width;var o=t.Style.Color;return a&&a.X>=e.Left&&a.X<e.Right&&a.Y>=e.Top&&a.Y<=e.Bottom&&(o=t.Style.MoveOnColor,i&&(i.MouseOnToolbar={ID:"TitleButton",Rect:e,Item:t,Frame:this.Frame,Point:{X:a.X,Y:a.Y}})),this.Canvas.fillStyle=o,this.Canvas.font=n,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(t.Style.Text,e.Left,e.YCenter),!0},this.DrawToolbar=function(t,e,a){if(t.Width=0,this.Frame&&this.Frame.GetLeftToolbar){var i=this.Frame.GetLeftToolbar();if(we.IsNonEmptyArray(i))if(!0===this.Frame.IsHScreen);else{for(var r=this.Frame.GetBorder(),n=(r.Right,r.Left+3),o=t.YCenter,s=0;s<i.length;++s){var l=i[s],h={Left:n,YCenter:o};this.DrawButton(l,h,e,a),this.Buttons.push({ID:l.ID,Rect:h,FrameID:this.Frame.Identify,Type:0,Data:l.Data}),n=h.Right,t.Width+=h.Width}t.Width>0&&(t.Width+=3)}}},this.DrawOverlayToolbar=function(t,e,a,i){if(e.Width=0,t&&t.Frame&&t.Frame.GetLeftToolbar){var r=t.Frame,n=r.GetLeftToolbar({Overlay:t,OverlayID:e.ID});if(we.IsNonEmptyArray(n))if(!0===this.Frame.IsHScreen);else{for(var o=r.GetBorder(),s=(o.Right,o.Left+3),l=e.YCenter,h=0;h<n.length;++h){var u=n[h],C={Left:s,YCenter:l};this.DrawButton(u,C,a,i),this.Buttons.push({ID:u.ID,Rect:C,FrameID:this.Frame.Identify,Type:1,OverlayID:e.ID,Title:t.Title,Data:u.Data}),s=C.Right,e.Width+=C.Width}e.Width>0&&(e.Width+=3)}}},this.PtInButtons=function(t,e){for(var a=0;a<this.Buttons.length;++a){var i=this.Buttons[a];if(i.Rect){var r=i.Rect;if(t>r.Left&&t<r.Right&&e>r.Top&&e<r.Bottom){var n={ID:i.ID,Rect:r,FrameID:i.FrameID,Type:i.Type,Data:i.Data};return 1==i.Type&&(n.Title=i.Title,n.OverlayID=i.OverlayID),n}}}return null}}function aa(){this.Frame,this.Canvas,this.Point=new Array,this.Value=new Array,this.LinePoint=[],this.PointCount=2,this.Status=0,this.PointStatus=0,this.MovePointIndex=null,this.ClassName="IChartDrawPicture",this.FinishedCallback,this.Guid=D(),this.Symbol,this.Period,this.Right,this.IsSelected=!1,this.Option,this.EnableMove=!0,this.EnableSave=!0,this.EnableCtrlMove=!1,this.OnlyMoveXIndex=!1,this.IsSupportMagnet=!1,this.EnableMoveCheck=!0,this.IsDrawFirst=!1,this.IsShowYCoordinate=!1,this.IsShow=!0,this.LineColor=So.DrawPicture.LineColor[0],this.LineWidth=2,this.BackupLineWidth=null,this.AreaColor="rgba(25,25,25,0.4)",this.PointColor=So.DrawPicture.PointColor[0],this.MoveOnPointColor=So.DrawPicture.PointColor[1],this.PointBGColor=So.DrawPicture.PointColor[2],this.PointRadius=5,this.SquareSize=8,this.PointType=So.DrawPicture.PointType,this.IsShowPoint=So.DrawPicture.IsShowPoint,this.LimitFrameID,this.SetLastPoint=null,this.Update=null,this.GetActiveDrawPicture=null,this.GetYCoordinatePoint=null,this.Draw=function(){},this.SetOption=function(t){t&&(t.LineColor&&(this.LineColor=t.LineColor),t.LineWidth>0&&(this.LineWidth=t.LineWidth),t.AreaColor&&(this.AreaColor=t.AreaColor),t.PointColor&&(this.PointColor=t.PointColor),t.MoveOnPointColor&&(this.MoveOnPointColor=t.MoveOnPointColor),t.PointRadius&&(this.PointRadius=t.PointRadius),we.IsNumber(t.SquareSize)&&(this.SquareSize=t.SquareSize),we.IsBool(t.IsShowPoint)&&(this.IsShowPoint=t.IsShowPoint),we.IsNumber(t.LimitFrameID)&&(this.LimitFrameID=t.LimitFrameID),we.IsBool(t.EnableCtrlMove)&&(this.EnableCtrlMove=t.EnableCtrlMove),we.IsBool(t.IsShowYCoordinate)&&(this.IsShowYCoordinate=t.IsShowYCoordinate))},this.ReloadResource=function(t){t||(this.PointColor=So.DrawPicture.PointColor[0],this.MoveOnPointColor=So.DrawPicture.PointColor[1],this.PointBGColor=So.DrawPicture.PointColor[2])},this.SetLineWidth=function(){this.BackupLineWidth=null,this.LineWidth>0&&(this.BackupLineWidth=this.Canvas.lineWidth,this.Canvas.lineWidth=this.LineWidth*C())},this.GetFontHeight=function(t){return c(this.Canvas,t,"æ")},this.RestoreLineWidth=function(){null!=this.BackupLineWidth&&(this.Canvas.lineWidth=this.BackupLineWidth)},this.PointMagnetKLine=function(){if(!this.IsSupportMagnet)return!1;if(!this.Frame)return!1;if("MinuteFrame"==this.Frame.ClassName||"MinuteHScreenFrame"==this.Frame.Class)return!1;if(0!=this.Frame.Identify)return!1;var t=-1;if(2==this.Status?t=1:1==this.Status?t=0:we.IsNumber(this.MovePointIndex)&&(t=this.MovePointIndex),t<0)return!1;if(this.Option&&this.Option.Magnet&&this.Option.Magnet.Enable){var e={IsFixedX:!1,Magnet:{Enable:!0,PointIndex:t,Distance:this.Option.Magnet.Distance,Type:this.Option.Magnet.Type}};return this.AdjustPoint(this.Point,e)}return!1},this.PointToValue=function(){return!!this.Frame&&("MinuteFrame"==this.Frame.ClassName||"MinuteHScreenFrame"==this.Frame.Class?this.PointToValue_Minute():this.PointToValue_KLine())},this.PointToKLine=function(t){if(!this.Frame)return null;var e=this.Frame.Data;if(!e)return null;var a=[];if(this.Frame.IsHScreen)for(var i in t){var r=t[i],n=parseInt(this.Frame.GetXData(r.Y))+e.DataOffset,o=this.Frame.GetYData(r.X),s={XValue:n,YValue:o},l=e.Data[n];s.DateTime={Date:l.Date},we.IsNumber(l.Time)&&(s.DateTime.Time=l.Time),a[i]=s}else for(var i in t){var r=t[i],h=parseInt(this.Frame.GetXData(r.X,!1)),n=h+e.DataOffset;n<0?n=0:n>=e.Data.length&&(n=e.Data.length-1,h=n-e.DataOffset);var o=this.Frame.GetYData(r.Y,!1),s={XValue:n,YValue:o,XIndex:h},l=e.Data[n];s.DateTime={Date:l.Date},we.IsNumber(l.Time)&&(s.DateTime.Time=l.Time),a[i]=s}return a},this.PointToValue_KLine=function(){if(!this.Frame)return!1;var t=this.Frame.Data;if(!t)return!1;if(this.Frame.IsHScreen)for(var e=0;e<this.Point.length;++e){var a=this.Point[e],i=parseInt(this.Frame.GetXData(a.Y,!1))+t.DataOffset,r=this.Frame.GetYData(a.X,!1),n={XValue:i,YValue:r},o=t.Data[i];n.DateTime={Date:o.Date},we.IsNumber(o.Time)&&(n.DateTime.Time=o.Time),this.Value[e]=n}else for(var e=0;e<this.Point.length;++e){var a=this.Point[e],i=parseInt(this.Frame.GetXData(a.X,!1))+t.DataOffset;i<0?i=0:i>=t.Data.length&&(i=t.Data.length-1);var r=this.Frame.GetYData(a.Y,!1),n={XValue:i,YValue:r},o=t.Data[i];n.DateTime={Date:o.Date},we.IsNumber(o.Time)&&(n.DateTime.Time=o.Time),this.Value[e]=n}return!0},this.PointToValue_Minute=function(){if(!this.Frame)return!1;var t=this.Frame.Data;if(!t)return!1;if(this.Frame.IsHScreen)for(var e=0;e<this.Point.length;++e){var a=this.Point[e],i=parseInt(this.Frame.GetXData(a.Y,!1)),r=this.Frame.GetYData(a.X,!1),n={XValue:i,YValue:r},o=t.Data[i];n.DateTime={Date:o.Date,Time:o.Time},this.Value[e]=n}else for(var s=Fo.GetTimeData(this.Symbol),e=0;e<this.Point.length;++e){var a=this.Point[e],i=parseInt(this.Frame.GetXData(a.X,!1)),r=this.Frame.GetYData(a.Y,!1);if(i>=t.Data.length){var l=i%s.length,h=t.Data.length-1,n={XValue:i,YValue:r},o=t.Data[h],u=s[l];n.DateTime={Date:o.Date,Time:u},this.Value[e]=n}else{var n={XValue:i,YValue:r},o=t.Data[i];n.DateTime={Date:o.Date,Time:o.Time},this.Value[e]=n}}return!0},this.IsPointIn=function(t,e,a){return!1},this.ValueToPoint=function(){if(!this.Frame)return!1;var t=this.Frame.Data;if(!t)return!1;var e=this.Frame.IsHScreen;this.Point=[];for(var a=0;a<this.Value.length;++a){var i=this.Value[a],r=new E;e?(r.Y=this.Frame.GetXFromIndex(i.XValue-t.DataOffset,!1),r.X=this.Frame.GetYFromData(i.YValue,!1)):(r.X=this.Frame.GetXFromIndex(i.XValue-t.DataOffset,!1),r.Y=this.Frame.GetYFromData(i.YValue,!1)),this.Point[a]=r}},this.UpdateXValue=function(){if(!this.Frame)return!1;var t=this.Frame.Data;if(!t)return!1;for(var e=[],a=0;a<this.Value.length;++a){var i=this.Value[a];if(!i.DateTime)break;var r={Date:i.DateTime.Date};we.IsNumber(i.DateTime.Time)&&(r.Time=i.DateTime.Time),e[a]=r}t.FindDataIndexByDateTime(e);for(var a=0;a<e.length;++a){var n=e[a],o=this.Value[a];n.Index>=0&&(o.XValue=n.Index)}},this.ResetXValue=function(){for(var t=0;t<this.Value.length;++t){this.Value[t].XValue=null}return!0},this.Move=function(t,e){if(20!=this.Status)return!1;if(!this.Frame)return!1;if(!this.Frame.Data)return!1;if(null==this.MovePointIndex)return!1;var a=parseInt(this.MovePointIndex);if(100===a){if(this.IsMoveOutOfBounds(this.Point,t,e))return!1;for(var i in this.Point)this.Point[i].X+=t,this.Point[i].Y+=e}else{if(0!==a&&1!==a&&2!==a&&3!==a&&4!==a&&5!==a)return!1;a<this.Point.length&&(this.Point[a].X+=t,this.Point[a].Y+=e)}},this.IsMoveOutOfBounds=function(t,e,a){if(!this.EnableMoveCheck)return!1;if(!this.Frame)return!1;if("MinuteFrame"==this.Frame.ClassName||"MinuteHScreenFrame"==this.Frame.Class)return!1;var i=this.Frame.Data;if(!i)return!1;if(!we.IsNonEmptyArray(i.Data))return!1;if(!we.IsNonEmptyArray(t))return!1;if(this.Frame.IsHScreen)return!1;var r=i.DataOffset,n=0-r,o=i.Data.length-r;if(e>0)for(var s=this.Frame.GetXFromIndex(o-1,!1),l=0;l<t.length;++l){var h=t[l];if(h.X+e>s)return!0}else if(e<0)for(var u=this.Frame.GetXFromIndex(n,!1),l=0;l<t.length;++l){var h=t[l];if(h.X+e<u)return!0}return!1},this.ClipFrame=function(){if(this.Frame.IsHScreen)var t=this.Frame.ChartBorder.GetLeftEx(),e=this.Frame.ChartBorder.GetTop(),a=this.Frame.ChartBorder.GetWidthEx(),i=this.Frame.ChartBorder.GetHeight();else var t=this.Frame.ChartBorder.GetLeft(),e=this.Frame.ChartBorder.GetTopEx(),a=this.Frame.ChartBorder.GetWidth(),i=this.Frame.ChartBorder.GetHeightEx();this.Canvas.save(),this.Canvas.beginPath(),this.Canvas.rect(t,e,a,i),this.Canvas.clip()},this.CalculateDrawPoint=function(t){if(this.Status<2)return null;if(!this.Point.length||!this.Frame)return null;var e=[];if(10==this.Status){var a=this.Frame.Data;if(!a)return null;for(var i=this.Frame.XPointCount,r=0,n=this.Frame.IsHScreen,o=0;o<this.Value.length;++o){var s=this.Value[o];if(!we.IsNumber(s.XValue))return null;var l=s.XValue-a.DataOffset;(l<0||l>=i)&&++r;var h=new E;n?(h.Y=this.Frame.GetXFromIndex(s.XValue-a.DataOffset,!1),h.X=this.Frame.GetYFromData(s.YValue,!1)):(h.X=this.Frame.GetXFromIndex(s.XValue-a.DataOffset,!1),h.Y=this.Frame.GetYFromData(s.YValue,!1)),e.push(h)}if(t&&!0===t.IsCheckX&&r==this.Value.length)return null}else{for(var o=0;o<this.Point.length;++o){var s=this.Point[o];e.push({X:s.X,Y:s.Y})}if(this.OnlyMoveXIndex){var t={IsFixedX:this.OnlyMoveXIndex};if(Xn.Chart.Log("[IChartDrawPicture::CalculateDrawPoint] Status="+this.Status+" MovePointIndex="+this.MovePointIndex+" Identify="+this.Frame.Identify),this.Option&&this.Option.Magnet&&this.Option.Magnet.Enable&&this.IsSupportMagnet&&0==this.Frame.Identify){var u=-1;2==this.Status&&(u=1),we.IsNumber(this.MovePointIndex)&&(u=this.MovePointIndex),u>=0&&(t.Magnet={Enable:!0,PointIndex:u,Distance:this.Option.Magnet.Distance,Type:this.Option.Magnet.Type})}this.AdjustPoint(e,t)}}return e},this.AdjustPoint=function(t,e){return!!this.Frame&&("MinuteFrame"!=this.Frame.ClassName&&"MinuteHScreenFrame"!=this.Frame.Class&&this.AdjustPoint_KLine(t,e))},this.AdjustPoint_KLine=function(t,e){if(!e)return!1;if(!this.Frame)return!1;var a=this.Frame.Data;if(!a)return!1;if(this.Frame.IsHScreen)for(var i=0;i<t.length;++i)var r=t[i],n=parseInt(this.Frame.GetXData(r.Y))+a.DataOffset;else for(var i=0;i<t.length;++i){var r=t[i],o=parseInt(this.Frame.GetXData(r.X,!1)),n=o+a.DataOffset;if(n<0?n=0:n>=a.Data.length&&(n=a.Data.length-1),e.IsFixedX&&(o=n-a.DataOffset,r.X=this.Frame.GetXFromIndex(o,!1)),e.Magnet&&e.Magnet.Enable&&i==e.Magnet.PointIndex){for(var s=a.Data[n],l=[s.Open,s.High,s.Low,s.Close],h=null,u=null,C=0;C<l.length;++C){var c=this.Frame.GetYFromData(l[C]),f=Math.abs(r.Y-c);(!we.IsNumber(h)||h>f)&&(h=f,u=c)}1==e.Magnet.Type?we.IsNumber(u)&&(r.Y=u):h<e.Magnet.Distance&&we.IsNumber(u)&&(r.Y=u)}}},this.IsYValueInFrame=function(t){return!!this.Frame&&!(t>this.Frame.HorizontalMax||t<this.Frame.HorizontalMin)},this.DrawPoint=function(t){if(we.IsNonEmptyArray(t)){var e=this.PointColor,a=!1;if(this.IsShowPoint);else if(this.GetActiveDrawPicture){var i=this.GetActiveDrawPicture();if(i.Move.Guid!=this.Guid&&i.Select.Guid!=this.Guid&&i.MoveOn.Guid!=this.Guid)return;i.Select.Guid!=this.Guid&&i.MoveOn.Guid==this.Guid&&(a=!0,e=this.MoveOnPointColor)}this.ClipFrame();var r=C();this.Canvas.fillStyle=e,2==this.PointType&&(this.Canvas.fillStyle=this.PointBGColor,this.Canvas.strokeStyle=this.PointColor,this.Canvas.lineWidth=a?1*r:2*r);for(var n=0;n<t.length;++n){var o=t[n];if(1==this.PointType){var s=this.SquareSize*r,l=o.X-s/2,h=o.Y-s/2;this.Canvas.fillRect(l,h,s,s)}else if(2==this.PointType){var u=new Path2D;u.arc(o.X,o.Y,this.PointRadius*r,0,360,!1),this.Canvas.fill(u),this.Canvas.stroke(u)}else this.Canvas.beginPath(),this.Canvas.arc(o.X,o.Y,this.PointRadius*r,0,360,!1),this.Canvas.fill(),this.Canvas.closePath()}this.Canvas.restore()}},this.DrawArrow=function(t,e){var a=180*Math.atan2(t.Y-e.Y,t.X-e.X)/Math.PI,i=(a+35)*Math.PI/180,r=(a-35)*Math.PI/180,n=10*Math.cos(i),o=10*Math.sin(i),s=10*Math.cos(r),l=10*Math.sin(r);this.Canvas.beginPath();var h=e.X+n,u=e.Y+o;this.Canvas.moveTo(h,u),this.Canvas.lineTo(e.X,e.Y),h=e.X+s,u=e.Y+l,this.Canvas.lineTo(h,u),this.Canvas.stroke()},this.CalculateExtendLinePoint=function(t,e){var a={},i=(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetRight(),this.Frame.ChartBorder.GetTopEx()),r=this.Frame.ChartBorder.GetBottom(),n=e.X-t.X,o=e.Y-t.Y;if(n>0){var s=r-t.Y,l=n*s/o,h=new E;h.X=t.X+l,h.Y=r,a.End=h;var s=e.Y-i,l=n*s/o,u=new E;u.Y=i,u.X=e.X-l,a.Start=u}else{var s=r-t.Y,l=Math.abs(n)*s/o,h=new E;h.X=t.X-l,h.Y=r,a.End=h;var s=e.Y-i,l=Math.abs(n)*s/o,u=new E;u.Y=i,u.X=e.X+l,a.Start=u}return a},this.CalculateExtendLineEndPoint=function(t){var e=this.Frame.ChartBorder.GetLeft(),a=this.Frame.ChartBorder.GetRight(),i=this.Frame.ChartBorder.GetBottomEx(),r=this.Frame.ChartBorder.GetTopEx(),n=t[1].X-t[0].X,o=t[1].Y-t[0].Y;if(n>0){var s=a-t[0].X,l=s*o/n,h=l+t[0].Y;if(h>=r&&h<=i){var u=new E;return u.X=a,u.Y=h,u}if(o>0){var C=i-t[0].Y,c=n*C/o,f=c+t[0].X,d=new E;return d.X=f,d.Y=i,d}if(0==o){var d=new E;return d.X=a,d.Y=t[0].Y,d}var C=r-t[0].Y,c=n*C/o,f=c+t[0].X,d=new E;return d.X=f,d.Y=r,d}var s=t[0].X-e,l=s*o/Math.abs(n),h=l+t[0].Y;if(h>=r&&h<=i){var u=new E;return u.X=e,u.Y=h,u}if(o>0){var C=i-t[0].Y,c=n*C/o,f=c+t[0].X,d=new E;return d.X=f,d.Y=i,d}if(0==o){var d=new E;return d.X=e,d.Y=t[0].Y,d}var C=r-t[0].Y,c=n*C/o,f=c+t[0].X,d=new E;return d.X=f,d.Y=r,d},this.IsPointInXYValue=function(t,e,a){if(!this.Frame)return-1;var i=this.Frame.Data;if(!i)return-1;if(!this.Value)return-1;var r=5;a&&we.IsNumber(a.Zoom)?r+=a.Zoom:this.Option&&we.IsNumber(this.Option.Zoom)&&(r+=this.Option.Zoom);var n=this.Frame.IsHScreen;r*=C();for(var o=0;o<this.Value.length;++o){var s=this.Value[o],l=new E;if(n?(l.Y=this.Frame.GetXFromIndex(s.XValue-i.DataOffset),l.X=this.Frame.GetYFromData(s.YValue)):(l.X=this.Frame.GetXFromIndex(s.XValue-i.DataOffset),l.Y=this.Frame.GetYFromData(s.YValue)),this.Canvas.beginPath(),this.Canvas.arc(l.X,l.Y,r,0,360),this.Canvas.isPointInPath(t,e))return o}return-1},this.IsPointInLine=function(t,e,a){if(!this.LinePoint)return-1;var i=5;a&&we.IsNumber(a.Zoom)?i+=a.Zoom:this.Option&&we.IsNumber(this.Option.Zoom)&&(i+=this.Option.Zoom),i*=C();for(var r=0;r<this.LinePoint.length;++r){var n=this.LinePoint[r],o=n.Start,s=n.End;if(this.Canvas.beginPath(),o.X==s.X?(this.Canvas.moveTo(o.X-i,o.Y),this.Canvas.lineTo(o.X+i,o.Y),this.Canvas.lineTo(s.X+i,s.Y),this.Canvas.lineTo(s.X-i,s.Y)):(this.Canvas.moveTo(o.X,o.Y+i),this.Canvas.lineTo(o.X,o.Y-i),this.Canvas.lineTo(s.X,s.Y-i),this.Canvas.lineTo(s.X,s.Y+i)),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e))return r}return-1},this.IsPointIn_XYValue_Line=function(t,e,a){if(10!=this.Status)return-1;var i=this.IsPointInXYValue(t,e,a);return i>=0?i:(i=this.IsPointInLine(t,e,a),i>=0?100:-1)},this.DrawLine=function(t,e,a){a&&this.Canvas.setLineDash([5,10]),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.stroke(),a&&this.Canvas.setLineDash([])},this.CreateLineData=function(t,e){var a={Start:new E,End:new E};return a.Start.Y=t.Y,a.Start.X=t.X,a.End.Y=e.Y,a.End.X=e.X,a},this.ExportStorageData=function(){for(var t={ClassName:this.ClassName,Symbol:this.Symbol,Guid:this.Guid,Period:this.Period,Value:[],FrameID:this.Frame.Identify,LineColor:this.LineColor,AreaColor:this.AreaColor,LineWidth:this.LineWidth,Right:this.Right,EnableSave:this.EnableSave,IsShowYCoordinate:this.IsShowYCoordinate},e=0;e<this.Value.length;++e){var a=this.Value[e];t.Value.push({XValue:a.XValue,YValue:a.YValue,DateTime:a.DateTime})}return this.Text&&(t.Text=this.Text),this.FontOption&&(t.FontOption=this.FontOption),t},this.ExportBaseData=function(){var t={ClassName:this.ClassName,Guid:this.Guid,FrameID:this.Frame.Identify,Symbol:this.Symbol,Period:this.Period,Right:this.Right,LineColor:this.LineColor,LineWidth:this.LineWidth,EnableSave:this.EnableSave,IsShowYCoordinate:this.IsShowYCoordinate};return this.AreaColor&&(t.AreaColor=this.AreaColor),this.Text&&(t.Text=this.Text),this.FontOption&&(t.FontOption={},this.SetFont(t.FontOption,this.FontOption)),t},this.IsFrameMinSize=function(){return this.Frame&&this.Frame.IsMinSize},this.PointRange=function(t){if(!we.IsNonEmptyArray(t))return null;if(1==t.length){var e={Points:[{X:t[0].X,Y:t[0].Y}]};return e}for(var a=t[0].X,i=a,r=t[0].Y,n=r,o=[{X:t[0].X,Y:t[0].Y}],s=1;s<t.length;++s)a<t[s].X&&(a=t[s].X),i>t[s].X&&(i=t[s].X),r<t[s].Y&&(r=t[s].Y),n>t[s].Y&&(n=t[s].Y),o.push({X:t[s].X,Y:t[s].Y});var e={X:{Max:{X:a},Min:{X:i}},Y:{Max:{Y:r},Min:{Y:n}},Points:o};return e},this.GetXYCoordinate_default=function(){if(this.IsFrameMinSize())return null;if(!this.IsShow)return null;var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});return this.PointRange(t)},this.GetXYCoordinate=function(){return null},this.CopyData_default=function(){if(!this.Frame)return null;var t=this.ExportStorageData();if(!t)return null;var e=0;if("MinuteFrame"==this.Frame.ClassName||"MinuteHScreenFrame"==this.Frame.Class);else{var a=this.Frame.Data;if(!a)return null;e=a.DataOffset}for(var i=this.Frame.ChartBorder.GetHeight(),r=this.Frame.ChartBorder.GetBottomEx()-this.Point[0].Y,n=0;n<t.Value.length;++n){var o=t.Value[n],s=this.Point[n];if(o.XIndex=o.XValue-e+1,0==n)o.XOffset=0,o.YOffset=0;else{var l=t.Value[n-1],h=this.Point[n-1];o.XOffset=o.XValue-l.XValue,o.YOffset=s.Y-h.Y}}return t.DataOffset=e,t.YFristScale=r/i,t.Height=i,t},this.SetFont=function(t,e){e&&t&&(e.Family&&(t.Family=e.Family),e.Weight&&(t.Weight=e.Weight),e.Style&&(t.Style=e.Style),we.IsNumber(e.Size)&&(t.Size=e.Size))},this.GetFontString=function(t){var e=16*C()+"px å¾®è½¯éé»";if(!t||!t.Family||!we.IsPlusNumber(t.Size))return e;var a="";return t.Color&&(a+=t.Color+" "),t.Style&&(a+=t.Style+" "),t.Weight&&(a+=t.Weight+" "),a+=t.Size*C()+"px ",a+=t.Family},this.GetMultiLineText=function(t,e,a,i){a&&(this.Canvas.font=a);var r=this.Canvas.measureText(t).width;if(r<=e)return{AryText:[{Text:t}]};for(var n=this.Canvas.measureText("æ").width,o=parseInt(e/n),s=0,l=[];s<t.length-1;){var h=o,u=s+h;u>=t.length&&(u=t.length-1,h=u-s);var C=t.slice(s,s+h),r=this.Canvas.measureText(C).width;if(r>e){for(var c=h;c>=0;--c)if(C=t.slice(s,s+c),(r=this.Canvas.measureText(C).width)<e){l.push({Text:C}),s+=c;break}}else if(r<e){for(var f=!1,c=h;c+s<=t.length;++c)if(C=t.slice(s,s+c),(r=this.Canvas.measureText(C).width)>e){C=t.slice(s,s+c-1),l.push({Text:C}),s+=c-1,f=!0;break}f||(l.push({Text:C}),s=t.length-1)}else l.push({Text:C}),s+=h}return{AryText:l}},this.CloneArrayText=function(t){if(!we.IsNonEmptyArray(t))return[];for(var e=[],a=0;a<t.length;++a){var i=t[a];i&&e.push({Text:i.Text})}return e},this.CalculateAngle=function(t,e,a,i){var r=Math.abs(t-a),n=Math.abs(e-i),o=Math.sqrt(Math.pow(r,2)+Math.pow(n,2)),s=r/o,l=Math.acos(s),h=180/(Math.PI/l);return a==t&&i<e?90:a==t&&i>e?270:a>t&&i==e?0:a<t&&i==e?180:a>t&&i>e?360-h:a<t&&i>e?180+h:a<t&&i<e?180-h:h},this.CalculateLabelSize=function(t){var e=t.Config;this.Canvas.font=e.Font,this.Canvas.textAlign="left",this.Canvas.textBaseline="top";for(var a=this.Canvas.measureText("æ").width+2,i=0,r=0,n=e.Mergin.Top+e.Mergin.Bottom,o=0;o<t.AryText.length;++o){o>0&&(n+=e.LineSpace);var s=t.AryText[o];s.NameWidth=0,s.TextWidth=0,s.Name&&(s.NameWidth=this.Canvas.measureText(s.Name).width+2),s.Text&&(s.TextWidth=this.Canvas.measureText(s.Text).width+2);var l=s.NameWidth+s.TextWidth;i<l&&(i=l),++r,n+=a}var h=i+e.Mergin.Left+e.Mergin.Right;t.Width=h,t.Height=n,t.LineHeight=a},this.DrawDefaultLabel=function(t,e){var a=t.Config;a.BGColor&&(this.Canvas.fillStyle=a.BGColor,this.Canvas.fillRect(g(e.Left),g(e.Top),g(e.Width),g(e.Height)));for(var i=e.Left+a.Mergin.Left,r=e.Top+a.Mergin.Top,n=0;n<t.AryText.length;++n){var o=t.AryText[n];if(n>0&&(r+=a.LineSpace),o.Name&&(this.Canvas.fillStyle=o.NameColor,this.Canvas.fillText(o.Name,i,r)),o.Text){var s=i+o.NameWidth;1==a.TextAlign&&(s=e.Right-a.Mergin.Right-o.TextWidth),this.Canvas.fillStyle=o.TextColor,this.Canvas.fillText(o.Text,s,r)}r+=t.LineHeight}}}function ia(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.IsShowYCoordinate=!1,this.CopyData=this.CopyData_default,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!1});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1];this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.RestoreLineWidth();var i={Start:e,End:a};this.LinePoint.push(i),this.DrawPoint(t),this.Canvas.restore()}}},this.GetYCoordinatePoint=function(){if(this.IsFrameMinSize())return null;if(!this.IsShow)return null;if(this.Status<2)return null;if(!this.Point.length||!this.Frame)return null;if(10!=this.Status)return null;for(var t=[],e=0;e<this.Value.length;++e){var a=this.Value[e],i=this.Frame.GetYFromData(a.YValue,!1);t.push({Y:i,YValue:a.YValue,Item:a,Color:this.PointColor})}return t}}function ra(){this.newMethod=ia,this.newMethod(),delete this.newMethod,this.ClassName="ChartTrendAngle",this.AngleLineLength=100,this.AngleLineDash=[3,3],this.Font=12*C()+"px å¾®è½¯éé»",this.Super_SetOption=this.SetOption,this.SetOption=function(t){this.Super_SetOption&&this.Super_SetOption(t),t&&(we.IsNumber(t.AngleLineLength)&&(this.AngleLineLength=t.AngleLineLength),t.Font&&(this.Font=t.Font),t.AngleLineDash&&(this.AngleLineDash=t.AngleLineDash))},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!1});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1];this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.RestoreLineWidth(),this.DrawAngle(e,a);var i={Start:e,End:a};this.LinePoint.push(i),this.DrawPoint(t),this.Canvas.restore()}}},this.DrawAngle=function(t,e){var a=C(),i=this.CalculateAngle(t.X,t.Y,e.X,e.Y),r=this.AngleLineLength*a,n={X:t.X+r,Y:t.Y};if(this.AngleLineDash&&this.Canvas.setLineDash(this.AngleLineDash),this.Canvas.lineWidth=1*C(),this.Canvas.beginPath(),this.Canvas.moveTo(p(t.X),p(t.Y)),this.Canvas.lineTo(p(n.X),p(n.Y)),this.Canvas.stroke(),this.Canvas.beginPath(),i<=180){this.Canvas.arc(t.X,p(t.Y),r,0,Math.PI/180*(360-i),!0);var o=i.toFixed(0)+"Â°"}else{this.Canvas.arc(t.X,p(t.Y),r,0,Math.PI/180*(360-i),!1);var o=(i-360).toFixed(0)+"Â°"}this.Canvas.stroke(),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.font=this.Font,this.Canvas.fillStyle=this.LineColor,this.AngleLineDash&&this.Canvas.setLineDash([]),this.Canvas.fillText(o,n.X+5,n.Y)}}function na(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawGraffitiLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=null,this.PointCount=2,this.EnableMoveCheck=!1,this.PointToValue=function(){if(!this.Frame)return!1;if(this.Frame.IsHScreen)for(var t=0;t<this.Point.length;++t){var e=this.Point[t],a=this.Frame.GetYData(e.X),i={XValue:e.Y,YValue:a};this.Value[t]=i}else for(var t=0;t<this.Point.length;++t){var e=this.Point[t],a=this.Frame.GetYData(e.Y),i={XValue:e.X,YValue:a};this.Value[t]=i}return!0},this.ValueToPoint=function(){if(!this.Frame)return!1;var t=this.Frame.IsHScreen;this.Point=[];for(var e in this.Value){var a=this.Value[e],i=new E;t?(i.Y=a.XValue,i.X=this.Frame.GetYFromData(a.YValue)):(i.X=a.XValue,i.Y=this.Frame.GetYFromData(a.YValue,!1)),this.Point[e]=i}},this.UpdateXValue=function(){},this.CalculateDrawPoint=function(t){if(this.Status<2)return null;if(!this.Point.length||!this.Frame)return null;var e=[];if(10==this.Status){var a=this.Frame.IsHScreen;for(var i in this.Value){var r=this.Value[i],n=new E;a?(n.Y=r.XValue,n.X=this.Frame.GetYFromData(r.YValue,!1)):(n.X=r.XValue,n.Y=this.Frame.GetYFromData(r.YValue,!1)),e.push(n)}}else e=this.Point;return e},this.IsPointInXYValue=function(t,e,a){if(!this.Frame)return-1;if(!this.Value)return-1;var i=5;a&&we.IsNumber(a.Zoom)?i+=a.Zoom:this.Option&&we.IsNumber(this.Option.Zoom)&&(i+=this.Option.Zoom);var r=this.Frame.IsHScreen;i*=C();for(var n=0;n<this.Value.length;++n){var o=this.Value[n],s=new E;if(r?(s.Y=o.XValue,s.X,this.Frame.GetYFromData(o.YValue)):(s.X=o.XValue,s.Y=this.Frame.GetYFromData(o.YValue)),this.Canvas.beginPath(),this.Canvas.arc(s.X,s.Y,i,0,360),this.Canvas.isPointInPath(t,e))return n}return-1},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1];this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.RestoreLineWidth();var i={Start:e,End:a};this.LinePoint.push(i),this.DrawPoint(t),this.Canvas.restore()}}}}function oa(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawArrowLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.ArrawLineWidth=5,this.ArrawLength=15,this.ArrawAngle=35,this.GetXYCoordinate=this.GetXYCoordinate_default,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1],i=this.ArrawAngle,r=this.ArrawLength,n=180*Math.atan2(e.Y-a.Y,e.X-a.X)/Math.PI,o=(n+i)*Math.PI/180,s=(n-i)*Math.PI/180,l=r*Math.cos(o),h=r*Math.sin(o),u=r*Math.cos(s),c=r*Math.sin(s);this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.Canvas.beginPath();var f=a.X+l,d=a.Y+h;this.Canvas.moveTo(f,d),this.Canvas.lineTo(a.X,a.Y),f=a.X+u,d=a.Y+c,this.Canvas.lineTo(f,d),this.Canvas.lineWidth=this.ArrawLineWidth*C(),this.Canvas.stroke(),this.RestoreLineWidth();var D={Start:e,End:a};this.LinePoint.push(D),this.DrawPoint([t[0]]),this.Canvas.restore()}}}}function sa(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartArrowMarker",this.IsPointIn=this.IsPointIn_XYValue_Line,this.InsideLineConfig={Angle:25,MaxWidth:70,WidthRate:.3},this.InsideWidth=70,this.OutLineConfig={Angle:35,MaxWidth:100,WidthRate:.4},this.OutWidth=100,this.GetXYCoordinate=this.GetXYCoordinate_default,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.Super_SetOption=this.SetOption,this.SetOption=function(t){this.Super_SetOption(t),t.AreaColor?this.AreaColor=t.AreaColor:this.AreaColor=aa.ColorToRGBA(this.LineColor,.6)},this.CalculatePoint=function(t,e,a,i){var r=t,n=i,t=180*Math.atan2(e.Y-a.Y,e.X-a.X)/Math.PI,o=(t+r)*Math.PI/180,s=(t-r)*Math.PI/180,l=n*Math.cos(o),h=n*Math.sin(o),u=n*Math.cos(s),C=n*Math.sin(s);return{Top:{X:l+a.X,Y:h+a.Y},Bottom:{X:u+a.X,Y:C+a.Y}}},this.CalculateLineWidth=function(t,e){var a=t.X-e.X,i=t.Y-e.Y,r=Math.sqrt(a*a+i*i);this.InsideWidth=r*this.InsideLineConfig.WidthRate,this.OutWidth=r*this.OutLineConfig.WidthRate,this.InsideWidth>this.InsideLineConfig.MaxWidth&&(this.InsideWidth=this.InsideLineConfig.MaxWidth),this.OutWidth>this.OutLineConfig.MaxWidth&&(this.OutWidth=this.OutLineConfig.MaxWidth)},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1];this.CalculateLineWidth(e,a);var i=this.CalculatePoint(this.OutLineConfig.Angle,e,a,this.OutWidth),r=this.CalculatePoint(this.InsideLineConfig.Angle,e,a,this.InsideWidth);this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(r.Top.X,r.Top.Y),this.Canvas.lineTo(i.Top.X,i.Top.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.lineTo(i.Bottom.X,i.Bottom.Y),this.Canvas.lineTo(r.Bottom.X,r.Bottom.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.strokeStyle=this.LineColor,this.Canvas.stroke(),this.Canvas.closePath(),this.Canvas.fillStyle=this.AreaColor,this.Canvas.fill();var n={Start:e,End:a};this.LinePoint.push(n),this.DrawPoint([e,a]),this.Canvas.restore()}}}}function la(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureHaflLine",this.GetXYCoordinate=this.GetXYCoordinate_default,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.FullLine,this.IsPointIn=function(t,e,a){var i=this.IsPointIn_XYValue_Line(t,e,a);if(i>=0)return i;if(!this.FullLine)return i;var r=this.FullLine.Start,n=this.FullLine.End,o=C(),s=5*o;return this.Canvas.beginPath(),r.X==n.X?(this.Canvas.moveTo(r.X-s,r.Y),this.Canvas.lineTo(r.X+s,r.Y),this.Canvas.lineTo(n.X+s,n.Y),this.Canvas.lineTo(n.X-s,n.Y)):(this.Canvas.moveTo(r.X,r.Y+s),this.Canvas.lineTo(r.X,r.Y-s),this.Canvas.lineTo(n.X,n.Y-s),this.Canvas.lineTo(n.X,n.Y+s)),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e)?100:i},this.Draw=function(){if(this.LinePoint=[],this.FullLine=null,!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!1});if(t&&2==t.length){var e=t[0],a=t[1];this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.SetLineWidth(),this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y),this.Canvas.lineTo(t[1].X,t[1].Y);var i=this.CalculateExtendLineEndPoint(t);this.Canvas.lineTo(i.X,i.Y),this.Canvas.stroke(),this.RestoreLineWidth();var r={Start:e,End:a};this.LinePoint.push(r),this.DrawPoint(t),this.Canvas.restore(),this.FullLine={Start:t[0],End:i}}}}}function ha(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureHorizontalLine",this.PointCount=1,this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsDrawFirst=!0,this.LineWidth=1,this.Super_SetOption=this.SetOption,this.Super_ExportStorageData=this.ExportStorageData,this.LabelConfig={Left:{IsShow:!0,Margin:{Left:5,Top:4,Bottom:2,Right:5}},Right:{IsShow:!0,Margin:{Left:5,Top:4,Bottom:2,Right:5}},Font:12*C()+"px å¾®è½¯éé»",TextColor:"rgb(255,255,255)"},this.InsideLabelConfig={Position:0,Font:14*C()+"px å¾®è½¯éé»",Margin:{Left:5,Top:4,Bottom:2,Right:5},TextColor:"rgb(255,255,255)",BGAlpha:.8},this.LabelTitle,this.SetOption=function(t){if(this.Super_SetOption&&this.Super_SetOption(t),t){if(t.LabelTitle&&(this.LabelTitle=t.LabelTitle),t.Label){var e=t.Label;if(e.Left){var a=e.Left;we.IsBool(a.IsShow)&&(this.LabelConfig.Left.IsShow=a.IsShow)}if(e.Right){var a=e.Right;we.IsBool(a.IsShow)&&(this.LabelConfig.Right.IsShow=a.IsShow)}e.Font&&(this.LabelConfig.Font=e.Font),e.TextColor&&(this.LabelConfig.FoTextColornt=e.TextColor)}if(t.InsideLabel){var e=t.InsideLabel;e.Font&&(this.InsideLabelConfig.Font=e.Font),e.TextColor&&(this.InsideLabelConfig.TextColor=e.TextColor),we.IsNumber(e.Position)&&(this.InsideLabelConfig.Position=e.Position),we.IsNumber(e.BGAlpha)&&(this.InsideLabelConfig.BGAlpha=e.BGAlpha)}}},this.ExportStorageData=function(){var t;return this.Super_ExportStorageData&&(t=this.Super_ExportStorageData(),this.LabelTitle&&(t.LabelTitle=this.LabelTitle)),t},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint();if(t&&1==t.length&&this.Frame&&1==this.Value.length){if(!this.IsYValueInFrame(this.Value[0].YValue))return null;var e=this.Frame.IsHScreen,a=this.Frame.ChartBorder.GetLeft(),i=this.Frame.ChartBorder.GetRight();if(e&&(a=this.Frame.ChartBorder.GetTop(),i=this.Frame.ChartBorder.GetBottom()),this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.SetLineWidth(),this.Canvas.beginPath(),e)this.Canvas.moveTo(t[0].X,a),this.Canvas.lineTo(t[0].X,i);else{var r=v(this.LineWidth,t[0].Y);this.Canvas.moveTo(a,r),this.Canvas.lineTo(i,r)}this.Canvas.stroke(),this.RestoreLineWidth();var n={Start:new E,End:new E};e?(n.Start.X=t[0].X,n.Start.Y=a,n.End.X=t[0].X,n.End.Y=i):(n.Start.X=a,n.Start.Y=t[0].Y,n.End.X=i,n.End.Y=t[0].Y),this.LinePoint.push(n),this.DrawPoint(t),this.DrawInsideLabel(t[0]),this.Canvas.restore(),this.DrawValueLabel(t[0])}}},this.DrawValueLabel=function(t){if(t&&!this.Frame.IsHScreen){var e=t.Y,a=this.Frame.GetYData(e),i=a.toFixed(2),r=this.Frame.GetBorder(),n=this.LabelConfig;this.Canvas.font=n.Font;var o=this.Canvas.measureText("æ").width,s=this.Canvas.measureText(i).width;if(n.Left.IsShow&&this.Frame.ChartBorder.Left>5){var l=n.Left.Margin,h={Right:r.Left-1,Height:o+l.Top+l.Bottom,Width:s+l.Left+l.Right};h.Top=e-o/2-l.Top,h.Bottom=h.Top+h.Height,h.Left=h.Right-h.Width,this.Canvas.fillStyle=this.LineColor,this.Canvas.fillRect(h.Left,h.Top,h.Width,h.Height),this.Canvas.textAlign="left",this.Canvas.textBaseline="top";var u=h.Left+l.Left,C=h.Top+l.Top;this.Canvas.fillStyle=n.TextColor,this.Canvas.fillText(i,u,C)}if(n.Right.IsShow&&this.Frame.ChartBorder.Right>5){var l=n.Right.Margin,h={Left:r.Right+1,Height:o+l.Top+l.Bottom,Width:s+l.Left+l.Right};h.Top=e-o/2-l.Top,h.Bottom=h.Top+h.Height,h.Right=h.Left+h.Width,this.Canvas.fillStyle=this.LineColor,this.Canvas.fillRect(h.Left,h.Top,h.Width,h.Height),this.Canvas.textAlign="left",this.Canvas.textBaseline="top";var u=h.Left+l.Left,C=h.Top+l.Top;this.Canvas.fillStyle=n.TextColor,this.Canvas.fillText(i,u,C)}}},this.DrawInsideLabel=function(t){if(t){var e=this.Frame.IsHScreen,a=this.InsideLabelConfig;if(0==a.Position||1==a.Position){var i=a.Margin;this.Canvas.fillStyle=this.LineColor,this.Canvas.font=a.Font;var r=this.Canvas.measureText("æ").width,n=this.Frame.GetBorder();if(e){var o=this.Frame.GetYData(t.X),s=o.toFixed(2);this.LabelTitle&&(s=this.LabelTitle+s);var l=this.Canvas.measureText(s).width,h=null;if(0==a.Position){var h={Top:n.Top+1,Width:r+i.Top+i.Bottom,Height:l+i.Left+i.Right,Left:t.X};h.Bottom=h.Top+h.Height,h.Right=h.Left+h.Width}else if(1==a.Position){var h={Bottom:n.Bottom-1,Width:r+i.Top+i.Bottom,Height:l+i.Left+i.Right,Left:t.X};h.Top=h.Bottom-h.Height,h.Right=h.Left+h.Width}var u=this.LineColor;a.BGAlpha<1&&(u=aa.ColorToRGBA(this.LineColor,a.BGAlpha)),this.Canvas.fillStyle=u,this.Canvas.fillRect(h.Left,h.Top,h.Width,h.Height);var C=h.Right-i.Top,c=h.Top+i.Left;this.Canvas.translate(C,c),this.Canvas.rotate(90*Math.PI/180),this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.fillStyle=a.TextColor,this.Canvas.fillText(s,0,0)}else{var o=this.Frame.GetYData(t.Y),s=o.toFixed(2);this.LabelTitle&&(s=this.LabelTitle+s);var l=this.Canvas.measureText(s).width,h=null;if(0==a.Position){var h={Left:n.Left+1,Height:r+i.Top+i.Bottom,Width:l+i.Left+i.Right,Bottom:t.Y};h.Top=h.Bottom-h.Height,h.Right=h.Left+h.Width}else if(1==a.Position){var h={Right:n.Right-1,Height:r+i.Top+i.Bottom,Width:l+i.Left+i.Right,Bottom:t.Y};h.Top=h.Bottom-h.Height,h.Left=h.Right-h.Width}var u=this.LineColor;a.BGAlpha<1&&(u=aa.ColorToRGBA(this.LineColor,a.BGAlpha)),this.Canvas.fillStyle=u,this.Canvas.fillRect(h.Left,h.Top,h.Width,h.Height);var C=h.Left+i.Left,c=h.Top+i.Top;this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.fillStyle=a.TextColor,this.Canvas.fillText(s,C,c)}}}}}function ua(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureHorizontalRay",this.PointCount=1,this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsDrawFirst=!0,this.LineWidth=1,this.Super_SetOption=this.SetOption,this.Super_ExportStorageData=this.ExportStorageData,this.LabelConfig={Right:{IsShow:!0,Margin:{Left:5,Top:4,Bottom:2,Right:5}},Font:12*C()+"px å¾®è½¯éé»",TextColor:"rgb(255,255,255)"},this.SetOption=function(t){if(this.Super_SetOption&&this.Super_SetOption(t),t&&(t.LabelTitle&&(this.LabelTitle=t.LabelTitle),t.Label)){var e=t.Label;if(e.Right){var a=e.Right;we.IsBool(a.IsShow)&&(this.LabelConfig.Right.IsShow=a.IsShow)}e.Font&&(this.LabelConfig.Font=e.Font),e.TextColor&&(this.LabelConfig.FoTextColornt=e.TextColor)}},this.ExportStorageData=function(){var t;return this.Super_ExportStorageData&&(t=this.Super_ExportStorageData()),t},this.GetXYCoordinate=function(){if(this.IsFrameMinSize())return null;var t=this.CalculateDrawPoint(),e=this.PointRange(t);return e&&(e.IsShowYCoordinate=!1),e},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint();if(t&&1==t.length&&this.Frame&&1==this.Value.length){if(!this.IsYValueInFrame(this.Value[0].YValue))return null;var e=this.Frame.IsHScreen,a=(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetRight());if(e&&(this.Frame.ChartBorder.GetTop(),a=this.Frame.ChartBorder.GetBottom()),this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.SetLineWidth(),this.Canvas.beginPath(),e)this.Canvas.moveTo(t[0].X,t[0].Y),this.Canvas.lineTo(t[0].X,a);else{var i=v(this.LineWidth,t[0].Y);this.Canvas.moveTo(t[0].X,i),this.Canvas.lineTo(a,i)}this.Canvas.stroke(),this.RestoreLineWidth();var r={Start:new E,End:new E};e?(r.Start.X=t[0].X,r.Start.Y=t[0].Y,r.End.X=t[0].X,r.End.Y=a):(r.Start.X=t[0].X,r.Start.Y=t[0].Y,r.End.X=a,r.End.Y=t[0].Y),this.LinePoint.push(r),this.DrawPoint(t),this.Canvas.restore(),this.DrawValueLabel(t[0])}}},this.DrawValueLabel=function(t){if(t&&!this.Frame.IsHScreen){var e=t.Y,a=this.Frame.GetYData(e),i=a.toFixed(2),r=this.Frame.GetBorder(),n=this.LabelConfig;this.Canvas.font=n.Font;var o=this.Canvas.measureText("æ").width,s=this.Canvas.measureText(i).width;if(n.Right.IsShow&&this.Frame.ChartBorder.Right>5){var l=n.Right.Margin,h={Left:r.Right+1,Height:o+l.Top+l.Bottom,Width:s+l.Left+l.Right};h.Top=e-o/2-l.Top,h.Bottom=h.Top+h.Height,h.Right=h.Left+h.Width,this.Canvas.fillStyle=this.LineColor,this.Canvas.fillRect(h.Left,h.Top,h.Width,h.Height),this.Canvas.textAlign="left",this.Canvas.textBaseline="top";var u=h.Left+l.Left,C=h.Top+l.Top;this.Canvas.fillStyle=n.TextColor,this.Canvas.fillText(i,u,C)}}}}function Ca(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.Super_SetOption=this.SetOption,this.Super_ExportStorageData=this.ExportStorageData,this.LineWidth=1,this.Precision=2,this.ValueTextColor="rgb(250,250,250)",this.IsShowCorssCursor=!0,this.GetLabelCallback,this.PointCount=1,this.ClassName="ChartDrawHLine",this.Font=14*C()+"px å¾®è½¯éé»",this.TextFont=12*C()+"px å¾®è½¯éé»",this.RightSpaceWidth=50,this.ButtonPosition=0,this.ButtonBGColor="rgb(190,190,190)",this.ButtonSpace=3,this.TextMargin={Left:0,Right:0,Top:0,Bottom:0,YOffset:4*C()},this.AlwaysShowLab=!1,this.Button={CloseIcon:{Text:"î«",Color:"rgb(255,255,255)",Family:"iconfont",Size:16,ID:qn.DRAW_PICTURE_DELETE,TooltipText:null,Margin:{Left:2,Right:2}},SettingIcon:{Text:"î£",Color:"rgb(255,255,255)",Family:"iconfont",Size:16,ID:qn.DRAW_PICTURE_SETTING,TooltipText:null,Margin:{Left:2,Right:2}}},this.CustomButton=[],this.AryShowButton=[],this.AryButton=[],this.ExtendData,this.ShowPriceTextConfig={IsShow:[!1,!1,!0],Font:[12*C()+"px å¾®è½¯éé»",12*C()+"px å¾®è½¯éé»"]},this.LableInfo,this.ColseButtonSize=0,this.SettingButtonSize=0,this.ButtonBGWidth=0,this.VerticalButtonInfo={Width:0,Height:0},this.IsPointIn=this.IsPointIn_XYValue_Line,this.SetOption=function(t){if(this.Super_SetOption&&this.Super_SetOption(t),t){if(t.GetLabelCallback&&(this.GetLabelCallback=t.GetLabelCallback),we.IsNumber(t.Precision)&&(this.Precision=t.Precision),t.Font&&(this.Font=t.Font),t.ValueTextColor&&(this.ValueTextColor=t.ValueTextColor),t.ButtonBGColor&&(this.ButtonBGColor=t.ButtonBGColor),we.IsNumber(t.ButtonPosition)&&(this.ButtonPosition=t.ButtonPosition),we.IsNumber(t.RightSpaceWidth)&&(this.RightSpaceWidth=t.RightSpaceWidth),we.IsBool(t.AlwaysShowLab)&&(this.AlwaysShowLab=t.AlwaysShowLab),t.Button){var e=t.Button;e.CloseIcon?(this.Button.CloseIcon=I(e.CloseIcon),this.Button.CloseIcon.ID||(this.Button.CloseIcon.ID=qn.DRAW_PICTURE_DELETE)):null===e.CloseIcon&&(this.Button.CloseIcon=null),e.SettingIcon?(this.Button.SettingIcon=I(e.SettingIcon),this.Button.SettingIcon.ID||(this.Button.SettingIcon.ID=qn.DRAW_PICTURE_SETTING)):null===e.SettingIcon&&(this.Button.SettingIcon=null)}if(t.ExtendData&&(this.ExtendData=t.ExtendData),we.IsNonEmptyArray(t.IsShowPriceText))for(var a=0;a<t.IsShowPriceText.length&&a<3;++a){var i=t.IsShowPriceText[a];we.IsBool(i)&&(this.ShowPriceTextConfig.IsShow[a]=i)}if(t.TextMargin){var e=t.TextMargin;we.IsNumber(e.Left)&&(this.TextMargin.Left=e.Left),we.IsNumber(e.Right)&&(this.TextMargin.Right=e.Right),we.IsNumber(e.Top)&&(this.TextMargin.Top=e.Top),we.IsNumber(e.Bottom)&&(this.TextMargin.Bottom=e.Bottom),we.IsNumber(e.YOffset)&&(this.TextMargin.YOffset=e.YOffset)}}},this.ExportStorageData=function(){var t;return this.Super_ExportStorageData&&(t=this.Super_ExportStorageData(),this.Label&&(t.Label=this.Label)),t},this.IsDrawMain=function(){return!this.GetActiveDrawPicture||this.GetActiveDrawPicture().Select.Guid!=this.Guid},this.MainDraw=function(){this.Draw()},this.GetShowButton=function(){var t=[],e=this.Button.SettingIcon;if(e&&e.Text&&t.push({Data:e,Width:null}),e=this.Button.CloseIcon,e&&e.Text&&t.push({Data:e,Width:null}),we.IsNonEmptyArray(this.CustomButton))for(var a=0;a<this.CustomButton.length;++a)(e=this.CustomButton[a])&&e.Text&&t.push({Data:e,Width:null});return t},this.Draw=function(t,e){if(this.AryShowButton=[],this.LinePoint=[],this.AryButton=[],this.ColseButtonSize=0,this.SettingButtonSize=0,this.ButtonBGWidth=0,this.LableInfo=null,this.VerticalButtonInfo.Width=0,this.VerticalButtonInfo.Height=0,!this.IsFrameMinSize()&&this.IsShow){var a=this.CalculateDrawPoint();if(a&&1==a.length&&this.Frame&&1==this.Value.length){var i=this.IsYValueInFrame(this.Value[0].YValue);if(this.AlwaysShowLab||i){var r=this.Frame.IsHScreen,n=this.Frame.ChartBorder.GetLeft(),o=this.Frame.ChartBorder.GetRight();r&&(n=this.Frame.ChartBorder.GetTop(),o=this.Frame.ChartBorder.GetBottom()),this.ClipFrame(),i&&(this.Canvas.strokeStyle=this.LineColor,this.SetLineWidth(),this.Canvas.beginPath(),r?(this.Canvas.moveTo(a[0].X,n),this.Canvas.lineTo(a[0].X,o)):(this.Canvas.moveTo(n,p(a[0].Y)),this.Canvas.lineTo(o,p(a[0].Y))),this.Canvas.stroke(),this.RestoreLineWidth());var s={Start:new E,End:new E};if(r?(s.Start.X=a[0].X,s.Start.Y=n,s.End.X=a[0].X,s.End.Y=o):(s.Start.X=n,s.Start.Y=a[0].Y,s.End.X=o,s.End.Y=a[0].Y),this.LinePoint.push(s),i){var l=this.Frame.GetYData(a[0].Y,!1),h=l.toFixed(this.Precision);this.ShowPriceTextConfig.IsShow[0]&&this.DrawPriceText(h,s.Start,s.End,0),this.ShowPriceTextConfig.IsShow[1]&&this.DrawPriceText(h,s.Start,s.End,1)}if(this.GetLabelCallback&&(this.LableInfo=this.GetLabelCallback(this)),this.AryShowButton=this.GetShowButton(),i&&this.DrawInternalLabel(a[0].Y),i){var u=n+(o-n)/2,C={X:u,Y:a[0].Y};this.DrawPoint([C])}if(this.Canvas.restore(),this.ShowPriceTextConfig.IsShow[2]){this.CalculateButtonSize(),this.DrawRightLabel(a[0].Y),i&&this.DrawCustomHLine(a[0].Y)}if(t&&e)for(var c=0;c<this.AryButton.length;++c){var f=this.AryButton[c],d=f.Rect;if(t.X>=d.Left&&t.X<d.Right&&t.Y>=d.Top&&t.Y<=d.Bottom){e.MouseOnToolbar={Rect:d,Item:f,Frame:this.Frame,Point:{X:t.X,Y:t.Y}};break}}}}}},this.CalculateLabSize=function(t){this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.font=this.TextFont;var e=this.Canvas.measureText("æ").width+2,a=0,i=0,r=0,n=0;we.IsNumber(t.LineSpace)&&(n=t.LineSpace);for(var a=0,i=0,r=0,o=0,s=0;s<t.AryText.length;++s){var l=t.AryText[s];l.NameWidth=0,l.TextWidth=0,l.Name&&(l.NameWidth=this.Canvas.measureText(l.Name).width+2),l.Text&&(l.TextWidth=this.Canvas.measureText(l.Text).width+2),a<l.NameWidth&&(a=l.NameWidth),i<l.TextWidth&&(i=l.TextWidth);var h=l.NameWidth+l.TextWidth;o<h&&(o=h),++r}var u={Width:o,Height:r*e+(r-1)*n,NameWidth:a,TextWidth:i,LineHeight:e};if(t.LabelMargin){var l=t.LabelMargin;we.IsNumber(l.Left)&&(u.Width+=l.Left),we.IsNumber(l.Right)&&(u.Width+=l.Right),we.IsNumber(l.Top)&&(u.Height+=l.Top),we.IsNumber(l.Bottom)&&(u.Height+=l.Bottom)}return u},this.DrawInternalLabel=function(t){if(this.LableInfo&&we.IsNonEmptyArray(this.LableInfo.AryText)&&2!=this.LableInfo.Position){var e=this.Frame.GetBorder(),a=(e.Left,e.Right),i=this.CalculateLabSize(this.LableInfo),r=a-i.Width,n=r+i.Width,o=t-i.Height-1;o<=e.TopEx&&(o=t+1);var s={Left:r,Right:n,Top:o,Width:i.Width,Height:i.Height};s.Bottom=s.Top+s.Height,this.DrawLabel(this.LableInfo,i,s)}},this.DrawLabel=function(t,e,a){t.BGColor&&(this.Canvas.fillStyle=t.BGColor,this.Canvas.fillRect(g(a.Left),g(a.Top),g(a.Width),g(a.Height)));var i=t.LabelMargin,r=0;we.IsNumber(t.LineSpace)&&(r=t.LineSpace);var n=a.Top,o=a.Left,s=a.Right;i&&(we.IsNumber(i.Left)&&(o+=i.Left),we.IsNumber(i.Right)&&(s-=i.Right),we.IsNumber(i.Top)&&(n+=i.Top)),this.Canvas.font=this.TextFont,this.Canvas.textBaseline="top";for(var l=0;l<t.AryText.length;++l){l>0&&(n+=r);var h=t.AryText[l];h.Name&&(this.Canvas.textAlign="left",this.Canvas.fillStyle=h.NameColor,this.Canvas.fillText(h.Name,o,n)),h.Text&&(this.Canvas.textAlign="right",this.Canvas.fillStyle=h.TextColor,this.Canvas.fillText(h.Text,s,n)),n+=e.LineHeight}},this.DrawRightLabel=function(t){var e={};if(!this.LableInfo||!we.IsNonEmptyArray(this.LableInfo.AryText)||2!=this.LableInfo.Position)return void this.DrawValueText(t,e);var a=this.CalculateValueText(t),i=this.CalculateLabSize(this.LableInfo),r=this.Frame.GetBorder(),n=t-a.Height/2,o=a.Height+i.Height,s=n+o,l={};s>r.Bottom&&(s=r.Bottom,n=s-o,l.Top=n),this.DrawValueText(t,e,l);var h=e.Right-i.Width;h<e.Left&&(h=e.Left);var u=h+i.Width,C=e.Bottom,c={Left:h,Right:u,Top:C,Width:i.Width,Height:i.Height};c.Bottom=c.Top+c.Height,this.DrawLabel(this.LableInfo,i,c),this.DrawVerticalButton(c)},this.DrawCustomHLine=function(t){if(this.LableInfo&&we.IsNonEmptyArray(this.LableInfo.AryLine)){for(var e=this.Frame.ChartBorder.GetLeft(),a=this.Frame.ChartBorder.GetRight(),i=C(),r=t,n=t,o=0;o<this.LableInfo.AryLine.length;++o){var s=this.LableInfo.AryLine[o];if(we.IsNumber(s.Value)&&!(s.Width<0)){var l=this.Frame.GetYFromData(s.Value),h=p(l),u=a;we.IsPlusNumber(s.Width)&&(u=s.Width<1?e+s.Width*(a-e):e+s.Width*i),s.Color?this.Canvas.strokeStyle=s.Color:this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e,h),this.Canvas.lineTo(u,h),this.Canvas.stroke(),r<h&&(r=h),n>h&&(n=h)}}if(r!=n&&this.LableInfo.VLine){var s=this.LableInfo.VLine,c=e+20*i;we.IsNumber(s.XOffset)&&(c=e+s.XOffset*i),c=p(c),s.Color?this.Canvas.strokeStyle=s.Color:this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(c,r),this.Canvas.lineTo(c,n),this.Canvas.stroke()}}},this.DrawValueText=function(t,e,a){var i=(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetRight()),r=this.Frame.ChartBorder.GetTopEx(),n=this.Frame.ChartBorder.GetBottomEx(),o=C(),s=this.LabelInfo;s&&we.IsNumber(s.TopOffset)&&(r-=s.TopOffset),s&&we.IsNumber(s.BottomOffset)&&(n+=s.BottomOffset);var l=this.Frame.GetYData(t,!1),h=l.toFixed(this.Precision);s&&s.PriceSuffixText&&(h+=s.PriceSuffixText);var u=!0;t<r?(t=r,u=!1):t>n&&(t=n,u=!1),this.RightSpaceWidth>0&&(u||this.Canvas.setLineDash([2*o,3*o]),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(i,p(t)),this.Canvas.lineTo(i+this.RightSpaceWidth,p(t)),this.Canvas.stroke(),u||this.Canvas.setLineDash([])),this.Canvas.fillStyle=this.LineColor,this.Canvas.font=this.Font;var c=this.Canvas.measureText(h).width,f=this.GetFontHeight(),d={Left:i+this.RightSpaceWidth,YCenter:t,Width:c,Height:f};d.Height+=this.TextMargin.Top+this.TextMargin.Bottom,d.Width+=this.TextMargin.Left+this.TextMargin.Right,d.Right=d.Left+d.Width,d.Top=d.YCenter-d.Height/2,d.Bottom=d.Top+d.Height,a&&we.IsNumber(a.Top)&&(d.Top=a.Top,d.Bottom=d.Top+d.Height);var D=d.Left+this.TextMargin.Left,m=d.Top+this.TextMargin.Top+this.TextMargin.YOffset;1==this.ButtonPosition?this.Canvas.fillRect(g(d.Left),g(d.Top),g(d.Width+this.ButtonBGWidth),g(d.Height)):this.Canvas.fillRect(g(d.Left),g(d.Top),g(d.Width),g(d.Height)),this.Canvas.fillStyle=this.ValueTextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.fillText(h,D,m),e.Left=d.Left,e.Top=d.Top,e.Bottom=d.Bottom,e.Right=d.Right,this.DrawButton(d.Top,d.Right,f,e)},this.CalculateValueText=function(t){var e=this.Frame.GetYData(t,!1),a=e.toFixed(this.Precision);this.LableInfo&&this.LableInfo.PriceSuffixText&&(a+=this.LableInfo.PriceSuffixText),this.Canvas.font=this.Font;var i=this.Canvas.measureText(a).width,r=this.GetFontHeight(),n={Width:i,Height:r};return n.Height+=this.TextMargin.Top+this.TextMargin.Bottom,n.Width+=this.TextMargin.Left+this.TextMargin.Right,n},this.DrawPriceText=function(t,e,a,i){if(1==i||0==i){var r=this.ShowPriceTextConfig.Font[i];this.Canvas.fillStyle=this.LineColor,this.Canvas.font=r;var n=this.Canvas.measureText(t).width,o=this.GetFontHeight(),s=null;if(1==i){var s={Left:e.X,Top:e.Y-o/2,Width:n+4,Height:o};s.Right=s.Left+s.Width,s.Bottom=s.Top+s.Height}else if(0==i){var s={Right:a.X,Top:a.Y-o/2,Width:n+4,Height:o};s.Left=s.Right-s.Width,s.Bottom=s.Top+s.Height}this.Canvas.fillRect(g(s.Left),g(s.Top),g(s.Width+this.ButtonBGWidth),g(s.Height)),this.Canvas.fillStyle=this.ValueTextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(t,s.Left+2,e.Y)}},this.CalculateButtonSize=function(){var t=C();if(we.IsNonEmptyArray(this.AryShowButton)){for(var e=0,a=0;a<this.AryShowButton.length;++a){var i=this.AryShowButton[a],r=i.Data,n=r.Size*t+"px "+r.Family;if(this.Canvas.font=n,i.Width=this.Canvas.measureText(r.Text).width+2,i.Height=i.Width,r.Margin){var o=r.Margin;we.IsNumber(o.Left)&&(i.Width+=o.Left),we.IsNumber(o.Right)&&(i.Width+=o.Right),we.IsNumber(o.Top)&&(i.Height+=o.Top),we.IsNumber(o.Bottom)&&(i.Height+=o.Bottom)}this.VerticalButtonInfo.Width<i.Width&&(this.VerticalButtonInfo.Width=i.Width),this.VerticalButtonInfo.Height+=i.Height,e+=i.Width}this.ButtonBGWidth=e}},this.DrawVerticalButton=function(t){if(3==this.ButtonPosition&&we.IsNonEmptyArray(this.AryShowButton)&&!(this.VerticalButtonInfo.Height<=0)){var e={Left:t.Right,Top:t.Top,Width:this.VerticalButtonInfo.Width,Height:this.VerticalButtonInfo.Height};e.Right=e.Left+e.Width,e.Bottom=e.Top+e.Height,this.Canvas.fillStyle=this.ButtonBGColor,this.Canvas.fillRect(g(e.Left),g(e.Top),g(e.Width),g(e.Height));for(var a=C(),i=t.Top,r=0;r<this.AryShowButton.length;++r){var n=this.AryShowButton[r],o=n.Data,s={Left:e.Left,Top:i,Width:this.VerticalButtonInfo.Width,Height:n.Height};s.Right=s.Left+s.Width,s.Bottom=s.Top+s.Height;var l=s.Top+s.Height/2,h=s.Left+s.Width/2,u=o.Size*a+"px "+o.Family;this.Canvas.font=u,this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=o.Color,this.Canvas.fillText(o.Text,h,l),this.AryButton.push({Rect:s,ID:o.ID,TooltipText:o.TooltipText,Data:o.Data}),i=s.Bottom}}},this.DrawButton=function(t,e,a,i){if(we.IsNonEmptyArray(this.AryShowButton)&&3!=this.ButtonPosition){if(1==this.ButtonPosition){t-=a;var r=this.Frame.ChartBorder.GetChartWidth();this.Frame.ChartBorder.GetRight(),this.RightSpaceWidth;e+this.ButtonBGWidth>r&&(e=r-this.ButtonBGWidth),i.Left>e&&(e=i.Left)}else 2==this.ButtonPosition&&(t-=a,e=i.Left);this.Canvas.fillStyle=this.LineColor;var n=e,o={Left:e,Top:t,Width:this.ButtonBGWidth,Height:a};o.Right=o.Left+o.Width,o.Bottom=o.Top+o.Height,this.Canvas.fillStyle=this.ButtonBGColor,this.Canvas.fillRect(g(o.Left),g(o.Top),g(o.Width),g(o.Height));for(var s=C(),l=0;l<this.AryShowButton.length;++l){var h=this.AryShowButton[l],u=h.Data,c={Left:n,Top:t,Width:h.Width,Height:a};c.Right=c.Left+c.Width,c.Bottom=c.Top+c.Height;var f=c.Top+c.Height/2,d=c.Left+c.Width/2,D=u.Size*s+"px "+u.Family;this.Canvas.font=D,this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=u.Color,this.Canvas.fillText(u.Text,d,f),this.AryButton.push({Rect:c,ID:u.ID,TooltipText:u.TooltipText,Data:u.Data}),n=c.Right}}},this.PtInButtons=function(t,e){for(var a=0;a<this.AryButton.length;++a){var i=this.AryButton[a];if(i.Rect){var r=i.Rect;if(this.Canvas.beginPath(),this.Canvas.rect(r.Left,r.Top,r.Width,r.Height),this.Canvas.isPointInPath(t,e))return{ID:i.ID,Rect:r,Data:i.Data}}}return null}}function ca(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureTrendLine",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!1});if(t&&2==t.length){var e=t[0],a=t[1],i=this.CalculateExtendLinePoint(e,a);this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.SetLineWidth(),this.Canvas.beginPath(),this.Canvas.moveTo(i.Start.X,i.Start.Y),this.Canvas.lineTo(i.End.X,i.End.Y),this.Canvas.stroke(),this.RestoreLineWidth();var r={Start:e,End:a};this.LinePoint.push(r),this.DrawPoint(t),this.Canvas.restore()}}}}function fa(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureRect",this.GetXYCoordinate=this.GetXYCoordinate_default,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.Draw=function(){if(!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});t&&2==t.length&&(this.AreaColor=aa.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.SetLineWidth(),this.Canvas.beginPath(),this.Canvas.rect(t[0].X,t[0].Y,t[1].X-t[0].X,t[1].Y-t[0].Y),this.Canvas.stroke(),this.RestoreLineWidth(),this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.fillRect(t[0].X,t[0].Y,t[1].X-t[0].X,t[1].Y-t[0].Y),this.Canvas.restore(),this.DrawPoint(t))}},this.IsPointIn=function(t,e,a){if(this.IsFrameMinSize())return-1;if(!this.Frame||10!=this.Status)return-1;if(!this.Frame.Data)return-1;var i=this.IsPointInXYValue(t,e,a);if(i>=0)return i;var r=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(!r||2!=r.length)return-1;var n=[{X:r[0].X,Y:r[0].Y},{X:r[1].X,Y:r[0].Y}];return this.IsPointInLine(n,t,e,a)?100:(n=[{X:r[1].X,Y:r[0].Y},{X:r[1].X,Y:r[1].Y}],this.IsPointInLine2(n,t,e,a)?100:(n=[{X:r[1].X,Y:r[1].Y},{X:r[0].X,Y:r[1].Y}],this.IsPointInLine(n,t,e,a)?100:(n=[{X:r[0].X,Y:r[1].Y},{X:r[0].X,Y:r[0].Y}],this.IsPointInLine2(n,t,e,a)?100:-1)))},this.IsPointInLine=function(t,e,a,i){var r=5;if(i&&we.IsNumber(i.Zoom)?r+=i.Zoom:this.Option&&we.IsNumber(this.Option.Zoom)&&(r+=this.Option.Zoom),r*=C(),this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y+r),this.Canvas.lineTo(t[0].X,t[0].Y-r),this.Canvas.lineTo(t[1].X,t[1].Y-r),this.Canvas.lineTo(t[1].X,t[1].Y+r),this.Canvas.closePath(),this.Canvas.isPointInPath(e,a))return!0},this.IsPointInLine2=function(t,e,a,i){var r=5;if(i&&we.IsNumber(i.Zoom)?r+=i.Zoom:this.Option&&we.IsNumber(this.Option.Zoom)&&(r+=this.Option.Zoom),r*=C(),this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X-r,t[0].Y),this.Canvas.lineTo(t[0].X+r,t[0].Y),this.Canvas.lineTo(t[1].X+r,t[1].Y),this.Canvas.lineTo(t[1].X-r,t[1].Y),this.Canvas.closePath(),this.Canvas.isPointInPath(e,a))return!0}}function da(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureArc",this.Draw=function(){if(!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint();if(t&&2==t.length){if(this.ClipFrame(),this.SetLineWidth(),t[0].X<t[1].X&&t[0].Y>t[1].Y){var e=t[1].X-t[0].X,a=t[0].Y-t[1].Y,i=e>a?1/e:1/a,r=t[0].X,n=t[1].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var o=1.5*Math.PI;o<2*Math.PI;o+=i)this.Canvas.lineTo(r+e*Math.cos(o),n+a*Math.sin(o)*-1);for(var s=0;s<=.5*Math.PI;s+=i)this.Canvas.lineTo(r+e*Math.cos(s),n+a*Math.sin(s)*-1)}else if(t[0].X>t[1].X&&t[0].Y>t[1].Y){var e=t[0].X-t[1].X,a=t[0].Y-t[1].Y,i=e>a?1/e:1/a,r=t[1].X,n=t[0].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var o=0;o<=Math.PI;o+=i)this.Canvas.lineTo(r+e*Math.cos(o),n+a*Math.sin(o)*-1)}else if(t[0].X>t[1].X&&t[0].Y<t[1].Y){var e=t[0].X-t[1].X,a=t[1].Y-t[0].Y,i=e>a?1/e:1/a,r=t[0].X,n=t[1].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var o=.5*Math.PI;o<=1.5*Math.PI;o+=i)this.Canvas.lineTo(r+e*Math.cos(o),n+a*Math.sin(o)*-1)}else if(t[0].X<t[1].X&&t[0].Y<t[1].Y){var e=t[1].X-t[0].X,a=t[1].Y-t[0].Y,i=e>a?1/e:1/a,r=t[1].X,n=t[0].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var o=Math.PI;o<=2*Math.PI;o+=i)this.Canvas.lineTo(r+e*Math.cos(o),n+a*Math.sin(o)*-1)}this.Canvas.strokeStyle=this.LineColor,this.Canvas.stroke(),this.RestoreLineWidth(),this.Canvas.restore(),this.DrawPoint(t)}}},this.IsPointIn=function(t,e,a){if(this.IsFrameMinSize())return-1;if(!this.Frame||10!=this.Status)return-1;if(!this.Frame.Data)return-1;var i=this.IsPointInXYValue(t,e,a);if(i>=0)return i;var r=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(!r||2!=r.length)return-1;var n=[{X:r[0].X,Y:r[0].Y},{X:r[1].X,Y:r[1].Y}];return this.IsPointInArc(n,t,e)?100:-1},this.IsPointInArc=function(t,e,a){if(2!=t.length)return!1;if(t[0].X<t[1].X&&t[0].Y>t[1].Y){var i=t[1].X-t[0].X,r=t[0].Y-t[1].Y,n=i>r?1/i:1/r,o=.8*i,s=.8*r,l=o>s?1/o:1/s,h=t[0].X,u=t[1].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var C=1.5*Math.PI;C<2*Math.PI;C+=n)this.Canvas.lineTo(h+i*Math.cos(C),u+r*Math.sin(C)*-1);for(var c=0;c<=.5*Math.PI;c+=n)this.Canvas.lineTo(h+i*Math.cos(c),u+r*Math.sin(c)*-1);for(var f=.5*Math.PI;f>=0;f-=l)this.Canvas.lineTo(h+o*Math.cos(f),u+s*Math.sin(c)*-1);for(var d=2*Math.PI;d>=1.5*Math.PI;d-=l)this.Canvas.lineTo(h+o*Math.cos(d),u+s*Math.sin(d)*-1);this.Canvas.closePath()}else if(t[0].X>t[1].X&&t[0].Y>t[1].Y){var i=t[0].X-t[1].X,r=t[0].Y-t[1].Y,n=i>r?1/i:1/r,o=.8*i,s=.8*r,l=o>s?1/o:1/s,h=t[1].X,u=t[0].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var C=0;C<=Math.PI;C+=n)this.Canvas.lineTo(h+i*Math.cos(C),u+r*Math.sin(C)*-1);for(var c=Math.PI;c>=0;c-=l)this.Canvas.lineTo(h+o*Math.cos(c),u+s*Math.sin(c)*-1);this.Canvas.closePath()}else if(t[0].X>t[1].X&&t[0].Y<t[1].Y){var i=t[0].X-t[1].X,r=t[1].Y-t[0].Y,n=i>r?1/i:1/r,o=.8*i,s=.8*r,l=o>s?1/o:1/s,h=t[0].X,u=t[1].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var C=.5*Math.PI;C<=1.5*Math.PI;C+=n)this.Canvas.lineTo(h+i*Math.cos(C),u+r*Math.sin(C)*-1);for(var c=1.5*Math.PI;c>=.5*Math.PI;c-=l)this.Canvas.lineTo(h+o*Math.cos(c),u+s*Math.sin(c)*-1);this.Canvas.closePath()}else if(t[0].X<t[1].X&&t[0].Y<t[1].Y){var i=t[1].X-t[0].X,r=t[1].Y-t[0].Y,n=i>r?1/i:1/r,o=.8*i,s=.8*r,l=o>s?1/o:1/s,h=t[1].X,u=t[0].Y;this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y);for(var C=Math.PI;C<=2*Math.PI;C+=n)this.Canvas.lineTo(h+i*Math.cos(C),u+r*Math.sin(C)*-1);for(var c=2*Math.PI;c>=Math.PI;c-=l)this.Canvas.lineTo(h+o*Math.cos(c),u+s*Math.sin(c)*-1);this.Canvas.closePath()}return!!this.Canvas.isPointInPath(e,a)}}function Da(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureWaveMW",this.PointCount=5,this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.IsHScreen=!1,this.Draw=function(){if(this.LinePoint=[],this.Frame&&!this.IsFrameMinSize()&&this.IsShow){this.IsHScreen=this.Frame.IsHScreen;var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.AreaColor=aa.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.CalculateLines(t),this.SetLineWidth();for(var e in this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.CalculateLines=function(t){if(this.Frame&&!(t.length<2))if(2==this.Status){var e={Start:new E,End:new E};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e);var a=t[1].X-t[0].X,i=t[1].Y-t[0].Y;e={Start:new E,End:new E},this.IsHScreen?(e.Start.Y=t[1].Y,e.Start.X=t[1].X,e.End.Y=t[1].Y+i,e.End.X=t[0].X):(e.Start.Y=t[1].Y,e.Start.X=t[1].X,e.End.Y=t[0].Y,e.End.X=t[1].X+a),this.LinePoint.push(e);var r=e.End,n=new E;n.X=r.X,n.Y=r.Y,this.Point[2]=n,e={Start:new E,End:new E},this.IsHScreen?(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=r.Y+i,e.End.X=t[1].X):(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=t[1].Y,e.End.X=r.X+a),this.LinePoint.push(e);var r=e.End,n=new E;n.X=r.X,n.Y=r.Y,this.Point[3]=n,e={Start:new E,End:new E},this.IsHScreen?(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=r.Y+i,e.End.X=t[0].X):(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=t[0].Y,e.End.X=r.X+a),this.LinePoint.push(e);var r=e.End,n=new E;n.X=r.X,n.Y=r.Y,this.Point[4]=n,this.PointCount=this.Point.length}else if(5==t.length){var e={Start:new E,End:new E};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e);var e={Start:new E,End:new E};e.Start.Y=t[1].Y,e.Start.X=t[1].X,e.End.Y=t[2].Y,e.End.X=t[2].X,this.LinePoint.push(e);var e={Start:new E,End:new E};e.Start.Y=t[2].Y,e.Start.X=t[2].X,e.End.Y=t[3].Y,e.End.X=t[3].X,this.LinePoint.push(e);var e={Start:new E,End:new E};e.Start.Y=t[3].Y,e.Start.X=t[3].X,e.End.Y=t[4].Y,e.End.X=t[4].X,this.LinePoint.push(e)}}}function ma(){this.newMethod=Da,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawHeadShouldersBT",this.CalculateLines_Backup=this.CalculateLines,this.CalculateLines=function(t){if(this.Frame&&!(t.length<2)){if(2!=this.Status)return this.CalculateLines_Backup(t);var e={Start:new E,End:new E};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e);var a=t[1].X-t[0].X,i=t[1].Y-t[0].Y;e={Start:new E,End:new E},this.IsHScreen?(e.Start.Y=t[1].Y,e.Start.X=t[1].X,e.End.Y=t[1].Y+i,e.End.X=t[0].X-a):(e.Start.Y=t[1].Y,e.Start.X=t[1].X,e.End.Y=t[0].Y-i,e.End.X=t[1].X+a),this.LinePoint.push(e);var r=e.End,n=new E;n.X=r.X,n.Y=r.Y,this.Point[2]=n,e={Start:new E,End:new E},this.IsHScreen?(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=r.Y+i,e.End.X=t[1].X):(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=t[1].Y,e.End.X=r.X+a),this.LinePoint.push(e);var r=e.End,n=new E;n.X=r.X,n.Y=r.Y,this.Point[3]=n,e={Start:new E,End:new E},this.IsHScreen?(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=r.Y+i,e.End.X=t[0].X):(e.Start.Y=r.Y,e.Start.X=r.X,e.End.Y=t[0].Y,e.End.X=r.X+a),this.LinePoint.push(e);var r=e.End,n=new E;n.X=r.X,n.Y=r.Y,this.Point[4]=n,this.PointCount=this.Point.length}}}function pa(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureParallelLines",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.PointCount=3,this.LastPoint,this.CenterLine={LineDash:[2*C(),3*C()],Line:null,IsShow:!1},this.Super_SetOption=this.SetOption,this.Super_ExportStorageData=this.ExportStorageData,this.SetOption=function(t){if(this.Super_SetOption&&this.Super_SetOption(t),t&&t.CenterLine){var e=t.CenterLine;we.IsNonEmptyArray(e.LineDash)&&(this.CenterLine.LineDash=e.LineDash.slice(0)),we.IsBool(e.IsShow)&&(this.CenterLine.IsShow=e.IsShow)}},this.ExportStorageData=function(){var t;return this.Super_ExportStorageData&&(t=this.Super_ExportStorageData(),this.CenterLine&&(t.CenterLine={IsShow:this.CenterLine.IsShow,LineDash:this.CenterLine.LineDash.slice(0)})),t},this.Draw=function(){if(this.LinePoint=[],this.CenterLine.Line=null,!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!1});if(t){this.AreaColor=aa.ColorToRGBA(this.LineColor,.3);var e=t.slice(0);this.CalculateLines(e),this.ClipFrame(),this.DrawArea();for(var a in this.LinePoint){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End)}if(this.CenterLine.IsShow&&this.CenterLine.Line){var i=this.CenterLine.Line;this.Canvas.setLineDash(this.CenterLine.LineDash),this.DrawLine(i.Start,i.End),this.Canvas.setLineDash([])}this.DrawPoint(e),this.Canvas.restore()}}},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.DrawArea=function(){2==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.lineTo(this.LinePoint[0].End.X,this.LinePoint[0].End.Y),this.Canvas.lineTo(this.LinePoint[1].End.X,this.LinePoint[1].End.Y),this.Canvas.lineTo(this.LinePoint[1].Start.X,this.LinePoint[1].Start.Y),this.Canvas.closePath(),this.Canvas.fill())},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new E;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a=this.CalculateExtendLinePoint(t[0],t[1]);this.LinePoint.push(a)}else if(3==t.length){var a=this.CalculateExtendLinePoint(t[0],t[1]);this.LinePoint.push(a);var i=t[2].X-t[1].X,r=t[2].Y-t[1].Y,n=new E,o=new E;n.X=t[0].X+i,n.Y=t[0].Y+r,o.X=t[1].X+i,o.Y=t[1].Y+r,a=this.CalculateExtendLinePoint(n,o),this.LinePoint.push(a);var n=new E,o=new E;n.X=t[0].X+i/2,n.Y=t[0].Y+r/2,o.X=t[1].X+i/2,o.Y=t[1].Y+r/2,a=this.CalculateExtendLinePoint(n,o),this.CenterLine.Line=a}}}function va(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawFlatTop",this.IsPointIn=this.IsPointIn_XYValue_Line,this.PointCount=3,this.LastPoint,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.AreaColor=aa.ColorToRGBA(this.LineColor,.3);var e=t.slice(0);this.CalculateLines(e),this.ClipFrame();for(var a=0;a<this.LinePoint.length;++a){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End)}this.DrawArea(),this.DrawPoint(e),this.Canvas.restore()}}},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.DrawArea=function(){2==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.lineTo(this.LinePoint[0].End.X,this.LinePoint[0].End.Y),this.Canvas.lineTo(this.LinePoint[1].End.X,this.LinePoint[1].End.Y),this.Canvas.lineTo(this.LinePoint[1].Start.X,this.LinePoint[1].Start.Y),this.Canvas.closePath(),this.Canvas.fill())},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=t[1],a=new E;a.X=e.X,a.Y=this.LastPoint.Y,t[2]=a}if(2==t.length)this.LinePoint.push({Start:t[0],End:t[1]});else if(3==t.length){this.LinePoint.push({Start:t[0],End:t[1]});var i=t[2];i.X=t[1].X;var r={X:t[0].X,Y:i.Y},n={X:t[1].X,Y:i.Y};this.LinePoint.push({Start:r,End:n})}}}function ga(){this.newMethod=va,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawDisjontChannel",this.IsPointIn=this.IsPointIn_XYValue_Line,this.PointCount=3,this.LastPoint}function Ta(){this.newMethod=pa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawParallelRaysLines",this.DrawArea=function(){},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new E;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a=this.CalculateExtendLineEndPoint([t[0],t[1]]);this.LinePoint.push({Start:t[0],End:a})}else if(3==t.length){var a=this.CalculateExtendLineEndPoint([t[0],t[1]]);this.LinePoint.push({Start:t[0],End:a});var i=t[2].X-t[1].X,r=t[2].Y-t[1].Y,n=new E,o=new E;n.X=t[0].X+i,n.Y=t[0].Y+r,o.X=t[1].X+i,o.Y=t[1].Y+r,a=this.CalculateExtendLineEndPoint([n,o]),this.LinePoint.push({Start:t[2],End:a})}}}function Ia(){this.newMethod=pa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPicturePriceChannel",this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new E;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a=this.CalculateExtendLinePoint(t[0],t[1]);this.LinePoint.push(a)}else if(3==t.length){var a=this.CalculateExtendLinePoint(t[0],t[1]);this.LinePoint.push(a);var i=t[2].X-t[1].X,r=t[2].Y-t[1].Y,n=new E,o=new E;n.X=t[0].X+i,n.Y=t[0].Y+r,o.X=t[1].X+i,o.Y=t[1].Y+r,a=this.CalculateExtendLinePoint(n,o),this.LinePoint.push(a);var n=new E,o=new E;n.X=t[0].X-i,n.Y=t[0].Y-r,o.X=t[1].X-i,o.Y=t[1].Y-r,a=this.CalculateExtendLinePoint(n,o),this.LinePoint.push(a)}},this.DrawArea=function(){3==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[1].Start.X,this.LinePoint[1].Start.Y),this.Canvas.lineTo(this.LinePoint[1].End.X,this.LinePoint[1].End.Y),this.Canvas.lineTo(this.LinePoint[2].End.X,this.LinePoint[2].End.Y),this.Canvas.lineTo(this.LinePoint[2].Start.X,this.LinePoint[2].Start.Y),this.Canvas.closePath(),this.Canvas.fill())}}function Sa(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureParallelChannel",this.ChannelWidth=50,this.AreaColor="rgba(25,25,25,0.4)",this.LinePoint=[],this.CenterLine={LineDash:[2*C(),3*C()],Line:null,IsShow:!1},this.Super_SetOption=this.SetOption,this.ExportStorageData=function(){var t=this.ExportBaseData();t.ChannelWidth=this.ChannelWidth,t.Value=[];for(var e=0;e<this.Value.length&&e<2;++e){var a=this.Value[e];t.Value.push({XValue:a.XValue,YValue:a.YValue,DateTime:a.DateTime})}return this.CenterLine&&(t.CenterLine={IsShow:this.CenterLine.IsShow,LineDash:this.CenterLine.LineDash.slice(0)}),t},this.SetOption=function(t){if(this.Super_SetOption&&this.Super_SetOption(t),t&&(we.IsNumber(t.ChannelWidth)&&(this.ChannelWidth=t.ChannelWidth),t.CenterLine)){var e=t.CenterLine;we.IsNonEmptyArray(e.LineDash)&&(this.CenterLine.LineDash=e.LineDash.slice(0)),we.IsBool(e.IsShow)&&(this.CenterLine.IsShow=e.IsShow)}},this.CalculateDrawPoint=function(){if(this.Status<2)return null;if(!this.Point.length||!this.Frame)return null;var t=this.Frame.Data;if(!t)return null;var e=[];if(10==this.Status)for(var a=0;a<2;++a){var i=this.Value[a],r=new E;r.X=this.Frame.GetXFromIndex(i.XValue-t.DataOffset,!1),r.Y=this.Frame.GetYFromData(i.YValue,!1),e.push(r)}else for(var a=0;a<this.Point.length;++a){var i=this.Point[a],r=new E;r.X=i.X,r.Y=i.Y,e.push(r)}if(e.length>=2){var n={Start:new E,End:new E};if(n.Start.X=e[0].X,n.Start.Y=e[0].Y,n.End.X=e[1].X,n.End.Y=e[1].Y,this.LinePoint.push(n),3==e.length||10==this.Status){var o=n.End.X-n.Start.X,s=n.End.Y-n.Start.Y,l=Math.atan(Math.abs(o/s)),h=this.ChannelWidth/Math.sin(l);n={Start:new E,End:new E},n.Start.X=e[0].X,n.Start.Y=e[0].Y-h,n.End.X=e[1].X,n.End.Y=e[1].Y-h,this.LinePoint.push(n);var u=new E;u.X=n.Start.X+(n.End.X-n.Start.X)/2,u.Y=n.Start.Y+(n.End.Y-n.Start.Y)/2,e[2]=u,this.Point[2]=u;var C=parseInt(this.Frame.GetXData(u.X))+t.DataOffset,c=this.Frame.GetYData(u.Y);this.Value[2]={XValue:C,YValue:c},this.PointCount=this.Point.length,n={Start:new E,End:new E},n.Start.X=e[0].X,n.Start.Y=e[0].Y-h/2,n.End.X=e[1].X,n.End.Y=e[1].Y-h/2,this.CenterLine.Line=n}}return e},this.DrawArea=function(t,e,a,i){this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.lineTo(i.X,i.Y),this.Canvas.closePath(),this.Canvas.fill()},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint();if(t){this.AreaColor=aa.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),2==this.LinePoint.length&&this.DrawArea(this.LinePoint[0].Start,this.LinePoint[0].End,this.LinePoint[1].End,this.LinePoint[1].Start);for(var e=0;e<this.LinePoint.length;++e){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}if(this.CenterLine.IsShow&&this.CenterLine.Line){var a=this.CenterLine.Line;this.Canvas.setLineDash(this.CenterLine.LineDash),this.DrawLine(a.Start,a.End),this.Canvas.setLineDash([])}this.Canvas.restore(),this.DrawPoint(t)}}},this.Move=function(t,e){if(20!=this.Status)return!1;if(!this.Frame)return!1;if(!this.Frame.Data)return!1;if(100==this.MovePointIndex)for(var a=0;a<this.Point.length;++a)this.Point[a].X+=t,this.Point[a].Y+=e;else if(0==this.MovePointIndex||1==this.MovePointIndex)this.MovePointIndex<this.Point.length&&(this.Point[this.MovePointIndex].X+=t,this.Point[this.MovePointIndex].Y+=e);else if(2==this.MovePointIndex){this.Point[this.MovePointIndex].X+=t,this.Point[this.MovePointIndex].Y+=e;var i=this.Point[1].X-this.Point[0].X,r=this.Point[1].Y-this.Point[0].Y,n=Math.atan(Math.abs(i/r)),o=this.ChannelWidth/Math.sin(n)-e;this.ChannelWidth=Math.sin(n)*o}},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;var a=this.Frame.Data;if(!a)return-1;for(var i=0;i<this.Value.length;++i){var r=this.Value[i],n=new E;if(i<2)n.X=this.Frame.GetXFromIndex(r.XValue-a.DataOffset),n.Y=this.Frame.GetYFromData(r.YValue);else{if(i>=this.Point.length)continue;n.X=this.Point[i].X,n.Y=this.Point[i].Y}if(this.Canvas.beginPath(),this.Canvas.arc(n.X,n.Y,5,0,360),this.Canvas.isPointInPath(t,e))return i}for(var i in this.LinePoint){var r=this.LinePoint[i],o=r.Start,s=r.End;if(this.Canvas.beginPath(),this.Canvas.moveTo(o.X,o.Y+5),this.Canvas.lineTo(o.X,o.Y-5),this.Canvas.lineTo(s.X,s.Y-5),this.Canvas.lineTo(s.X,s.Y+5),this.Canvas.closePath(),this.Canvas.isPointInPath(t,e))return 100}return-1}}function xa(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureText",this.Text="ææ¬",this.PointCount=1,this.FontOption={Family:"å¾®è½¯éé»",Size:20,Weight:null,Style:null},this.TextRect=null,this.IsInitialized=!1,this.SettingMenu,this.HQChart,this.SetOption=function(t){t&&(t.LineColor&&(this.LineColor=t.LineColor),t.Text&&(this.Text=t.Text),t.FontOption&&(this.FontOption=t.FontOption))},this.Draw=function(t){if(this.TextRect=null,!this.IsFrameMinSize()&&this.IsShow){var e=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(e&&1==e.length){this.ClipFrame(),this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.Canvas.font=this.GetTextFont(),this.Canvas.fillText(this.Text,e[0].X,e[0].Y);var a=this.Canvas.measureText(this.Text).width,i=this.FontOption.Size*C();this.TextRect={},this.TextRect.Left=e[0].X-a/2,this.TextRect.Top=e[0].Y-i,this.TextRect.Width=a,this.TextRect.Height=i,this.Canvas.restore(),!1===this.IsInitialized&&(this.SetTextOption(),this.IsInitialized=!0)}}},this.GetTextFont=function(){var t=16*C()+"px å¾®è½¯éé»";if(!this.FontOption||!this.FontOption.Family||this.FontOption.Size<=0)return t;var e="";return this.FontOption.Color&&(e+=this.FontOption.Color+" "),this.FontOption.Style&&(e+=this.FontOption.Style+" "),this.FontOption.Weight&&(e+=this.FontOption.Weight+" "),this.FontOption.Size>=0&&(e+=this.FontOption.Size*C()+"px "),e+=this.FontOption.Family},this.SetTextOption=function(){Xn.Chart.Log("[ChartDrawPictureText::SetTextOption]"),this.SettingMenu||(this.SettingMenu=new qi(this.Frame.ChartBorder.UIElement.parentNode)),this.SettingMenu.ChartPicture=this,this.SettingMenu.HQChart=this.HQChart,this.SettingMenu.Position={Left:this.TextRect.Left+this.TextRect.Width,Top:this.TextRect.Top},this.SettingMenu.DoModal()},this.IsPointIn=function(t,e){return this.Frame&&10==this.Status&&this.Frame.Data&&this.TextRect?(this.Canvas.beginPath(),this.Canvas.rect(this.TextRect.Left,this.TextRect.Top,this.TextRect.Width,this.TextRect.Height),this.Canvas.isPointInPath(t,e)?100:-1):-1}}function ba(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureIconFont",this.PointCount=1,this.Text="î",this.FontOption={Family:"iconfont",Size:24},this.TextRect=null,this.SettingMenu,this.Angle=0,this.SetOption=function(t){t&&(t.LineColor&&(this.LineColor=t.LineColor),t.FontOption&&t.FontOption.Size>0&&(this.FontOption.Size=t.FontOption.Size),we.IsNumber(t.Angle)&&(this.Angle=t.Angle))},this.Draw=function(){if(this.TextRect=null,!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&1==t.length){var e=this.GetTextFont();if(e){this.ClipFrame();var a=this.Frame.IsHScreen,i=C();this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.font=e,a?(this.Canvas.translate(t[0].X,t[0].Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.Text,0,0)):0!=this.Angle?(this.Canvas.translate(t[0].X,t[0].Y),this.Canvas.rotate(this.Angle*(Math.PI/180)),this.Canvas.fillText(this.Text,0,0)):this.Canvas.fillText(this.Text,t[0].X,t[0].Y);var r=this.Canvas.measureText(this.Text).width;this.TextRect={},this.TextRect.Left=t[0].X-r/2,this.TextRect.Top=t[0].Y-this.FontOption.Size*i,this.TextRect.Width=r,this.TextRect.Height=this.FontOption.Size*i,this.Canvas.restore()}}}},this.GetTextFont=function(){if(!this.FontOption||!this.FontOption.Family||this.FontOption.Size<=0)return null;var t="";return this.FontOption.Size>=0&&(t+=this.FontOption.Size*C()+"px "),t+=this.FontOption.Family},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;if(!this.Frame.Data)return-1;if(!this.TextRect)return-1;var a=0;return this.Option&&this.Option.Zoom>=1&&(a=this.Option.Zoom*C()),this.Canvas.beginPath(),this.Canvas.rect(this.TextRect.Left-a,this.TextRect.Top-a,this.TextRect.Width+2*a,this.TextRect.Height+2*a),this.Canvas.isPointInPath(t,e)?100:-1}}function ya(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureGannFan",this.IsPointIn=this.IsPointIn_XYValue_Line,this.LinePoint=[],this.Font=16*C()+"px å¾®è½¯éé»",this.LineDash=[5,10],this.EnableDottedLine=!1,this.EnableArea=!0,this.IsShowTitle=!0,this.Super_SetOption=this.SetOption,this.SetOption=function(t){this.Super_SetOption&&this.Super_SetOption(t),t&&(t.Font&&(this.Font=t.Font),Array.isArray(t.LineDash)&&(this.LineDash=t.LineDash),we.IsBool(t.EnableDottedLine)&&(this.EnableDottedLine=t.EnableDottedLine),we.IsBool(t.EnableArea)&&(this.EnableArea=t.EnableArea),we.IsBool(t.IsShowTitle)&&(this.IsShowTitle=t.IsShowTitle))},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.AreaColor=aa.ColorToRGBA(this.LineColor,.3),this.ClipFrame();var e=this.GetQuadrant(t[0],t[1]);if(this.SetLineWidth(),1===e||2===e||3===e||4===e){this.CalculateLines(t[0],t[1],e),this.EnableArea&&this.DrawArea();for(var a=0;a<this.LinePoint.length;++a){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End,i.IsDottedLine)}if(this.IsShowTitle)for(var a=0;a<this.LinePoint.length;++a){var i=this.LinePoint[a];i.Text&&i.PtEnd&&this.DrawTitle(i.PtEnd,i.Text)}}else this.DrawLine(t[0],t[1],!1);this.RestoreLineWidth(),this.Canvas.restore(),this.DrawPoint(t)}}},this.GetQuadrant=function(t,e){return t.X<e.X&&t.Y>e.Y?1:t.X>e.X&&t.Y>e.Y?2:t.X<e.X&&t.Y<e.Y?4:3},this.DrawLine=function(t,e,a){a&&this.Canvas.setLineDash(this.LineDash),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.stroke(),a&&this.Canvas.setLineDash([])},this.DrawTitle=function(t,e){this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",this.Canvas.font=this.Font,this.Canvas.fillText(e,t.X,t.Y)},this.DrawArea=function(){var t=null,e=null;for(var a in this.LinePoint){var i=this.LinePoint[a];"1:8"==i.Text?t=this.LinePoint[a]:"8:1"==i.Text&&(e=this.LinePoint[a])}t&&e&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.End.X,t.End.Y),this.Canvas.lineTo(t.Start.X,t.Start.Y),this.Canvas.lineTo(e.End.X,e.End.Y),this.Canvas.closePath(),this.Canvas.fill())},this.CalculateLines=function(t,e,a){if(!this.Frame)return!1;var i=(this.Frame.ChartBorder.GetTopEx(),this.Frame.ChartBorder.GetRight(),this.Frame.ChartBorder.GetBottom(),[.5,1/3,.25,.125,2/3]),r=["1:2","1:3","1:4","1:8","2:3"],n=["2:1","3:1","4:1","8:1","3:2"],o=new E,s=new E;o.X=t.X,o.Y=t.Y,s.X=e.X,s.Y=e.Y;var l=Math.abs(t.X-e.X),h=Math.abs(t.Y-e.Y);if(1===a){var u=this.CalculateExtendLinePoint(t,e),C={Start:o,End:u.Start,IsDottedLine:!1,PtEnd:s,Text:"1:1"};this.LinePoint.push(C);for(var c=0;c<i.length;++c){if(l>5){C={Start:o,End:null,IsDottedLine:this.EnableDottedLine,PtEnd:new E,Text:r[c]},C.PtEnd.Y=e.Y,C.PtEnd.X=t.X+l*i[c];var u=this.CalculateExtendLinePoint(C.Start,C.PtEnd);C.End=u.Start,this.LinePoint.push(C)}if(h>5){C={Start:o,End:null,IsDottedLine:this.EnableDottedLine,PtEnd:new E,Text:n[c]},C.PtEnd.Y=t.Y-h*i[c],C.PtEnd.X=e.X;var u=this.CalculateExtendLinePoint(C.Start,C.PtEnd);C.End=u.Start,this.LinePoint.push(C)}}}else if(2==a){var u=this.CalculateExtendLinePoint(t,e),C={Start:o,End:u.Start,IsDottedLine:!1,PtEnd:s,Text:"1:1"};this.LinePoint.push(C);for(var c=0;c<i.length;++c){if(l>5){C={Start:o,End:null,IsDottedLine:this.EnableDottedLine,PtEnd:new E,Text:r[c]},C.PtEnd.Y=e.Y,C.PtEnd.X=t.X-l*i[c];var u=this.CalculateExtendLinePoint(C.Start,C.PtEnd);C.End=u.Start,this.LinePoint.push(C)}if(h>5){C={Start:o,End:null,IsDottedLine:this.EnableDottedLine,PtEnd:new E,Text:n[c]},C.PtEnd.Y=t.Y-h*i[c],C.PtEnd.X=e.X;var u=this.CalculateExtendLinePoint(C.Start,C.PtEnd);C.End=u.Start,this.LinePoint.push(C)}}}else if(3==a){var u=this.CalculateExtendLinePoint(t,e),C={Start:o,End:u.End,IsDottedLine:!1,PtEnd:s,Text:"1:1"};this.LinePoint.push(C);for(var c=0;c<i.length;++c){if(l>5){C={Start:o,End:null,IsDottedLine:this.EnableDottedLine,PtEnd:new E,Text:r[c]},C.PtEnd.Y=e.Y,C.PtEnd.X=t.X-l*i[c];var u=this.CalculateExtendLinePoint(C.Start,C.PtEnd);C.End=u.End,this.LinePoint.push(C)}if(h>5){C={Start:o,End:null,IsDottedLine:this.EnableDottedLine,PtEnd:new E,Text:n[c]},C.PtEnd.Y=t.Y+h*i[c],C.PtEnd.X=e.X;var u=this.CalculateExtendLinePoint(C.Start,C.PtEnd);C.End=u.End,this.LinePoint.push(C)}}}else{if(4!=a)return!1;var u=this.CalculateExtendLinePoint(t,e),C={Start:o,End:u.End,IsDottedLine:!1,PtEnd:s,Text:"1:1"};this.LinePoint.push(C);for(var c=0;c<i.length;++c){if(l>5){C={Start:o,End:null,IsDottedLine:this.EnableDottedLine,PtEnd:new E,Text:r[c]},C.PtEnd.Y=e.Y,C.PtEnd.X=t.X+l*i[c];var u=this.CalculateExtendLinePoint(C.Start,C.PtEnd);C.End=u.End,this.LinePoint.push(C)}if(h>5){C={Start:o,End:null,IsDottedLine:this.EnableDottedLine,PtEnd:new E,Text:n[c]},C.PtEnd.Y=t.Y+h*i[c],C.PtEnd.X=e.X;var u=this.CalculateExtendLinePoint(C.Start,C.PtEnd);C.End=u.End,this.LinePoint.push(C)}}}return!0}}function Ea(){this.newMethod=ya,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureGannFanV2",this.EnableDottedLine=!0,this.LineDash=[4,8],this.EnableArea=!1,this.Super_CalculateLines=this.CalculateLines,this.CalculateLines=function(t,e,a){if(!this.Super_CalculateLines(t,e,a))return!1;var i=this.Frame.ChartBorder.GetBorder();if(1==a){var r={Start:t,End:{X:i.Right,Y:t.Y},IsDottedLine:!1,PtEnd:null,Text:null};this.LinePoint.push(r);var r={Start:t,End:{X:t.X,Y:i.TopEx},IsDottedLine:!1,PtEnd:null,Text:null};this.LinePoint.push(r)}else if(2==a){var r={Start:t,End:{X:t.X,Y:i.TopEx},IsDottedLine:!1,PtEnd:null,Text:null};this.LinePoint.push(r);var r={Start:t,End:{X:i.Left,Y:t.Y},IsDottedLine:!1,PtEnd:null,Text:null};this.LinePoint.push(r)}else if(3==a){var r={Start:t,End:{X:i.Left,Y:t.Y},IsDottedLine:!1,PtEnd:null,Text:null};this.LinePoint.push(r);var r={Start:t,End:{X:t.X,Y:i.BottomEx},IsDottedLine:!1,PtEnd:null,Text:null};this.LinePoint.push(r)}else if(4==a){var r={Start:t,End:{X:t.X,Y:i.BottomEx},IsDottedLine:!1,PtEnd:null,Text:null};this.LinePoint.push(r);var r={Start:t,End:{X:i.Right,Y:t.Y},IsDottedLine:!1,PtEnd:null,Text:null};this.LinePoint.push(r)}}}function wa(){this.newMethod=ya,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureResistanceLine",this.CalculateLines=function(t,e,a){if(!this.Frame)return!1;var i=(this.Frame.ChartBorder.GetTopEx(),this.Frame.ChartBorder.GetRight(),this.Frame.ChartBorder.GetBottom(),[1/3,2/3]),r=["3:1","3:2"],n=new E,o=new E;n.X=t.X,n.Y=t.Y,o.X=e.X,o.Y=e.Y;var s=(Math.abs(t.X-e.X),Math.abs(t.Y-e.Y));if(1===a){var l=this.CalculateExtendLinePoint(t,e),h={Start:n,End:l.Start,IsDottedLine:!1,PtEnd:o,Text:"1:1"};this.LinePoint.push(h);for(var u=0;u<i.length;++u)if(s>5){h={Start:n,End:null,IsDottedLine:this.EnableDottedLine,PtEnd:new E,Text:r[u]},h.PtEnd.Y=t.Y-s*i[u],h.PtEnd.X=e.X;var l=this.CalculateExtendLinePoint(h.Start,h.PtEnd);h.End=l.Start,this.LinePoint.push(h)}}else if(2==a){var l=this.CalculateExtendLinePoint(t,e),h={Start:n,End:l.Start,IsDottedLine:!1,PtEnd:o,Text:"1:1"};this.LinePoint.push(h);for(var u=0;u<i.length;++u)if(s>5){h={Start:n,End:null,IsDottedLine:this.EnableDottedLine,PtEnd:new E,Text:r[u]},h.PtEnd.Y=t.Y-s*i[u],h.PtEnd.X=e.X;var l=this.CalculateExtendLinePoint(h.Start,h.PtEnd);h.End=l.Start,this.LinePoint.push(h)}}else if(3==a){var l=this.CalculateExtendLinePoint(t,e),h={Start:n,End:l.End,IsDottedLine:!1,PtEnd:o,Text:"1:1"};this.LinePoint.push(h);for(var u=0;u<i.length;++u)if(s>5){h={Start:n,End:null,IsDottedLine:this.EnableDottedLine,PtEnd:new E,Text:r[u]},h.PtEnd.Y=t.Y+s*i[u],h.PtEnd.X=e.X;var l=this.CalculateExtendLinePoint(h.Start,h.PtEnd);h.End=l.End,this.LinePoint.push(h)}}else{if(4!=a)return!1;var l=this.CalculateExtendLinePoint(t,e),h={Start:n,End:l.End,IsDottedLine:!1,PtEnd:o,Text:"1:1"};this.LinePoint.push(h);for(var u=0;u<i.length;++u)if(s>5){h={Start:n,End:null,IsDottedLine:this.EnableDottedLine,PtEnd:new E,Text:r[u]},h.PtEnd.Y=t.Y+s*i[u],h.PtEnd.X=e.X;var l=this.CalculateExtendLinePoint(h.Start,h.PtEnd);h.End=l.End,this.LinePoint.push(h)}}return!0},this.DrawArea=function(){var t=null,e=null;for(var a in this.LinePoint){var i=this.LinePoint[a];"1:1"==i.Text?t=this.LinePoint[a]:"3:1"==i.Text&&(e=this.LinePoint[a])}t&&e&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.End.X,t.End.Y),this.Canvas.lineTo(t.Start.X,t.Start.Y),this.Canvas.lineTo(e.End.X,e.End.Y),this.Canvas.closePath(),this.Canvas.fill())}}function Fa(){this.newMethod=wa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureResistanceLineV2",this.EnableDottedLine=!0,this.LineDash=[4,8],this.EnableArea=!1,this.IsShowTitle=!1}function Ma(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureGoldenSection",this.IsPointIn=this.IsPointIn_XYValue_Line,this.Font=14*C()+"px å¾®è½¯éé»",this.GetSectionData=function(){return[0,.236,.382,.5,.618,.8,1,1.236,1.382,1.5,1.618,1.8,2]},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint();if(t&&2==t.length){this.AreaColor=aa.ColorToRGBA(this.LineColor,.3),this.CalculateLines(t[0],t[1]),this.ClipFrame(),this.SetLineWidth();for(var e in this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End,a.IsDottedLine)}this.RestoreLineWidth();for(var e in this.LinePoint){var a=this.LinePoint[e];a.Text&&this.DrawTitle(a.Start,a.Text)}this.DrawPoint(t),this.Canvas.restore()}}},this.CalculateHSCreenLines=function(t,e){for(var a=this.GetSectionData(),i=this.Frame.ChartBorder.GetTop(),r=this.Frame.ChartBorder.GetBottom(),n=t.X-e.X,o=0;o<a.length;++o){var s=n*a[o],l={Start:new E,End:new E};l.Start.X=t.X-s,l.Start.Y=i,l.End.X=t.X-s,l.End.Y=r;var h="";h=0==o?"Base ":(100*a[o]).toFixed(2)+"% ";h+=this.Frame.GetYData(l.Start.X).toFixed(2),l.Text=h,this.LinePoint.push(l)}},this.CalculateLines=function(t,e){if(this.Frame.IsHScreen)return void this.CalculateHSCreenLines(t,e);for(var a=this.GetSectionData(),i=this.Frame.ChartBorder.GetLeft(),r=this.Frame.ChartBorder.GetRight(),n=t.Y-e.Y,o=0;o<a.length;++o){var s=n*a[o],l={Start:new E,End:new E};l.Start.Y=t.Y-s,l.Start.X=i,l.End.Y=t.Y-s,l.End.X=r;var h="";h=0==o?"Base ":(100*a[o]).toFixed(2)+"% ";h+=this.Frame.GetYData(l.Start.Y).toFixed(2),l.Text=h,this.LinePoint.push(l)}},this.DrawLine=function(t,e){this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.stroke()},this.DrawTitle=function(t,e){this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",this.Canvas.font=this.Font,this.Frame.IsHScreen?(this.Canvas.save(),this.Canvas.translate(t.X,t.Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(e,0,0),this.Canvas.restore()):this.Canvas.fillText(e,t.X,t.Y)}}function La(){this.newMethod=Ma,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPicturePercentage",this.GetSectionData=function(){return[0,.25,.333,.5,1]}}function Na(){this.newMethod=Ma,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureWaveBand",this.GetSectionData=function(){return[0,.125,.25,.375,.5,.625,.75,.875,1]}}function Ra(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureTriangle",this.PointCount=3,this.Font=16*C()+"px å¾®è½¯éé»",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.LastPoint,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){var e=t.slice(0);this.AreaColor=aa.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.CalculateLines(e);for(var a in this.LinePoint){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End)}this.DrawArea(e),this.DrawPoint(e),this.DrawTitle(e),this.Canvas.restore()}}},this.DrawArea=function(t){3==t.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(t[0].X,t[0].Y),this.Canvas.lineTo(t[1].X,t[1].Y),this.Canvas.lineTo(t[2].X,t[2].Y),this.Canvas.lineTo(t[0].X,t[0].Y),this.Canvas.closePath(),this.Canvas.fill())},this.DrawTitle=function(t){this.Status},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new E;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2===t.length){var a={Start:new E,End:new E};a.Start.Y=t[0].Y,a.Start.X=t[0].X,a.End.Y=t[1].Y,a.End.X=t[1].X,this.LinePoint.push(a)}else if(3===t.length){var a={Start:new E,End:new E};a.Start.Y=t[0].Y,a.Start.X=t[0].X,a.End.Y=t[1].Y,a.End.X=t[1].X,this.LinePoint.push(a),a={Start:new E,End:new E},a.Start.Y=t[1].Y,a.Start.X=t[1].X,a.End.Y=t[2].Y,a.End.X=t[2].X,this.LinePoint.push(a),a={Start:new E,End:new E},a.Start.Y=t[2].Y,a.Start.X=t[2].X,a.End.Y=t[0].Y,a.End.X=t[0].X,this.LinePoint.push(a)}}}function Aa(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureSymmetryAngle",this.PointCount=2,this.Font=16*C()+"px å¾®è½¯éé»",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.AreaColor=aa.ColorToRGBA(this.LineColor,.3),this.ClipFrame(),this.CalculateLines(t);for(var e in this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}this.DrawArea(),this.DrawPoint(t),this.DrawTitle(t),this.Canvas.restore()}}},this.CalculateLines=function(t){if(2==t.length&&this.Frame){var e={Start:new E,End:new E};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e),e={Start:new E,End:new E},e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[0].X,this.LinePoint.push(e);var a=t[0].X-t[1].X;e={Start:new E,End:new E},e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[0].X+a,this.LinePoint.push(e)}},this.DrawArea=function(){3==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.lineTo(this.LinePoint[0].End.X,this.LinePoint[0].End.Y),this.Canvas.lineTo(this.LinePoint[2].End.X,this.LinePoint[2].End.Y),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.closePath(),this.Canvas.fill())},this.DrawTitle=function(t){this.Status}}function Oa(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureCircle",this.PointCount=2,this.CircleData,this.GetXYCoordinate=this.GetXYCoordinate_default,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.AreaColor=aa.ColorToRGBA(this.LineColor,.3),this.ClipFrame();var e=t[0].X-t[1].X,a=t[0].Y-t[1].Y,i=Math.sqrt(e*e+a*a);this.Canvas.fillStyle=this.AreaColor,this.Canvas.strokeStyle=this.LineColor,this.DrawLine(t[0],t[1]),this.Canvas.beginPath(),this.Canvas.arc(t[0].X,t[0].Y,i,0,2*Math.PI),this.Canvas.stroke(),this.Canvas.fill(),this.CircleData={X:t[0].X,Y:t[0].Y,R:i},this.DrawPoint(t),this.Canvas.restore()}}},this.IsPointIn=function(t,e,a){if(this.IsFrameMinSize())return-1;if(10!=this.Status)return-1;var i=this.IsPointInXYValue(t,e,a);if(i>=0)return i;if(this.CircleData&&this.CircleData.R>8){var r=this.CircleData.X-t,n=this.CircleData.Y-e,o=Math.sqrt(r*r+n*n);if(o<this.CircleData.R&&o>this.CircleData.R-8)return 100}return-1}}function Pa(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureQuadrangle",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.PointCount=3,this.LastPoint,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.AreaColor=aa.ColorToRGBA(this.LineColor,.3);var e=t.slice(0);this.CalculateLines(e),this.ClipFrame();for(var a in this.LinePoint){var i=this.LinePoint[a];this.DrawLine(i.Start,i.End)}this.DrawArea(),this.DrawPoint(e),this.Canvas.restore()}}},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.DrawArea=function(){4==this.LinePoint.length&&(this.Canvas.fillStyle=this.AreaColor,this.Canvas.beginPath(),this.Canvas.moveTo(this.LinePoint[0].Start.X,this.LinePoint[0].Start.Y),this.Canvas.lineTo(this.LinePoint[0].End.X,this.LinePoint[0].End.Y),this.Canvas.lineTo(this.LinePoint[1].End.X,this.LinePoint[1].End.Y),this.Canvas.lineTo(this.LinePoint[2].End.X,this.LinePoint[2].End.Y),this.Canvas.closePath(),this.Canvas.fill())},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new E;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a=this.CreateLineData(t[0],t[1]);this.LinePoint.push(a)}else if(3==t.length){var a=this.CreateLineData(t[0],t[1]);this.LinePoint.push(a);var a=this.CreateLineData(t[1],t[2]);this.LinePoint.push(a);var i=t[2].X-t[1].X,r=t[2].Y-t[1].Y,n=new E;n.X=t[0].X+i,n.Y=t[0].Y+r;var a=this.CreateLineData(t[2],n);this.LinePoint.push(a);var a=this.CreateLineData(n,t[0]);this.LinePoint.push(a)}}}function Ba(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPictureFibonacci",this.PointCount=1,this.Font=14*C()+"px å¾®è½¯éé»",this.IsPointIn=this.IsPointIn_XYValue_Line,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint();if(t&&(this.CalculateLines(),!(this.LinePoint.length<=0))){this.ClipFrame(),this.SetLineWidth();for(var e in this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End),this.DrawTitle(a.Start,a.Title)}this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.DrawTitle=function(t,e){this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.font=this.Font,this.Frame.IsHScreen?(this.Canvas.save(),this.Canvas.translate(t.X,t.Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(e,2,10),this.Canvas.restore()):this.Canvas.fillText(e,t.X+2,t.Y+10)},this.CalculateHSCreenLines=function(){var t=this.Frame.Data;if(t){var e=null;if(10==this.Status){if(1!=this.Value.length)return;e=this.Value[0].XValue}else{if(1!=this.Point.length)return;e=parseInt(this.Frame.GetXData(this.Point[0].Y))+t.DataOffset}for(var a=this.Frame.ChartBorder.GetRightEx(),i=this.Frame.ChartBorder.GetLeftEx(),r=this.Frame.XPointCount,n=[1,2,3,5,8,13,21,34,55,89,144,233],o=0;o<n.length;++o){var s=e+n[o],l=s-t.DataOffset;if(!(l<0||l>=r)){var h=this.Frame.GetXFromIndex(s-t.DataOffset,!1),u={Start:new E,End:new E,Title:n[o]};u.Start.X=a,u.Start.Y=h,u.End.X=i,u.End.Y=h,this.LinePoint.push(u)}}}},this.CalculateLines=function(){if(!(this.Status<2)&&this.Frame){var t=this.Frame.Data;if(t){if(this.Frame.IsHScreen)return void this.CalculateHSCreenLines();var e=null;if(10==this.Status){if(1!=this.Value.length)return;e=this.Value[0].XValue}else{if(1!=this.Point.length)return;e=parseInt(this.Frame.GetXData(this.Point[0].X))+t.DataOffset}for(var a=this.Frame.ChartBorder.GetTopEx(),i=this.Frame.ChartBorder.GetBottom(),r=this.Frame.XPointCount,n=[1,2,3,5,8,13,21,34,55,89,144,233],o=0;o<n.length;++o){var s=e+n[o],l=s-t.DataOffset;if(!(l<0||l>=r)){var h=this.Frame.GetXFromIndex(s-t.DataOffset,!1),u={Start:new E,End:new E,Title:n[o]};u.Start.Y=a,u.Start.X=h,u.End.Y=i,u.End.X=h,this.LinePoint.push(u)}}}}}}function _a(t){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawLinearRegression",this.PointCount=2,this.IsPointIn=this.IsPointIn_XYValue_Line,this.ChartBorder,this.Lines=[],this.IsShowMaxMinLine=!1,this.IsShowExtendLine=!1,this.ExtendLineDash=[5,5],this.MaxPoint,this.MinPoint,t&&(1==t.IsShowMaxMinLine&&(this.IsShowMaxMinLine=!0),1==t.IsShowExtendLine&&(this.IsShowExtendLine=!0)),this.ImportStorageData=function(t){1==t.IsShowMaxMinLine&&(this.IsShowMaxMinLine=!0),1==t.IsShowExtendLine&&(this.IsShowExtendLine=!0),t.Lines&&(this.Lines=t.Lines),t.MaxPoint&&t.MinPoint&&(this.MaxPoint=t.MaxPoint,this.MinPoint=t.MinPoint)},this.Super_ExportStorageData=this.ExportStorageData,this.ExportStorageData=function(){var t;return this.Super_ExportStorageData&&(t=this.Super_ExportStorageData(),t.IsShowMaxMinLine=this.IsShowMaxMinLine,t.IsShowExtendLine=this.IsShowExtendLine,t.Lines=this.Lines,this.IsShowMaxMinLine&&(t.MaxPoint=this.MaxPoint,t.MinPoint=this.MinPoint)),t},this.PointToValue_Backup=this.PointToValue,this.PointToValue=function(){this.Point[0]={X:this.Lines[0].X,Y:this.Lines[0].Y},this.Point[1]={X:this.Lines[this.Lines.length-1].X,Y:this.Lines[this.Lines.length-1].Y},this.PointToValue_Backup()},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(!t||2!=t.length)return void(10==this.Status&&(this.ClipFrame(),this.ChartBorder=this.Frame.ChartBorder,this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.DrawLinearLines(),this.RestoreLineWidth(),this.Canvas.restore()));this.ClipFrame(),this.ChartBorder=this.Frame.ChartBorder,this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor;var e=t[0],a=t[1];if(10==this.Status)this.DrawLinearLines();else{var i=this.ChartBorder.GetTopEx(),r=this.ChartBorder.GetBottomEx(),n=this.PointToKLine([e,a]),o=this.Calculate(n);this.Lines=o.Points,this.MaxPoint=o.Max,this.MinPoint=o.Min,this.DrawLinearLines(),this.Canvas.beginPath(),this.Canvas.moveTo(e.X,i),this.Canvas.lineTo(e.X,r),this.Canvas.moveTo(a.X,i),this.Canvas.lineTo(a.X,r),this.Canvas.stroke()}this.RestoreLineWidth();var s={Start:e,End:a};this.LinePoint.push(s),this.DrawPoint(t),this.Canvas.restore()}},this.Calculate=function(t){var e=t[0],a=t[1];e.XValue>a.XValue&&(e=t[1],a=t[0]);var i,r,n,o,s,l,h=a.XValue-e.XValue+1,u=this.Frame.Data.Data,n=a.XValue,C=0,c=0,f=0,d=0;for(o=0,s=h;o<h&&o<=n;++o,--s)C+=s,c+=u[n-o].Close;for(C/=h,c/=h,o=0,s=h;o<h&&o<=n;++o,--s)f+=(s-C)*(u[n-o].Close-c),d+=(s-C)*(s-C);r=f/d,i=c-C*r;var D=[],m=null,p=null;for(o=0,l=h;o<h&&o<=n;++o,--l){var v=a.XIndex-o,g=a.XValue-o,s=this.Frame.GetXFromIndex(v),T=r*l+i,I=this.Frame.GetYFromData(T,!1),S={X:s,Y:I,XValue:g,YValue:T};D.push(S),(null==m||m.High<u[g].High)&&(m={X:s,Y:I,XValue:g,YValue:T,High:u[g].High}),(null==p||p.Low>u[g].Low)&&(p={X:s,Y:I,XValue:g,YValue:T,Low:u[g].Low})}return{Points:D,Slope:r,Const:i,Max:m,Min:p}},this.DrawLinearLines=function(){if(!this.Frame)return null;var t=this.Frame.Data;if(!t)return null;var e=this.Frame.XPointCount,a=t.DataOffset,i=this.Frame.IsHScreen,r=[];for(var n in this.Lines){var o=this.Lines[n],s=o.XValue-a;if(!(s<0||s>=e)){var l={};i||(l.X=this.Frame.GetXFromIndex(s,!1),l.Y=this.Frame.GetYFromData(o.YValue,!1),l.YValue=o.YValue),r.push(l)}}if(r.length>1){for(var n in r){var o=r[n];0==n?(this.Canvas.beginPath(),this.Canvas.moveTo(o.X,o.Y)):(this.Canvas.lineTo(o.X,o.Y),n==r.length-1&&this.Canvas.stroke())}this.DrawExtendLine(r)}if(this.IsShowMaxMinLine&&r.length>1&&this.MaxPoint&&this.MinPoint){var h=this.MaxPoint.High-this.MaxPoint.YValue;for(var n in r){var o=r[n];o.Y=this.Frame.GetYFromData(o.YValue+h,!1),0==n?(this.Canvas.beginPath(),this.Canvas.moveTo(o.X,o.Y)):(this.Canvas.lineTo(o.X,o.Y),n==r.length-1&&this.Canvas.stroke())}this.DrawExtendLine(r);var u=this.MinPoint.Low-this.MinPoint.YValue;for(var n in r){var o=r[n];o.Y=this.Frame.GetYFromData(o.YValue+u,!1),0==n?(this.Canvas.beginPath(),this.Canvas.moveTo(o.X,o.Y)):(this.Canvas.lineTo(o.X,o.Y),n==r.length-1&&this.Canvas.stroke())}this.DrawExtendLine(r)}},this.DrawExtendLine=function(t){if(this.IsShowExtendLine){var e,a=t[0],i=t[t.length-1];e=i.X>a.X?[a,i]:[i,a];var r=this.CalculateExtendLineEndPoint(e);this.Canvas.beginPath(),this.Canvas.moveTo(i.X,i.Y),this.Canvas.lineTo(r.X,r.Y),this.Canvas.setLineDash(this.ExtendLineDash),this.Canvas.stroke(),this.Canvas.setLineDash([])}}}function Ga(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawRuler",this.PointCount=2,this.Font=16*C()+"px å¾®è½¯éé»",this.IsPointIn=this.IsPointIn_XYValue_Line,this.TitleColor=So.ChartDrawRuler.TitleColor,this.IsHScreen=!1,this.Draw=function(){this.LinePoint=[];var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.IsHScreen=this.Frame.IsHScreen,this.ClipFrame();var e=t[0],a=t[1],i=this.PointToKLine([e,a]),r=this.Calculate(i),n=we.IsNumber(r.Increase)?r.Increase.toFixed(2)+"%":"--",o=we.IsNumber(r.Risefall)?r.Risefall.toFixed(2):"--",s="é´è·:"+r.Count+" æ¶¨è·:"+o+" æ¶¨å¹:"+n;this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.RestoreLineWidth();var l={Start:e,End:a};this.LinePoint.push(l),this.DrawPoint(t),this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.font=this.Font,this.TitleColor?this.Canvas.fillStyle=this.TitleColor:we.IsNumber(r.Increase)?r.Increase>0?this.Canvas.fillStyle=So.UpTextColor:r.Increase<0?this.Canvas.fillStyle=So.DownTextColor:this.Canvas.fillStyle=So.UnchagneTextColor:this.Canvas.fillStyle=So.UnchagneTextColor;var h=3*C(),u=e.X,c=e.Y;this.IsHScreen?(this.Canvas.translate(u+h,c+h),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(s,0,0)):this.Canvas.fillText(s,u+h,c-h),this.Canvas.restore()}},this.Calculate=function(t){var e=t[0],a=t[1];e.XValue>a.XValue&&(e=t[1],a=t[0]);for(var i,r,n,o,s,l=this.Frame.Data.Data,h=0,u=e.XValue;u<=a.XValue;++u,++h){var C=l[u];0==h?(o=C.YClose,i=C.Open,s=C.Close,n=C.Low,r=C.High):(s=C.Close,n>C.Low&&(n=C.Low),r<C.High&&(r=C.High))}if(!we.IsPlusNumber(o)){var c=e.XValue-1;c>=0&&c<l.length&&(o=l[c].Close)}var f={YClose:o,Open:i,High:r,Low:n,Close:s,Count:h};return we.IsPlusNumber(o)&&(f.Increase=(s-o)/o*100,f.Risefall=s-o),f}}function ka(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPriceLine",this.Font=16*C()+"px å¾®è½¯éé»",this.PointCount=1,this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!0});if(t&&1==t.length){this.IsHScreen=this.Frame.IsHScreen;var e=t[0],a=this.Frame.ChartBorder;if(this.IsHScreen){var i=a.GetLeftEx(),r=a.GetRightEx();if(e.X<i||e.X>r)return;var n=a.GetBottom(),o={X:e.X,Y:n},s=this.Frame.GetYData(e.X,!1)}else{var n=a.GetBottomEx(),l=a.GetTopEx();if(e.Y<l||e.Y>n)return;var r=a.GetRight(),o={X:r,Y:e.Y},s=this.Frame.GetYData(e.Y,!1)}this.ClipFrame(),this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(o.X,o.Y),this.Canvas.stroke(),this.RestoreLineWidth();var h={Start:e,End:o};this.LinePoint.push(h),this.DrawPoint(t),this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=this.LineColor,this.Canvas.font=this.Font;var u=2*C(),c=e.X,f=e.Y;this.IsHScreen?(this.Canvas.translate(c+u,f+u),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(s.toFixed(2),0,0)):this.Canvas.fillText(s.toFixed(2),c+u,f-u),this.Canvas.restore()}}}}function Va(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPriceLineV2",this.Font=12*C()+"px å¾®è½¯éé»",this.PointCount=1,this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.LineWidth=1,this.IsDrawFirst=!0,this.TextColor="rgb(255,255,255)",this.Title,this.TextPosition=[null,0],this.Super_SetOption=this.SetOption,this.SetOption=function(t){this.Super_SetOption&&this.Super_SetOption(t),t&&(t.TextColor&&(this.TextColor=t.TextColor),t.Title&&(this.Title=t.Title),we.IsNonEmptyArray(t.TextPosition)&&(this.TextPosition=t.TextPosition.slice()))},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!0});if(t&&1==t.length&&this.IsYValueInFrame(this.Value[0].YValue)){this.IsHScreen=this.Frame.IsHScreen;var e=this.Frame.ChartBorder,a=this.Frame.GetBorder();if(this.IsHScreen){var i=a.LeftEx,r=a.RightEx,n=a.Bottom,o=a.Top,s={X:t[0].X,Y:o};if(s.X<i||s.X>r)return;var l={X:t[0].X,Y:n},h=this.Frame.GetYData(s.X,!1)}else{var n=a.BottomEx,o=a.TopTitle,i=a.Left,r=a.Right,s={X:i,Y:t[0].Y};if(s.Y<o||s.Y>n)return;var l={X:r,Y:t[0].Y},h=this.Frame.GetYData(s.Y,!1)}this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(p(s.X),p(s.Y)),this.Canvas.lineTo(p(l.X),p(l.Y)),this.Canvas.stroke(),this.RestoreLineWidth();var u={Start:s,End:l};this.LinePoint.push(u);var c=C();this.Canvas.font=this.Font;var f=2*c,d=l.X,D=l.Y;this.Canvas.textBaseline="middle",this.Canvas.textAlign="left";var m=this.GetFontHeight(),v=h.toFixed(2),g=this.Canvas.measureText(v).width+2*f,T=null;if(this.IsHScreen){var I=this.TextPosition[1],S=!1;if(0==I?S=e.Bottom<=10:1==I?S=!0:2==I&&(S=!1),S){D-=g;var x={Left:d-m/2,Top:D,Width:m,Height:g}}else var x={Left:d-m/2,Top:D,Width:m,Height:g};if(this.Canvas.fillStyle=this.LineColor,this.Canvas.fillRect(x.Left,x.Top,x.Width,x.Height),this.Canvas.save(),this.Canvas.translate(d,D+1*c),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(v,0,0),this.Canvas.restore(),this.Title){var g=this.Canvas.measureText(this.Title).width+2*c;if(S)var b={Left:x.Left,Top:x.Top-g-1*c,Width:m,Height:g};else var b={Left:x.Left,Top:n-g-1*c,Width:m,Height:g};this.Canvas.fillStyle=this.LineColor,this.Canvas.fillRect(b.Left,b.Top,b.Width,b.Height),this.Canvas.save(),this.Canvas.translate(d,b.Top+1*c),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(this.Title,0,0),this.Canvas.restore()}T={X:s.X,Y:s.Y+(l.Y-s.Y)/2}}else{var I=this.TextPosition[1],S=!1;if(0==I?S=e.Right<=10:1==I?S=!0:2==I&&(S=!1),S)var x={Left:d-g,Top:D-m/2-1*c,Width:g,Height:m};else{var x={Left:d,Top:D-m/2-1*c,Width:g,Height:m};x.Left+x.Width>a.ChartWidth&&(x.Left=a.ChartWidth-x.Width-2*c)}if(this.Canvas.fillStyle=this.LineColor,this.Canvas.fillRect(x.Left,x.Top,x.Width,x.Height),this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(v,x.Left+f,D),this.Title){var g=this.Canvas.measureText(this.Title).width+2*c;if(S)var b={Left:x.Left-g,Top:x.Top,Width:g,Height:m};else{var b={Left:r-g-1*c,Top:x.Top,Width:g,Height:m};x.Left!=r&&(b.Left=x.Left-g-1*c)}this.Canvas.fillStyle=this.LineColor,this.Canvas.fillRect(b.Left,b.Top,b.Width,b.Height),this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(this.Title,b.Left+1*c,D)}T={X:s.X+(l.X-s.X)/2,Y:s.Y}}T&&this.DrawPoint([T])}}},this.DrawPrice=function(){}}function Ha(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawVerticalLine",this.PointCount=1,this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.GetXYCoordinate=this.GetXYCoordinate_default,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow&&this.Frame&&this.Frame.Data){var t=this.Frame.Data,e=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(e&&1==e.length){this.IsHScreen=this.Frame.IsHScreen;var a=e[0],i=this.Frame.ChartBorder;if(this.IsHScreen){var r=Math.round(this.Frame.GetXData(a.Y,!1))+t.DataOffset;r<0?r=0:r>=t.Data.length&&(r=t.Data.length-1);var n=this.Frame.GetXFromIndex(r-t.DataOffset,!1);n=v(this.LineWidth,n);var o=i.GetLeftEx(),s=i.GetRightEx(),l={X:o,Y:n},h={X:s,Y:n}}else{var r=Math.round(this.Frame.GetXData(a.X,!1))+t.DataOffset;r<0?r=0:r>=t.Data.length&&(r=t.Data.length-1);var u=this.Frame.GetXFromIndex(r-t.DataOffset,!1);u=v(this.LineWidth,u);var C=i.GetTopEx(),c=i.GetBottomEx(),l={X:u,Y:C},h={X:u,Y:c}}this.ClipFrame(),this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(l.X,l.Y),this.Canvas.lineTo(h.X,h.Y),this.Canvas.stroke(),this.RestoreLineWidth();var f={Start:l,End:h};this.LinePoint.push(f),10==this.Status&&this.DrawPoint(e),this.Canvas.restore()}}}}function Ya(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawCrosshair",this.PointCount=1,this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.GetXYCoordinate=this.GetXYCoordinate_default,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow&&this.Frame&&this.Frame.Data){var t=this.Frame.Data,e=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!1});if(e&&1==e.length){this.IsHScreen=this.Frame.IsHScreen;var a=e[0],i=(this.Frame.ChartBorder,this.Frame.GetBorder());if(this.IsHScreen){var r=Math.round(this.Frame.GetXData(a.Y,!1))+t.DataOffset;r<0?r=0:r>=t.Data.length&&(r=t.Data.length-1);var n=this.Frame.GetXFromIndex(r-t.DataOffset,!1);n=v(this.LineWidth,n);var o=v(this.LineWidth,a.X),s=i.LeftEx,l=i.RightEx,h=i.Top,u=i.Bottom,C={X:s,Y:n},c={X:l,Y:n},f={X:o,Y:h},d={X:o,Y:u}}else{var r=Math.round(this.Frame.GetXData(a.X,!1))+t.DataOffset;r<0?r=0:r>=t.Data.length&&(r=t.Data.length-1);var o=this.Frame.GetXFromIndex(r-t.DataOffset,!1);o=v(this.LineWidth,o);var n=v(this.LineWidth,a.Y),h=i.TopEx,u=i.BottomEx,s=i.Left,l=i.Right,C={X:o,Y:h},c={X:o,Y:u},f={X:s,Y:n},d={X:l,Y:n}}this.ClipFrame(),this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(C.X,C.Y),this.Canvas.lineTo(c.X,c.Y),this.Canvas.moveTo(f.X,f.Y),this.Canvas.lineTo(d.X,d.Y),this.Canvas.stroke(),this.RestoreLineWidth();var D={Start:C,End:c},m={Start:f,End:d};this.LinePoint.push(D),this.LinePoint.push(m),10==this.Status&&this.DrawPoint(e),this.Canvas.restore()}}}}function Xa(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawMonitorLine",this.PointCount=1,this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.GetXYCoordinate=this.GetXYCoordinate_default,this.FormatLabelTextCallback=null,this.LineColor="rgb(255,215,0)",this.LabelConfig={Font:12*C()+"px å¾®è½¯éé»",BGColor:"rgb(30,144,255)",LineColor:"rgba(255,215,0,0.8)",LineDash:[3,5],Mergin:{Left:5,Right:5,Top:5,Bottom:4},LineSpace:5,TextAlign:1},this.PointToValue_Backup=this.PointToValue,this.PointToValue=function(){if(!this.PointToValue_Backup())return!1;if(this.Frame.IsKLineFrame(!1)&&0===this.Frame.Identify){var t=this.Value[0].XValue,e=this.Frame.Data,a=e.Data[t];this.Value[0].YValue=a.Close}return!0},this.SetOption=function(t){if(t.LineColor&&(this.LineColor=t.LineColor),t.Label){var e=t.Label,a=this.LabelConfig;e.Font&&(a.Font=e.Font),e.BGColor&&(a.BGColor=e.BGColor),e.LineColor&&(a.LineColor=e.LineColor),e.LineDash&&(a.LineDash=e.LineDash),we.IsNumber(e.LineSpace)&&(a.LineSpace=e.LineSpace),we.IsNumber(e.TextAlign)&&(a.TextAlign=e.TextAlign),e.Mergin&&S(a.Mergin,e.Mergin)}t.FormatLabelTextCallback&&(this.FormatLabelTextCallback=t.FormatLabelTextCallback)},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow&&this.Frame&&this.Frame.Data){var t=this.Frame.Data;we.IsNonEmptyArray(t.Data)&&1==this.Point.length&&1==this.Value.length&&(this.IsHScreen=this.Frame.IsHScreen,this.IsHScreen||(20==this.Status?this.DrawMoveLine():10==this.Status&&this.DrawMonitorLine(t)))}},this.DrawMoveLine=function(){var t=this.Frame.ChartBorder.GetBorder(),e=this.Point[0],a=p(e.X);this.ClipFrame(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(a,t.TopEx),this.Canvas.lineTo(a,t.BottomEx),this.Canvas.stroke(),this.Canvas.restore()},this.DrawMonitorLine=function(t){var e=this.Frame.IsMinuteFrame(),a=this.Frame.DataWidth,i=this.Frame.DistanceWidth,r=this.Frame.XPointCount;if(this.IsHScreen);else var n=this.Frame.ChartBorder.GetBorder(),o=n.LeftEx+i/2+So.FrameLeftMargin,s=n.RightEx;var l=this.Value[0];this.ClipFrame();for(var h=null,u=t.DataOffset,C=0;u<t.Data.length&&C<r;++u,++C,o+=a+i){t.Data[u];if(e)var c=this.Frame.GetXFromIndex(C);else{var f=o,d=o+a;if(d>s)break;var c=f+(d-f)/2}if(u==l.XValue){this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(c,n.TopEx),this.Canvas.lineTo(c,n.BottomEx),this.Canvas.stroke();var D={Start:{X:c,Y:n.TopEx},End:{X:c,Y:n.BottomEx}};this.LinePoint.push(D)}else u==t.Data.length-1&&(this.LabelConfig.LineDash&&this.Canvas.setLineDash(this.LabelConfig.LineDash),this.Canvas.strokeStyle=this.LabelConfig.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(c,n.TopEx),this.Canvas.lineTo(c,n.BottomEx),this.Canvas.stroke(),this.LabelConfig.LineDash&&this.Canvas.setLineDash([]),h={Left:d,Data:t,StartIndex:l.XValue,AryText:[]})}this.Canvas.restore(),h&&this.DrawLabel(h)},this.DrawLabel=function(t){if(this.FormatLabelTextCallback&&(t.Config=this.LabelConfig,this.FormatLabelTextCallback(t),we.IsNonEmptyArray(t.AryText)&&we.IsNumber(t.YValue))){this.CalculateLabelSize(t);var e=this.Frame.GetYFromData(t.YValue,!1),a={Left:t.Left+1,Top:e,Width:t.Width,Height:t.Height};a.Right=a.Left+a.Width,a.Bottom=a.Top+a.Height,this.DrawDefaultLabel(t,a)}}}function Wa(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawWaveRuler",this.PointCount=3,this.Font=16*C()+"px å¾®è½¯éé»",this.IsPointIn=this.IsPointIn_XYValue_Line,this.LastPoint,this.LinePoint,this.ScaleRuler=So.ChartDrawWaveRuler.ScaleRuler,this.RulerWidth=So.ChartDrawWaveRuler.RulerWidth,this.RulerLineWidth=So.ChartDrawWaveRuler.RulerLineWidth,this.MaxScaleRuler=So.ChartDrawWaveRuler.MaxScaleRuler,this.Font=So.ChartDrawWaveRuler.MaxScaleRuler,this.IsHScreen=!1,this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.IsHScreen=this.Frame.IsHScreen,this.CalculateLines(t),this.ClipFrame(),this.SetLineWidth();for(var e in this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}3==t.length&&this.DrawWaveRuler(t),this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.CalculateLines=function(t){if(2==this.PointStatus&&this.LastPoint){var e=new E;e.X=this.LastPoint.X,e.Y=this.LastPoint.Y,t[2]=e}if(2==t.length){var a={Start:{X:t[0].X,Y:t[0].Y},End:{X:t[1].X,Y:t[1].Y}};this.LinePoint.push(a)}else if(3==t.length){var a={Start:{X:t[0].X,Y:t[0].Y},End:{X:t[1].X,Y:t[1].Y}};this.LinePoint.push(a),a={Start:{X:t[1].X,Y:t[1].Y},End:{X:t[2].X,Y:t[2].Y}},this.LinePoint.push(a)}},this.DrawWaveRuler=function(t){var e=t[1],a=t[0],i=t[2],r=this.RulerLineWidth*C();this.Canvas.lineWidth=r,this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.fillStyle=this.LineColor,this.Canvas.font=this.Font;var n=this.RulerWidth*C();if(this.IsHScreen){var o=a.X-e.X,s={X:i.X-this.MaxScaleRuler*o,Y:i.Y};this.DrawLine(i,s),this.LinePoint.push({Start:i,End:s});var l=i.Y-n/2,h=i.Y+n/2}else{var o=a.Y-e.Y,s={X:v(r,i.X),Y:i.Y-this.MaxScaleRuler*o};this.DrawLine({X:v(r,i.X),Y:i.Y},s),this.LinePoint.push({Start:i,End:s});var u=i.X-n/2,c=i.X+n/2}var f=4*C();for(var d in this.ScaleRuler){var D=this.ScaleRuler[d];if(this.IsHScreen){var u=i.X-D.Value*o,m=this.Frame.GetYData(u,!1);this.DrawLine({X:u,Y:l},{X:u,Y:h});var p=m.toFixed(2)+"  "+(D.Text?D.Text:D.Value.toFixed(3));this.Canvas.save(),this.Canvas.translate(u,i.Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(p,f,0),this.Canvas.restore()}else{var l=i.Y-D.Value*o,m=this.Frame.GetYData(l,!1);this.DrawLine({X:u,Y:v(r,l)},{X:c,Y:v(r,l)});var p=m.toFixed(2)+"  "+(D.Text?D.Text:D.Value.toFixed(3));this.Canvas.fillText(p,c+f,l)}}}}function Ua(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawWaveRuler2Point",this.PointCount=2,this.Font=14*C()+"px å¾®è½¯éé»",this.IsPointIn=this.IsPointIn_XYValue_Line,this.PointRate=[510,517,511.4],this.LinePoint,this.CPoint,this.ScaleRuler=So.ChartDrawWaveRuler2Point.ScaleRuler,this.RulerWidth=So.ChartDrawWaveRuler2Point.RulerWidth,this.RulerLineWidth=So.ChartDrawWaveRuler2Point.RulerLineWidth,this.MaxScaleRuler=So.ChartDrawWaveRuler2Point.MaxScaleRuler,this.Font=So.ChartDrawWaveRuler2Point.MaxScaleRuler,this.IsHScreen=!1,this.Super_SetOption=this.SetOption,this.SetOption=function(t){this.Super_SetOption&&this.Super_SetOption(t),t&&t.PointRate&&(this.PointRate=t.PointRate)},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.IsHScreen=this.Frame.IsHScreen,this.CalculateLines(t),this.ClipFrame(),this.SetLineWidth();for(var e in this.LinePoint){var a=this.LinePoint[e];this.DrawLine(a.Start,a.End)}var i=[t[0],t[1],this.CPoint];this.DrawWaveRuler(i),this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.CalculateLines=function(t){var e={Start:{X:t[0].X,Y:t[0].Y},End:{X:t[1].X,Y:t[1].Y}};this.LinePoint.push(e);var a=t[0].Y,i=t[1].Y,r=this.PointRate[1]-this.PointRate[0],n=this.PointRate[2]-this.PointRate[0],o=a-(a-i)*n/r;this.CPoint={X:t[1].X,Y:o}},this.DrawWaveRuler=function(t){var e=t[1],a=t[0],i=t[2],r=this.RulerLineWidth*C();this.Canvas.lineWidth=r,this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.fillStyle=this.LineColor,this.Canvas.font=this.Font;var n=this.RulerWidth*C();if(this.IsHScreen){var o=a.X-e.X,s={X:i.X-this.MaxScaleRuler*o,Y:i.Y};this.DrawLine(i,s),this.LinePoint.push({Start:i,End:s});var l=i.Y-n/2,h=i.Y+n/2}else{var o=a.Y-e.Y,s={X:v(r,i.X),Y:i.Y-this.MaxScaleRuler*o};this.DrawLine({X:v(r,i.X),Y:i.Y},s),this.LinePoint.push({Start:i,End:s});var u=i.X,c=i.X+n}var f=4*C();for(var d in this.ScaleRuler){var D=this.ScaleRuler[d];if(this.IsHScreen){var u=i.X-D.Value*o,m=this.Frame.GetYData(u,!1);this.DrawLine({X:u,Y:l},{X:u,Y:h});var p=m.toFixed(2)+"  "+(D.Text?D.Text:D.Value.toFixed(3));this.Canvas.save(),this.Canvas.translate(u,i.Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(p,f,0),this.Canvas.restore()}else{var l=i.Y-D.Value*o,m=this.Frame.GetYData(l,!1);this.DrawLine({X:u,Y:v(r,l)},{X:c,Y:v(r,l)});var p=m.toFixed(2)+"  "+(D.Text?D.Text:D.Value.toFixed(3));this.Canvas.fillText(p,c+f,l)}}}}function Ka(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawBox",this.PointCount=2,this.Font=16*C()+"px å¾®è½¯éé»",this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.AvPriceLineDash=[5*C(),5*C()],this.KLineBorder,this.PointToValue_Backup=this.PointToValue,this.PointToValue=function(){this.Point[0]={X:this.KLineBorder.Left,Y:this.KLineBorder.Top},this.Point[1]={X:this.KLineBorder.Right,Y:this.KLineBorder.Bottom},this.PointToValue_Backup()},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.IsHScreen=this.Frame.IsHScreen,this.ClipFrame();var e=t[0],a=t[1],i=this.PointToKLine([e,a]);Xn.Chart.Log("[ChartDrawBox::Draw] kPoint",i);var r=this.Calculate(i);Xn.Chart.Log("[ChartDrawBox::Draw] kDataInfo",r);var n=this.GetKLineBorder(t,r);this.KLineBorder=n,this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.strokeRect(g(n.Left),g(n.Top),g(n.Right-n.Left),g(n.Bottom-n.Top));var o;if(r.Amount>0&&r.Vol>0){var s=r.Amount/r.Vol;if(o="åä»·"+s.toFixed(2),this.Canvas.beginPath(),this.IsHScreen){var l=this.Frame.GetYFromData(s,!1);this.Canvas.moveTo(v(this.Canvas.lineWidth,l),n.Top),this.Canvas.lineTo(v(this.Canvas.lineWidth,l),n.Bottom)}else{var h=this.Frame.GetYFromData(s,!1);this.Canvas.moveTo(n.Left,v(this.Canvas.lineWidth,h)),this.Canvas.lineTo(n.Right,v(this.Canvas.lineWidth,h))}this.Canvas.setLineDash(this.AvPriceLineDash),this.Canvas.stroke(),this.Canvas.setLineDash([])}this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.textBaseline="top",this.Canvas.textAlign="left",this.Canvas.font=this.Font,this.Canvas.fillStyle=this.LineColor;var u=2*C(),c="Kçº¿æ°"+r.Count;this.IsHScreen?this.DrawText(c,n.Right,n.Top,u,u):this.DrawText(c,n.Left,n.Top,u,u),o&&(this.IsHScreen?this.DrawText(o,l,n.Top,u,u):this.DrawText(o,n.Left,h,u,u));var f=we.IsNumber(r.YClose)?r.YClose:r.Open,d=(r.Close-f)/f*100;c=d.toFixed(2)+"%",this.IsHScreen?this.DrawText(c,n.Right,n.Bottom,u,u):this.DrawText(c,n.Right,n.Top,u,u),d=r.Close-f,c=""+d.toFixed(2),this.Canvas.textBaseline="bottom",this.IsHScreen?this.DrawText(c,n.Left,n.Bottom,u,0):this.DrawText(c,n.Right,n.Bottom,u,0),this.Canvas.restore()}}},this.Calculate=function(t){var e=t[0],a=t[1];e.XValue>a.XValue&&(e=t[1],a=t[0]);for(var i,r,n,o,s,l=this.Frame.Data.Data,h=0,u=0,C=0,c=e.XValue;c<=a.XValue;++c,++C){var f=l[c];0==C?(o=f.YClose,i=f.Open,s=f.Close,n=f.Low,r=f.High):(s=f.Close,n>f.Low&&(n=f.Low),r<f.High&&(r=f.High)),h+=f.Vol,u+=f.Amount}return{YClose:o,Open:i,High:r,Low:n,Close:s,Count:C,Vol:h,Amount:u}},this.GetKLineBorder=function(t,e){var a=t[0],i=t[1],r=this.Frame.Data;if(this.IsHScreen){var n=Math.round(this.Frame.GetXData(a.Y,!1))+r.DataOffset;n<0?n=0:n>=r.Data.length&&(n=r.Data.length-1);var o=this.Frame.GetXFromIndex(n-r.DataOffset,!1);n=Math.round(this.Frame.GetXData(i.Y,!1))+r.DataOffset,n<0?n=0:n>=r.Data.length&&(n=r.Data.length-1);var s=this.Frame.GetXFromIndex(n-r.DataOffset,!1),l=this.Frame.GetYFromData(e.High,!1),h=this.Frame.GetYFromData(e.Low,!1),u={Left:h,Top:o,Right:l,Bottom:s};return this.LinePoint.push({Start:{X:h,Y:o},End:{X:s,Y:o}}),this.LinePoint.push({Start:{X:h,Y:s},End:{X:s,Y:s}}),this.LinePoint.push({Start:{X:h,Y:o},End:{X:h,Y:s}}),this.LinePoint.push({Start:{X:l,Y:o},End:{X:l,Y:s}}),u}var n=Math.round(this.Frame.GetXData(a.X,!1))+r.DataOffset;n<0?n=0:n>=r.Data.length&&(n=r.Data.length-1);var C=this.Frame.GetXFromIndex(n-r.DataOffset,!1);n=Math.round(this.Frame.GetXData(i.X,!1))+r.DataOffset,n<0?n=0:n>=r.Data.length&&(n=r.Data.length-1);var c=this.Frame.GetXFromIndex(n-r.DataOffset,!1),f=this.Frame.GetYFromData(e.High,!1),d=this.Frame.GetYFromData(e.Low,!1),u={Left:C,Top:f,Right:c,Bottom:d};return this.LinePoint.push({Start:{X:C,Y:f},End:{X:c,Y:f}}),this.LinePoint.push({Start:{X:C,Y:d},End:{X:c,Y:d}}),this.LinePoint.push({Start:{X:C,Y:f},End:{X:C,Y:d}}),this.LinePoint.push({Start:{X:c,Y:f},End:{X:c,Y:d}}),u},this.DrawText=function(t,e,a,i,r){this.IsHScreen?(this.Canvas.save(),this.Canvas.translate(e,a),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(t,i,r),this.Canvas.restore()):this.Canvas.fillText(t,e+i,a+r)}}function za(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawTwoPointDemo",this.PointCount=2,this.Font=16*C()+"px å¾®è½¯éé»",this.IsPointIn=this.IsPointIn_XYValue_Line,this.IsHScreen=!1,this.PointInfo=[],this.PointToValue_Backup=this.PointToValue,this.PointToValue=function(){this.OnFinish(),this.PointToValue_Backup()},this.OnFinish=function(){for(var t in this.PointInfo){var e=this.PointInfo[t];e&&e.Point&&we.IsNumber(e.Point.Y2)&&(this.Point[t].Y=this.PointInfo[t].Point.Y2)}},this.Draw=function(){if(this.LinePoint=[],this.PointInfo=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t){this.IsHScreen=this.Frame.IsHScreen,this.ClipFrame(),this.SetLineWidth();t[0],t[1];if(this.CalculatePointInfo(t),10==this.Status)this.DrawEx();else for(var e=1;e<t.length;++e)this.DrawLine(t[e-1],t[e]);this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.CalculatePointInfo=function(t){if(this.Frame&&this.Frame.Data){var e=this.PointToKLine(t);if(3==this.PointCount&&2==this.PointStatus&&this.LastPoint){var a=new E;a.X=this.LastPoint.X,a.Y=this.LastPoint.Y,t[2]=a}var i=this.Frame.Data;for(var r in e){var n=e[r],a=t[r],o=i.Data[n.XValue],s={KItem:o,Data:n,Point:{X:a.X,Y:a.Y}};this.PointInfo.push(s)}this.CalculateYPoint(),Xn.Chart.Log("[ChartDrawTwoPointDemo::CalculateLines] kPoint",this.PointInfo)}},this.CalculateYPoint=function(){var t=this.PointInfo[0],e=this.Frame.GetYFromData(t.KItem.Low,!1);t.Point.Y2=e;var a=this.PointInfo[1],i=this.Frame.GetYFromData(a.KItem.High,!1);a.Point.Y2=i},this.DrawEx=function(){var t=this.PointInfo[0],e=this.PointInfo[1],a=this.Frame.ChartBorder,i=(a.GetRight(),{X:t.Point.X,Y:t.Point.Y2}),r={X:e.Point.X,Y:e.Point.Y2};this.DrawLine(i,r),this.LinePoint.push({Start:i,End:r}),this.Canvas.setLineDash([5,5]);var n=.09*e.KItem.YClose+e.KItem.High,o=this.Frame.GetYFromData(n,!1);this.DrawLine({X:this.ToFixedPoint(r.X),Y:r.Y},{X:this.ToFixedPoint(r.X),Y:o}),this.Canvas.textAlign="right",this.Canvas.textBaseline="center",this.Canvas.fillStyle="rgb(33,45,100)";for(var s=3;s>0;--s){var l=e.KItem.YClose*(.03*s)+e.KItem.High,o=this.Frame.GetYFromData(l,!1);o=this.ToFixedPoint(o),this.DrawLine({X:r.X,Y:o},{X:r.X+100,Y:o}),this.Canvas.fillText(l.toFixed(2),r.X-5,o)}this.Canvas.setLineDash([])},this.ToFixedPoint=function(t,e){return we.IsNumber(e)||(e=this.LineWidth),v(e,t)}}function Ja(){this.newMethod=za,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawThreePointDemo",this.PointCount=3,this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.CalculateYPoint=function(){var t;for(var e in this.PointInfo){var a=this.PointInfo[e];t=0==e||2==e?this.Frame.GetYFromData(a.KItem.Low,!1):this.Frame.GetYFromData(a.KItem.High,!1),a.Point.Y2=t}},this.DrawEx=function(){var t=this.PointInfo[0],e=this.PointInfo[1],a=this.PointInfo[2],i=this.Frame.ChartBorder,r=(i.GetRight(),i.GetLeft(),{X:t.Point.X,Y:t.Point.Y2}),n={X:e.Point.X,Y:e.Point.Y2},o={X:a.Point.X,Y:a.Point.Y2};this.DrawLine(r,n),this.DrawLine(n,o),this.LinePoint.push({Start:r,End:n}),this.LinePoint.push({Start:n,End:o}),this.Canvas.setLineDash([5,5]);var s=.09*a.KItem.YClose+a.KItem.High,l=this.Frame.GetYFromData(s,!1);this.DrawLine({X:this.ToFixedPoint(o.X),Y:o.Y},{X:this.ToFixedPoint(o.X),Y:l}),this.Canvas.textAlign="right",this.Canvas.textBaseline="center",this.Canvas.fillStyle="rgb(33,45,100)";for(var h=3;h>0;--h){var u=a.KItem.YClose*(.03*h)+a.KItem.High,l=this.Frame.GetYFromData(u,!1);l=this.ToFixedPoint(l),this.DrawLine({X:o.X,Y:l},{X:o.X+100,Y:l}),this.Canvas.fillText(u.toFixed(2),o.X-5,l)}this.Canvas.setLineDash([])}}function qa(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawHLineSegment",this.PointCount=2,this.IsPointIn=this.IsPointIn_XYValue_Line,this.ChartBorder,this.PointToValue_Backup=this.PointToValue,this.PointToValue=function(){this.Frame.IsHScreen?this.Point[1].X=this.Point[0].X:this.Point[1].Y=this.Point[0].Y,this.PointToValue_Backup()},this.GetXYCoordinate=function(){if(this.IsFrameMinSize())return null;var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!0});return this.PointRange(t)},this.Draw=function(){if(this.Frame&&(this.IsHScreen=this.Frame.IsHScreen,this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow)){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame(),this.ChartBorder=this.Frame.ChartBorder,this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor;var e=t[0],a=t[1];10==this.Status?this.DrawLine(e,a,!1):this.DrawVerticalLine(e,a),this.RestoreLineWidth();var i={Start:e,End:a};this.LinePoint.push(i),this.DrawPoint(t),this.Canvas.restore()}}},this.DrawVerticalLine=function(t,e){var a=this.Frame.Data;if(this.IsHScreen){var i=this.ChartBorder.GetLeft(),r=this.ChartBorder.GetRight(),n=Math.round(this.Frame.GetXData(t.Y,!1))+a.DataOffset;n<0?n=0:n>=a.Data.length&&(n=a.Data.length-1);var o=this.Frame.GetXFromIndex(n-a.DataOffset,!1);n=Math.round(this.Frame.GetXData(e.Y,!1))+a.DataOffset,n<0?n=0:n>=a.Data.length&&(n=a.Data.length-1);var s=this.Frame.GetXFromIndex(n-a.DataOffset,!1);this.Canvas.beginPath(),this.Canvas.moveTo(i,o),this.Canvas.lineTo(r,o),this.Canvas.moveTo(i,s),this.Canvas.lineTo(r,s),this.Canvas.stroke(),this.Canvas.beginPath(),this.Canvas.moveTo(t.X,o),this.Canvas.lineTo(t.X,s),this.Canvas.stroke()}else{var l=this.ChartBorder.GetTopEx(),h=this.ChartBorder.GetBottomEx(),n=Math.round(this.Frame.GetXData(t.X,!1))+a.DataOffset;n<0?n=0:n>=a.Data.length&&(n=a.Data.length-1);var u=this.Frame.GetXFromIndex(n-a.DataOffset,!1);n=Math.round(this.Frame.GetXData(e.X,!1))+a.DataOffset,n<0?n=0:n>=a.Data.length&&(n=a.Data.length-1);var C=this.Frame.GetXFromIndex(n-a.DataOffset,!1);this.Canvas.beginPath(),this.Canvas.moveTo(u,l),this.Canvas.lineTo(u,h),this.Canvas.moveTo(C,l),this.Canvas.lineTo(C,h),this.Canvas.stroke(),this.Canvas.beginPath(),this.Canvas.moveTo(u,t.Y),this.Canvas.lineTo(C,t.Y),this.Canvas.stroke()}}}function Za(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawVolProfile",this.PointCount=2,this.IsPointIn=this.IsPointIn_XYValue_Line,this.ChartBorder,this.GetXYCoordinate=this.GetXYCoordinate_default,this.IsShowText=!0,this.VolType=0,this.BarPosition=0,this.VolFont,this.VAVol=60,this.BarWidthRate=.3,this.Data,this.MaxVol,this.MaxVolPrice,this.DataStatus=0,this.BGColor=So.ChartDrawVolProfile.BGColor,this.BorderColor=So.ChartDrawVolProfile.BorderColor,this.VolLineColor=So.ChartDrawVolProfile.VolLineColor,this.TextConfig=(0,On.default)({Color:So.ChartDrawVolProfile.Text.Color,Family:So.ChartDrawVolProfile.Text.Family,FontMaxSize:So.ChartDrawVolProfile.Text.FontMaxSize,FontMinSize:So.ChartDrawVolProfile.Text.FontMinSize},"Color",So.ChartDrawVolProfile.Text.Color),this.BarColor=[So.ChartDrawVolProfile.UpVolColor,So.ChartDrawVolProfile.DownVolColor,So.ChartDrawVolProfile.AreaUpColor,So.ChartDrawVolProfile.AreaDonwColor],this.Super_SetOption=this.SetOption,this.SetOption=function(t){this.Super_SetOption&&this.Super_SetOption(t),t&&(t.BGColor&&(this.BGColor=t.BGColor),t.BorderColor&&(this.BGColor=t.BorderColor),t.VolLineColor&&(this.BGColor=t.VolLineColor),t.UpVolColor&&(this.BarColor[0]=t.UpVolColor),t.DownVolColor&&(this.BarColor[1]=t.DownVolColor),t.AreaUpColor&&(this.BarColor[2]=t.AreaUpColor),t.AreaDonwColor&&(this.BarColor[3]=t.AreaDonwColor),we.IsNumber(t.BarWidthRate)&&(this.BarWidthRate=t.BarWidthRate),we.IsBool(t.IsShowText)&&(this.IsShowText=t.IsShowText),we.IsNumber(t.VolType)&&(this.VolType=t.VolType),we.IsNumber(t.BarPosition)&&(this.BarPosition=t.BarPosition),we.IsNumber(t.VAVol)&&(this.VAVol=t.VAVol))},this.OnFinish=function(){this.RequestVolumeProfileData()},this.OnMoveFinish=function(){this.RequestVolumeProfileData()},this.IsDrawMain=function(){return!this.GetActiveDrawPicture||this.GetActiveDrawPicture().Select.Guid!=this.Guid},this.RequestVolumeProfileData=function(){var t=this.Value[0],e=this.Value[1];t.XValue>e.XValue&&(t=this.Value[1],e=this.Value[0]);var a={Start:{Date:t.DateTime.Date,DataIndex:t.XValue},End:{Date:e.DateTime.Date,DataIndex:e.XValue},Chart:this};we.IsNumber(t.DateTime.Time)&&(a.Start.Time=t.DateTime.Time),we.IsNumber(e.DateTime.Time)&&(a.End.Time=e.DateTime.Time),a.ValueAreaVol=this.VAVol,this.DataStatus=0,this.HQChart&&this.HQChart.RequestVolumeProfileData&&this.HQChart.RequestVolumeProfileData(a)},this.OnRecvVolumeProfileData=function(t){if(t&&we.IsNonEmptyArray(t.Data)){for(var e=0,a=0,i=null,r=0,n=0;r<t.Data.length;++r){var o=t.Data[r];for(a=0,n=0;n<o.Vol.length;++n){var s=o.Vol[n];we.IsNumber(s.Value)&&(a+=s.Value)}e<a&&(e=a,i=o.Price)}if(this.MaxVolPrice=i,this.MaxVol=e,!(this.MaxVolPrice<=0||this.MaxVol<=0)&&we.IsNumber(t.MaxPrice)&&we.IsNumber(t.MinPrice)){var l=this.Frame.GetYFromData(t.MaxPrice,!1),h=this.Frame.GetYFromData(t.MinPrice,!1);this.Point[0].Y=l,this.Point[1].Y=h,this.PointToValue(),this.Data=t,this.DataStatus=1}}},this.Draw=function(){if(this.VolFont=null,this.IsDrawMain()||this.MainDraw(),!this.IsFrameMinSize()){this.Frame&&(this.ChartBorder=this.Frame.ChartBorder);var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame(),this.SetLineWidth();var e=t[0],a=t[1];10==this.Status?0==this.DataStatus&&this.DrawLineBorder(e,a):this.DrawLineBorder(e,a),this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.MainDraw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&1==this.DataStatus&&10==this.Status){this.ClipFrame();this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});this.DrawVolBar(),this.Canvas.restore()}},this.DrawLineBorder=function(t,e){this.Canvas.strokeStyle=this.LineColor;var a=this.ChartBorder.GetTopEx(),i=this.ChartBorder.GetBottomEx();this.Canvas.beginPath(),this.Canvas.moveTo(t.X,t.Y),this.Canvas.lineTo(e.X,e.Y),this.Canvas.moveTo(t.X,a),this.Canvas.lineTo(t.X,i),this.Canvas.moveTo(e.X,a),this.Canvas.lineTo(e.X,i),this.Canvas.stroke()},this.DrawVolBar=function(){var t=this.Value[0],e=this.Value[1];t.XValue>e.XValue&&(t=this.Value[1],e=this.Value[0]);var a=this.GetKDataOffset(),i=this.GetPriceYOffset(this.Data.PriceOffset),r=this.Frame.GetXFromIndex(t.XValue-a,!1),n=this.Frame.GetXFromIndex(e.XValue-a,!1),o=this.Frame.GetYFromData(this.Data.MaxPrice)-i/2,s=this.Frame.GetYFromData(this.Data.MinPrice)+i/2,l=n-r,h=s-o,u=l*this.BarWidthRate;if(this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(r,o,l,h),this.MaxVolPrice>=this.Frame.HorizontalMin&&this.MaxVolPrice<=this.Frame.HorizontalMax){var C=v(2,this.Frame.GetYFromData(this.MaxVolPrice,!1));this.Canvas.lineWidth=2,this.Canvas.strokeStyle=this.VolLineColor,this.Canvas.beginPath(),this.Canvas.moveTo(r,C),this.Canvas.lineTo(n,C),this.Canvas.stroke();var c={Start:{X:r,Y:C},End:{X:n,Y:C}};this.LinePoint.push(c)}this.IsShowText&&(this.VolFont=this.GetDynamicVolTextFont(i,u),this.VolFont&&(this.Canvas.font=this.VolFont));for(var f=0;f<this.Data.Data.length;++f){var d=this.Data.Data[f];d.Price<this.Frame.HorizontalMin||d.Price>this.Frame.HorizontalMax||this.DrawVolBarItem(d,r,n,u,i)}},this.DrawVolBarItem=function(t,e,a,i,r){var n=e,o=a,s=this.Frame.GetYFromData(t.Price)-r/2,l=r-1;if(l<1&&(l=1),1==this.VolType){if(!t.TotalVol)return;if(!we.IsNumber(t.TotalVol.Value))return;var h,u=t.TotalVol.Value*i/this.MaxVol;if(we.IsNumber(t.TotalVol.ColorID)?h=this.BarColor[t.TotalVol.ColorID]:t.TotalVol.Color&&(h=t.TotalVol.Color),this.Canvas.fillStyle=h,1==this.BarPosition?this.Canvas.fillRect(o,g(s),-u,g(l)):this.Canvas.fillRect(n,g(s),u,g(l)),this.IsShowText&&this.VolFont){var C=we.FormatVolString(t.TotalVol.Value,this.HQChart.LanguageID);this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextConfig.Color,1==this.BarPosition?(this.Canvas.textAlign="right",this.Canvas.fillText(C,a-5,s+r/2)):(this.Canvas.textAlign="left",this.Canvas.fillText(C,e+5,s+r/2))}}else{for(var C="",c=0;c<t.Vol.length;++c){var f=t.Vol[c];if(we.IsNumber(f.Value)){var h;if(we.IsNumber(f.ColorID)?h=this.BarColor[f.ColorID]:f.Color&&(h=f.Color),h){var u=f.Value*i/this.MaxVol;this.Canvas.fillStyle=h,1==this.BarPosition?(this.Canvas.fillRect(o,g(s),-u,g(l)),o-=u):(this.Canvas.fillRect(n,g(s),u,g(l)),n+=u);var d=we.FormatVolString(f.Value,this.HQChart.LanguageID);C.length>0&&(C+="x"),C+=d}}}this.IsShowText&&this.VolFont&&(this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextConfig.Color,1==this.BarPosition?(this.Canvas.textAlign="right",this.Canvas.fillText(C,a-5,s+r/2)):(this.Canvas.textAlign="left",this.Canvas.fillText(C,e+5,s+r/2)))}},this.GetKDataOffset=function(){return this.HQChart.ChartPaint[0].Data.DataOffset},this.GetPriceYOffset=function(t){var e=this.Frame;return e.ChartBorder.GetHeightEx()*t/(e.HorizontalMax-e.HorizontalMin)},this.GetDynamicVolTextFont=function(t,e,a){var i=parseInt(t)-2;return t<5&&(i=parseInt(t)),i>this.TextConfig.FontMaxSize?i=this.TextConfig.FontMaxSize:i<=0&&(i=1),i<this.TextConfig.FontMinSize?null:this.FormatFontString(i,this.TextConfig.Family,a)},this.FormatFontString=function(t,e,a){var i;return a?a.Weight&&(i=a.Weight+" "+t+"px "+e):i=t+"px "+e,i}}function ja(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawNote",this.PointCount=1,this.Text=So.ChartDrawNote.Text,this.FontOption={Family:So.ChartDrawNote.FontOption.Family,Size:So.ChartDrawNote.FontOption.Size},this.AryNoteText=[{Text:"è¾å¥åå®¹ ......"}],this.NoteFontOption={Family:So.ChartDrawNote.NoteFontOption.Family,Size:So.ChartDrawNote.NoteFontOption.Size,Weight:So.ChartDrawNote.NoteFontOption.Weight,Style:So.ChartDrawNote.NoteFontOption.Style},this.NoteWidth=So.ChartDrawNote.NoteWidth,this.NoteMargin={Left:So.ChartDrawNote.NoteMargin.Left,Top:So.ChartDrawNote.NoteMargin.Top,Bottom:So.ChartDrawNote.NoteMargin.Bottom,Right:So.ChartDrawNote.NoteMargin.Right},this.NoteBGColor=So.ChartDrawNote.NoteBGColor,this.NoteTextColor=So.ChartDrawNote.NoteTextColor,this.NoteBorderColor=So.ChartDrawNote.NoteBorderColor,this.LineSpace=So.ChartDrawNote.LineSpace,this.ArrowSize=So.ChartDrawNote.ArrowSize,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!1,this.PtButtom,this.PtTop,this.TextRect=null,this.PtCenter,this.SetOption_Backup=this.SetOption,this.SetOption=function(t){if(this.SetOption_Backup(t),t){if(t.Text&&(this.Text=t.Text),t.FontOption&&this.SetFont(this.FontOption,t.FontOption),t.NoteFontOption&&this.SetFont(this.NoteFontOption,t.NoteFontOption),we.IsNumber(t.NoteWidth)&&(this.NoteWidth=t.NoteWidth),t.NoteMargin){var e=t.NoteMargin;we.IsNumber(e.Left)&&(this.NoteMargin.Left=e.Left),we.IsNumber(e.Top)&&(this.NoteMargin.Top=e.Top),we.IsNumber(e.Bottom)&&(this.NoteMargin.Bottom=e.Bottom),we.IsNumber(e.Right)&&(this.NoteMargin.Right=e.Right)}t.NoteBGColor&&(this.NoteBGColor=t.NoteBGColor),t.NoteTextColor&&(this.NoteTextColor=t.NoteTextColor),t.NoteBorderColor&&(this.NoteBorderColor=t.NoteBorderColor),we.IsNumber(t.LineSpace)&&(this.LineSpace=t.LineSpace),we.IsNumber(t.ArrowSize)&&(this.ArrowSize=t.ArrowSize),we.IsNonEmptyArray(t.AryNoteText)&&(this.AryNoteText=this.CloneArrayText(t.AryNoteText))}},this.ExportStorageData=function(){var t=this.ExportBaseData();if(t.Value=[],this.Value&&this.Value[0]){var e=this.Value[0];t.Value.push({XValue:e.XValue,YValue:e.YValue,DateTime:e.DateTime})}return t.NoteFont=this.NoteFont,t.NoteWidth=this.NoteWidth,t.NoteBGColor=this.NoteBGColor,t.NoteTextColor=this.NoteTextColor,t.NoteBorderColor=this.NoteBorderColor,t.LineSpace=this.LineSpace,t.ArrowSize=this.ArrowSize,t.NoteMargin={Left:this.NoteMargin.Left,Top:this.NoteMargin.Right,Bottom:this.NoteMargin.Bottom,Right:this.NoteMargin.Right},t.AryNoteText=this.CloneArrayText(this.AryNoteText),t},this.ImportStorageData=function(t){if(t.NoteFont&&(this.NoteFont=t.NoteFont),we.IsNumber(t.NoteWidth)&&(this.NoteWidth=t.NoteWidth),t.NoteMargin){var e=t.NoteMargin;we.IsNumber(e.Left)&&(this.NoteMargin.Left=e.Left),we.IsNumber(e.Top)&&(this.NoteMargin.Top=e.Top),we.IsNumber(e.Bottom)&&(this.NoteMargin.Bottom=e.Bottom),we.IsNumber(e.Right)&&(this.NoteMargin.Right=e.Right)}t.NoteBGColor&&(this.NoteBGColor=t.NoteBGColor),t.NoteTextColor&&(this.NoteTextColor=t.NoteTextColor),this.NoteBorderColor=t.NoteBorderColor,we.IsNumber(t.LineSpace)&&(this.LineSpace=t.LineSpace),we.IsNumber(t.ArrowSize)&&(this.ArrowSize=t.ArrowSize),this.AryNoteText=this.CloneArrayText(t.AryNoteText)},this.Draw=function(){if(this.PtButtom=null,this.PtTop=null,this.TextRect=null,this.PtCenter=null,!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&1==t.length){var e=this.GetTextFont();if(e){this.ClipFrame();var a=this.Frame.IsHScreen,i=C();if(this.Canvas.fillStyle=this.LineColor,this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.font=e,a){this.Canvas.translate(t[0].X,t[0].Y),this.Canvas.rotate(90*Math.PI/180),this.Canvas.fillText(this.Text,0,0),this.PtButtom={X:t[0].X,Y:t[0].Y+this.FontOption.Size*i/2+2},this.PtTop={X:t[0].X,Y:t[0].Y-this.FontOption.Size*i/2-2},this.PtCenter=t[0];var r={X:t[0].X-this.FontOption.Size*i/2-2,Y:t[0].Y}}else{this.Canvas.fillText(this.Text,t[0].X,t[0].Y),this.PtButtom={X:t[0].X,Y:t[0].Y+this.FontOption.Size*i/2+2},this.PtTop={X:t[0].X,Y:t[0].Y-this.FontOption.Size*i/2-2};var r={X:this.PtButtom.X,Y:this.PtButtom.Y}}var n=this.Canvas.measureText(this.Text).width;this.TextRect={},this.TextRect.Left=t[0].X-n/2,this.TextRect.Top=t[0].Y-this.FontOption.Size*i/2,this.TextRect.Width=n,this.TextRect.Height=this.FontOption.Size*i,this.IsShowNoteText()&&this.DrawText(),this.Canvas.restore(),this.DrawPoint([r])}}}},this.DrawText=function(){this.Canvas.font=this.GetFontString(this.NoteFontOption);var t=0,e=this.Canvas.measureText("æ").width,a=this.Frame.GetBorder(),i=C(),r=this.Frame.IsHScreen,n=this.NoteWidth,o=[];if(we.IsNonEmptyArray(this.AryNoteText))for(var s=0;s<this.AryNoteText.length;++s){var l=this.AryNoteText[s];if(l)if(t>0&&(t+=this.LineSpace),l.Text){var h=this.GetMultiLineText(l.Text,n);if(h&&we.IsNonEmptyArray(h.AryText))for(var u=0;u<h.AryText.length;++u){u>0&&(t+=this.LineSpace);var c=h.AryText[u];o.push(c),t+=e}}else o.push({Text:""}),t+=e}else t=e;var f={Width:n+this.NoteMargin.Left+this.NoteMargin.Right,Height:t+this.NoteMargin.Top+this.NoteMargin.Bottom,ArrowType:0};r?(f.Left=this.PtTop.X-f.Width/2-this.PtCenter.X,f.Top=this.PtTop.Y-f.Height-this.ArrowSize-this.PtCenter.Y,f.Right=f.Left+f.Width,f.Bottom=f.Top+f.Height,f.Arrow={X:this.PtTop.X-this.PtCenter.X,Y:this.PtTop.Y-this.PtCenter.Y},this.PtCenter.X+t+this.FontOption.Size*i/2+2+this.ArrowSize>a.RightEx&&(f.Top=this.PtButtom.Y+this.ArrowSize+this.PointRadius*i-this.PtCenter.Y,f.Bottom=f.Top+f.Height,f.Arrow.X=this.PtButtom.X-this.PtCenter.X,f.Arrow.Y=this.PtButtom.Y-this.PtCenter.Y,f.ArrowType=1)):(f.Left=this.PtTop.X-f.Width/2,f.Top=this.PtTop.Y-f.Height-this.ArrowSize,f.Right=f.Left+f.Width,f.Bottom=f.Top+f.Height,f.Arrow={X:this.PtTop.X,Y:this.PtTop.Y},f.Left<a.Left?(f.Left=a.Left,f.Right=f.Left+f.Width):f.Right>a.Right&&(f.Right=a.Right,f.Left=f.Right-f.Width),f.Top<a.TopEx&&(f.Top=this.PtButtom.Y+this.ArrowSize+this.PointRadius*i,f.Bottom=f.Top+f.Height,f.Arrow.X=this.PtButtom.X,f.Arrow.Y=this.PtButtom.Y,f.ArrowType=1)),this.DrawNoteBG(f),this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.fillStyle=this.NoteTextColor;for(var d=f.Left+this.NoteMargin.Left,D=f.Top+this.NoteMargin.Top,s=0;s<o.length;++s){var l=o[s];l&&(l.Text?(this.Canvas.fillText(l.Text,d,D),D+=e):D+=e,D+=this.LineSpace)}},this.DrawNoteBG=function(t){if(this.Canvas.fillStyle=this.NoteBGColor,0==t.ArrowType||1==t.ArrowType){var e=new Path2D;if(0==t.ArrowType){e.moveTo(t.Left,t.Bottom),e.lineTo(t.Left,t.Top),e.lineTo(t.Right,t.Top),e.lineTo(t.Right,t.Bottom);var a=t.Arrow.X+.6*this.ArrowSize;e.lineTo(a,t.Bottom),e.lineTo(t.Arrow.X,t.Arrow.Y);var a=t.Arrow.X-.6*this.ArrowSize;e.lineTo(a,t.Bottom)}else{e.moveTo(t.Left,t.Top),e.lineTo(t.Left,t.Bottom),e.lineTo(t.Right,t.Bottom),e.lineTo(t.Right,t.Top);var a=t.Arrow.X+.6*this.ArrowSize;e.lineTo(a,t.Top),e.lineTo(t.Arrow.X,t.Arrow.Y);var a=t.Arrow.X-.6*this.ArrowSize;e.lineTo(a,t.Top)}e.closePath(),this.Canvas.fill(e),this.NoteBorderColor&&(this.Canvas.strokeStyle=this.NoteBorderColor,this.Canvas.stroke(e))}else this.Canvas.fillRect(t.Left,t.Top,t.Width,t.Height)},this.IsShowNoteText=function(){if(this.GetActiveDrawPicture){var t=this.GetActiveDrawPicture();return t.Move.Guid==this.Guid||t.Select.Guid==this.Guid||t.MoveOn.Guid==this.Guid}return!1},this.GetTextFont=function(){if(!this.FontOption||!this.FontOption.Family||this.FontOption.Size<=0)return null;var t="";return this.FontOption.Size>=0&&(t+=this.FontOption.Size*C()+"px "),t+=this.FontOption.Family},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;if(!this.Frame.Data)return-1;if(!this.TextRect)return-1;var a=0;this.Option&&this.Option.Zoom>=1&&(a=this.Option.Zoom*C());var i={Left:this.TextRect.Left-a,Top:this.TextRect.Top-a,Width:this.TextRect.Width+2*a,Height:this.TextRect.Height+2*a};return i.Right=i.Left+i.Width,i.Bottom=i.Top+i.Height,t>i.Left&&t<i.Right&&e>i.Top&&e<i.Bottom?100:-1},this.GetCursorType=function(t){return 100==t?"pointer":null}}function Qa(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawAnchoredText",this.PointCount=1,this.AryText=[{Text:"è¾å¥åå®¹"}],this.TextColor=So.ChartDrawAnchoredText.TextColor,this.FontOption={Family:So.ChartDrawAnchoredText.FontOption.Family,Size:So.ChartDrawAnchoredText.FontOption.Size,Weight:So.ChartDrawAnchoredText.FontOption.Weight,Style:So.ChartDrawAnchoredText.FontOption.Style},this.TextMaxWidth=So.ChartDrawAnchoredText.TextMaxWidth,this.LineSpace=So.ChartDrawAnchoredText.LineSpace,this.BGColor=So.ChartDrawAnchoredText.BGColor,this.BorderColor=So.ChartDrawAnchoredText.BorderColor,this.TextMargin={Left:So.ChartDrawAnchoredText.TextMargin.Left,Top:So.ChartDrawAnchoredText.TextMargin.Top,Bottom:So.ChartDrawAnchoredText.TextMargin.Bottom,Right:So.ChartDrawAnchoredText.TextMargin.Right},this.TextRect,this.SetOption=function(t){t&&(t.TextColor&&(this.TextColor=t.TextColor),t.Text&&(this.Text=t.Text),t.FontOption&&this.SetFont(this.FontOption,t.FontOption),we.IsNumber(t.TextMaxWidth)&&(this.TextMaxWidth=t.TextMaxWidth),we.IsNonEmptyArray(t.AryText)&&(this.AryText=this.CloneArrayText(t.AryText)))},this.ExportStorageData=function(){var t=this.ExportBaseData(),e=this.Value[0];return t.Value=[{XValue:e.XValue,YValue:e.YValue}],t.FontOption={},this.SetFont(t.FontOption,this.FontOption),t.BGColor=this.BGColor,t.TextColor=this.TextColor,t.BorderColor=this.BorderColor,t.LineSpace=this.LineSpace,t.TextMaxWidth=this.TextMaxWidth,t.TextMargin={Left:this.TextMargin.Left,Top:this.TextMargin.Right,Bottom:this.TextMargin.Bottom,Right:this.TextMargin.Right},t.AryText=this.CloneArrayText(this.AryText),t},this.ImportStorageData=function(t){if(t.TextMargin){var e=t.TextMargin;we.IsNumber(e.Left)&&(this.TextMargin.Left=e.Left),we.IsNumber(e.Top)&&(this.TextMargin.Top=e.Top),we.IsNumber(e.Bottom)&&(this.TextMargin.Bottom=e.Bottom),we.IsNumber(e.Right)&&(this.TextMargin.Right=e.Right)}t.TextColor&&(this.TextColor=t.TextColor),this.BGColor=t.BGColor,this.BorderColor=t.BorderColor,this.TextMaxWidth=t.TextMaxWidth,we.IsNumber(t.LineSpace)&&(this.LineSpace=t.LineSpace),this.AryText=this.CloneArrayText(t.AryText)},this.Draw=function(){if(this.TextRect=null,!(this.Status<2)&&1==this.Point.length&&this.Frame&&!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint();t&&1==t.length&&(this.ClipFrame(),this.DrawMultiLineText(t[0]),this.Canvas.restore())}},this.ValueToPoint=function(){if(!this.Frame)return!1;var t=this.Value[0],e=this.XYValueToPoint(t.XValue,t.YValue);this.Point=[e]},this.PointToValue=function(){if(!this.Frame)return!1;var t=this.Frame.GetBorder();if(this.Frame.IsHScreen){var e=t.LeftEx,a=t.Top,i=t.RightEx-e,r=t.Bottom-a,n=this.Point[0],o=(n.X-e)/i,s=(n.Y-a)/r;this.Value[0]={XValue:s,YValue:o}}else{var e=t.Left,a=t.TopEx,i=t.Right-e,r=t.BottomEx-a,n=this.Point[0],s=(n.X-e)/i,o=(n.Y-a)/r;this.Value[0]={XValue:s,YValue:o}}},this.XYValueToPoint=function(t,e){if(!this.Frame)return null;var a=this.Frame.IsHScreen,i=this.Frame.GetBorder();if(a){var r=i.LeftEx,n=i.Top,o=i.RightEx-r,s=i.Bottom-n,l=e*o+r,h=t*s+n;return{X:l,Y:h}}var r=i.Left,n=i.TopEx,o=i.Right-r,s=i.BottomEx-n,l=t*o+r,h=e*s+n;return{X:l,Y:h}},this.CalculateDrawPoint=function(t){if(this.Status<2)return null;if(1!=this.Point.length||!this.Frame)return null;var e=[];if(10==this.Status){var a=this.Value[0],i=this.XYValueToPoint(a.XValue,a.YValue);e.push(i)}else e=this.Point;return e},this.DrawMultiLineText=function(t){if(we.IsNonEmptyArray(this.AryText)){var e=0;this.Canvas.font=this.GetFontString(this.FontOption);var a=this.Canvas.measureText("æ").width,i=(this.Frame.GetBorder(),C(),this.Frame.IsHScreen),r={X:t.X,Y:t.Y};i&&(this.Canvas.translate(r.X,r.Y),this.Canvas.rotate(90*Math.PI/180),r.X=0,r.Y=0);for(var n=[],o=0,s=0;s<this.AryText.length;++s){var l=this.AryText[s];if(l)if(e>0&&(e+=this.LineSpace),this.TextMaxWidth>50&&l.Text){var h=this.GetMultiLineText(l.Text,this.TextMaxWidth);if(h&&we.IsNonEmptyArray(h.AryText))for(var u=0;u<h.AryText.length;++u){u>0&&(e+=this.LineSpace);var c=h.AryText[u];n.push(c),e+=a}}else{if(l.Text){var f=this.Canvas.measureText(l.Text).width+2;o<f&&(o=f)}n.push({Text:l.Text}),e+=a}}this.TextMaxWidth>50&&(o=this.TextMaxWidth);var d={Left:r.X,Bottom:r.Y,Height:e+this.TextMargin.Top+this.TextMargin.Bottom,Width:o+this.TextMargin.Left+this.TextMargin.Right};d.Top=d.Bottom-d.Height,d.Right=d.Left+d.Width,this.DrawBG(d),this.Canvas.fillStyle=this.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="top";for(var D=d.Left+this.TextMargin.Left,m=d.Top+this.TextMargin.Top,s=0;s<n.length;++s){var l=n[s];l&&(l.Text?(this.Canvas.fillText(l.Text,D,m),m+=a):m+=a,m+=this.LineSpace)}i&&(d.Left=t.X,d.Top=t.Y,d.Width=e+this.TextMargin.Top+this.TextMargin.Bottom,d.Height=o+this.TextMargin.Left+this.TextMargin.Right,d.Right=d.Left+d.Width,d.Bottom=d.Top+d.Height),this.TextRect=d;var p={X:d.Left+d.Width/2,Y:d.Bottom};this.DrawPoint([p])}},this.DrawBG=function(t){if(this.BGColor||this.BorderColor){var e=new Path2D;e.rect(t.Left,t.Top,t.Width,t.Height),this.BGColor&&(this.Canvas.fillStyle=this.BGColor,this.Canvas.fill(e)),this.BorderColor&&(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.stroke(e))}},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;if(!this.TextRect)return-1;var a=this.TextRect;return t>a.Left&&t<a.Right&&e>a.Top&&e<a.Bottom?100:-1},this.GetCursorType=function(t){return 100==t?"pointer":null}}function $a(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPriceLabel",this.PointCount=1,this.OnlyMoveXIndex=!0,this.TextColor=So.ChartDrawPriceLabel.TextColor,this.FontOption={Family:So.ChartDrawPriceLabel.FontOption.Family,Size:So.ChartDrawPriceLabel.FontOption.Size,Weight:So.ChartDrawPriceLabel.FontOption.Weight,Style:So.ChartDrawPriceLabel.FontOption.Style},this.BGColor=So.ChartDrawPriceLabel.BGColor,this.BorderColor=So.ChartDrawPriceLabel.BorderColor,this.LabelOffset={X:10,Y:20},this.TextMargin={Left:So.ChartDrawPriceLabel.TextMargin.Left,Top:So.ChartDrawPriceLabel.TextMargin.Top,Bottom:So.ChartDrawPriceLabel.TextMargin.Bottom,Right:So.ChartDrawPriceLabel.TextMargin.Right},this.TextRect,this.SetOption=function(t){if(t&&(t.TextColor&&(this.TextColor=t.TextColor),t.BGColor&&(this.BGColor=t.BGColor),t.BorderColor&&(this.BorderColor=t.BorderColor),t.FontOption&&this.SetFont(this.FontOption,t.FontOption),t.LabelOffset)){var e=t.LabelOffset;we.IsNumber(e.X)&&(this.LabelOffset.X=e.X),we.IsNumber(e.Y)&&(this.LabelOffset.Y=e.Y)}},this.ExportStorageData=function(){var t=this.ExportBaseData(),e=this.Value[0];return t.Value=[{XValue:e.XValue,YValue:e.YValue}],t.BGColor=this.BGColor,t.TextColor=this.TextColor,t.BorderColor=this.BorderColor,t.TextMargin={Left:this.TextMargin.Left,Top:this.TextMargin.Right,Bottom:this.TextMargin.Bottom,Right:this.TextMargin.Right},t},this.ImportStorageData=function(t){if(t.TextMargin){var e=t.TextMargin;we.IsNumber(e.Left)&&(this.TextMargin.Left=e.Left),we.IsNumber(e.Top)&&(this.TextMargin.Top=e.Top),we.IsNumber(e.Bottom)&&(this.TextMargin.Bottom=e.Bottom),we.IsNumber(e.Right)&&(this.TextMargin.Right=e.Right)}t.TextColor&&(this.TextColor=t.TextColor),this.BGColor=t.BGColor,this.BorderColor=t.BorderColor},this.Draw=function(){if(this.TextRect=null,!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&1==t.length){var e=t[0];this.ClipFrame(),this.DrawPriceLabel(e),this.Canvas.restore(),this.DrawPoint([e])}}},this.DrawPriceLabel=function(t){var e=this.GetFontString(this.FontOption);if(e){var a,i,r=this.Frame.IsHScreen,n=(C(),0);r?(this.Canvas.translate(t.X,t.Y),this.Canvas.rotate(90*Math.PI/180),a={X:0,Y:0},i=this.Frame.GetYData(t.X,!1),n=1):(a={X:t.X,Y:t.Y},i=this.Frame.GetYData(t.Y,!1));var o=2;this.Symbol&&0==this.Frame.Identify&&(o=sr(this.Symbol));var s=i.toFixed(o);this.Canvas.font=e;var l=a.X+this.LabelOffset.X,h=a.Y-this.LabelOffset.Y,u=this.Canvas.measureText("æ").width,c=this.Canvas.measureText(s).width,f={Left:l,Bottom:h,Width:c+this.TextMargin.Left+this.TextMargin.Right,Height:u+this.TextMargin.Top+this.TextMargin.Bottom};f.Top=f.Bottom-f.Height,f.Right=f.Left+f.Width,this.DrawBG(f,a);var d=f.Left+f.Width/2,D=f.Top+f.Height/2;this.Canvas.textAlign="center",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(s,d,D+n),r?(this.TextRect={Left:t.X+this.LabelOffset.Y,Top:t.Y+this.LabelOffset.X,Width:u+this.TextMargin.Top+this.TextMargin.Bottom,Height:c+this.TextMargin.Left+this.TextMargin.Right},this.TextRect.Right=this.TextRect.Left+this.TextRect.Width,this.TextRect.Bottom=this.TextRect.Top+this.TextRect.Height):this.TextRect=f}},this.DrawBG=function(t,e){var a=C(),i=new Path2D;i.moveTo(t.Left,t.Bottom),i.lineTo(t.Left,t.Top),i.lineTo(t.Right,t.Top),i.lineTo(t.Right,t.Bottom);var r=t.Left+15*a;i.lineTo(r,t.Bottom),i.lineTo(e.X,e.Y),r=t.Left+5*a,i.lineTo(r,t.Bottom),i.closePath(),this.BGColor&&(this.Canvas.fillStyle=this.BGColor,this.Canvas.fill(i)),this.BorderColor&&(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.stroke(i)),this.BGColor&&(this.Canvas.beginPath(),this.Canvas.arc(e.X,e.Y,2*a,0,360,!1),this.Canvas.fillStyle=this.BGColor,this.Canvas.fill())},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;if(!this.TextRect)return-1;var a=this.TextRect;return t>a.Left&&t<a.Right&&e>a.Top&&e<a.Bottom?100:-1},this.GetCursorType=function(t){return 100==t?"pointer":null}}function ti(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawPriceNote",this.PointCount=2,this.GetXYCoordinate=this.GetXYCoordinate_default,this.IsPointIn=this.IsPointIn_XYValue_Line,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.FontOption={Family:So.ChartDrawPriceNote.FontOption.Family,Size:So.ChartDrawPriceNote.FontOption.Size,Weight:So.ChartDrawPriceNote.FontOption.Weight,Style:So.ChartDrawPriceNote.FontOption.Style},this.TextMargin={Left:So.ChartDrawPriceNote.TextMargin.Left,Top:So.ChartDrawPriceNote.TextMargin.Top,Bottom:So.ChartDrawPriceNote.TextMargin.Bottom,Right:So.ChartDrawPriceNote.TextMargin.Right},this.BGColor=So.ChartDrawPriceNote.BGColor,this.BorderColor=So.ChartDrawPriceNote.BorderColor,this.TextColor=So.ChartDrawPriceNote.TextColor,this.BorderRoundRadius=3,this.TextRect,this.SetOption=function(t){t&&(t.TextColor&&(this.TextColor=t.TextColor),t.BGColor&&(this.BGColor=t.BGColor),t.BorderColor&&(this.BorderColor=t.BorderColor),t.FontOption&&this.SetFont(this.FontOption,t.FontOption))},this.ExportStorageData=function(){var t=this.ExportBaseData();t.Value=[];for(var e=0;e<this.Value.length;++e){var a=this.Value[e];t.Value.push({XValue:a.XValue,YValue:a.YValue})}return t.BGColor=this.BGColor,t.TextColor=this.TextColor,t.BorderColor=this.BorderColor,t.TextMargin={Left:this.TextMargin.Left,Top:this.TextMargin.Right,Bottom:this.TextMargin.Bottom,Right:this.TextMargin.Right},t},this.ImportStorageData=function(t){if(t.TextMargin){var e=t.TextMargin;we.IsNumber(e.Left)&&(this.TextMargin.Left=e.Left),we.IsNumber(e.Top)&&(this.TextMargin.Top=e.Top),we.IsNumber(e.Bottom)&&(this.TextMargin.Bottom=e.Bottom),we.IsNumber(e.Right)&&(this.TextMargin.Right=e.Right)}t.TextColor&&(this.TextColor=t.TextColor),this.BGColor=t.BGColor,this.BorderColor=t.BorderColor},this.Draw=function(){if(this.LinePoint=[],this.TextRect=null,!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1];this.LineWidth=1,this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.RestoreLineWidth(),this.DrawPriceLabel(e,a);var i={Start:e,End:a};this.LinePoint.push(i),this.DrawPoint(t),this.Canvas.restore()}}},this.DrawPriceLabel=function(t,e){if(this.GetFontString(this.FontOption)){var a=2;this.Symbol&&0==this.Frame.Identify&&(a=sr(this.Symbol));var i=C(),r={X:e.X,Y:e.Y},n=this.Frame.GetYData(t.Y,!1),o=n.toFixed(a),s=this.Canvas.measureText("æ").width,l=this.Canvas.measureText(o).width,h=this.CalculateAngle(t.X,t.Y,e.X,e.Y);if(h>=0&&h<=45||h>=315&&h<=360){var u=r.X,c=r.Y,f={Left:u,Bottom:c,Width:l+this.TextMargin.Left+this.TextMargin.Right,Height:s+this.TextMargin.Top+this.TextMargin.Bottom};f.Bottom=c+f.Height/2,f.Top=f.Bottom-f.Height,f.Right=f.Left+f.Width}else if(h>45&&h<=135){var u=r.X,c=r.Y,f={Left:u,Bottom:c,Width:l+this.TextMargin.Left+this.TextMargin.Right,Height:s+this.TextMargin.Top+this.TextMargin.Bottom};f.Left=u-f.Width/2,f.Top=f.Bottom-f.Height,f.Right=f.Left+f.Width}else if(h>=135&&h<=225){var u=r.X,c=r.Y,f={Width:l+this.TextMargin.Left+this.TextMargin.Right,Height:s+this.TextMargin.Top+this.TextMargin.Bottom};f.Bottom=c+f.Height/2,f.Top=f.Bottom-f.Height,f.Right=u,f.Left=f.Right-f.Width}else{if(!(h>=225&&h<=315))return;var u=r.X,d=r.Y,f={Width:l+this.TextMargin.Left+this.TextMargin.Right,Height:s+this.TextMargin.Top+this.TextMargin.Bottom};f.Top=d,f.Bottom=f.Top+f.Height,f.Left=u-f.Width/2,f.Right=f.Left-f.Width}this.DrawBG(f),this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.TextColor;var D=f.Left+this.TextMargin.Left,m=f.Top+f.Height/2;this.Canvas.fillText(o,D,m+0),this.BGColor&&(this.Canvas.beginPath(),this.Canvas.arc(t.X,t.Y,2*i,0,360,!1),this.Canvas.fillStyle=this.BGColor,this.Canvas.fill()),this.TextRect=f}},this.DrawBG=function(t){if(t){var e=C(),a=this.BorderRoundRadius*e,i=new Path2D;i.roundRect(p(t.Left),p(t.Top),g(t.Width),g(t.Height),[a]),this.BGColor&&(this.Canvas.fillStyle=this.BGColor,this.Canvas.fill(i)),this.BorderColor&&(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.stroke(i))}},this.IsPointIn=function(t,e){if(!this.Frame||10!=this.Status)return-1;if(!this.TextRect)return-1;var a=this.TextRect;return t>a.Left&&t<a.Right&&e>a.Top&&e<a.Bottom?1:this.IsPointIn_XYValue_Line(t,e)}}function ei(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDrawFibWedge",this.PointCount=3,this.Font=12*C()+"px å¾®è½¯éé»",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.PointToValue_Default=this.PointToValue,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.LastPoint,this.AreaConfig={AryData:[{Value:.236,Color:"rgb(242,52,69)",Enable:!0},{Value:.382,Color:"rgb(255,152,0)",Enable:!0},{Value:.5,Color:"rgb(76,175,80)",Enable:!0},{Value:.618,Color:"rgb(8,153,129)",Enable:!0},{Value:.786,Color:"rgb(0,188,212)",Enable:!0},{Value:1,Color:"rgb(120,123,134)",Enable:!0},{Value:1.618,Color:"rgb(41,98,255)",Enable:!1},{Value:2.618,Color:"rgb(242,54,69)",Enable:!1}],Opacity:.3},this.TextAngle,this.Radius,this.CalculateHypotenuse=function(t,e){var a=t.X-e.X,i=t.Y-e.Y;return Math.sqrt(a*a+i*i)},this.MagnetXY=function(t){var e={IsFixedX:this.OnlyMoveXIndex};if(this.Option&&this.Option.Magnet&&this.Option.Magnet.Enable&&this.IsSupportMagnet&&0==this.Frame.Identify){var a=-1;2==this.Status&&(a=1),we.IsNumber(this.MovePointIndex)&&(a=this.MovePointIndex),a>=0&&(e.Magnet={Enable:!0,PointIndex:a,Distance:this.Option.Magnet.Distance,Type:this.Option.Magnet.Type})}this.AdjustPoint(t,e)},this.CalculateAllPoint=function(t,e,a){var i=[];i.push({X:t.X,Y:t.Y}),i.push({X:e.X,Y:e.Y}),this.MagnetXY(i),i.push({X:a.X,Y:a.Y});var r=this.CalculateHypotenuse(i[0],i[1]),n=i[0].X-i[2].X,o=i[0].Y-i[2].Y,s=Math.sqrt(n*n+o*o),l=n*r/s,h=o*r/s;return i[2].X=i[0].X-l,i[2].Y=i[0].Y-h,i},this.ValueToPoint_V2=function(t){if(!we.IsNonEmptyArray(t))return null;if(!this.Frame)return null;var e=this.Frame.Data;if(!e)return null;for(var a=this.Frame.IsHScreen,i=[],r=0;r<t.length;++r){var n=t[r],o=new E;a?(o.Y=this.Frame.GetXFromIndex(n.XValue-e.DataOffset,!1),o.X=this.Frame.GetYFromData(n.YValue,!1)):(o.X=this.Frame.GetXFromIndex(n.XValue-e.DataOffset,!1),o.Y=this.Frame.GetYFromData(n.YValue,!1)),i[r]=o}return i},this.CalculateDrawPoint=function(t){if(this.Status<2)return null;if(!this.Point.length||!this.Frame)return null;var e=[];if(2==this.Status)if(2==this.PointStatus&&this.LastPoint)e=this.CalculateAllPoint(this.Point[0],this.Point[1],this.LastPoint);else{for(var a=0;a<this.Point.length&&a<2;++a){var i=this.Point[a];e.push({X:i.X,Y:i.Y})}this.MagnetXY(e)}else if(10==this.Status){var r=this.Frame.Data;if(!r)return null;for(var n=this.Frame.XPointCount,o=0,s=this.Frame.IsHScreen,a=0;a<this.Value.length;++a){var i=this.Value[a],l=i.XValue-r.DataOffset;(l<0||l>=n)&&++o;var h=new E;s?(h.Y=this.Frame.GetXFromIndex(i.XValue-r.DataOffset,!1),h.X=this.Frame.GetYFromData(i.YValue,!1)):(h.X=this.Frame.GetXFromIndex(i.XValue-r.DataOffset,!1),h.Y=this.Frame.GetYFromData(i.YValue,!1)),e.push(h)}}else 20==this.Status&&(e=this.CalculateAllPoint(this.Point[0],this.Point[1],this.Point[2]));return e},this.Draw=function(){if(this.LinePoint=[],this.TextAngle=null,this.Radius=null,!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!1});if(we.IsNonEmptyArray(t)){var e=t.slice(0);this.CalculateLines(e),this.ClipFrame(),this.DrawArea(e),this.DrawLines(this.LinePoint),this.DrawPoint(e),this.DrawTitle(e),this.Canvas.restore()}}},this.DrawArea=function(t){if(3==t.length&&this.AreaConfig&&we.IsNonEmptyArray(this.AreaConfig.AryData)){var e=t[0],a=this.CalculateHypotenuse(e,t[1]),i=this.CalculateAngle(e.X,e.Y,t[1].X,t[1].Y),r=this.CalculateAngle(e.X,e.Y,t[2].X,t[2].Y),n=i-r;if(n<0&&(n+=360),n>180){var o=i;i=r,r=o}var s=i-(i-r)/2;i-r<0&&(s-=180);for(var l=null,h=0;h<this.AreaConfig.AryData.length;++h){var u=this.AreaConfig.AryData[h];if(u.Enable){var C=a*u.Value,c=u.Color,f=aa.ColorToRGBA(c,this.AreaConfig.Opacity),d=new Path2D;we.IsNumber(l)?(d.arc(e.X,e.Y,l,Math.PI/180*(360-i),Math.PI/180*(360-r)),d.arc(e.X,e.Y,C,Math.PI/180*(360-r),Math.PI/180*(360-i),!0)):(d.moveTo(e.X,e.Y),d.arc(e.X,e.Y,C,Math.PI/180*(360-i),Math.PI/180*(360-r))),this.Canvas.fillStyle=f,this.Canvas.fill(d),l=C}}for(var h=0;h<this.AreaConfig.AryData.length;++h){var u=this.AreaConfig.AryData[h];if(u.Enable){var C=a*u.Value,c=u.Color,d=new Path2D;d.arc(e.X,e.Y,C,Math.PI/180*(360-i),Math.PI/180*(360-r)),this.Canvas.strokeStyle=c,this.Canvas.stroke(d)}}this.Radius=a,this.TextAngle=s}},this.DrawTitle=function(t){if(3==t.length&&this.AreaConfig&&we.IsNonEmptyArray(this.AreaConfig.AryData)){var e=t[0],a=Math.PI/180*(360-this.TextAngle);this.Canvas.font=this.Font;for(var i=0;i<this.AreaConfig.AryData.length;++i){var r=this.AreaConfig.AryData[i];if(r.Enable){var n=this.Radius*r.Value,o=r.Color,s=""+r.Value,l=Math.sin(a)*n+e.Y,h=Math.cos(a)*n+e.X;this.Canvas.fillStyle=o,this.Canvas.textAlign="left",this.Canvas.textBaseline="top",this.Canvas.fillText(s,h+2,l+2)}}}},this.SetLastPoint=function(t){this.LastPoint={X:t.X,Y:t.Y}},this.DrawLines=function(t){if(we.IsNonEmptyArray(t))for(var e=0;e<t.length;++e){var a=t[e];this.DrawLine(a.Start,a.End)}},this.CalculateLines=function(t){if(2===t.length){var e={Start:new E,End:new E};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e)}else if(3===t.length){var e={Start:new E,End:new E};e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[1].Y,e.End.X=t[1].X,this.LinePoint.push(e),e={Start:new E,End:new E},e.Start.Y=t[0].Y,e.Start.X=t[0].X,e.End.Y=t[2].Y,e.End.X=t[2].X,this.LinePoint.push(e)}},this.IsPointIn=function(t,e,a){if(10!=this.Status)return-1;var i=this.IsPointInXYValue(t,e,this.AryPoint,a);return i>=0?i:(i=this.IsPointInLine(t,e,a),i>=0?100:-1)},this.IsPointInDots=function(t,e,a,i){if(!we.IsNonEmptyArray(a))return-1;if(!this.Frame)return-1;if(!this.Frame.Data)return-1;if(!this.Value)return-1;var r=5;i&&we.IsNumber(i.Zoom)?r+=i.Zoom:this.Option&&we.IsNumber(this.Option.Zoom)&&(r+=this.Option.Zoom);this.Frame.IsHScreen;r*=C();for(var n=0;n<a.length;++n){var o=a[n],s=new Path2D;if(s.arc(o.X,o.Y,r,0,360),this.Canvas.isPointInPath(s,t,e))return n}return-1},this.GetCursorType=function(t){return 2==t?"ns-resize":null},this.PointToValue=function(){if(!this.Frame)return!1;var t=this.Point[2],e={X:t.X,Y:t.Y};if(!this.PointToValue_Default())return!1;var a=[this.Value[0],this.Value[1]],i=this.ValueToPoint_V2(a),r=this.CalculateHypotenuse(i[0],i[1]),n=i[0].X-e.X,o=i[0].Y-e.Y,s=Math.sqrt(n*n+o*o),l=n*r/s,h=o*r/s;this.Point[2].X=i[0].X-l,this.Point[2].Y=i[0].Y-h;var a=this.PointToValue_V2([this.Point[2]],{Type:1});return!!a&&(this.Value[2]=a[0],!0)},this.PointToValue_V2=function(t,e){return this.Frame?"MinuteFrame"==this.Frame.ClassName||"MinuteHScreenFrame"==this.Frame.Class?this.PointToValue_Minute_V2(t,e):this.PointToValue_KLine_V2(t,e):null},this.PointToValue_KLine_V2=function(t,e){if(!we.IsNonEmptyArray(t))return null;if(!this.Frame)return null;var a=this.Frame.Data;if(!a)return null;var i=[];if(this.Frame.IsHScreen)for(var r=0;r<t.length;++r){var n=t[r],o=this.Frame.GetXData(n.Y,!1)+a.DataOffset,s=this.Frame.GetYData(n.X,!1),l={XValue:o,YValue:s,Type:1};i[r]=l}else for(var r=0;r<t.length;++r){var n=t[r],o=this.Frame.GetXData(n.X,!1)+a.DataOffset,s=this.Frame.GetYData(n.Y,!1),l={XValue:o,YValue:s,Type:1};i[r]=l}return i}}function ai(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartFibRetracement",this.PointCount=2,this.Font=12*C()+"px å¾®è½¯éé»",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.PointToValue_Default=this.PointToValue,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.LineDash=[6,3],this.LineWidth=1,this.EnableBGColor=!0,this.ExtendLine={Left:!1,Right:!1},this.AreaConfig={AryData:[{Value:0,Color:"rgb(128,128,128)",Enable:!0},{Value:.236,Color:"rgb(242,52,69)",Enable:!0},{Value:.382,Color:"rgb(255,152,0)",Enable:!0},{Value:.5,Color:"rgb(76,175,80)",Enable:!0},{Value:.618,Color:"rgb(8,153,129)",Enable:!0},{Value:.786,Color:"rgb(0,188,212)",Enable:!0},{Value:1,Color:"rgb(120,123,134)",Enable:!0},{Value:1.618,Color:"rgb(41,98,255)",Enable:!0},{Value:2.618,Color:"rgb(242,54,69)",Enable:!1}],Opacity:.3},this.SetOption=function(t){if(t){if(t.Font&&(this.Font=t.Font),t.LineWidth&&(this.LineWidth=t.LineWidth),t.LineDash&&(this.LineDash=t.LineDash),we.IsBool(t.EnableBGColor)&&(this.EnableBGColor=t.EnableBGColor),t.ExtendLine){var e=t.ExtendLine;we.IsBool(e.Left)&&(this.ExtendLine.Left=e.Left),we.IsBool(e.Right)&&(this.ExtendLine.Left=e.Right)}t.AreaConfig&&(this.AreaConfig=t.AreaConfig)}},this.ExportStorageData=function(){var t=this.ExportBaseData();t.Value=[];for(var e=0;e<this.Value.length&&e<this.PointCount;++e){var a=this.Value[e];t.Value.push({XValue:a.XValue,YValue:a.YValue})}return t.Font=this.Font,t.EnableBGColor=this.EnableBGColor,t.LineDash=this.LineDash,t.ExtendLine={Left:this.ExtendLine.Left,Right:this.ExtendLine.Right},t.AreaConfig=I(this.AreaConfig),t},this.ImportStorageData=function(t){t.Font&&(this.Font=t.Font),t.LineDash&&(this.LineDash=t.LineDash),we.IsBool(t.EnableBGColor)&&(this.EnableBGColor=t.EnableBGColor),t.ExtendLine&&(this.ExtendLine=t.ExtendLine),t.AreaConfig&&(this.AreaConfig=t.AreaConfig)},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=!0;(this.ExtendLine.Left||this.ExtendLine.Right)&&(t=!1);var e=this.CalculateDrawPoint({IsCheckX:t,IsCheckY:t});if(e&&2==e.length){this.ClipFrame();var a=e[0],i=e[1];this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.setLineDash(this.LineDash),this.Canvas.beginPath(),this.Canvas.moveTo(a.X,a.Y),this.Canvas.lineTo(i.X,i.Y),this.Canvas.stroke(),this.Canvas.setLineDash([]),this.DrawBlock(a,i),this.RestoreLineWidth();var r={Start:a,End:i};this.LinePoint.push(r),this.DrawPoint(e),this.Canvas.restore()}}},this.GetArrayAreaConfig=function(){for(var t=[],e=0;e<this.AreaConfig.AryData.length;++e){var a=this.AreaConfig.AryData[e];a.Enable&&t.push(a)}return t.sort(function(t,e){return e.Value-t.Value}),t},this.DrawBlock=function(t,e){var a=Math.min(t.Y,e.Y),i=Math.max(t.Y,e.Y),r=Math.min(t.X,e.X),n=Math.max(t.X,e.X),o=i-a;this.ExtendLine.Right&&(n=this.Frame.ChartBorder.GetRight()),this.ExtendLine.Left&&(r=this.Frame.ChartBorder.GetLeft());var s=this.GetArrayAreaConfig(),l=null,h=null;this.Canvas.font=this.Font,this.ExtendLine.Left?this.Canvas.textAlign="left":this.Canvas.textAlign="right",this.Canvas.textBaseline="bottom";for(var u=0;u<s.length;++u){var C=s[u],c=i-o*C.Value;if(yValue=this.Frame.GetYData(c,!1),c=p(c),this.EnableBGColor&&we.IsNumber(l)){var f={Left:r,Right:n,Top:l,Bottom:c};f.Width=f.Right-f.Left,f.Height=f.Bottom-f.Top,this.Canvas.fillStyle=h,this.Canvas.fillRect(f.Left,f.Top,f.Width,f.Height)}this.Canvas.strokeStyle=C.Color,this.Canvas.beginPath(),this.Canvas.moveTo(r,c),this.Canvas.lineTo(n,c),this.Canvas.stroke();var d={Start:{X:r,Y:c},End:{X:n,Y:c}};this.LinePoint.push(d);var D=C.Value+" ("+yValue.toFixed(2)+")";this.Canvas.fillStyle=C.Color,this.ExtendLine.Left?this.Canvas.fillText(D,r+2,c-2):this.Canvas.fillText(D,r-2,c-2),l=c,h=aa.ColorToRGBA(C.Color,this.AreaConfig.Opacity)}}}function ii(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartFibSpeedResistanceFan",this.PointCount=2,this.Font=12*C()+"px å¾®è½¯éé»",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.PointToValue_Default=this.PointToValue,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.LineWidth=1,this.EnableBGColor=!0,this.AreaConfig={AryYData:[{Value:0,Color:"rgb(128,128,128)",Enable:!0},{Value:.25,Color:"rgb(242,52,69)",Enable:!0},{Value:.382,Color:"rgb(255,152,0)",Enable:!0},{Value:.5,Color:"rgb(76,175,80)",Enable:!0},{Value:.618,Color:"rgb(8,153,129)",Enable:!0},{Value:.75,Color:"rgb(0,188,212)",Enable:!0},{Value:1,Color:"rgb(120,123,134)",Enable:!0}],AryXData:[{Value:0,Color:"rgb(128,128,128)",Enable:!0},{Value:.25,Color:"rgb(242,52,69)",Enable:!0},{Value:.382,Color:"rgb(255,152,0)",Enable:!0},{Value:.5,Color:"rgb(76,175,80)",Enable:!0},{Value:.618,Color:"rgb(8,153,129)",Enable:!0},{Value:.75,Color:"rgb(0,188,212)",Enable:!0},{Value:1,Color:"rgb(120,123,134)",Enable:!0}],Opacity:.3},this.SetOption=function(t){t&&(t.Font&&(this.Font=t.Font),t.LineWidth&&(this.LineWidth=t.LineWidth),we.IsBool(t.EnableBGColor)&&(this.EnableBGColor=t.EnableBGColor),t.AreaConfig&&(this.AreaConfig=t.AreaConfig))},this.ExportStorageData=function(){var t=this.ExportBaseData();t.Value=[];for(var e=0;e<this.Value.length&&e<this.PointCount;++e){var a=this.Value[e];t.Value.push({XValue:a.XValue,YValue:a.YValue})}return t.Font=this.Font,t.EnableBGColor=this.EnableBGColor,t.AreaConfig=I(this.AreaConfig),t},this.ImportStorageData=function(t){t.Font&&(this.Font=t.Font),we.IsBool(t.EnableBGColor)&&(this.EnableBGColor=t.EnableBGColor),t.AreaConfig&&(this.AreaConfig=t.AreaConfig)},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!1,IsCheckY:!1});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1];this.SetLineWidth(),this.DrawBlock(a,e),this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.GetQuadrant=function(t,e){return t.X<e.X&&t.Y>e.Y?1:t.X>e.X&&t.Y>e.Y?2:t.X<e.X&&t.Y<e.Y?4:3},this.DrawBlock=function(t,e){var a=e,i=e.X-t.X,r=e.Y-t.Y,n=this.GetQuadrant(a,t),o=this.GetArrayAreaConfig(this.AreaConfig.AryYData),s=null,l=null;this.Canvas.font=this.Font;var h=this.Frame.GetBorder(),u={X:h.Left,Y:h.TopEx},C={X:h.Right,Y:h.TopEx},c={X:h.Left,Y:h.BottomEx},f={X:h.Right,Y:h.BottomEx},d=4;1==n||4==n?(this.Canvas.textAlign="right",d=-4):(this.Canvas.textAlign="left",d=4),this.Canvas.textBaseline="middle";for(var D=0;D<o.length;++D){var m=o[D],p=m.Value*r+t.Y,v=this.CalculateExtendLineEndPoint([a,{X:t.X,Y:p}]);s&&(this.Canvas.beginPath(),this.Canvas.moveTo(a.X,a.Y),this.Canvas.lineTo(s.X,s.Y),1==n?s.X>=C.X&&v.X<C.X&&this.Canvas.lineTo(C.X,C.Y):2==n?s.X<=u.X&&v.X>u.X&&this.Canvas.lineTo(u.X,u.Y):3==n?s.X<=c.X&&v.X>c.X&&this.Canvas.lineTo(c.X,c.Y):4==n&&s.X>=f.X&&v.X<f.X&&this.Canvas.lineTo(f.X,f.Y),this.Canvas.lineTo(v.X,v.Y),this.Canvas.closePath(),this.Canvas.fillStyle=l,this.Canvas.fill()),this.Canvas.strokeStyle=m.Color,this.Canvas.beginPath(),this.Canvas.moveTo(a.X,a.Y),this.Canvas.lineTo(v.X,v.Y),this.Canvas.stroke(),this.LinePoint.push({Start:a,End:v}),1!=m.Value&&(this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(a.X,p),this.Canvas.lineTo(t.X,p),this.Canvas.stroke()),s=v,l=aa.ColorToRGBA(m.Color,this.AreaConfig.Opacity);var g=""+m.Value;this.Canvas.fillStyle=m.Color,this.Canvas.fillText(g,a.X+d,p)}var T=this.GetArrayAreaConfig(this.AreaConfig.AryXData),s=null;this.Canvas.textAlign="center",3==n||4==n?(this.Canvas.textBaseline="bottom",d=-5):(this.Canvas.textBaseline="top",d=5);for(var D=0;D<T.length;++D){var m=T[D],I=m.Value*i+t.X,v=this.CalculateExtendLineEndPoint([a,{X:I,Y:t.Y}]);s&&(this.Canvas.beginPath(),this.Canvas.moveTo(a.X,a.Y),this.Canvas.lineTo(s.X,s.Y),1==n?s.X<C.X&&v.X>=C.X&&this.Canvas.lineTo(C.X,C.Y):2==n?s.X>u.X&&v.X<=u.X&&this.Canvas.lineTo(u.X,u.Y):3==n?s.X>c.X&&v.X<=c.X&&this.Canvas.lineTo(c.X,c.Y):4==n&&s.X<f.X&&v.X>=f.X&&this.Canvas.lineTo(f.X,f.Y),this.Canvas.lineTo(v.X,v.Y),this.Canvas.closePath(),this.Canvas.fillStyle=l,this.Canvas.fill()),this.Canvas.strokeStyle=m.Color,this.Canvas.beginPath(),this.Canvas.moveTo(a.X,a.Y),this.Canvas.lineTo(v.X,v.Y),this.Canvas.stroke(),this.LinePoint.push({Start:a,End:v}),1!=m.Value&&(this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(I,a.Y),this.Canvas.lineTo(I,t.Y),this.Canvas.stroke()),s=v,l=aa.ColorToRGBA(m.Color,this.AreaConfig.Opacity);var g=""+m.Value;this.Canvas.fillStyle=m.Color,this.Canvas.fillText(g,I,a.Y+d)}},this.GetArrayAreaConfig=function(t){for(var e=[],a=0;a<t.length;++a){var i=t[a];i.Enable&&e.push(i)}return e.sort(function(t,e){return e.Value-t.Value}),e}}function ri(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartPriceRange",this.PointCount=2,this.Font=12*C()+"px å¾®è½¯éé»",this.TextColor=this.LineColor,this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.PointToValue_Default=this.PointToValue,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.LineWidth=1,this.EnableBGColor=!0,this.BGColor=aa.ColorToRGBA(this.LineColor,.15),this.ExtendLine={Left:!1,Right:!1},this.Label={TextColor:"rgb(0,0,0)",BGColor:"rgb(211,211,211)",EnableBGColor:!0,LeftMargin:5,RightMargin:5},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=!0;(this.ExtendLine.Left||this.ExtendLine.Right)&&(t=!1);var e=this.CalculateDrawPoint({IsCheckX:t,IsCheckY:t});if(e&&2==e.length){this.ClipFrame();var a=e[0],i=e[1];this.SetLineWidth(),this.DrawRange(a,i),this.RestoreLineWidth(),this.DrawPoint(e),this.Canvas.restore()}}},this.DrawRange=function(t,e){var a=Math.min(t.Y,e.Y),i=Math.max(t.Y,e.Y),r=Math.min(t.X,e.X),n=Math.max(t.X,e.X),o=t.X+(e.X-t.X)/2;if(this.ExtendLine.Right&&(n=this.Frame.ChartBorder.GetRight()),this.ExtendLine.Left&&(r=this.Frame.ChartBorder.GetLeft()),this.EnableBGColor){var s={Left:r,Top:a,Right:n,Bottom:i};s.Width=s.Right-s.Left,s.Height=s.Bottom-s.Top,this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(s.Left,s.Top,s.Width,s.Height)}this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(r,p(a)),this.Canvas.lineTo(n,p(a)),this.Canvas.moveTo(r,p(i)),this.Canvas.lineTo(n,p(i)),this.Canvas.moveTo(p(o),p(a)),this.Canvas.lineTo(p(o),p(i)),this.Canvas.stroke(),this.LinePoint.push({Start:{X:r,Y:a},End:{X:n,Y:a}}),this.LinePoint.push({Start:{X:r,Y:i},End:{X:n,Y:i}}),this.LinePoint.push({Start:{X:o,Y:a},End:{X:o,Y:i}}),this.DrawArrow({X:p(o),Y:t.Y},{X:p(o),Y:e.Y});var l=this.Frame.ChartBorder.GetBottomEx(),h=this.Frame.ChartBorder.GetTopEx(),u=this.Frame.GetYData(t.Y,!1),C=this.Frame.GetYData(e.Y,!1),c=C-u,f=c/u*100,d=c.toFixed(2)+" ("+f.toFixed(2)+"%)";this.Canvas.font=this.Font;var D=this.GetFontHeight(),m=this.Canvas.measureText(d).width+4+(this.Label.LeftMargin+this.Label.RightMargin),v={Left:o-m/2,Width:m,Height:D+2};if(v.Top=c>0?e.Y-v.Height-4:e.Y+4,v.Bottom=v.Top+v.Height,c>0?v.Top<=h&&(v.Top=h,v.Bottom=v.Top+v.Height):v.Bottom>=l&&(v.Bottom=l,v.Top=v.Bottom-v.Height),this.Label.EnableBGColor){var T=new Path2D;T.roundRect(p(v.Left),p(v.Top),g(v.Width),g(v.Height),[3]),this.Canvas.fillStyle=this.Label.BGColor,this.Canvas.fill(T)}this.Canvas.fillStyle=this.Label.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",this.Canvas.fillText(d,v.Left+2+this.Label.LeftMargin,v.Bottom-2)}}function ni(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDateRange",this.PointCount=2,this.Font=12*C()+"px å¾®è½¯éé»",this.TextColor=this.LineColor,this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.PointToValue_Default=this.PointToValue,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.LineWidth=1,this.EnableBGColor=!0,this.BGColor=aa.ColorToRGBA(this.LineColor,.15),this.ExtendLine={Top:!1,Bottom:!1},this.Label={TextColor:"rgb(0,0,0)",BGColor:"rgb(211,211,211)",EnableBGColor:!0,LeftMargin:5,RightMargin:5},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1];this.SetLineWidth(),this.DrawRange(e,a),this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.DrawRange=function(t,e){var a=Math.min(t.Y,e.Y),i=Math.max(t.Y,e.Y),r=Math.min(t.X,e.X),n=Math.max(t.X,e.X),o=t.Y+(e.Y-t.Y)/2,s=t.X+(e.X-t.X)/2;if(this.ExtendLine.Top&&(a=this.Frame.ChartBorder.GetTopEx()),this.ExtendLine.Bottom&&(i=this.Frame.ChartBorder.GetBottomEx()),this.EnableBGColor){var l={Left:r,Top:a,Right:n,Bottom:i};l.Width=l.Right-l.Left,l.Height=l.Bottom-l.Top,this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(l.Left,l.Top,l.Width,l.Height)}this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(p(r),a),this.Canvas.lineTo(p(r),i),this.Canvas.moveTo(p(n),a),this.Canvas.lineTo(p(n),i),this.Canvas.moveTo(p(r),p(o)),this.Canvas.lineTo(p(n),p(o)),this.Canvas.stroke(),this.LinePoint.push({Start:{X:r,Y:a},End:{X:r,Y:i}}),this.LinePoint.push({Start:{X:n,Y:a},End:{X:n,Y:i}}),this.LinePoint.push({Start:{X:r,Y:o},End:{X:n,Y:o}}),this.DrawArrow({X:t.X,Y:p(o)},{X:e.X,Y:p(o)});var h=this.Frame.ChartBorder.GetBottomEx(),u=this.Frame.ChartBorder.GetTopEx(),C=this.Frame.GetXData(t.X,!1),c=this.Frame.GetXData(e.X,!1),f=this.Frame.GetYData(t.Y,!1),d=this.Frame.GetYData(e.Y,!1),D=d-f,m=c-C+1,v=m+" bars";this.Canvas.font=this.Font;var T=this.GetFontHeight(),I=this.Canvas.measureText(v).width+4+(this.Label.LeftMargin+this.Label.RightMargin),S={Left:s-I/2,Top:e.Y+4,Width:I,Height:T+2};if(S.Top=D>0?e.Y-S.Height-4:e.Y+4,S.Bottom=S.Top+S.Height,D>0?S.Top<=u&&(S.Top=u,S.Bottom=S.Top+S.Height):S.Bottom>=h&&(S.Bottom=h,S.Top=S.Bottom-S.Height),this.Label.EnableBGColor){var x=new Path2D;x.roundRect(p(S.Left),p(S.Top),g(S.Width),g(S.Height),[3]),this.Canvas.fillStyle=this.Label.BGColor,this.Canvas.fill(x)}this.Canvas.fillStyle=this.Label.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",this.Canvas.fillText(v,S.Left+2+this.Label.LeftMargin,S.Bottom-2)}}function oi(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartDatePriceRange",this.PointCount=2,this.Font=12*C()+"px å¾®è½¯éé»",this.TextColor=this.LineColor,this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.PointToValue_Default=this.PointToValue,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.LineWidth=1,this.EnableBGColor=!0,this.BGColor=aa.ColorToRGBA(this.LineColor,.15),this.ExtendLine={Top:!1,Bottom:!1},this.Label={TextColor:"rgb(0,0,0)",BGColor:"rgb(211,211,211)",EnableBGColor:!0,LeftMargin:5,RightMargin:5},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!0});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1];this.SetLineWidth(),this.DrawRange(e,a),this.RestoreLineWidth(),this.DrawPoint(t),this.Canvas.restore()}}},this.DrawRange=function(t,e){var a=Math.min(t.Y,e.Y),i=Math.max(t.Y,e.Y),r=Math.min(t.X,e.X),n=Math.max(t.X,e.X),o=t.Y+(e.Y-t.Y)/2,s=t.X+(e.X-t.X)/2;if(this.ExtendLine.Top&&(a=this.Frame.ChartBorder.GetTopEx()),this.ExtendLine.Bottom&&(i=this.Frame.ChartBorder.GetBottomEx()),this.EnableBGColor){var l={Left:r,Top:a,Right:n,Bottom:i};l.Width=l.Right-l.Left,l.Height=l.Bottom-l.Top,this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(l.Left,l.Top,l.Width,l.Height)}this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(p(r),a),this.Canvas.lineTo(p(r),i),this.Canvas.moveTo(p(n),a),this.Canvas.lineTo(p(n),i),this.Canvas.moveTo(p(r),p(o)),this.Canvas.lineTo(p(n),p(o)),this.Canvas.moveTo(p(s),p(a)),this.Canvas.lineTo(p(s),p(i)),this.Canvas.stroke(),this.LinePoint.push({Start:{X:r,Y:a},End:{X:r,Y:i}}),this.LinePoint.push({Start:{X:n,Y:a},End:{X:n,Y:i}}),this.LinePoint.push({Start:{X:r,Y:o},End:{X:n,Y:o}}),this.DrawArrow({X:t.X,Y:p(o)},{X:e.X,Y:p(o)}),this.DrawArrow({X:p(s),Y:t.Y},{X:p(s),Y:e.Y});var h=this.Frame.ChartBorder.GetBottomEx(),u=this.Frame.ChartBorder.GetTopEx(),C=this.Frame.GetXData(t.X,!1),c=this.Frame.GetXData(e.X,!1),f=c-C+1,d=this.Frame.GetYData(t.Y,!1),D=this.Frame.GetYData(e.Y,!1),m=D-d,v=m/d*100,T=[m.toFixed(2)+" ("+v.toFixed(2)+"%)",f+" bars"];this.Canvas.font=this.Font;for(var I=this.GetFontHeight(),S=0,x=0;x<T.length;++x){var b=T[x],y=this.Canvas.measureText(b).width;S<y&&(S=y)}S+=this.Label.LeftMargin+this.Label.RightMargin;var E={Left:s-S/2,Top:e.Y+4,Width:S,Height:T.length*I+2};if(E.Top=m>0?e.Y-E.Height-4:e.Y+4,E.Bottom=E.Top+E.Height,m>0?E.Top<=u&&(E.Top=u,E.Bottom=E.Top+E.Height):E.Bottom>=h&&(E.Bottom=h,E.Top=E.Bottom-E.Height),this.Label.EnableBGColor){var w=new Path2D;w.roundRect(p(E.Left),p(E.Top),g(E.Width),g(E.Height),[3]),this.Canvas.fillStyle=this.Label.BGColor,this.Canvas.fill(w)}this.Canvas.fillStyle=this.Label.TextColor,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom";for(var F=E.Bottom-2,x=0;x<T.length;++x){var b=T[x];this.Canvas.fillText(b,E.Left+2+this.Label.LeftMargin,F),F-=I}}}function si(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartInfoLine",this.PointCount=2,this.Font=12*C()+"px å¾®è½¯éé»",this.IsPointIn=this.IsPointIn_XYValue_Line,this.GetXYCoordinate=this.GetXYCoordinate_default,this.IsShowYCoordinate=!1,this.CopyData=this.CopyData_default,this.OnlyMoveXIndex=!0,this.IsSupportMagnet=!0,this.LabelConfig={Font:12*C()+"px å¾®è½¯éé»",BGColor:"rgba(135, 206 ,250,0.95)",Mergin:{Left:10,Right:10,Top:10,Bottom:8},LineSpace:5,TextAlign:1},this.FormatLabelTextCallback=null,this.SetOption=function(t){if(t.LineColor&&(this.LineColor=t.LineColor),t.PointColor&&(this.PointColor=t.PointColor),t.Label){var e=t.Label,a=this.LabelConfig;e.Font&&(a.Font=e.Font),e.BGColor&&(a.BGColor=e.BGColor),we.IsNumber(e.LineSpace)&&(a.LineSpace=e.LineSpace),we.IsNumber(e.TextAlign)&&(a.TextAlign=e.TextAlign),e.Mergin&&S(a.Mergin,e.Mergin)}t.FormatLabelTextCallback&&(this.FormatLabelTextCallback=t.FormatLabelTextCallback)},this.Draw=function(){if(this.LinePoint=[],!this.IsFrameMinSize()&&this.IsShow){var t=this.CalculateDrawPoint({IsCheckX:!0,IsCheckY:!1});if(t&&2==t.length){this.ClipFrame();var e=t[0],a=t[1];this.SetLineWidth(),this.Canvas.strokeStyle=this.LineColor,this.Canvas.beginPath(),this.Canvas.moveTo(e.X,e.Y),this.Canvas.lineTo(a.X,a.Y),this.Canvas.stroke(),this.RestoreLineWidth();var i={Start:e,End:a};this.LinePoint.push(i),this.DrawPoint(t);var r={};r.Config=this.LabelConfig,r.PtStart=e,r.PtEnd=a,this.Canvas.restore(),this.DrawLabel(r)}}},this.DrawLabel=function(t){if(this.FormatLabelTextCallback&&(t.AryPoint=this.Point,10!=this.Status?t.AryValue=this.PointToKLine(this.Point):t.AryValue=this.Value,t.Data=this.Frame.Data,this.FormatLabelTextCallback(t),we.IsNonEmptyArray(t.AryText))){this.CalculateLabelSize(t);var e=t.PtStart,a=t.PtEnd;e.X>a.X&&(e=t.PtEnd,a=t.PtStart);var i=(t.Config,t.PtStart.X+(t.PtEnd.X-t.PtStart.X)/2),r=t.PtStart.Y+(t.PtEnd.Y-t.PtStart.Y)/2;if(e.Y<a.Y){var n={Left:i,Bottom:r,Width:t.Width,Height:t.Height};n.Right=n.Left+n.Width,n.Top=n.Bottom-n.Height}else{var n={Left:i,Top:r,Width:t.Width,Height:t.Height};n.Right=n.Left+n.Width,n.Bottom=n.Top+n.Height}this.DrawDefaultLabel(t,n)}}}function li(){this.newMethod=aa,this.newMethod(),delete this.newMethod,this.ClassName="ChartBarsPattern",this.PointCount=2,this.KData=null,this.Draw=function(){}}function hi(){this.DrawData=new Vn.default,this.StorageKey,this.GetEventCallback,this.Load=function(t){if(t){this.StorageKey=t;var e=localStorage[this.StorageKey];if(Xn.Chart.Log("[ChartDrawStorage::Load] Load to localStorage, key="+this.StorageKey+", cache="+e),e&&"string"==typeof e){var a=JSON.parse(e);for(var i in a){var r=a[i],n=new Vn.default;for(var o in r.Value){var s=r.Value[o];n.set(s.Key,s.Value)}this.DrawData.set(r.Key,n)}}}},this.Save=function(){if(this.StorageKey){var t=[],e=!0,a=!1,i=void 0;try{for(var r,n=(0,Gn.default)(this.DrawData);!(e=(r=n.next()).done);e=!0){var o=r.value,s=o[0],l=o[1],h={Key:s,Value:[]},u=!0,C=!1,c=void 0;try{for(var f,d=(0,Gn.default)(l);!(u=(f=d.next()).done);u=!0){var D=f.value;D[1]&&!1===D[1].EnableSave||h.Value.push({Key:D[0],Value:D[1]})}}catch(t){C=!0,c=t}finally{try{!u&&d.return&&d.return()}finally{if(C)throw c}}we.IsNonEmptyArray(h.Value)&&t.push(h)}}catch(t){a=!0,i=t}finally{try{!e&&n.return&&n.return()}finally{if(a)throw i}}Xn.Chart.Log("[ChartDrawStorage::Save] save to localStorage, key="+this.StorageKey);var m=(0,Bn.default)(t);localStorage[this.StorageKey]=m}},this.GetItemKey=function(t){return t.Symbol+"-"+t.Period},this.SaveDrawData=function(t){var e=this.GetItemKey(t),a=t.ExportStorageData();if(a){if(this.DrawData.has(e))Xn.Chart.Log("[ChartDrawStorage::SaveDrawData] Upate: key, drawPicture, data",e,t,a),this.DrawData.get(e).set(a.Guid,a);else{Xn.Chart.Log("[ChartDrawStorage::SaveDrawData] Insert: key, drawPicture, data",e,t,a);var i=new Vn.default;i.set(a.Guid,a),this.DrawData.set(e,i)}Xn.Chart.Log("[ChartDrawStorage::SaveDrawData] All draw dataï¼ ",this.DrawData),this.Save()}},this.DeleteDrawData=function(t){var e=this.GetItemKey(t);if(this.DrawData.has(e)){var a=this.DrawData.get(e);a.has(t.Guid)&&(a.delete(t.Guid),this.Save())}},this.Clear=function(){this.DrawData=new Vn.default,this.Save()},this.GetDrawData=function(t){var e=[],a=this.GetItemKey(t);if(!this.DrawData.has(a))return e;var i=this.DrawData.get(a),r=!0,n=!1,o=void 0;try{for(var s,l=(0,Gn.default)(i);!(r=(s=l.next()).done);r=!0){var h=s.value;e.push(h[1])}}catch(t){n=!0,o=t}finally{try{!r&&l.return&&l.return()}finally{if(n)throw o}}return e}}function ui(){this.Data=[[1e-6,2e-6,1e-6,1e-7],[2e-6,4e-6,2e-6,2e-7],[4e-6,5e-6,4e-6,1e-7],[5e-6,1e-5,5e-6,5e-7],[1e-5,2e-5,1e-5,1e-6],[2e-5,4e-5,2e-5,2e-6],[4e-5,5e-5,4e-5,1e-6],[5e-5,1e-4,5e-5,5e-6],[1e-4,2e-4,1e-4,1e-5],[2e-4,4e-4,2e-4,2e-5],[4e-4,5e-4,4e-4,1e-5],[5e-4,.001,5e-4,5e-5],[.001,.002,.001,1e-4],[.002,.004,.002,2e-4],[.004,.005,.004,1e-4],[.005,.01,.005,5e-4],[.01,.02,.01,.001],[.02,.04,.02,.002],[.04,.05,.04,.001],[.05,.1,.05,.005],[.1,.2,.1,.01],[.2,.4,.2,.02],[.4,.5,.4,.01],[.5,1,.5,.05],[1,2,.5,.05],[2,4,.5,.05],[4,5,.5,.05],[5,10,.5,.05],[10,20,10,2],[20,40,20,5],[40,50,40,2],[50,100,50,10],[100,200,100,10],[200,400,200,20],[400,500,400,10],[500,1e3,500,50],[1e3,2e3,1e3,50],[2e3,4e3,2e3,50],[4e3,5e3,4e3,50],[5e3,1e4,5e3,100],[1e4,2e4,1e4,1e3],[2e4,4e4,1e4,1e3],[4e4,5e4,1e4,1e3],[5e4,1e5,1e4,1e3],[1e5,2e5,1e5,1e4],[2e5,4e5,1e5,1e4],[4e5,5e5,1e5,1e4],[5e5,1e6,1e5,1e4],[1e6,2e6,1e6,1e5],[2e6,4e6,1e6,1e5],[4e6,5e6,1e6,1e5],[5e6,1e7,1e6,1e5],[1e7,2e7,1e7,1e6],[2e7,4e7,1e7,1e6],[4e7,5e7,1e7,1e6],[5e7,1e8,1e7,1e6],[1e8,2e8,1e8,1e7],[2e8,4e8,1e8,1e7],[4e8,5e8,1e8,1e7],[5e8,1e9,1e8,1e7],[1e9,2e9,1e9,1e8],[2e9,4e9,1e9,1e8],[4e9,5e9,1e9,1e8],[5e9,1e10,1e9,1e8]],this.Find=function(t){for(var e in this.Data){var a=this.Data[e];if(t>a[0]&&t<=a[1]){var i={};return i.FixInterval=a[2],i.Increase=a[3],i}}return null}}function Ci(){this.newMethod=ui,this.newMethod(),delete this.newMethod,this.Data=[[1e-6,2e-6,1e-6,1e-7],[2e-6,4e-6,2e-6,2e-7],[4e-6,5e-6,4e-6,1e-7],[5e-6,1e-5,5e-6,5e-7],[1e-5,2e-5,1e-5,1e-6],[2e-5,4e-5,2e-5,2e-6],[4e-5,5e-5,4e-5,1e-6],[5e-5,1e-4,5e-5,5e-6],[1e-4,2e-4,1e-4,1e-5],[2e-4,4e-4,2e-4,2e-5],[4e-4,5e-4,4e-4,1e-5],[5e-4,.001,5e-4,5e-5],[.001,.002,.001,1e-4],[.002,.004,.002,1e-4],[.004,.005,.004,1e-4],[.005,.01,.005,5e-4],[.01,.02,.01,.001],[.02,.04,.02,.001],[.04,.05,.04,.001],[.05,.1,.05,.001],[.1,.2,.1,.01],[.2,.4,.2,.01],[.4,.5,.2,.01],[.5,.8,.2,.01],[.8,1,.5,.01],[1,2,.5,.05],[2,4,.5,.05],[4,5,.5,.05],[5,10,.5,.05],[10,12,10,2],[20,40,20,5],[40,50,40,2],[50,100,50,10],[100,200,100,10],[200,400,200,20],[400,500,400,10],[500,1e3,500,50],[1e3,2e3,1e3,50],[2e3,4e3,2e3,50],[4e3,5e3,4e3,50],[5e3,1e4,5e3,100],[1e4,2e4,1e4,1e3],[2e4,4e4,2e4,2e3],[4e4,5e4,4e4,1e3],[5e4,1e5,5e4,5e3],[1e5,2e5,1e5,1e4],[2e5,4e5,2e5,2e4],[4e5,5e5,4e5,1e4],[5e5,1e6,5e5,5e4],[1e6,2e6,1e6,1e5],[2e6,4e6,2e6,2e5],[4e6,5e6,4e6,1e5],[5e6,1e7,5e6,5e5],[1e7,2e7,1e7,1e6],[2e7,4e7,2e7,2e6],[4e7,5e7,4e7,1e6],[5e7,1e8,5e7,5e6],[1e8,2e8,1e8,1e7],[2e8,4e8,2e8,2e7],[4e8,5e8,4e8,1e7],[5e8,1e9,5e8,5e7],[1e9,2e9,1e9,1e8],[2e9,4e9,2e9,2e8],[4e9,5e9,4e9,1e8],[5e9,1e10,5e9,5e8]]}function ci(){this.IsDOMFrameTitle=!1,this.IsDOMFrameToolbar=!1,this.KLineToolbar={ModifyIndex:!0,ChangeIndex:!0,CloseIndex:!0,OverlayIndex:!1,MaxMinWindow:!0,TitleWindow:!0,ExportData:!1,IsShowOverlayToolbar:!0,IsShowOverlayFrame:!0},this.MinuteToolbar={ModifyIndex:!0,ChangeIndex:!0,CloseIndex:!0,OverlayIndex:!0,MaxMinWindow:!0,TitleWindow:!0,ExportData:!1},this.TooltipBGColor="rgb(255, 255, 255)",this.TooltipAlpha=.92,this.PopMinuteChart={BGColor:"rgba(250,250,250,0.95)",BorderColor:"rgb(0,0,0)"},this.SelectRectBGColor="rgba(1,130,212,0.06)",this.UpBarColor="rgb(238,21,21)",this.DownBarColor="rgb(25,158,0)",this.UnchagneBarColor="rgb(0,0,0)",this.EmptyBarBGColor="rgb(255,255,255)",this.HighLowBarColor="rgb(41,98,255)",this.HighLowText={FontName:"arial",MaxSize:30,MinSize:4,Color:"rgb(41,98,255)",MaxText:"9999.9"},this.SplashScreen={BGColor:"rgba(112,128,144,0.5)",Title:"ä¸è½½æ°æ®ä¸­......",TextColor:"rgb(43,54,69)",Font:14*C()+"px å¾®è½¯éé»"},this.HLCArea={HighLineColor:"rgb(242,54,69)",LowLineColor:"rgb(8,153,129)",CloseLineColor:"rgb(224,227,227)",LineWidth:2*C(),UpAreaColor:"rgba(253,214,218, 0.5)",DownAreaColor:"rgba(205,235,230, 0.5)"},this.Minute={},this.Minute.VolBarColor=null,this.Minute.VolTitleColor="rgb(105,105,105)",this.Minute.PriceColor="rgb(50,171,205)",this.Minute.PriceLineWidth=1*C(),this.Minute.AreaPriceColor="rgba(50,171,205,0.1)",this.Minute.AvPriceColor="rgb(238,127,9)",this.Minute.PositionColor="rgb(218,165,32)",this.Minute.FrameSplitTextColor=null,this.Minute.Before={BGColor:"rgba(240,240,240,0.7)",LineColor:"rgb(50,171,205)",VolColor:["rgb(192,192,0)"],AvPriceColor:"rgb(190,190,190)",Point:{Color:"rgb(65,105,225)",Radius:2*C()},CloseIcon:{Family:"iconfont",Text:"î",Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Size:12*C()}},this.Minute.After={BGColor:"rgba(240,240,240,0.7)",LineColor:"rgb(50,171,205)",VolColor:["rgb(192,192,0)"],AvPriceColor:"rgb(190,190,190)",Point:{Color:"rgb(65,105,225)",Radius:2*C()}},this.Minute.NightDay={NightBGColor:"rgba(0,0,0,0.2)",Font:12*C()+"px å¾®è½¯éé»",Day:{Color:"rgb(0,0,0)",BGColor:"rgb(179,179,179)",BorderColor:"rgb(179,179,179)",Margin:{Left:5,Top:2,Bottom:2,Right:5}},Night:{Color:"rgb(0,0,0)",BGColor:"rgb(179,179,179)",BorderColor:"rgb(179,179,179)",Margin:{Left:5,Top:2,Bottom:2,Right:5}}},this.DefaultTextColor="rgb(43,54,69)",this.DefaultTextFont=14*C()+"px å¾®è½¯éé»",this.TitleFont=13*C()+"px å¾®è½¯éé»",this.IndexTitleBGColor="rgb(250,250,250)",this.IndexTitleBorderColor="rgb(180,180,180)",this.IndexTitleBorderMoveOnColor="rgb(0,0,0)",this.IndexTitleBorderStyle=1,this.IndexTitleColor="rgb(43,54,69)",this.IndexTitleSelectedColor="rgb(65,105,225)",this.OverlayIndexTitleBGColor="rgba(255,255,255,0.7)",this.IndexTitleMerginLeft=1,this.IndexTitle={UpDownArrow:{UpColor:"rgb(238,21,21)",DownColor:"rgb(25,158,0)",UnchangeColor:"rgb(0,0,0)"},ArrowType:0,EnableIndexArrow:!0,NameArrow:{Color:"rgb(43,54,69)",Space:2,Symbol:"â¼"}},this.Title={TradeIndexColor:"rgb(105,105,105)",ColorIndexColor:"rgb(112,128,144)",VolColor:"rgb(43,54,69)",AmountColor:"rgb(43,54,69)",DateTimeColor:"rgb(43,54,69)",SettingColor:"rgb(43,54,69)",NameColor:"rgb(43,54,69)",TurnoverRateColor:"rgb(43,54,69)",PositionColor:"rgb(43,54,69)"},this.UpTextColor="rgb(238,21,21)",this.DownTextColor="rgb(25,158,0)",this.UnchagneTextColor="rgb(0,0,0)",this.CloseLineColor="rgb(0,191,255)",this.CloseLineAreaColor=["rgba(0,191,255,0.8)","rgba(0,191,255,0.2)"],this.CloseLineWidth=2,this.FrameBorderPen="rgb(225,236,242)",this.MultiDayBorderPen="rgb(225,236,242)",this.FrameSplitPen="rgb(225,236,242)",this.FrameDotSplitPen="rgb(105,105,105)",this.FrameYLineDash=null,this.FrameXLineDash=null,this.FrameSplitTextColor="rgb(117,125,129)",this.FrameSplitTextFont=14*C()+"px å¾®è½¯éé»",this.FrameTitleBGColor="rgb(246,251,253)",this.SelFrameBorderColor="rgb(130, 130, 130)",this.Frame={XBottomOffset:2*C(),YTopOffset:2*C(),YTextPadding:[2,2],EnableRemoveZero:!0,StringFormat:0},this.ToolbarButtonStyle=0,this.FrameLogo={TextColor:"rgb(178,34,34)",Font:"bold "+16*C()+"px å¾®è½¯éé»",Text:"*ä»å­¦ä¹ ä½¿ç¨*",BGColor:"rgba(230,230,230, 0.5)"},this.Frame.PercentageText={PriceColor:"rgb(117,125,129)",PercentageColor:"rgb(117,125,129)",SplitColor:"rgb(117,125,129)",Font:14*C()+"px å¾®è½¯éé»"},this.FrameLogarithmic={OpenPriceFont:"bold "+14*C()+"px å¾®è½¯éé»",MinInterval:45*C()},this.FrameSplitIncrease={Increase:.1},this.FrameSplitAverage={Count:4},this.FrameGoldenSection={Golden:[0,.191,.382,.5,.618,.809,1]},this.FrameLatestPrice={TextColor:"rgb(255,255,255)",UpBarColor:"rgb(238,21,21)",DownBarColor:"rgb(25,158,0)",UnchagneBarColor:"rgb(0,0,0)",BGAlpha:.6,EmptyBGColor:"rgb(255,255,255)",OverlayTextColor:"rgb(255,255,255)"},this.FrameMargin=4,this.FrameLeftMargin=2,this.FrameRightMargin=2,this.DragSubFrameBorder={TopBorderHeight:6*C(),MinFrameHeight:50*C()},this.OverlayFrame={BolderPen:"rgb(190,190,190)",TitleColor:"rgb(105,105,105)",TitleFont:11*C()+"px arial"},this.CorssCursorBGColor="rgb(43,54,69)",this.CorssCursorTextColor="rgb(255,255,255)",this.CorssCursorTextFont=14*C()+"px å¾®è½¯éé»",this.CorssCursorHPenColor="rgb(130,130,130)",this.CorssCursorVPenColor="rgb(130,130,130)",this.CorssCursorXRangeBGColor="rgba(100,149,237,0.3)",this.CorssCursor={RightButton:{BGColor:"rgb(43,54,69)",PenColor:"rgb(255,255,255)",Icon:{Text:"î£",Color:"rgb(255,255,255)",Family:"iconfont",Size:18}},RightMargin:{Left:2,Right:2,Top:5,Bottom:3}},this.LockBGColor="rgb(220, 220, 220)",this.LockTextColor="rgb(210, 34, 34)",this.Domain="http://127.0.0.1:8080",this.CacheDomain="http://127.0.0.1:8087",this.PyIndexDomain="http://127.0.0.1:8088",this.KLine={MaxMin:{Font:12*C()+"px å¾®è½¯éé»",Color:"rgb(43,54,69)",RightArrow:"â",LeftArrow:"â",HighYOffset:0,LowYOffset:0},Info:{Investor:{ApiUrl:"/API/NewsInteract",IconFont:{Family:"iconfont",Text:"î±",HScreenText:"î",Color:"#1c65db"}},Announcement:{ApiUrl:"/API/ReportList",IconFont:{Family:"iconfont",Text:"î³",HScreenText:"î",Color:"#f5a521"},IconFont2:{Family:"iconfont",Text:"î´",HScreenText:"î",Color:"#ed7520"}},Pforecast:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"î®",HScreenText:"î",Color:"#986cad"}},Research:{ApiUrl:"/API/InvestorRelationsList",IconFont:{Family:"iconfont",Text:"î²",HScreenText:"î",Color:"#19b1b7"}},BlockTrading:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"î°",HScreenText:"î",Color:"#f39f7c"}},TradeDetail:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"î¯",HScreenText:"î",Color:"#b22626"}},IconLibrary:{Family:"iconfont",Icon:[{Text:"î°",HScreenText:"î",Color:"#f39f7c"},{Text:"î²",HScreenText:"î",Color:"#19b1b7"},{Text:"î¯",HScreenText:"î",Color:"#b22626"},{Text:"î´",HScreenText:"î",Color:"#ed7520"}]}},NumIcon:{Color:"rgb(251,80,80)",Family:"iconfont",Text:["î","î»","î","î½","î¿","î","î","î","î","î","î¶","îµ","î·","î¸","î¹","îº","î¼","î¾","î","î","î"]},TradeIcon:{Family:"iconfont",Buy:{Color:"rgb(255,15,4)",Text:"î",HScreenText:"î"},Sell:{Color:"rgb(64,122,22)",Text:"î",HScreenText:"î"}}},this.VirtualKLine={Color:"rgb(100,100,100)",LineDash:[2,2]},this.PriceGapStyple={Line:{Color:"rgb(186,186,186)"},Text:{Color:"rgb(105,105,105)",Font:12*C()+"px å¾®è½¯éé»"}},this.OrderFlow={UpColor:{BG:"rgb(223,191,180)",Border:"rgb(196,84,86)"},DownColor:{BG:"rgb(176,212,184)",Border:"rgb(66,94,74)"},UnchagneColor:{BG:"rgb(216,221,177)",Border:"rgb(209,172,129)"},Text:{Color:"rgb(92,96,89)",Family:"Arial",FontMaxSize:18,MaxValue:"8888"},Line:{UpDownColor:"rgb(0,0,0)",MiddleColor:"rgb(211,211,211)"},AlwaysShowOrderText:!0,POCGBColor:"rgba(178,34,34,0.8)",AskBarColor:"rgb(14,209,69)",BidBarColor:"rgb(236,28,36)"},this.OrderFlow_Style2={BarWidth:10,UpColor:"rgb(241,55,63)",DownColor:"rgb(75,105,150)",UnchagneColor:"rgb(79,79,79)"},this.OrderFlow_Style3={BarWidth:20,UpColor:"rgb(241,55,63)",DownColor:"rgb(75,105,150)",UnchagneColor:"rgb(79,79,79)"},this.OrderFlow_Style4={KBarWidth:5,UpColor:"rgb(241,55,63)",DownColor:"rgb(75,105,150)",UnchagneColor:"rgb(79,79,79)",VolBarSpace:1,LeftMargin:1,RightMargin:1},this.OrderFlow_Style5={AskBarColor:"rgb(176,22,22)",BidBarColor:"rgb(98,126,176)",LeftMargin:3,RightMargin:2},this.Index={},this.Index.LineColor=["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"],this.OverlaySymbol={Random:0},this.OverlaySymbol.Color=["rgb(38,198,218)","rgb(103,58,183)","rgb(0,191,165)","rgb(130,177,255)"],this.Index.StockHistoryDayApiUrl="http://127.0.0.1:8080/API/StockHistoryDay",this.Index.MarketLongShortApiUrl="http://127.0.0.1:8080/API/FactorTiming",this.Index.MarketAttentionApiUrl="http://127.0.0.1:8080/API/MarketAttention",this.Index.MarketHeatApiUrl="http://127.0.0.1:8080/API/MarketHeat",this.Index.CustomIndexHeatApiUrl="http://127.0.0.1:8080/API/QuadrantCalculate",this.Index.NotSupport={Font:14*C()+"px å¾®è½¯éé»",TextColor:"rgb(52,52,52)"},this.Buttons={CloseOverlayIndex:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"î",Size:12*C(),MerginLeft:3},CloseWindow:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"î",Size:13*C(),MerginLeft:4},ChangeIndex:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"î",Size:13*C(),MerginLeft:4},OverlayIndex:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"î",Size:13*C(),MerginLeft:4},ModifyIndexParam:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"î",Size:13*C(),MerginLeft:4},MaxMinWindow:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"î¥",Size:13*C(),MerginLeft:4},TitleWindow:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"î¦",Size:13*C(),MerginLeft:4},ExportData:{Color:"rgb(0,0,0)",MoveOnColor:"rgb(30,144,255)",Family:"iconfont",Text:"î©",Size:13*C(),MerginLeft:4},Tooltip:{Font:13*C()+"px å¾®è½¯éé»",Color:"rgb(71,71,71)",ColorBG:"rgb(255,255,255)",ColorBorder:"rgb(0,0,0)",BorderRadius:2,Mergin:{Left:4,Right:4,Top:2,Bottom:3}}},this.DrawPicture={LineColor:["rgb(41,98,255)"],PointColor:["rgb(41,98,255)","rgb(89,135,255)","rgb(255,255,255)"],XYCoordinate:{BGColor:"rgba(203,216,255,0.5)",TextBGColor:"rgb(52,101,255)",TextColor:"rgb(255,255,255)",Font:14*C()+"px å¾®è½¯éé»"},PointType:2,IsShowPoint:!1},this.ChartOX={Family:"iconfont",Up:{Color:"rgb(178,34,34)",Text:"î"},Down:{Color:"rgb(0,206,209)",Text:"î"},SquareLineColor:"rgb(119,136,153)"},this.KLineTrain={Font:"bold 14px arial",LastDataIcon:{Color:"rgb(0,0,205)",Text:"â¬"},BuyIcon:{Color:"rgb(0,205,102 )",Text:"B"},SellIcon:{Color:"rgb(255,127,36 )",Text:"S"},IconFont:{Family:"iconfont",Buy:{Text:"î",HScreenText:"î",Color:"rgb(255,140,0)"},Sell:{Text:"î",HScreenText:"î",Color:"rgb(6,79,18)"},Last:{Text:"î",HScreenText:"î",Color:"rgb(55,0,255)"}}},this.ChartKLineTable={TextFont:{Family:"Arial",FontMaxSize:25},ItemMergin:{Left:5,Right:5,Top:4,Bottom:2}},this.TooltipPaint={BGColor:"rgba(250,250,250,0.8)",BorderColor:"rgb(120,120,120)",TitleColor:"rgb(79, 79, 79)",TitleFont:13*C()+"px å¾®è½¯éé»",DateTimeColor:"rgb(105 105 105)",VolColor:"rgb(255, 185, 15)",AmountColor:"rgb(79, 79, 79)"},this.PCTooltipPaint={BGColor:"rgba(250,250,250)",BorderColor:"rgb(120,120,120)",TitleColor:"rgb(60,60,60)",TitleFont:12*C()+"px å¾®è½¯éé»",DateTimeColor:"rgb(60,60,60)",VolColor:"rgb(60,60,60)",AmountColor:"rgb(60,60,60)",PositionColor:"rgb(60,60,60)"},this.PCTooltip={LineHeight:25},this.DialogTooltip={BGColor:"rgb(250,250,250)",BorderColor:"rgb(20,20,20)",TitleColor:"rgb(250,250,250)",TitleBGColor:"rgb(200, 66, 69)",VolColor:"rgb(255, 185, 15)",AmountColor:"rgb(79, 79, 79)",DateTimeColor:"rgb(60,60,60)",TurnoverRateColor:"rgb(43,54,69)",PositionColor:"rgb(255,0,255)",TextColor:"rgb(0,0,0)",ValueColor:"rgb(0,0,0)"},this.FloatTooltip={BGColor:"rgb(250,250,250)",BorderColor:"rgb(20,20,20)",VolColor:"rgb(255, 185, 15)",AmountColor:"rgb(79, 79, 79)",DateTimeColor:"rgb(60,60,60)",TurnoverRateColor:"rgb(43,54,69)",PositionColor:"rgb(255,0,255)",TextColor:"rgb(0,0,0)",ValueColor:"rgb(0,0,0)"},this.DialogSelectRect={BGColor:"rgb(250,250,250)",BorderColor:"rgb(20,20,20)",TitleColor:"rgb(0,0,0)",TextColor:"rgb(0,0,0)",ValueColor:"rgb(0,0,0)",VolColor:"rgb(255, 185, 15)",AmountColor:"rgb(79, 79, 79)",TurnoverRateColor:"rgb(43,54,69)",PositionColor:"rgb(255,0,255)"},this.DialogPopKeyboard={BGColor:"rgb(250,250,250)",BorderColor:"rgb(20,20,20)",TitleColor:"rgb(0,0,0)",TitleBGColor:"rgb(200, 66, 69)",Input:{BGColor:"rgb(250,250,250)",TextColor:"rgb(0,0,0)"}},this.DialogSearchIndex={BGColor:"rgb(250,250,250)",BorderColor:"rgb(20,20,20)",TitleColor:"rgb(250,250,250)",TitleBGColor:"rgb(200, 66, 69)",IndexNameColor:"rgb(0,0,0)",GroupNameColor:"rgb(0,0,0)",InputTextColor:"rgb(0,0,0)"},this.DialogModifyIndexParam={BGColor:"rgb(250,250,250)",BorderColor:"rgb(20,20,20)",TitleColor:"rgb(250,250,250)",TitleBGColor:"rgb(200, 66, 69)",ParamNameColor:"rgb(0,0,0)",InputTextColor:"rgb(0,0,0)"},this.Barrage={Font:16*C()+"px å¾®è½¯éé»",Height:20,Color:"RGB(109,109,109)"},this.MinuteInfo={TextColor:"rgb(84,143,255)",Font:14*C()+"px å¾®è½¯éé»",PointColor:"rgb(38,113,254)",LineColor:"rgb(120,167,255)",TextBGColor:"rgba(255,255,255,0.8)",PointRadius:4*C()},this.ChartDrawRuler={TitleColor:null},this.ChartDrawWaveRuler={RulerWidth:10,RulerLineWidth:1,MaxScaleRuler:2,Font:14*C()+"px å¾®è½¯éé»",ScaleRuler:[{Value:0,Text:"0.0%"},{Value:.382,Text:"38.2%"},{Value:.618,Text:"61.8%"},{Value:1,Text:"100%"},{Value:1.618,Text:"161.8%"},{Value:2,Text:"200%"}]},this.ChartDrawWaveRuler2Point={RulerWidth:20,RulerLineWidth:1,MaxScaleRuler:2,Font:14*C()+"px å¾®è½¯éé»",ScaleRuler:[{Value:0,Text:"base"},{Value:.618,Text:"61.8%"},{Value:1,Text:"100%"},{Value:1.618,Text:"161.8%"}]},this.ChartDrawVolProfile={BGColor:"rgba(244,250,254,0.8)",BorderColor:"rgba(255,255,255)",VolLineColor:"rgb(232,5,9)",UpVolColor:"rgba(103,179,238, 0.24)",DownVolColor:"rgba(237,208,105,0.24)",AreaUpColor:"rgb(103,179,238,0.7)",AreaDonwColor:"rgba(237,208,105,0.7)",Text:{Color:"rgb(0,0,0)",Family:"Arial",FontMaxSize:18,FontMinSize:6}},this.ChartVolProfileVisibleRange={VolLineColor:"rgb(232,5,9)",VolLineFont:14*C()+"px å¾®è½¯éé»",VolLineTextColor:"rgb(255,255,255)",UpVolColor:"rgba(103,179,238, 0.24)",DownVolColor:"rgba(237,208,105,0.24)",AreaUpColor:"rgb(103,179,238,0.7)",AreaDonwColor:"rgba(237,208,105,0.7)",Text:{Color:"rgb(0,0,0)",Family:"Arial",FontMaxSize:18,FontMinSize:6},VAHLineColor:"rgb(0,0,255)",VAHTextColor:"rgb(255,255,255)",VALLineColor:"rgb(0,0,255)",VALTextColor:"rgb(255,255,255)",VAFont:14*C()+"px å¾®è½¯éé»"},this.ChartDrawNote={Text:"îª",FontOption:{Family:"iconfont",Size:32},NoteFontOption:{Family:"å¾®è½¯éé»",Size:12,Weight:null,Style:null},NoteWidth:200,NoteMargin:{Left:5,Top:5,Bottom:5,Right:5},NoteBGColor:"rgba(104,114,255,0.7)",NoteTextColor:"rgb(240,240,240)",NoteBorderColor:"rgb(220,220,220)",LineSpace:3,ArrowSize:10},this.ChartDrawAnchoredText={TextMargin:{Left:5,Top:5,Bottom:5,Right:5},BGColor:"rgba(104,114,255,0.7)",BorderColor:"rgb(220,220,220)",TextColor:"rgb(0,0,0)",FontOption:{Family:"å¾®è½¯éé»",Size:12,Weight:null,Style:null},LineSpace:2,TextMaxWidth:-1},this.ChartDrawPriceLabel={TextMargin:{Left:10,Top:5,Bottom:5,Right:10},BGColor:"rgba(104,114,255,0.7)",BorderColor:"rgb(220,220,220)",TextColor:"rgb(0,0,0)",FontOption:{Family:"å¾®è½¯éé»",Size:14,Weight:null,Style:null}},this.ChartDrawPriceNote={TextMargin:{Left:10,Top:5,Bottom:5,Right:10},BGColor:"rgba(104,114,255,0.7)",BorderColor:"rgb(220,220,220)",TextColor:"rgb(0,0,0)",FontOption:{Family:"å¾®è½¯éé»",Size:14,Weight:null,Style:null}},this.DRAWICON={Icon:{MaxSize:24,MinSize:12,YOffset:0,Zoom:{Type:1,Value:1}},Text:{MaxSize:50,MinSize:12,YOffset:0,Zoom:{Type:1,Value:1},FontName:"Arial"}},this.DRAWTEXT={MaxSize:30,MinSize:20,YOffset:0,Zoom:{Type:1,Value:1},FontName:"å¾®è½¯éé»"},this.DRAWNUMBER={MaxSize:30,MinSize:20,YOffset:0,Zoom:{Type:1,Value:1},FontName:"å¾®è½¯éé»"},this.DRAWABOVE={YOffset:0},this.DRAWTEXT_FIX={Font:14*C()+"px å¾®è½¯éé»"},this.DRAWNUMBER_FIX={Font:14*C()+"px å¾®è½¯éé»"},this.DOTLINE={LineDash:[3,5]},this.DRAWSL={PixelWidth:15},this.CIRCLEDOT={Radius:1.3*C()},this.TIPICON={Family:"iconfont",TextFont:C()+"px å¾®è½¯éé»",Size:10*C(),Color:"rgb(255,165,0)"},this.POINTDOT={Radius:2*C()},this.DepthMapPaint={LineColor:"rgba(255,185,15)",AreaColor:["rgba(255,185,15,0.8)","rgba(255,185,15,0.4)"],TextColor:"rgba(255,255,255)",TextBGColor:"rgb(43,54,69)"},this.KLineYAxisBGPaint={Font:12*C()+"px å¾®è½¯éé»",LineColor:"rgb(117,125,129)",DiffValutTextColor:"rgb(117,125,129)",DiffValueBGColor:"rgb(251,140,1)"},this.StockChip={InfoColor:"rgb(0,0,0)",DayInfoColor:"rgb(255,255,255)",DefaultButton:{Color:"rgb(128,128,128)",MoveOnColor:"rgb(30,144,255)",SelectedColor:"rgb(255,0,0)",Family:"iconfont",Text:"î¡",Size:13*C(),MerginLeft:4},LongButton:{Color:"rgb(128,128,128)",MoveOnColor:"rgb(30,144,255)",SelectedColor:"rgb(255,128,0)",Family:"iconfont",Text:"î",Size:13*C(),MerginLeft:4},RecentButton:{Color:"rgb(128,128,128)",MoveOnColor:"rgb(30,144,255)",SelectedColor:"rgb(0,0,204)",Family:"iconfont",Text:"î",Size:13*C(),MerginLeft:4}},this.DepthChart={BidColor:{Line:"rgb(82,176,123)",Area:"rgba(82,176,123,0.8)"},AskColor:{Line:"rgb(207,76,89)",Area:"rgba(207,76,89, 0.8)"},LineWidth:4},this.DepthCorss={BidColor:{Line:"rgb(82,176,123)"},AskColor:{Line:"rgb(207,76,89)"},LineWidth:2,LineDash:[3,3],Tooltip:{BGColor:"rgba(236,240,245, 0.8)",TextColor:"rgb(130,140,151)",Border:{Top:5,Left:20,Right:20,Bottom:5,ItemSpace:5},Font:14*C()+"px å¾®è½¯éé»"}},this.RectSelect={LineColor:"rgb(64,64,64)",LineWidth:1*C(),LineDotted:[3,3],AreaColor:"rgba(234,234,234,0.5)",SubAreaColor:"rgba(105,105,105,0.5)",RangeTextColor:"rgb(248,248,255)",RangeTextFont:14*C()+"px å¾®è½¯éé»",RangeTextBGColor:"rgb(43,54,69)",RangeTextSubColor:"rgb(255,255,255)",RangeTextSubFont:12*C()+"px å¾®è½¯éé»",RangeTextSubBGColor:"rgb(54,54,54)",Mark:{Family:"iconfont",Text:"î",Color:"rgb(250,0,0)",Size:15*C(),Position:{Index:0,Top:"TopEx"}}},this.SelectedChart={LineWidth:1,LineColor:"rgb(55,100,100)",Radius:4,MinSpace:200,BGColor:"rgb(255,255,255)"},this.RectDrag={LineColor:"rgb(0,0,0)",LineWidth:1*C(),BGColor:"rgba(128,128,128,0.2)"},this.DragMovePaint={TextColor:"rgb(0,0,0)",Font:14*C()+"px å¾®è½¯éé»"},this.SessionBreaksPaint={BGColor:[null,"rgb(245,246,246)"],SplitLine:{Color:"rgb(73,133,231)",Width:1*C(),Dash:[5*C(),5*C()]}},this.DealList={BorderColor:"rgb(192,192,192)",Header:{Color:"RGB(60,60,60)",Mergin:{Left:5,Right:5,Top:4,Bottom:2},Font:{Size:12,Name:"å¾®è½¯éé»"}},Row:{Mergin:{Top:2,Bottom:2},Font:{Size:15,Name:"å¾®è½¯éé»"},BarMergin:{Top:2,Left:3,Right:3,Bottom:2}},FieldColor:{Vol:"rgb(90,90,90)",Time:"rgb(60,60,60)",Deal:"rgb(90,90,90)",Index:"rgb(60,60,60)",BarTitle:"rgb(60,60,60)",Text:"rgb(60,60,60)",Bar:["rgb(255,0,0)","rgb(34,139,34)","rgb(119,136,153)","rgb(75,0,130)","rgb(65,105,225)","rgb(255,215,0)","rgb(255,0,255)","rgb(128,128,0)"]},UpTextColor:"rgb(238,21,21)",DownTextColor:"rgb(25,158,0)",UnchagneTextColor:"rgb(0,0,0)"},this.Report={BorderColor:"rgb(192,192,192)",SelectedColor:"rgb(180,240,240)",Header:{Color:"rgb(60,60,60)",SortColor:"rgb(255,0,0)",Mergin:{Left:5,Right:5,Top:4,Bottom:4},Font:{Size:12,Name:"å¾®è½¯éé»"}},SortIcon:{Size:12,Family:"iconfont",Arrow:[null,"î²","î±"],Color:[null,"rgb(255,0,0)","rgb(255,0,0)"],Margin:{Left:0,Bottom:6}},Item:{Mergin:{Top:2,Bottom:4,Left:5,Right:5},Font:{Size:15,Name:"å¾®è½¯éé»"},BarMergin:{Top:2,Left:3,Right:3,Bottom:2},NameFont:{Size:14,Name:"å¾®è½¯éé»"},SymbolFont:{Size:12,Name:"å¾®è½¯éé»"}},FixedItem:{Font:{Size:15,Name:"å¾®è½¯éé»"}},LimitBorder:{Color:"rgb(180,180,180)",Mergin:{Top:1,Bottom:1,Left:0,Right:0}},NameSymbolV2:{Name:{Size:14,Name:"å¾®è½¯éé»",Color:"rgb(60,60,60)"},Symbol:{Size:10,Name:"å¾®è½¯éé»",Color:"rgb(105 105 105)"}},LimitColor:{UpColor:"rgb(255,0,0)",DownColor:"rgb(0,128,0)",TextColor:"rgb(250,250,250)"},FieldColor:{Index:"rgb(60,60,60)",Symbol:"rgb(60,60,60)",Name:"rgb(60,60,60)",Vol:"rgb(90,90,90)",Amount:"rgb(90,90,90)",Text:"rgb(60,60,60)"},UpTextColor:"rgb(238,21,21)",DownTextColor:"rgb(25,158,0)",UnchagneTextColor:"rgb(90,90,90)",CloseLine:{CloseColor:"rgb(30,144,255)",YCloseColor:"rgba(105,105,105,0.5)",AreaColor:"rgba(0,191,255,0.2)"},KLine:{UpColor:"rgb(255,0,0)",DownColor:"rgb(0,128,0)",UnchagneColor:"rgb(90,90,90)",DataWidth:16,DistanceWidth:3},Tab:{Font:{Size:12,Name:"å¾®è½¯éé»"},ScrollBarWidth:100,ButtonColor:"rgb(252,252,252)",BarColor:"rgb(180,180,180)",BorderColor:"rgb(180,180,180)",Mergin:{Left:5,Right:5,Top:4,Bottom:2},TabTitleColor:"rgb(60,60,60)",TabSelectedTitleColor:"rgb(255,255,255)",TabSelectedBGColor:"rgb(234,85,4)",TabMoveOnTitleColor:"rgb(234,85,4)",TabBGColor:"rgb(220,220,220)"},PageInfo:{Font:{Size:15,Name:"å¾®è½¯éé»"},TextColor:"rgb(0,0,0)",BGColor:"rgba(180,180,180,0.5)",Mergin:{Left:5,Right:5,Top:4,Bottom:2}},DragRow:{Color:"rgba(190,190,190,0.8)",TextColor:"rgba(0,0, 0, 0.8)",MoveRowColor:"rgb(240,128,128)",SrcRowColor:"rgb(180,240,240)"},VScrollbar:{ScrollBarHeight:60,ButtonColor:"rgba(252,252,252,0.8)",BarColor:"rgba(168,168,168,0.9)",BorderColor:"rgba(180,180,180,0.9)",BGColor:"rgba(234,239,248,0.9)",BarWidth:{Size:12}},CheckBox:{Family:"iconfont",Size:15,Checked:{Color:"rgb(69,147,238)",Symbol:"î³",DisableColor:"rgb(230,230,230)",MouseOnColor:"rgb(69,147,238)"},Unchecked:{Color:"rgb(120,120,120)",Symbol:"î´",DisableColor:"rgb(230,230,230)",MouseOnColor:"rgb(69,147,238)"},Margin:{Left:5,Right:5,Bottom:2,Top:4}},Link:{Font:12*C()+"px å¾®è½¯éé»",TextColor:"rgb(30,144,255)",Disable:{TextColor:"rgb(211,211,211)"},MouseOn:{TextColor:"rgb(30,144,255)"}},ProgressBar:{BGColor:"rgb(229,231,238)",BarColor:"rgb(26,125,255)",Margin:{Left:2,Right:2,Bottom:2,Top:2},BarMargin:{Left:2,Right:2,Bottom:2,Top:2},TextColor:"rgb(0,0,0)",Font:12*C()+"px å¾®è½¯éé»",TextMargin:{Left:40,Right:2,Bottom:2,Top:2},Disable:{BGColor:"rgb(229,231,238)",BarColor:"rgb(131,131,131)",TextColor:"rgb(159,161,159)"}},Button:{BGColor:"rgb(61,134,180)",TextColor:"rgb(255,255,255)",BorderColor:"rgb(200,200,200)",Disable:{BGColor:"rgb(105,105,105)",TextColor:"rgb(169,169,169)"},MouseOn:{BGColor:"rgb(57,125,169)",TextColor:"rgb(230,230,230)"},Margin:{Left:5,Right:5,Bottom:2,Top:2},TextMargin:{Bottom:2},Font:12*C()+"px å¾®è½¯éé»"}},this.TReport={BorderColor:"rgb(192,192,192)",SelectedColor:"rgb(3,89,245)",Header:{Color:"rgb(60,60,60)",SortColor:"rgb(255,0,0)",Mergin:{Left:5,Right:5,Top:4,Bottom:2},Font:{Size:14,Name:"å¾®è½¯éé»"}},Item:{Mergin:{Top:2,Bottom:0,Left:5,Right:5},Font:{Size:15,Name:"å¾®è½¯éé»"},BarMergin:{Top:2,Left:3,Right:3,Bottom:2},NameFont:{Size:14,Name:"å¾®è½¯éé»"},SymbolFont:{Size:12,Name:"å¾®è½¯éé»"}},FixedItem:{Font:{Size:15,Name:"å¾®è½¯éé»"}},CenterItem:{TextColor:"rgb(60,60,83)",BaseTextColor:"rgb(60,60,83)",BGColor:"rgb(180,180,180)"},FieldColor:{Index:"rgb(60,60,60)",Symbol:"rgb(60,60,60)",Name:"rgb(60,60,60)",Vol:"rgb(90,90,90)",Position:"rgb(90,90,90)",Amount:"rgb(90,90,90)",Text:"rgb(60,60,60)"},UpTextColor:"rgb(238,21,21)",DownTextColor:"rgb(25,158,0)",UnchangeTextColor:"rgb(90,90,90)",UpBGColor:"rgb(255,220,220)",DownBGColor:"rgb(190,220,190)",MarkBorder:{MaxPositionColor:"rgb(192,192,192)"}},this.Keyboard={BorderColor:"rgb(192,192,192)",SelectedColor:"rgb(180,240,240)",TextColor:"rgb(0,0,0)",Item:{Mergin:{Top:2,Bottom:0,Left:1,Right:1},Font:{Size:15,Name:"å¾®è½¯éé»"},BarMergin:{Top:2,Left:0,Right:0,Bottom:2},NameFont:{Size:14,Name:"å¾®è½¯éé»"},SymbolFont:{Size:12,Name:"å¾®è½¯éé»"}},VScrollbar:{ScrollBarHeight:50,ButtonColor:"rgba(252,252,252,0.8)",BarColor:"rgba(168,168,168,0.9)",BorderColor:"rgba(180,180,180,0.9)",BGColor:"rgba(234,239,248,0.9)",BarWidth:{Size:8}}},this.ScrollBar={BorderColor:"rgb(192,192,192)",XSplitTextFont:12*C()+"px å¾®è½¯éé»",XSplitTextColor:"rgb(0,0,0)",XSplitLineColor:"rgba(0,0,0,0.8)",BGChart:{Color:"rgb(135,206,250)",LineWidth:1,AreaColor:"rgba(135,206,250,0.5)"},Slider:{DateFont:14*C()+"px å¾®è½¯éé»",DateColor:"rgb(0,0,0)",BarColor:"rgb(207,207,207)",BarAreaColor:"rgba(232,232,232,0.65)",BarWidth:10,BarPadding:15,MinCenterWidth:15}},this.FrameButtomToolbar={BGColor:"rgb(235,235,235)",BorderColor:"rgb(204,204,204)",Button:{Font:{Family:"å¾®è½¯éé»",Size:12*C()},TitleColor:{Selected:"rgb(255,255,255)",Default:"rgb(125,125,125)",MoveOn:"rgb(234,85,4)"},BGColor:{Selected:"rgb(234,85,4)",Default:"rgb(235,235,235)",MoveOn:"rgb(242,242,242)"},BorderColor:"rgb(204,204,204)",Mergin:{Left:5*C(),Right:5*C(),Top:4*C(),Bottom:2*C()},SVG:{Family:"iconfont",Size:12*C(),MerginLeft:4*C()}}},this.SetStyle=function(t){var e=function(t,e){t&&(t.Color&&(e.Color=t.Color),t.MoveOnColor&&(e.MoveOnColor=t.MoveOnColor),t.SelectedColor&&(e.SelectedColor=t.SelectedColor),t.Family&&(e.Family=t.Family),t.Text&&(e.Text=t.Text),we.IsNumber(t.Size)&&(e.Size=t.Size),we.IsNumber(t.MerginLeft)&&(e.MerginLeft=t.MerginLeft))};if(t.TooltipBGColor&&(this.TooltipBGColor=t.TooltipBGColor),t.TooltipAlpha&&(this.TooltipAlpha=t.TooltipAlpha),t.SelectRectBGColor&&(this.SelectRectBGColor=t.SelectRectBGColor),t.UpBarColor&&(this.UpBarColor=t.UpBarColor),t.DownBarColor&&(this.DownBarColor=t.DownBarColor),t.UnchagneBarColor&&(this.UnchagneBarColor=t.UnchagneBarColor),t.EmptyBarBGColor&&(this.EmptyBarBGColor=t.EmptyBarBGColor),t.HighLowBarColor&&(this.HighLowBarColor=t.HighLowBarColor),t.HighLowText){var a=this.HighLowText,i=t.HighLowText;i.FontName&&(a.FontName=i.FontName),i.Color&&(a.Color=i.Color),i.MaxText&&(a.MaxText=i.MaxText),we.IsPlusNumber(i.MaxSize)&&(a.MaxSize=i.MaxSize),we.IsPlusNumber(i.MinSize)&&(a.MinSize=i.MinSize)}if(t.SplashScreen){var i=t.SplashScreen;i.BGColor&&(this.SplashScreen.BGColor=i.BGColor),i.Title&&(this.SplashScreen.Title=i.Title),i.TextColor&&(this.SplashScreen.TextColor=i.TextColor),i.Font&&(this.SplashScreen.Font=i.Font)}if(t.HLCArea){var i=t.HLCArea;i.HighLineColor&&(this.HLCArea.HighLineColor=i.HighLineColor),i.LowLineColor&&(this.HLCArea.LowLineColor=i.LowLineColor),i.CloseLineColor&&(this.HLCArea.CloseLineColor=i.CloseLineColor),i.UpAreaColor&&(this.HLCArea.UpAreaColor=i.UpAreaColor),i.DownAreaColor&&(this.HLCArea.DownAreaColor=i.DownAreaColor),we.IsNumber(i.LineWidth)&&(this.HLCArea.LineWidth=i.LineWidth)}if(t.Minute){if(t.Minute.VolBarColor&&(this.Minute.VolBarColor=t.Minute.VolBarColor),t.Minute.VolTitleColor&&(this.Minute.VolTitleColor=t.Minute.VolTitleColor),t.Minute.PriceColor&&(this.Minute.PriceColor=t.Minute.PriceColor),we.IsNumber(t.Minute.PriceLineWidth)&&(this.Minute.PriceLineWidth=t.Minute.PriceLineWidth),t.Minute.AvPriceColor&&(this.Minute.AvPriceColor=t.Minute.AvPriceColor),t.Minute.AreaPriceColor&&(this.Minute.AreaPriceColor=t.Minute.AreaPriceColor),t.Minute.PositionColor&&(this.Minute.PositionColor=t.Minute.PositionColor),t.Minute.FrameSplitTextColor&&(this.Minute.FrameSplitTextColor=t.Minute.FrameSplitTextColor),t.Minute.Before){var i=t.Minute.Before;i.BGColor&&(this.Minute.Before.BGColor=i.BGColor),i.LineColor&&(this.Minute.Before.LineColor=i.LineColor),i.VolColor&&(this.Minute.Before.VolColor=i.VolColor),i.AvPriceColor&&(this.Minute.Before.AvPriceColor=i.AvPriceColor),i.CloseIcon&&e(i.CloseIcon,this.Minute.Before.CloseIcon),i.Point&&(i.Point.Color&&(this.Minute.Before.Point.Color=i.Point.Color),i.Point.Radius&&(this.Minute.Before.Point.Radius=i.Point.Radius))}if(t.Minute.After){var i=t.Minute.After;i.BGColor&&(this.Minute.After.BGColor=i.BGColor),i.LineColor&&(this.Minute.After.LineColor=i.LineColor),i.VolColor&&(this.Minute.After.VolColor=i.VolColor),i.AvPriceColor&&(this.Minute.After.AvPriceColor=i.AvPriceColor),i.Point&&(i.Point.Color&&(this.Minute.After.Point.Color=i.Point.Color),i.Point.Radius&&(this.Minute.After.Point.Radius=i.Point.Radius))}if(t.Minute.NightDay){var i=t.Minute.NightDay;if(i.NightBGColor&&(this.Minute.NightDay.NightBGColor=i.NightBGColor),i.Font&&(this.Minute.NightDay.Font=i.Font),i.Day){var r=i.Day;r.Color&&(this.Minute.NightDay.Day.Color=r.Color),r.BGColor&&(this.Minute.NightDay.Day.BGColor=r.BGColor),r.BorderColor&&(this.Minute.NightDay.Day.BorderColor=r.BorderColor),S(this.Minute.NightDay.Day.Margin,r.Margin)}if(i.Night){var r=i.Night;r.Color&&(this.Minute.NightDay.Night.Color=r.Color),r.BGColor&&(this.Minute.NightDay.Night.BGColor=r.BGColor),r.BorderColor&&(this.Minute.NightDay.Night.BorderColor=r.BorderColor),S(this.Minute.NightDay.Night.Margin,r.Margin)}}}if(t.PopMinuteChart){var i=t.PopMinuteChart;i.BGColor&&(this.PopMinuteChart.BGColor=i.BGColor),i.BorderColor&&(this.PopMinuteChart.BorderColor=i.BorderColor)}if(t.DefaultTextColor&&(this.DefaultTextColor=t.DefaultTextColor),t.DefaultTextFont&&(this.DefaultTextFont=t.DefaultTextFont),t.TitleFont&&(this.TitleFont=t.TitleFont),t.IndexTitleBGColor&&(this.IndexTitleBGColor=t.IndexTitleBGColor),t.IndexTitleBorderColor&&(this.IndexTitleBorderColor=t.IndexTitleBorderColor),t.IndexTitleBorderMoveOnColor&&(this.IndexTitleBorderMoveOnColor=t.IndexTitleBorderMoveOnColor),we.IsNumber(t.IndexTitleBorderStyle)&&(this.IndexTitleBorderStyle=t.IndexTitleBorderStyle),t.IndexTitleColor&&(this.IndexTitleColor=t.IndexTitleColor),t.IndexTitleSelectedColor&&(this.IndexTitleSelectedColor=t.IndexTitleSelectedColor),t.OverlayIndexTitleBGColor&&(this.OverlayIndexTitleBGColor=t.OverlayIndexTitleBGColor),t.UpTextColor&&(this.UpTextColor=t.UpTextColor),t.DownTextColor&&(this.DownTextColor=t.DownTextColor),t.UnchagneTextColor&&(this.UnchagneTextColor=t.UnchagneTextColor),t.CloseLineColor&&(this.CloseLineColor=t.CloseLineColor),t.CloseLineAreaColor&&(this.CloseLineAreaColor=t.CloseLineAreaColor),t.CloseLineWidth&&(this.CloseLineWidth=t.CloseLineWidth),t.FrameBorderPen&&(this.FrameBorderPen=t.FrameBorderPen),t.MultiDayBorderPen&&(this.MultiDayBorderPen=t.MultiDayBorderPen),t.FrameSplitPen&&(this.FrameSplitPen=t.FrameSplitPen),t.FrameDotSplitPen&&(this.FrameDotSplitPen=t.FrameDotSplitPen),t.FrameSplitTextColor&&(this.FrameSplitTextColor=t.FrameSplitTextColor),t.FrameSplitTextFont&&(this.FrameSplitTextFont=t.FrameSplitTextFont),t.FrameTitleBGColor&&(this.FrameTitleBGColor=t.FrameTitleBGColor),t.SelFrameBorderColor&&(this.SelFrameBorderColor=t.SelFrameBorderColor),we.IsNumber(t.IndexTitleMerginLeft)&&(this.IndexTitleMerginLeft=t.IndexTitleMerginLeft),t.IndexTitle){var i=t.IndexTitle;if(i.UpDownArrow){var r=i.UpDownArrow;r.UpColor&&(this.IndexTitle.UpDownArrow.UpColor=r.UpColor),r.DownColor&&(this.IndexTitle.UpDownArrow.DownColor=r.DownColor),r.UnchangeColor&&(this.IndexTitle.UpDownArrow.UnchangeColor=r.UnchangeColor)}if(we.IsNumber(i.ArrowType)&&(this.IndexTitle.ArrowType=i.ArrowType),we.IsBool(i.EnableIndexArrow)&&(this.IndexTitle.EnableIndexArrow=i.EnableIndexArrow),i.NameArrow){var r=i.NameArrow;r.Color&&(this.IndexTitle.NameArrow.Color=r.Color),r.Symbol&&(this.IndexTitle.NameArrow.Symbol=r.Symbol),we.IsNumber(r.Space)&&(this.IndexTitle.NameArrow.Space=r.Space)}}if(t.Frame&&(t.Frame.XBottomOffset&&(this.Frame.XBottomOffset=t.Frame.XBottomOffset),t.Frame.YTopOffset&&(this.Frame.YTopOffset=t.Frame.YTopOffset),t.Frame.PercentageText)){var i=t.Frame.PercentageText;i.PriceColor&&(this.Frame.PercentageText.PriceColor=i.PriceColor),i.PercentageColor&&(this.Frame.PercentageText.PercentageColor=i.PercentageColor),i.SplitColor&&(this.Frame.PercentageText.SplitColor=i.SplitColor),i.Font&&(this.Frame.PercentageText.Font=i.Font)}if(we.IsNumber(t.ToolbarButtonStyle)&&(this.ToolbarButtonStyle=t.ToolbarButtonStyle),we.IsBool(t.IsDOMFrameTitle)&&(this.IsDOMFrameTitle=t.IsDOMFrameTitle),t.FrameLatestPrice){var i=t.FrameLatestPrice;t.FrameLatestPrice.TextColor&&(this.FrameLatestPrice.TextColor=t.FrameLatestPrice.TextColor),t.FrameLatestPrice.UpBarColor&&(this.FrameLatestPrice.UpBarColor=t.FrameLatestPrice.UpBarColor),t.FrameLatestPrice.DownBarColor&&(this.FrameLatestPrice.DownBarColor=t.FrameLatestPrice.DownBarColor),t.FrameLatestPrice.UnchagneBarColor&&(this.FrameLatestPrice.UnchagneBarColor=t.FrameLatestPrice.UnchagneBarColor),t.FrameLatestPrice.BGAlpha&&(this.FrameLatestPrice.BGAlpha=t.FrameLatestPrice.BGAlpha),t.FrameLatestPrice.OverlayTextColor&&(this.FrameLatestPrice.OverlayTextColor=t.FrameLatestPrice.OverlayTextColor),i.EmptyBGColor&&(this.FrameLatestPrice.EmptyBGColor=i.EmptyBGColor)}if(t.OverlayFrame){var i=t.OverlayFrame;t.OverlayFrame.BolderPen&&(this.OverlayFrame.BolderPen=t.OverlayFrame.BolderPen),t.OverlayFrame.TitleColor&&(this.OverlayFrame.TitleColor=t.OverlayFrame.TitleColor),t.OverlayFrame.TitleFont&&(this.OverlayFrame.TitleFont=t.OverlayFrame.TitleFont)}if(t.CorssCursorBGColor&&(this.CorssCursorBGColor=t.CorssCursorBGColor),t.CorssCursorTextColor&&(this.CorssCursorTextColor=t.CorssCursorTextColor),t.CorssCursorTextFont&&(this.CorssCursorTextFont=t.CorssCursorTextFont),t.CorssCursorVPenColor&&(this.CorssCursorVPenColor=t.CorssCursorVPenColor),t.CorssCursorHPenColor&&(this.CorssCursorHPenColor=t.CorssCursorHPenColor),t.CorssCursorBorderColor&&(this.CorssCursorBorderColor=t.CorssCursorBorderColor),t.CorssCursorXRangeBGColor&&(this.CorssCursorXRangeBGColor=t.CorssCursorXRangeBGColor),t.CorssCursor&&t.CorssCursor.RightButton){var i=t.CorssCursor.RightButton;i.BGColor&&(this.CorssCursor.RightButton.BGColor=i.BGColor),i.PenColor&&(this.CorssCursor.RightButton.PenColor=i.PenColor),i.Icon&&(this.CorssCursor.RightButton.Icon=i.Icon)}if(t.KLine&&(this.KLine=t.KLine),t.VirtualKLine){var i=t.VirtualKLine;i.Color&&(this.VirtualKLine.Color=i.Color),i.LineDash&&(this.VirtualKLine.LineDash=i.LineDash)}if(t.PriceGapStyple){var i=t.PriceGapStyple;i.Line&&i.Line.Color&&(this.PriceGapStyple.Line.Color=i.Line.Color),i.Text&&(i.Text.Color&&(this.PriceGapStyple.Text.Color=i.Text.Color),i.Text.Font&&(this.PriceGapStyple.Text.Font=i.Text.Font))}if(t.Index&&(t.Index.LineColor&&(this.Index.LineColor=t.Index.LineColor),t.Index.NotSupport&&(this.Index.NotSupport=t.Index.NotSupport)),t.ColorArray&&(this.ColorArray=t.ColorArray),t.DrawPicture){var i=t.DrawPicture;i.LineColor&&(this.DrawPicture.LineColor=i.LineColor),i.PointColor&&(this.DrawPicture.PointColor=i.PointColor),i.XYCoordinate&&(this.DrawPicture.XYCoordinate=i.XYCoordinate),we.IsNumber(i.PointType)&&(this.DrawPicture.PointType=i.PointType),we.IsBool(i.IsShowPoint)&&(this.DrawPicture.IsShowPoint=i.IsShowPoint)}if(t.TooltipPaint&&(t.TooltipPaint.BGColor&&(this.TooltipPaint.BGColor=t.TooltipPaint.BGColor),t.TooltipPaint.BorderColor&&(this.TooltipPaint.BorderColor=t.TooltipPaint.BorderColor),t.TooltipPaint.TitleColor&&(this.TooltipPaint.TitleColor=t.TooltipPaint.TitleColor),t.TooltipPaint.TitleFont&&(this.TooltipPaint.TitleFont=t.TooltipPaint.TitleFont),t.TooltipPaint.DateTimeColor&&(this.TooltipPaint.DateTimeColor=t.TooltipPaint.DateTimeColor),t.TooltipPaint.VolColor&&(this.TooltipPaint.VolColor=t.TooltipPaint.VolColor),t.TooltipPaint.AmountColor&&(this.TooltipPaint.AmountColor=t.TooltipPaint.AmountColor)),t.PCTooltipPaint){var i=t.PCTooltipPaint;i.BGColor&&(this.PCTooltipPaint.BGColor=i.BGColor),i.BorderColor&&(this.PCTooltipPaint.BorderColor=i.BorderColor),i.TitleColor&&(this.PCTooltipPaint.TitleColor=i.TitleColor),i.TitleFont&&(this.PCTooltipPaint.TitleFont=i.TitleFont),i.DateTimeColor&&(this.PCTooltipPaint.DateTimeColor=i.DateTimeColor),i.VolColor&&(this.PCTooltipPaint.VolColor=i.VolColor),i.AmountColor&&(this.PCTooltipPaint.AmountColor=i.AmountColor),i.PositionColor&&(this.PCTooltipPaint.PositionColor=i.PositionColor)}if(t.DialogTooltip){var i=t.DialogTooltip;i.BGColor&&(this.DialogTooltip.BGColor=i.BGColor),i.BorderColor&&(this.DialogTooltip.BorderColor=i.BorderColor),i.TitleColor&&(this.DialogTooltip.TitleColor=i.TitleColor),i.TitleBGColor&&(this.DialogTooltip.TitleBGColor=i.TitleBGColor),i.DateTimeColor&&(this.DialogTooltip.DateTimeColor=i.DateTimeColor),i.VolColor&&(this.DialogTooltip.VolColor=i.VolColor),i.AmountColor&&(this.DialogTooltip.AmountColor=i.AmountColor),i.TurnoverRateColor&&(this.DialogTooltip.TurnoverRateColor=i.TurnoverRateColor),i.PositionColor&&(this.DialogTooltip.PositionColor=i.PositionColor),i.TextColor&&(this.DialogTooltip.TextColor=i.TextColor),i.ValueColor&&(this.DialogTooltip.ValueColor=i.ValueColor)}if(t.FloatTooltip){var i=t.FloatTooltip;i.BGColor&&(this.FloatTooltip.BGColor=i.BGColor),i.BorderColor&&(this.FloatTooltip.BorderColor=i.BorderColor),i.DateTimeColor&&(this.FloatTooltip.DateTimeColor=i.DateTimeColor),i.VolColor&&(this.FloatTooltip.VolColor=i.VolColor),i.AmountColor&&(this.FloatTooltip.AmountColor=i.AmountColor),i.TurnoverRateColor&&(this.FloatTooltip.TurnoverRateColor=i.TurnoverRateColor),i.PositionColor&&(this.FloatTooltip.PositionColor=i.PositionColor),i.TextColor&&(this.FloatTooltip.TextColor=i.TextColor),i.ValueColor&&(this.FloatTooltip.ValueColor=i.ValueColor)}if(t.DialogSelectRect){var i=t.DialogSelectRect;i.BGColor&&(this.DialogSelectRect.BGColor=i.BGColor),i.BorderColor&&(this.DialogSelectRect.BorderColor=i.BorderColor),i.TitleColor&&(this.DialogSelectRect.TitleColor=i.TitleColor),i.TextColor&&(this.DialogSelectRect.TextColor=i.TextColor),i.ValueColor&&(this.DialogSelectRect.ValueColor=i.ValueColor),i.VolColor&&(this.DialogSelectRect.VolColor=i.VolColor),i.AmountColor&&(this.DialogSelectRect.AmountColor=i.AmountColor),i.TurnoverRateColor&&(this.DialogSelectRect.TurnoverRateColor=i.TurnoverRateColor),i.PositionColor&&(this.DialogSelectRect.PositionColor=i.PositionColor)}if(t.DialogPopKeyboard){var i=t.DialogPopKeyboard;if(i.BGColor&&(this.DialogPopKeyboard.BGColor=i.BGColor),i.BorderColor&&(this.DialogPopKeyboard.BorderColor=i.BorderColor),i.TitleColor&&(this.DialogPopKeyboard.TitleColor=i.TitleColor),i.TitleBGColor&&(this.DialogTooltip.TitleBGColor=i.TitleBGColor),i.Input){var r=i.Input;r.BGColor&&(this.DialogPopKeyboard.Input.BGColor=r.BGColor),r.TextColor&&(this.DialogPopKeyboard.Input.TextColor=r.TextColor)}}if(t.DialogSearchIndex){var i=t.DialogSearchIndex;i.BGColor&&(this.DialogSearchIndex.BGColor=i.BGColor),i.BorderColor&&(this.DialogSearchIndex.BorderColor=i.BorderColor),i.TitleColor&&(this.DialogSearchIndex.TitleColor=i.TitleColor),i.TitleBGColor&&(this.DialogSearchIndex.TitleBGColor=i.TitleBGColor),i.IndexNameColor&&(this.DialogSearchIndex.IndexNameColor=i.IndexNameColor),i.GroupNameColor&&(this.DialogSearchIndex.GroupNameColor=i.GroupNameColor),i.InputTextColor&&(this.DialogSearchIndex.InputTextColor=i.InputTextColor)}if(t.MinuteInfo){var i=t.MinuteInfo;t.MinuteInfo.TextColor&&(this.MinuteInfo.TextColor=t.MinuteInfo.TextColor),t.MinuteInfo.Font&&(this.MinuteInfo.Font=t.MinuteInfo.Font),t.MinuteInfo.PointColor&&(this.MinuteInfo.PointColor=t.MinuteInfo.PointColor),t.MinuteInfo.LineColor&&(this.MinuteInfo.LineColor=t.MinuteInfo.LineColor),t.MinuteInfo.TextBGColor&&(this.MinuteInfo.TextBGColor=t.MinuteInfo.TextBGColor),we.IsNumber(i.PointRadius)&&(this.MinuteInfo.PointRadius=i.PointRadius)}if(t.Title&&(t.Title.TradeIndexColor&&(this.Title.TradeIndexColor=t.Title.TradeIndexColor),t.Title.ColorIndexColor&&(this.Title.ColorIndexColor=t.Title.ColorIndexColor),t.Title.VolColor&&(this.Title.VolColor=t.Title.VolColor),t.Title.AmountColor&&(this.Title.AmountColor=t.Title.AmountColor),t.Title.DateTimeColor&&(this.Title.DateTimeColor=t.Title.DateTimeColor),t.Title.NameColor&&(this.Title.NameColor=t.Title.NameColor),t.Title.SettingColor&&(this.Title.SettingColor=t.Title.SettingColor),t.Title.TurnoverRateColor&&(this.Title.TurnoverRateColor=t.Title.TurnoverRateColor),t.Title.PositionColor&&(this.Title.PositionColor=t.Title.PositionColor)),t.DRAWICON){if(t.DRAWICON.Icon){var i=t.DRAWICON.Icon;we.IsPlusNumber(i.MaxSize)&&(this.DRAWICON.Icon.MaxSize=i.MaxSize),we.IsPlusNumber(i.MinSize)&&(this.DRAWICON.Icon.MinSize=i.MinSize),i.Zoom&&(this.DRAWICON.Icon.Zoom=i.Zoom),we.IsNumber(i.YOffset)&&(this.DRAWICON.Icon.YOffset=i.YOffset)}if(t.DRAWICON.Text){var i=t.DRAWICON.Text;we.IsPlusNumber(i.MaxSize)&&(this.DRAWICON.Text.MaxSize=i.MaxSize),we.IsPlusNumber(i.MinSize)&&(this.DRAWICON.Text.MinSize=i.MinSize),i.Zoom&&(this.DRAWICON.Text.Zoom=i.Zoom),i.FontName&&(this.DRAWICON.Text.FontName=i.FontName),we.IsNumber(i.YOffset)&&(this.DRAWICON.Text.YOffset=i.YOffset)}}if(t.DRAWTEXT){var i=t.DRAWTEXT;we.IsPlusNumber(i.MaxSize)&&(this.DRAWICON.MaxSize=i.MaxSize),we.IsPlusNumber(i.MinSize)&&(this.DRAWICON.MinSize=i.MinSize),i.Zoom&&(this.DRAWTEXT.Zoom=i.Zoom),i.FontName&&(this.DRAWTEXT.FontName=i.FontName),we.IsNumber(i.YOffset)&&(this.DRAWTEXT.YOffset=i.YOffset)}if(t.DRAWTEXT_FIX){var i=t.DRAWTEXT_FIX;i.Font&&(this.DRAWTEXT_FIX.Font=i.Font)}if(t.DRAWNUMBER_FIX){var i=t.DRAWNUMBER_FIX;i.Font&&(this.DRAWNUMBER_FIX.Font=i.Font)}if(t.DRAWNUMBER){var i=t.DRAWNUMBER;we.IsPlusNumber(i.MaxSize)&&(this.DRAWNUMBER.MaxSize=i.MaxSize),we.IsPlusNumber(i.MinSize)&&(this.DRAWNUMBER.MinSize=i.MinSize),i.Zoom&&(this.DRAWNUMBER.Zoom=i.Zoom),i.FontName&&(this.DRAWNUMBER.FontName=i.FontName),we.IsNumber(i.YOffset)&&(this.DRAWNUMBER.YOffset=i.YOffset)}if(t.DRAWABOVE){var i=t.DRAWABOVE;we.IsNumber(i.YOffset)&&(this.DRAWABOVE.YOffset=i.YOffset)}if(t.DOTLINE&&(this.DOTLINE=t.DOTLINE),t.DRAWSL&&(this.DOTLINE=t.DRAWSL),t.DragSubFrameBorder&&(this.DragSubFrameBorder=t.DragSubFrameBorder),t.DepthMapPaint){var i=t.DepthMapPaint;i.LineColor&&(this.DepthMapPaint.LineColor=i.LineColor),i.AreaColor&&(this.DepthMapPaint.AreaColor=i.AreaColor),i.TextColor&&(this.DepthMapPaint.TextColor=i.TextColor),i.TextBGColor&&(this.DepthMapPaint.TextBGColor=i.TextBGColor)}if(t.KLineYAxisBGPaint){var i=t.KLineYAxisBGPaint;i.Font&&(this.KLineYAxisBGPaint.Font=i.Font),i.LineColor&&(this.KLineYAxisBGPaint.LineColor=i.LineColor),i.DiffValutTextColor&&(this.KLineYAxisBGPaint.DiffValutTextColor=i.DiffValutTextColor),i.DiffValueBGColor&&(this.KLineYAxisBGPaint.DiffValueBGColor=i.DiffValueBGColor)}if(t.StockChip){var i=t.StockChip;i.InfoColor&&(this.StockChip.InfoColor=i.InfoColor),i.DayInfoColor&&(this.StockChip.DayInfoColor=i.DayInfoColor),i.DefaultButton&&e(i.DefaultButton,this.StockChip.DefaultButton),i.LongButton&&e(i.LongButton,this.StockChip.LongButton),i.RecentButton&&e(i.RecentButton,this.StockChip.RecentButton)}if(t.DepthChart){var i=t.DepthChart;i.BidColor&&(i.BidColor.Line&&(this.DepthChart.BidColor.Line=i.BidColor.Line),i.BidColor.Area&&(this.DepthChart.BidColor.Area=i.BidColor.Area)),i.AskColor&&(i.AskColor.Line&&(this.DepthChart.AskColor.Line=i.AskColor.Line),i.AskColor.Area&&(this.DepthChart.AskColor.Area=i.AskColor.Area)),i.LineWidth&&(this.DepthChart.LineWidth=i.LineWidth)}if(t.DepthCorss){var i=t.DepthCorss;if(i.BidColor&&i.BidColor.Line&&(this.DepthCorss.BidColor.Line=i.BidColor.Line),i.AskColor&&i.AskColor.Line&&(this.DepthCorss.AskColor.Line=i.AskColor.Line),i.LineWidth&&(this.DepthCorss.LineWidth=i.LineWidth),i.LineDash&&(this.DepthCorss.LineDash=i.LineDash),i.Tooltip){var n=i.Tooltip;n.BGColor&&(this.DepthCorss.Tooltip.BGColor=n.BGColor),n.TextColor&&(this.DepthCorss.Tooltip.TextColor=n.TextColor),n.Font&&(this.DepthCorss.Tooltip.Font=n.Font),n.LineHeight&&(this.DepthCorss.Tooltip.LineHeight=n.LineHeight);var o=n.Border;we.IsNumber(o.Top)&&(this.DepthCorss.Tooltip.Border.Top=o.Top),we.IsNumber(o.Bottom)&&(this.DepthCorss.Tooltip.Border.Bottom=o.Bottom),we.IsNumber(o.Left)&&(this.DepthCorss.Tooltip.Border.Left=o.Left),we.IsNumber(o.Right)&&(this.DepthCorss.Tooltip.Border.Right=o.Right),we.IsNumber(o.ItemSpace)&&(this.DepthCorss.Tooltip.Border.ItemSpace=o.ItemSpace)}}if(t.CIRCLEDOT){var i=t.CIRCLEDOT;we.IsNumber(i.Radius)&&(this.CIRCLEDOT.Radius=i.Radius)}if(t.POINTDOT){var i=t.POINTDOT;we.IsNumber(i.Radius)&&(this.POINTDOT.Radius=i.Radius)}if(t.RectSelect){var i=t.RectSelect;if(i.LineColor&&(this.RectSelect.LineColor=i.LineColor),i.LineWidth>0&&(this.RectSelect.LineWidth=i.LineWidth),i.LineDotted&&(this.RectSelect.LineDotted=i.LineDotted),i.AreaColor&&(this.RectSelect.AreaColor=i.AreaColor),i.SubAreaColor&&(this.RectSelect.SubAreaColor=i.SubAreaColor),i.RangeTextColor&&(this.RectSelect.RangeTextColor=i.RangeTextColor),i.RangeTextFont&&(this.RectSelect.RangeTextFont=i.RangeTextFont),i.RangeTextBGColor&&(this.RectSelect.RangeTextBGColor=i.RangeTextBGColor),i.RangeTextSubColor&&(this.RectSelect.RangeTextSubColor=i.RangeTextSubColor),i.RangeTextSubFont&&(this.RectSelect.RangeTextSubFont=i.RangeTextSubFont),i.RangeTextSubBGColor&&(this.RectSelect.RangeTextSubBGColor=i.RangeTextSubBGColor),i.Mark){var r=i.Mark;r.Family&&(this.RectSelect.Mark.Family=r.Family),r.Text&&(this.RectSelect.Mark.Text=r.Text),r.Color&&(this.RectSelect.Mark.Color=r.Color),we.IsNumber(r.Size)&&(this.RectSelect.Mark.Size=r.Size),r.Position&&(r.Position.Top&&(this.RectSelect.Mark.Position.Top=r.Position.Top),we.IsNumber(r.Position.Index)&&(this.RectSelect.Mark.Position.Index=r.Position.Index))}}if(t.RectDrag){var i=t.RectDrag,a=this.RectDrag;i.LineColor&&(a.LineColor=i.LineColor),we.IsPlusNumber(i.LineWidth)&&(a.LineWidth=i.LineWidth),i.BGColor&&(a.BGColor=i.BGColor)}if(t.OrderFlow&&(i=t.OrderFlow,i.UpColor&&(this.OrderFlow.UpColor=i.UpColor),i.DownColor&&(this.OrderFlow.DownColor=i.DownColor),i.UnchagneColor&&(this.OrderFlow.UnchagneColor=i.UnchagneColor),i.Text&&(this.OrderFlow.Text=i.Text),i.Line&&(this.OrderFlow.Line=i.Line)),t.OrderFlow_Style2&&(i=t.OrderFlow_Style2,i.UpColor&&(this.OrderFlow_Style2.UpColor=i.UpColor),i.DownColor&&(this.OrderFlow_Style2.DownColor=i.DownColor),i.UnchagneColor&&(this.OrderFlow_Style2.UnchagneColor=i.UnchagneColor),we.IsNumber(i.BarWidth)&&(this.OrderFlow_Style2.BarWidth=i.BarWidth)),t.ChartOX){var i=t.ChartOX;i.Family&&(this.ChartOX.Family=i.Family),i.Up&&(this.ChartOX.Up=i.Up),i.Down&&(this.ChartOX.Down=i.Down),i.SquareLineColor&&(this.ChartOX.SquareLineColor=i.SquareLineColor)}if(t.DealList){var i=t.DealList;if(i.BorderColor&&(this.DealList.BorderColor=i.BorderColor),i.UpTextColor&&(this.DealList.UpTextColor=i.UpTextColor),i.DownTextColor&&(this.DealList.DownTextColor=i.DownTextColor),i.UnchagneTextColor&&(this.DealList.UnchagneTextColor=i.UnchagneTextColor),i.CloseLineColor&&(this.DealList.CloseLineColor=i.CloseLineColor),i.Header){var s=i.Header;if(s.Color&&(this.DealList.Header.Color=s.Color),s.Mergin){var l=s.Mergin;we.IsNumber(l.Left)&&(this.DealList.Header.Mergin.Left=l.Left),we.IsNumber(l.Right)&&(this.DealList.Header.Mergin.Left=l.Right),we.IsNumber(l.Top)&&(this.DealList.Header.Mergin.Top=l.Top),we.IsNumber(l.Bottom)&&(this.DealList.Header.Mergin.Bottom=l.Bottom)}if(s.Font){var h=s.Font;h.Name&&(this.DealList.Header.Font.Name=h.Name),we.IsNumber(h.Size)&&(this.DealList.Header.Font.Size=h.Size)}}if(i.Row){var u=i.Row;if(u.Mergin){var l=u.Mergin;we.IsNumber(l.Top)&&(this.DealList.Row.Mergin.Top=l.Top),we.IsNumber(l.Bottom)&&(this.DealList.Row.Mergin.Bottom=l.Bottom)}if(u.Font){var h=u.Font;h.Name&&(this.DealList.Row.Font.Name=h.Name),we.IsNumber(h.Size)&&(this.DealList.Row.Font.Size=h.Size)}if(u.BarMergin){var l=u.BarMergin;we.IsNumber(l.Left)&&(this.DealList.Row.BarMergin.Left=l.Left),we.IsNumber(l.Top)&&(this.DealList.Row.BarMergin.Top=l.Top),we.IsNumber(l.Right)&&(this.DealList.Row.BarMergin.Right=l.Right),we.IsNumber(l.Bottom)&&(this.DealList.Row.BarMergin.Bottom=l.Bottom)}}if(i.FieldColor){var C=i.FieldColor;if(C.Vol&&(this.DealList.FieldColor.Vol=C.Vol),C.Time&&(this.DealList.FieldColor.Time=C.Time),C.Deal&&(this.DealList.FieldColor.Deal=C.Deal),C.Index&&(this.DealList.FieldColor.Index=C.Index),C.BarTitle&&(this.DealList.FieldColor.BarTitle=C.BarTitle),C.Text&&(this.DealList.FieldColor.Text=C.Text),we.IsNonEmptyArray(C.Bar))for(var c=0;c<C.Bar.length;++c)this.DealList.FieldColor.Bar[c]=C.Bar[c]}}if(t.Report&&this.SetReportStyle(t.Report),t.TReport&&this.SetTReportStyle(t.TReport),t.SelectedChart){var i=t.SelectedChart;we.IsNumber(i.LineWidth)&&(this.SelectedChart.LineWidth=i.LineWidth),we.IsNumber(i.Radius)&&(this.SelectedChart.Radius=i.Radius),we.IsNumber(i.MinSpace)&&(this.SelectedChart.MinSpace=i.MinSpace),i.LineColor&&(this.SelectedChart.LineColor=i.LineColor),i.LineColor&&(this.SelectedChart.BGColor=i.BGColor)}if(t.DragMovePaint){var i=t.DragMovePaint;i.TextColor&&(this.DragMovePaint.TextColor=i.TextColor),i.Font&&(this.DragMovePaint.Font=i.Font)}if(t.SessionBreaksPaint){var i=t.SessionBreaksPaint;if(we.IsNonEmptyArray(i.BGColor)&&(this.SessionBreaksPaint.BGColor=i.BGColor.slice()),i.SplitLine){var r=i.SplitLine;r.Color&&(this.SessionBreaksPaint.SplitLine.Color=r.Color),we.IsNumber(r.Width)&&(this.SessionBreaksPaint.SplitLine.Width=r.Width),this.SessionBreaksPaint.SplitLine.Dash=r.Dash}}if(we.IsNumber(t.ToolbarButtonStyle)&&(this.ToolbarButtonStyle=t.ToolbarButtonStyle),t.Buttons){var f=t.Buttons;if(e(f.CloseOverlayIndex,this.Buttons.CloseOverlayIndex),e(f.CloseWindow,this.Buttons.CloseWindow),e(f.ChangeIndex,this.Buttons.ChangeIndex),e(f.OverlayIndex,this.Buttons.OverlayIndex),e(f.ModifyIndexParam,this.Buttons.ModifyIndexParam),e(f.MaxMinWindow,this.Buttons.MaxMinWindow),e(f.TitleWindow,this.Buttons.TitleWindow),e(f.ExportData,this.Buttons.ExportData),f.Tooltip){var i=f.Tooltip,d=this.Buttons.Tooltip;i.Font&&(d.Font=i.Font),i.Color&&(d.Color=i.Color),i.ColorBG&&(d.ColorBG=i.ColorBG),i.ColorBorder&&(d.ColorBorder=i.ColorBorder),i.BorderRadius&&(d.BorderRadius=i.BorderRadius),i.Margin&&(we.IsNumber(i.Margin.Left)&&(d.Margin.Left=i.Margin.Left),we.IsNumber(i.Margin.Top)&&(d.Margin.Top=i.Margin.Top),we.IsNumber(i.Margin.Bottom)&&(d.Margin.Bottom=i.Margin.Bottom),we.IsNumber(i.Margin.Right)&&(d.Margin.Right=i.Margin.Right))}}if(t.ChartDrawVolProfile){var i=t.ChartDrawVolProfile;i.UpVolColor&&(this.ChartDrawVolProfile.UpVolColor=i.UpVolColor),i.DownVolColor&&(this.ChartDrawVolProfile.DownVolColor=i.DownVolColor),i.AreaUpColor&&(this.ChartDrawVolProfile.AreaUpColor=i.AreaUpColor),i.AreaDonwColor&&(this.ChartDrawVolProfile.AreaDonwColor=i.AreaDonwColor),i.BGColor&&(this.ChartDrawVolProfile.BGColor=i.BGColor),i.BorderColor&&(this.ChartDrawVolProfile.BorderColor=i.BorderColor),i.VolLineColor&&(this.ChartDrawVolProfile.VolLineColor=i.VolLineColor),i.Text&&(i.Text.Color&&(this.ChartDrawVolProfile.Text.Color=i.Text.Color),i.Text.Family&&(this.ChartDrawVolProfile.Text.Family=i.Text.Family),we.IsNumber(i.Text.FontMaxSize)&&(this.ChartDrawVolProfile.Text.FontMaxSize=i.Text.FontMaxSize),we.IsNumber(i.Text.FontMinSize)&&(this.ChartDrawVolProfile.Text.FontMinSize=i.Text.FontMinSize))}if(!0===t.DisableLogo&&this.FrameLogo&&(this.FrameLogo.Text=null),t.ScrollBar){var i=t.ScrollBar;if(i.BorderColor&&(this.ScrollBar.BorderColor=i.BorderColor),i.XSplitTextFont&&(this.ScrollBar.XSplitTextFont=i.XSplitTextFont),i.XSplitTextColor&&(this.ScrollBar.XSplitTextColor=i.XSplitTextColor),i.XSplitLineColor&&(this.ScrollBar.XSplitLineColor=i.XSplitLineColor),i.Slider){var r=i.Slider;r.DateFont&&(this.ScrollBar.Slider.DateFont=r.DateFont),r.DateColor&&(this.ScrollBar.Slider.DateColor=r.DateColor),r.BarColor&&(this.ScrollBar.Slider.BarColor=r.BarColor),r.BarAreaColor&&(this.ScrollBar.Slider.BarAreaColor=r.BarAreaColor),we.IsNumber(r.BarWidth)&&(this.ScrollBar.Slider.BarWidth=r.BarWidth),we.IsNumber(r.BarPadding)&&(this.ScrollBar.Slider.BarPadding=r.BarPadding),we.IsNumber(r.MinCenterWidth)&&(this.ScrollBar.Slider.MinCenterWidth=r.MinCenterWidth)}if(i.BGChart){var r=i.BGChart;r.Color&&(this.ScrollBar.BGChart.Color=r.Color),r.AreaColor&&(this.ScrollBar.BGChart.AreaColor=r.AreaColor),we.IsPlusNumber(r.LineWidth)&&(this.ScrollBar.BGChart.LineWidth=r.LineWidth)}}t.FrameButtomToolbar&&this.SetFrameButtomToolbar(t.FrameButtomToolbar),t.Keyboard&&this.SetKeyboardStyle(t.Keyboard)},this.SetKeyboardStyle=function(t){var e=t,a=this.Keyboard;if(e.BorderColor&&(a.BorderColor=e.BorderColor),e.SelectedColor&&(a.SelectedColor=e.SelectedColor),e.TextColor&&(a.TextColor=e.TextColor),e.Item){var i=e.Item;if(i.Mergin){var r=i.Mergin;we.IsNumber(r.Left)&&(a.Item.Mergin.Left=r.Left),we.IsNumber(r.Right)&&(a.Item.Mergin.Right=r.Right),we.IsNumber(r.Top)&&(a.Item.Mergin.Top=r.Top),we.IsNumber(r.Bottom)&&(a.Item.Mergin.Bottom=r.Bottom)}if(i.Font){var n=i.Font;n.Name&&(a.Item.Font.Name=n.Name),we.IsNumber(n.Size)&&(a.Item.Font.Size=n.Size)}if(i.BarMergin){var r=i.BarMergin;we.IsNumber(r.Left)&&(a.Item.BarMergin.Left=r.Left),we.IsNumber(r.Top)&&(a.Item.BarMergin.Top=r.Top),we.IsNumber(r.Right)&&(a.Item.BarMergin.Right=r.Right),we.IsNumber(r.Bottom)&&(a.Item.BarMergin.Bottom=r.Bottom)}if(i.NameFont){var n=i.NameFont;n.Name&&(a.Item.NameFont.Name=n.Name),we.IsNumber(n.Size)&&(a.Item.NameFont.Size=n.Size)}if(i.SymbolFont){var n=i.SymbolFont;n.Name&&(a.Item.SymbolFont.Name=n.Name),we.IsNumber(n.Size)&&(a.Item.SymbolFont.Size=n.Size)}}if(e.VScrollbar){var o=e.VScrollbar;if(we.IsNumber(o.ScrollBarHeight)&&(a.VScrollbar.ScrollBarHeight=o.ScrollBarHeight),o.ButtonColor&&(a.VScrollbar.ButtonColor=o.ButtonColor),o.BarColor&&(a.VScrollbar.BarColor=o.BarColor),o.BorderColor&&(a.VScrollbar.BorderColor=o.BorderColor),o.BGColor&&(a.VScrollbar.BGColor=o.BGColor),o.BarWidth){var s=o.BarWidth;we.IsNumber(s.Size)&&(a.VScrollbar.BarWidth.Size=s.Size)}}},this.SetReportStyle=function(t){var e=t,a=this.Report;if(e.BorderColor&&(this.Report.BorderColor=e.BorderColor),e.UpTextColor&&(this.Report.UpTextColor=e.UpTextColor),e.DownTextColor&&(this.Report.DownTextColor=e.DownTextColor),e.UnchagneTextColor&&(this.Report.UnchagneTextColor=e.UnchagneTextColor),e.BorderColor&&(this.Report.SelectedColor=e.SelectedColor),e.CloseLine){var i=e.CloseLine;i.CloseColor&&(this.Report.CloseLine.CloseColor=i.CloseColor),i.YCloseColor&&(this.Report.CloseLine.YCloseColor=i.YCloseColor),i.AreaColor&&(this.Report.CloseLine.AreaColor=i.AreaColor)}if(e.KLine){var r=e.KLine;r.UpColor&&(this.Report.KLine.UpColor=r.UpColor),r.DownColor&&(this.Report.KLine.DownColor=r.DownColor),r.UnchagneColor&&(this.Report.KLine.UnchagneColor=r.UnchagneColor),we.IsNumber(r.DataWidth)&&(this.Report.KLine.DataWidth=r.DataWidth),we.IsNumber(r.DistanceWidth)&&(this.Report.KLine.DistanceWidth=r.DistanceWidth)}if(e.Header){var n=e.Header;if(n.Color&&(this.Report.Header.Color=n.Color),n.Mergin){var o=n.Mergin;we.IsNumber(o.Left)&&(this.Report.Header.Mergin.Left=o.Left),we.IsNumber(o.Right)&&(this.Report.Header.Mergin.Left=o.Right),we.IsNumber(o.Top)&&(this.Report.Header.Mergin.Top=o.Top),we.IsNumber(o.Bottom)&&(this.Report.Header.Mergin.Bottom=o.Bottom)}if(n.Font){var s=n.Font;s.Name&&(this.Report.Header.Font.Name=s.Name),we.IsNumber(s.Size)&&(this.Report.Header.Font.Size=s.Size)}}if(e.Item){var l=e.Item;if(l.Mergin){var o=l.Mergin;we.IsNumber(o.Left)&&(this.Report.Item.Mergin.Left=o.Left),we.IsNumber(o.Right)&&(this.Report.Item.Mergin.Right=o.Right),we.IsNumber(o.Top)&&(this.Report.Item.Mergin.Top=o.Top),we.IsNumber(o.Bottom)&&(this.Report.Item.Mergin.Bottom=o.Bottom)}if(l.Font){var s=l.Font;s.Name&&(this.Report.Item.Font.Name=s.Name),we.IsNumber(s.Size)&&(this.Report.Item.Font.Size=s.Size)}if(l.BarMergin){var o=l.BarMergin;we.IsNumber(o.Left)&&(this.Report.Item.BarMergin.Left=o.Left),we.IsNumber(o.Top)&&(this.Report.Item.BarMergin.Top=o.Top),we.IsNumber(o.Right)&&(this.Report.Item.BarMergin.Right=o.Right),we.IsNumber(o.Bottom)&&(this.Report.Item.BarMergin.Bottom=o.Bottom)}if(l.NameFont){var s=l.NameFont;s.Name&&(this.Report.Item.NameFont.Name=s.Name),we.IsNumber(s.Size)&&(this.Report.Item.NameFont.Size=s.Size)}if(l.SymbolFont){var s=l.SymbolFont;s.Name&&(this.Report.Item.SymbolFont.Name=s.Name),we.IsNumber(s.Size)&&(this.Report.Item.SymbolFont.Size=s.Size)}}if(e.FixedItem){var l=e.FixedItem;if(l.Font){var s=l.Font;s.Name&&(this.Report.FixedItem.Font.Name=s.Name),we.IsNumber(s.Size)&&(this.Report.FixedItem.Font.Size=s.Size)}}if(e.LimitBorder){var h=e.LimitBorder;if(h.Color&&(this.Report.LimitBorder.Color=h.Color),h.Mergin){var o=h.Mergin;we.IsNumber(o.Left)&&(this.Report.LimitBorder.Mergin.Left=o.Left),we.IsNumber(o.Top)&&(this.Report.LimitBorder.Mergin.Top=o.Top),we.IsNumber(o.Right)&&(this.Report.LimitBorder.Mergin.Right=o.Right),we.IsNumber(o.Bottom)&&(this.Report.LimitBorder.Mergin.Bottom=o.Bottom)}}if(e.LimitColor){var h=e.LimitColor;h.UpColor&&(this.Report.LimitColor.UpColor=h.UpColor),h.DownColor&&(this.Report.LimitColor.DownColor=h.DownColor),h.TextColor&&(this.Report.LimitColor.UpColor=h.TextColor)}if(e.FieldColor){var u=e.FieldColor;if(u.Name&&(this.Report.FieldColor.Name=u.Name),u.Symbol&&(this.Report.FieldColor.Symbol=u.Symbol),u.Vol&&(this.Report.FieldColor.Vol=u.Vol),u.Amount&&(this.Report.FieldColor.Amount=u.Amount),u.Index&&(this.Report.FieldColor.Index=u.Index),u.BarTitle&&(this.Report.FieldColor.BarTitle=u.BarTitle),u.Text&&(this.Report.FieldColor.Text=u.Text),we.IsNonEmptyArray(u.Bar))for(var C=0;C<u.Bar.length;++C)this.Report.FieldColor.Bar[C]=u.Bar[C]}if(e.NameSymbolV2){var c=e.NameSymbolV2;if(c.Name){var f=c.Name;we.IsNumber(f.Size)&&(this.Report.NameSymbolV2.Name.Size=f.Size),f.Name&&(this.Report.NameSymbolV2.Name.Name=f.Name),f.Color&&(this.Report.NameSymbolV2.Name.Color=f.Color)}if(c.Symbol){var f=c.Symbol;we.IsNumber(f.Size)&&(this.Report.NameSymbolV2.Symbol.Size=f.Size),f.Name&&(this.Report.NameSymbolV2.Symbol.Name=f.Name),f.Color&&(this.Report.NameSymbolV2.Symbol.Color=f.Color)}}if(e.Tab){var d=e.Tab;if(d.Font){var s=d.Font;s.Name&&(this.Report.Tab.Font.Name=s.Name),we.IsNumber(s.Size)&&(this.Report.Tab.Font.Size=s.Size)}we.IsNumber(d.ScrollBarWidth)&&(this.Report.Tab.ScrollBarWidth=d.ScrollBarWidth),d.ButtonColor&&(this.Report.Tab.ButtonColor=d.ButtonColor),d.BarColor&&(this.Report.Tab.BarColor=d.BarColor),d.BorderColor&&(this.Report.Tab.BorderColor=d.BorderColor),d.TabTitleColor&&(this.Report.Tab.TabTitleColor=d.TabTitleColor),d.TabSelectedTitleColor&&(this.Report.Tab.TabSelectedTitleColor=d.TabSelectedTitleColor),d.TabSelectedBGColor&&(this.Report.Tab.TabSelectedBGColor=d.TabSelectedBGColor),d.TabMoveOnTitleColor&&(this.Report.Tab.TabMoveOnTitleColor=d.TabMoveOnTitleColor),d.TabBGColor&&(this.Report.Tab.TabBGColor=d.TabBGColor)}if(e.PageInfo){var D=e.PageInfo;if(D.Font){var s=D.Font;s.Name&&(this.Report.PageInfo.Font.Name=s.Name),we.IsNumber(s.Size)&&(this.Report.PageInfo.Font.Size=s.Size)}if(D.TextColor&&(this.Report.PageInfo.TextColor=D.TextColor),D.BGColor&&(this.Report.PageInfo.BGColor=D.BGColor),D.Mergin){var o=D.Mergin;we.IsNumber(o.Left)&&(this.Report.PageInfo.Mergin.Left=o.Left),we.IsNumber(o.Top)&&(this.Report.PageInfo.Mergin.Top=o.Top),we.IsNumber(o.Right)&&(this.Report.PageInfo.Mergin.Right=o.Right),we.IsNumber(o.Bottom)&&(this.Report.PageInfo.Mergin.Bottom=o.Bottom)}}if(e.DragRow){var m=e.DragRow;m.Color&&(this.Report.DragRow.Color=m.Color),m.TextColor&&(this.Report.DragRow.TextColor=m.TextColor),m.MoveRowColor&&(this.Report.DragRow.MoveRowColor=m.MoveRowColor),m.SrcRowColor&&(this.Report.DragRow.SrcRowColor=m.SrcRowColor)}if(e.VScrollbar){var f=e.VScrollbar;we.IsNumber(f.ScrollBarHeight)&&(a.VScrollbar.ScrollBarHeight=f.ScrollBarHeight),f.ButtonColor&&(a.VScrollbar.ButtonColor=f.ButtonColor),f.BarColor&&(a.VScrollbar.BarColor=f.BarColor),f.BorderColor&&(a.VScrollbar.BorderColor=f.BorderColor),f.BGColor&&(a.VScrollbar.BGColor=f.BGColor)}if(e.CheckBox){var f=e.CheckBox;if(f.Family&&(a.CheckBox.Family=f.Family),we.IsNumber(f.Size)&&(a.CheckBox.Size=f.Size),f.Checked){var p=f.Checked;p.Color&&(a.CheckBox.Checked.Color=p.Color),p.Symbol&&(a.CheckBox.Checked.Symbol=p.Symbol),p.DisableColor&&(a.CheckBox.Checked.DisableColor=p.DisableColor)}if(f.Unchecked){var p=f.Unchecked;p.Color&&(a.CheckBox.Unchecked.Color=p.Color),p.Symbol&&(a.CheckBox.Unchecked.Symbol=p.Symbol),p.DisableColor&&(a.CheckBox.Unchecked.DisableColor=p.DisableColor)}S(a.CheckBox.Margin,f.Margin)}if(e.Link){var f=e.Link;f.Font&&(a.Link.Font=f.Font),f.TextColor&&(a.Link.TextColor=f.TextColor),f.Disable&&f.Disable.TextColor&&(a.Link.Disable.TextColor=f.Disable.TextColor),f.MouseOn&&f.MouseOn.TextColor&&(a.Link.MouseOn.TextColor=f.MouseOn.TextColor)}if(e.ProgressBar){var f=e.ProgressBar;f.BGColor&&(a.ProgressBar.BGColor=f.BGColor),f.BarColor&&(a.ProgressBar.BarColor=f.BarColor),f.TextColor&&(a.ProgressBar.TextColor=f.TextColor),f.Font&&(a.ProgressBar.Font=f.Font),f.Disable&&(f.Disable.BGColor&&(a.ProgressBar.Disable.BGColor=f.Disable.BGColor),f.Disable.BarColor&&(a.ProgressBar.Disable.BarColor=f.Disable.BarColor),f.Disable.TextColor&&(a.ProgressBar.Disable.TextColor=f.Disable.TextColor)),S(a.ProgressBar.Margin,f.Margin),S(a.ProgressBar.BarMargin,f.BarMargin),S(a.ProgressBar.TextMargin,f.TextMargin)}if(e.Buttom){var f=e.Buttom;f.BGColor&&(a.Buttom.BGColor=f.BGColor),f.TextColor&&(a.Buttom.TextColor=f.TextColor),f.BorderColor&&(a.Buttom.BorderColor=f.BorderColor),f.Font&&(a.Buttom.Font=f.Font),f.Disable&&(f.Disable.BGColor&&(a.Buttom.Disable.BGColor=f.Disable.BGColor),f.Disable.TextColor&&(a.Buttom.Disable.TextColor=f.Disable.TextColor)),f.MouseOn&&(f.MouseOn.BGColor&&(a.Buttom.MouseOn.BGColor=f.MouseOn.BGColor),f.MouseOn.TextColor&&(a.Buttom.MouseOn.TextColor=f.MouseOn.TextColor)),S(a.Buttom.Margin,f.Margin),S(a.Buttom.TextMargin,f.TextMargin)}},this.SetTReportStyle=function(t){var e=t,a=this.TReport;if(e.BorderColor&&(a.BorderColor=e.BorderColor),e.UpTextColor&&(a.UpTextColor=e.UpTextColor),e.DownTextColor&&(a.DownTextColor=e.DownTextColor),e.UnchangeTextColor&&(a.UnchangeTextColor=e.UnchangeTextColor),e.BorderColor&&(a.SelectedColor=e.SelectedColor),e.UpBGColor&&(a.UpBGColor=e.UpBGColor),e.DownBGColor&&(a.DownBGColor=e.DownBGColor),e.Header){var i=e.Header;if(i.Color&&(a.Header.Color=i.Color),i.SortColor&&(a.Header.SortColor=i.SortColor),i.Mergin){var r=i.Mergin;we.IsNumber(r.Left)&&(a.Header.Mergin.Left=r.Left),we.IsNumber(r.Right)&&(a.Header.Mergin.Left=r.Right),we.IsNumber(r.Top)&&(a.Header.Mergin.Top=r.Top),we.IsNumber(r.Bottom)&&(a.Header.Mergin.Bottom=r.Bottom)}if(i.Font){var n=i.Font;n.Name&&(a.Header.Font.Name=n.Name),we.IsNumber(n.Size)&&(a.Header.Font.Size=n.Size)}}if(e.CenterItem){var o=e.CenterItem;o.TextColor&&(a.CenterItem.TextColor=o.TextColor),o.BaseTextColor&&(a.CenterItem.BaseTextColor=o.BaseTextColor),o.BGColor&&(a.CenterItem.BGColor=o.BGColor)}if(e.Item){var s=e.Item;if(s.Mergin){var r=s.Mergin;we.IsNumber(r.Left)&&(a.Item.Mergin.Left=r.Left),we.IsNumber(r.Right)&&(a.Item.Mergin.Right=r.Right),we.IsNumber(r.Top)&&(a.Item.Mergin.Top=r.Top),we.IsNumber(r.Bottom)&&(a.Item.Mergin.Bottom=r.Bottom)}if(s.Font){var n=s.Font;n.Name&&(a.Item.Font.Name=n.Name),we.IsNumber(n.Size)&&(a.Item.Font.Size=n.Size)}if(s.NameFont){var n=s.NameFont;n.Name&&(a.Item.NameFont.Name=n.Name),we.IsNumber(n.Size)&&(a.Item.NameFont.Size=n.Size)}if(s.SymbolFont){var n=s.SymbolFont;n.Name&&(a.Item.SymbolFont.Name=n.Name),we.IsNumber(n.Size)&&(a.Item.SymbolFont.Size=n.Size)}}if(e.FieldColor){var l=e.FieldColor;l.Name&&(a.FieldColor.Name=l.Name),l.Symbol&&(a.FieldColor.Symbol=l.Symbol),l.Vol&&(a.FieldColor.Vol=l.Vol),l.Amount&&(a.FieldColor.Amount=l.Amount),l.Index&&(a.FieldColor.Index=l.Index),l.Text&&(a.FieldColor.Text=l.Text),l.Position&&(a.FieldColor.Position=l.Position)}if(e.MarkBorder){var h=e.MarkBorder;h.MaxPositionColor&&(a.MarkBorder.MaxPositionColor=h.MaxPositionColor)}if(e.FixedItem){var h=e.FixedItem;if(h.Font){var n=h.Font;n.Name&&(a.FixedItem.Font.Name=n.Name),we.IsNumber(n.Size)&&(a.FixedItem.Font.Size=n.Size)}}},this.SetFrameButtomToolbar=function(t){var e=this.FrameButtomToolbar;if(t.BGColor&&(e.BGColor=t.BGColor),t.BorderColor&&(e.BorderColor=t.BorderColor),t.Button){var a=t.Button;if(a.BorderColor&&(e.Button.BorderColor=a.BorderColor),a.Font){var i=a.Font,r=this.FrameButtomToolbar.Button.Font;i.Family&&(r.Family=i.Family),we.IsNumber(i.Size)&&(r.Size=i.Size)}if(a.TitleColor){var i=a.TitleColor,r=this.FrameButtomToolbar.Button.TitleColor;i.Selected&&(r.Selected=i.Selected),i.Default&&(r.Default=i.Default),i.MoveOn&&(r.MoveOn=i.MoveOn)}if(a.BGColor){var i=a.BGColor,r=this.FrameButtomToolbar.Button.BGColor;i.Selected&&(r.Selected=i.Selected),i.Default&&(r.Default=i.Default),i.MoveOn&&(r.MoveOn=i.MoveOn)}if(a.Mergin){var i=a.Mergin,r=this.FrameButtomToolbar.Button.Mergin;we.IsNumber(i.Left)&&(r.Left=i.Left),we.IsNumber(i.Right)&&(r.Left=i.Right),we.IsNumber(i.Top)&&(r.Top=i.Top),we.IsNumber(i.Bottom)&&(r.Bottom=i.Bottom)}if(a.SVG){var i=a.SVG,r=this.FrameButtomToolbar.Button.SVG;we.IsNumber(i.Size)&&(r.Size=i.Size),we.IsNumber(i.MerginLeft)&&(r.MerginLeft=i.MerginLeft),i.Family&&(r.Family=i.Family)}}}}function fi(){this.TextResource=new Vn.default([["Tooltip-Open",{CN:"å¼:",EN:"O:",TC:"é"}],["Tooltip-High",{CN:"é«:",EN:"H:",TC:"é«"}],["Tooltip-Low",{CN:"ä½:",EN:"L:",TC:"ä½"}],["Tooltip-Close",{CN:"æ¶:",EN:"C:",TC:"æ¶"}],["Tooltip-Increase",{CN:"å¹:",EN:"I:",TC:"å¹"}],["Tooltip-Vol",{CN:"é:",EN:"V:",TC:"é"}],["Tooltip-Amount",{CN:"é¢:",EN:"A:",TC:"é¡"}],["Tooltip-AvPrice",{CN:"å:",EN:"AP:",TC:"å"}],["Tooltip-Price",{CN:"ä»·:",EN:"P:",TC:"å¹"}],["Tooltip-Exchange",{CN:"æ¢:",EN:"E:",TC:"æ"}],["Tooltip-Position",{CN:"æ:",EN:"P:",TC:"æ"}],["DivTooltip-Open",{CN:"å¼ç:",EN:"Open:",TC:"éç¤"}],["DivTooltip-High",{CN:"æé«:",EN:"High:",TC:"æé«"}],["DivTooltip-Low",{CN:"æä½:",EN:"Low:",TC:"æä½"}],["DivTooltip-Close",{CN:"æ¶ç:",EN:"Close:",TC:"æ¶ç¤"}],["DivTooltip-Increase",{CN:"æ¶¨å¹:",EN:"Increase:",TC:"æ¼²å¹"}],["DivTooltip-Vol",{CN:"æ°é:",EN:"Volume:",TC:"æ¸é"}],["DivTooltip-Amount",{CN:"éé¢:",EN:"Amount:",TC:"éé¡"}],["DivTooltip-Exchange",{CN:"æ¢æ:",EN:"Exchange:",TC:"ææ"}],["DivTooltip-Position",{CN:"æä»:",EN:"Position:",TC:"æå"}],["DivTooltip-Price",{CN:"ä»·æ ¼:",EN:"Price:",TC:"å¹æ ¼"}],["DialogTooltip-Date",{CN:"æ¥æ",EN:"Date",TC:"æ¥æ"}],["DialogTooltip-Time",{CN:"æ¶é´",EN:"Time",TC:"æé"}],["DialogTooltip-Open",{CN:"å¼çä»·",EN:"Open",TC:"éç¤å¹"}],["DialogTooltip-High",{CN:"æé«ä»·",EN:"High",TC:"æé«å¹"}],["DialogTooltip-Low",{CN:"æä½ä»·",EN:"Low",TC:"æä½å¹"}],["DialogTooltip-Close",{CN:"æ¶çä»·",EN:"Close",TC:"æ¶ç¤å¹"}],["DialogTooltip-Increase",{CN:"æ¶¨å¹",EN:"Increase",TC:"æ¼²å¹"}],["DialogTooltip-Risefall",{CN:"æ¶¨è·",EN:"Risefall",TC:"æ¼²è·"}],["DialogTooltip-Vol",{CN:"æäº¤é",EN:"Volume",TC:"æ¸é"}],["DialogTooltip-Amount",{CN:"æäº¤é¢",EN:"Amount",TC:"éé¡"}],["DialogTooltip-Exchange",{CN:"æ¢æç",EN:"Exchange",TC:"ææ"}],["DialogTooltip-Position",{CN:"æä»é",EN:"Position",TC:"æå"}],["DialogTooltip-Price",{CN:"ä»·æ ¼",EN:"Price",TC:"å¹æ ¼"}],["DialogTooltip-AvPrice",{CN:"åä»·",EN:"AVPrice:",TC:"åå¹"}],["DialogTooltip-FClose",{CN:"ç»ç®ä»·",EN:"Settlement",TC:"çµç®å¹"}],["DialogTooltip-Amplitude",{CN:"æ¯å¹",EN:"amplitude",TC:"æ¯å¹"}],["DialogTooltip-AC-Price",{CN:"å¹éä»·",EN:"Price",TC:"å¹éå¹"}],["DialogTooltip-AC-AvPrice",{CN:"å¹éåä»·",EN:"AVPrice",TC:"å¹éåå¹"}],["DialogTooltip-AC-Increase",{CN:"ç«ä»·æ¶¨å¹",EN:"Increase",TC:"ç«¶å¹æ¼²å¹"}],["DialogTooltip-AC-Vol",{CN:"å¹éé",EN:"Vol",TC:"å¹éé"}],["DialogTooltip-Value",{CN:"æ°å¼",EN:"Value",TC:"æ°å¼"}],["FloatTooltip-Date",{CN:"æ¥æ",EN:"Date",TC:"æ¥æ"}],["FloatTooltip-Time",{CN:"æ¶é´",EN:"Time",TC:"æé"}],["FloatTooltip-Open",{CN:"å¼çä»·",EN:"Open",TC:"éç¤å¹"}],["FloatTooltip-High",{CN:"æé«ä»·",EN:"High",TC:"æé«å¹"}],["FloatTooltip-Low",{CN:"æä½ä»·",EN:"Low",TC:"æä½å¹"}],["FloatTooltip-Close",{CN:"æ¶çä»·",EN:"Close",TC:"æ¶ç¤å¹"}],["FloatTooltip-YClose",{CN:"æ¨æ¶ä»·",EN:"YClose",TC:"æ¨æ¶å¹"}],["FloatTooltip-Increase",{CN:"æ¶¨å¹",EN:"Increase",TC:"æ¼²å¹"}],["FloatTooltip-Risefall",{CN:"æ¶¨è·",EN:"Risefall",TC:"æ¼²è·"}],["FloatTooltip-Vol",{CN:"æäº¤é",EN:"Volume",TC:"æ¸é"}],["FloatTooltip-Amount",{CN:"æäº¤é¢",EN:"Amount",TC:"éé¡"}],["FloatTooltip-Exchange",{CN:"æ¢æç",EN:"Exchange",TC:"ææ"}],["FloatTooltip-Position",{CN:"æä»é",EN:"Position",TC:"æå"}],["FloatTooltip-Price",{CN:"ä»·æ ¼",EN:"Price",TC:"å¹æ ¼"}],["FloatTooltip-AvPrice",{CN:"åä»·",EN:"AVPrice:",TC:"åå¹"}],["FloatTooltip-FClose",{CN:"ç»ç®ä»·",EN:"Settlement",TC:"çµç®å¹"}],["FloatTooltip-YSettlePrice",{CN:"æ¨ç»ç®",EN:"YSettlement",TC:"æ¨çµç®"}],["FloatTooltip-Amplitude",{CN:"æ¯å¹",EN:"amplitude",TC:"æ¯å¹"}],["DialogSelectRect-StartPrice",{CN:"èµ·å§ä»·:",EN:"Start Price:",TC:"èµ·å§å¹"}],["DialogSelectRect-EndPrice",{CN:"æç»ä»·:",EN:"End Price:",TC:"æç»å¹"}],["DialogSelectRect-High",{CN:"æé«ä»·:",EN:"High:",TC:"æé«å¹"}],["DialogSelectRect-Low",{CN:"æä½ä»·:",EN:"Low:",TC:"æä½å¹"}],["DialogSelectRect-Increase",{CN:"åºé´æ¶¨å¹:",EN:"Increase",TC:"æ¼²å¹"}],["DialogSelectRect-Amplitude",{CN:"åºé´æ¯å¹:",EN:"amplitude",TC:"æ¯å¹"}],["DialogSelectRect-Vol",{CN:"æäº¤é:",EN:"Volume",TC:"æ¸é"}],["DialogSelectRect-Amount",{CN:"æäº¤é¢:",EN:"Amount",TC:"éé¡"}],["DialogSelectRect-Up",{CN:"é³çº¿:",EN:"Up",TC:"é³çº¿"}],["DialogSelectRect-Down",{CN:"é´çº¿:",EN:"Down",TC:"é´çº¿"}],["DialogSelectRect-Unchanged",{CN:"å¹³çº¿:",EN:"Unchanged",TC:"å¹³çº¿"}],["DialogSelectRect-DataCount",{CN:"æ°æ®ä¸ªæ°:",EN:"Data Count:",TC:"æ°æ®ä¸ªæ°"}],["PCTooltip-Date",{CN:"æ¥æ",EN:"Date",TC:"æ¥æ"}],["PCTooltip-Time",{CN:"æ¶é´",EN:"Time",TC:"æé"}],["PCTooltip-Price",{CN:"ä»·æ ¼",EN:"Price:",TC:"å¹æ ¼"}],["PCTooltip-AvPrice",{CN:"åä»·",EN:"AVPrice:",TC:"åå¹"}],["PCTooltip-Increase",{CN:"æ¶¨å¹",EN:"Increase:",TC:"æ¼²å¹"}],["PCTooltip-Vol",{CN:"æäº¤é",EN:"Volume:",TC:"æäº¤é"}],["PCTooltip-Amount",{CN:"æäº¤é¢",EN:"Amount:",TC:"æäº¤é¡"}],["PCTooltip-Position",{CN:"æä»é",EN:"Position:",TC:"æå"}],["PCTooltip-AC-Price",{CN:"å¹éä»·:",EN:"Price:",TC:"å¹éå¹"}],["PCTooltip-AC-Increase",{CN:"ç«ä»·æ¶¨å¹:",EN:"Increase:",TC:"ç«¶å¹æ¼²å¹"}],["PCTooltip-AC-Vol",{CN:"å¹éé:",EN:"V:",TC:"å¹éé"}],["PCTooltip-AC-NotMatchVol",{CN:"æªå¹éé:",EN:"NV:",TC:"æªå¹éé"}],["KTitle-Open",{CN:"å¼:",EN:"O:",TC:"é"}],["KTitle-High",{CN:"é«:",EN:"H:",TC:"é«"}],["KTitle-Low",{CN:"ä½:",EN:"L:",TC:"ä½"}],["KTitle-Close",{CN:"æ¶:",EN:"C:",TC:"æ¶"}],["KTitle-Increase",{CN:"å¹:",EN:"I:",TC:"å¹"}],["KTitle-Vol",{CN:"é:",EN:"V:",TC:"é"}],["KTitle-Amount",{CN:"é¢:",EN:"A:",TC:"é¡"}],["KTitle-Exchange",{CN:"æ¢:",EN:"E:",TC:"æ"}],["KTitle-Position",{CN:"æ:",EN:"P:",TC:"æ"}],["KTitle-Price",{CN:"ä»·:",EN:"Price:",TC:"å¹"}],["MTitle-AC-Price",{CN:"å¹éä»·:",EN:"C:",TC:"å¹éå¹"}],["MTitle-AC-AvPrice",{CN:"å¹éåä»·:",EN:"C:",TC:"å¹éåå¹"}],["MTitle-AC-Increase",{CN:"ç«ä»·æ¶¨å¹:",EN:"I:",TC:"ç«¶å¹æ¼²å¹"}],["MTitle-AC-Vol",{CN:"å¹éé:",EN:"V:",TC:"å¹éé"}],["MTitle-AC-NotMatchVol",{CN:"æªå¹éé:",EN:"NV:",TC:"æªå¹éé"}],["MTitle-AC-Amount",{CN:"å¹éééé¢:",EN:"A:",TC:"å¹éééé¢"}],["MTitle-AC-NotMatchAmount",{CN:"æªå¹éééé¢:",EN:"NA:",TC:"æªå¹éééé¢"}],["MTitle-Close",{CN:"ä»·:",EN:"C:",TC:"å¹"}],["MTitle-AvPrice",{CN:"å:",EN:"AC:",TC:"å"}],["MTitle-Increase",{CN:"å¹:",EN:"I:",TC:"å¹"}],["MTitle-Vol",{CN:"é:",EN:"V:",TC:"é"}],["MTitle-Amount",{CN:"é¢:",EN:"A:",TC:"é¡"}],["MTitle-Position",{CN:"æ:",EN:"P:",TC:"æ"}],["MTitle-UpdateTime",{CN:"æ´æ°:",EN:"Update:",TC:"æ´æ°:"}],["æ¥çº¿",{CN:"æ¥çº¿",EN:"1D",TC:"æ¥ç¶«"}],["å¨çº¿",{CN:"å¨çº¿",EN:"1W",TC:"å¨ç¶«"}],["åå¨",{CN:"åå¨",EN:"2W",TC:"éå¨"}],["æçº¿",{CN:"æçº¿",EN:"1M",TC:"æç¶«"}],["åå¹´",{CN:"åå¹´",EN:"HY",TC:"åå¹´"}],["å¹´çº¿",{CN:"å¹´çº¿",EN:"1Y",TC:"å¹´ç¶«"}],["1å",{CN:"1å",EN:"1Min",TC:"1å"}],["5å",{CN:"5å",EN:"5Min",TC:"5å"}],["15å",{CN:"15å",EN:"15Min",TC:"15å"}],["30å",{CN:"30å",EN:"30Min",TC:"30å"}],["60å",{CN:"60å",EN:"60Min",TC:"60å"}],["å­£çº¿",{CN:"å­£çº¿",EN:"1Q",TC:"å­£ç¶«"}],["åç¬",{CN:"åç¬",EN:"Tick",TC:"åç­"}],["2å°æ¶",{CN:"2å°æ¶",EN:"2H",TC:"2å°æ"}],["4å°æ¶",{CN:"4å°æ¶",EN:"4H",TC:"4å°æ"}],["ä¸å¤æ",{CN:"ä¸å¤æ",EN:"No Right",TC:"ä¸å¾©æ¬"}],["åå¤æ",{CN:"åå¤æ",EN:"Pro Right",TC:"åå¾©æ¬"}],["åå¤æ",{CN:"åå¤æ",EN:"Post Right",TC:"åå¾©æ¬"}],["æ¥",{CN:"æ¥",EN:"Sun.",TC:"æ¥"}],["ä¸",{CN:"ä¸",EN:"Mon.",TC:"å£¹"}],["äº",{CN:"äº",EN:"Tues.",TC:"è²³"}],["ä¸",{CN:"ä¸",EN:"Wed.",TC:"å"}],["å",{CN:"å",EN:"Thur.",TC:"è"}],["äº",{CN:"äº",EN:"Fri.",TC:"ä¼"}],["å­",{CN:"å­",EN:"Sat.",TC:"é¸"}],["1æ",{CN:"1æ",EN:"Jan",TC:"1æ"}],["2æ",{CN:"2æ",EN:"Feb",TC:"2æ"}],["3æ",{CN:"3æ",EN:"Mar",TC:"3æ"}],["4æ",{CN:"4æ",EN:"Apr",TC:"4æ"}],["5æ",{CN:"5æ",EN:"May",TC:"5æ"}],["6æ",{CN:"6æ",EN:"Jun",TC:"6æ"}],["7æ",{CN:"7æ",EN:"Jul",TC:"7æ"}],["8æ",{CN:"8æ",EN:"Aug",TC:"8æ"}],["9æ",{CN:"9æ",EN:"Sept",TC:"9æ"}],["10æ",{CN:"10æ",EN:"Oct",TC:"10æ"}],["11æ",{CN:"11æ",EN:"Nov",TC:"11æ"}],["12æ",{CN:"12æ",EN:"Dec",TC:"12æ"}],["èªå®ä¹åé",{CN:"å",EN:"Min",TC:"å"}],["èªå®ä¹æ¥çº¿",{CN:"æ¥",EN:"D",TC:"æ¥"}],["èªå®ä¹ç§",{CN:"ç§",EN:"S",TC:"ç§"}],["èªå®ä¹æ¯«ç§",{CN:"æ¯«ç§",EN:"MS",TC:"æ¯«ç§"}],["MVol-Vol",{CN:"æäº¤é",EN:"Volume",TC:"æäº¤é"}],["MVol-Position",{CN:"æä»é",EN:"Position",TC:"æåé"}],["Depth-Price",{CN:"å§æä»·",EN:"Price",TC:"å§æå¹"}],["Depth-Sum",{CN:"ç´¯è®¡",EN:"Sum",TC:"ç´¯è¨"}],["Toolbar-"+qn.MODIFY_INDEX_PARAM,{CN:"è°æ´ææ åæ°",EN:"Change indicator parameters",TC:"è°æ´ææ åæ°"}],["Toolbar-"+qn.CHANGE_INDEX,{CN:"éæ©ææ ",EN:"Change indicator",TC:"åæ¢ææ "}],["Toolbar-"+qn.CLOSE_INDEX_WINDOW,{CN:"å³é­çªå£",EN:"Delete window",TC:"å³é­ææ çªå£"}],["Toolbar-"+qn.OVERLAY_INDEX,{CN:"å å ææ ",EN:"Overlay indicator",TC:"å å ææ "}],["Toolbar-"+qn.MODIFY_OVERLAY_INDEX_PARAM,{CN:"è°æ´å å ææ åæ°",EN:"Change overlay indicator parameters",TC:"è°æ´å å ææ åæ°"}],["Toolbar-"+qn.MAX_MIN_WINDOW,{CN:"æå¤§å",EN:"Maximize",TC:"æå¤§å"}],["Toolbar-"+qn.TITLE_WINDOW,{CN:"æå çªå£",EN:"Collapse window",TC:"æå çªå£"}],["Toolbar-"+qn.EXPORT_DATA,{CN:"æ°æ®å¯¼åº",EN:"Export data",TC:"æ°æ®å¯¼åº"}],["Toolbar-"+qn.CLOSE_BEFOREOPEN_ID,{CN:"å³é­éåç«ä»·",EN:"Close call auction",TC:"å³é­éåç«ä»·"}],["Toolbar-"+qn.CLOSE_OVERLAY_INDEX,{CN:"å³é­å å ææ ",EN:"Delte overlay indicator",TC:"å³é­å å ææ "}],["Toolbar-"+qn.CHIP_RECENT,{CN:"è¿æææ¬åå¸",EN:"Recent chip",TC:"è¿æææ¬åå¸"}],["Toolbar-"+qn.CHIP_LONG,{CN:"è¿æææ¬åå¸",EN:"Long chip",TC:"è¿æææ¬åå¸"}],["Toolbar-"+qn.CHIP_DEFULT,{CN:"é»è®¤ç­¹ç åå¸",EN:"Default chip",TC:"é»è®¤ç­¹ç åå¸"}],["Toolbar-"+qn.DRAW_PICTURE_DELETE,{CN:"å é¤",EN:"Delete",TC:"å é¤"}],["Toolbar-"+qn.DRAW_PICTURE_SETTING,{CN:"è®¾ç½®",EN:"Setting",TC:"è®¾ç½®"}],["æ¥ç",{CN:"æ¥ç",EN:"Day",TC:"æ¥ç¤"}],["å¤ç",{CN:"å¤ç",EN:"Night",TC:"å¤ç¤"}]]),this.GetText=function(t,e){var a=this.TextResource.get(t);if(!a)return"";switch(e){case xo.LANGUAGE_CHINESE_ID:return a.CN;case xo.LANGUAGE_ENGLISH_ID:return a.EN;case xo.LANGUAGE_TRADITIONAL_CHINESE_ID:return a.TC;default:return a.CN}},this.SetTextResource=function(t,e){this.TextResource.set(t,e)},this.GetLanguageID=function(t){var e=null;switch(t){case"EN":e=xo.LANGUAGE_ENGLISH_ID;break;case"CN":e=xo.LANGUAGE_CHINESE_ID;break;case"TC":e=xo.LANGUAGE_TRADITIONAL_CHINESE_ID}return e},this.GetLanguageName=function(t){switch(t){case xo.LANGUAGE_ENGLISH_ID:return"EN";case xo.LANGUAGE_CHINESE_ID:return"CN";case xo.LANGUAGE_TRADITIONAL_CHINESE_ID:return"TC";default:return null}}}function di(){}function Di(){this.DataMap=new Vn.default([["RenkoCalculate",{Create:function(){return new mi}}],["HeikinAshiCalculate",{Create:function(){return new vi}}],["LineBreakCalcuate",{Create:function(){return new gi}}],["KagiCalculate",{Create:function(){return new pi}}]]),this.Create=function(t){return this.DataMap.has(t)?this.DataMap.get(t).Create():null}}function mi(){this.BrickSize=.05,this.SourceData,this.LastData,this.ATR={Count:14,BrickSize:.05},this.BrickSizeType=1,this.Symbol,this.FloatPrecision=2,this.ClassName="RenkoCalculate",this.SetOption=function(t){if(t&&(we.IsNumber(t.BrickSize)&&(this.BrickSize=t.BrickSize),we.IsNumber(t.BrickSizeType)&&(this.BrickSizeType=t.BrickSizeType),t.ATR)){var e=t.ATR;we.IsNumber(e.Count)&&(this.ATR.Count=e.Count)}},this.CalculateByClose=function(t){var e=new tt;if(e.Data=[],e.Right=t.Right,e.Period=t.Period,e.DataType=t.DataType,e.Symbol=t.symbol,!we.IsNonEmptyArray(t.Data))return e;var a=this.BrickSize;1==this.BrickSizeType&&(a=this.ATR.BrickSize);var i=t.Data[0];this.LastData=K.Copy(i);for(var r=1;r<t.Data.length;){var i=t.Data[r],n=i.Close-this.LastData.Close,o=i.Close-this.LastData.Open;if(Math.abs(n)>=a&&Math.abs(o)>=a){var s=0;if(n>0||o>0){var l=this.LastData.Close,h=Math.max(this.LastData.Close,this.LastData.Open),u=h+a,C=u,c=h;s=i.Vol}else{var l=this.LastData.Close,h=Math.min(this.LastData.Close,this.LastData.Open),u=h-a,C=h,c=u;s=i.Vol}var f=new K;f.Date=i.Date,f.Time=i.Time,f.YClose=l,f.Open=h,f.High=C,f.Low=c,f.Close=u,f.Vol=this.LastData.Vol+s,e.Data.push(f),this.LastData.YClose=f.YClose,this.LastData.Open=f.Open,this.LastData.High=f.High,this.LastData.Low=f.Low,this.LastData.Close=f.Close,this.LastData.Date=f.Date,this.LastData.Time=f.Time,this.LastData.Vol=0}else this.LastData.Vol+=i.Vol,++r}return e},this.RecvHistoryData=function(t,e){return this.Symbol=e.Symbol,this.SourceData=t,this.FloatPrecision=sr(this.Symbol),1==this.BrickSizeType&&this.CalculateATR(),this.CalculateByClose(t)},this.Clear=function(){this.SourceData=null,this.LastData=null,this.Symbol=null},this.GetTitle=function(){if(1==this.BrickSizeType)var t="Renko [ATR("+this.ATR.Count+"), "+this.ATR.BrickSize+"]";else var t="Renko [Traditional, "+this.BrickSize+"]";return t},this.CalculateATR=function(){if(we.IsNonEmptyArray(this.SourceData.Data)){for(var t=this.SourceData.Data,e=t.length,a=[],i=e-1,r=0;i>=0&&r<this.ATR.Count;--i,++r){var n=t[i],o=Math.max(n.High-n.Low,n.High-n.Close,n.Close-n.Low);a.push(o)}for(var s=0,i=0;i<a.length;++i)s+=a[i];var l=s/a.length,o=l.toFixed(this.FloatPrecision);this.ATR.BrickSize=parseFloat(o)}}}function pi(){this.newMethod=mi,this.newMethod(),delete this.newMethod,this.ClassName="KagiCalculate",this.BrickSizeType=0,this.BrickSize=.5,this.RecvHistoryData=function(t,e){return this.Symbol=e.Symbol,this.SourceData=t,this.FloatPrecision=sr(this.Symbol),1==this.BrickSizeType&&this.CalculateATR(),this.CalculateByClose(t)},this.CalculateByClose=function(t){var e=new tt;if(e.Data=[],e.Right=t.Right,e.Period=t.Period,e.DataType=t.DataType,e.Symbol=t.symbol,!we.IsNonEmptyArray(t.Data))return e;var a=this.BrickSize;1==this.BrickSizeType&&(a=this.ATR.BrickSize);var i=t.Data[0],r=K.Copy(i);r.High=r.Low=i.Close,r.StartItem=i,r.Direction=0;for(var n=1;n<t.Data.length;++n){var i=t.Data[n];if(i.Close>r.Close){r.Direction=1,r.Close=i.Close,r.EndItem=i,r.High=i.Close;break}if(i.Close<r.Close){r.Direction=2,r.Close=i.Close,r.EndItem=i,r.Low=i.Close;break}}var o=null;for(++n;n<t.Data.length;++n){var i=t.Data[n];if(1==r.Direction){if(i.Close>=r.High)r.Close=i.Close,r.High=i.Close,r.EndItem=i,o=null;else if(o?(o.Close=i.Close,o.Low>i.Close&&(o.Low=i.Close)):(o=K.Copy(i),o.High=o.Low=i.Close),Math.abs(o.Low-r.High)>a){e.Data.push(r);var s=K.Copy(i);s.High=r.High,s.Low=i.Close,s.Direction=2,s.StartItem=i,r=s,o=null}}else if(2==r.Direction)if(i.Close<=r.Low)r.Close=i.Close,r.Low=i.Close,r.EndItem=i;else if(o?(o.Close=i.Close,o.High<i.Close&&(o.High=i.Close)):(o=K.Copy(i),o.High=o.Low=i.Close),Math.abs(o.High-r.Low)>a){e.Data.push(r);var s=K.Copy(i);s.High=i.Close,s.Low=r.Low,s.Direction=1,s.StartItem=i,r=s,o=null}}return e},this.GetTitle=function(){if(1==this.BrickSizeType)var t="Kagi [ATR("+this.ATR.Count+"), "+this.ATR.BrickSize+"]";else var t="Kagi [Traditional]";return t}}function vi(){this.SourceData,this.Symbol,this.FloatPrecision=2,this.ClassName="HeikinAshiCalculate",this.Clear=function(){this.SourceData=null,this.LastData=null,this.Symbol=null},this.RecvHistoryData=function(t,e){return this.Symbol=e.Symbol,this.SourceData=t,this.FloatPrecision=sr(this.Symbol),this.Calculate(t)},this.GetTitle=function(){return"Heikin Ashi"},this.Calculate=function(t){var e=new tt;if(e.Data=[],e.Right=t.Right,e.Period=t.Period,e.DataType=t.DataType,e.Symbol=t.symbol,!we.IsNonEmptyArray(t.Data))return e;for(var a=null,i=null,r=0;r<t.Data.length;++r){var n=t.Data[r],o=K.Copy(n);a?(o.Close=(n.Close+n.Open+n.High+n.Low)/4,o.Open=(a.Close+a.Open)/2,o.YClose=i,o.High=Math.max(o.Close,o.Open,n.High),o.Low=Math.min(o.Close,o.Open,n.Low),i=o.Close):(o.Open=(n.Close+n.Open)/2,o.Close=(n.Close+n.Open+n.High+n.Low)/4,i=o.Close),a=n,e.Data.push(o)}return e}}function gi(){this.SourceData,this.Symbol,this.FloatPrecision=2,this.LineCount=3,this.ClassName="LineBreakCalcuate",this.Clear=function(){this.SourceData=null,this.LastData=null,this.Symbol=null},this.GetTitle=function(){return"Line Break ["+this.LineCount+"]"},this.RecvHistoryData=function(t,e){return this.Symbol=e.Symbol,this.SourceData=t,this.FloatPrecision=sr(this.Symbol),this.CalculateByClose(t)},this.CalculatePreviousKLine=function(t){for(var e=0;e<t.Data.length;++e){var a=t.Data[e];0==e?(t.High=a.High,t.Low=a.Low):(t.High<a.High&&(t.High=a.High),t.Low<a.Low&&(t.Low=a.Low)),t.Date=a.Date,t.Time=a.Time,t.Vol+=a.Vol,t.Amount+=a.Amount}},this.CalculateByClose=function(t){var e=new tt;if(e.Data=[],e.Right=t.Right,e.Period=t.Period,e.DataType=t.DataType,e.Symbol=t.symbol,!we.IsNonEmptyArray(t.Data))return e;for(var a=0,i={High:null,Low:null,Date:null,Time:null,Direction:0};a<t.Data.length&&a<this.LineCount;++a){var r=t.Data[a];0==n?(i.High=r.High,i.Low=r.Low):(i.High<r.High&&(i.High=r.High),i.Low>r.Low&&(i.Low=r.Low)),i.Date=r.Date,i.Time=r.Time,i.Vol+=r.Vol,i.Amount+=r.Amount}for(var n=a;n<t.Data.length;++n){var r=t.Data[n];if(r.Close>i.High){var o=new K;o.YClose=i.Low,o.Open=i.High,o.Close=r.Close,o.Low=Math.min(o.Open,o.Close),o.High=Math.max(o.Open,o.Close),o.Date=r.Date,o.Time=r.Time,o.Vol=r.Vol,o.Amount=r.Amount,o.Direction=1,e.Data.push(o),i=o}else if(r.Close<i.Low){var o=new K;o.YClose=i.High,o.Open=i.Low,o.Close=r.Close,o.Low=Math.min(o.Open,o.Close),o.High=Math.max(o.Open,o.Close),o.Date=r.Date,o.Time=r.Time,o.Vol=r.Vol,o.Amount=r.Amount,o.Direction=2,e.Data.push(o),i=o}else i&&(1==i.Direction||i.Direction,i.Vol+=r.Vol,i.Amount+=r.Amount)}return e}}function Ti(t,e,a){this.newMethod=u,this.newMethod(t,e,a),delete this.newMethod,this.ClassName="KLineChartContainer",this.WindowIndex=new Array,this.ColorIndex,this.TradeIndex,this.Symbol,this.Name,this.Period=0,this.IsApiPeriod=!1,this.Right=0,this.RightFormula=0,this.SourceData,this.MaxRequestDataCount=3e3,this.MaxRequestMinuteDayCount=5,this.PageSize=200,this.KLineDrawType=0,this.ScriptErrorCallback,this.FlowCapitalReady=!1,this.EnableFlowCapital={},this.EnableZoomUpDown=null,this.ChartDrawStorage=new hi,this.ChartDrawStorageCache=null,this.RightSpaceCount=0,this.SourceDataLimit=new Vn.default,this.CtrlMoveStep=5,this.CustomShow=null,this.ZoomType=0,this.IsZoomLockRight=!1,this.KLineSize=null,this.Page={Day:{Enable:!1,Index:0,Finish:!1},Minute:{Enable:!1,Index:0,Finish:!1}},this.DragDownload={Day:{Enable:!1,IsEnd:!1,Status:0},Minute:{Enable:!1,IsEnd:!1,Status:0},Tick:{Enable:!1,IsEnd:!1,Status:0}},this.ZoomDownload={Day:{Enable:!1,IsEnd:!1,Status:0},Minute:{Enable:!1,IsEnd:!1,Status:0},Tick:{Enable:!1,IsEnd:!1,Status:0}},this.IsAutoUpdate=!1,this.AutoUpdateFrequency=3e4,this.AutoUpdateTimer,this.KLineApiUrl=So.Domain+"/API/KLine2",this.MinuteKLineApiUrl=So.Domain+"/API/KLine3",this.DragMinuteKLineApiUrl=So.Domain+"/API/KLine4",this.DragKLineApiUrl=So.Domain+"/API/KLine5",this.ZoomMinuteKLineApiUrl=So.Domain+"/API/KLine4",this.ZoomKLineApiUrl=So.Domain+"/API/KLine5",this.RealtimeApiUrl=So.Domain+"/API/Stock",this.KLineMatchUrl=So.Domain+"/API/KLineMatch",this.StockHistoryDayApiUrl=So.Domain+"/API/StockHistoryDay",this.TickApiUrl=So.Domain+"/API/StockDetail",this.PopMinuteChart=null,this.BeforeBindMainData=null,this.AfterBindMainData=null,this.KLineCalculate=null,this.KLineCalcOption=new Vn.default,this.ScrollBar=null,this.IsAutoSyncDataOffset=!0,this.GetKLineCalulate=function(){var t,e=this.GetKLineDrawType();if(10==e)t="RenkoCalculate";else if(11==e)t="HeikinAshiCalculate";else if(12==e)t="LineBreakCalcuate";else{if(16!=e)return null;t="KagiCalculate"}if((!this.KLineCalculate||this.KLineCalculate.ClassName!=t)&&(this.KLineCalculate=yo.Create(t),this.KLineCalculate.SetOption&&this.KLineCalcOption.has(t))){var a=this.KLineCalcOption.get(t);this.KLineCalculate.SetOption(a)}return this.KLineCalculate},this.SetKLineCalcOption=function(t,e){this.KLineCalcOption.set(t,e),this.KLineCalculate&&this.KLineCalculate.ClassName==t&&this.KLineCalculate.SetOption&&this.KLineCalculate.SetOption(e)},this.ClearKLineCaluate=function(){this.KLineCalculate&&this.KLineCalculate.Clear&&this.KLineCalculate.Clear()},this.ResetDragDownload=function(){this.DragDownload.Day.Status=0,this.DragDownload.Day.IsEnd=!1,this.DragDownload.Minute.Status=0,this.DragDownload.Minute.IsEnd=!1,this.DragDownload.Tick.Status=0,this.DragDownload.Tick.IsEnd=!1},this.ResetZoomDownload=function(){this.ZoomDownload.Day.Status=0,this.ZoomDownload.Day.IsEnd=!1,this.ZoomDownload.Minute.Status=0,this.ZoomDownload.Minute.IsEnd=!1,this.ZoomDownload.Tick.Status=0,this.ZoomDownload.Tick.IsEnd=!1},this.ResetPage=function(){this.Page.Day.Finish=!1,this.Page.Day.Index=0,this.Page.Minute.Finish=!1,this.Page.Minute.Index=0},this.AddCustomKLine=function(t,e){var a=this.ChartPaint[0];if(a&&t){if(a.CustomKLine||(a.CustomKLine=new Vn.default),Array.isArray(t))for(var i=0;i<t.length;++i){var r=t[i];a.CustomKLine.set(r.Key,r.Data)}else t&&a.CustomKLine.set(t.Key,t.Data);e&&1==e.Draw&&this.Draw()}},this.ClearCustomKLine=function(t){var e=this.ChartPaint[0];e&&(e.ClearCustomKLine(),t&&1==t.Draw&&this.Draw())},this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::StopAutoUpdate"),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},this.SandTableOperator=function(t){switch(t.ID){case 1:this.StopAutoUpdate(),t.Data&&this.ManualUpdateKData(t);break;case 2:this.ManualUpdateKData(t);break;case 3:t.IsAutoUpdate&&(this.IsAutoUpdate=t.IsAutoUpdate),this.ChangeSymbol(this.Symbol)}},this.ManualUpdateKData=function(t){var e=t.Data,a=e.length,i=new tt;i.Data=e,i.Period=this.Period,i.Right=this.Right,i.Symbol=this.Symbol,this.UpdateMainData(i,a),this.BindInstructionIndexData(i);for(var r=0;r<this.Frame.SubFrame.length;++r)this.BindIndexData(r,i);if(we.IsNumber(t.DataOffset)&&t.DataOffset>=0){var n=null;n=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data,n&&(n.DataOffset=t.DataOffset)}this.UpdataDataoffset(),this.UpdatePointByCursorIndex(1),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.SendManualKLineUpdateEvent(i)},this.GetKDataInfo=function(){if(!this.ChartPaint[0])return null;var t=this.ChartPaint[0],e={};return t.Data&&t.Data.Data&&(e.Data=t.Data.CloneData("HistoryData")),e.ShowRange=t.ShowRange,e.Period=this.Period,e.RightSpaceCount=this.RightSpaceCount,e},this.ChartOperator=function(t){var e=t.ID;if(e===zn.OP_SCROLL_LEFT||e===zn.OP_SCROLL_RIGHT){var a=e===zn.OP_SCROLL_LEFT,i=1;t.Step>0&&(i=t.Step);var r=this.GetMoveOneStepWidth();this.DataMove(i*r,a)?(this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw()):e===zn.OP_SCROLL_RIGHT&&this.DragDownloadData&&this.DragDownloadData()}else if(e===zn.OP_ZOOM_IN||e===zn.OP_ZOOM_OUT){var n={};if(n.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),e===zn.OP_ZOOM_IN){if(!this.Frame.ZoomUp(n))return}else if(!this.Frame.ZoomDown(n))return;this.CursorIndex=n.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.ResetFrameXSplit(),this.Draw()}else if(e===zn.OP_GOTO_HOME){var o=this.ChartOperator_Temp_GetHistroyData();if(!o)return;var s=this.Frame.SubFrame[0].Frame.XPointCount;s-=this.RightSpaceCount;var l=o.Data.length-s;o.DataOffset=l,this.CursorIndex=0,this.LastPoint.X=null,this.LastPoint.Y=null,Xn.Chart.Log("[KLineChartContainer::ChartOperator] OP_GOTO_HOME, dataOffset="+o.DataOffset+" CursorIndex="+this.CursorIndex+" PageSize="+s),this.ChartOperator_Temp_Update()}else if(e===zn.OP_GOTO_END){var o=this.ChartOperator_Temp_GetHistroyData();if(!o)return;o.DataOffset=0,this.CursorIndex=0,this.LastPoint.X=null,this.LastPoint.Y=null,Xn.Chart.Log("[KLineChartContainer::ChartOperator] OP_GOTO_END "),this.ChartOperator_Temp_Update()}else if(e==zn.OP_LEFT_ZOOM_IN||e==zn.OP_LEFT_ZOOM_OUT){var o=this.ChartOperator_Temp_GetHistroyData();if(!o)return;var h=o.Data.length,s=this.Frame.SubFrame[0].Frame.XPointCount,u=o.DataOffset;if(e==zn.OP_LEFT_ZOOM_IN){if(we.IsNumber(t.Step)){if(s>=h)return;var i=t.Step;if(i>u&&(i=u),s+i>h&&(i=h-s),i<=0)return;s+=i,o.DataOffset-=i}}else if(e==zn.OP_LEFT_ZOOM_OUT){var c=this.GetMaxMinPageSize(),f=c.Min;if(we.IsNumber(t.Step)){if(s<f)return;var i=t.Step;if(s-i<f&&(i=s-f),i<=0)return;s-=i,o.DataOffset+=i}}for(var d in this.Frame.SubFrame){var D=this.Frame.SubFrame[d].Frame;D.XPointCount=s}o.DataOffset<0&&(o.DataOffset=0),this.ChartOperator_Temp_Update()}else if(e==zn.OP_RIGHT_ZOOM_IN||e==zn.OP_RIGHT_ZOOM_OUT){var o=this.ChartOperator_Temp_GetHistroyData();if(!o)return;var h=o.Data.length,s=this.Frame.SubFrame[0].Frame.XPointCount,u=o.DataOffset;if(e==zn.OP_RIGHT_ZOOM_IN){if(we.IsNumber(t.Step)){if(s>=h)return;var m=u+s,p=h-m;if(p<=0)return;var i=t.Step;if(i>p&&(i=p),i<=0)return;s+=i}}else if(e==zn.OP_RIGHT_ZOOM_OUT){var c=this.GetMaxMinPageSize(),f=c.Min;if(we.IsNumber(t.Step)){if(s<f)return;var i=t.Step;if(i>s&&(i=s),s-i<f&&(i=s-f),i<=0)return;s-=i}}for(var d in this.Frame.SubFrame){var D=this.Frame.SubFrame[d].Frame;D.XPointCount=s}o.DataOffset<0&&(o.DataOffset=0),this.ChartOperator_Temp_Update()}else{if(e==zn.OP_SET_SELECTRECT){if(!this.ChartPaint[0])return!1;if(!this.ChartPaint[0].Data)return!1;var o=this.ChartOperator_Temp_GetHistroyData();if(!we.IsNonEmptyArray(o.Data))return!1;var v=this.GetRectSelectPaint();if(!v)return!1;if(!tt.IsDayPeriod(this.Period,!0))return!1;for(var g,T,I,S,d=0;d<o.Data.length;++d){var D=o.Data[d];if(D.Date==t.Start.Date&&(g={KItem:D,DataIndex:d}),D.Date==t.End.Date&&(T={KItem:D,DataIndex:d}),t.SubClient&&t.SubClient.Start&&D.Date==t.SubClient.Start.Date&&(I={KItem:D,DataIndex:d}),t.SubClient&&t.SubClient.End&&D.Date==t.SubClient.End.Date&&(S={KItem:D,DataIndex:d}),g&&T)break}if(!g||!T)return Xn.Chart.Warn("[KLineChartContainer::ChartOperator][OP_SET_SELECTRECT] can't find date. firstPoint, secondPoint, obj",g,T,t),!1;v.SetPoint(g.KItem,{Index:0,DataIndex:g.DataIndex}),v.SetPoint(T.KItem,{Index:1,DataIndex:T.DataIndex}),I&&S&&(v.SetPoint(I.KItem,{Index:3,DataIndex:I.DataIndex}),v.SetPoint(S.KItem,{Index:4,DataIndex:S.DataIndex})),we.IsBool(t.PreventClose)&&(v.PreventClose=t.PreventClose);var x=!1,b=this.ChartPaint[0].DrawKRange;if(b&&(b.Start>=g.DataIndex&&b.Start>=T.DataIndex||b.End<=g.DataIndex&&b.End<=T.DataIndex)){var y=g.DataIndex,h=o.Data.length,s=this.ChartPaint[0].ShowRange.ShowCount;y+s>h&&(y=h-s),y<0&&(y=0),o.DataOffset=y,x=!0}return x?this.ChartOperator_Temp_Update():this.Draw(),!0}if(e==zn.OP_SET_SUB_SELECTRECT){if(!this.ChartPaint[0])return!1;if(!this.ChartPaint[0].Data)return!1;var o=this.ChartOperator_Temp_GetHistroyData();if(!we.IsNonEmptyArray(o.Data))return!1;var v=this.GetRectSelectPaint();if(!v)return!1;if(!tt.IsDayPeriod(this.Period,!0))return!1;for(var g,T,I,S,d=0;d<o.Data.length;++d){var D=o.Data[d];if(D.Date==t.Start.Date&&(g={KItem:D,DataIndex:d}),D.Date==t.End.Date&&(T={KItem:D,DataIndex:d}),g&&T)break}return g&&T?(v.SetPoint(g.KItem,{Index:3,DataIndex:g.DataIndex}),v.SetPoint(T.KItem,{Index:4,DataIndex:T.DataIndex}),this.Draw(),!0):(Xn.Chart.Warn("[KLineChartContainer::ChartOperator][OP_SET_SUB_SELECTRECT] can't find date. firstPoint, secondPoint, obj",g,T,t),!1)}if(e==zn.OP_SCROOLBAR_SLIDER_CHANGED){var o=this.ChartOperator_Temp_GetHistroyData();if(!o)return;if(0==t.Type)o.DataOffset=t.Start.Index,this.CursorIndex=0,this.LastPoint.X=null,this.LastPoint.Y=null,this.ChartOperator_Temp_Update();else if(1==t.Type||2==t.Type){var s=(t.Start.Index,t.End.Index-t.Start.Index+1),E=o.Data[t.Start.Index];o.Data[t.End.Index];this.Frame.SetXShowCount(s),o.DataOffset=t.Start.Index,this.CursorIndex=0,this.LastPoint.X=null,this.LastPoint.Y=null,this.ChartOperator_Temp_Update()}}else if(e==zn.OP_GOTO){if(!we.IsNumber(t.Date))return;var o=this.ChartOperator_Temp_GetHistroyData();if(!o)return;var l=this.ChartOperator_GetIndex_ByDateTime(o,t,this.Period,0);if(null===l)return void Xn.Chart.Log("[KLineChartContainer::ChartOperator] OP_GOTO can't find date="+t.Date+" time="+t.Time);var w=this.Frame.SubFrame[0].Frame.XPointCount,F=w;t.PageSize>0&&(F=t.PageSize),F!=w&&this.Frame.SetXShowCount(F),o.DataOffset=l,this.CursorIndex=0,this.LastPoint.X=null,this.LastPoint.Y=null,this.ChartOperator_Temp_Update()}else if(e==zn.OP_GOTO_BY_DATAINDEX){if(!we.IsNumber(t.DataIndex))return;var o=this.ChartOperator_Temp_GetHistroyData();if(!o)return;if(t.DataIndex<0||t.DataIndex>=o.Data.length)return void Xn.Chart.Log("[KLineChartContainer::ChartOperator] OP_GOTO_BY_DATAINDEX obj.DataIndex="+t.DataIndex+" error.}");var w=this.Frame.SubFrame[0].Frame.XPointCount,F=w;t.PageSize>0&&(F=t.PageSize),F!=w&&this.Frame.SetXShowCount(F),o.DataOffset=t.DataIndex,this.CursorIndex=0,this.LastPoint.X=null,this.LastPoint.Y=null,this.ChartOperator_Temp_Update()}else if(e==zn.OP_CORSSCURSOR_GOTO){if(!we.IsNumber(t.Date))return;var M=we.IsNumber(t.Time),L=this.GetChartStatus();if(!L)return;var o=this.ChartOperator_Temp_GetHistroyData();if(!o)return;for(var E=o.DataOffset,N=-1,d=E,R=0;d<o.Data.length&&R<L.KLine.PageSize;++d,++R){var D=o.Data[d];if(M){if(D.Date==t.Date&&D.Time==t.Time){D,N=R,d;break}}else if(D.Date==t.Date){D,N=R,d;break}}if(N<0)return;if(!this.Frame||!this.Frame.SubFrame[0]||!this.Frame.SubFrame[0].Frame)return!1;var A=this.Frame.SubFrame[0].Frame,O=A.GetXFromIndex(N),P=A.GetYFromData(D.Close),B={X:O,Y:P,IsInClient:this.IsMouseOnClient(O,P)};this.LastMouseStatus.OnMouseMove=B,this.LastMouseStatus.MoveOnPoint={X:O,Y:P};var _=this.GetEventCallback(Kn.ON_MOUSE_MOVE),G=this.TitlePaint[0];_&&G&&(G.OnMouseMoveEvent=_);var k=C(),V={};V.clientX=O/k+this.UIElement.getBoundingClientRect().left,V.clientY=P/k+this.UIElement.getBoundingClientRect().top,this.MoveOnPoint={X:O,Y:P},this.OnMouseMove(O,P,V),this.LastMouseStatus.MoveOnPoint=null,G&&(G.OnMouseMoveEvent=null)}}},this.ChartOperator_Temp_GetHistroyData=function(){return(this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data)||null},this.ChartOperator_Temp_Update=function(){this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.ResetFrameXSplit(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex()},this.ChartOperator_GetIndex_ByDateTime=function(t,e,a,i){if(!t)return null;if(!we.IsNonEmptyArray(t.Data))return null;if(!we.IsPlusNumber(e.Date)||e.Date<19810101)return null;if(tt.IsDayPeriod(a,!0)){for(var r=0;r<t.Data.length;++r){var n=t.Data[r];if(1==i){if(n.Date==e.Date)return r}else if(n.Date>=e.Date)return r}return null}if(tt.IsMinutePeriod(a,!0)||tt.IsMilliSecondPeriod(a)){var o=null;we.IsNumber(e.Time)&&(o=e.Time);for(var r=0;r<t.Data.length;++r){var n=t.Data[r];if(1==i){if(null==o)return null;if(n.Date==e.Date&&n.Time==o)return r}else if(null==o){if(n.Date>=e.Date)return r}else if(n.Date>e.Date||n.Date==e.Date&&n.Time>=o)return r}return null}return null},this.OnWheel=function(t){var e=this;if(Xn.Chart.Log("[KLineChartContainer::OnWheel]",t),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var a=C(),i=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,r=(t.clientY-this.UIElement.getBoundingClientRect().top)*a,n=!1;this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),n=this.Canvas.isPointInPath(i,r);var o=t.wheelDelta;we.IsObjectExist(t.wheelDelta)||(o=-.01*t.deltaY);var s=!0;if(this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Wheel&&(s=!1),this.SourceData&&this.SourceData.Data)if(n&&o<0&&s){var l={ZoomType:this.ZoomType,IsLockRight:this.IsZoomLockRight};l.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),t.ctrlKey&&(l.ZoomType=1),this.Frame.ZoomDown(l,{ZoomDownloadDataCallback:function(t){e.ZoomDownloadData(t)}})&&(this.CursorIndex=l.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.ResetFrameXSplit(),this.ChartSplashPaint&&1==this.ChartSplashPaint.IsEnableSplash||this.Draw(),this.OnKLinePageChange("wheel"))}else if(n&&o>0&&s){var l={ZoomType:this.ZoomType,IsLockRight:this.IsZoomLockRight};l.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),t.ctrlKey&&(l.ZoomType=1),this.Frame.ZoomUp(l)&&(Xn.Chart.Log("[KLineChartContainer::OnWheel] cursorIndex ",l),this.CursorIndex=l.Index,this.UpdatePointByCursorIndex(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.ResetFrameXSplit(),this.Draw(),this.OnKLinePageChange("wheel"))}(n||this.OnWheel_ZoomUpDownFrameY(t,i,r))&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}},this.OnWheel_ZoomUpDownFrameY=function(t,e,a){if(!this.EnableYDrag.Wheel)return!1;var i=this.TryYDrag(e,a);if(!i)return!1;if(!(i.Left&&!i.IsOverlay||i.Right))return!1;var r=t.wheelDelta;we.IsObjectExist(t.wheelDelta)||(r=-.01*t.deltaY);var n=this.EnableYDrag.WheelYMove;return r>0&&(n*=-1),i.Position=0,!!this.Frame.OnZoomUpDownFrameY(i,n)&&(this.Frame.SetSizeChage(!0),this.Draw(),!0)},this.Create=function(t,e){var a=this;this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new Pe,this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.StringFormatX=go.Create("CorssCursor_XStringFormat"),this.ChartCorssCursor.StringFormatX.GetEventCallback=function(t){return a.GetEventCallback(t)},this.ChartCorssCursor.StringFormatX.LanguageID=this.LanguageID,this.ChartCorssCursor.StringFormatY=go.Create("CorssCursor_YStringFormat"),this.ChartCorssCursor.StringFormatY.GetEventCallback=function(t){return a.GetEventCallback(t)},this.ChartCorssCursor.StringFormatY.LanguageID=this.LanguageID,this.ChartCorssCursor.StringFormatY.ExtendChartPaint=this.ExtendChartPaint,this.ChartCorssCursor.GetEventCallback=function(t){return a.GetEventCallback(t)},this.ChartCorssCursor.OnChangeStatusCallback=function(t,e){a.OnChangeCorssCursorStatus(t,e)},this.ChartSplashPaint=new _e,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.HQChart=this,this.Frame=new X,this.Frame.ChartBorder=new M,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.Frame.GetExtendChartRightWidth=function(){return a.GetExtendChartRightWidth()},this.Frame.GetExtendChartByClassName=function(t){return a.GetExtendChartByClassName(t)},this.Frame.GetEventCallback=function(t){return a.GetEventCallback(t)},this.ChartCorssCursor.Frame=this.Frame,this.ChartSplashPaint.Frame=this.Frame,this.CreateChildWindow(t),this.CreateMainKLine(),this.CreateExtendChart("RectSelectPaint",e?e.SelectRect:null),this.EnableIndexChartDrag&&this.CreateExtendChart("DragMovePaint"),this.CreateDragSelectRect(e?e.DragSelectRect:null);for(var i in this.Frame.SubFrame){var r=new ea;r.Frame=this.Frame.SubFrame[i].Frame,r.Canvas=this.Canvas,r.LanguageID=this.LanguageID,r.GetEventCallback=function(t){return a.GetEventCallback(t)},r.SelectedChart=this.SelectedChart,this.TitlePaint.push(r)}this.ChartCorssCursor.StringFormatX.Frame=this.Frame.SubFrame[0].Frame,this.ChartCorssCursor.StringFormatY.Frame=this.Frame;var n=!0,o=!0;if(e&&e.Listener){var s=e.Listener;!1===s.KeyDown&&(n=!1,Xn.Chart.Log("[KLineChartContainer::Create] not register keydown event.")),!1===s.Wheel&&(o=!1,Xn.Chart.Log("[KLineChartContainer::Create] not register wheel event."))}n&&this.UIElement.addEventListener("keydown",function(t){a.OnKeyDown(t)},!0),o&&this.UIElement.addEventListener("wheel",function(t){a.OnWheel(t)},!0),this.InitalPopMinuteChart(e)},this.InitalPopMinuteChart=function(t){return!(!t||!t.KLine)&&(!0===t.KLine.KLineDoubleClick&&(this.PopMinuteChart=new hn,this.PopMinuteChart.Inital(this),!0))},this.DestroyPopMinuteChart=function(){this.PopMinuteChart&&(this.PopMinuteChart.Destroy(),this.PopMinuteChart=null)},this.ShowMinuteChartDialog=function(t,e,a){if(this.PopMinuteChart&&t.Tooltip&&t.Chart){var i=C(),r=this.UIElement.getBoundingClientRect(),n=m();e+=r.left+n.Left,a+=r.top+n.Top;var o=t.Tooltip.Data.Date,s=t.Chart.Symbol;this.PopMinuteChart.Show({Date:o,Symbol:s,Data:t.Tooltip.Data},e/i,a/i)}},this.OnCustomKeyDown=function(t,e){return 37==t&&e.ctrlKey?(this.MoveCorssCursorLeft(this.CtrlMoveStep),!0):!(39!=t||!e.ctrlKey)&&(this.MoveCorssCursorRight(this.CtrlMoveStep),!0)},this.MoveCorssCursorLeft=function(t){var e=null;if(e=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data){if(e.DataOffset<=0&&this.CursorIndex<=0)return void(this.DragDownloadData&&this.DragDownloadData());if(this.CursorIndex-t<0)return e.DataOffset-=t,e.DataOffset<0&&(e.DataOffset=0,this.CursorIndex=0),this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),void this.OnKLinePageChange("keydown");this.CursorIndex-=t,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo(),this.ShowTooltipByKeyDown()}},this.MoveCorssCursorRight=function(t){var e=null;if(e=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data){var a=0;if(a=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,!(this.CursorIndex+e.DataOffset+1>=e.Data.length)){var i=!1;if(this.CursorIndex+t+e.DataOffset+1>e.Data.length&&(t=e.Data.length-1-e.DataOffset-this.CursorIndex,i=!0),this.CursorIndex+t>=a){var r=this.CursorIndex+t-(a-1);return e.DataOffset+=r,i&&(this.CursorIndex=a-1),this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),void this.OnKLinePageChange("keydown")}this.CursorIndex+=t,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo(),this.ShowTooltipByKeyDown()}}},this.GetKLineChart=function(){return this.ChartPaint[0]?this.ChartPaint[0]:null},this.CreateChildWindow=function(t){for(var e=this,a=this.GetEventCallback(Kn.ON_CREATE_FRAME),i=0;i<t;++i){var r=new M;r.UIElement=this.UIElement;var n=$n.Create("KLineFrame",{ID:i});if(n.Canvas=this.Canvas,n.GetExtraCanvas=function(t){return e.GetExtraCanvas(t)},n.ChartBorder=r,n.Identify=i,n.RightSpaceCount=this.RightSpaceCount,n.GetEventCallback=function(t){return e.GetEventCallback(t)},n.GlobalOption=this.GlobalOption,n.HorizontalMax=20,n.HorizontalMin=10,0==i){n.YSplitOperator=new Fe,n.YSplitOperator.FrameSplitData=this.FrameSplitData.get("price"),n.YSplitOperator.FrameSplitData2=this.FrameSplitData.get("double"),n.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},n.YSplitOperator.GetKLineChartCallback=function(){return e.GetKLineChart()},n.YSplitOperator.HQChart=this;var o=C();r.BottomSpace=15*o,r.TopSpace=15*o,n.GetEventCallback=function(t){return e.GetEventCallback(t)}}else n.YSplitOperator=new Me,n.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),n.YSplitOperator.LanguageID=this.LanguageID,n.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},n.YSplitOperator.GetKLineChartCallback=function(){return e.GetKLineChart()},n.YSplitOperator.HQChart=this;n.YSplitOperator.Frame=n,n.YSplitOperator.ChartBorder=r,n.XSplitOperator=new Le,n.XSplitOperator.Frame=n,n.XSplitOperator.ChartBorder=r,n.XSplitOperator.LanguageID=this.LanguageID,n.XSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},i!=t-1&&(n.XSplitOperator.ShowText=!1);for(var s=n.HorizontalMin;s<=n.HorizontalMax;s+=1)n.HorizontalInfo[s]=new F,n.HorizontalInfo[s].Value=s,0==i&&s==n.HorizontalMin||(n.HorizontalInfo[s].Message[1]=s.toString(),n.HorizontalInfo[s].Font="14px å¾®è½¯éé»");var l=new H;if(n.FrameData.SubFrameItem=l,l.Frame=n,l.Height=0==i?20:10,this.Frame.SubFrame[i]=l,a&&a.Callback){var h={SubFrame:this.Frame.SubFrame[i],WindowIndex:i};a.Callback(a,h,this)}}},this.CreateSubFrameItem=function(t){var e=this,a=new M;a.UIElement=this.UIElement;var i="KLineFrame";"KLineChartHScreenContainer"==this.ClassName&&(i="KLineHScreenFrame");var r=$n.Create(i,{ID:t});r.Canvas=this.Canvas,r.GetExtraCanvas=function(t){return e.GetExtraCanvas(t)},r.ChartBorder=a,r.Identify=t,r.GetEventCallback=function(t){return e.GetEventCallback(t)},r.GlobalOption=this.GlobalOption,r.HorizontalMax=20,r.HorizontalMin=10,r.YSplitOperator=new Me,r.YSplitOperator.LanguageID=this.LanguageID,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),r.YSplitOperator.Frame=r,r.YSplitOperator.ChartBorder=a,r.XSplitOperator=new Le,r.XSplitOperator.Frame=r,r.XSplitOperator.ChartBorder=a,r.XSplitOperator.ShowText=!1,r.XSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},r.YSplitOperator.GetKLineChartCallback=function(){return e.GetKLineChart()},r.YSplitOperator.HQChart=this,r.XSplitOperator.Symbol=this.Symbol,r.XSplitOperator.Period=this.Period;var n=this.Frame.SubFrame[0].Frame.XPointCount;r.XPointCount=n,r.Data=this.ChartPaint[0].Data;for(var o=r.HorizontalMin;o<=r.HorizontalMax;o+=1)r.HorizontalInfo[o]=new F,r.HorizontalInfo[o].Value=o,r.HorizontalInfo[o].Message[1]=o.toString(),r.HorizontalInfo[o].Font="14px å¾®è½¯éé»";var s=new H;r.FrameData.SubFrameItem=s,s.Frame=r,s.Height=10;var l=this.GetEventCallback(Kn.ON_CREATE_FRAME);if(l&&l.Callback){var h={SubFrame:s,WindowIndex:t};l.Callback(l,h,this)}return s},this.CreateMainKLine=function(){var t=this,e=uo.Create("ChartKLine");e.Canvas=this.Canvas,e.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,e.ChartFrame=this.Frame.SubFrame[0].Frame,e.Name="Main-KLine",e.DrawType=this.KLineDrawType,e.Identify="Main-KLine",e.GetEventCallback=function(e){return t.GetEventCallback(e)},this.ChartPaint[0]=e,this.TitlePaint[0]=new Qe,this.TitlePaint[0].Frame=this.Frame.SubFrame[0].Frame,this.TitlePaint[0].Canvas=this.Canvas,this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint,this.TitlePaint[0].LanguageID=this.LanguageID,this.TitlePaint[0].HQChart=this,this.TitlePaint[0].GetEventCallback=function(e){return t.GetEventCallback(e)}},this.BindMainData=function(t,e,a){var i=!1;if(a&&!0===a.IsShowAll&&(i=!0),this.ChartPaint[0].Data=t,this.ChartPaint[0].Symbol=this.Symbol,this.KLineSize)if(we.IsNumber(this.KLineSize.DataWidth)){var r=this.Frame.SetDataWidth(this.KLineSize.DataWidth);e=r.XPointCount-this.RightSpaceCount,this.KLineSize.DataWidth=null}else e=this.Frame.SubFrame[0].Frame.XPointCount-this.RightSpaceCount;for(var n=0;n<this.Frame.SubFrame.length;++n){var o=this.Frame.SubFrame[n].Frame;o.XPointCount=i?t.Data.length+this.RightSpaceCount:e+this.RightSpaceCount,o.Data=this.ChartPaint[0].Data,o.XSplitOperator.Symbol=this.Symbol,o.XSplitOperator.Period=this.Period}this.TitlePaint[0].Data=this.ChartPaint[0].Data,this.TitlePaint[0].Symbol=this.Symbol,this.TitlePaint[0].Name=this.Name,this.TitlePaint[0].Period=this.Period,this.ChartCorssCursor.StringFormatX.Data=this.ChartPaint[0].Data,this.Frame.Data=this.ChartPaint[0].Data;for(var n=0;n<this.OverlayChartPaint.length;++n){var o=this.OverlayChartPaint[n];o.MainData=this.ChartPaint[0].Data}if(i){var s=0;this.CursorIndex=0}else{var s=t.Data.length-e;s<0&&(s=0),this.ChartPaint[0].Data.DataOffset=s,this.CursorIndex=e,this.CursorIndex+s>=t.Data.length&&(this.CursorIndex=t.Data.length-1-s),this.CursorIndex<0&&(this.CursorIndex=0)}this.ChartPaint[0].Period=this.Period,this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol,this.CustomShow&&(this.SetCustomShow(this.CustomShow,t),this.CustomShow=null)},this.ShowAllKLine=function(){var t=this.ChartPaint[0];if(!t)return!1;var e=t.Data;if(!e||!we.IsNonEmptyArray(e.Data))return!1;for(var a=e.Data.length+this.RightSpaceCount,i=0;i<this.Frame.SubFrame.length;++i){this.Frame.SubFrame[i].Frame.XPointCount=a}e.DataOffset=0,this.CursorIndex=0,this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.UpdatePointByCursorIndex(2),this.Draw()},this.UpdateMainData=function(t,e){var a=null;if(this.Frame.Data?this.Frame.SubFrame&&this.Frame.SubFrame[0]&&(a=this.Frame.SubFrame[0].Frame.Data):a=this.Frame.Data,a){var i=this.Frame.SubFrame[0].Frame.XPointCount,r=0;we.IsNumber(e)&&(e>0&&t.Data.length>e?(r=t.Data.length-e,Xn.Chart.Log("[KLineChartContainer::UpdateMainData]  [count="+e+"->"+t.Data.length+"], [newDataCount="+r+"], [Pagesize="+i+"]")):0==e&&t.Data.length>i&&(r=t.Data.length-i,Xn.Chart.Log("[KLineChartContainer::UpdateMainData] history data is empty. [count="+e+"->"+t.Data.length+"], [newDataCount="+r+"], [Pagesize="+i+"]"))),this.ChartPaint[0].Data=t,this.ChartPaint[0].Symbol=this.Symbol,t.Data.length>i&&(this.ChartPaint[0].Data.DataOffset=a.DataOffset+r);for(var n in this.Frame.SubFrame){var o=this.Frame.SubFrame[n].Frame;o.Data=this.ChartPaint[0].Data,0==n&&(o.YSplitOperator.Symbol=this.Symbol,o.YSplitOperator.Data=this.ChartPaint[0].Data,o.YSplitOperator.Period=this.Period)}this.TitlePaint[0].Data=this.ChartPaint[0].Data,this.TitlePaint[0].Symbol=this.Symbol,this.TitlePaint[0].Name=this.Name,this.ChartCorssCursor.StringFormatX.Data=this.ChartPaint[0].Data,this.Frame.Data=this.ChartPaint[0].Data;for(var n in this.OverlayChartPaint){var o=this.OverlayChartPaint[n];o.MainData=this.ChartPaint[0].Data}this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol}},this.SetCustomShow=function(t,e){if(t.Callback)return void t.Callback(chart,e);var a=this.ChartOperator_GetIndex_ByDateTime(e,t,this.Period,0);if(null===a)return void Xn.Chart.Log("[KLineChartContainer::SetCustomShow] Can't find index by customShow=",t);if(we.IsPlusNumber(t.PageSize))for(var i=t.PageSize,r=0;r<this.Frame.SubFrame.length;++r){var n=this.Frame.SubFrame[r].Frame;n.XPointCount=i}this.ChartPaint[0].Data.DataOffset=a,this.CursorIndex=0},this.OnDragSelectRectMouseUp=function(t){var e=this.GetRectSelectPaint();if(e){var a=e.GetSelectRectData();if(a){var i=C(),r=this.ChartCorssCursor,n=r.LastPoint.X/i,o=r.LastPoint.Y/i,s=!0,l=this.GetEventCallback(Kn.ON_DRAG_SELECT_RECT_MOUSEUP);if(l){var h={X:n,Y:o,SelectData:a,RectSelectPaint:e,IsShowMenu:!1};l.Callback(l,h,this),s=h.IsShowMenu}if(this.IsShowSelectRectDialog()){var h={Chart:this,X:n,Y:o,SelectData:a,RectSelectPaint:e};t.data=h,this.DrawSelectRectDialog(t)}else if(s){var h={Chart:this,X:n,Y:o,SelectData:a,RectSelectPaint:e};t.data=h,this.PopupSelectRectMenuV2(h,t)}}}},this.OnDragSubSelectRectMouseUp=function(t){var e=this.GetRectSelectPaint();if(e){if(e.GetSelectRectData()){var a=C(),i=this.ChartCorssCursor,r=i.LastPoint.X/a,n=i.LastPoint.Y/a,o=this.GetEventCallback(Kn.ON_DRAG_SUB_SELECT_RECT_MOUSEUP);if(o){var s={Start:e.SubClient.FirstPoint,End:e.SubClient.SecondPoint},l={X:r,Y:n,SubSelectData:s,RectSelectPaint:e};o.Callback(o,l,this)}}}},this.ShowSelectData=function(t){this.HideSelectRect(),Xn.Chart.Log("[KLineChartContainer::ShowSelectData] selectData",t);var e=t.Start,a=t.End-t.Start+1;Xn.Chart.Log("[KLineChartContainer::ShowSelectData] DataOffset="+e+", ShowCount="+a);for(var i in this.Frame.SubFrame){this.Frame.SubFrame[i].Frame.XPointCount=a}this.ChartPaint[0].Data.DataOffset=e,this.CursorIndex=0,this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex()},this.OnMarkRectSelect=function(t){var e=this.ChartCorssCursor;if(e&&0!=e.Status&&we.IsNumber(e.CursorIndex)&&this.ChartPaint[0]&&this.ChartPaint[0].Data){var a=this.GetRectSelectPaint();if(a){var i=e.CursorIndex;Xn.Chart.Log("[KLineChartContainer::OnMarkRectSelect] dataIndex",i);var r=this.ChartPaint[0].Data;i=parseInt(i.toFixed(0));var n=i+r.DataOffset;n>=r.Data.length&&(n=r.Data.length-1);var o=r.Data[n];if(Xn.Chart.Log("[KLineChartContainer::OnMarkRectSelect] item",o),this.SetRectSelectData(o,n)){var s=a.GetPointCount(),l=C();if(1==s){var h=this.GetEventCallback(Kn.ON_KEYDOWN_SELECT_RECT_FIRST);if(h&&h.Callback){var u={X:e.LastPoint.X/l,Y:e.LastPoint.Y/l,Item:o,Index:n,RectSelectPaint:a,e:t};h.Callback(h,u,this)}}else if(2==s){var c=a.GetSelectRectData(),h=this.GetEventCallback(Kn.ON_KEYDOWN_SELECT_RECT),f=!0;if(h&&h.Callback){var u={X:e.LastPoint.X/l,Y:e.LastPoint.Y/l,SelectData:c,RectSelectPaint:a,IsShowMenu:!0,e:t};h.Callback(h,u,this),f=u.IsShowMenu}if(f){var u={Chart:this,X:e.LastPoint.X/l,Y:e.LastPoint.Y/l,SelectData:c,RectSelectPaint:a};t.data=u,this.PopupSelectRectMenuV2(u,t)}}this.Draw()}}}},this.CreateWindowIndex=function(t){this.WindowIndex[t].Create(this,t)},this.BindIndexData=function(t,e,a){if(this.WindowIndex[t]){var i=this.WindowIndex[t];if("function"==typeof i.RequestData)return void i.RequestData(this,t,e,a);if("function"==typeof i.ExecuteScript){if(a&&a.CheckRunCount&&i.IsExcessRunCount())return;return void i.ExecuteScript(this,t,e)}i.BindData(this,t,e)}},this.BindOverlayIndexData=function(t,e,a,i){if(t.Script){if("function"==typeof t.Script.RequestData)return void t.Script.RequestData(this,e,a);if("function"==typeof t.Script.ExecuteScript){if(i){if(i.CheckRunCount&&t.Script.IsExcessRunCount())return;if(we.IsBool(i.SyncExecute)&&t.Script.IsSync!=i.SyncExecute)return}return void t.Script.ExecuteScript(this,e,a)}t.Script.BindData(this,e,a)}},this.BindInstructionIndexData=function(t){this.ColorIndex&&"function"==typeof this.ColorIndex.ExecuteScript&&this.ColorIndex.ExecuteScript(this,0,t),this.TradeIndex&&"function"==typeof this.TradeIndex.ExecuteScript&&this.TradeIndex.ExecuteScript(this,0,t)},this.GetChartPaint=function(t){var e=new Array;for(var a in this.ChartPaint)if(0!=a){var i=this.ChartPaint[a];i.ChartFrame==this.Frame.SubFrame[t].Frame&&e.push(i)}return e},this.AutoUpdateEvent=function(t,e){var a=t?Kn.RECV_START_AUTOUPDATE:Kn.RECV_STOP_AUTOUPDATE;if(this.mapEvent.has(a)){var i=this,r=this.mapEvent.get(a),n={Stock:{Symbol:this.Symbol,Name:this.Name,Right:this.Right,Period:this.Period},Explain:e};t&&(n.Callback=function(t){tt.IsDayPeriod(i.Period,!0)?i.RecvRealtimeData(t):tt.IsMinutePeriod(i.Period,!0)?i.RecvMinuteRealtimeData(t):tt.IsSecondPeriod(i.Period)?i.RecvMinuteRealtimeData(t):tt.IsMilliSecondPeriod(i.Period)&&i.RecvMinuteRealtimeData(t)}),r.Callback(r,n,this)}},this.SendKLineUpdateEvent=function(t){var e=this.GetEventCallback(Kn.RECV_KLINE_UPDATE_DATA);if(e&&e.Callback){var a={HistoryData:t,Stock:{Symbol:this.Symbol,Name:this.Name}};return e.Callback(e,a,this),!0}return!1},this.SendManualKLineUpdateEvent=function(t){var e=this.GetEventCallback(Kn.RECV_KLINE_MANUAL_UPDATE_DATA);if(e&&e.Callback){var a={HistoryData:t,Stock:{Symbol:this.Symbol,Name:this.Name}};return e.Callback(e,a,this),!0}return!1},this.GetKLineDrawType=function(){return this.KLineDrawType},this.RequestHistoryData=function(){var t=this;if(this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.FlowCapitalReady=!1,this.ResetPage(),this.ResetDragDownload(),this.ResetZoomDownload(),this.Draw(),this.NetworkFilter){var e=this.GetKLineDrawType(),a={Name:"KLineChartContainer::RequestHistoryData",Explain:"æ¥Kæ°æ®",Request:{Url:t.KLineApiUrl,Type:"POST",Data:{symbol:t.Symbol,count:t.MaxRequestDataCount,field:["name","symbol","yclose","open","price","high","low","vol"],period:this.Period,right:this.Right,klineDrawType:e}},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryData(e);var a=t.Page.Day;1==a.Enable&&0==a.Finish?t.RequestHistoryPageData():(t.AutoUpdateEvent(!0,"KLineChartContainer::RequestHistoryData"),t.AutoUpdate())}),1==a.PreventDefault)return}n.HttpRequest({url:this.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryData(e);var a=t.Page.Day;1==a.Enable&&0==a.Finish?t.RequestHistoryPageData():(t.AutoUpdateEvent(!0,"KLineChartContainer::RequestHistoryData"),t.AutoUpdate())}})},this.BindAllOverlayIndexData=function(t,e){if(this.Frame&&this.Frame.SubFrame)for(var a=0;a<this.Frame.SubFrame.length;++a)for(var i=this.Frame.SubFrame[a],r=0;r<i.OverlayIndex.length;++r){var n=i.OverlayIndex[r];this.BindOverlayIndexData(n,a,t,e)}},this.RecvHistoryData=function(t){if(this.EnableVerifyRecvData&&t.symbol!=this.Symbol)return void Xn.Chart.Warn("[KLineChartContainer::RecvHistoryData] recv data symbol not match. HQChart["+this.Symbol+"] , Recv["+t.symbol+"]");var e=Ti.JsonDataToHistoryData(t),a=new tt;a.Data=e,a.DataType=0,a.Symbol=t.symbol,this.SourceData=a,this.BeforeBindMainData&&this.BeforeBindMainData("RecvHistoryData");var i=new tt;if(i.Data=e,i.Right=this.Right,i.Period=this.Period,i.DataType=0,i.Symbol=t.symbol,i.Right>0&&!this.IsApiPeriod){var r=i.GetRightData(i.Right,{AlgorithmType:this.RightFormula});i.Data=r}if(tt.IsDayPeriod(i.Period,!1)&&!this.IsApiPeriod){var n=i.GetPeriodData(i.Period);i.Data=n}var o=this.GetKLineCalulate();if(o){i=o.RecvHistoryData(i,{Symbol:this.Symbol,Function:"RecvHistoryData"}),this.FlowCapitalReady=!0}this.Symbol=t.symbol,this.Name=t.name,this.BindMainData(i,this.PageSize),this.AfterBindMainData&&this.AfterBindMainData("RecvHistoryData"),this.Frame.SetSizeChage(!0);var s;this.Frame.SubFrame[0]&&(s=this.Frame.SubFrame[0].Frame),s&&s.YSplitOperator&&(s.YSplitOperator.Symbol=this.Symbol,s.YSplitOperator.Data=this.ChartPaint[0].Data,s.YSplitOperator.Period=this.Period);var l=this.Page.Day;(0==l.Enable||1==l.Enable&&1==l.Finish)&&(this.ReqeustKLineInfoData({FunctionName:"RecvHistoryData"}),this.RequestFlowCapitalData(),this.RequestOverlayHistoryData(),this.CreateChartDrawPictureByStorage()),l.Enable&&(l.Index=1),this.BindInstructionIndexData(i);for(var h=0;h<this.Frame.SubFrame.length;++h)this.BindIndexData(h,i);if(this.BindAllOverlayIndexData(i,{SyncExecute:!0}),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.UpdatePointByCursorIndex(2),this.Draw(),this.BindAllOverlayIndexData(i,{SyncExecute:!1}),this.mapEvent.has(Kn.RECV_HISTROY_DATA)){var u=this.mapEvent.get(Kn.RECV_HISTROY_DATA),t={HistoryData:i,Stock:{Symbol:this.Symbol,Name:this.Name}};u.Callback(u,t,this)}},this.RequestHistoryPageData=function(){var t=this;if(this.NetworkFilter){var e=this.SourceData.Data[0],a={Name:"KLineChartContainer::RequestHistoryPageData",Explain:"æ¥Kæ°æ®åé¡µ",Request:{Url:"none",Type:"POST",Data:{symbol:t.Symbol,index:t.Page.Day.Index,field:["name","symbol","yclose","open","price","high","low","vol"],firstDate:e.Date,first:{date:e.Date}}},Page:t.Page.Day,Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.RecvHistoryPageData(e);var a=t.Page.Day;1==a.Enable&&0==a.Finish?t.RequestHistoryPageData():t.AutoUpdate()}),1==a.PreventDefault)return}setTimeout(function(){var e=t.Page.Day;e.Finish=!0;var a={data:[[20150218,12.54,12.5,12.74,11.95,12.27,117632441,1459671045],[20150219,12.27,12.1,12.23,11.9,12.23,95889423,1157078548],[20150220,12.23,12.17,12.17,11.9,12.05,67763439,815652761]],symbol:t.Symbol,name:t.Name};t.RecvHistoryPageData(a),1==e.Enable&&0==e.Finish?t.RequestHistoryPageData():t.AutoUpdate()},500)},this.RecvHistoryPageData=function(t){if(this.EnableVerifyRecvData&&t.symbol!=this.Symbol)return void Xn.Chart.Warn("[KLineChartContainer::RecvHistoryPageData] recv data symbol not match. HQChart["+this.Symbol+"] , Recv["+t.symbol+"]");var e=Ti.JsonDataToHistoryData(t),a=this.GetHistoryDataCount();for(var i in e){var r=e[i];this.SourceData.Data.splice(i,0,r)}var n=new tt;if(n.Data=this.SourceData.Data,n.Period=this.Period,n.Right=this.Right,n.DataType=this.SourceData.DataType,n.Right>0&&n.Period<=3){var o=n.GetRightData(n.Right,{AlgorithmType:this.RightFormula});n.Data=o}if(tt.IsDayPeriod(n.Period,!1)||tt.IsMinutePeriod(n.Period,!1)){var s=n.GetPeriodData(n.Period);n.Data=s}this.UpdateMainData(n,a),this.BindInstructionIndexData(n);for(var i=0;i<this.Frame.SubFrame.length;++i)this.BindIndexData(i,n);var l=this.Page.Day;++l.Index,1==l.Enable&&1==l.Finish&&(this.RequestFlowCapitalData(),this.RequestOverlayHistoryData(),this.CreateChartDrawPictureByStorage()),this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()},this.RequestHistoryMinuteData=function(){var t=this;if(this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.FlowCapitalReady=!1,this.ResetPage(),this.ResetDragDownload(),this.ResetZoomDownload(),this.Draw(),this.NetworkFilter){var e=this.GetKLineDrawType(),a={Name:"KLineChartContainer::ReqeustHistoryMinuteData",Explain:"1åéKçº¿æ°æ®",Request:{Url:t.MinuteKLineApiUrl,Type:"POST",Data:{symbol:t.Symbol,count:t.MaxRequestMinuteDayCount,field:["name","symbol","yclose","open","price","high","low","vol"],period:this.Period,right:this.Right,klineDrawType:e}},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvMinuteHistoryData(e);var a=t.Page.Minute;1==a.Enable&&0==a.Finish?t.ReqeustHistoryMinutePageData():(t.AutoUpdateEvent(!0,"KLineChartContainer::ReqeustHistoryMinuteData"),t.AutoUpdate())}),1==a.PreventDefault)return}n.HttpRequest({url:this.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvMinuteHistoryData(e);var a=t.Page.Minute;1==a.Enable&&0==a.Finish?t.ReqeustHistoryMinutePageData():(t.AutoUpdateEvent(!0,"KLineChartContainer::ReqeustHistoryMinuteData"),t.AutoUpdate())}})},this.ReqeustHistoryMinuteData=this.RequestHistoryMinuteData,this.RecvMinuteHistoryData=function(t){if(this.EnableVerifyRecvData&&t.symbol!=this.Symbol)return void Xn.Chart.Warn("[KLineChartContainer::RecvMinuteHistoryData] recv data symbol not match. HQChart["+this.Symbol+"] , Recv["+t.symbol+"]");var e=Ti.JsonDataToMinuteHistoryData(t),a=new tt;a.Data=e,a.DataType=1,a.Symbol=t.symbol,this.SourceData=a,this.BeforeBindMainData&&this.BeforeBindMainData("RecvMinuteHistoryData");var i=new tt;if(i.Data=e,i.Right=this.Right,i.Period=this.Period,i.DataType=1,i.Symbol=t.symbol,i.Right>0&&!this.IsApiPeriod&&this.RightFormula>=1){var r=i.GetRightData(i.Right,{AlgorithmType:this.RightFormula});i.Data=r}if(tt.IsMinutePeriod(i.Period,!1)&&!this.IsApiPeriod){var n=i.GetPeriodData(i.Period);i.Data=n}var o=this.GetKLineCalulate();if(o){i=o.RecvHistoryData(i,{Symbol:this.Symbol,Function:"RecvMinuteHistoryData"}),this.FlowCapitalReady=!0}this.Symbol=t.symbol,this.Name=t.name;var s=null;if(t&&t.ChartOperator){var l=t.ChartOperator;s={},!0===l.IsShowAll&&(s.IsShowAll=!0)}this.BindMainData(i,this.PageSize,s),this.AfterBindMainData&&this.AfterBindMainData("RecvMinuteHistoryData"),this.Frame.SetSizeChage(!0);var h;this.Frame.SubFrame[0]&&(h=this.Frame.SubFrame[0].Frame),h&&h.YSplitOperator&&(h.YSplitOperator.Symbol=this.Symbol,h.YSplitOperator.Data=this.ChartPaint[0].Data,h.YSplitOperator.Period=this.Period);for(var u in this.OverlayChartPaint){var l=this.OverlayChartPaint[u];l.Data=null}var C=this.Page.Minute;(0==C.Enable||1==C.Enable&&1==C.Finish)&&(this.ReqeustKLineInfoData({FunctionName:"RecvMinuteHistoryData"}),this.RequestFlowCapitalData(),this.RequestOverlayHistoryMinuteData(),this.CreateChartDrawPictureByStorage()),C.Enable&&++C.Index,this.BindInstructionIndexData(i);for(var u=0;u<this.Frame.SubFrame.length;++u)this.BindIndexData(u,i);if(this.BindAllOverlayIndexData(i,{SyncExecute:!0}),this.UpdataDataoffset(),this.UpdatePointByCursorIndex(2),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.BindAllOverlayIndexData(i,{SyncExecute:!1}),this.mapEvent.has(Kn.RECV_HISTROY_DATA)){var c=this.mapEvent.get(Kn.RECV_HISTROY_DATA),t={HistoryData:i,Stock:{Symbol:this.Symbol,Name:this.Name}};c.Callback(c,t,this)}},this.ReqeustHistoryMinutePageData=function(){var t=this;if(this.NetworkFilter){var e=this.SourceData.Data[0],a={Name:"KLineChartContainer::RecvHistoryMinutePageData",Explain:"1åéKçº¿æ°æ®åé¡µ",Request:{Url:"none",Type:"POST",Data:{symbol:t.Symbol,index:t.Page.Minute.Index,field:["name","symbol","yclose","open","price","high","low","vol"],firstDate:e.Date,first:{date:e.Date,time:e.Time}}},Page:t.Page.Minute,Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.RecvHistoryMinutePageData(e);var a=t.Page.Minute;1==a.Enable&&0==a.Finish?t.ReqeustHistoryMinutePageData():t.AutoUpdate()}),1==a.PreventDefault)return}setTimeout(function(){var e=t.Page.Minute;e.Finish=!0;var a={data:[[20190906,14.58,14.71,14.71,14.71,14.71,1096425,16128411,925],[20190906,14.71,14.73,14.74,14.71,14.71,2154859,31731820,930],[20190906,14.71,14.71,14.71,14.68,14.69,1427516,20989208,931],[20190906,14.69,14.69,14.71,14.68,14.7,1680503,24694143,932],[20190906,14.7,14.69,14.7,14.65,14.65,1315900,19310964,933],[20190906,14.65,14.66,14.69,14.65,14.68,702955,10313842,934],[20190906,14.68,14.7,14.71,14.67,14.67,1735266,25495875,935],[20190906,14.67,14.68,14.7,14.67,14.67,739e3,10845398,936],[20190906,14.67,14.67,14.68,14.67,14.68,389800,5721266,937],[20190906,14.68,14.68,14.7,14.68,14.69,648477,9527859,938],[20190906,14.69,14.7,14.71,14.69,14.7,1128400,16589794,939],[20190906,14.7,14.7,14.71,14.69,14.71,714858,10509708,940],[20190906,14.71,14.71,14.71,14.69,14.69,401500,5900477,941],[20190906,14.69,14.69,14.71,14.69,14.69,1165684,17131034,942],[20190906,14.69,14.69,14.7,14.67,14.67,498516,7321024,943],[20190906,14.67,14.68,14.68,14.67,14.67,350126,5139012,944],[20190906,14.67,14.67,14.69,14.67,14.69,561600,8246789,945]]};t.RecvHistoryMinutePageData(a),1==e.Enable&&0==e.Finish?t.ReqeustHistoryMinutePageData():t.AutoUpdate()},500)},this.RecvHistoryMinutePageData=function(t){if(this.EnableVerifyRecvData&&t.symbol!=this.Symbol)return void Xn.Chart.Warn("[KLineChartContainer::RecvHistoryMinutePageData] recv data symbol not match. HQChart["+this.Symbol+"] , Recv["+t.symbol+"]");var e=Ti.JsonDataToMinuteHistoryData(t),a=this.GetHistoryDataCount();for(var i in e){var r=e[i];this.SourceData.Data.splice(i,0,r)}var n=new tt;if(n.Data=this.SourceData.Data,n.Period=this.Period,n.Right=this.Right,n.DataType=this.SourceData.DataType,n.Right>0&&tt.IsDayPeriod(n.Period,!1)){var o=n.GetRightData(n.Right,{AlgorithmType:this.RightFormula});n.Data=o}if(tt.IsDayPeriod(n.Period,!1)||tt.IsMinutePeriod(n.Period,!1)){var s=n.GetPeriodData(n.Period);n.Data=s}this.UpdateMainData(n,a),this.BindInstructionIndexData(n);for(var i=0;i<this.Frame.SubFrame.length;++i)this.BindIndexData(i,n);var l=this.Page.Minute;(0==l.Enable||1==l.Enable&&1==l.Finish)&&(this.RequestFlowCapitalData(),this.CreateChartDrawPictureByStorage()),l.Enable&&++l.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()},this.RequestRealtimeData=function(){var t=this,e=[t.Symbol];for(var a in this.OverlayChartPaint){var i=this.OverlayChartPaint[a];i.Symbol&&(i.MainData&&i.Status==co.STATUS_FINISHED_ID&&e.push(i.Symbol))}if(this.NetworkFilter){var r=this.GetKLineDrawType(),o=null,s=this.ChartOperator_Temp_GetHistroyData();s&&(o=s.GetDateRange());var l={Name:"KLineChartContainer::RequestRealtimeData",Explain:"å½å¤©ææ°æ¥çº¿æ°æ®",Request:{Url:t.RealtimeApiUrl,Data:{symbol:e,field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time"],period:this.Period,right:this.Right,klineDrawType:r,dateRange:o},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(l,function(e){t.RecvRealtimeData(e),t.AutoUpdate()}),1==l.PreventDefault)return}n.HttpRequest({url:this.RealtimeApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time"],symbol:e,start:-1},type:"post",dataType:"json",async:!0,success:function(e){t.RecvRealtimeData(e),t.AutoUpdate()}})},this.RecvRealtimeData=function(t){if(1!=this.IsOnTouch){var e=Ti.JsonDataToRealtimeData(t,this.Symbol);if(e){var a=this.SourceData.Data[this.SourceData.Data.length-1],i=this.GetHistoryDataCount();if(0==this.SourceData.Data.length){var r=new K;K.CopyTo(r,e),this.SourceData.Data.push(r)}else if(a.Date==e.Date)Xn.Chart.Log("[KLineChartContainer::RecvRealtimeData] update kline by realtime data",e),K.CopyTo(a,e);else if(a.Date<e.Date){Xn.Chart.Log("[KLineChartContainer::RecvRealtimeData] insert kline by realtime data",e);var r=new K;K.CopyTo(r,e),!we.IsNumber(r.YClose)&&this.SourceData.Data.length>0&&(r.YClose=this.SourceData.Data[this.SourceData.Data.length-1].YClose),this.SourceData.Data.push(r)}else{for(var n=!1,o=this.SourceData.Data,s=o.length-1;s>=0;--s){var l=o[s];if(l.Date==e.Date){K.CopyTo(l,e),n=!0;break}}if(!n)return}var h=new tt;if(h.Data=this.SourceData.Data,h.Period=this.Period,h.Right=this.Right,h.DataType=this.SourceData.DataType,h.Symbol=this.Symbol,h.Right>0&&tt.IsDayPeriod(h.Period,!0)&&wo.IsSHSZStockA(this.Symbol)&&!this.IsApiPeriod){var u=h.GetRightData(h.Right,{AlgorithmType:this.RightFormula});h.Data=u}if(!this.IsApiPeriod&&(tt.IsDayPeriod(h.Period,!1)||tt.IsMinutePeriod(h.Period,!1))){var C=h.GetPeriodData(h.Period);h.Data=C}var c=this.GetKLineCalulate();if(c){h=c.RecvHistoryData(h,{Symbol:this.Symbol,Function:"RecvRealtimeData"}),this.FlowCapitalReady=!0}this.UpdateMainData(h,i),this.UpdateOverlayRealtimeData(t),this.BindInstructionIndexData(h);for(var s=0;s<this.Frame.SubFrame.length;++s)this.BindIndexData(s,h,{CheckRunCount:!0});if(this.BindAllOverlayIndexData(h,{CheckRunCount:!0,SyncExecute:!0}),this.UpdataDataoffset(),this.UpdatePointByCursorIndex(1),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.SendKLineUpdateEvent(h),this.UpdateDOMTooltip(0,h),this.UpdateHQFloatTooltip(h),this.BindAllOverlayIndexData(h,{CheckRunCount:!0,SyncExecute:!1}),this.mapEvent.has(Kn.ON_RECV_REALTIME_DATA)){var f=this.mapEvent.get(Kn.ON_RECV_REALTIME_DATA),t={HistoryData:h,Stock:{Symbol:this.Symbol,Name:this.Name}};f.Callback(f,t,this)}}}},this.UpdateOverlayRealtimeData=function(t){if(we.IsNonEmptyArray(this.OverlayChartPaint))for(var e=0;e<this.OverlayChartPaint.length;++e){var a=this.OverlayChartPaint[e];if(a.Symbol&&(a.MainData&&a.Status==co.STATUS_FINISHED_ID)){var i=Ti.JsonDataToRealtimeData(t,a.Symbol);if(i){var r=a.SourceData,n=r.Data[r.Data.length-1];if(n.Date==i.Date)Xn.Chart.Log("[KLineChartContainer::UpdateOverlayRealtimeData] update kline by minute data",i),n.Close=i.Close,n.High=i.High,n.Low=i.Low,n.Vol=i.Vol,n.Amount=i.Amount;else{if(!(n.Date<i.Date))continue;Xn.Chart.Log("[KLineChartContainer::UpdateOverlayRealtimeData] insert kline by minute data",i);var o=new K;o.YClose=i.YClose,o.Open=i.Open,o.Close=i.Close,o.High=i.High,o.Low=i.Low,o.Vol=i.Vol,o.Amount=i.Amount,o.Date=i.Date,r.Data.push(o)}var s=new tt;if(s.Data=r.Data,s.Period=this.Period,s.Right=this.Right,s.DataType=0,s.Right>0&&wo.IsSHSZStockA(t.symbol)&&!this.IsApiPeriod){var l=s.GetRightData(s.Right,{AlgorithmType:this.RightFormula});s.Data=l}var h=this.SourceData.GetOverlayData(s.Data,this.IsApiPeriod);if(s.Data=h,tt.IsDayPeriod(s.Period,!1)&&!this.IsApiPeriod){var u=s.GetPeriodData(s.Period);s.Data=u}a.Data=s}}}},this.RequestMinuteRealtimeData=function(){var t=this,e=[t.Symbol];for(var a in this.OverlayChartPaint){var i=this.OverlayChartPaint[a];i.Symbol&&(i.MainData&&i.Status==co.STATUS_FINISHED_ID&&e.push(i.Symbol))}if(this.NetworkFilter){var r=this.GetKLineDrawType(),o=null,s=this.ChartOperator_Temp_GetHistroyData();s&&(o=s.GetDateRange());var l={Name:"KLineChartContainer::RequestMinuteRealtimeData",Explain:"å½å¤©1åéKçº¿æ°æ®",Request:{Url:t.RealtimeApiUrl,Data:{symbol:e,field:["name","symbol","price","yclose","minutecount","minute","date","time"],period:this.Period,right:this.Right,klineDrawType:r,dateRange:o},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(l,function(e){t.RecvMinuteRealtimeData(e),t.AutoUpdate()}),1==l.PreventDefault)return}n.HttpRequest({url:this.RealtimeApiUrl,data:{field:["name","symbol","price","yclose","minutecount","minute","date","time"],symbol:e,start:-1},type:"post",dataType:"json",async:!0,success:function(e){t.RecvMinuteRealtimeData(e),t.AutoUpdate()}})},this.SetSourceDatatLimit=function(t){this.SourceDataLimit=new Vn.default;for(var e in t){var a=t[e];this.SourceDataLimit.set(a.Period,a.MaxCount),Xn.Chart.Log("[KLineChartContainer::SetSourceDatatLimit] Period="+a.Period+", MaxCount="+a.MaxCount)}},this.ReduceSourceData=function(){if(this.SourceDataLimit&&this.SourceDataLimit.has(this.Period)){var t=this.SourceDataLimit.get(this.Period),e=null;if(this.Frame.Data?this.Frame.SubFrame&&this.Frame.SubFrame[0]&&(e=this.Frame.SubFrame[0].Frame.Data):e=this.Frame.Data,e&&!(t<50)){for(var a=e.DataOffset,i=0;this.SourceData.Data.length>t;)this.SourceData.Data.shift(),--a,++i;i>0&&(a<0&&(a=0),e.DataOffset=a,Xn.Chart.Log("[KLineChartContainer::ReduceSourceData] remove data "+i+", dataOffset="+a))}}},this.RecvMinuteRealtimeDataV2=function(t){if(1!=this.IsOnTouch){if(this.EnableVerifyRecvData&&t.symbol!=this.Symbol)return void Xn.Chart.Warn("[KLineChartContainer::RecvMinuteRealtimeDataV2] recv data symbol not match. HQChart["+this.Symbol+"] , Recv["+t.symbol+"]");var e=Ti.JsonDataToMinuteHistoryData(t);if(e&&!(e.length<=0)){this.IsApiPeriod&&this.ReduceSourceData();var a=this.GetHistoryDataCount();if(this.SourceData&&this.SourceData.MergeMinuteData(e)){Xn.Chart.Log("[KLineChartContainer::RecvMinuteRealtimeDataV2] update kline by 1 minute data ["+a+"->"+this.SourceData.Data.length+"], IsAutoSyncDataOffset="+this.IsAutoSyncDataOffset),!1===this.IsAutoSyncDataOffset&&(a=null);var i=new tt;if(i.Data=this.SourceData.Data,i.Period=this.Period,i.Right=this.Right,i.DataType=this.SourceData.DataType,i.Symbol=this.Symbol,i.Right>0&&!this.IsApiPeriod&&this.RightFormula>=1){var r=i.GetRightData(i.Right,{AlgorithmType:this.RightFormula});i.Data=r}if((tt.IsDayPeriod(i.Period,!1)||tt.IsMinutePeriod(i.Period,!1))&&!this.IsApiPeriod){var n=i.GetPeriodData(i.Period);i.Data=n}var o=this.GetKLineCalulate();if(o){i=o.RecvHistoryData(i,{Symbol:this.Symbol,Function:"RecvMinuteRealtimeDataV2"}),this.FlowCapitalReady=!0}this.UpdateMainData(i,a),this.UpdateOverlayMinuteRealtimeData(t),this.BindInstructionIndexData(i);for(var s=0;s<this.Frame.SubFrame.length;++s)this.BindIndexData(s,i);if(this.BindAllOverlayIndexData(i,{CheckRunCount:!0,SyncExecute:!0}),this.UpdataDataoffset(),this.UpdatePointByCursorIndex(1),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.SendKLineUpdateEvent(i),this.UpdateDOMTooltip(0,i),this.UpdateHQFloatTooltip(i),this.BindAllOverlayIndexData(i,{CheckRunCount:!0,SyncExecute:!1}),this.mapEvent.has(Kn.ON_RECV_REALTIME_DATA)){var l=this.mapEvent.get(Kn.ON_RECV_REALTIME_DATA),t={HistoryData:i,Stock:{Symbol:this.Symbol,Name:this.Name}};l.Callback(l,t,this)}}}}},this.RecvMinuteRealtimeData=function(t){if(1!=this.IsOnTouch){if(2==t.ver)return void this.RecvMinuteRealtimeDataV2(t);var e=Ti.JsonDataToMinuteRealtimeData(t,this.Symbol);if(e){this.IsApiPeriod&&this.ReduceSourceData();var a=this.GetHistoryDataCount(),i=this.SourceData.Data.length;if(this.SourceData.MergeMinuteData(e)){Xn.Chart.Log("[KLineChartContainer::RecvMinuteRealtimeData] update kline by 1 minute data ["+i+"->"+this.SourceData.Data.length+"]");var r=new tt;if(r.Data=this.SourceData.Data,r.Period=this.Period,r.Right=this.Right,r.DataType=this.SourceData.DataType,r.Symbol=this.Symbol,r.Right>0&&!this.IsApiPeriod&&this.RightFormula>=1){var n=r.GetRightData(r.Right,{AlgorithmType:this.RightFormula});r.Data=n}if((tt.IsDayPeriod(r.Period,!1)||tt.IsMinutePeriod(r.Period,!1))&&!this.IsApiPeriod){var o=r.GetPeriodData(r.Period);r.Data=o}var s=this.GetKLineCalulate();if(s){r=s.RecvHistoryData(r,{Symbol:this.Symbol,Function:"RecvMinuteRealtimeData"}),this.FlowCapitalReady=!0}this.UpdateMainData(r,a),this.UpdateOverlayMinuteRealtimeData(t),this.BindInstructionIndexData(r);for(var l=0;l<this.Frame.SubFrame.length;++l)this.BindIndexData(l,r);this.BindAllOverlayIndexData(r,{CheckRunCount:!0,SyncExecute:!0}),this.UpdataDataoffset(),this.UpdatePointByCursorIndex(1),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.SendKLineUpdateEvent(r),this.BindAllOverlayIndexData(r,{CheckRunCount:!0,SyncExecute:!1})}}}},this.UpdateOverlayMinuteRealtimeData=function(t){for(var e in this.OverlayChartPaint){var a=this.OverlayChartPaint[e];if(a.Symbol&&(a.MainData&&a.Status==co.STATUS_FINISHED_ID)){if(2==t.ver)var i=Ti.JsonDataToMinuteRealtimeDataV2(t,a.Symbol);else var i=Ti.JsonDataToMinuteRealtimeData(t,a.Symbol);if(i){var r=a.SourceData;if(!r.MergeMinuteData(i))return;var n=new tt;n.Data=r.Data,n.Period=this.Period,n.Right=this.Right,n.DataType=0;var o=this.SourceData.GetOverlayMinuteData(n.Data,this.IsApiPeriod);if(n.Data=o,tt.IsMinutePeriod(n.Period,!1)&&!this.IsApiPeriod){var s=n.GetPeriodData(n.Period);n.Data=s}a.Data=n}}}},this.GetHistoryDataCount=function(){var t=null;return this.Frame.Data?this.Frame.SubFrame&&this.Frame.SubFrame[0]&&(t=this.Frame.SubFrame[0].Frame.Data):t=this.Frame.Data,t?t.Data.length:-1},this.GetRequestDataCount=function(){var t={MaxRequestDataCount:this.MaxRequestDataCount,MaxRequestMinuteDayCount:this.MaxRequestMinuteDayCount};if(!this.SourceData||!this.SourceData.Data||this.SourceData.Data.length<=0)return t;if(tt.IsDayPeriod(this.Period,!0)){var e=this.SourceData.Data.length;e>t.MaxRequestDataCount&&(t.MaxRequestDataCount=e)}else if(tt.IsMinutePeriod(this.Period,!0)){var a,e=0;for(var i in this.SourceData.Data){var r=this.SourceData.Data[i];r.Date!=a&&++e,a=r.Date}e>t.MaxRequestMinuteDayCount&&(t.MaxRequestMinuteDayCount=e)}return t},this.RequestTickData=function(){var t=this;this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),t.ChartSplashPaint.EnableSplash(!0),t.Draw();var e=So.CacheDomain+"/cache/dealday/today/"+t.Symbol+".json";if(this.NetworkFilter){var a={Name:"KLineChartContainer::RequestTickData",Explain:"å½å¤©åç¬æ°æ®",Request:{Url:e,Data:{symbol:t.Symbol},Type:"GET"},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvTickData(e),t.AutoUpdate()}),1==a.PreventDefault)return}n.HttpRequest({url:e,data:{symbol:t.Symbol},type:"get",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvTickData(e),t.AutoUpdate(1)},error:function(e,a){t.ChartSplashPaint.EnableSplash(!1),t.AutoUpdate()}})},this.RecvTickData=function(t){if(2==t.ver)var e=Ti.JsonDataToTickDataV2(t);else var e=Ti.JsonDataToTickData(t);var a=new tt;a.Data=e,a.DataType=2,this.SourceData=a,this.BeforeBindMainData&&this.BeforeBindMainData("RecvTickData");var i=new tt;i.Data=e,i.Right=this.Right,i.Period=this.Period,i.DataType=2,this.Symbol=t.symbol,this.Name=t.name,this.BindMainData(i,this.PageSize),this.AfterBindMainData&&this.AfterBindMainData("RecvTickData"),this.BindInstructionIndexData(i);for(var r,n=0;n<this.Frame.SubFrame.length;++n)0==n&&(r=this.Frame.SubFrame[n].Frame),this.BindIndexData(n,i);if(r&&r.YSplitOperator&&(r.YSplitOperator.Symbol=this.Symbol,r.YSplitOperator.Data=this.ChartPaint[0].Data,r.YSplitOperator.Period=this.Period,r.YSplitOperator.KLineChart=this.ChartPaint[0]),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex(),this.BindAllOverlayIndexData(i),this.mapEvent.has(Kn.RECV_HISTROY_DATA)){var o=this.mapEvent.get(Kn.RECV_HISTROY_DATA),t={HistoryData:i,Stock:{Symbol:this.Symbol,Name:this.Name}};o.Callback(o,t,this)}},this.RequestTickRealtimeData=function(){var t=this,e=0;if(this.SourceData&&this.SourceData.Data&&(e=this.SourceData.Data.length),this.NetworkFilter){var a={Name:"KLineChartContainer::RequestTickRealtimeData",Explain:"å½å¤©ææ°åç¬æ°æ®",Request:{Url:t.TickApiUrl,Data:{symbol:t.Symbol,start:e,end:e+1e3},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvTickRealtimeData(e),t.AutoUpdate()}),1==a.PreventDefault)return}n.HttpRequest({url:t.TickApiUrl,data:{symbol:t.Symbol,start:e-10,end:e+1e3},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvTickRealtimeData(e),t.AutoUpdate()}})},this.RecvTickRealtimeData=function(t){if(2==t.ver)var e=Ti.JsonDataToTickDataV2(t);else var e=Ti.JsonDataToTickData(t);if(e&&!(e.length<=0)){var a=!1;1==t.redraw&&(a=!0);var i=this.SourceData.Data,r=this.SourceData.Data.length,n=0;i.length>0&&(n=i[i.length-1].Time);var o=0;for(var s in e){var l=e[s];l.Time<=n||(i.push(l),++o)}if(!(o<=0&&0==a)){var h=new tt;h.Data=i,h.Right=this.Right,h.Period=this.Period,h.DataType=2,this.Symbol=t.symbol,this.Name=t.name,this.UpdateMainData(h,r),this.BindInstructionIndexData(h);for(var s=0;s<this.Frame.SubFrame.length;++s)this.BindIndexData(s,h);this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.UpdatePointByCursorIndex(),this.BindAllOverlayIndexData(h)}}},this.ClearIndexPaint=function(){if(this.Frame&&this.Frame.SubFrame)for(var t=0;t<this.Frame.SubFrame.length;++t){this.DeleteIndexPaint(t,!0);var e=this.Frame.SubFrame[t];if(we.IsNonEmptyArray(e.OverlayIndex))for(var a=0;a<e.OverlayIndex.length;++a){for(var i=e.OverlayIndex[a],r=0;r<i.ChartPaint.length;++r){var n=i.ChartPaint[r];n&&n.OnDestroy&&n.OnDestroy()}i.ChartPaint=[]}}for(var t=1;t<this.TitlePaint.length;++t){var e=this.TitlePaint[t];e.OverlayIndex=new Vn.default}},this.ChangePeriod=function(t,e){var a={Period:this.Period,Right:this.Right,KLineDrawType:this.KLineDrawType,Symbol:this.Symbol},i=!1,r=!1,n=null;if(e&&(e.KLine&&(we.IsNumber(e.KLine.DrawType)&&(i=!0),we.IsNumber(e.KLine.Right)&&(n=e.KLine.Right)),1==e.Reload&&(r=!0)),this.Period==t&&0==r)return void(i&&this.ChangeKLineDrawType(e.KLine.DrawType));i&&this.ChangeKLineDrawType(e.KLine.DrawType,!1);var o=!0;if(this.SourceData){var o=!1;if(t>ao&&t<=io)0!=this.SourceData.DataType&&(o=!0);else if(t>ro&&t<=no||t>oo&&t<=so||t>lo&&t<=ho)1!=this.SourceData.DataType?o=!0:tt.IsSecondPeriod(t)?o=!0:tt.IsMilliSecondPeriod(t)&&(o=!0);else switch(t){case 0:case 1:case 2:case 3:case 9:case 21:0!=this.SourceData.DataType&&(o=!0);break;case 4:case 5:case 6:case 7:case 8:case 11:case 12:1!=this.SourceData.DataType&&(o=!0);break;case 10:2!=this.SourceData.DataType&&(o=!0)}}this.Period=t,null!=n&&(this.Right=n),this.ReloadChartDrawPicture(),this.ClearRectSelect(!0),this.Frame.ClearUpDonwFrameYData(),this.ClearCustomKLine(),this.ClearKLineCaluate();var s=this.GetKLineDrawType();10!=s&&11!=s&&12!=s&&16!=s||(o=!0);var l=this.GetEventCallback(Kn.ON_CHANGE_KLINE_PERIOD);if(l&&l.Callback){var h={IsApiPeriod:this.IsApiPeriod,Old:a,Now:{Period:this.Period,Right:this.Right,KLineDrawType:this.KLineDrawType,Symbol:this.Symbol},IsDataTypeChange:o};l.Callback(l,h,this),o=h.IsDataTypeChange}if(0==o&&!this.IsApiPeriod)return this.ClearIndexRunCount(),void this.Update({UpdateCursorIndexType:2});this.ClearIndexPaint(),tt.IsDayPeriod(this.Period,!0)?(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangePeriod"),this.ResetScrollBar(),this.ResetOverlaySymbolStatus(),this.ClearIndexRunCount(),this.Frame.ClearYCoordinateMaxMin(),this.RequestHistoryData()):tt.IsMinutePeriod(this.Period,!0)||tt.IsSecondPeriod(this.Period)||tt.IsMilliSecondPeriod(this.Period)?(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangePeriod"),this.ResetScrollBar(),this.ResetOverlaySymbolStatus(),this.ClearIndexRunCount(),this.Frame.ClearYCoordinateMaxMin(),this.RequestHistoryMinuteData()):tt.IsTickPeriod(this.Period)&&(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangePeriod"),this.ResetScrollBar(),this.ClearIndexRunCount(),this.Frame.ClearYCoordinateMaxMin(),this.RequestTickData())},this.ChangeRight=function(t){if(wo.IsEnableRight(this.Period,this.Symbol,this.RightFormula)){var e=this.Symbol.toUpperCase();if(!(wo.IsBIT(e)||t<0||t>2||this.Right==t)){var a={Period:this.Period,Right:this.Right,KLineDrawType:this.KLineDrawType,Symbol:this.Symbol};this.Right=t;var i=this.GetEventCallback(Kn.ON_CHANGE_KLINE_RIGHT);if(i&&i.Callback){var r={IsApiPeriod:this.IsApiPeriod,Old:a,Now:{Period:this.Period,Right:this.Right,KLineDrawType:this.KLineDrawType,Symbol:this.Symbol}};i.Callback(i,r,this)}if(!this.IsApiPeriod)return void this.Update();tt.IsDayPeriod(this.Period,!0)?(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangeRight"),this.ClearIndexPaint(),this.ResetOverlaySymbolStatus(),this.ResetScrollBar(),this.RequestHistoryData()):(tt.IsMinutePeriod(this.Period,!0)||tt.IsSecondPeriod(this.Period)||tt.IsMilliSecondPeriod(this.Period))&&(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangeRight"),this.ClearIndexPaint(),this.ResetOverlaySymbolStatus(),this.ResetScrollBar(),this.RequestHistoryMinuteData())}}},this.SetFirstShowDate=function(t){if(t&&t.Date){var e={ID:zn.OP_GOTO,Date:t.Date};we.IsNumber(t.Time)&&(e.Time=t.Time),we.IsNumber(t.PageSize)&&(e.PageSize=t.PageSize),this.ChartOperator(e)}},this.DeleteIndexPaint=function(t,e){if(this.Frame.SubFrame[t]){var a=this.Frame.SubFrame[t].Frame;if(a){for(var i=[],r=0;r<this.ChartPaint.length;++r){var n=this.ChartPaint[r],o=n.ChartFrame.Guid==a.Guid||n.ChartFrame==a;0!=r&&o?!0===e&&n&&n.OnDestroy&&n.OnDestroy():i.push(n)}a.YSpecificMaxMin=null,a.IsLocked=!1,a.YSplitScale=null,a.YSplitOperator.SplitType=a.YSplitOperator.DefaultSplitType,this.ChartPaint=i;var s=t+1;this.TitlePaint[s].Data=[],this.TitlePaint[s].Title=null}}},this.ShowKLine=function(t){this.ChartPaint.length<=0||!this.ChartPaint[0]||(this.ChartPaint[0].IsShow=t)},this.SetInstructionData=function(t,e){if(!(this.ChartPaint.length<=0)&&this.ChartPaint[0]){var a=this.TitlePaint[1];2==t?(this.ChartPaint[0].ColorData=e.Data,a&&(a.ColorIndex={Name:e.Name,Param:e.Param})):1==t&&(this.ChartPaint[0].TradeData={Sell:e.Sell,Buy:e.Buy,Name:e.Name,Param:e.Param},a&&(a.TradeIndex={Name:e.Name,Param:e.Param}))}},this.ChangeInstructionIndex=function(t,e){var a=new s,i=a.Get(t);i&&(1!=i.InstructionType&&2!=i.InstructionType||(e&&e.Args&&(i.Args=e.Args),i.ID=t,this.ChangeInstructionScriptIndex(i)))},this.ChangeInstructionScriptIndex=function(t){if(1==t.InstructionType)this.TradeIndex=new Sr(t.Name,t.Script,t.Args,t);else{if(2!=t.InstructionType)return;this.ColorIndex=new Sr(t.Name,t.Script,t.Args,t)}var e=this.ChartPaint[0].Data;this.BindInstructionIndexData(e),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.CancelInstructionIndex=function(){if(!(this.ChartPaint.length<=0)&&this.ChartPaint[0]){this.ColorIndex=null,this.TradeIndex=null,this.ChartPaint[0].ColorData=null,this.ChartPaint[0].TradeData=null;var t=this.TitlePaint[1];t&&(t.TradeIndex=null,t.ColorIndex=null),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.SetFrameToolbar=function(t,e){if(e&&this.Frame.SubFrame[t]&&this.Frame.SubFrame[t].Frame){var a=this.Frame.SubFrame[t].Frame,i=!1;we.IsBool(e.Modify)&&(a.ModifyIndex=e.Modify,i=!0),we.IsBool(e.Change)&&(a.ChangeIndex=e.Change,i=!0),we.IsBool(e.Close)&&(a.CloseIndex=e.Close,i=!0),we.IsBool(e.Overlay)&&(a.OverlayIndex=e.Overlay,i=!0),i&&(a.SizeChange=!0,a.ToolbarRect=null,a.DrawToolbar())}},this.SetFrameAttribute=function(t,e){if(window&&this.Frame.SubFrame[t]&&this.Frame.SubFrame[t].Frame&&e){var a=this.Frame.SubFrame[t].Frame;we.IsUndefined(e.HorizontalReserved)||(a.HorizontalReserved=e.HorizontalReserved),we.IsNumber(e.TitleHeight)&&(a.ChartBorder.TitleHeight=e.TitleHeight)}},this.ResetFrameAttribute=function(t){if(window&&this.Frame.SubFrame[t]&&this.Frame.SubFrame[t].Frame){this.Frame.SubFrame[t].Frame.HorizontalReserved=null}},this.ChangeScriptIndex=function(t,e,a){this.DeleteIndexPaint(t,!0),this.WindowIndex[t]=new Sr(e.Name,e.Script,e.Args,e),this.ResetFrameAttribute(t),this.Frame.ClearYCoordinateMaxMin(t),a&&a.Window&&(this.SetFrameToolbar(t,a.Window),this.SetFrameAttribute(t,a.Window)),this.OnChangeIndexEvent(t,{ID:e.ID,Name:e.Name,FunctionName:"ChangeScriptIndex"}),this.Frame.ClearUpDonwFrameYData({Index:t});var i=this.ChartPaint[0].Data;this.BindIndexData(t,i),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.OnKLinePageChange=function(t){if(this.ChartPaint[0]){for(var e=this.ChartPaint[0].Data,a=0;a<this.WindowIndex.length;++a){var i=this.WindowIndex[a];i&&(!0===i.IsUsePageData&&this.BindIndexData(a,e,{Type:1}))}for(var a=0;a<this.Frame.SubFrame.length;++a)for(var i=this.Frame.SubFrame[a],r=0;r<i.OverlayIndex.length;++r){var n=i.OverlayIndex[r];n&&n.Script&&1==n.Script.IsUsePageData&&this.BindOverlayIndexData(n,a,e)}}},this.ChangeAPIIndex=function(t,e){this.DeleteIndexPaint(t,!0);var a=e.API;this.WindowIndex[t]=new br(a.Name,a.Script,a.Args,e),this.ResetFrameAttribute(t),this.Frame.ClearYCoordinateMaxMin(t),this.OnChangeIndexEvent(t,{ID:e.ID,Name:e.Name,FunctionName:"ChangeAPIIndex"}),e&&e.Window&&(this.SetFrameToolbar(t,e.Window),this.SetFrameAttribute(t,e.Window)),this.Frame.ClearUpDonwFrameYData({Index:t});var i=this.ChartPaint[0].Data;this.BindIndexData(t,i),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.OnChangeIndexEvent=function(t,e){var a=this.GetEventCallback(Kn.ON_CHANGE_INDEX);if(a&&a.Callback){var i={IndexInfo:e,WindowIndex:t};a.Callback(a,i,this)}},this.ChangeIndex=function(t,e,a){if(a&&a.API)return this.ChangeAPIIndex(t,a);var i=di.Get(e);if(!i){var r=new s,n=r.Get(e);if(!n)return;return n.IsMainIndex?t=0:0==t&&(t=1),s.ModifyAttribute(n,a),this.ChangeScriptIndex(t,n,a)}i.IsMainIndex?t>0&&(t=0):0==t&&(t=1);var o=new Array;for(var l in this.ChartPaint){var h=this.ChartPaint[l];0!=l&&h.ChartFrame==this.Frame.SubFrame[t].Frame||o.push(h)}this.Frame.SubFrame[t].Frame.YSpecificMaxMin=null,this.Frame.SubFrame[t].Frame.IsLocked=!1,this.Frame.SubFrame[t].Frame.YSplitScale=null,this.ChartPaint=o;var u=t+1;this.TitlePaint[u].Data=[],this.TitlePaint[u].Title=null,this.WindowIndex[t]=i.Create(a),this.CreateWindowIndex(t);var C=this.ChartPaint[0].Data;this.BindIndexData(t,C),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.ChangePyScriptIndex=function(t,e){this.DeleteIndexPaint(t),this.WindowIndex[t]=new Ai(e.Name,e.Script,e.Args,e);var a=this.ChartPaint[0].Data;this.BindIndexData(t,a),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.AddOverlayIndex=function(t){var e=this.CreateOverlayWindowsIndex(t);if(e){var a=this.ChartPaint[0].Data;this.BindOverlayIndexData(e,t.WindowIndex,a),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.CreateOverlayWindowsIndex=function(t){var e=this,a=t.IndexName,i=t.WindowIndex,r=null,n=null,o=null;if(t.API)r=t.API;else if(t.Script)n={Script:t.Script,ID:t.indexName,Name:t.indexName},t.Name&&(n.Name=t.Name);else{var l=new s;if(!(n=l.Get(a))&&!(o=di.Get(a)))return console.warn("[KLineChartContainer::CreateOverlayIndex] can not find index["+a+"]"),null}var h=this.Frame.SubFrame[i],u=new Y;t.Identify&&(u.Identify=t.Identify);var C=this.CreateOverlayFrame();if(C.Canvas=this.Canvas,C.MainFrame=h.Frame,C.ChartBorder=h.Frame.ChartBorder,C.GetEventCallback=function(t){return e.GetEventCallback(t)},!0===t.ShowRightText?C.IsShow=!0:!1===t.ShowRightText&&(C.IsShow=!1),we.IsBool(t.ShowToolbar)&&(C.IsShowToolbar=t.ShowToolbar),we.IsBool(t.IsShareY)&&(C.IsShareY=t.IsShareY),we.IsNumber(t.IsShowMainFrame)&&(C.IsShowMainFrame=t.IsShowMainFrame),we.IsBool(t.IsCalculateYMaxMin)&&(C.IsCalculateYMaxMin=t.IsCalculateYMaxMin),C.YSplitOperator=new Me,C.YSplitOperator.LanguageID=this.LanguageID,C.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),C.YSplitOperator.Frame=C,C.YSplitOperator.ChartBorder=C.ChartBorder,C.YSplitOperator.SplitCount=h.Frame.YSplitOperator.SplitCount,C.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},C.YSplitOperator.GetKLineChartCallback=function(){return e.GetKLineChart()},C.YSplitOperator.OverlayIndex=u,C.YSplitOperator.HQChart=this,C.YSplitOperator.OverlayIdentify=u.Identify,t.Frame){var c=t.Frame;c.Custom&&(C.YSplitOperator.Custom=c.Custom),we.IsBool(c.IsYDrawMainFrame)&&(C.IsYDrawMainFrame=c.IsYDrawMainFrame),we.IsBool(c.IsShowToolbar)&&(C.IsShowToolbar=c.IsShowToolbar)}if(u.Frame=C,r){var f=new br(r.Name,r.Script,r.Args,t,!0);f.OverlayIndex={IsOverlay:!0,Identify:u.Identify,WindowIndex:i,Frame:u},u.Script=f}else if(n){s.ModifyAttribute(n,t);var d=new xr(n.Name,n.Script,n.Args,n);d.OverlayIndex={IsOverlay:!0,Identify:u.Identify,WindowIndex:i,Frame:u},u.Script=d}else{var d=o.Create();d.OverlayIndex={IsOverlay:!0,Identify:u.Identify,WindowIndex:i,Frame:u},d.Create(this,i),u.Script=d}var D=this.GetEventCallback(Kn.ON_CREATE_OVERLAY_FRAME);if(D&&D.Callback){var m={OverlayFrame:u,WindowIndex:i,SubFrame:h};D.Callback(D,m,this)}return h.OverlayIndex.push(u),u},this.DeleteOverlayWindowsIndex=function(t){this.DeleteOverlayIndex(t,null)&&(this.UpdateFrameMaxMin(),this.Frame.ResetXYSplit(!0),this.Draw())},this.ChangeKLineDrawType=function(t,e,a){if(this.KLineDrawType!=t||a){var i=this.KLineDrawType;this.KLineDrawType=t;var r=new Rn.default([5,7,8,10,11,12,17]);if(r.has(i)||r.has(t)){var n=this.ChartPaint[0];return n&&(n.DrawType=this.KLineDrawType),this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangeKLineDrawType"),void(tt.IsDayPeriod(this.Period,!0)?(this.ResetOverlaySymbolStatus(),this.RequestHistoryData()):(tt.IsMinutePeriod(this.Period,!0)||tt.IsSecondPeriod(this.Period)||tt.IsMilliSecondPeriod(this.Period))&&(this.ResetOverlaySymbolStatus(),this.RequestHistoryMinuteData()))}for(var o=0;o<this.ChartPaint.length;++o){var s=this.ChartPaint[o];0==o?(s.DrawType=this.KLineDrawType,a&&we.IsBool(a.IsThinAKBar)&&(s.IsThinAKBar=a.IsThinAKBar)):"ChartVolStick"==s.ClassName&&(s.KLineDrawType=this.KLineDrawType)}for(var o in this.OverlayChartPaint){var s=this.OverlayChartPaint[o];s.DrawType=this.KLineDrawType}0!=e&&(this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw())}},this.ChangeCoordinateType=function(t){if(this.Frame&&we.IsNonEmptyArray(this.Frame.SubFrame)&&this.Frame.SubFrame[0]){var e=this.Frame.SubFrame[0].Frame;if(we.IsNumber(t)){var a=t;if(2==a)e.CoordinateType=1;else if(1==a)e.YSplitOperator.CoordinateType=a;else if(0==a)e.CoordinateType=0,e.YSplitOperator.CoordinateType=0;else{if(3!=a)return;e.Frame.YSplitOperator.CoordinateType=2}}else t.Type>=0&&t.Type<=5&&(e.YSplitOperator.CoordinateType=t.Type),!0===t.IsReverse?e.CoordinateType=1:0==t.IsReverse&&(e.CoordinateType=0);e.YMaxMin.Max=null,e.YMaxMin.Min=null,this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}},this.ChangeIndexWindowCount=function(t,e){var a=this;if(!(t<=0)&&this.Frame.SubFrame.length!=t){this.Frame.RestoreIndexWindows();var i=this.Frame.SubFrame.length;if(i>t){for(var r=this.GetEventCallback(Kn.ON_DELETE_FRAME),n=i-1;n>=t;--n)if(this.DeleteIndexPaint(n),this.DeleteChartPaintExtend({WindowIndex:n}),this.Frame.SubFrame[n].Frame.ClearToolbar(),r&&r.Callback){var o={SubFrame:this.Frame.SubFrame[n],WindowIndex:n};r.Callback(r,o,this)}this.Frame.SubFrame.splice(t,i-t),this.WindowIndex.splice(t,i-t),this.TitlePaint.splice(t+1,i-t);for(var n=0;n<this.Frame.SubFrame.length;++n){var l=this.Frame.SubFrame[n].Frame;n==this.Frame.SubFrame.length-1?l.XSplitOperator.ShowText=!0:l.XSplitOperator.ShowText=!1}this.Frame.SetSizeChage(!0),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw()}else{for(var h=C(),n=i;n<t;++n){var u=this.CreateSubFrameItem(n);u.Frame.ChartBorder.TitleHeight*=h,this.Frame.SubFrame[n]=u;var c=new ea;c.Frame=this.Frame.SubFrame[n].Frame,c.Canvas=this.Canvas,c.LanguageID=this.LanguageID,c.GetEventCallback=function(t){return a.GetEventCallback(t)},c.SelectedChart=this.SelectedChart,this.TitlePaint[n+1]=c}for(var n=0;n<this.Frame.SubFrame.length;++n){var l=this.Frame.SubFrame[n].Frame;n==this.Frame.SubFrame.length-1?l.XSplitOperator.ShowText=!0:l.XSplitOperator.ShowText=!1}this.Frame.SetSizeChage(!0),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw();var f=[{Index:"RSI"},{Index:"MACD"},{Index:"VOL"},{Index:"UOS"},{Index:"CHO"},{Index:"BRAR"}];e&&e.Windows.length>0&&(f=e.Windows);for(var d=new s,n=i;n<t;++n){var l=f[n%f.length],D=l.Index,m=d.Get(D),p=m.Args;l.Args&&(p=l.Args);var v={Name:m.Name,Script:m.Script,Args:p,ID:l.Index,KLineType:m.KLineType,YSpecificMaxMin:m.YSpecificMaxMin,YSplitScale:m.YSplitScale,FloatPrecision:m.FloatPrecision,Condition:m.Condition,OutName:m.OutName};this.WindowIndex[n]=new Sr(v.Name,v.Script,v.Args,v);var u=this.Frame.SubFrame[n];null!=l.Modify&&(this.Frame.SubFrame[n].Frame.ModifyIndex=l.Modify),null!=l.Change&&(this.Frame.SubFrame[n].Frame.ChangeIndex=l.Change),null!=l.Close&&(this.Frame.SubFrame[n].Frame.CloseIndex=l.Close),null!=l.Overlay&&(chart.Frame.SubFrame[n].Frame.OverlayIndex=l.Overlay),1==l.IsDrawTitleBG&&(this.Frame.SubFrame[n].Frame.IsDrawTitleBG=l.IsDrawTitleBG),we.IsBool(l.IsShowNameArrow)&&(this.Frame.SubFrame[n].Frame.IsShowNameArrow=l.IsShowNameArrow),we.IsNumber(l.TitleHeight)?this.Frame.SubFrame[n].Frame.ChartBorder.TitleHeight=l.TitleHeight:l.TitleHeight=this.Frame.SubFrame[n].Frame.ChartBorder.TitleHeight,we.IsBool(l.IsShowTitleArrow)&&(u.Frame.IsShowTitleArrow=l.IsShowTitleArrow),we.IsNumber(l.TitleArrowType)&&(u.Frame.TitleArrowType=l.TitleArrowType),0==l.IsShowIndexName&&(this.Frame.SubFrame[n].Frame.IsShowIndexName=!1),0==l.IsShowOverlayIndexName&&(this.Frame.SubFrame[n].Frame.IsShowOverlayIndexName=!1),we.IsNumber(l.IndexParamSpace)&&(this.Frame.SubFrame[n].Frame.IndexParamSpace=l.IndexParamSpace),we.IsNumber(l.IndexTitleSpace)&&(this.Frame.SubFrame[n].Frame.IndexTitleSpace=l.IndexTitleSpace),0==l.IsShowXLine&&(this.Frame.SubFrame[n].Frame.IsShowXLine=!1),0==l.IsShowYLine&&(this.Frame.SubFrame[n].Frame.IsShowYLine=!1),we.IsBool(l.IsShowIndexTitle)&&(this.Frame.SubFrame[n].Frame.IsShowIndexTitle=l.IsShowIndexTitle),we.IsBool(l.IsShowLeftText)&&(u.Frame.IsShowYText[0]=l.IsShowLeftText,u.Frame.YSplitOperator.IsShowLeftText=l.IsShowLeftText),we.IsBool(l.IsShowRightText)&&(u.Frame.IsShowYText[1]=l.IsShowRightText,u.Frame.YSplitOperator.IsShowRightText=l.IsShowRightText),l.OverlayIndexType&&(we.IsNumber(l.OverlayIndexType.Position)&&(u.Frame.OverlayIndexType.Position=l.OverlayIndexType.Position),we.IsNumber(l.OverlayIndexType.LineSpace)&&(u.Frame.OverlayIndexType.LineSpace=l.OverlayIndexType.LineSpace));var g=this.ChartPaint[0].Data;this.BindIndexData(n,g)}}}},this.ChangeIndexTemplate=function(t){var e=this;if(t.Windows){var a=t.Windows.length;if(!(a<=0)){var i=this.Frame.SubFrame.length,r=null,n=null,o=null;t.Symbol&&(o=t.Symbol),t.KLine&&(we.IsNumber(t.KLine.Period)&&t.KLine.Period!=this.Period&&(r=t.KLine.Period),we.IsNumber(t.KLine.Right)&&t.KLine.Right!=this.Right&&(n=t.KLine.Right));for(var l=null!=r||null!=n||null!=o,h=0;h<i;++h){this.DeleteIndexPaint(h);var u=this.Frame.SubFrame[h];u.YSpecificMaxMin=null,u.IsLocked=!1,u.YSplitScale=null}if(i>a){for(var C=this.GetEventCallback(Kn.ON_DELETE_FRAME),h=i-1;h>=a;--h)if(this.Frame.SubFrame[h].Frame.ClearToolbar(),C&&C.Callback){var c={SubFrame:this.Frame.SubFrame[h],WindowIndex:h};C.Callback(C,c,this)}this.Frame.SubFrame.splice(a,i-a),this.WindowIndex.splice(a,i-a),this.TitlePaint.splice(a+1,i-a)}else for(var h=i;h<a;++h){var f=this.CreateSubFrameItem(h);this.Frame.SubFrame[h]=f;var d=new ea;d.Frame=this.Frame.SubFrame[h].Frame,d.Canvas=this.Canvas,d.LanguageID=this.LanguageID,d.GetEventCallback=function(t){return e.GetEventCallback(t)},d.SelectedChart=this.SelectedChart,this.TitlePaint[h+1]=d}for(var h=0;h<a;++h){var D=h,m=t.Windows[h],p=null;t.Frame&&t.Frame.length>h&&(p=t.Frame[h]);var v=D+1;this.TitlePaint[v].Data=[],this.TitlePaint[v].Title=null;var u=this.Frame.SubFrame[h];if(this.DeleteWindowsOverlayIndex(h),m.Script)this.WindowIndex[h]=new Sr(m.Name,m.Script,m.Args,m);else if(m.API){var g=m.API;this.WindowIndex[D]=new br(g.Name,g.Script,g.Args,m)}else{var T=m.Index,I=di.Get(T);if(I)this.WindowIndex[h]=I.Create(),this.CreateWindowIndex(D);else{var S=new s,x=S.Get(T);x&&(s.ModifyAttribute(x,m),this.WindowIndex[h]=new Sr(x.Name,x.Script,x.Args,x))}}this.SetSubFrameAttribute(u,m,p)}for(var h=0;h<this.Frame.SubFrame.length;++h){var m=this.Frame.SubFrame[h].Frame;h==this.Frame.SubFrame.length-1?m.XSplitOperator.ShowText=!0:m.XSplitOperator.ShowText=!1}var b=[];if(we.IsNonEmptyArray(t.OverlayIndex))for(var h=0;h<t.OverlayIndex.length;++h){var m=t.OverlayIndex[h];m.Index&&(m.IndexName=m.Index),m.Windows>=0&&(m.WindowIndex=m.Windows);var y=this.CreateOverlayWindowsIndex(m);y&&b.push({WindowsIndex:m.WindowIndex,Overlay:y})}if(this.Frame.SetSizeChage(!0),l){o||(o=this.Symbol);var E={KLine:{}};we.IsNumber(r)&&(E.KLine.Period=r),we.IsNumber(n)&&(E.KLine.Right=n),this.ChangeSymbol(o,E)}else{for(var w=this.ChartPaint[0].Data,h=0;h<a;++h)this.BindIndexData(h,w);for(var h=0;h<b.length;++h){var m=b[h];this.BindOverlayIndexData(m.Overlay,m.WindowsIndex,w)}this.UpdataDataoffset(),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw()}}}},this.RemoveIndexWindow=function(t,e){if(Xn.Chart.Log("[KLineChartContainer::RemoveIndexWindow] remove id",t),0==t)return void(e&&e.DeleteMainIndex&&(this.DeleteIndexPaint(t),this.WindowIndex[t]=null,this.Frame.SetSizeChage(!0),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw()));if(this.Frame.SubFrame&&!(t>=this.Frame.SubFrame.length)){this.Frame.RestoreIndexWindows();var a=this.Frame.SubFrame[t].Frame;this.DeleteIndexPaint(t),this.DeleteChartPaintExtend({WindowIndex:t}),this.Frame.SubFrame[t].Frame.ClearToolbar();var i=this.GetEventCallback(Kn.ON_DELETE_FRAME);if(i&&i.Callback){var r={SubFrame:this.Frame.SubFrame[t],WindowIndex:t};i.Callback(i,r,this)}this.Frame.SubFrame.splice(t,1),this.WindowIndex.splice(t,1),this.TitlePaint.splice(t+1,1);for(var n=0;n<this.Frame.SubFrame.length;++n){var o=this.Frame.SubFrame[n].Frame;n==this.Frame.SubFrame.length-1?o.XSplitOperator.ShowText=!0:o.XSplitOperator.ShowText=!1,o.Identify=n}if(this.ChartDrawPicture.length>0){var s=[];for(var n in this.ChartDrawPicture){var o=this.ChartDrawPicture[n];o.Frame!=a&&s.push(o)}this.ChartDrawPicture=s}this.Frame.SetSizeChage(!0),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw()}},this.CreateExtendChart=function(t,e){var a;switch(t){case"ç­¹ç åå¸":return a=new de,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.Left=this.Frame.ChartBorder.Right,a.SetOption(e),this.ExtendChartPaint.push(a),this.Frame.ChartBorder.Right+=a.Width,a;case"KLineTooltip":return a=e.Create&&"function"==typeof e.Create?e.Create():new ue,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,e.LanguageID=this.LanguageID,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"æ·±åº¦å¾":return a=new ve,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"Kçº¿Yè½´èæ¯å¾":return a=new ge,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"èæ¯å¾":return a=new Te,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"FrameSplitPaint":return a=new De,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a;default:return(a=fo.Create(t))?(a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a):null}},this.OnTouchFinished=function(){if(this.DragMode==Jn.CLICK_TOUCH_MODE_ID){if(1==this.TouchStatus.CorssCursorShow&&this.TouchDrawCount>0)return;return this.TouchStatus.CorssCursorShow=!1,void this.DrawDynamicInfo()}if(!0===this.EnableClickModel){if(1==this.ClickModel.IsShowCorssCursor&&this.TouchDrawCount>0)return;return this.ClickModel.IsShowCorssCursor=!1,void this.DrawDynamicInfo()}if(!0===this.CorssCursorTouchEnd)return void(this.TouchDrawCount>0&&this.DrawDynamicInfo());for(var t in this.ExtendChartPaint){"KLineTooltipPaint"===this.ExtendChartPaint[t].ClassName&&this.DrawDynamicInfo()}},this.LockIndex=function(t){if(t&&t.IndexName)for(var e in this.WindowIndex){var a=this.WindowIndex[e];if(a||conintue,a.Name==t.IndexName){a.SetLock(t),this.Update();break}}},this.TryClickLock=function(t,e){for(var a=0;a<this.Frame.SubFrame.length;++a){var i=this.Frame.SubFrame[a];if(i.Frame.IsLocked&&i.Frame.LockPaint){var r=new et;if(i.Frame.LockPaint.GetTooltipData(t,e,r))return r.HQChart=this,r.Data.Callback&&r.Data.Callback(r),!0}}return!1},this.TryClickIndexTitle=function(t,e){for(var a in this.TitlePaint){var i=this.TitlePaint[a];if(i.IsClickTitle&&i.IsClickTitle(t,e)){var r={Point:{X:t,Y:e},Title:i.Title,FrameID:i.Frame.Identify};Xn.Chart.Log("[KLineChartContainer::TryClickIndexTitle] click title ",r);var n=this.GetEventCallback(Kn.ON_CLICK_INDEXTITLE);return n&&n.Callback&&n.Callback(n,r,this),!0}}return!1},this.SetSizeChange=function(t){this.Frame.SetSizeChage(t);for(var e in this.ExtendChartPaint){this.ExtendChartPaint[e].SizeChange=t}},this.SetSizeChage=this.SetSizeChange,this.Update=function(t){if(this.SourceData){this.BeforeBindMainData&&this.BeforeBindMainData("Update");var e=new tt;if(e.Data=this.SourceData.Data,e.Period=this.Period,e.Right=this.Right,e.DataType=this.SourceData.DataType,e.Symbol=this.Symbol,e.Right>0&&tt.IsDayPeriod(e.Period,!0)){var a=e.GetRightData(e.Right,{AlgorithmType:this.RightFormula});e.Data=a}else if(e.Right>0&&tt.IsMinutePeriod(e.Period,!0)&&this.RightFormula>=1){var a=e.GetRightData(e.Right,{AlgorithmType:this.RightFormula});e.Data=a}if(tt.IsDayPeriod(e.Period,!1)||tt.IsMinutePeriod(e.Period,!1)){var i=e.GetPeriodData(e.Period);e.Data=i}this.BindMainData(e,this.PageSize),this.AfterBindMainData&&this.AfterBindMainData("Update");for(var r,n=0;n<this.Frame.SubFrame.length;++n)0==n&&(r=this.Frame.SubFrame[n].Frame),this.BindIndexData(n,e);r&&r.YSplitOperator&&(r.YSplitOperator.Symbol=this.Symbol,r.YSplitOperator.Data=this.ChartPaint[0].Data,r.YSplitOperator.Period=this.Period);for(var n in this.OverlayChartPaint){var o=this.OverlayChartPaint[n];if(o.SourceData)if(tt.IsMinutePeriod(this.Period,!0)){var e=new tt;e.Data=o.SourceData.Data,e.Period=this.Period,e.Right=this.Right;var s=this.SourceData.GetOverlayMinuteData(e.Data,this.IsApiPeriod);if(e.Data=s,tt.IsMinutePeriod(e.Period,!1)&&!this.IsApiPeriod){var i=e.GetPeriodData(e.Period);e.Data=i}o.Data=e}else{var e=new tt;if(e.Data=o.SourceData.Data,e.Period=this.Period,e.Right=this.Right,e.Right>0&&wo.IsSHSZStockA(o.Symbol)){var a=e.GetRightData(e.Right,{AlgorithmType:this.RightFormula});e.Data=a}var s=this.SourceData.GetOverlayData(e.Data,this.IsApiPeriod);if(e.Data=s,tt.IsDayPeriod(e.Period,!1)&&!this.IsApiPeriod){var i=e.GetPeriodData(e.Period);e.Data=i}o.Data=e}}this.ReqeustKLineInfoData({FunctionName:"Update"}),this.CreateChartDrawPictureByStorage(),this.UpdataDataoffset(),t&&t.UpdateCursorIndexType>0?this.UpdatePointByCursorIndex(t.UpdateCursorIndexType):this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw();for(var n=0;n<this.Frame.SubFrame.length;++n){var o=this.Frame.SubFrame[n];for(var l in o.OverlayIndex){var h=o.OverlayIndex[l];this.BindOverlayIndexData(h,n,e)}}}},this.ChangeSymbol=function(t,e){if(this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"KLineChartContainer::ChangeSymbol"),this.ClearRectSelect(!0),this.ClearCustomKLine(),this.ClearKLineCaluate(),this.HideTooltip(),this.ResetScrollBar(),this.ClearIndexRunCount(),this.Frame.ClearYCoordinateMaxMin(),this.Symbol=t,!t)return void this.DrawEmpty();if(e&&e.KLine){var a=e.KLine;we.IsNumber(a.Right)&&(this.Right=a.Right),we.IsNumber(a.Period)&&(this.Period=a.Period)}if(wo.IsSHSZIndex(t)&&(this.Right=0),this.ClearIndexPaint(),e){if(we.IsNonEmptyArray(e.Windows))for(var i=e.Windows,r=0;r<i.length&&!(r>=this.WindowIndex.length);++r){var a=i[r];if(a)if(a.Script)this.WindowIndex[r]=new Sr(a.Name,a.Script,a.Args,a);else if(a.API){var n=a.API;this.WindowIndex[r]=new br(n.Name,n.Script,n.Args,a)}else{var o=a.Index,l=new s,h=l.Get(o);h&&(s.ModifyAttribute(h,a),h.ID=o,this.WindowIndex[r]=new Sr(h.Name,h.Script,h.Args,h))}}if(e.CustomShow&&we.IsPlusNumber(e.CustomShow.Date)){var a=e.CustomShow;this.CustomShow={Date:a.Date},we.IsNumber(a.Time)&&(this.CustomShow.Time=a.Time),we.IsPlusNumber(a.PageSize)&&(this.CustomShow.PageSize=a.PageSize)}}this.ReloadChartDrawPicture(),this.Frame.ClearUpDonwFrameYData(),tt.IsDayPeriod(this.Period,!0)?(this.ClearStockCache(),this.RequestHistoryData()):tt.IsMinutePeriod(this.Period,!0)||tt.IsSecondPeriod(this.Period)||tt.IsMilliSecondPeriod(this.Period)?(this.ClearStockCache(),this.RequestHistoryMinuteData()):tt.IsTickPeriod(this.Period)&&(this.ClearStockCache(),this.RequestTickData())},this.ReqeustKLineInfoData=function(t){if(t&&"RecvDragDayData"==t.FunctionName)t.Update=!0;else{if(this.ChartPaint.length>0){this.ChartPaint[0].InfoData=new Vn.default}t.Update=!1}if(we.IsNonEmptyArray(this.ChartInfo))for(var e=0;e<this.ChartInfo.length;++e)this.ChartInfo[e].RequestData(this,t)},this.SetKLineInfo=function(t,e){this.ChartInfo=[];for(var a in t){var i=Pi.Get(t[a]);if(i){var r=i.Create();r.MaxRequestDataCount=this.MaxRequestDataCount,this.ChartInfo.push(r)}}1==e&&this.ReqeustKLineInfoData({FunctionName:"SetKLineInfo"})},this.AddKLineInfo=function(t,e){var a=Pi.GetClassInfo(t);if(!a)return void console.warn("[KLineChartContainer::AddKLineInfo] can't find infoname=",t);for(var i in this.ChartInfo){var r=this.ChartInfo[i];if(r.ClassName==a.ClassName)return}var n=Pi.Get(t);if(n){var r=n.Create();r.MaxRequestDataCount=this.MaxRequestDataCount,this.ChartInfo.push(r),1==e&&r.RequestData(this)}},this.DeleteKLineInfo=function(t){var e=Pi.GetClassInfo(t);if(!e)return void console.warn("[KLineChartContainer::DeleteKLineInfo] can't find infoname=",t);for(var a in this.ChartInfo){if(this.ChartInfo[a].ClassName==e.ClassName){this.ChartInfo.splice(a,1),this.UpdataChartInfo(),this.Draw();break}}},this.ClearKLineInfo=function(){if(this.ChartInfo&&!(this.ChartInfo.length<=0)){this.ChartInfo=[];this.ChartPaint[0].InfoData=null,this.Draw()}},this.OverlaySymbol=function(t,e){for(var a in this.OverlayChartPaint){if(this.OverlayChartPaint[a].Symbol===t)return console.warn("[KLineChartContainer::OverlaySymbol] overlay symbol="+t+" exist."),!1}var i=new lt;return i.Canvas=this.Canvas,i.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,i.ChartFrame=this.Frame.SubFrame[0].Frame,i.Name="Overlay-KLine",i.DrawType=this.KLineDrawType,i.Symbol=t,i.Identify="Overlay-KLine-"+t,e&&e.Color?i.Color=e.Color:i.Color=So.OverlaySymbol.Color[So.OverlaySymbol.Random%So.OverlaySymbol.Color.length],i.SetOption(e),++So.OverlaySymbol.Random,this.ChartPaint[0]&&this.ChartPaint[0].Data&&this.SourceData&&(i.MainData=this.ChartPaint[0].Data),this.OverlayChartPaint.push(i),tt.IsDayPeriod(this.Period,!0)?this.RequestOverlayHistoryData():tt.IsMinutePeriod(this.Period,!0)&&this.RequestOverlayHistoryMinuteData(),!0},this.RequestSingleOverlayHistoryData=function(t,e,a,i){var r=this;if(i.Status=co.STATUS_REQUESTDATA_ID,this.NetworkFilter){var n={Name:"KLineChartContainer::RequestOverlayHistoryData",Explain:"å å è¡ç¥¨æ¥Kçº¿æ°æ®",Request:{Url:r.KLineApiUrl,Data:{symbol:t,count:e.MaxRequestDataCount,first:{date:a},field:["name","symbol","yclose","open","price","high","vol","amount"]},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(n,function(t){i.Status=co.STATUS_RECVDATA_ID,r.RecvOverlayHistoryData(t,i)}),1==n.PreventDefault)return}},this.RequestOverlayHistoryData=function(){if(this.OverlayChartPaint.length&&this.SourceData&&this.SourceData.Data)for(var t=this.GetRequestDataCount(),e=this.SourceData.Data[0].Date,a=0;a<this.OverlayChartPaint.length;++a){var i=this.OverlayChartPaint[a];if(i.MainData&&i.Status==co.STATUS_NONE_ID){var r=i.Symbol;r&&this.RequestSingleOverlayHistoryData(r,t,e,i)}}},this.RecvOverlayHistoryData=function(t,e){if(!e.IsDelete){var a=Ti.JsonDataToHistoryData(t),i=new tt;i.Data=a,i.DataType=0;var r=new tt;if(r.Data=a,r.Period=this.Period,r.Right=this.Right,r.DataType=0,r.Right>0&&wo.IsSHSZStockA(t.symbol)&&!this.IsApiPeriod){var n=r.GetRightData(r.Right,{AlgorithmType:this.RightFormula});r.Data=n}var o=this.SourceData.GetOverlayData(r.Data,this.IsApiPeriod);if(r.Data=o,tt.IsDayPeriod(r.Period,!1)&&!this.IsApiPeriod){var s=r.GetPeriodData(r.Period);r.Data=s}e.Data=r,e.SourceData=i,e.Title=t.name,e.Symbol=t.symbol,e.Status=co.STATUS_FINISHED_ID,this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=1,this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}},this.RequestSingleHistoryMinuteData=function(t,e,a,i,r){var n=this;if(r.Status=co.STATUS_REQUESTDATA_ID,this.NetworkFilter){var o={Name:"KLineChartContainer::RequestOverlayHistoryMinuteData",Explain:"å å è¡ç¥¨åéKçº¿æ°æ®",Request:{Url:n.MinuteKLineApiUrl,Data:{symbol:t,count:e.MaxRequestMinuteDayCount,first:{date:a,time:i},field:["name","symbol","yclose","open","price","high","vol","amount"]},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(o,function(t){r.Status=co.STATUS_RECVDATA_ID,n.RecvOveralyHistoryMinuteData(t,r)}),1==o.PreventDefault)return}},this.RequestOverlayHistoryMinuteData=function(){if(this.OverlayChartPaint.length&&this.SourceData&&this.SourceData.Data)for(var t=this.GetRequestDataCount(),e=this.SourceData.Data[0].Date,a=this.SourceData.Data[0].Time,i=0;i<this.OverlayChartPaint.length;++i){var r=this.OverlayChartPaint[i];if(r.MainData&&r.Status==co.STATUS_NONE_ID){var n=r.Symbol;n&&this.RequestSingleHistoryMinuteData(n,t,e,a,r)}}},this.RecvOveralyHistoryMinuteData=function(t,e){if(this.EnableVerifyRecvData&&t.symbol!=e.Symbol)return void Xn.Chart.Warn("[MinuteChartContainer::RecvOveralyHistoryMinuteData] recv data symbol not match. paint["+e.Symbol+"] , Recv["+t.symbol+"]");var a=Ti.JsonDataToMinuteHistoryData(t);if(a){var i=new tt;i.Data=a,i.DataType=1;var r=new tt;r.Data=a,r.Period=this.Period,r.Right=this.Right,r.DataType=1;var n=this.SourceData.GetOverlayMinuteData(r.Data,this.IsApiPeriod);if(r.Data=n,tt.IsMinutePeriod(r.Period,!1)&&!this.IsApiPeriod){var o=r.GetPeriodData(r.Period);r.Data=o}e.Data=r,e.SourceData=i,e.Title=t.name,e.Symbol=t.symbol,e.Status=co.STATUS_FINISHED_ID,this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=1,this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}},this.ClearOverlaySymbol=function(){for(var t in this.OverlayChartPaint){this.OverlayChartPaint[t].IsDelete=!0}this.OverlayChartPaint=[],this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint,this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=0,this.UpdateFrameMaxMin(),this.Draw()},this.DeleteOverlaySymbol=function(t){for(var e in this.OverlayChartPaint){var a=this.OverlayChartPaint[e];if(a.Symbol===t)return a.IsDelete=!0,this.OverlayChartPaint.splice(e,1),this.OverlayChartPaint.length<=0&&(this.Frame.SubFrame[0].Frame.YSplitOperator.CoordinateType=0),this.UpdateFrameMaxMin(),this.Draw(),!0}return console.warn("[KLineChartContainer::DeleteOverlaySymbol] overlay symbol="+t+" not exist."),!1},this.RequestFlowCapitalData=function(){if(this.Symbol&&1!=this.FlowCapitalReady){var t=this.Symbol.toUpperCase(),e=!0;if((wo.IsBIT(t)||wo.IsFutures(t))&&(e=!1),this.EnableFlowCapital&&wo.IsBIT(t)&&1==this.EnableFlowCapital.BIT&&(e=!0),!e)return Xn.Chart.Log("[KLineChartContainer::RequestFlowCapitalData] symbol="+this.Symbol+" not need download data."),void(this.FlowCapitalReady=!0);var a=this,i=["name","date","symbol","capital.a"];if(this.NetworkFilter){var r={Name:"KLineChartContainer::RequestFlowCapitalData",Explain:"æµéè¡æ¬æ°æ®",Request:{Url:a.StockHistoryDayApiUrl,Data:{symbol:[this.Symbol],orderfield:"date",field:i},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(r,function(t){a.RecvFlowCapitalData(t)}),1==r.PreventDefault)return}n.HttpRequest({url:this.StockHistoryDayApiUrl,data:{field:i,symbol:[this.Symbol],orderfield:"date"},type:"post",dataType:"json",async:!0,success:function(t){a.RecvFlowCapitalData(t)}})}},this.RecvFlowCapitalData=function(t){if(t.stock&&1==t.stock.length){var e=t.stock[0];if(this.EnableVerifyRecvData&&e.symbol!=this.Symbol)return void Xn.Chart.Warn("[MinuteChartContainer::RecvFlowCapitalData] recv data symbol not match. HQChart["+this.Symbol+"] , Recv["+e.symbol+"]");var a=new Array;for(var i in e.stockday){var r=e.stockday[i],n=new Z;n.Date=r.date;var o=r.capital;o&&(o.a>0&&(n.Value=o.a,a.push(n)))}if(this.IsApiPeriod){var s=this.ChartPaint[0].Data,l=null;if(tt.IsMinutePeriod(this.Period,!0)?l=s.GetMinuteFittingFinanceData(a):tt.IsDayPeriod(this.Period,!0)&&(l=s.GetFittingFinanceData(a)),l&&s.Data&&l.length==s.Data.length)for(var h in s.Data){var r=s.Data[h];l[h]&&we.IsNumber(l[h].Value)&&(r.FlowCapital=l[h].Value)}}else if(tt.IsMinutePeriod(this.Period,!0)){for(var l=this.SourceData.GetMinuteFittingFinanceData(a),h=0;h<this.SourceData.Data.length;++h){var r=this.SourceData.Data[h];l[h]&&we.IsNumber(l[h].Value)&&(r.FlowCapital=l[h].Value)}var u=this.ChartPaint[0].Data,C=new tt;if(C.Data=this.SourceData.Data,u.Right>0&&this.RightFormula>=1){var c=C.GetRightData(u.Right,{AlgorithmType:this.RightFormula});C.Data=c}if(tt.IsMinutePeriod(u.Period,!1)){var f=C.GetPeriodData(u.Period);C.Data=f}u.Data=C.Data}else{var l=this.SourceData.GetFittingFinanceData(a);for(var d in this.SourceData.Data){var r=this.SourceData.Data[d];l[d]&&we.IsNumber(l[d].Value)&&(r.FlowCapital=l[d].Value)}var u=this.ChartPaint[0].Data,C=new tt;if(C.Data=this.SourceData.Data,u.Right>0){var c=C.GetRightData(u.Right,{AlgorithmType:this.RightFormula});C.Data=c}if(tt.IsDayPeriod(u.Period,!1)){var f=C.GetPeriodData(u.Period);C.Data=f}u.Data=C.Data}this.FlowCapitalReady=!0;var D=!1;for(var h in this.ExtendChartPaint){var r=this.ExtendChartPaint[h];if("StockChip"==r.ClassName){D=!0;break}}D&&this.Draw()}},this.CreateChartDrawPicture=function(t,e,a){var i=null,r=aa.GetDrawPictureByName(t);if(r&&(i=r.Create(),"ChartDrawPictureText"!=i.ClassName&&"ChartDrawVolProfile"!=i.ClassName||(i.HQChart=this)),!i&&aa.MapIonFont.has(t)){var n=aa.MapIonFont.get(t);i=new ba,i.FontOption.Family=n.Family,i.Text=n.Text,n.Color&&(i.LineColor=n.Color)}if(!i)return!1;i.Canvas=this.Canvas,i.Status=0,i.Symbol=this.Symbol,i.Period=this.Period,i.Right=this.Right,i.Option=this.ChartDrawOption,a&&(i.FinishedCallback=a),e&&i.SetOption(e);var o=this;return i.Update=function(){o.DrawDynamicInfo()},i.GetActiveDrawPicture=function(){return o.GetActiveDrawPicture()},this.CurrentChartDrawPicture=i,!0},this.AddChartDrawPicture=function(t){if(!t)return null;if(t.FrameID<0||t.FrameID>=this.Frame.SubFrame.length)return null;var e=this,a=aa.GetDrawPictureByClassName(t.ClassName);if(!a)return null;var i=a.Create();return i.Canvas=this.Canvas,i.Status=10,i.Frame=this.Frame.SubFrame[t.FrameID].Frame,i.Symbol=this.Symbol,i.Period=this.Period,i.Right=this.Right,i.Option=this.ChartDrawOption,t.Value&&(i.Value=t.Value),t.Guid&&(i.Guid=t.Guid),i.ImportStorageData&&i.ImportStorageData(t),i.SetOption(t),t.EnableUpdateXValue&&i.UpdateXValue(),i.ValueToPoint(),i.GetActiveDrawPicture=function(){return e.GetActiveDrawPicture()},"ChartDrawPictureText"===i.ClassName&&(i.IsInitialized=!0),this.ChartDrawPicture.push(i),this.DrawDynamicInfo(),i},this.PasteChartDrawPicture=function(t,e,a){if(!t||!t.ClassName)return null;if(e<0||e>=this.Frame.SubFrame.length)return null;var i=aa.GetDrawPictureByClassName(t.ClassName);if(!i)return null;var r=i.Create();if(!r)return null;var n=this;return r.Canvas=this.Canvas,r.Status=10,r.Frame=this.Frame.SubFrame[e].Frame,r.Symbol=this.Symbol,r.Period=this.Period,r.Right=this.Right,r.Option=this.ChartDrawOption,r.GetActiveDrawPicture=function(){return n.GetActiveDrawPicture()},r.SetOption&&r.SetOption(t),this.RandomDrawPictureValue(r,t),r.PointToValue(),"ChartDrawPictureText"===r.ClassName&&(r.IsInitialized=!0),this.ChartDrawPicture.push(r),this.ChartDrawStorage&&this.ChartDrawStorage.SaveDrawData(r),this.DrawDynamicInfo(),r},this.RandomDrawPictureValue=function(t,e){if(we.IsNonEmptyArray(e.Value)){var a=this.GetKLineChart();if(!a||!a.Data||!we.IsNumber(a.Data.DataOffset)||a.Data.DataOffset<0)return null;if(!we.IsNonEmptyArray(a.Data.Data))return null;var i=a.Data.Data,r=(a.Data.DataOffset,a.Data.DataOffset+a.ChartFrame.XPointCount-1);r>=i.length&&(r=i.length-1);var n=t.Frame.ChartBorder.GetHeight(),o=(t.Frame.HorizontalMax,t.Frame.HorizontalMin,t.Frame.ChartBorder.GetBottomEx()-n*e.YFristScale),s={Max:5,Min:2},l=Math.floor(Math.random()*(s.Max-s.Min+1))+s.Min,h=e.Value[0].XIndex+l;t.Value=[];for(var u=0;u<e.Value.length;++u){var C=e.Value[u];t.Value[u]={XValue:h+C.XOffset},t.Point[u]={Y:o+C.YOffset,X:t.Frame.GetXFromIndex(h+C.XOffset,!1)}}}},this.MoveChartDrawPicture=function(t,e,a,i){var r=this.CurrentChartDrawPicture;if(!r)return!1;var n=C();a&&(n=1);var o=t*n,s=e*n;return r.Move(o,s,i),!0},this.UpdateChartDrawXValue=function(){for(var t in this.ChartDrawPicture){this.ChartDrawPicture[t].UpdateXValue()}},this.OnRightMenu=function(t,e,a){var i=C(),r=this.Frame.PtInFrame(t*i,e*i);this.PopupRightMenuV2({X:a.offsetX,Y:a.offsetY,FrameID:r},a);var n=this.GetEventCallback(Kn.ON_CONTEXT_MENU);if(n){var o={X:t,Y:e,Event:a,FrameID:r};n.Callback(n,o,this)}},this.GetRightMenuData=function(t){var e=this.Frame.SubFrame.length,a=this.ChartPaint[0],i=a.DrawType,r=a.IsThinAKBar,n=a.PriceGap,o=a.InfoPosition,s=null,l=null,h=null;this.Frame.SubFrame[0]&&this.Frame.SubFrame[0].Frame&&(h=this.Frame.SubFrame[0].Frame),h&&(s=h.CoordinateType,h.YSplitOperator&&(l=h.YSplitOperator.CoordinateType));for(var u=[],C=0;C<this.ChartInfo.length;++C){var c=this.ChartInfo[C];c&&c.ClassName&&u.push(c.ClassName)}for(var f=[],C=0;C<this.OverlayChartPaint.length;++C){var c=this.OverlayChartPaint[C];c&&c.Symbol&&f.push(c.Symbol)}var d=!1,D=!1;this.GetExtendChartByClassName("SessionBreaksPaint")&&(d=!0),this.GetExtendChartByClassName("StockChip")&&(D=!0);var m=!1;this.ChartCorssCursor&&(m=this.ChartCorssCursor.IsShowCorss);var p=!1;this.PopMinuteChart&&(p=!0);var v=[{Name:"åæå¨æ",SubMenu:[{Name:"æ¥çº¿",Data:{ID:Qn.CMD_CHANGE_PERIOD_ID,Args:[0]},Checked:0==this.Period},{Name:"å¨çº¿",Data:{ID:Qn.CMD_CHANGE_PERIOD_ID,Args:[1]},Checked:1==this.Period},{Name:"åå¨çº¿",Data:{ID:Qn.CMD_CHANGE_PERIOD_ID,Args:[21]},Checked:21==this.Period},{Name:"æçº¿",Data:{ID:Qn.CMD_CHANGE_PERIOD_ID,Args:[2]},Checked:2==this.Period},{Name:"å­£çº¿",Data:{ID:Qn.CMD_CHANGE_PERIOD_ID,Args:[9]},Checked:9==this.Period},{Name:"åå¹´",Data:{ID:Qn.CMD_CHANGE_PERIOD_ID,Args:[22]},Checked:22==this.Period},{Name:"å¹´çº¿",Data:{ID:Qn.CMD_CHANGE_PERIOD_ID,Args:[3]},Checked:3==this.Period},{Name:"1å",Data:{ID:Qn.CMD_CHANGE_PERIOD_ID,Args:[4]},Checked:4==this.Period},{Name:"5å",Data:{ID:Qn.CMD_CHANGE_PERIOD_ID,Args:[5]},Checked:5==this.Period},{Name:"15å",Data:{ID:Qn.CMD_CHANGE_PERIOD_ID,Args:[6]},Checked:6==this.Period},{Name:"30å",Data:{ID:Qn.CMD_CHANGE_PERIOD_ID,Args:[7]},Checked:7==this.Period},{Name:"60å",Data:{ID:Qn.CMD_CHANGE_PERIOD_ID,Args:[8]},Checked:8==this.Period},{Name:"2å°æ¶",Data:{ID:Qn.CMD_CHANGE_PERIOD_ID,Args:[11]},Checked:11==this.Period},{Name:"4å°æ¶",Data:{ID:Qn.CMD_CHANGE_PERIOD_ID,Args:[12]},Checked:12==this.Period},{Name:"åç¬",Data:{ID:Qn.CMD_CHANGE_PERIOD_ID,Args:[10]},Checked:10==this.Period},{Name:"èªå®ä¹å¨æ:3åé",Data:{ID:Qn.CMD_CHANGE_PERIOD_ID,Args:[20003]},Checked:20003==this.Period},{Name:"èªå®ä¹å¨æ:35åé",Data:{ID:Qn.CMD_CHANGE_PERIOD_ID,Args:[20035]},Checked:20035==this.Period},{Name:"èªå®ä¹å¨æ:8æ¥",Data:{ID:Qn.CMD_CHANGE_PERIOD_ID,Args:[40008]},Checked:40008==this.Period}]},{Name:"ææ åæ¢",SubMenu:[{Name:"åçº¿",Data:{ID:Qn.CMD_CHANGE_INDEX_ID,Args:[t,"åçº¿"]}},{Name:"BOLL",Data:{ID:Qn.CMD_CHANGE_INDEX_ID,Args:[t,"BOLL"]}},{Name:"MACD",Data:{ID:Qn.CMD_CHANGE_INDEX_ID,Args:[t,"MACD"]}},{Name:"MACD(ç²)",Data:{ID:Qn.CMD_CHANGE_INDEX_ID,Args:[t,"MACD2"]}},{Name:"KDJ",Data:{ID:Qn.CMD_CHANGE_INDEX_ID,Args:[t,"KDJ"]}},{Name:"VOL",Data:{ID:Qn.CMD_CHANGE_INDEX_ID,Args:[t,"VOL"]}},{Name:"RSI",Data:{ID:Qn.CMD_CHANGE_INDEX_ID,Args:[t,"RSI"]}},{Name:"BRAR",Data:{ID:Qn.CMD_CHANGE_INDEX_ID,Args:[t,"BRAR"]}},{Name:"WR",Data:{ID:Qn.CMD_CHANGE_INDEX_ID,Args:[t,"WR"]}}]},{Name:"äºå½©Kçº¿",SubMenu:[{Name:"åå­æ",Data:{ID:Qn.CMD_CHANGE_COLOR_INDEX_ID,Args:["äºå½©Kçº¿-åå­æ"]}},{Name:"æ©æ¨ä¹æ",Data:{ID:Qn.CMD_CHANGE_COLOR_INDEX_ID,Args:["äºå½©Kçº¿-æ©æ¨ä¹æ"]}},{Name:"åæ­»åå­",Data:{ID:Qn.CMD_CHANGE_COLOR_INDEX_ID,Args:["äºå½©Kçº¿-åæ­»åå­"]}},{Name:"ä¸åªä¹é¸¦",Data:{ID:Qn.CMD_CHANGE_COLOR_INDEX_ID,Args:["äºå½©Kçº¿-ä¸åªä¹é¸¦"]}},{Name:"åèé´çº¿",Data:{ID:Qn.CMD_CHANGE_COLOR_INDEX_ID,Args:["äºå½©Kçº¿-åèé´çº¿"]}},{Name:"é»æä¹æ",Data:{ID:Qn.CMD_CHANGE_COLOR_INDEX_ID,Args:["äºå½©Kçº¿-é»æä¹æ"]}}]},{Name:"ä¸å®¶ç³»ç»",SubMenu:[{Name:"BIAS",Data:{ID:Qn.CMD_CHANGE_TRADE_INDEX_ID,Args:["äº¤æç³»ç»-BIAS"]}},{Name:"CCI",Data:{ID:Qn.CMD_CHANGE_TRADE_INDEX_ID,Args:["äº¤æç³»ç»-CCI"]}},{Name:"DMI",Data:{ID:Qn.CMD_CHANGE_TRADE_INDEX_ID,Args:["äº¤æç³»ç»-DMI"]}},{Name:"KD",Data:{ID:Qn.CMD_CHANGE_TRADE_INDEX_ID,Args:["äº¤æç³»ç»-KD"]}},{Name:"BOLL",Data:{ID:Qn.CMD_CHANGE_TRADE_INDEX_ID,Args:["äº¤æç³»ç»-BOLL"]}},{Name:"KDJ",Data:{ID:Qn.CMD_CHANGE_TRADE_INDEX_ID,Args:["äº¤æç³»ç»-KDJ"]}}]},{Name:"ä¿¡æ¯å°é·",SubMenu:[{Name:"å¬å",Data:{ID:Qn.CMD_CHANGE_KLINE_INFO_ID,Args:["å¬å",!u.includes("AnnouncementInfo")]},Checked:u.includes("AnnouncementInfo")},{Name:"ä¸ç»©é¢å",Data:{ID:Qn.CMD_CHANGE_KLINE_INFO_ID,Args:["ä¸ç»©é¢å",!u.includes("PforecastInfo")]},Checked:u.includes("PforecastInfo")},{Name:"è°ç ",Data:{ID:Qn.CMD_CHANGE_KLINE_INFO_ID,Args:["è°ç ",!u.includes("ResearchInfo")]},Checked:u.includes("ResearchInfo")},{Name:"å¤§å®äº¤æ",Data:{ID:Qn.CMD_CHANGE_KLINE_INFO_ID,Args:["å¤§å®äº¤æ",!u.includes("BlockTrading")]},Checked:u.includes("BlockTrading")},{Name:"é¾èæ¦",Data:{ID:Qn.CMD_CHANGE_KLINE_INFO_ID,Args:["é¾èæ¦",!u.includes("TradeDetail")]},Checked:u.includes("TradeDetail")},{Name:"äºå¨æ",Data:{ID:Qn.CMD_CHANGE_KLINE_INFO_ID,Args:["äºå¨æ",!u.includes("InvestorInfo")]},Checked:u.includes("InvestorInfo")},{Name:on.SEPARATOR_LINE_NAME},{Name:"æ¾ç¤ºä½ç½®",SubMenu:[{Name:"åºé¨",Data:{ID:Qn.CMD_CHANGE_INFO_POSITION_ID,Args:[1]},Checked:1===o},{Name:"Kçº¿ä¸",Data:{ID:Qn.CMD_CHANGE_INFO_POSITION_ID,Args:[0]},Checked:0===o}]}]},{Name:"ç¼ºå£æç¤º",SubMenu:[{Name:"æ¾ç¤º1ä¸ªç¼ºå£",Data:{ID:Qn.CMD_CHANGE_PRICE_GAP_ID,Args:[!0,1]},Checked:1==n.Enable&&1==n.Count},{Name:"æ¾ç¤º2ä¸ªç¼ºå£",Data:{ID:Qn.CMD_CHANGE_PRICE_GAP_ID,Args:[!0,2]},Checked:1==n.Enable&&2==n.Count},{Name:"æ¾ç¤º3ä¸ªç¼ºå£",Data:{ID:Qn.CMD_CHANGE_PRICE_GAP_ID,Args:[!0,3]},Checked:1==n.Enable&&3==n.Count},{Name:"éèç¼ºå£",Data:{ID:Qn.CMD_CHANGE_PRICE_GAP_ID,Args:[!1]},Checked:0==n.Enable}]},{Name:"å å åç§",SubMenu:[{Name:"ä¸è¯ææ°",Data:{ID:Qn.CMD_OVERLAY_SYMBOL_ID,Args:["000001.sh",!f.includes("000001.sh")]},Checked:f.includes("000001.sh")},{Name:"æ·±è¯ææ",Data:{ID:Qn.CMD_OVERLAY_SYMBOL_ID,Args:["399001.sz",!f.includes("399001.sz")]},Checked:f.includes("399001.sz")},{Name:"ä¸­å°æ¿æ",Data:{ID:Qn.CMD_OVERLAY_SYMBOL_ID,Args:["399005.sz",!f.includes("399005.sz")]},Checked:f.includes("399005.sz")},{Name:"åä¸æ¿æ",Data:{ID:Qn.CMD_OVERLAY_SYMBOL_ID,Args:["399006.sz",!f.includes("399006.sz")]},Checked:f.includes("399006.sz")},{Name:"æ²ªæ·±300",Data:{ID:Qn.CMD_OVERLAY_SYMBOL_ID,Args:["000300.sh",!f.includes("000300.sh")]},Checked:f.includes("000300.sh")}]},{Name:"ä¸»å¾çº¿å",SubMenu:[{Name:"Kçº¿(ç©ºå¿é³çº¿)",Data:{ID:Qn.CMD_CHANGE_KLINE_TYPE_ID,Args:[3]},Checked:3==i},{Name:"Kçº¿(å®å¿é³çº¿)",Data:{ID:Qn.CMD_CHANGE_KLINE_TYPE_ID,Args:[0]},Checked:0==i},{Name:"ç¾å½çº¿",Data:{ID:Qn.CMD_CHANGE_KLINE_TYPE_ID,Args:[2,!0,{IsThinAKBar:!1}]},Checked:2==i&&!r},{Name:"ç¾å½çº¿(ç»)",Data:{ID:Qn.CMD_CHANGE_KLINE_TYPE_ID,Args:[2,!0,{IsThinAKBar:!0}]},Checked:2==i&&r},{Name:"æ¶ççº¿",Data:{ID:Qn.CMD_CHANGE_KLINE_TYPE_ID,Args:[1]},Checked:1==i},{Name:"æ¶çé¢ç§¯",Data:{ID:Qn.CMD_CHANGE_KLINE_TYPE_ID,Args:[4]},Checked:4==i},{Name:"Kçº¿(ç©ºå¿é³çº¿é´çº¿)",Data:{ID:Qn.CMD_CHANGE_KLINE_TYPE_ID,Args:[6]},Checked:6==i},{Name:"Heikin Ashi",Data:{ID:Qn.CMD_CHANGE_KLINE_TYPE_ID,Args:[11]},Checked:11==i},{Name:"Line Break",Data:{ID:Qn.CMD_CHANGE_KLINE_TYPE_ID,Args:[12]},Checked:12==i},{Name:"High-low",Data:{ID:Qn.CMD_CHANGE_KLINE_TYPE_ID,Args:[13]},Checked:13==i},{Name:"HLC Area",Data:{ID:Qn.CMD_CHANGE_KLINE_TYPE_ID,Args:[15]},Checked:15==i}]},{Name:"åæ ç±»å",SubMenu:[{Name:"åè½¬åæ ",Data:{ID:Qn.CMD_CHANGE_COORDINATETYPE_ID,Args:[{IsReverse:0==s}]},Checked:1==s},{Name:on.SEPARATOR_LINE_NAME},{Name:"æ®éåæ ",Data:{ID:Qn.CMD_CHANGE_COORDINATETYPE_ID,Args:[{Type:0}]},Checked:0==l},{Name:"ç¾åæ¯åæ ",Data:{ID:Qn.CMD_CHANGE_COORDINATETYPE_ID,Args:[{Type:1}]},Checked:1==l},{Name:"å¯¹æ°åæ ",Data:{ID:Qn.CMD_CHANGE_COORDINATETYPE_ID,Args:[{Type:2}]},Checked:2==l},{Name:"ç­æ¯åæ ",Data:{ID:Qn.CMD_CHANGE_COORDINATETYPE_ID,Args:[{Type:3}]},Checked:3==l},{Name:"ç­ååæ ",Data:{ID:Qn.CMD_CHANGE_COORDINATETYPE_ID,Args:[{Type:4}]},Checked:4==l},{Name:"é»éåå²",Data:{ID:Qn.CMD_CHANGE_COORDINATETYPE_ID,Args:[{Type:5}]},Checked:5==l}]},{Name:"ææ çªå£ä¸ªæ°",SubMenu:[{Name:"1ä¸ªçªå£",Data:{ID:Qn.CMD_CHANGE_WINDOW_COUNT_ID,Args:[2]},Checked:2==e},{Name:"2ä¸ªçªå£",Data:{ID:Qn.CMD_CHANGE_WINDOW_COUNT_ID,Args:[3]},Checked:3==e},{Name:"3ä¸ªçªå£",Data:{ID:Qn.CMD_CHANGE_WINDOW_COUNT_ID,Args:[4]},Checked:4==e},{Name:"4ä¸ªçªå£",Data:{ID:Qn.CMD_CHANGE_WINDOW_COUNT_ID,Args:[5]},Checked:5==e},{Name:"5ä¸ªçªå£",Data:{ID:Qn.CMD_CHANGE_WINDOW_COUNT_ID,Args:[6]},Checked:6==e}]},{Name:"å¶ä»è®¾ç½®",SubMenu:[{Name:"ç¦æ­¢ææ½",Data:{ID:Qn.CMD_CHANGE_DRAG_MODE_ID,Args:[0]},Checked:0==this.DragMode},{Name:"å¯å¨ææ½",Data:{ID:Qn.CMD_CHANGE_DRAG_MODE_ID,Args:[1]},Checked:1==this.DragMode},{Name:"å·¦é®åºé´éæ©",Data:{ID:Qn.CMD_CHANGE_DRAG_MODE_ID,Args:[2]},Checked:2==this.DragMode},{Name:on.SEPARATOR_LINE_NAME},{Name:"èæ¯åå²",Data:{ID:Qn.CMD_CHANGE_BG_SPLIT_ID,Args:[!d]},Checked:d},{Name:"ç»å¾å·¥å·",Data:{ID:Qn.CMD_SHOW_DRAWTOOL_ID,Args:[]},Checked:this.IsShowDrawToolDialog()},{Name:"ç§»å¨ç­¹ç å¾",Data:{ID:D?Qn.CMD_HIDE_STOCKCHIP_ID:Qn.CMD_SHOW_STOCKCHIP_ID,Args:[]},Checked:D},{Name:"åå­åæ çº¿",Data:{ID:Qn.CMD_SHOW_CORSS_LINE_ID,Args:[!m]},Checked:m},{Name:"åå»å¼¹åæ¶å¾",Data:{ID:Qn.CMD_ENABLE_POP_MINUTE_CHART_ID,Args:[!p]},Checked:p},{Name:on.SEPARATOR_LINE_NAME},{Name:"é¼ æ å½¢ç¶",SubMenu:[{Name:"é»è®¤",Data:{ID:Qn.CMD_CHANGE_DEFAULTCURSOR_ID,Args:["default"]},Checked:"default"==this.DefaultCursor},{Name:"åå­çº¿",Data:{ID:Qn.CMD_CHANGE_DEFAULTCURSOR_ID,Args:["crosshair"]},Checked:"crosshair"==this.DefaultCursor}]},{Name:"è¯­è¨è®¾ç½®",SubMenu:[{Name:"ä¸­æ",Data:{ID:Qn.CMD_CHANGE_LANGUAGE_ID,Args:["CN"]},Checked:this.LanguageID==xo.LANGUAGE_CHINESE_ID},{Name:"è±è¯­",Data:{ID:Qn.CMD_CHANGE_LANGUAGE_ID,Args:["EN"]},Checked:this.LanguageID==xo.LANGUAGE_ENGLISH_ID},{Name:"ç¹ä½",Data:{ID:Qn.CMD_CHANGE_LANGUAGE_ID,Args:["TC"]},Checked:this.LanguageID==xo.LANGUAGE_TRADITIONAL_CHINESE_ID}]},{Name:"åºé´éæ©æ ·å¼",SubMenu:[{Name:"æ ·å¼1(é»è®¤)",Data:{ID:Qn.CMD_CHANGE_DRAG_RECT_SHOW_MODE_ID,Args:[0]},Checked:0==this.ChartDragSelectRect.ShowMode},{Name:"æ ·å¼2",Data:{ID:Qn.CMD_CHANGE_DRAG_RECT_SHOW_MODE_ID,Args:[1]},Checked:1==this.ChartDragSelectRect.ShowMode},{Name:"æ ·å¼3",Data:{ID:Qn.CMD_CHANGE_DRAG_RECT_SHOW_MODE_ID,Args:[2]},Checked:2==this.ChartDragSelectRect.ShowMode}]},{Name:"Kçº¿æµ®å¨æ¡",SubMenu:[{Name:"ç¦ç¨",Data:{ID:Qn.CMD_DIALOG_TOOLTIP_ATTRIBUTE,Args:[{Enable:!1}]},Checked:!this.DialogTooltip},{Name:"æ ·å¼1",Data:{ID:Qn.CMD_DIALOG_TOOLTIP_ATTRIBUTE,Args:[{Enable:!0,Style:0}]},Checked:this.DialogTooltip&&0===this.DialogTooltip.Style},{Name:"æ ·å¼2",Data:{ID:Qn.CMD_DIALOG_TOOLTIP_ATTRIBUTE,Args:[{Enable:!0,Style:1}]},Checked:this.DialogTooltip&&1===this.DialogTooltip.Style}]},{Name:"Kçº¿æç¤ºæ¡",SubMenu:[{Name:"å¯ç¨",Data:{ID:Qn.CMD_KLINE_TOOLTIP_ATTRIBUTE,Args:[{Enable:!this.KLineTooltipConfig.Enable}]},Checked:this.KLineTooltipConfig.Enable},{Name:"é®çå·¦å³æ¾ç¤º",Data:{ID:Qn.CMD_KLINE_TOOLTIP_ATTRIBUTE,Args:[{EnableKeyDown:!this.KLineTooltipConfig.EnableKeyDown}]},Checked:this.KLineTooltipConfig.EnableKeyDown}]}]}];if(!wo.IsSHSZIndex(this.Symbol)&&!wo.IsBIT(this.Symbol)){var g={Name:"å¤æå¤ç",SubMenu:[{Name:"ä¸å¤æ",Data:{ID:Qn.CMD_CHANGE_RIGHT_ID,Args:[0]},Checked:0==this.Right},{Name:"åå¤æ",Data:{ID:Qn.CMD_CHANGE_RIGHT_ID,Args:[1]},Checked:1==this.Right},{Name:"åå¤æ",Data:{ID:Qn.CMD_CHANGE_RIGHT_ID,Args:[2]},Checked:2==this.Right}]};v.splice(1,0,g)}for(var C=0;C<v.length;++C){var c=v[C];if("äºå½©Kçº¿"==c.Name)this.ColorIndex&&(c.SubMenu.push({Name:on.SEPARATOR_LINE_NAME}),c.SubMenu.push({Name:"å é¤äºå½©Kçº¿",Data:{ID:Qn.CMD_DELETE_COLOR_INDEX_ID}}));else if("ä¸å®¶ç³»ç»"==c.Name)this.TradeIndex&&(c.SubMenu.push({Name:on.SEPARATOR_LINE_NAME}),c.SubMenu.push({Name:"å é¤ä¸å®¶ç³»ç»",Data:{ID:Qn.CMD_DELETE_TRADE_INDEX_ID}}));else if("å å åç§"==c.Name){for(var T=0;T<c.SubMenu.length;++T)if(c.SubMenu[T].Checked){c.SubMenu.push({Name:on.SEPARATOR_LINE_NAME}),c.SubMenu.push({Name:"åæ¶å å ",Data:{ID:Qn.CMD_DELETE_ALL_OVERLAY_SYMBOL_ID}});break}}else if("ä¿¡æ¯å°é·"==c.Name)for(var T=0;T<c.SubMenu.length;++T)if(c.SubMenu[T].Checked){c.SubMenu.push({Name:on.SEPARATOR_LINE_NAME}),c.SubMenu.push({Name:"å é¤ææ",Data:{ID:Qn.CMD_DELETE_ALL_KLINE_INFO_ID}});break}}return v},this.PopupSelectRectMenuV2=function(t,e){var a=this,i=[{Name:"åºé´ç»è®¡",Data:{ID:Qn.CMD_SELECTED_SUMMARY_ID,Args:[e]}},{Name:"åºé´æ¾å¤§",Data:{ID:Qn.CMD_SELECTED_ZOOM_ID,Args:[t.SelectData]}}],r={Menu:i,Position:on.POSITION_ID.RIGHT_MENU_ID};r.ClickCallback=function(t){a.OnClickRightMenu(t)};var n=t.X,o=t.Y;this.PopupMenuByRClick(r,n,o)},this.ReloadChartDrawPicture=function(){if(this.ChartDrawPicture=[],this.SelectChartDrawPicture&&(this.SelectChartDrawPicture.IsSelected=!1),this.SelectChartDrawPicture=null,this.CurrentChartDrawPicture=null,this.ChartDrawStorage){this.ChartDrawStorageCache=this.ChartDrawStorage.GetDrawData({Symbol:this.Symbol,Period:this.Period});var t=this.GetEventCallback(Kn.ON_LOAD_DRAWPICTURE);if(t&&t.Callback){var e={Symbol:this.Symbol,Period:this.Period,DrawStorage:this.ChartDrawStorage,ChartDrawStorageCache:this.ChartDrawStorageCache};t.Callback(t,e,this)}}},this.CreateChartDrawPictureByStorage=function(){if(we.IsNonEmptyArray(this.ChartDrawStorageCache)){for(var t=0;t<this.ChartDrawStorageCache.length;++t){var e=this.ChartDrawStorageCache[t];if(!(e.FrameID<0||!this.Frame.SubFrame||this.Frame.SubFrame.length<e.FrameID)){var a=aa.CreateChartDrawPicture(e);if(a){a.Canvas=this.Canvas,a.Status=10,a.Frame=this.Frame.SubFrame[e.FrameID].Frame,a.Option=this.ChartDrawOption,a.ImportStorageData&&a.ImportStorageData(e),a.UpdateXValue(),a.ValueToPoint();var i=this;a.GetActiveDrawPicture=function(){return i.GetActiveDrawPicture()},"ChartDrawPictureText"===a.ClassName&&(a.IsInitialized=!0),this.ChartDrawPicture.push(a)}}}this.ChartDrawStorageCache=null}},this.UpdataChartInfo=function(){var t=null;if(0==this.Period){t=new Vn.default;for(var e in this.ChartInfo){var a=this.ChartInfo[e].Data;for(var i in a){var r=a[i];t.has(r.Date.toString())?t.get(r.Date.toString()).Data.push(r):t.set(r.Date.toString(),{Data:new Array(r)})}}}else if(tt.IsDayPeriod(this.Period,!1)){t=new Vn.default;var n=this.ChartPaint[0].Data;if(n&&n.Data&&n.Data.length>0){var o=n.Data[0],s=[];for(var e in this.ChartInfo){var l=this.ChartInfo[e];for(var i in l.Data){var r=l.Data[i];r.Date>=o.Date&&s.push(r)}}s.sort(function(t,e){return t.Date-e.Date});for(var e=0;e<n.Data.length;){var h=n.Data[e];if(s.length<=0)break;var l=s[0];h.Date<l.Date?++e:(t.has(h.Date.toString())?t.get(h.Date.toString()).Data.push(l):t.set(h.Date.toString(),{Data:new Array(l)}),s.shift())}}}else if(tt.IsMinutePeriod(this.Period,!0)){t=new Vn.default;var n=this.ChartPaint[0].Data;if(n&&n.Data&&n.Data.length>0){for(var u=n.Data[0],s=[],e=0,i=0;e<this.ChartInfo.length;++e){var l=this.ChartInfo[e];for(i=0;i<l.Data.length;++i){var r=l.Data[i];(r.Date>=u.Date||r.Date==u.Date&&r.Time>=u.Time)&&s.push(r)}}s.sort(function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date});for(var e=0;e<n.Data.length;){var h=n.Data[e];if(s.length<=0)break;var l=s[0];if(h.Date<l.Date||h.Date==l.Date&&h.Time<l.Time)++e;else{var C=h.Date+"-"+h.Time;t.has(C)?t.get(C).Data.push(l):t.set(C,{Data:new Array(l)}),s.shift()}}}}this.ChartPaint[0].InfoData=t},this.RecvWindowIndex=function(t,e){var a=this.WindowIndex[t];if(a&&"function"==typeof a.RecvSubscribeData){var i=this.ChartPaint[0].Data;a.RecvSubscribeData(e,this,t,i)}},this.UpdateWindowIndex=function(t){var e=new tt;if(e.Data=this.SourceData.Data,e.Period=this.Period,e.Right=this.Right,this.IsApiPeriod);else{if(e.Right>0){var a=e.GetRightData(e.Right,{AlgorithmType:this.RightFormula});e.Data=a}if(tt.IsDayPeriod(e.Period,!1)||tt.IsMinutePeriod(e.Period,!1)){var i=e.GetPeriodData(e.Period);e.Data=i}}if("function"==typeof this.WindowIndex[t].ExecuteScript){var r=this.ChartPaint[0].Data;this.WindowIndex[t].ExecuteScript(this,t,r)}else if("function"==typeof this.WindowIndex[t].RequestData){var r=this.ChartPaint[0].Data;this.WindowIndex[t].RequestData(this,t,r,null)}else this.WindowIndex[t].BindData(this,t,e);this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.GetOverlayIndexByIdentify=function(t){for(var e=0;e<this.Frame.SubFrame.length;++e){var a=this.Frame.SubFrame[e];if(we.IsNonEmptyArray(a.OverlayIndex))for(var i=0;i<a.OverlayIndex.length;++i){var r=a.OverlayIndex[i];if(r.Identify===t)return{OverlayItem:r,WindowIndex:e}}}return null},this.RecvOverlayIndex=function(t,e){var a=this.GetOverlayIndexByIdentify(t);if(null==a)return void console.warn("[KLineChartContainer::RecvOverlayIndex] can't find overlay index. [identify="+t+"]");if(a.Script&&"function"==typeof a.RecvSubscribeData&&this.ChartPaint[0]){var i=this.ChartPaint[0].Data;i&&a.Script.RecvSubscribeData(e,this,a.WindowIndex,i)}},this.UpdateOverlayIndex=function(t){var e=this.GetOverlayIndexByIdentify(t);if(null==e)return void console.warn("[KLineChartContainer::UpdateOverlayIndex] can't find overlay index. [identify="+t+"]");if(this.ChartPaint[0]){var a=this.ChartPaint[0].Data;a&&this.BindOverlayIndexData(e.OverlayItem,e.WindowIndex,a)}},this.ChangeWindowIndexParam=function(t){this.WindowIndex[t].Index[0].Param+=1,this.WindowIndex[t].Index[1].Param+=1,this.UpdateWindowIndex(t)},this.OnDoubleClick=function(t,e,a){if(this.EnableYDrag&&(this.EnableYDrag.Left||this.EnableYDrag.Right)&&this.Frame&&this.Frame.PtInFrameY){var i=C(),t=(a.clientX-this.UIElement.getBoundingClientRect().left)*i,e=(a.clientY-this.UIElement.getBoundingClientRect().top)*i,r=this.Frame.PtInFrameY(t,e);r&&r.Index>=0&&this.CancelZoomUpDownFrameY(r)}var n;this.SelectedChart.EnableSelected&&(n=this.PtInChart(t,e));var o={SelectedChart:n};if(this.DBClickEvent(o,a),!n&&this.EnableZoomIndexWindow){var s=this.Frame.PtInFrame(t,e);if(Xn.Chart.Log("[KLineChartContainer::OnDoubleClick] frameId",s),s>=this.Frame.ZoomStartWindowIndex&&this.ZoomIndexWindow(s,{X:t,Y:e}))return this.Frame.SetSizeChage(!0),this.Draw(),!0}var l=new et;if((this.PtInChartPaintTooltip(t,e,l)||this.PtInOverlayIndexTooltip(t,e,l))&&l.Data){var h=null;if(this.mapEvent.has(Kn.DBCLICK_KLINE)&&(h=this.mapEvent.get(Kn.DBCLICK_KLINE)),h){null!=this.ClickChartTimer&&(clearTimeout(this.ClickChartTimer),this.ClickChartTimer=null);var u={Tooltip:l,Stock:{Symbol:this.Symbol,Name:this.Name},X:a.clientX,Y:a.clientY,PreventDefault:!1};if(h.Callback(h,u,this),u.PreventDefault)return}this.PopMinuteChart&&0===l.Type&&this.ShowMinuteChartDialog({Chart:this,Tooltip:l,e:a},t,e)}},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=void 0)},this.AutoUpdate=function(t){if(this.CancelAutoUpdate(),this.IsAutoUpdate&&this.Symbol){var e=this,a=wo.GetMarketStatus(this.Symbol);if(0==a||3==a)return void(this.AutoUpdateTimer=setTimeout(function(){e.AutoUpdate()},2e4));var i=this.AutoUpdateFrequency;1==a?this.AutoUpdateTimer=setTimeout(function(){e.AutoUpdate()},i):2==a&&(this.AutoUpdateTimer=setTimeout(function(){tt.IsDayPeriod(e.Period,!0)?e.RequestRealtimeData():tt.IsMinutePeriod(e.Period,!0)||tt.IsSecondPeriod(e.Period)||tt.IsMilliSecondPeriod(e.Period)?e.RequestMinuteRealtimeData():tt.IsTickPeriod(e.Period)&&e.RequestTickRealtimeData()},i))}},this.GetMaxMinPageSize=function(){var t={},e=this.Frame.ChartBorder.GetWidth(),a=Co[Co.length-1][0]+Co[Co.length-1][1];return t.Max=parseInt(e/a)-2,a=Co[0][0]+Co[0][1],t.Min=parseInt(e/a)-2,Xn.Chart.Log("[KLineChartContainer::GetMaxMinPageSize] Max="+t.Max+" Min="+t.Min),t},this.GetChartStatus=function(){var t=this.Frame.SubFrame[0].Frame;if(!t)return null;var e=t.Data;if(!e)return null;var a={KLine:{},Zoom:{}};return a.KLine.Count=e.Data.length,a.KLine.Offset=e.DataOffset,a.KLine.PageSize=t.XPointCount,a.Zoom.Index=t.ZoomIndex,a.Zoom.Max=Co.length,a};this.DragDownloadData=function(){var t=null;if(!(t=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data))return!1;if(!(t.DataOffset>0))if(tt.IsMinutePeriod(this.Period,!0)||tt.IsSecondPeriod(this.Period)){if(Xn.Chart.Log("[KLineChartContainer.DragDownloadData] Minute:[Enable="+this.DragDownload.Minute.Enable+", IsEnd="+this.DragDownload.Minute.IsEnd+", Status="+this.DragDownload.Minute.Status+", Period="+this.Period+"]"),!this.DragDownload.Minute.Enable)return;if(this.DragDownload.Minute.IsEnd)return;if(0!=this.DragDownload.Minute.Status)return;this.RequestDragMinuteData()}else if(tt.IsDayPeriod(this.Period,!0)){if(Xn.Chart.Log("[KLineChartContainer.DragDownloadData] Day:[Enable="+this.DragDownload.Minute.Enable+", IsEnd="+this.DragDownload.Minute.IsEnd+", Status="+this.DragDownload.Minute.Status+"]"),!this.DragDownload.Day.Enable)return;if(this.DragDownload.Day.IsEnd)return;if(0!=this.DragDownload.Day.Status)return;this.RequestDragDayData()}else if(tt.IsTickPeriod(this.Period)){if(Xn.Chart.Log("[KLineChartContainer.DragDownloadData] Tick:[Enable="+this.DragDownload.Tick.Enable+", IsEnd="+this.DragDownload.Tick.IsEnd+", Status="+this.DragDownload.Tick.Status+"]"),!this.DragDownload.Tick.Enable)return;if(this.DragDownload.Tick.IsEnd)return;if(0!=this.DragDownload.Tick.Status)return;this.RequestDragTickData()}},this.ZoomDownloadData=function(t){var e=null;if(!(e=this.Frame.Data?this.Frame.SubFrame[0].Frame.Data:this.Frame.Data))return!1;if(!(e.DataOffset>0))if(tt.IsMinutePeriod(this.Period,!0)||tt.IsSecondPeriod(this.Period)){if(Xn.Chart.Log("[KLineChartContainer.ZoomDownloadData] Minute:[Enable="+this.ZoomDownload.Minute.Enable+", IsEnd="+this.ZoomDownload.Minute.IsEnd+", Status="+this.DragDownload.Minute.Status+", Period="+this.Period+"]"),!this.ZoomDownload.Minute.Enable)return;if(this.ZoomDownload.Minute.IsEnd)return;if(0!=this.ZoomDownload.Minute.Status)return;this.RequestZoomMinuteData(t)}else if(tt.IsDayPeriod(this.Period,!0)){if(Xn.Chart.Log("[KLineChartContainer.ZoomDownloadData] Day:[Enable="+this.ZoomDownload.Minute.Enable+", IsEnd="+this.ZoomDownload.Minute.IsEnd+", Status="+this.DragDownload.Minute.Status+"]"),!this.ZoomDownload.Day.Enable)return;if(this.ZoomDownload.Day.IsEnd)return;if(0!=this.ZoomDownload.Day.Status)return;this.RequestZoomDayData(t)}else if(tt.IsTickPeriod(this.Period)){if(Xn.Chart.Log("[KLineChartContainer.ZoomDownloadData] Tick:[Enable="+this.ZoomDownload.Tick.Enable+", IsEnd="+this.ZoomDownload.Tick.IsEnd+", Status="+this.DragDownload.Tick.Status+"]"),!this.ZoomDownload.Tick.Enable)return;if(this.ZoomDownload.Tick.IsEnd)return;if(0!=this.ZoomDownload.Tick.Status)return;this.RequestZoomTickData(t)}},this.RequestDragTickData=function(){Xn.Chart.Log("[KLineChartContainer.RequestDragTickData] not finished.")},this.RequestPreviousMinuteData=function(t){var e=t.FuncName,a=t.FuncExplain,i=t.Download,r=t.Url,o=t.Count,s=this;this.AutoUpdateEvent(!1,e),this.CancelAutoUpdate(),i.Status=1;var l=null;l=we.IsNonEmptyArray(this.SourceData.Data)?this.SourceData.Data[0]:{Date:null,Time:null};var h={field:["name","symbol","yclose","open","price","high","low","vol"],symbol:s.Symbol,enddate:l.Date,endtime:l.Time,count:o,first:{date:l.Date,time:l.Time}};if(we.IsNonEmptyArray(this.OverlayChartPaint)){h.overlay=[];for(var u=0;u<this.OverlayChartPaint.length;++u){var C=this.OverlayChartPaint[u];h.overlay.push({symbol:C.Symbol})}}if(this.NetworkFilter){var c={Name:e,Explain:a,Request:{Url:r,Type:"POST",Data:h,Period:this.Period,Right:this.Right},DragDownload:i,Option:t,Self:this,PreventDefault:!1,ZoomData:t.ZoomData};if(this.NetworkFilter(c,function(a){s.RecvPreviousMinuteData(a,t),i.Status=0,s.AutoUpdateEvent(!0,e),s.AutoUpdate()}),1==c.PreventDefault)return}n.HttpRequest({url:r,data:h,type:"post",dataType:"json",async:!0,success:function(a){s.RecvPreviousMinuteData(a,t),i.Status=0,s.AutoUpdateEvent(!0,e),s.AutoUpdate()}})},this.RecvPreviousMinuteData=function(t,e){var a=e.Download,i=Ti.JsonDataToMinuteHistoryData(t);if(!i||i.length<=0)return a.IsEnd=!0,Xn.Chart.Log("[KLineChartContainer.RecvPreviousMinuteData] "+this.Symbol+" data end. FuncName="+e.FuncName),void this.Draw();var r=this.GetHistoryDataCount(),n=null;if(we.IsNonEmptyArray(this.SourceData.Data))for(var o=this.SourceData.Data[0],s=i.length-1;s>=0;--s){var l=i[s];if(o.Date>l.Date||o.Date==l.Date&&o.Time>l.Time){n=s;break}if(o.Date==l.Date&&o.Time==l.Time){o.YClose=l.YClose,n=s-1;break}}else n=i.length-1;if(!(null==n&&n<0)){for(var s=0;s<i.length&&s<=n;++s){var l=i[s];this.SourceData.Data.splice(s,0,l)}var h=new tt;if(h.Data=this.SourceData.Data,h.Period=this.Period,h.Right=this.Right,h.DataType=this.SourceData.DataType,h.Symbol=this.Symbol,!this.IsApiPeriod){if(h.Right>0&&this.RightFormula>=1){var u=h.GetRightData(h.Right,{AlgorithmType:this.RightFormula});h.Data=u}if(tt.IsDayPeriod(h.Period,!1)||tt.IsMinutePeriod(h.Period,!1)){var C=h.GetPeriodData(h.Period);h.Data=C}}var c=this.GetKLineCalulate();if(c){h=c.RecvHistoryData(h,{Symbol:this.Symbol,Function:e.RecvFuncName}),this.FlowCapitalReady=!0}if(this.UpdateMainData(h,r),e)if(e.ZoomData){var f=e.ZoomData,d=f.PageSize-f.RightSpaceCount;h.DataOffset=h.Data.length-d,h.DataOffset<0&&(h.DataOffset=0)}else we.IsNumber(e.DataOffset)&&(h.DataOffset+=e.DataOffset,h.DataOffset<0&&(h.DataOffset=0));this.UpdateOverlayDragMinuteData(t),this.BindInstructionIndexData(h);for(var s=0;s<this.Frame.SubFrame.length;++s)this.BindIndexData(s,h);this.BindAllOverlayIndexData(h,{SyncExecute:!0}),this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.UpdateChartDrawXValue(),this.Draw(),this.BindAllOverlayIndexData(h,{SyncExecute:!1})}},this.RequestZoomMinuteData=function(t){var e={PageSize:t.PageSize,DataCount:t.DataCount,RightSpaceCount:t.RightSpaceCount},a={FuncName:"KLineChartContainer::RequestZoomMinuteData",FuncExplain:"ç¼©æ¾åé|ç§Kçº¿æ°æ®ä¸è½½",RecvFuncName:"RecvZoomMinuteData",Download:this.ZoomDownload.Minute,Url:this.ZoomMinuteKLineApiUrl,Count:this.MaxRequestMinuteDayCount,XShowCount:this.Frame.GetXShowCount(),ZoomData:e};this.RequestPreviousMinuteData(a)},this.RequestDragMinuteData=function(){var t={FuncName:"KLineChartContainer::RequestDragMinuteData",FuncExplain:"ææ½åé|ç§Kçº¿æ°æ®ä¸è½½",RecvFuncName:"RecvDragMinuteData",Download:this.DragDownload.Minute,Url:this.DragMinuteKLineApiUrl,Count:this.MaxRequestMinuteDayCount,XShowCount:this.Frame.GetXShowCount()};this.RequestPreviousMinuteData(t)},this.MergeOverlaySymbolMinuteData=function(t,e){if(t.Symbol,!we.IsNonEmptyArray(e))return!1;for(var a=null,i=0;i<e.length;++i){var r=e[i];if(r.symbol==t.Symbol){a=r;break}}if(!a)return!1;for(var n=Ti.JsonDataToMinuteHistoryData(a),o=t.SourceData,s=o.Data[0],l=null,i=n.length-1;i>=0;--i){var h=n[i];if(s.Date>h.Date){l=i;break}if(s.Date==h.Date&&s.Time>h.Time){l=i;break}if(s.Date==h.Date&&s.Time==h.Time){s.YClose=h.YClose,l=i-1;break}}if(null==l&&l<0)return!1;for(var i=0;i<n.length&&i<=l;++i){var h=n[i];o.Data.splice(i,0,h)}var u=new tt;u.Data=o.Data,u.Period=this.Period,u.Right=this.Right,u.DataType=0;var e=this.SourceData.GetOverlayMinuteData(u.Data,this.IsApiPeriod);if(u.Data=e,tt.IsMinutePeriod(u.Period,!1)&&!this.IsApiPeriod){var C=u.GetPeriodData(u.Period);u.Data=C}return t.Data=u,!0},this.UpdateOverlayDragMinuteData=function(t){if(we.IsNonEmptyArray(this.OverlayChartPaint))for(var e=t.overlay,a=0;a<this.OverlayChartPaint.length;++a){var i=this.OverlayChartPaint[a];if(i.Symbol){var r=!1;if(i.MainData&&i.Status==co.STATUS_FINISHED_ID&&(r=this.MergeOverlaySymbolMinuteData(i,e)),!r&&i.Data&&we.IsNonEmptyArray(i.Data.Data)){var n=i.Data,o=this.SourceData.GetOverlayMinuteData(n.Data,this.IsApiPeriod);n.Data=o}}}},this.RequestPreviousDayData=function(t){var e=t.FuncName,a=t.FuncExplain,i=t.Download,r=t.Url,o=t.Count,s=this;this.AutoUpdateEvent(!1,e),this.CancelAutoUpdate(),i.Status=1;var l=null;l=we.IsNonEmptyArray(this.SourceData.Data)?this.SourceData.Data[0]:{Date:null};var h={field:["name","symbol","yclose","open","price","high","low","vol"],symbol:s.Symbol,enddate:l.Date,count:o,first:{date:l.Date}};if(we.IsNonEmptyArray(this.OverlayChartPaint)){h.overlay=[];for(var u=0;u<this.OverlayChartPaint.length;++u){var C=this.OverlayChartPaint[u];h.overlay.push({symbol:C.Symbol})}}if(this.NetworkFilter){var c={Name:e,Explain:a,Request:{Url:r,Type:"POST",Data:h,Period:this.Period,Right:this.Right},DragDownload:i,Option:t,Self:this,PreventDefault:!1,ZoomData:t.ZoomData};if(this.NetworkFilter(c,function(a){s.RecvPreviousDayData(a,t),i.Status=0,s.AutoUpdateEvent(!0,e),s.AutoUpdate()}),1==c.PreventDefault)return}n.HttpRequest({url:r,data:h,type:"post",dataType:"json",async:!0,success:function(a){s.RecvPreviousDayData(a,t),i.Status=0,s.AutoUpdateEvent(!0,e),s.AutoUpdate()}})},this.RecvPreviousDayData=function(t,e){var a=e.Download,i=Ti.JsonDataToHistoryData(t);if(!i||i.length<=0)return a.IsEnd=!0,void Xn.Chart.Log("[KLineChartContainer.RecvPreviousDayData] "+this.Symbol+" data end. FuncName="+e.FuncName);var r=this.GetHistoryDataCount(),n=null;if(we.IsNonEmptyArray(this.SourceData.Data))for(var o=this.SourceData.Data[0],s=i.length-1;s>=0;--s){var l=i[s];if(o.Date>l.Date){n=s;break}if(o.Date==l.Date){o.YClose=l.YClose,n=s-1;break}}else{var o={Date:null};n=i.length-1}if(!(null==n&&n<0)){for(var s=0;s<i.length&&s<=n;++s){var l=i[s];this.SourceData.Data.splice(s,0,l)}var h=new tt;if(h.Data=this.SourceData.Data,h.Period=this.Period,h.Right=this.Right,h.DataType=this.SourceData.DataType,h.Symbol=this.Symbol,!this.IsApiPeriod){if(h.Right>0){var u=h.GetRightData(h.Right,{AlgorithmType:this.RightFormula});h.Data=u}if(tt.IsDayPeriod(h.Period,!1)||tt.IsMinutePeriod(h.Period,!1)){var C=h.GetPeriodData(h.Period);h.Data=C}}var c=this.GetKLineCalulate();if(c){h=c.RecvHistoryData(h,{Symbol:this.Symbol,Function:e.RecvFuncName}),this.FlowCapitalReady=!0}if(this.UpdateMainData(h,r),e)if(e.ZoomData){var f=e.ZoomData,d=f.PageSize-f.RightSpaceCount;h.DataOffset=h.Data.length-d,h.DataOffset<0&&(h.DataOffset=0)}else we.IsNumber(e.DataOffset)&&(h.DataOffset+=e.DataOffset,h.DataOffset<0&&(h.DataOffset=0));this.UpdateOverlayDragDayData(t),this.BindInstructionIndexData(h);for(var s=0;s<this.Frame.SubFrame.length;++s)this.BindIndexData(s,h);this.BindAllOverlayIndexData(h,{SyncExecute:!0}),this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.UpdateChartDrawXValue(),this.Draw(),this.ReqeustKLineInfoData({FunctionName:e.RecvFuncName,StartDate:o.Date}),this.BindAllOverlayIndexData(h,{SyncExecute:!1})}},this.RequestZoomDayData=function(t){var e=this.MaxRequestDataCount;t.Count>e&&(e=t.Count);var a={PageSize:t.PageSize,DataCount:t.DataCount,RightSpaceCount:t.RightSpaceCount},i={FuncName:"KLineChartContainer::RequestZoomDayData",FuncExplain:"ç¼©æ¾æ¥Kæ°æ®ä¸è½½",RecvFuncName:"RecvZoomDayData",Download:this.ZoomDownload.Day,Url:this.ZoomKLineApiUrl,XShowCount:this.Frame.GetXShowCount(),Count:e,ZoomData:a};this.RequestPreviousDayData(i)},this.RequestDragDayData=function(){var t={FuncName:"KLineChartContainer::RequestDragDayData",FuncExplain:"ææ½æ¥Kæ°æ®ä¸è½½",RecvFuncName:"RecvDragDayData",Download:this.DragDownload.Day,Url:this.DragKLineApiUrl,Count:this.MaxRequestDataCount,XShowCount:this.Frame.GetXShowCount()};this.RequestPreviousDayData(t)},this.MergeOverlaySymbolDayData=function(t,e){if(!t.Symbol)return!1;if(!we.IsNonEmptyArray(e))return!1;for(var a=null,i=0;i<e.length;++i){var r=e[i];if(r.symbol==t.Symbol){a=r;break}}if(!a)return!1;for(var n=Ti.JsonDataToHistoryData(a),o=t.SourceData,s=o.Data[0],l=null,i=n.length-1;i>=0;--i){var h=n[i];if(s.Date>h.Date){l=i;break}if(s.Date==h.Date){s.YClose=h.YClose,l=i-1;break}}if(null==l&&l<0)return!1;for(var i=0;i<n.length&&i<=l;++i){var h=n[i];o.Data.splice(i,0,h)}var u=new tt;if(u.Data=o.Data,u.Period=this.Period,u.Right=this.Right,u.DataType=0,u.Right>0&&wo.IsSHSZStockA(a.symbol)&&!this.IsApiPeriod){var C=u.GetRightData(u.Right,{AlgorithmType:this.RightFormula});u.Data=C}var e=this.SourceData.GetOverlayData(u.Data,this.IsApiPeriod);if(u.Data=e,tt.IsDayPeriod(u.Period,!1)&&!this.IsApiPeriod){var c=u.GetPeriodData(u.Period);u.Data=c}return t.Data=u,!0},this.UpdateOverlayDragDayData=function(t){if(we.IsNonEmptyArray(this.OverlayChartPaint))for(var e=t.overlay,a=0;a<this.OverlayChartPaint.length;++a){var i=this.OverlayChartPaint[a];if(i.Symbol){var r=!1;if(i.MainData&&i.Status==co.STATUS_FINISHED_ID&&(r=this.MergeOverlaySymbolDayData(i,e)),!r&&i.Data&&we.IsNonEmptyArray(i.Data.Data)){var n=i.Data,o=this.SourceData.GetOverlayData(n.Data,this.IsApiPeriod);n.Data=o}}}},this.SetCustomVerical=function(t,e){if(this.Frame&&!(t>=this.Frame.SubFrame.length)){var a=this.Frame.SubFrame[t];a.Frame&&(a.Frame.CustomVerticalInfo=e)}},this.OnSize=function(){if(this.Frame&&this.Frame.OnSize){var t=this.Frame.OnSize();this.Frame.SetSizeChage(!0),t.Changed&&(this.UpdataDataoffset(),this.UpdatePointByCursorIndex(2),this.UpdateFrameMaxMin()),this.Draw()}},this.ClickFrameButton=function(t,e){var a=this.GetEventCallback(Kn.ON_CLICK_FRAME_TOOLBAR);if(a&&a.Callback){var i={Info:t,PreventDefault:!1};if(a.Callback(a,i,this),i.PreventDefault)return}if(t.ID==qn.CLOSE_OVERLAY_INDEX){var r=t.IndexID;r&&this.DeleteOverlayWindowsIndex(r)}else if(t.ID==qn.MODIFY_OVERLAY_INDEX_PARAM){var r=t.IndexID,n=t.Frame,o={e:e,WindowIndex:n.Identify,Type:2,Identify:r};this.ShowModifyIndexParamDialog(o)}else if(t.ID==qn.CLOSE_INDEX_WINDOW){var n=t.Frame;this.RemoveIndexWindow(n.Identify)}else if(t.ID==qn.CHANGE_INDEX){var n=t.Frame,o={e:e,WindowIndex:n.Identify,OpType:1};this.ShowChangeIndexDialog(o)}else if(t.ID==qn.MODIFY_INDEX_PARAM){var n=t.Frame,o={e:e,WindowIndex:n.Identify,Type:1};this.ShowModifyIndexParamDialog(o)}else if(t.ID==qn.OVERLAY_INDEX){var n=t.Frame,o={e:e,WindowIndex:n.Identify,OpType:2};this.ShowAddOverlayIndexDialog(o)}else if(t.ID==qn.MAX_MIN_WINDOW){var r=t.IndexID,n=t.Frame,s=t.FrameID;s>=this.Frame.ZoomStartWindowIndex&&this.ZoomIndexWindow(s,null)&&(this.Frame.SetSizeChage(!0),this.Draw())}else if(t.ID==qn.TITLE_WINDOW){var r=t.IndexID,n=t.Frame,s=t.FrameID;this.ShowIndexTitleOnly(s)&&(this.Frame.SetSizeChage(!0),this.Draw())}else if(t.ID==qn.EXPORT_DATA){var i=this.ExportData({Type:"CSV"});if(!i)return;var l=Date.now(),h="hqchart_"+this.Symbol+"_"+l+".csv",u=document.createElement("a"),C=new Blob([i],{type:"text/csv"});u.href=URL.createObjectURL(C),document.body.appendChild(u),u.setAttribute("download",h),u.click(),document.body.removeChild(u)}},this.ClickTitleButton=function(t,e){var a=this.GetEventCallback(Kn.ON_CLICK_TITLE_BUTTON);if(a&&a.Callback){var i={Info:t,PreventDefault:!1,e:e};if(a.Callback(a,i,this),i.PreventDefault)return}},this.ClickExtendChartButton=function(t,e){var a=this.GetEventCallback(Kn.ON_CLICK_EXTENDCHART_BUTTON);if(a&&a.Callback){var i={Info:t,PreventDefault:!1,e:e};if(a.Callback(a,i,this),i.PreventDefault)return}t.ID==qn.CHIP_DEFULT?(t.Chart.ShowType=0,this.Draw()):t.ID==qn.CHIP_LONG?(t.Chart.ShowType=1,this.Draw()):t.ID==qn.CHIP_RECENT&&(t.Chart.ShowType=2,this.Draw())},this.RequestVolumeProfileData=function(t){var e=this,a=t.Chart;if(this.NetworkFilter){var i={Name:"KLineChartContainer::RequestVolumeProfileData",Explain:"æäº¤éåå¸å¾ä¸è½½",Request:{Period:this.Period,Right:this.Right,Start:t.Start,End:t.End,Symbol:this.Symbol,ValueAreaVol:t.ValueAreaVol},Self:this,VolProfile:a,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvVolumeProfileData(t,a)}),1==i.PreventDefault)return}},this.RecvVolumeProfileData=function(t,e){e.OnRecvVolumeProfileData(t),this.Draw()},this.ExportMainData=function(t,e){return t.ExportKLineData(e)},this.UpdateScrollBar=function(){if(this.ScrollBar){var t=this.GetChartStatus();if(t){var e=this.ChartPaint[0].Data,a=t.KLine.Offset,i=a+t.KLine.PageSize-1,r={Start:a,End:i,Data:e,Draw:!0,RightSpaceCount:this.RightSpaceCount};if(this.Frame&&this.Frame.ChartBorder){var n=this.Frame.ChartBorder;r.Border={Left:n.Left,Right:n.Right}}this.ScrollBar.UpdateSlider(r)}}},this.ResetScrollBar=function(){this.ScrollBar&&this.ScrollBar.Reset({Draw:!0})},this.ChangePriceGap=function(t){if(t){var e=this.ChartPaint[0];e&&(we.IsNumber(t.Count)&&(e.PriceGap.Count=t.Count),we.IsBool(t.Enable)&&(e.PriceGap.Enable=t.Enable),this.Draw())}},this.DrawTooltipDialog=function(){this.DialogTooltip&&this.UpdateTooltipDialog()},this.UpdateTooltipDialog=function(){if(!this.DialogTooltip)return!1;if(!this.ChartCorssCursor)return!1;var t=0,e=null;if(this.ChartCorssCursor.ClientPos>=0){var a=this.ChartOperator_Temp_GetHistroyData();if(!a)return!1;if(!we.IsNonEmptyArray(a.Data))return!1;var i=a.DataOffset+this.ChartCorssCursor.CursorIndex;i>=a.Data.length&&(i=a.Data.length-1);var e=a.Data[i]}else{var a=this.ChartOperator_Temp_GetHistroyData();if(!a)return!1;if(!we.IsNonEmptyArray(a.Data))return!1;var e=a.Data[a.Data.length-1],r={Symbol:this.Symbol,Date:e.Date};if(we.IsNumber(e.Time)&&(r.Time=e.Time),!this.DialogTooltip.IsEqualDataID(r))return!1;t=1}var n={DataType:t,ClientPos:this.ChartCorssCursor.ClientPos,IsShowCorss:this.ChartCorssCursor.IsShowCorss,KItem:e,Symbol:this.Symbol,Name:this.Name,LastValue:this.ChartCorssCursor.LastValue};return this.DialogTooltip.Update(n),!0},this.DrawSelectRectDialog=function(t){this.DialogSelectRect&&this.UpdateSelectRectDialog(t)},this.UpdateSelectRectDialog=function(t){if(!this.DialogSelectRect)return!1;var e,a,i=t.data;if(i&&we.IsNumber(i.X)&&we.IsNumber(i.Y)){var r=(C(),this.UIElement.getBoundingClientRect()),n=m();e=i.X,a=i.Y,e+=r.left+n.Left,a+=r.top+n.Top}var o={Symbol:this.Symbol,Name:this.Name,SelectData:i.SelectData,X:e,Y:a,e:t};this.DialogSelectRect.Update(o)},this.UpdateHQFloatTooltip=function(t){if(this.FloatTooltip&&this.FloatTooltip.IsShow()&&t&&we.IsNonEmptyArray(t.Data)){var e=t.Data[t.Data.length-1];if(e){var a={Symbol:t.Symbol,Date:e.Date,Time:e.Time};if(this.FloatTooltip.IsEqualHQID(a)){var i={Data:e,Symbol:this.Symbol,Name:this.Name,DataType:2};this.FloatTooltip.Update(i)}}}}}function Ii(t,e,a){this.newMethod=u,this.newMethod(t,e,a),delete this.newMethod,this.ClassName="MinuteChartContainer",this.WindowIndex=new Array,this.Symbol,this.Name,this.SourceData,this.IndexBindData,this.IsAutoUpdate=!0,this.AutoUpdateFrequency=3e4,this.AutoUpdateTimer,this.TradeDate=0,this.DayCount=1,this.DayData,this.LimitPrice,this.IsShowBeforeData=!1,this.BeforeOpenData=null,this.IsBeforeData=!1,this.IsShowAfterData=!1,this.AfterCloseData=null,this.IsAfterData=!1,this.ShareAfterVol=0,this.ExtendWidth={Left:120,Right:120},this.IsShowLead=!0,this.IsShowMultiDayBeforeData=!1,this.MultiDayBeforeOpenData=null,this.IsShowMultiDayAfterData=!1,this.MultiDayAfterCloseData=null,this.MultiDayExtendWidth={Left:40,Right:20},this.ChartDrawStorage=new hi,this.ChartDrawStorageCache=null,this.MinuteApiUrl=So.Domain+"/API/Stock",this.HistoryMinuteApiUrl=So.Domain+"/API/StockMinuteData",this.ColorLineData,this.EnableSelectRect=!1,this.CorssCursorIndex={DayIndex:-1,DataIndex:-1,Point:{X:-1,Y:-1},Type:-1},this.EnableNewIndex=!1,this.DayOffset={Offset:0,ShowDayCount:-1,DataOffset:0,DayCount:1},this.PageInfo={Enable:!1,Offset:-8888,ShowDayCount:4},this.DataStatus={MultiDay:!1,LatestDay:!1,LatestDate:null},this.ZoomStepPixel=50,this.BaselineType=0,this.EnableNightDayBG=!1,this.SetCallCationDataBorder=function(t){if(t){var e={Left:t.Left?this.ExtendWidth.Left:0,Right:t.Right?this.ExtendWidth.Right:0};if(this.Frame.SetExtendWidth(e),t.MultiDay){var a=t.MultiDay,i={Left:a.Left?this.MultiDayExtendWidth.Left:0,Right:a.Right?this.MultiDayExtendWidth.Right:0};this.Frame.SetMultiDayMinuteWidth(i)}}},this.ReloadChartPaint=function(t){for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a&&(a.ReloadResource&&a.ReloadResource(t),0==e?"Minute-Line"==a.Name&&(a.Color=So.Minute.PriceColor,a.AreaColor=So.Minute.AreaPriceColor):1==e?"Minute-Average-Line"==a.Name&&(a.Color=So.Minute.AvPriceColor):2==e&&"Minute-Vol-Bar"==a.Name&&(a.Color=So.Minute.VolBarColor))}},this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},this.ClickFrameButton=function(t,e){var a=this.GetEventCallback(Kn.ON_CLICK_FRAME_TOOLBAR);if(a&&a.Callback){var i={Info:t,PreventDefault:!1};if(a.Callback(a,i,this),i.PreventDefault)return}if(t.ID==qn.CLOSE_BEFOREOPEN_ID)this.ShowCallAuctionData({Left:!1,Right:!1,MultiDay:{Left:!1,Right:!1}});else if(t.ID==qn.CLOSE_OVERLAY_INDEX){var r=t.IndexID;r&&this.DeleteOverlayWindowsIndex(r)}else if(t.ID==qn.MODIFY_OVERLAY_INDEX_PARAM){var r=t.IndexID,n=t.Frame,o={e:e,WindowIndex:n.Identify,Type:2,Identify:r};this.ShowModifyIndexParamDialog(o)}else if(t.ID==qn.CLOSE_INDEX_WINDOW){var n=t.Frame;this.RemoveIndexWindow(n.Identify)}else if(t.ID==qn.CHANGE_INDEX){var n=t.Frame,o={e:e,WindowIndex:n.Identify,OpType:1};this.ShowChangeIndexDialog(o)}else if(t.ID==qn.MODIFY_INDEX_PARAM){var n=t.Frame,o={e:e,WindowIndex:n.Identify,Type:1};this.ShowModifyIndexParamDialog(o)}else if(t.ID==qn.OVERLAY_INDEX){var n=t.Frame,o={e:e,WindowIndex:n.Identify,OpType:2};this.ShowAddOverlayIndexDialog(o)}else if(t.ID==qn.MAX_MIN_WINDOW){var r=t.IndexID,n=t.Frame,s=t.FrameID;s>=this.Frame.ZoomStartWindowIndex&&this.ZoomIndexWindow(s,null)&&(this.Frame.SetSizeChage(!0),this.Draw())}else if(t.ID==qn.TITLE_WINDOW){var r=t.IndexID,n=t.Frame,s=t.FrameID;this.ShowIndexTitleOnly(s)&&(this.Frame.SetSizeChage(!0),this.Draw())}else if(t.ID==qn.EXPORT_DATA){var i=this.ExportData({Type:"CSV"});if(!i)return;var l=Date.now(),h="hqchart_"+this.Symbol+"_"+l+".csv",u=document.createElement("a"),C=new Blob([i],{type:"text/csv"});u.href=URL.createObjectURL(C),document.body.appendChild(u),u.setAttribute("download",h),u.click(),document.body.removeChild(u)}},this.ChartOperator=function(t){var e=t.ID;if(e===zn.OP_SCROLL_LEFT||e===zn.OP_SCROLL_RIGHT){if(1==this.DayCount)return!1;if(!this.PageInfo.Enable)return!1;if(!this.DayData)return!1;var a=e===zn.OP_SCROLL_LEFT,i=1;if(t.Step>0&&(i=t.Step),!this.DayOffset)return!1;if(a){var r=this.DayOffset.Offset;if(r+=i,r+this.DayOffset.ShowDayCount>this.DayOffset.DayCount&&(r=this.DayOffset.DayCount-this.DayOffset.ShowDayCount),r==this.DayOffset.Offset)return!1;this.DayOffset.Offset=r}else{var r=this.DayOffset.Offset;if(r-=i,r<0&&(r=0),r==this.DayOffset.Offset)return!1;this.DayOffset.Offset=r}return this.UpdateHistoryMinuteUI(null),this.SendPageChangedEvent(),!0}if(e==zn.OP_SCROLL_GOTO){if(1==this.DayCount)return!1;if(!this.PageInfo.Enable)return!1;if(!this.DayData)return!1;if(we.IsNumber(t.ShowDayCount)&&(this.PageInfo.ShowDayCount=t.ShowDayCount,this.DayOffset.ShowDayCount=t.ShowDayCount),we.IsNumber(t.Offset)){var r=t.Offset;if(this.DayOffset.ShowDayCount>0&&r+this.DayOffset.ShowDayCount>=this.DayOffset.DayCount&&(r=this.DayOffset.DayCount-this.DayOffset.ShowDayCount),r==this.DayOffset.Offset)return!1;this.DayOffset.Offset=r}return this.UpdateHistoryMinuteUI(null),this.SendPageChangedEvent(),!0}if(e==zn.OP_CORSSCURSOR_GOTO){if(!this.SourceData)return!1;if(!this.Frame||!this.Frame.SubFrame[0]||!this.Frame.SubFrame[0].Frame)return!1;var n=this.Frame.SubFrame[0].Frame;if(!we.IsNonEmptyArray(this.SourceData.Data))return!1;if(we.IsNumber(t.Time)&&we.IsNumber(t.Date)){for(var o=-1,s=null,l=null,h=0;h<this.SourceData.Data.length;++h){var u=this.SourceData.Data[h];if(we.IsNumber(u.Close)&&(l=u.Close),u.Time==t.Time&&u.Date==t.Date){o=h,s=u.Close;break}}if(o<0&&1==this.DayCount&&!(we.IsNumber(t.Type)&&t.Type>0))for(var C=Fo.GetTimeData(this.Symbol),h=0;h<C.length;++h)if(C[h]==t.Time){o=h,s=l;break}if(o<0){if(1==t.Type){var c=-1,f=-1,d={X:c,Y:f,IsInClient:this.IsMouseOnClient(c,f)};this.LastMouseStatus.OnMouseMove=d,this.LastMouseStatus.MoveOnPoint={X:c,Y:f};var D=this.GetEventCallback(Kn.ON_MOUSE_MOVE),m=this.TitlePaint[0];D&&m&&(m.OnMouseMoveEvent=D);var p={clientX:c,clientY:f};this.MoveOnPoint={X:c,Y:f},this.OnMouseMove(c,f,p),this.LastMouseStatus.MoveOnPoint=null,m&&(m.OnMouseMoveEvent=null)}return}}var c=n.GetXFromIndex(o),f=n.GetYFromData(s),d={X:c,Y:f,IsInClient:this.IsMouseOnClient(c,f)};this.LastMouseStatus.OnMouseMove=d,this.LastMouseStatus.MoveOnPoint={X:c,Y:f};var D=this.GetEventCallback(Kn.ON_MOUSE_MOVE),m=this.TitlePaint[0];D&&m&&(m.OnMouseMoveEvent=D),this.MoveOnPoint={X:c,Y:f},this.OnMouseMove(c,f,{}),this.LastMouseStatus.MoveOnPoint=null,m&&(m.OnMouseMoveEvent=null)}},this.SendPageChangedEvent=function(){var t=this.GetEventCallback(Kn.ON_MINUTE_PAGE_CHANGED);if(t&&t.Callback){var e={DayOffset:this.DayOffset,DayData:this.DayData};t.Callback(t,e,this)}},this.IsMouseOnClient=function(t,e){var a=this.Frame.IsHScreen?this.Frame.ChartBorder.GetHScreenBorder():this.Frame.ChartBorder.GetBorder(),i={Left:a.Left,Top:a.Top,Right:a.Right,Bottom:a.Bottom};return t>=i.Left&&t<=i.Right&&e>=i.Top&&e<=i.Bottom},this.OnDragMode_One=function(t,e){var a=this.MouseDrag,i=t.X,r=t.Y;if(this.RectSelectDrag&&this.RectSelectDrag.Index>=0){if(i<5)return;var n={X:e.clientX,Y:e.clientY,PointIndex:this.RectSelectDrag.Index,Name:"MoveRectSelectLine"};this.MoveRectSelectPoint(n)&&(a.LastMove.X=e.clientX,this.Draw())}else{if(i<5&&r<5)return;if(!this.EnableSelectRect)return;this.SetCursor({Cursor:"default"});var o=this.PointAbsoluteToRelative(a.Click.X,a.Click.Y),s=this.PointAbsoluteToRelative(e.clientX,e.clientY);this.ShowDragSelectRect(o,s),a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY}},this.OnMinuteSelectRectMouseUp=function(e){var a=this.MouseDrag;a.LastMove.X=e.clientX,a.LastMove.Y=e.clientY;var i=new w,r=C();if(i.XStart=(a.Click.X-t.getBoundingClientRect().left)*r,i.YStart=(a.Click.Y-t.getBoundingClientRect().top)*r,i.XEnd=(a.LastMove.X-t.getBoundingClientRect().left)*r,i.YEnd=(a.LastMove.Y-t.getBoundingClientRect().top)*r,i.JSChartContainer=this,i.Stock={Symbol:this.Symbol,Name:this.Name},this.EnableSelectRect&&!this.BorderDrag&&this.GetSelectRectData(i)){var n=this.GetEventCallback(Kn.ON_SELECT_RECT),o=this.GetRectSelectPaint(),s=!0;if(n&&n.Callback){var l={X:a.LastMove.X-t.getBoundingClientRect().left,Y:a.LastMove.Y-t.getBoundingClientRect().top,SelectData:i,RectSelectPaint:o,e:e};n.Callback(n,l,this),s=!1}s&&this.DialogSelectRect?(e.data={Chart:this,X:a.LastMove.X-t.getBoundingClientRect().left,Y:a.LastMove.Y-t.getBoundingClientRect().top,SelectData:i,RectSelectPaint:o},this.HideSelectRect(),this.UpdateSelectRect(i.Start,i.End),this.DrawSelectRectDialog(e)):(this.HideSelectRect(),this.UpdateSelectRect(i.Start,i.End))}else this.TryClickPaintEvent(Kn.ON_CLICKUP_CHART_PAINT,this.ClickDownPoint,e),this.ClickEvent(e)},this.OnDragSelectRectMouseUp=function(t){var e=this.GetRectSelectPaint();if(e){var a=e.GetSelectRectData();if(a){var i=C(),r=this.ChartCorssCursor,n=r.LastPoint.X/i,o=r.LastPoint.Y/i,s=!0,l=this.GetEventCallback(Kn.ON_DRAG_SELECT_RECT_MOUSEUP);if(l){var h={X:n,Y:o,SelectData:a,RectSelectPaint:e,IsShowDialog:!1};l.Callback(l,h,this),s=h.IsShowDialog}if(s){var h={Chart:this,X:n,Y:o,SelectData:a,RectSelectPaint:e};t.data=h,this.UpdateSelectRectDialog(t)}}}},this.UpdateSelectRect=function(t,e){if(this.SourceData&&this.SourceData.Data){var a=this.GetRectSelectPaint();if(a){var i=this.SourceData;if(i&&we.IsNonEmptyArray(i.Data)){var r=i.Data.length,n=i.Data[t];e>=r&&(e=r-1);var o=i.Data[e];n&&o&&(Xn.Chart.Log("[MinuteChartContainer::UpdateSelectRect]",n,o),a.SetPoint(n,{Index:0}),a.SetPoint(o,{Index:1}),this.Draw())}}}},this.MoveRectSelectPoint=function(e){var a=this.GetRectSelectPaint();if(!a)return!1;if(!this.SourceData||!this.SourceData.Data)return!1;var i=this.SourceData;if(!this.Frame.SubFrame[0])return!1;var r=this.Frame.SubFrame[0].Frame,n=C(),o=(e.X-t.getBoundingClientRect().left)*n,s=r.GetXData(o);s=parseInt(s.toFixed(0));var l=s+i.DataOffset;l>=i.Data.length&&(l=i.Data.length-1);var h=i.Data[l];if(Xn.Chart.Log("[MinuteChartContainer::MoveRectSelectPoint] point, item",e.PointIndex,h),!a.SetPoint(h,{Index:e.PointIndex}))return!1;var u=this.GetEventCallback(Kn.ON_DRAG_SELECT_RECT);if(u){var c=a.GetSelectRectData(),f={X:e.X,Y:e.Y,SelectData:c,RectSelectPaint:a};u.Callback(u,f,this)}if(this.IsShowSelectRectDialog()){var c=a.GetSelectRectData(),f={X:e.X,Y:e.Y,SelectData:c,RectSelectPaint:a},d={data:f};this.DrawSelectRectDialog(d)}return!0},this.GetLastCursorIndex=function(t){if(1==t.DataType)for(var e=t.Data.length-1;e>=0;--e){var a=t.Data[e];if(a&&a.DayItem&&a.DayItem.Data)return t.IndexData.DayIndex=0,t.IndexData.DataIndex=a.DayItem.Data.length-1,void(t.IndexData.Type=a.Type)}else if(2==t.DataType)for(var e=t.Data.length-1;e>=0;--e)for(var i=t.Data[e],r=i.length-1;r>=0;--r){var a=i[r];if(a&&a.DayItem&&a.DayItem.Data)return t.IndexData.DayIndex=e,t.IndexData.DataIndex=a.DayItem.Data.length-1,void(t.IndexData.Type=a.Type)}},this.GetFirstCursorIndex=function(t){if(1==t.DataType)for(var e=0;e<t.Data.length;++e){var a=t.Data[e];if(a&&a.DayItem&&a.DayItem.Data)return t.IndexData.DayIndex=0,t.IndexData.DataIndex=0,void(t.IndexData.Type=a.Type)}else if(2==t.DataType)for(var e=0;e<t.Data.length;++e)for(var i=t.Data[e],r=0;r<i.length;++r){var a=i[r];if(a&&a.DayItem&&a.DayItem.Data)return t.IndexData.DayIndex=e,t.IndexData.DataIndex=0,void(t.IndexData.Type=a.Type)}},this.GetAfterCloseData=function(){var t=null;return this.AfterCloseData&&this.IsShowAfterData&&(t=this.AfterCloseData),t},this.GetBeforeOpenData=function(){var t=null;return this.BeforeOpenData&&this.IsShowBeforeData&&(t=this.BeforeOpenData),t},this.MoveCorssCursorIndex=function(t){if(!this.EnableNewIndex)return!1;if(!this.Frame.SubFrame[0]||!this.Frame.SubFrame[0].Frame)return!1;var e=this.Frame.SubFrame[0].Frame;if(1==this.CorssCursorIndex.Type||2==this.CorssCursorIndex.Type||3==this.CorssCursorIndex.Type||-1==this.CorssCursorIndex.Type){var a=[],i=this.GetBeforeOpenData();a.push({DayItem:i,Type:2});var i=null;this.SourceData&&(i=this.SourceData),a.push({DayItem:i,Type:1});var i=this.GetAfterCloseData();a.push({DayItem:i,Type:3});var r={DataType:1,Data:a,IndexData:this.CorssCursorIndex,Point:{X:null,Y:null}},n=1;if(t.IsMoveLeft){if(this.CorssCursorIndex.DayIndex<0&&this.CorssCursorIndex.DataIndex<0&&(this.GetLastCursorIndex(r),n=0),e.MoveXIndexLeft(n,r)){this.LastPoint.X=r.Point.X,this.LastPoint.Y=r.Point.Y,1==this.CorssCursorIndex.Type&&(this.CursorIndex=this.CorssCursorIndex.CursorIndex);var t={ParentFunction:"MoveCorssCursorIndex",Point:{X:r.Point.X,Y:r.Point.Y},IsPhone:!1,ClientPos:this.CorssCursorIndex.Type};this.DrawDynamicInfo(t)}}else if(this.CorssCursorIndex.DayIndex<0&&this.CorssCursorIndex.DataIndex<0&&(this.GetFirstCursorIndex(r),n=0),e.MoveXIndexRight(n,r)){this.LastPoint.X=r.Point.X,this.LastPoint.Y=r.Point.Y,1==this.CorssCursorIndex.Type&&(this.CursorIndex=this.CorssCursorIndex.CursorIndex);var t={ParentFunction:"MoveCorssCursorIndex",Point:{X:r.Point.X,Y:r.Point.Y},IsPhone:!1,ClientPos:this.CorssCursorIndex.Type};this.DrawDynamicInfo(t)}}else if(10==this.CorssCursorIndex.Type||20==this.CorssCursorIndex.Type||30==this.CorssCursorIndex.Type||-2==this.CorssCursorIndex.Type){var a=[],o=0,s=this.DayData.length;this.DayOffset&&(we.IsNumber(this.DayOffset.Offset)&&(o=this.DayOffset.Offset),we.IsNumber(this.DayOffset.ShowDayCount)&&(s=this.DayOffset.ShowDayCount));for(var l=o,h=0;l<this.DayData.length&&h<s;++l,++h){var u=[],i=null;this.MultiDayBeforeOpenData&&this.IsShowMultiDayBeforeData&&(i=this.MultiDayBeforeOpenData[l]),u.push({DayItem:i,Type:20});var i=null;this.DayData&&(i=this.DayData[this.DayData.length-1-l]),u.push({DayItem:i,Type:10});var i=null;this.MultiDayAfterCloseData&&this.IsShowMultiDayAfterData&&(i=this.MultiDayAfterCloseData[l]),u.push({DayItem:i,Type:30}),a.push(u)}var r={DataType:2,Data:a,IndexData:this.CorssCursorIndex,Point:{X:null,Y:null}},n=1;if(t.IsMoveLeft){if(this.CorssCursorIndex.DayIndex<0&&this.CorssCursorIndex.DataIndex<0&&(this.GetLastCursorIndex(r),n=0),e.MoveXIndexLeft(n,r)){this.LastPoint.X=r.Point.X,this.LastPoint.Y=r.Point.Y,10==this.CorssCursorIndex.Type&&(this.CursorIndex=this.CorssCursorIndex.CursorIndex);var t={ParentFunction:"MoveCorssCursorIndex",Point:{X:r.Point.X,Y:r.Point.Y},IsPhone:!1,ClientPos:null};10==this.CorssCursorIndex.Type?t.ClientPos=1:20==this.CorssCursorIndex.Type?t.ClientPos=this.CorssCursorIndex.DayIndex+200:30==this.CorssCursorIndex.Type&&(t.ClientPos=this.CorssCursorIndex.DayIndex+300),this.DrawDynamicInfo(t)}}else if(this.CorssCursorIndex.DayIndex<0&&this.CorssCursorIndex.DataIndex<0&&(this.GetFirstCursorIndex(r),n=0),e.MoveXIndexRight(n,r)){this.LastPoint.X=r.Point.X,this.LastPoint.Y=r.Point.Y,10==this.CorssCursorIndex.Type&&(this.CursorIndex=this.CorssCursorIndex.CursorIndex);var t={ParentFunction:"MoveCorssCursorIndex",Point:{X:r.Point.X,Y:r.Point.Y},IsPhone:!1,ClientPos:null};10==this.CorssCursorIndex.Type?t.ClientPos=1:20==this.CorssCursorIndex.Type?t.ClientPos=this.CorssCursorIndex.DayIndex+200:30==this.CorssCursorIndex.Type&&(t.ClientPos=this.CorssCursorIndex.DayIndex+300),this.DrawDynamicInfo(t)}}},this.SetCorssCursorIndex=function(t){if(this.EnableNewIndex&&(Xn.Chart.Log("[MinuteChartContainer::SetCorssCursorIndex] option ",t),"OnMouseMove"==t.ParentFunction)){this.CorssCursorIndex.Point.X=t.Point.X,this.CorssCursorIndex.Point.Y=t.Point.Y;var e=this.PtInClient_V2(t.Point.X,t.Point.Y);if(Xn.Chart.Log("[MinuteChartContainer::SetCorssCursorIndex] clientPos ",e),e<=0)return void(this.CorssCursorIndex={DayIndex:-1,DataIndex:-1,Point:{X:-1,Y:-1},Type:e});if(!this.Frame.SubFrame[0]||!this.Frame.SubFrame[0].Frame)return void(this.CorssCursorIndex={DayIndex:-1,DataIndex:-1,Point:{X:-1,Y:-1},Type:-1});var a=this.Frame.SubFrame[0].Frame;if(1==e||2==e||3==e){if(this.CorssCursorIndex.DayIndex=0,this.CorssCursorIndex.Type=e,2==e)a.GetLeftExtendXValidData(t.Point.X,{Data:this.BeforeOpenData,IndexData:this.CorssCursorIndex});else if(3==e)a.GetRightExtendXValidData(t.Point.X,{Data:this.AfterCloseData,IndexData:this.CorssCursorIndex});else if(1==e){var i=a.GetXData(t.Point.X);this.CorssCursorIndex.DataIndex=parseInt(i.toFixed(0))}}else if(e>=100&&e<=199){this.CorssCursorIndex.DayIndex=e-100,this.CorssCursorIndex.Type=10;var i=a.GetXData(t.Point.X),r=parseInt(i.toFixed(0));this.CorssCursorIndex.DataIndex=r%a.MinuteCount}else if(e>=200&&e<=299){this.CorssCursorIndex.DayIndex=e-200,this.CorssCursorIndex.Type=20;var n=this.MultiDayBeforeOpenData;if(this.DayOffset){var o=0,s=this.MultiDayBeforeOpenData.length;we.IsNumber(this.DayOffset.Offset)&&(o=this.DayOffset.Offset),we.IsNumber(this.DayOffset.ShowDayCount)&&(s=this.DayOffset.ShowDayCount),n=this.MultiDayBeforeOpenData.slice(o,o+s)}a.GetLeftExtendXValidData(t.Point.X,{Data:n,IndexData:this.CorssCursorIndex})}else if(e>=300&&e<=399){this.CorssCursorIndex.DayIndex=e-300,this.CorssCursorIndex.Type=30;var n=this.MultiDayAfterCloseData;if(this.DayOffset&&this.MultiDayAfterCloseData){var o=0,s=this.MultiDayAfterCloseData.length;we.IsNumber(this.DayOffset.Offset)&&(o=this.DayOffset.Offset),we.IsNumber(this.DayOffset.ShowDayCount)&&(s=this.DayOffset.ShowDayCount),n=this.MultiDayAfterCloseData.slice(o,o+s)}a.GetRightExtendXValidData(t.Point.X,{Data:n,IndexData:this.CorssCursorIndex})}this.LastPoint.X=this.CorssCursorIndex.Point.X,t.Point.X=this.CorssCursorIndex.Point.X}},this.PtInClient_V2=function(t,e){if(this.Canvas.beginPath(),!0===this.Frame.IsHScreen){var a=this.Frame.ChartBorder.GetHScreenBorder();this.Canvas.rect(a.Left,a.TopEx,a.Right-a.Left,a.BottomEx-a.TopEx)}else{var a=this.Frame.ChartBorder.GetBorder();if(a.DayBorder){for(var i=0;i<a.DayBorder.length;++i){var r=a.DayBorder[i];if(this.Canvas.beginPath(),this.Canvas.rect(r.LeftEx,a.TopEx,r.RightEx-r.LeftEx,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 100+i;if(this.Canvas.beginPath(),this.Canvas.rect(r.Left,a.TopEx,r.LeftEx-r.Left,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 200+i;if(this.Canvas.beginPath(),this.Canvas.rect(r.RightEx,a.TopEx,r.Right-r.RightEx,a.BottomEx-a.TopEx),this.Canvas.isPointInPath(t,e))return 300+i}return-2}this.Canvas.rect(a.LeftEx,a.Top,a.RightEx-a.LeftEx,a.Bottom-a.Top)}return this.Canvas.isPointInPath(t,e)?1:this.Frame.ChartBorder.LeftExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.Top,a.Right-a.Left,a.TopEx-a.Top):this.Canvas.rect(a.Left,a.Top,a.LeftEx-a.Left,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?2:this.Frame.ChartBorder.RightExtendWidth>10&&(this.Canvas.beginPath(),!0===this.Frame.IsHScreen?this.Canvas.rect(a.Left,a.BottomEx,a.Right-a.Left,a.Bottom-a.BottomEx):this.Canvas.rect(a.RightEx,a.Top,a.Right-a.RightEx,a.Bottom-a.Top),this.Canvas.isPointInPath(t,e))?3:-1},this.OnTouchStart=function(e){var a=this;if(0!=this.DragMode&&(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash))if(this.IsPress=!1,this.IsOnTouch=!0,this.TouchDrawCount=0,this.PhonePinch=null,this.StopDragTimer(),0==this.EnableScrollUpDown&&e.preventDefault(),this.IsPhoneDragging(e)){var i={Click:{},LastMove:{}},r=this.GetToucheData(e,this.IsForceLandscape),n=this.PointAbsoluteToRelative(r[0].clientX,r[0].clientY,!0);if(this.TryClickLock||this.TryClickIndexTitle){var o=n.X,s=n.Y;if(this.TryClickLock&&this.TryClickLock(o,s))return;if(this.TryClickIndexTitle&&this.TryClickIndexTitle(o,s))return}if(this.ClickFrameButton){var l=this.Frame.PtInButtons(n.X,n.Y);if(l)return void this.ClickFrameButton(l,e)}i.Click.X=r[0].clientX,i.Click.Y=r[0].clientY,i.LastMove.X=r[0].clientX,i.LastMove.Y=r[0].clientY;var h=this,u=function(){if(!0===h.ChartCorssCursor.IsShow){var t=h.PointAbsoluteToRelative(i.Click.X,i.Click.Y,!0),a=t.X,r=t.Y;h.OnMouseMove(a,r,e)}};if(this.ChartDrawOption.IsLockScreen){if(this.MouseDrag=i,this.SelectChartDrawPicture&&(this.SelectChartDrawPicture.IsSelected=!1),this.SelectChartDrawPicture=null,this.CurrentChartDrawPicture){var c=this.CurrentChartDrawPicture;return 2==c.Status?this.SetChartDrawPictureThirdPoint(i.Click.X,i.Click.Y,!0):(this.SetChartDrawPictureFirstPoint(i.Click.X,i.Click.Y,!0),this.FinishChartDrawPicturePoint()&&this.DrawDynamicInfo({Corss:!1,Tooltip:!1})),void(e.cancelable&&e.preventDefault())}var f={};C();if(f.X=r[0].clientX-t.getBoundingClientRect().left,f.Y=r[0].clientY-t.getBoundingClientRect().top,this.GetChartDrawPictureByPoint(f)){1==f.ChartDrawPicture.EnableMove&&(f.ChartDrawPicture.Status=20),f.ChartDrawPicture.ValueToPoint(),f.ChartDrawPicture.MovePointIndex=f.PointIndex,f.ChartDrawPicture.IsSelected=!0,this.CurrentChartDrawPicture=f.ChartDrawPicture,this.SelectChartDrawPicture=f.ChartDrawPicture;var d=this.GetEventCallback(Kn.ON_CLICK_DRAWPICTURE);if(d&&d.Callback){var D={DrawPicture:f.ChartDrawPicture};d.Callback(d,D,this)}return void(e.cancelable&&e.preventDefault())}}else{1==this.EnableScrollUpDown&&(this.DragTimer=setTimeout(function(){if(h.IsPress=!0,i.Click.X==i.LastMove.X&&i.Click.Y==i.LastMove.Y){h.MouseDrag;h.MouseDrag=null,u(),h.PreventTouchEvent(e)}},800)),this.MouseDrag=i,this.PhoneTouchInfo={Start:{X:r[0].clientX,Y:r[0].clientY},End:{X:r[0].clientX,Y:r[0].clientY}},this.SelectChartDrawPicture=null;var m=!0;this.EnableClickModel&&(m=1!=this.ClickModel.IsShowCorssCursor),m?(this.StopDragTimer(),this.DragTimer=setTimeout(function(){if(a.IsPress=!0,i.Click.X==i.LastMove.X&&i.Click.Y==i.LastMove.Y){a.MouseDrag=null;i.Click.X,i.Click.Y;!0===a.EnableClickModel&&(a.ClickModel.IsShowCorssCursor=!0),h.MoveCorssCursor(i.Click,e)}},this.PressTime)):this.EnableClickModel||(0==this.EnableScrollUpDown?u():this.IsClickShowCorssCursor&&u())}this.EnableZoomIndexWindow&&(this.PhoneDBClick.AddTouchStart(r[0].clientX,r[0].clientY,Date.now()),Xn.Chart.Log("[MinuteChartContainer::OnTouchStart] PhoneDBClick ",this.PhoneDBClick)),this.TouchEvent({EventID:Kn.ON_PHONE_TOUCH,FunctionName:"OnTouchStart"},e)}else if(this.IsPhonePinching(e)){var p={Start:{},Last:{}},r=this.GetToucheData(e,this.IsForceLandscape);p.Start={X:r[0].pageX,Y:r[0].pageY,X2:r[1].pageX,Y2:r[1].pageY},p.Last={X:r[0].pageX,Y:r[0].pageY,X2:r[1].pageX,Y2:r[1].pageY},this.PhonePinch=p,this.SelectChartDrawPicture=null}},this.OnTouchMove=function(e){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var a=this.GetToucheData(e,this.IsForceLandscape);if(this.IsPhoneDragging(e)){var i=this.MouseDrag;if(null==i){var r=C(),n=a[0].clientX-t.getBoundingClientRect().left*r,o=a[0].clientY-t.getBoundingClientRect().top*r;this.OnMouseMove(n,o,e)}else{var s=this.GetMoveAngle(i.LastMove,{X:a[0].clientX,Y:a[0].clientY}),l=Math.abs(i.LastMove.X-a[0].clientX),h=Math.abs(i.LastMove.Y-a[0].clientY);if(l=parseInt(l),this.CurrentChartDrawPicture&&!0===this.CurrentChartDrawPicture.EnableMove){var u=this.CurrentChartDrawPicture;if(1==u.Status||2==u.Status){if(l<5&&h<5)return;this.SetChartDrawPictureSecondPoint(a[0].clientX,a[0].clientY,!0)&&this.DrawDynamicInfo()}else if(3==u.Status)this.SetChartDrawPictureThirdPoint(a[0].clientX,a[0].clientY,!0)&&this.DrawDynamicInfo();else if(20==u.Status){if(l<5&&h<5)return;this.MoveChartDrawPicture(a[0].clientX-i.LastMove.X,a[0].clientY-i.LastMove.Y,!0)&&this.DrawDynamicInfo()}i.LastMove.X=a[0].clientX,i.LastMove.Y=a[0].clientY}else if(this.EnableClickModel&&!1===this.ClickModel.IsShowCorssCursor);else{if((h>0&&l<=3||s<=this.TouchMoveMinAngle)&&1==this.EnableScrollUpDown)return void this.StopDragTimer();this.PreventTouchEvent(e),this.MouseDrag=null;var r=C(),n=a[0].clientX-t.getBoundingClientRect().left*r,o=a[0].clientY-t.getBoundingClientRect().top*r;this.OnMouseMove(n,o,e)}}this.PhoneTouchInfo&&(this.PhoneTouchInfo.End.X=a[0].clientX,this.PhoneTouchInfo.End.Y=a[0].clientY)}else if(this.IsPhonePinching(e)){this.PreventTouchEvent(e);var c=this.PhonePinch;if(!c)return;var f=Math.abs(a[0].pageY-a[1].pageY),d=Math.abs(c.Last.Y-c.Last.Y2),D=f-d,m=Math.abs(a[0].pageX-a[1].pageX),p=Math.abs(c.Last.X-c.Last.X2),v=m-p,g=this.ZoomStepPixel;if(Math.abs(v)>g){var T=this.GetEventCallback(Kn.ON_MINUTE_TOUCH_ZOOM);if(T&&T.Callback){var I={XStep:v,YStep:D,PreventDefault:!1};if(T.Callback(T,I,this),I.PreventDefault)return this.PhonePinch=null,void this.StopDragTimer()}}c.Last={X:a[0].pageX,Y:a[0].pageY,X2:a[1].pageX,Y2:a[1].pageY}}0==this.EnableScrollUpDown?e.preventDefault():null==i?this.PreventTouchEvent(e):this.StopDragTimer()}},this.OnTouchEnd=function(t){if(Xn.Chart.Log("[MinuteChartContainer::OnTouchEnd]",t),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){if(this.CurrentChartDrawPicture){var e=this.CurrentChartDrawPicture;2==e.Status||1==e.Status||3==e.Status?(e.PointStatus=e.Status,this.FinishChartDrawPicturePoint()?this.DrawDynamicInfo():!1):20==e.Status&&this.FinishMoveChartDrawPicture()&&this.DrawDynamicInfo()}if(this.EnableZoomIndexWindow){var a=Date.now();this.PhoneDBClick.AddTouchEnd(a),this.PhoneDBClick.IsVaildDBClick()&&(this.OnTouchDBClick(this.PhoneDBClick.Start),this.PhoneDBClick.Clear())}this.IsOnTouch=!1,this.StopDragTimer(),this.TouchEvent({EventID:Kn.ON_PHONE_TOUCH,FunctionName:"OnTouchEnd"},t),this.OnTouchFinished(),this.TouchDrawCount=0}},this.OnKeyDown=function(t){if(this.StopDisplayLatest(),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=this.GetEventCallback(Kn.ON_KEYDOWN);if(e&&e.Callback){var a={e:t,PreventDefault:!1};if(e.Callback(e,a,this),a.PreventDefault)return}var i=t.keyCode?t.keyCode:t.which,r=!1;if(this.ChartCorssCursor&&this.ChartCorssCursor.OnKeyDown){var a={e:t,KeyID:i,Draw:!1,PreventDefault:!1};this.ChartCorssCursor.OnKeyDown(a),r=a.Draw}switch(i){case 37:if(this.EnableNewIndex)this.MoveCorssCursorIndex({IsMoveLeft:!0});else{if(!we.IsNumber(this.CursorIndex)){var n=0;n=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,this.CursorIndex=n-1}if(this.CursorIndex=parseInt(this.CursorIndex),this.CursorIndex<=.99999){if(!this.DataMoveLeft())break;this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw()}else--this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo()}break;case 39:if(this.EnableNewIndex)this.MoveCorssCursorIndex({IsMoveLeft:!1});else{var n=0;if(n=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount,we.IsNumber(this.CursorIndex)||(this.CursorIndex=0),this.CursorIndex=parseInt(this.CursorIndex),this.CursorIndex+1>=n){if(!this.DataMoveRight())break;this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw()}else{var o=null;if(!(o=this.Frame.Data?this.Frame.Data:this.Frame.SubFrame[0].Frame.Data))break;if(this.CursorIndex+o.DataOffset+1>=o.Data.length)break;++this.CursorIndex,this.UpdatePointByCursorIndex(),this.DrawDynamicInfo()}}break;case 46:if(this.SelectChartDrawPicture){var s=this.SelectChartDrawPicture;Xn.Chart.Log(s,"drawPicturedrawPicturedrawPicture"),this.SelectChartDrawPicture=null,this.ClearChartDrawPicture(s)}else if(this.SelectedChart&&this.SelectedChart.Selected.Identify){var l=this.GetSelectedChartInfo(this.SelectedChart.Selected);l&&(l.Type==Do.OVERLAY_INDEX?this.DeleteOverlayWindowsIndex(l.IndexID):l.Type==Do.OVERLAY_MINUTE&&this.DeleteOverlaySymbol(l.Symbol))}break;case 32:this.OnMarkRectSelect(t);break;case 33:if(this.PageInfo.Enable){var h={ID:zn.OP_SCROLL_LEFT,Step:this.PageInfo.ShowDayCount};this.ChartOperator(h)}break;case 34:if(this.PageInfo.Enable){var h={ID:zn.OP_SCROLL_RIGHT,Step:this.PageInfo.ShowDayCount};this.ChartOperator(h)}break;case 27:if(this.CurrentChartDrawPicture){var s=this.CurrentChartDrawPicture;20!=s.Status&&(this.CurrentChartDrawPicture=null)}break;default:return}r&&this.DrawDynamicInfo(),t.preventDefault?t.preventDefault():t.returnValue=!1}},this.OnMarkRectSelect=function(t){var e=this.ChartCorssCursor;if(e&&0!=e.Status&&we.IsNumber(e.CursorIndex)&&this.SourceData&&this.SourceData.Data){var a=this.GetRectSelectPaint();if(a){var i=e.CursorIndex;Xn.Chart.Log("[MinuteChartContainer::OnMarkRectSelect] dataIndex",i);var r=this.SourceData;i=parseInt(i.toFixed(0));var n=i+r.DataOffset;n>=r.Data.length&&(n=r.Data.length-1);var o=r.Data[n];if(Xn.Chart.Log("[MinuteChartContainer::OnMarkRectSelect] item",o),this.SetRectSelectData(o)){var s=a.GetPointCount(),l=C();if(1==s){var h=this.GetEventCallback(Kn.ON_KEYDOWN_SELECT_RECT_FIRST);if(h&&h.Callback){var u={X:e.LastPoint.X/l,Y:e.LastPoint.Y/l,Item:o,Index:n,RectSelectPaint:a,e:t};h.Callback(h,u,this)}}else if(2==s){var c=a.GetSelectRectData(),h=this.GetEventCallback(Kn.ON_KEYDOWN_SELECT_RECT);if(h&&h.Callback){var u={X:e.LastPoint.X/l,Y:e.LastPoint.Y/l,SelectData:c,RectSelectPaint:a,e:t};h.Callback(h,u,this)}this.DialogSelectRect&&(t.data={Chart:this,X:e.LastPoint.X/l,Y:e.LastPoint.Y/l,SelectData:c,RectSelectPaint:a},this.DrawSelectRectDialog(t))}this.Draw()}}}},this.OnRightMenu=function(t,e,a){var i=C(),r=this.Frame.PtInFrame(t*i,e*i);this.PopupRightMenuV2({X:a.offsetX,Y:a.offsetY,FrameID:r},a);var n=this.GetEventCallback(Kn.ON_CONTEXT_MENU);if(n){var o={X:t,Y:e,Event:a,FrameID:r};n.Callback(n,o,this)}},this.GetRightMenuData=function(t){for(var e=this.Frame.SubFrame.length,a=[],i=0;i<this.OverlayChartPaint.length;++i){var r=this.OverlayChartPaint[i];r&&r.Symbol&&a.push(r.Symbol)}var n=!1;this.ChartCorssCursor&&(n=this.ChartCorssCursor.IsShowCorss);var o=[{Name:"å å åç§",SubMenu:[{Name:"ä¸è¯ææ°",Data:{ID:Qn.CMD_OVERLAY_SYMBOL_ID,Args:["000001.sh",!a.includes("000001.sh")]},Checked:a.includes("000001.sh")},{Name:"æ·±è¯ææ",Data:{ID:Qn.CMD_OVERLAY_SYMBOL_ID,Args:["399001.sz",!a.includes("399001.sz")]},Checked:a.includes("399001.sz")},{Name:"ä¸­å°æ¿æ",Data:{ID:Qn.CMD_OVERLAY_SYMBOL_ID,Args:["399005.sz",!a.includes("399005.sz")]},Checked:a.includes("399005.sz")},{Name:"åä¸æ¿æ",Data:{ID:Qn.CMD_OVERLAY_SYMBOL_ID,Args:["399006.sz",!a.includes("399006.sz")]},Checked:a.includes("399006.sz")},{Name:"æ²ªæ·±300",Data:{ID:Qn.CMD_OVERLAY_SYMBOL_ID,Args:["000300.sh",!a.includes("000300.sh")]},Checked:a.includes("000300.sh")}]},{Name:"å¤æ¥åæ¶å¾",SubMenu:[{Name:"å½æ¥åæ¶å¾",Data:{ID:Qn.CMD_CHANGE_DAY_COUNT_ID,Args:[1]},Checked:1==this.DayCount},{Name:"æè¿2æ¥",Data:{ID:Qn.CMD_CHANGE_DAY_COUNT_ID,Args:[2]},Checked:2==this.DayCount},{Name:"æè¿3æ¥",Data:{ID:Qn.CMD_CHANGE_DAY_COUNT_ID,Args:[3]},Checked:3==this.DayCount},{Name:"æè¿4æ¥",Data:{ID:Qn.CMD_CHANGE_DAY_COUNT_ID,Args:[4]},Checked:4==this.DayCount},{Name:"æè¿5æ¥",Data:{ID:Qn.CMD_CHANGE_DAY_COUNT_ID,Args:[5]},Checked:5==this.DayCount},{Name:"åºåçº¿éæ©",SubMenu:[{Name:"ææ°æ¨æ¶ä»·",Data:{ID:Qn.CMD_CHANGE_BASELINE_ID,Args:[0]},Checked:0===this.BaselineType},{Name:"å¤æ¥åæ¨æ¶ä»·",Data:{ID:Qn.CMD_CHANGE_BASELINE_ID,Args:[1]},Checked:1===this.BaselineType}]}]},{Name:"ææ çªå£ä¸ªæ°",SubMenu:[{Name:"1ä¸ªçªå£",Data:{ID:Qn.CMD_CHANGE_WINDOW_COUNT_ID,Args:[2]},Checked:3==e},{Name:"2ä¸ªçªå£",Data:{ID:Qn.CMD_CHANGE_WINDOW_COUNT_ID,Args:[3]},Checked:4==e},{Name:"3ä¸ªçªå£",Data:{ID:Qn.CMD_CHANGE_WINDOW_COUNT_ID,Args:[4]},Checked:5==e},{Name:"4ä¸ªçªå£",Data:{ID:Qn.CMD_CHANGE_WINDOW_COUNT_ID,Args:[5]},Checked:6==e},{Name:"5ä¸ªçªå£",Data:{ID:Qn.CMD_CHANGE_WINDOW_COUNT_ID,Args:[6]},Checked:7==e}]},{Name:"ææ åæ¢",SubMenu:[{Name:"MACD",Data:{ID:Qn.CMD_CHANGE_INDEX_ID,Args:[t,"MACD"]}},{Name:"DMI",Data:{ID:Qn.CMD_CHANGE_INDEX_ID,Args:[t,"DMI"]}},{Name:"DMA",Data:{ID:Qn.CMD_CHANGE_INDEX_ID,Args:[t,"DMA"]}},{Name:"BRAR",Data:{ID:Qn.CMD_CHANGE_INDEX_ID,Args:[t,"BRAR"]}},{Name:"KDJ",Data:{ID:Qn.CMD_CHANGE_INDEX_ID,Args:[t,"KDJ"]}},{Name:"RSI",Data:{ID:Qn.CMD_CHANGE_INDEX_ID,Args:[t,"RSI"]}},{Name:"WR",Data:{ID:Qn.CMD_CHANGE_INDEX_ID,Args:[t,"WR"]}},{Name:"CCI",Data:{ID:Qn.CMD_CHANGE_INDEX_ID,Args:[t,"CCI"]}},{Name:"TRIX",Data:{ID:Qn.CMD_CHANGE_INDEX_ID,Args:[t,"TRIX"]}}]},{Name:"åºé´éæ©",Data:{ID:Qn.CMD_ENABLE_SELECT_RECT_ID,Args:[!this.EnableSelectRect]},Checked:this.EnableSelectRect},{Name:"å¶ä»è®¾ç½®",SubMenu:[{Name:"ç»å¾å·¥å·",Data:{ID:Qn.CMD_SHOW_DRAWTOOL_ID,Args:[]},Checked:this.IsShowDrawToolDialog()},{Name:"åå­åæ çº¿",Data:{ID:Qn.CMD_SHOW_CORSS_LINE_ID,Args:[!n]},Checked:n},{Name:on.SEPARATOR_LINE_NAME},{Name:"è¯­è¨è®¾ç½®",SubMenu:[{Name:"ä¸­æ",Data:{ID:Qn.CMD_CHANGE_LANGUAGE_ID,Args:["CN"]},Checked:this.LanguageID==xo.LANGUAGE_CHINESE_ID},{Name:"è±è¯­",Data:{ID:Qn.CMD_CHANGE_LANGUAGE_ID,Args:["EN"]},Checked:this.LanguageID==xo.LANGUAGE_ENGLISH_ID},{Name:"ç¹ä½",Data:{ID:Qn.CMD_CHANGE_LANGUAGE_ID,Args:["TC"]},Checked:this.LanguageID==xo.LANGUAGE_TRADITIONAL_CHINESE_ID}]},{Name:"åºé´éæ©æ ·å¼",SubMenu:[{Name:"æ ·å¼1(é»è®¤)",Data:{ID:Qn.CMD_CHANGE_DRAG_RECT_SHOW_MODE_ID,Args:[0]},Checked:0==this.ChartDragSelectRect.ShowMode},{Name:"æ ·å¼2",Data:{ID:Qn.CMD_CHANGE_DRAG_RECT_SHOW_MODE_ID,Args:[1]},Checked:1==this.ChartDragSelectRect.ShowMode},{Name:"æ ·å¼3",Data:{ID:Qn.CMD_CHANGE_DRAG_RECT_SHOW_MODE_ID,Args:[2]},Checked:2==this.ChartDragSelectRect.ShowMode}]},{Name:"Kçº¿æµ®å¨æ¡",SubMenu:[{Name:"ç¦ç¨",Data:{ID:Qn.CMD_DIALOG_TOOLTIP_ATTRIBUTE,Args:[{Enable:!1}]},Checked:!this.DialogTooltip},{Name:"æ ·å¼1",Data:{ID:Qn.CMD_DIALOG_TOOLTIP_ATTRIBUTE,Args:[{Enable:!0,Style:0}]},Checked:this.DialogTooltip&&0===this.DialogTooltip.Style},{Name:"æ ·å¼2",Data:{ID:Qn.CMD_DIALOG_TOOLTIP_ATTRIBUTE,Args:[{Enable:!0,Style:1}]},Checked:this.DialogTooltip&&1===this.DialogTooltip.Style}]}]}];if(wo.IsSHSZStockA(this.Symbol)){var r={Name:"éåç«ä»·",Data:{ID:Qn.CMD_SHOW_BEFORE_DATA_ID,Args:[!this.IsShowBeforeData]},Checked:this.IsShowBeforeData};o.splice(4,0,r)}for(var i=0;i<o.length;++i){var r=o[i];if("å å åç§"==r.Name)for(var s=0;s<r.SubMenu.length;++s)if(r.SubMenu[s].Checked){r.SubMenu.push({Name:on.SEPARATOR_LINE_NAME}),r.SubMenu.push({Name:"åæ¶å å ",Data:{ID:Qn.CMD_DELETE_ALL_OVERLAY_SYMBOL_ID}});break}}return o},this.OnWheel=function(t){Xn.Chart.Log("[MinuteChartContainer::OnWheel]",t)},this.OnDoubleClick=function(t,e,a){Xn.Chart.Log("[MinuteChartContainer::OnDoubleClick]",a),null!=this.ClickChartTimer&&(clearTimeout(this.ClickChartTimer),this.ClickChartTimer=null);var i;this.SelectedChart.EnableSelected&&(i=this.PtInChart(t,e));var r={SelectedChart:i};if(this.DBClickEvent(r,a),!i&&this.EnableZoomIndexWindow){var n=this.Frame.PtInFrame(t,e);Xn.Chart.Log("[MinuteChartContainer::OnDoubleClick] frameId",n),n>=this.Frame.ZoomStartWindowIndex&&this.ZoomIndexWindow(n,{X:t,Y:e})&&(this.Frame.SetSizeChage(!0),this.Draw())}},this.GetDataItem=function(t){if(!t)return null;if(!we.IsNumber(t.Index))return null;if(!this.SourceData||!this.SourceData.Data)return null;var e=this.SourceData,a=t.ClientPos;if(2==a||3==a||a>=200&&a<=299||a>=300&&a<=399){if(!this.ChartCorssCursor||!this.ChartCorssCursor.CallAcutionXOperator)return null;var i=!0===this.Frame.IsHScreen,r=this.ChartCorssCursor.CallAcutionXOperator;if(r.Value=i?t.Point.Y:t.Point.X,r.Point={X:t.Point.X,Y:t.Point.Y},r.ClientPos=a,2==a){if(!this.BeforeOpenData)return null}else if(3==a){if(!this.AfterCloseData)return null}else if(a>=200&&a<=299){if(!this.MultiDayBeforeOpenData||!we.IsNonEmptyArray(this.MultiDayBeforeOpenData))return}else if(a>=300&&tclientPos<=399&&(!this.MultiDayAfterCloseData||!we.IsNonEmptyArray(this.MultiDayAfterCloseData)))return;if(r.Operator()){var n=r.Item;return{Type:a,Item:n,Index:r.DataIndex}}return null}var o=parseInt(t.Index.toFixed(0)),s=o+e.DataOffset;if(s>=e.Data.length)return null;var n=e.Data[s];return{Type:a,Item:n,Index:s}},this.UpdatePointByCursorIndex=function(){this.LastPoint.X=this.Frame.GetXFromIndex(this.CursorIndex);var t=this.CursorIndex;t=parseInt(t.toFixed(0));var e=this.Frame.SourceData;if(!(e.DataOffset+t>=e.Data.length)){var a=e.Data[e.DataOffset+t],i=null;i=a.Before?a.Before.Close:a.Close,this.LastPoint.Y=this.Frame.GetYFromData(i)}},this.Create=function(t,e){var a=this;this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new Pe,this.ChartCorssCursor.PtInClient=function(t,e){return a.PtInClient(t,e)},this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.StringFormatX=go.Create("CorssCursor_Minute_XStringFormat"),this.ChartCorssCursor.StringFormatX.GetEventCallback=function(t){return a.GetEventCallback(t)},this.ChartCorssCursor.StringFormatY=go.Create("CorssCursor_YStringFormat"),this.ChartCorssCursor.StringFormatY.GetEventCallback=function(t){return a.GetEventCallback(t)},this.ChartCorssCursor.StringFormatY.LanguageID=this.LanguageID,this.ChartCorssCursor.StringFormatY.ShareAfterVol=this.ShareAfterVol,this.ChartCorssCursor.CallAcutionXOperator=new Oe,this.ChartCorssCursor.GetEventCallback=function(t){return a.GetEventCallback(t)},this.ChartSplashPaint=new _e,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.HQChart=this,this.Frame=new X,this.Frame.ChartBorder=new M,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=25,this.Frame.ChartBorder.TitleHeight=0,this.Frame.ChartBorder.Left=50,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.Frame.GetExtendChartRightWidth=function(){return a.GetExtendChartRightWidth()},this.Frame.GetEventCallback=function(t){return a.GetEventCallback(t)},this.Frame.ZoomStartWindowIndex=2,this.ChartCorssCursor.Frame=this.Frame,this.ChartSplashPaint.Frame=this.Frame,this.CreateChildWindow(t),this.CreateMainKLine(),this.CreateExtendChart("RectSelectPaint",e?e.SelectRect:null),this.EnableIndexChartDrag&&this.CreateExtendChart("DragMovePaint"),this.CreateDragSelectRect(e?e.DragSelectRect:null);for(var i=0;i<this.Frame.SubFrame.length;++i){var r=new ea;0!=i&&1!=i||(r.IsShowMainIndexTitle=!1),r.Frame=this.Frame.SubFrame[i].Frame,r.Canvas=this.Canvas,r.LanguageID=this.LanguageID,r.GetEventCallback=function(t){return a.GetEventCallback(t)},r.SelectedChart=this.SelectedChart,r.MainTitlePaint=this.TitlePaint[0],this.TitlePaint.push(r)}this.ChartCorssCursor.StringFormatX.Frame=this.Frame.SubFrame[0].Frame,this.ChartCorssCursor.StringFormatY.Frame=this.Frame,this.ChartCorssCursor.CallAcutionXOperator&&(this.ChartCorssCursor.CallAcutionXOperator.Frame=this.Frame.SubFrame[0].Frame);var n=!0,o=!0;if(e&&e.Listener){var s=e.Listener;!1===s.KeyDown&&(n=!1,Xn.Chart.Log("[MinuteChartContainer::Create] not register keydown event.")),!1===s.Wheel&&(o=!1,Xn.Chart.Log("[MinuteChartContainer::Create] not register wheel event."))}n&&this.UIElement.addEventListener("keydown",function(t){a.OnKeyDown(t)},!0),o&&this.UIElement.addEventListener("wheel",function(t){a.OnWheel(t)},!0)},this.CreateChildWindow=function(t){for(var e=this,a=this.GetEventCallback(Kn.ON_CREATE_FRAME),i=0;i<t;++i){var r=new M;r.UIElement=this.UIElement;var n=new A;n.Canvas=this.Canvas,n.ChartBorder=r,n.Identify=i,n.GlobalOption=this.GlobalOption,i<2&&(n.ChartBorder.TitleHeight=0),n.XPointCount=243,n.HQChart=this,n.GetEventCallback=function(t){return e.GetEventCallback(t)};var o=[9,8,7,6,5,4,3,2,1];n.HorizontalMax=o[0],n.HorizontalMin=o[o.length-1],0==i?(n.YSplitOperator=new Ne,n.YSplitOperator.FrameSplitData=this.FrameSplitData.get("price"),n.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},n.YSplitOperator.DayOffset=this.DayOffset,n.YSplitOperator.GlobalOption=this.GlobalOption,n.YSplitOperator.HQChart=this):(n.YSplitOperator=new Me,n.YSplitOperator.LanguageID=this.LanguageID,n.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),n.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},1==i&&(n.YSplitOperator.ShareAfterVol=this.ShareAfterVol)),n.YSplitOperator.Frame=n,n.YSplitOperator.ChartBorder=r,n.XSplitOperator=new Re,n.XSplitOperator.Frame=n,n.XSplitOperator.ChartBorder=r,n.XSplitOperator.DayOffset=this.DayOffset,n.XSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},i!=t-1&&(n.XSplitOperator.ShowText=!1),n.XSplitOperator.Operator();for(var s in o)n.HorizontalInfo[s]=new F,n.HorizontalInfo[s].Value=o[s],0==i&&s==n.HorizontalMin||(n.HorizontalInfo[s].Message[1]=o[s].toString(),n.HorizontalInfo[s].Font="14px å¾®è½¯éé»");var l=new H;if(n.FrameData.SubFrameItem=l,l.Frame=n,l.Height=0==i?20:10,this.Frame.SubFrame[i]=l,a&&a.Callback){var h={SubFrame:this.Frame.SubFrame[i],WindowIndex:i};a.Callback(a,h,this)}}},this.CreateSubFrameItem=function(t,e){var a=this,i=new M;if(i.UIElement=this.UIElement,e&&e.ChartBorder&&e.ChartBorder.MultiDayMinute){var r=e.ChartBorder.MultiDayMinute;i.MultiDayMinute.Count=r.Count,i.MultiDayMinute.Left=r.Left,i.MultiDayMinute.Right=r.Right}var n=null;n="MinuteChartHScreenContainer"==this.ClassName?new O:new A,n.Canvas=this.Canvas,n.ChartBorder=i,n.Identify=t,n.XPointCount=243,n.GlobalOption=this.GlobalOption,n.HQChart=this,n.GetEventCallback=function(t){return a.GetEventCallback(t)};var o=[9,8,7,6,5,4,3,2,1];n.HorizontalMax=o[0],n.HorizontalMin=o[o.length-1],n.YSplitOperator=new Me,n.YSplitOperator.LanguageID=this.LanguageID,n.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),n.YSplitOperator.Frame=n,n.YSplitOperator.ChartBorder=i,n.XSplitOperator=new Re,n.XSplitOperator.Frame=n,n.XSplitOperator.ChartBorder=i,n.XSplitOperator.ShowText=!1,n.XSplitOperator.DayOffset=this.DayOffset,n.XSplitOperator.GetEventCallback=function(t){return a.GetEventCallback(t)},n.YSplitOperator.GetEventCallback=function(t){return a.GetEventCallback(t)},n.XSplitOperator.Symbol=this.Symbol,this.DayCount>1&&(n.XSplitOperator.DayCount=this.DayData.length,n.XSplitOperator.DayData=this.DayData,n.DayCount=this.DayData.length);var s=this.Frame.SubFrame[0].Frame.XPointCount;n.XPointCount=s,n.Data=this.ChartPaint[0].Data;for(var l in o)n.HorizontalInfo[l]=new F,n.HorizontalInfo[l].Value=o[l],n.HorizontalInfo[l].Message[1]=o[l].toString(),n.HorizontalInfo[l].Font="14px å¾®è½¯éé»";var h=new H;n.FrameData.SubFrameItem=h,h.Frame=n,h.Height=10;var u=this.GetEventCallback(Kn.ON_CREATE_FRAME);if(u&&u.Callback){var C={SubFrame:h,WindowIndex:t};u.Callback(u,C,this)}return h},this.AddNewSubFrame=function(t){var e=this,a=this.Frame.SubFrame[0].Frame,i=this.Frame.SubFrame.length,r=this.CreateSubFrameItem(i,a),n=C();r.Frame.ChartBorder.TitleHeight*=n,this.Frame.SubFrame[i]=r;var o=new ea;o.Frame=this.Frame.SubFrame[i].Frame,o.Canvas=this.Canvas,o.LanguageID=this.LanguageID,o.GetEventCallback=function(t){return e.GetEventCallback(t)},o.MainTitlePaint=this.TitlePaint[0],this.TitlePaint[i+1]=o,this.SetSubFrameOption(r,t);for(var s=0;s<this.Frame.SubFrame.length;++s){var l=this.Frame.SubFrame[s].Frame;s==this.Frame.SubFrame.length-1?l.XSplitOperator.ShowText=!0:l.XSplitOperator.ShowText=!1}return this.UpdataDataoffset(),this.Frame.SetSizeChage(!0),this.UpdateXShowText&&this.UpdateXShowText(),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw(),i},this.UpdateXShowText=function(){for(var t=!0,e=this.Frame.SubFrame.length-1;e>=0;--e){var a=this.Frame.SubFrame[e].Frame,i=this.Frame.SubFrame[e];t?(a.XSplitOperator.ShowText=!0,i.Height>0&&(t=!1)):a.XSplitOperator.ShowText=!1}},this.DeleteIndexPaint=function(t,e){var a=this.Frame.SubFrame[t].Frame;if(a){for(var i=[],r=0;r<this.ChartPaint.length;++r){var n=this.ChartPaint[r],o=n.ChartFrame.Guid==a.Guid||n.ChartFrame==a;0!=r&&o?!0===e&&n&&n.OnDestroy&&n.OnDestroy():i.push(n)}a.YSpecificMaxMin=null,a.IsLocked=!1,a.YSplitOperator.SplitType=a.YSplitOperator.DefaultSplitType,this.ChartPaint=i;var s=t+1;this.TitlePaint[s].Data=[],this.TitlePaint[s].Title=null}},this.CreateStockInfo=function(){this.ExtendChartPaint[0]=new fe,this.ExtendChartPaint[0].Canvas=this.Canvas,this.ExtendChartPaint[0].ChartBorder=this.Frame.ChartBorder,this.ExtendChartPaint[0].ChartFrame=this.Frame,this.Frame.ChartBorder.Right=300},this.CreateMainKLine=function(){var t=this,e=uo.Create("ChartMinutePriceLine");e.Canvas=this.Canvas,e.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,e.ChartFrame=this.Frame.SubFrame[0].Frame,e.Name="Minute-Line",e.Identify="Minute-Line",e.Color=So.Minute.PriceColor,e.LineWidth=So.Minute.PriceLineWidth,e.AreaColor=So.Minute.AreaPriceColor,e.GetEventCallback=function(e){return t.GetEventCallback(e)},this.ChartPaint[0]=e;var a=new At;a.Canvas=this.Canvas,a.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,a.ChartFrame=this.Frame.SubFrame[0].Frame,a.Name="Minute-Average-Line",a.Identify="Minute-Average-Line",a.Color=So.Minute.AvPriceColor,a.IsDrawArea=!1,this.ChartPaint[1]=a;var i=uo.Create("ChartMinuteVolumBar");i.Color=So.Minute.VolBarColor,i.Canvas=this.Canvas,i.ChartBorder=this.Frame.SubFrame[1].Frame.ChartBorder,i.ChartFrame=this.Frame.SubFrame[1].Frame,i.Name="Minute-Vol-Bar",i.Identify="Minute-Vol-Bar",i.ShareAfterVol=this.ShareAfterVol,this.ChartPaint[2]=i,this.TitlePaint[0]=new $e,this.TitlePaint[0].Frame=this.Frame.SubFrame[0].Frame,this.TitlePaint[0].Canvas=this.Canvas,this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint,this.TitlePaint[0].LanguageID=this.LanguageID,this.TitlePaint[0].CallAcutionXOperator=new Oe,this.TitlePaint[0].CallAcutionXOperator.Frame=this.Frame.SubFrame[0].Frame,this.TitlePaint[0].HQChart=this},this.ChangeScriptIndex=function(t,e,a){this.DeleteIndexPaint(t,!0),this.WindowIndex[t]=new Sr(e.Name,e.Script,e.Args,e);var i=this.SourceData;this.BindIndexData(t,i),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.ChangeAPIIndex=function(t,e){this.DeleteIndexPaint(t,!0);var a=e.API;this.WindowIndex[t]=new br(a.Name,a.Script,a.Args,e),e&&e.Window&&this.SetFrameToolbar(t,e.Window),this.Frame.ClearUpDonwFrameYData({Index:t});var i=this.ChartPaint[0].Data;this.BindIndexData(t,i),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()},this.ChangeIndex=function(t,e,a){if(!(this.Frame.SubFrame.length<3)){if(a&&a.API)return this.ChangeAPIIndex(t,a);var i=new s,r=i.Get(e);if(r)return t<2&&(t=2),t>=this.Frame.SubFrame.length&&(t=2),s.ModifyAttribute(r,a),this.ChangeScriptIndex(t,r,a)}},this.ChangeIndexWindowCount=function(t){var e=this;if(!(t<2)&&this.Frame.SubFrame.length!=t){var a=this.Frame.SubFrame.length;if(a>t){for(var i=this.GetEventCallback(Kn.ON_DELETE_FRAME),r=a-1;r>=t;--r){this.DeleteIndexPaint(r),this.DeleteChartPaintExtend({WindowIndex:r});var n=this.Frame.SubFrame[r].Frame;if(n.ClearToolbar&&n.ClearToolbar(),i&&i.Callback){var o={SubFrame:this.Frame.SubFrame[r],WindowIndex:r};i.Callback(i,o,this)}}this.Frame.SubFrame.splice(t,a-t),this.WindowIndex.splice(t,a-t),this.TitlePaint.splice(t+1,a-t)}else{for(var l=this.Frame.SubFrame[0].Frame,r=a;r<t;++r){var h=this.CreateSubFrameItem(r,l);this.Frame.SubFrame[r]=h;var u=new ea;u.Frame=this.Frame.SubFrame[r].Frame,u.Canvas=this.Canvas,u.LanguageID=this.LanguageID,u.GetEventCallback=function(t){return e.GetEventCallback(t)},u.SelectedChart=this.SelectedChart,u.MainTitlePaint=this.TitlePaint[0],this.TitlePaint[r+1]=u}for(var C=["RSI","MACD","DMA","DMI","KDJ","WR"],c=new s,r=a;r<t;++r){var f=C[r%C.length],d=c.Get(f);this.WindowIndex[r]=new Sr(d.Name,d.Script,d.Args,d);var D=this.SourceData;this.BindIndexData(r,D)}for(var r=0;r<this.Frame.SubFrame.length;++r){var n=this.Frame.SubFrame[r].Frame;r==this.Frame.SubFrame.length-1?n.XSplitOperator.ShowText=!0:n.XSplitOperator.ShowText=!1}this.UpdataDataoffset()}this.UpdateXShowText(),this.Frame.SetSizeChage(!0),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw()}},this.ChangeIndexTemplate=function(t){var e=this;if(Array.isArray(t.Windows)){var a=t.Windows.length,i=this.Frame.SubFrame.length;a+=2;var r=null,n=null;we.IsNumber(t.DayCount)&&t.DayCount!=this.DayCount&&(r=t.DayCount),t.Symbol&&(n=t.Symbol);for(var o=null!=r||null!=n,l=2;l<i;++l){this.DeleteIndexPaint(l);var h=this.Frame.SubFrame[l];h.YSpecificMaxMin=null,h.IsLocked=!1,h.YSplitScale=null}if(i>a){for(var u=this.GetEventCallback(Kn.ON_DELETE_FRAME),l=i-1;l>=a;--l)if(this.Frame.SubFrame[l].Frame.ClearToolbar(),u&&u.Callback){var C={SubFrame:this.Frame.SubFrame[l],WindowIndex:l};u.Callback(u,C,this)}this.Frame.SubFrame.splice(a,i-a),this.WindowIndex.splice(a,i-a),this.TitlePaint.splice(a+1,i-a)}else for(var l=i;l<a;++l){var c=this.CreateSubFrameItem(l);this.Frame.SubFrame[l]=c;var f=new ea;f.Frame=this.Frame.SubFrame[l].Frame,f.Canvas=this.Canvas,f.LanguageID=this.LanguageID,f.GetEventCallback=function(t){return e.GetEventCallback(t)},f.SelectedChart=this.SelectedChart,f.MainTitlePaint=this.TitlePaint[0],this.TitlePaint[l+1]=f}for(var l=0;l<a;++l){var d=l,D=null,m=null;t.Frame&&t.Frame.length>l&&(m=t.Frame[d]),d>=2&&(D=t.Windows[d-2]);var p=d+1;if(this.TitlePaint[p].Data=[],this.TitlePaint[p].Title=null,D)if(D.Script)this.WindowIndex[d]=new Sr(D.Name,D.Script,D.Args,D);else if(D.API){var v=D.API;this.WindowIndex[d]=new br(v.Name,v.Script,v.Args,D)}else{var g=D.Index,T=di.Get(g);if(T)this.WindowIndex[d]=T.Create(),this.CreateWindowIndex(d);else{var I=new s,S=I.Get(g);S&&(s.ModifyAttribute(S,D),this.WindowIndex[d]=new Sr(S.Name,S.Script,S.Args,S))}}this.SetSubFrameAttribute(this.Frame.SubFrame[d],D,m)}for(var l=0;l<this.Frame.SubFrame.length;++l)this.DeleteWindowsOverlayIndex(l);for(var l=0;l<this.Frame.SubFrame.length;++l){var D=this.Frame.SubFrame[l].Frame;l==this.Frame.SubFrame.length-1?D.XSplitOperator.ShowText=!0:D.XSplitOperator.ShowText=!1}var x=[];if(we.IsNonEmptyArray(t.OverlayIndex))for(var l=0;l<t.OverlayIndex.length;++l){var D=t.OverlayIndex[l];D.Index&&(D.IndexName=D.Index),D.Windows>=0&&(D.WindowIndex=D.Windows);var b=this.CreateOverlayWindowsIndex(D);b&&x.push({WindowsIndex:D.WindowIndex,Overlay:b})}if(this.Frame.SetSizeChage(!0),o){n||(n=this.Symbol);var t={};we.IsNumber(r)&&(t.DayCount=r),this.ChangeSymbol(n,t)}else{if(!this.SourceData)return void this.Draw();for(var y=this.SourceData,l=0;l<a;++l)this.BindIndexData(l,y);for(var l=0;l<x.length;++l){var D=x[l];this.BindOverlayIndexData(D.Overlay,D.WindowsIndex,y)}this.UpdataDataoffset(),this.UpdateXShowText&&this.UpdateXShowText(),this.ResetFrameXYSplit(),this.UpdateFrameMaxMin(),this.Draw()}}},this.RemoveIndexWindow=function(t){if(Xn.Chart.Log("[MinuteChartContainer::RemoveIndexWindow] remove id",t),!(t<2)&&this.Frame.SubFrame&&!(t>=this.Frame.SubFrame.length)){this.Frame.RestoreIndexWindows();this.Frame.SubFrame[t].Frame;this.DeleteIndexPaint(t),this.DeleteChartPaintExtend({WindowIndex:t}),this.Frame.SubFrame[t].Frame.ClearToolbar();var e=this.GetEventCallback(Kn.ON_DELETE_FRAME);if(e&&e.Callback){var a={SubFrame:this.Frame.SubFrame[t],WindowIndex:t};e.Callback(e,a,this)}this.Frame.SubFrame.splice(t,1),this.WindowIndex.splice(t,1),this.TitlePaint.splice(t+1,1);for(var i=0;i<this.Frame.SubFrame.length;++i){var r=this.Frame.SubFrame[i].Frame;i==this.Frame.SubFrame.length-1?r.XSplitOperator.ShowText=!0:r.XSplitOperator.ShowText=!1,r.Identify=i}this.Frame.SetSizeChage(!0),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw()}},this.AutoUpdateEvent=function(t,e){var a=t?Kn.RECV_START_AUTOUPDATE:Kn.RECV_STOP_AUTOUPDATE;if(this.mapEvent.has(a)){var i=this,r=this.mapEvent.get(a),n={Stock:{Symbol:this.Symbol,Name:this.Name,DayCount:this.DayCount},Explain:e};t&&(n.Callback=function(t){i.RecvMinuteData(t)}),r.Callback(r,n,this)}},this.ClearIndexPaint=function(){if(this.Frame&&this.Frame.SubFrame)for(var t=0;t<this.Frame.SubFrame.length;++t){t>=2&&this.DeleteIndexPaint(t,!0);var e=this.Frame.SubFrame[t];if(we.IsNonEmptyArray(e.OverlayIndex))for(var a=0;a<e.OverlayIndex.length;++a){for(var i=e.OverlayIndex[a],r=0;r<i.ChartPaint.length;++r){var n=i.ChartPaint[r];n&&n.OnDestroy&&n.OnDestroy()}i.ChartPaint=[]}}for(var t=1;t<this.TitlePaint.length;++t){var e=this.TitlePaint[t];e.OverlayIndex=new Vn.default}},this.ResetDayOffset=function(){this.PageInfo.Enable?(this.DayOffset.Offset=this.PageInfo.Offset,this.DayOffset.ShowDayCount=this.PageInfo.ShowDayCount):(this.DayOffset.Offset=0,this.DayOffset.ShowDayCount=-1),this.DayOffset.PageInfo=null},this.ResetDataStatus=function(){this.DataStatus.MultiDay=!1,this.DataStatus.LatestDay=!1,this.DataStatus.LatestDate=null},this.ClearOverlaySymbolData=function(){for(var t=0;t<this.OverlayChartPaint.length;++t){var e=this.OverlayChartPaint[t];e.Status=co.STATUS_NONE_ID,e.Data.Data=[]}},this.ChangeSymbol=function(t,e){if(this.StopDisplayLatest(),this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"MinuteChartContainer::ChangeSymbol"),this.Symbol=t,this.ResetDayOffset(),this.ResetDataStatus(),this.ClearIndexPaint(),this.ResetOverlaySymbolStatus(),this.ReloadChartDrawPicture(),this.ClearIndexRunCount(),this.ClearStockCache(),this.Frame.ClearYCoordinateMaxMin(),e){if(we.IsNumber(e.DayCount)&&(this.DayCount=e.DayCount),we.IsNonEmptyArray(e.Windows))for(var a=0;a<e.Windows.length;++a){var i=2+a;if(i>=this.WindowIndex.length)break;var r=e.Windows[a];if(r)if(r.Script)this.WindowIndex[i]=new Sr(r.Name,r.Script,r.Args,r);else if(r.API){var n=r.API;this.WindowIndex[i]=new br(n.Name,n.Script,n.Args,r)}else{var o=new s,l=r.Index,h=o.Get(l);h&&(s.ModifyAttribute(h,r),h.ID=l,this.WindowIndex[i]=new Sr(h.Name,h.Script,h.Args,h))}}if(!0===e.ClearOverlay){for(var a=0;a<this.OverlayChartPaint.length;++a){var r=this.OverlayChartPaint[a];r.IsDelete=!0}this.OverlayChartPaint=[],this.Frame.SubFrame[0].Frame.YSplitOperator.OverlayChartPaint=this.OverlayChartPaint,this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint}if(e.Overlay&&we.IsNonEmptyArray(e.Overlay)){for(var u=new Rn.default,a=0;a<this.OverlayChartPaint.length;++a){var r=this.OverlayChartPaint[a];u.add(r.Symbol)}for(var a=0;a<e.Overlay.length;++a){var r=e.Overlay[a];if(!u.has(r.Symbol)){var C=new Ot;C.Canvas=this.Canvas,C.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,C.ChartFrame=this.Frame.SubFrame[0].Frame,C.Name="Overlay-Minute",C.Symbol=r.Symbol,C.Identify="Overlay-Minute-"+r.Symbol,r.Color?C.Color=r.Color:C.Color=So.OverlaySymbol.Color[So.OverlaySymbol.Random%So.OverlaySymbol.Color.length],++So.OverlaySymbol.Random,C.MainData=this.SourceData,C.SetOption&&C.SetOption(r),this.OverlayChartPaint.push(C)}}}}!t||this.DayCount<=0?this.DrawEmpty():(this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.Draw(),this.RequestData())},this.SetPageInfo=function(t){t&&(we.IsBool(t.Enable)&&(this.PageInfo.Enable=t.Enable),we.IsNumber(t.Offset)&&(this.PageInfo.Offset=t.Offset),we.IsNumber(t.ShowDayCount)&&(this.PageInfo.ShowDayCount=t.ShowDayCount))},this.ClearMinuteData=function(){this.SourceData=null,this.DayData=null,this.BeforeOpenData=null,this.AfterCloseData=null,this.MultiDayBeforeOpenData=null,this.MultiDayAfterCloseData=null},this.ChangeDayCount=function(t,e){t<0||(this.StopDisplayLatest(),this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"MinuteChartContainer::ChangeDayCount"),this.DayCount=t,this.ClearMinuteData(),e&&e.PageInfo&&(this.SetPageInfo(e.PageInfo),this.ResetDayOffset()),this.ReloadChartDrawPicture(),this.ResetDataStatus(),this.ClearIndexPaint(),this.Frame.ClearYCoordinateMaxMin(),this.ResetOverlaySymbolStatus(),this.RequestData())},this.ChangeBaselineType=function(t){this.BaselineType!=t&&(this.BaselineType=t,this.DayCount>1&&this.RequestData())},this.OverlaySymbols=function(t,e){if(e&&!0===e.ClearAll){for(var a=0;a<this.OverlayChartPaint.length;++a){var i=this.OverlayChartPaint[a];i.IsDelete=!0}this.OverlayChartPaint=[]}for(var r=[],a=0,n=0;a<t.length;++a){var o=t[a],s=o.Symbol,l=!1;for(n=0;n<this.OverlayChartPaint.length;++n){var i=this.OverlayChartPaint[n];if(i.Symbol==s){l=!0,console.warn("[MinuteChartContainer::OverlaySymbols] overlay symbol="+s+" exist.");break}}l||r.push(o)}if(!we.IsNonEmptyArray(r))return!0;for(var a=0;a<r.length;++a){var o=r[a],s=o.Symbol,h=new Ot;h.Canvas=this.Canvas,h.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,h.ChartFrame=this.Frame.SubFrame[0].Frame,h.Name="Overlay-Minute",h.Symbol=s,h.Identify="Overlay-Minute-"+s,o.Option&&o.Option.Color?h.Color=o.Option.Color:h.Color=So.OverlaySymbol.Color[So.OverlaySymbol.Random%So.OverlaySymbol.Color.length],++So.OverlaySymbol.Random,h.MainData=this.SourceData,h.SetOption&&h.SetOption(o.Option),this.OverlayChartPaint.push(h)}return this.DayCount<=1?this.RequestOverlayMinuteData():this.RequestOverlayHistoryMinuteData(),!0},this.OverlaySymbol=function(t,e){var a=null;if(we.IsString(t)?a=[t]:Array.isArray(t)&&(a=t),!we.IsNonEmptyArray(a))return!1;for(var i=[],r=0,n=0;r<a.length;++r){var o=a[r],s=!1;for(n=0;n<this.OverlayChartPaint.length;++n){if(this.OverlayChartPaint[n].Symbol==o){s=!0,console.warn("[MinuteChartContainer::OverlaySymbol] overlay symbol="+o+" exist.");break}}s||i.push(o)}if(!we.IsNonEmptyArray(i))return!0;for(var r=0;r<i.length;++r){var o=i[r],l=new Ot;l.Canvas=this.Canvas,l.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,l.ChartFrame=this.Frame.SubFrame[0].Frame,l.Name="Overlay-Minute",l.Symbol=o,l.Identify="Overlay-Minute-"+o,e&&e.Color?l.Color=e.Color:l.Color=So.OverlaySymbol.Color[So.OverlaySymbol.Random%So.OverlaySymbol.Color.length],++So.OverlaySymbol.Random,l.MainData=this.SourceData,l.SetOption&&l.SetOption(e),this.OverlayChartPaint.push(l)}return this.DayCount<=1?this.RequestOverlayMinuteData():this.RequestOverlayHistoryMinuteData(),!0},this.DeleteOverlaySymbol=function(t){for(var e in this.OverlayChartPaint){var a=this.OverlayChartPaint[e];if(a.Symbol===t)return a.IsDelete=!0,this.OverlayChartPaint.splice(e,1),this.UpdateFrameMaxMin(),this.Draw(),!0}return console.warn("[MinuteChartContainer::DeleteOverlaySymbol] overlay symbol="+t+" not exist."),!1},this.ClearOverlaySymbol=function(){for(var t in this.OverlayChartPaint){this.OverlayChartPaint[t].IsDelete=!0}this.OverlayChartPaint=[],this.Frame.SubFrame[0].Frame.YSplitOperator.OverlayChartPaint=this.OverlayChartPaint,this.TitlePaint[0].OverlayChartPaint=this.OverlayChartPaint,this.UpdateFrameMaxMin(),this.Draw()},this.ShowBeforeData=function(t,e){this.ShowCallAuctionData({Left:t},e)},this.ShowCallAuctionData=function(t,e){if(t){var a=!1;if(we.IsBool(t.Left)&&this.IsShowBeforeData!=t.Left&&(this.IsShowBeforeData=t.Left,a=!0),we.IsBool(t.Right)&&this.IsShowAfterData!=t.Right&&(this.IsShowAfterData=t.Right,a=!0),t.MultiDay){var i=t.MultiDay;we.IsBool(i.Left)&&this.IsShowMultiDayBeforeData!=i.Left&&(this.IsShowMultiDayBeforeData=i.Left,a=!0),we.IsBool(i.Right)&&this.IsShowMultiDayAfterData!=i.Right&&(this.IsShowMultiDayAfterData=i.Right,a=!0)}if(e){if(e.BeforeOpen){var i=e.BeforeOpen;we.IsNumber(i.Left)&&this.ExtendWidth.Left!=i.Left&&(this.ExtendWidth.Left=i.Left,a=!0)}if(e.AfterClose){var i=e.AfterClose;we.IsNumber(i.Right)&&this.ExtendWidth.Right!=i.Right&&(this.ExtendWidth.Right=i.Right,a=!0)}if(e.MultiDay){var i=e.MultiDay;we.IsNumber(i.Left)&&this.MultiDayExtendWidth.Left!=i.Left&&(this.MultiDayExtendWidth.Left=i.Left,a=!0),we.IsNumber(i.Right)&&this.MultiDayExtendWidth.Right!=i.Right&&(this.MultiDayExtendWidth.Right=i.Right,a=!0)}}a&&(this.Frame.ClearYCoordinateMaxMin(),this.RequestData())}},this.RequestData=function(){this.DayCount<=1?this.RequestMinuteData():this.RequestHistoryMinuteData()},this.ChangeDrawType=function(t){if(!(this.ChartPaint.length<=0)){if(0==t)this.ChartPaint[0].IsDrawArea=!0;else{if(1!=t)return;this.ChartPaint[0].IsDrawArea=!1}this.Draw()}},this.UpdateDataOffset=function(){this.SourceData.DataOffset=this.DayOffset.DataOffset;for(var t=0;t<this.ChartPaint.length;++t){var e=this.ChartPaint[t];e.Data&&(e.Data.DataOffset=this.DayOffset.DataOffset,"ChartMinuteVolumBar"!=e.ClassName&&"ChartMinutePriceLine"!=e.ClassName||(e.DayOffset=this.DayOffset))}for(var t=0;t<this.OverlayChartPaint.length;++t){var e=this.OverlayChartPaint[t];e.Data&&(e.Data.DataOffset=this.DayOffset.DataOffset)}for(var t=0;t<this.Frame.SubFrame.length;++t)for(var a=this.Frame.SubFrame[t],i=0;i<a.OverlayIndex.length;++i)for(var r=a.OverlayIndex[i],n=0;n<r.ChartPaint.length;++n){var e=r.ChartPaint[n];e.Data&&(e.Data.DataOffset=this.DayOffset.DataOffset)}},this.RequestHistoryMinuteData=function(){var t=this;if(this.IsBeforeData=!1,this.IsAfterData=!1,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.Draw(),this.NetworkFilter){var e={Before:this.IsShowMultiDayBeforeData,After:this.IsShowMultiDayAfterData},a={Name:"MinuteChartContainer::RequestHistoryMinuteData",Explain:"å¤æ¥åæ¶æ°æ®",Request:{Url:t.HistoryMinuteApiUrl,Data:{daycount:t.DayCount,symbol:t.Symbol,callcation:e},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryMinuteData(e)}),1==a.PreventDefault)return}n.HttpRequest({url:t.HistoryMinuteApiUrl,data:{symbol:t.Symbol,daycount:t.DayCount},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryMinuteData(e)}})},this.RecvHistoryMinuteData=function(t){if(this.EnableVerifyRecvData&&t.symbol!=this.Symbol)return void Xn.Chart.Warn("[MinuteChartContainer::RecvHistoryMinuteData] recv data symbol not match. HQChart["+this.Symbol+"] , Recv["+t.symbol+"]");this.DayData=Ii.JsonDataToMinuteDataArray(t),this.ColorLineData=Ii.JsonDataToHistoryMinuteLineColorData(t),this.MultiDayBeforeOpenData=Ii.JosnDataToBeforeOpenDataArray(t),this.MultiDayAfterCloseData=Ii.JosnDataToAfterCloseDataArray(t);var e=Ii.JsonDataToHistoryMinuteLastUpdateTime(t);this.DataStatus.MultiDay=!0,this.CaclutateCallCationYRange(),this.Symbol=t.symbol,this.Name=t.name,this.SetCallCationDataBorder({Left:!1,Right:!1,MultiDay:{Left:this.IsShowMultiDayBeforeData,Right:this.IsShowMultiDayAfterData}}),this.CaclutateLimitPrice(this.DayData[0].YClose,t.data[0].limitprice),this.UpdateHistoryMinuteUI(e),this.RecvMinuteDataEvent({FunctionName:"RecvHistoryMinuteData"}),this.RequestOverlayHistoryMinuteData(),this.BindAllOverlayIndexData(this.SourceData),this.AutoUpdateEvent(!0,"MinuteChartContainer::RequestHistoryMinuteData"),this.AutoUpdate()},this.CaclutateCallCationYRange=function(){var t=null,e=null;if(we.IsNonEmptyArray(this.MultiDayAfterCloseData)){for(var a={Max:null,Min:null},i=0;i<this.MultiDayAfterCloseData.length;++i){var r=this.MultiDayAfterCloseData[i];null==a.Max?a.Max=r.VolMax:a.Max<r.VolMax&&(a.Max=r.VolMax),null==a.Min?a.Min=r.VolMin:a.Min>r.VolMin&&(a.Min=r.VolMin)}t=a}if(we.IsNonEmptyArray(this.MultiDayBeforeOpenData)){for(var a={Max:null,Min:null},i=0;i<this.MultiDayBeforeOpenData.length;++i){var r=this.MultiDayBeforeOpenData[i];null==a.Max?a.Max=r.VolMax:a.Max<r.VolMax&&(a.Max=r.VolMax),null==a.Min?a.Min=r.VolMin:a.Min>r.VolMin&&(a.Min=r.VolMin)}e=a}if(2==this.ShareAfterVol&&t&&e){var n=Math.max(t.Max,e.Max),o=Math.min(t.Min,e.Min);t.Max=e.Max=n,t.Min=e.Min=o}if(t)for(var i=0;i<this.MultiDayAfterCloseData.length;++i){var r=this.MultiDayAfterCloseData[i];r.VolMax=t.Max,r.VolMin=t.Min}if(e)for(var i=0;i<this.MultiDayBeforeOpenData.length;++i){var r=this.MultiDayBeforeOpenData[i];r.VolMax=e.Max,r.VolMin=e.Min}},this.UpdateHistoryMinuteUI=function(t){var e=this.HistoryMinuteDataToArray(this.DayData),a=new tt;if(a.Data=e,t&&(a.UpdateTime=t),this.SourceData=a,this.TradeDate=this.DayData[0].Date,this.PageInfo&&this.PageInfo.Enable){this.DayOffset.DayCount=this.DayData.length,-1==this.DayOffset.ShowDayCount&&(this.DayOffset.ShowDayCount=this.DayData.length),-8888==this.DayOffset.Offset&&(this.DayOffset.Offset=this.DayOffset.DayCount-this.DayOffset.ShowDayCount);var i=this.DayOffset.ShowDayCount;this.Frame.SetDayCount(i)}else{this.DayOffset.Offset=0,this.DayOffset.ShowDayCount=this.DayData.length;var i=this.DayOffset.ShowDayCount;this.Frame.SetDayCount(this.DayData.length)}var r=this.Symbol.toUpperCase(),n=wo.IsFutures(r),o=this.DayData[0];1===this.BaselineType&&(o=this.DayData[this.DayData.length-1]);var s=o.YClose;we.IsNumber(o.YClearing)&&n&&(s=o.YClearing),this.BindMainData(a,s),wo.IsForeignExchange(r)&&(this.ChartPaint[1].Data=null);for(var l=0;l<this.Frame.SubFrame.length;++l){var h=this.Frame.SubFrame[l];h.Frame.XSplitOperator.Symbol=this.Symbol,h.Frame.XSplitOperator.DayCount=i,h.Frame.XSplitOperator.DayData=this.DayData,h.Frame.XSplitOperator.Operator(),h.Frame.XSplitOperator.IsBeforeData=this.IsBeforeData,h.Frame.XSplitOperator.IsAfterData=this.IsAfterData,h.Frame.YSplitOperator.Symbol=this.Symbol,h.Frame.YSplitOperator.IsBeforeData=this.IsBeforeData,h.Frame.YSplitOperator.IsAfterData=this.IsAfterData;for(var u in h.OverlayIndex){var C=h.OverlayIndex[u];C.Frame.XPointCount=h.Frame.XPointCount,C.Frame.MinuteCount=h.Frame.MinuteCount}}if(this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol,this.ChartCorssCursor.StringFormatX.Symbol=this.Symbol,this.ChartCorssCursor.StringFormatX.IsBeforeData=this.IsBeforeData,this.ChartCorssCursor.StringFormatX.IsAfterData=this.IsAfterData,this.TitlePaint[0].IsShowDate=!0,this.UpdateDataOffset(),this.UpdateFrameMaxMin(),this.CreateChartDrawPictureByStorage(),this.Frame.SubFrame.length>2){var c=new tt;c.Data=e;for(var f=2;f<this.Frame.SubFrame.length;++f)this.BindIndexData(f,c)}this.Frame.SetSizeChage(!0),this.Draw()},this.HistoryMinuteDataToArray=function(t){for(var e=[],a=t.length-1;a>=0;--a)for(var i=t[a],r=0;r<i.Data.length;++r)e.push(i.Data[r]);return e},this.UpdateLatestMinuteData=function(t,e,a){if(this.DayData){for(var i=0;i<this.DayData.length;++i){var r=this.DayData[i];if(r.Date===e)return r.Data=t,a&&we.IsNumber(a.yclose)&&(r.YClose=a.yclose),void(a&&we.IsNumber(a.yclearing)&&(r.YClearing=a.yclearing))}if(this.DayData.length>0&&this.DayData[0].Date<e){var n=new tt;n.Date=e,n.Data=t,a&&we.IsNumber(a.yclose)&&(n.YClose=a.yclose),a&&we.IsNumber(a.yclearing)&&(n.YClearing=a.yclearing),this.DayData.unshift(n)}}},this.UpdateLatestMinuteDataV2=function(t){if(this.DayCount>1){if(!this.DayData)return;for(var e=null,a=0;a<this.DayData.length;++a){var i=this.DayData[a];if(i.Date===date){e=i;break}}if(!e)return;for(var r=-1,n=t.Data[0],a=0;a<e.Data.length;++a){var i=e.Data[a];if(i.Date==n.Date&&i.Time==n.Time){r=a;break}}r<0&&(r=e.Data.length);for(var a=0,o=r;a<t.Data.length;++a,++o){var i=t.Data[a];e.Data[o]=i}}else{if(!this.SourceData)return;for(var r=-1,n=t.Data[0],a=0;a<this.SourceData.Data.length;++a){var i=this.SourceData.Data[a];if(i.Date==n.Date&&i.Time==n.Time){r=a;break}}r<0&&(r=this.SourceData.Data.length);for(var a=0,o=r;a<t.Data.length;++a,++o){var i=t.Data[a];this.SourceData.Data[o]=i}}},this.RequestMinuteData=function(){var t=this,e=["name","symbol","yclose","open","price","high","low","vol","amount","date","time","minute","minutecount"],a=this.Symbol.toUpperCase();if(wo.IsFutures(a)&&(e.push("clearing"),e.push("yclearing")),this.IsBeforeData=!1,this.IsShowBeforeData&&1===this.DayCount&&wo.IsSHSZStockA(t.Symbol)&&(this.IsBeforeData=!0,e.push("before")),this.IsAfterData=!1,this.IsShowAfterData&&1===this.DayCount&&wo.IsSHSZStockA(t.Symbol)&&(this.IsAfterData=!0),this.NetworkFilter){var i=null;if(this.DayCount>1){if(we.IsNonEmptyArray(this.DayData)){var r=this.DayData[0];i=r.GetDateRange()}}else this.SourceData&&(i=this.SourceData.GetDateRange());var o={Before:this.IsShowBeforeData,After:this.IsShowAfterData};this.DayCount>1&&(o={Before:this.IsShowMultiDayBeforeData,After:this.IsShowMultiDayAfterData});var s={Name:"MinuteChartContainer::RequestMinuteData",Explain:"ææ°åæ¶æ°æ®",Request:{Url:t.MinuteApiUrl,Data:{field:e,symbol:[t.Symbol],callcation:o},Type:"POST"},Self:this,PreventDefault:!1};if(i&&(s.DateRange=i),this.NetworkFilter(s,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvMinuteData(e)}),1==s.PreventDefault)return}n.HttpRequest({url:t.MinuteApiUrl,data:{field:e,symbol:[t.Symbol],start:-1},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvMinuteData(e)}})},this.RecvMinuteDataEvent=function(t){if(this.mapEvent.has(Kn.RECV_MINUTE_DATA)){var e=this.mapEvent.get(Kn.RECV_MINUTE_DATA),a={MinuteData:this.SourceData,Stock:{Symbol:this.Symbol,Name:this.Name},Option:t,DataStatus:this.DataStatus};e.Callback(e,a,this)}},this.UpdateLineColorData=function(t,e){if(!this.ColorLineData)return void(this.ColorLineData=t);var a=this.ColorLineData.filter(function(t,a,i){return t.Date!=e});if(we.IsNonEmptyArray(t))for(var i in t)a.push(t[i]);this.ColorLineData=a},this.UpdateCallCationData=function(t,e){if(t&&we.IsNonEmptyArray(this.MultiDayBeforeOpenData)){var a=this.MultiDayBeforeOpenData[this.MultiDayBeforeOpenData.length-1];a.Date==t.Date?this.MultiDayBeforeOpenData[this.MultiDayBeforeOpenData.length-1]=t:a.Date<t.Date&&this.MultiDayBeforeOpenData.push(t)}if(e&&we.IsNonEmptyArray(this.MultiDayAfterCloseData)){var a=this.MultiDayAfterCloseData[this.MultiDayAfterCloseData.length-1];a.Date==e.Date?this.MultiDayAfterCloseData[this.MultiDayAfterCloseData.length-1]=e:a.Date<e.Date&&this.MultiDayAfterCloseData.push(e)}this.CaclutateCallCationYRange()},this.RecvUpdateMinuteData=function(t){var e=Ii.JsonDataToUpdateMinuteData(t),a=Ii.JsonDataToMinuteLineColorData(t);this.BeforeOpenData=null,this.AfterCloseData=null;var i=Ii.JsonDataToBeforeOpenData(t),r=Ii.JsonDataToAfterCloseData(t),n=Ii.JsonDataToMinuteLastUpdateTime(t);if(this.DayCount>1)return this.UpdateCallCationData(i,r),this.UpdateLineColorData(a,e.date),this.UpdateLatestMinuteDataV2(e),this.UpdateHistoryMinuteUI(n),this.RecvMinuteDataEvent({FunctionName:"RecvUpdateMinuteData"}),this.RequestOverlayMinuteData(),this.BindAllOverlayIndexData(this.SourceData),this.AutoUpdateEvent(!0,"MinuteChartContainer::RecvUpdateMinuteData"),void this.AutoUpdate();this.UpdateLatestMinuteDataV2(e);var o=this.SourceData,s=this.SourceData.Data;if(this.ColorLineData=a,this.TradeDate=t.stock[0].date,this.Frame.SetDayCount(1),this.SourceData.UpdateTime=n,this.Symbol=e.Symbol,this.Name=e.Name,this.SetCallCationDataBorder({Left:this.IsBeforeData,Right:this.IsAfterData,MultiDay:{Left:!1,Right:!1}}),2==this.ShareAfterVol&&this.BeforeOpenData&&this.AfterCloseData){var l=Math.max(this.BeforeOpenData.VolMax,this.AfterCloseData.VolMax),h=Math.min(this.BeforeOpenData.VolMin,this.AfterCloseData.VolMin);this.BeforeOpenData.VolMax=this.AfterCloseData.VolMax=l,this.BeforeOpenData.VolMin=this.AfterCloseData.VolMin=h}var u=e.YClose,C=this.Symbol.toUpperCase(),c=wo.IsFutures(C);e.YClearing>0&&c&&(u=e.YClearing),this.CaclutateLimitPrice(u,e.LimitPrice);var f=null;if(e.High>0&&e.Low>0&&(f={High:e.High,Low:e.Low}),this.BindMainData(o,u,f),this.Frame.SubFrame.length>2){var d=new tt;d.Data=s;for(var D=2;D<this.Frame.SubFrame.length;++D)this.BindIndexData(D,d)}for(var m=0;m<this.Frame.SubFrame.length;++m){var p=this.Frame.SubFrame[m];if(p.Frame.XSplitOperator.Symbol=this.Symbol,p.Frame.XSplitOperator.DayCount=1,p.Frame.XSplitOperator.Operator(),p.Frame.YSplitOperator.Symbol=this.Symbol,we.IsNonEmptyArray(p.OverlayIndex))for(var v=0;v<p.OverlayIndex.length;++v){var g=p.OverlayIndex[v];g.Frame.XPointCount=p.Frame.XPointCount,g.Frame.MinuteCount=p.Frame.MinuteCount}}this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol,this.ChartCorssCursor.StringFormatX.Symbol=this.Symbol,wo.IsSHSZ(C)&&(this.TitlePaint[0].IsShowDate=!1),1==t.stock[0].IsHistoryMinute&&(this.TitlePaint[0].IsShowDate=!0);var T=this.GetChartMinuteInfo();T&&(T.SourceData=this.SourceData),this.RecvMinuteDataEvent({FunctionName:"RecvUpdateMinuteData"}),this.RequestMinuteInfoData(),this.RequestOverlayMinuteData(),this.CreateChartDrawPictureByStorage(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.BindAllOverlayIndexData(this.SourceData),this.AutoUpdateEvent(!0,"MinuteChartContainer::RecvUpdateMinuteData"),this.AutoUpdate()},this.RecvMinuteData=function(t){if(!t)return void Xn.Chart.Warn("[MinuteChartContainer::RecvMinuteData] recv data is null");if(1==t.dataType)return void this.RecvUpdateMinuteData(t);if(t.stock[0]){if(t.stock[0].symbol!=this.Symbol&&this.EnableVerifyRecvData)return void Xn.Chart.Warn("[MinuteChartContainer::RecvMinuteData] recv data symbol not match. HQChart["+this.Symbol+"] , Recv["+t.stock[0].symbol+"]");var e=Ii.JsonDataToMinuteData(t),a=Ii.JsonDataToMinuteLineColorData(t);this.BeforeOpenData=null,this.AfterCloseData=null;var i=Ii.JsonDataToBeforeOpenData(t),r=Ii.JsonDataToAfterCloseData(t),n=Ii.JsonDataToMinuteLastUpdateTime(t);this.IsBeforeData&&(this.BeforeOpenData=i),this.IsAfterData&&(this.AfterCloseData=r);var o=0==this.DataStatus.LatestDay;if(this.DataStatus.LatestDate=t.stock[0].date,this.DataStatus.LatestDay=!0,this.DayCount>1)return this.UpdateCallCationData(i,r),this.UpdateLineColorData(a,t.stock[0].date),this.UpdateLatestMinuteData(e,t.stock[0].date,t.stock[0]),this.UpdateHistoryMinuteUI(n),this.RecvMinuteDataEvent({FunctionName:"RecvMinuteData"}),this.RequestOverlayMinuteData(),this.BindAllOverlayIndexData(this.SourceData),this.AutoUpdateEvent(!0,"MinuteChartContainer::RecvMinuteData"),void this.AutoUpdate();if(1==this.IsOnTouch&&this.SourceData&&we.IsNonEmptyArray(this.SourceData.Data))return void this.AutoUpdate();var s=new tt;if(s.Data=e,s.UpdateTime=n,this.ColorLineData=a,this.TradeDate=t.stock[0].date,this.Frame.SetDayCount(1),this.SourceData=s,this.Symbol=t.stock[0].symbol,this.Name=t.stock[0].name,this.SetCallCationDataBorder({Left:this.IsBeforeData,Right:this.IsAfterData,MultiDay:{Left:!1,Right:!1}}),2==this.ShareAfterVol&&this.BeforeOpenData&&this.AfterCloseData){var l=Math.max(this.BeforeOpenData.VolMax,this.AfterCloseData.VolMax),h=Math.min(this.BeforeOpenData.VolMin,this.AfterCloseData.VolMin);this.BeforeOpenData.VolMax=this.AfterCloseData.VolMax=l,this.BeforeOpenData.VolMin=this.AfterCloseData.VolMin=h}var u=t.stock[0].yclose,C=this.Symbol.toUpperCase(),c=wo.IsFutures(C);t.stock[0].yclearing>0&&c&&(u=t.stock[0].yclearing),this.CaclutateLimitPrice(u,t.stock[0].limitprice);var f=null;if(t.stock[0].high>0&&t.stock[0].low>0&&(f={High:t.stock[0].high,Low:t.stock[0].low}),this.BindMainData(s,u,f),this.Frame.SubFrame.length>2){var d=new tt;d.Data=e;for(var D=2;D<this.Frame.SubFrame.length;++D)this.BindIndexData(D,d)}for(var m in this.Frame.SubFrame){var p=this.Frame.SubFrame[m];p.Frame.XSplitOperator.Symbol=this.Symbol,p.Frame.XSplitOperator.DayCount=1,p.Frame.XSplitOperator.Operator(),p.Frame.YSplitOperator.Symbol=this.Symbol;for(var v in p.OverlayIndex){var g=p.OverlayIndex[v];g.Frame.XPointCount=p.Frame.XPointCount,g.Frame.MinuteCount=p.Frame.MinuteCount}}this.ChartCorssCursor.StringFormatY.Symbol=this.Symbol,this.ChartCorssCursor.StringFormatX.Symbol=this.Symbol,wo.IsSHSZ(C)&&(this.TitlePaint[0].IsShowDate=!1),1==t.stock[0].IsHistoryMinute&&(this.TitlePaint[0].IsShowDate=!0);var T=this.GetChartMinuteInfo();T&&(T.SourceData=this.SourceData),this.RecvMinuteDataEvent({FunctionName:"RecvMinuteData",Day:{IsFirstData:o}}),this.RequestMinuteInfoData(),this.RequestOverlayMinuteData(),this.CreateChartDrawPictureByStorage(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw(),this.BindAllOverlayIndexData(this.SourceData),!1===t.AutoUpdate||(this.AutoUpdateEvent(!0,"MinuteChartContainer::RecvMinuteData"),this.AutoUpdate())}},this.CaclutateLimitPrice=function(t,e){if(this.LimitPrice=null,e&&e.max>0&&e.min>0)return void(this.LimitPrice={Max:e.max,Min:e.min});var a=wo.GetLimitPriceRange(this.Symbol,this.Name);if(!a)return void Xn.Chart.Log("[MinuteChartContainer::CaclutateLimitPrice] "+this.Symbol+" no limit price.");t<=0||(this.LimitPrice={Max:t*(1+a.Max),Min:t*(1+a.Min)},Xn.Chart.Log("[MinuteChartContainer::CaclutateLimitPrice] "+this.Symbol+" yClose:"+t+" max:"+this.LimitPrice.Max+" min:"+this.LimitPrice.Min),this.LimitPrice.Max=parseFloat(this.LimitPrice.Max.toFixed(2)),this.LimitPrice.Min=parseFloat(this.LimitPrice.Min.toFixed(2)),Xn.Chart.Log("[MinuteChartContainer::CaclutateLimitPrice] "+this.Symbol+" tofixed(2) max:"+this.LimitPrice.Max+" min:"+this.LimitPrice.Min))},this.RequestSingleOverlayMinuteData=function(t,e,a){var i=this;if(a.Status=co.STATUS_REQUESTDATA_ID,this.NetworkFilter){var r={Name:"MinuteChartContainer::RequestOverlayMinuteData",Explain:"å å è¡ç¥¨ææ°åæ¶æ°æ®",Request:{Url:this.HistoryMinuteApiUrl,Data:{days:[e],symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(r,function(t){a.Status=co.STATUS_RECVDATA_ID,i.RecvOverlayMinuteData(t,a)}),1==r.PreventDefault)return}n.HttpRequest({url:this.HistoryMinuteApiUrl,data:{symbol:t,days:[e]},type:"post",dataType:"json",async:!0,success:function(t){a.Status=co.STATUS_RECVDATA_ID,i.RecvOverlayMinuteData(t,a)}})},this.RequestOverlayMinuteData=function(){for(var t=this.TradeDate,e=0;e<this.OverlayChartPaint.length;++e){var a=this.OverlayChartPaint[e];if(a.MainData&&a.Status==co.STATUS_NONE_ID){var i=a.Symbol;i&&this.RequestSingleOverlayMinuteData(i,t,a)}}},this.RecvMultiOverlayMinuteData=function(t){if(we.IsNonEmptyArray(t)){for(var e=!1,a=0;a<t.length;++a){var i=t[a];if(i.symbol)for(var r=0;r<this.OverlayChartPaint.length;++r){var n=this.OverlayChartPaint[r];if(n.MainData&&i.symbol==n.Symbol){this.RecvOverlayMinuteData(i,n,{Redraw:!1}),e=!0;break}}}e&&(this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw())}},this.RecvOverlayMinuteData=function(t,e,a){if(!e.IsDelete){if(this.EnableVerifyRecvData&&t.symbol!=e.Symbol)return void Xn.Chart.Warn("[MinuteChartContainer::RecvOverlayMinuteData] recv data symbol not match. paint["+e.Symbol+"] , Recv["+t.symbol+"]");var i,r=Ii.JsonDataToMinuteDataArray(t),n=null;if(this.DayCount>1){if(r.length<=0)return;var o=r[0];for(var s in e.SourceData){if(e.SourceData[s].Date==o.Date){e.SourceData[s]=o;var l=this.HistoryMinuteDataToArray(e.SourceData),n=new tt;n.Data=l,i=o.YClose;break}}if(null==n)return}else n=r.length>0?r[0]:new tt,i=n.YClose;e.Data=n,e.Title=t.name,e.Symbol=t.symbol,e.YClose=i,e.Status=co.STATUS_FINISHED_ID;var h=!0;a&&0==a.Redraw&&(h=!1),h&&(this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw())}},this.RequestSingleOverlayHistoryMinuteData=function(t,e,a){var i=this;if(a.Status=co.STATUS_REQUESTDATA_ID,this.NetworkFilter){var r={Name:"MinuteChartContainer::RequestOverlayHistoryMinuteData",Explain:"å å è¡ç¥¨å¤æ¥åæ¶æ°æ®",Request:{Url:i.HistoryMinuteApiUrl,Data:{days:e,symbol:t},Type:"POST"},Self:this,PreventDefault:!1};if(this.NetworkFilter(r,function(t){a.Status=co.STATUS_RECVDATA_ID,i.RecvOverlayHistoryMinuteData(t,a)}),1==r.PreventDefault)return}n.HttpRequest({url:i.HistoryMinuteApiUrl,data:{symbol:t,days:e},type:"post",dataType:"json",async:!0,success:function(t){a.Status=co.STATUS_RECVDATA_ID,i.RecvOverlayHistoryMinuteData(t,a)}})},this.RequestOverlayHistoryMinuteData=function(){if(we.IsNonEmptyArray(this.DayData)){for(var t=[],e=0;e<this.DayData.length;++e){var a=this.DayData[e];t.push(a.Date)}if(!(t.length<=0))for(var e=0;e<this.OverlayChartPaint.length;++e){var a=this.OverlayChartPaint[e],i=a.Symbol;i&&(a.Status==co.STATUS_NONE_ID&&this.RequestSingleOverlayHistoryMinuteData(i,t,a))}}},this.RecvOverlayHistoryMinuteData=function(t,e){if(this.EnableVerifyRecvData&&t.symbol!=e.Symbol)return void Xn.Chart.Warn("[MinuteChartContainer::RecvOverlayHistoryMinuteData] recv data symbol not match. paint["+e.Symbol+"] , Recv["+t.symbol+"]");if(we.IsNonEmptyArray(this.DayData)){var a=Ii.JsonDataToMinuteDataArray(t);if(we.IsNonEmptyArray(a)){for(var i=[],r=0;r<this.DayData.length;++r){for(var n=this.DayData[r],o=!1,s=0;s<a.length;++s)if(n.Date==a[s].Date){i.push(a[s]),o=!0;break}if(!o){var l=new tt;l.Date=n.Date,l.Data.length=n.Data.length,i.push(l)}}e.SourceData=i;var h=this.HistoryMinuteDataToArray(i),u=i[0].YClose,C=new tt;C.Data=h,e.Data=C,e.Title=t.name,e.Symbol=t.symbol,e.YClose=u,e.Status=co.STATUS_FINISHED_ID,this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=void 0)},this.AutoUpdate=function(){if(this.CancelAutoUpdate(),this.IsAutoUpdate&&this.Symbol){var t=this,e=wo.GetMarketStatus(this.Symbol);if(0==e||3==e)return void(this.AutoUpdateTimer=setTimeout(function(){t.AutoUpdate()},2e4));var a=this.AutoUpdateFrequency;1==e?this.AutoUpdateTimer=setTimeout(function(){t.AutoUpdate()},a):2==e&&(this.AutoUpdateTimer=setTimeout(function(){t.ResetOverlaySymbolStatus(),t.RequestMinuteData()},a))}},this.BindIndexData=function(t,e,a){if(this.WindowIndex[t])return"function"==typeof this.WindowIndex[t].RequestData?void this.WindowIndex[t].RequestData(this,t,e):"function"==typeof this.WindowIndex[t].ExecuteScript?void this.WindowIndex[t].ExecuteScript(this,t,e):void this.WindowIndex[t].BindData(this,t,e)},this.BindMainData=function(t,e,a){var i=this.IsShowMultiDayBeforeData?this.MultiDayBeforeOpenData:null,r=this.IsShowMultiDayAfterData?this.MultiDayAfterCloseData:null,n=new tt;if(n.Data=t.GetClose(),this.ChartPaint[0].Data=n,this.ChartPaint[0].YClose=e,this.ChartPaint[0].NotSupportMessage=null,this.ChartPaint[0].IsShowLead=!1,this.ChartPaint[0].LeadData=null,this.ChartPaint[0].BeforeOpenData=this.BeforeOpenData,this.ChartPaint[0].AfterCloseData=this.AfterCloseData,this.ChartPaint[0].MultiDayBeforeOpenData=i,this.ChartPaint[0].MultiDayAfterCloseData=r,this.ChartPaint[0].ColorLineData=this.ColorLineData,this.ChartPaint[0].Source=t,wo.IsSHSZIndex(this.Symbol)&&1==this.DayCount&&this.IsShowLead){var o=new tt;o.Data=t.GetLead(),this.ChartPaint[0].LeadData=o,this.ChartPaint[0].IsShowLead=!0}var s=this.Frame.SubFrame[0].Frame;s.YSplitOperator.YClose=e,s.YSplitOperator.Data=n,this.Frame.Data=this.ChartPaint[0].Data,this.Frame.SourceData=t;for(var l in this.Frame.SubFrame){var h=this.Frame.SubFrame[l].Frame;h.Data=t}n=new tt,n.Data=t.GetMinuteAvPrice(),this.ChartPaint[1].Data=n;var u=this.Symbol.toUpperCase();wo.IsForeignExchange(u)?this.ChartPaint[1].Data=null:wo.IsShowAvPrice&&!wo.IsShowAvPrice(u)&&(this.ChartPaint[1].Data=null),s.YSplitOperator.AverageData=n,s.YSplitOperator.OverlayChartPaint=this.OverlayChartPaint,s.YSplitOperator.LimitPrice=this.LimitPrice,s.YSplitOperator.MultiDayBeforeOpenData=i,s.YSplitOperator.MultiDayAfterCloseData=r,s.YSplitOperator.DayCount=this.DayCount,a?(s.YSplitOperator.High=a.High,s.YSplitOperator.Low=a.Low):(s.YSplitOperator.High=null,s.YSplitOperator.Low=null),this.ChartPaint[2].Data=t,this.ChartPaint[2].YClose=e,this.ChartPaint[2].Symbol=this.Symbol,this.ChartPaint[2].BeforeOpenData=this.BeforeOpenData,this.ChartPaint[2].AfterCloseData=this.AfterCloseData,this.ChartPaint[2].MultiDayBeforeOpenData=i,this.ChartPaint[2].MultiDayAfterCloseData=r;for(var l in this.Frame.SubFrame){var h=this.Frame.SubFrame[l];h.Frame.YSplitOperator.BeforeOpenData=this.BeforeOpenData,h.Frame.YSplitOperator.IsBeforeData=this.IsBeforeData,h.Frame.YSplitOperator.AfterCloseData=this.AfterCloseData,h.Frame.YSplitOperator.IsAfterData=this.IsAfterData,h.Frame.YSplitOperator.MultiDayBeforeOpenData=i,h.Frame.YSplitOperator.MultiDayAfterCloseData=r}wo.IsShowMinutePostionLine(u)?this.BindOverlayPositionData(t,e):this.ClearBindOverlayPositionData(),this.TitlePaint[0].Data=this.SourceData,this.TitlePaint[0].Symbol=this.Symbol,this.TitlePaint[0].Name=this.Name,this.TitlePaint[0].YClose=e,this.TitlePaint[0].BeforeOpenData=this.BeforeOpenData,this.TitlePaint[0].AfterCloseData=this.AfterCloseData,this.TitlePaint[0].MultiDayBeforeOpenData=this.IsShowMultiDayBeforeData?this.MultiDayBeforeOpenData:null,this.TitlePaint[0].MultiDayAfterCloseData=this.IsShowMultiDayAfterData?this.MultiDayAfterCloseData:null,this.TitlePaint[0].CallAcutionXOperator&&(this.TitlePaint[0].CallAcutionXOperator.BeforeOpenData=this.BeforeOpenData,this.TitlePaint[0].CallAcutionXOperator.AfterCloseData=this.AfterCloseData,this.TitlePaint[0].CallAcutionXOperator.MultiDayBeforeOpenData=i,this.TitlePaint[0].CallAcutionXOperator.MultiDayAfterCloseData=r,this.TitlePaint[0].CallAcutionXOperator.DayOffset=this.DayOffset),this.ChartCorssCursor&&this.ChartCorssCursor.StringFormatY&&(this.ChartCorssCursor.StringFormatY.YClose=e,this.ChartCorssCursor.StringFormatY.BeforeOpenData=this.BeforeOpenData,this.ChartCorssCursor.StringFormatY.AfterCloseData=this.AfterCloseData,this.ChartCorssCursor.StringFormatY.MultiDayBeforeOpenData=i,this.ChartCorssCursor.StringFormatY.MultiDayAfterCloseData=r,this.ChartCorssCursor.StringFormatY.DayOffset=this.DayOffset,this.ChartCorssCursor.StringFormatX.Data=this.ChartPaint[0].Data,this.ChartCorssCursor.StringFormatX.BeforeOpenData=this.BeforeOpenData,this.ChartCorssCursor.StringFormatX.AfterCloseData=this.AfterCloseData,this.ChartCorssCursor.StringFormatX.MultiDayBeforeOpenData=i,this.ChartCorssCursor.StringFormatX.MultiDayAfterCloseData=r,this.ChartCorssCursor.StringFormatX.DayOffset=this.DayOffset,this.ChartCorssCursor.CallAcutionXOperator&&(this.ChartCorssCursor.CallAcutionXOperator.BeforeOpenData=this.BeforeOpenData,this.ChartCorssCursor.CallAcutionXOperator.AfterCloseData=this.AfterCloseData,this.ChartCorssCursor.CallAcutionXOperator.MultiDayBeforeOpenData=i,this.ChartCorssCursor.CallAcutionXOperator.MultiDayAfterCloseData=r,this.ChartCorssCursor.CallAcutionXOperator.DayOffset=this.DayOffset)),this.ExtendChartPaint[0]&&(this.ExtendChartPaint[0].Symbol=this.Symbol,this.ExtendChartPaint[0].Name=this.Name);for(var l=0;l<this.OverlayChartPaint.length;++l){var h=this.OverlayChartPaint[l];h.MainData=t}},this.BindOverlayPositionData=function(t,e){var a=this;if(!(this.Frame.SubFrame.length<2)){for(var i=null,r=null,n=this.Frame.SubFrame[1],o=null,s=0;s<n.OverlayIndex.length;++s){var l=n.OverlayIndex[s];if("Position_Line_Frame"==l.Identify){o=l;break}}if(o){r=o.Frame;for(var s=0;s<o.ChartPaint.length;++s){var l=o.ChartPaint[s];if("Position-Line"==l.Name){i=l;break}}i||(i=new Pt,i.Canvas=this.Canvas,i.Name="Position-Line",i.ChartBorder=r.ChartBorder,i.ChartFrame=r,i.Identify=o.Identify,i.Color=So.Minute.PositionColor,o.ChartPaint.push(i))}else{o=new Y,o.Identify="Position_Line_Frame",r="MinuteChartContainer"==this.ClassName?new P:new B,r.Canvas=this.Canvas,r.MainFrame=n.Frame,r.ChartBorder=n.Frame.ChartBorder,r.GlobalOption=this.GlobalOption,o.Frame=r,r.YSplitOperator=new Me,r.YSplitOperator.LanguageID=this.LanguageID,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),r.YSplitOperator.Frame=r,r.YSplitOperator.ChartBorder=r.ChartBorder,r.YSplitOperator.SplitCount=n.Frame.YSplitOperator.SplitCount,r.YSplitOperator.GetEventCallback=function(t){return a.GetEventCallback(t)},r.YSplitOperator.OverlayIdentify=o.Identify;var i=new Pt;i.Canvas=this.Canvas,i.Name="Position-Line",i.ChartBorder=r.ChartBorder,i.ChartFrame=r,i.Identify=o.Identify,i.Color=So.Minute.PositionColor,o.ChartPaint.push(i),n.OverlayIndex.push(o),n.Frame.RightFrame=r}var h=this.Frame.SubFrame[0].Frame.XPointCount;r.XPointCount=h,n.Frame.IsShowPositionTitle=!0;var u=new tt;u.Data=t.GetPosition(),i.Data=u}},this.ClearBindOverlayPositionData=function(){if(!(this.Frame.SubFrame.length<2)){var t=this.Frame.SubFrame[1];t.Frame.RightFrame=null,t.Frame.IsShowPositionTitle=!1;for(var e in t.OverlayIndex){if("Position_Line_Frame"==t.OverlayIndex[e].Identify){t.OverlayIndex.splice(e,1);break}}}},this.GetOverlayIndexByIdentify=function(t){for(var e=0;e<this.Frame.SubFrame.length;++e){var a=this.Frame.SubFrame[e];if(we.IsNonEmptyArray(a.OverlayIndex))for(var i=0;i<a.OverlayIndex.length;++i){var r=a.OverlayIndex[i];if(r.Identify===t)return{OverlayItem:r,WindowIndex:e}}}return null},this.RecvOverlayIndex=function(t,e){var a=this.GetOverlayIndexByIdentify(t);if(null==a)return void console.warn("[MinuteChartContainer::RecvOverlayIndex] can't find overlay index. [identify="+t+"]");if(a.Script&&"function"==typeof a.RecvSubscribeData){var i=this.SourceData;i&&a.Script.RecvSubscribeData(e,this,a.WindowIndex,i)}},this.UpdateOverlayIndex=function(t){var e=this.GetOverlayIndexByIdentify(t);if(null==e)return void console.warn("[MinuteChartContainer::UpdateOverlayIndex] can't find overlay index. [identify="+t+"]");var a=this.SourceData;a&&this.BindOverlayIndexData(e.OverlayItem,e.WindowIndex,a)},this.AddOverlayIndex=function(t){var e=this.CreateOverlayWindowsIndex(t);if(e){var a=this.SourceData;this.BindOverlayIndexData(e,t.WindowIndex,a),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.CreateOverlayWindowsIndex=function(t){var e=this,a=t.IndexName,i=t.WindowIndex,r=null,n=null,o=null;if(t.API)r=t.API;else if(t.Script)n={Script:t.Script,ID:t.indexName,Name:t.indexName},t.Name&&(n.Name=t.Name);else{var l=new s;if(!(n=l.Get(a))&&!(o=di.Get(a)))return console.warn("[MinuteChartContainer::CreateOverlayIndex] can not find index["+a+"]"),null}var h=this.Frame.SubFrame[i],u=new Y;t.Identify&&(u.Identify=t.Identify);var C=null;if(C="MinuteChartContainer"==this.ClassName?new P:new B,C.Canvas=this.Canvas,C.MainFrame=h.Frame,C.ChartBorder=h.Frame.ChartBorder,C.GlobalOption=this.GlobalOption,we.IsBool(t.ShowRightText)&&(C.IsShow=t.ShowRightText),we.IsBool(t.IsShareY)&&(C.IsShareY=t.IsShareY),we.IsBool(t.IsCalculateYMaxMin)&&(C.IsCalculateYMaxMin=t.IsCalculateYMaxMin),we.IsNumber(t.IsShowMainFrame)&&(C.IsShowMainFrame=t.IsShowMainFrame),C.YSplitOperator=new Me,C.YSplitOperator.LanguageID=this.LanguageID,C.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),C.YSplitOperator.Frame=C,C.YSplitOperator.ChartBorder=C.ChartBorder,C.YSplitOperator.SplitCount=h.Frame.YSplitOperator.SplitCount,C.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},C.YSplitOperator.HQChart=this,C.YSplitOperator.OverlayIdentify=u.Identify,t.Frame){var c=t.Frame;c.Custom&&(C.YSplitOperator.Custom=c.Custom)}if(u.Frame=C,r){var f=new br(r.Name,r.Script,r.Args,t,!0);f.OverlayIndex={IsOverlay:!0,Identify:u.Identify,WindowIndex:i,Frame:u},u.Script=f}else if(n){s.ModifyAttribute(n,t);var d=new xr(n.Name,n.Script,n.Args,n);d.OverlayIndex={IsOverlay:!0,Identify:u.Identify,WindowIndex:i,Frame:u},u.Script=d}else{var d=o.Create();d.OverlayIndex={IsOverlay:!0,Identify:u.Identify,WindowIndex:i,Frame:u},d.Create(this,i),u.Script=d}return h.OverlayIndex.push(u),u},this.DeleteOverlayWindowsIndex=function(t){this.DeleteOverlayIndex(t,null)&&(this.Frame.ResetXYSplit(!0),this.Draw())},this.BindAllOverlayIndexData=function(t,e){if(this.Frame&&this.Frame.SubFrame)for(var a=0;a<this.Frame.SubFrame.length;++a)for(var i=this.Frame.SubFrame[a],r=0;r<i.OverlayIndex.length;++r){var n=i.OverlayIndex[r];this.BindOverlayIndexData(n,a,t,e)}},this.BindOverlayIndexData=function(t,e,a,i){if(t.Script)return"function"==typeof t.Script.RequestData?void t.Script.RequestData(this,e,a):"function"==typeof t.Script.ExecuteScript?void t.Script.ExecuteScript(this,e,a):void t.Script.BindData(this,e,a)},this.GetChartPaint=function(t){var e=new Array;for(var a in this.ChartPaint)if(!(a<3)){var i=this.ChartPaint[a];i.ChartFrame==this.Frame.SubFrame[t].Frame&&e.push(i)}return e},this.CreateWindowIndex=function(t){this.WindowIndex[t].Create(this,t)},this.OnTouchFinished=function(){if(!0===this.EnableClickModel){if(1==this.ClickModel.IsShowCorssCursor&&this.TouchDrawCount>0)return;return this.ClickModel.IsShowCorssCursor=!1,void this.DrawDynamicInfo()}if(!0===this.CorssCursorTouchEnd)return void this.DrawDynamicInfo()},this.CreateExtendChart=function(t,e){var a;switch(t){case"MinuteTooltip":return a=e.Create&&"function"==typeof e.Create?e.Create():new Ce,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,e.LanguageID=this.LanguageID,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"MinutePCTooltip":return a=e.Create&&"function"==typeof e.Create?e.Create():new ce,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,e.LanguageID=this.LanguageID,a.SetOption(e),this.ExtendChartPaint.push(a),a;case"MinuteBackgroundPaint":return a=new Ie,a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,e.LanguageID=this.LanguageID,a.SetOption(e),this.ExtendChartPaint.push(a),a;default:return(a=fo.Create(t))?(a.Canvas=this.Canvas,a.ChartBorder=this.Frame.ChartBorder,a.ChartFrame=this.Frame,a.HQChart=this,a.SetOption(e),this.ExtendChartPaint.push(a),a):null}},this.SetMinuteInfo=function(t,e){this.ChartInfo=[];for(var a in t){var i=Xi.Get(t[a]);if(i){var r=i.Create();this.ChartInfo.push(r)}}1==e&&this.RequestMinuteInfoData()},this.GetChartMinuteInfo=function(){return this.ChartInfoPaint},this.CreateMinuteInfo=function(t){var e=new Bt;return e.Canvas=this.Canvas,e.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,e.ChartFrame=this.Frame.SubFrame[0].Frame,e.HQChartBorder=this.Frame.ChartBorder,e.ChartMinutePrice=this.ChartPaint[0],t&&e.SetOption&&e.SetOption(t),this.ChartInfoPaint=e,e},this.RequestMinuteInfoData=function(){if(!(this.ChartInfo.length<=0)){var t=this.GetChartMinuteInfo();t||(t=this.CreateMinuteInfo(null)),t.SourceData=this.SourceData;for(var e in this.ChartInfo)this.ChartInfo[e].RequestData(this)}},this.UpdataChartInfo=function(){var t=this.GetChartMinuteInfo();if(t){var e=new Vn.default;for(var a in this.ChartInfo){var i=this.ChartInfo[a].Data;for(var r in i){var n=i[r],o=n.Date+" "+n.Time;e.has(o)?e.get(o).Data.push(n):e.set(o,{Data:new Array(n)})}}t.Data=e}},this.RecvWindowIndex=function(t,e){var a=this.WindowIndex[t];if(a&&"function"==typeof a.RecvSubscribeData){var i=this.SourceData;a.RecvSubscribeData(e,this,t,i)}},this.UpdateWindowIndex=function(t){if(!(t<2)){var e=this.SourceData;this.BindIndexData(t,e),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw()}},this.CreateChartDrawPicture=function(t,e,a){var i=null,r=aa.GetDrawPictureByName(t);if(r&&(i=r.Create(),"ChartDrawPictureText"==i.ClassName&&(i.HQChart=this)),!i&&aa.MapIonFont.has(t)){var n=aa.MapIonFont.get(t);i=new ba,i.FontOption.Family=n.Family,i.Text=n.Text,n.Color&&(i.LineColor=n.Color)}if(!i)return!1;i.Canvas=this.Canvas,i.Status=0,i.Symbol=this.Symbol,i.Period=888888888,i.Option=this.ChartDrawOption,a&&(i.FinishedCallback=a),e&&i.SetOption(e);var o=this;return i.Update=function(){o.DrawDynamicInfo()},i.GetActiveDrawPicture=function(){return o.GetActiveDrawPicture()},this.CurrentChartDrawPicture=i,Xn.Chart.Log("[MinuteChartContainer::CreateChartDrawPicture] ",t,this.CurrentChartDrawPicture),!0},this.AddChartDrawPicture=function(t){if(!t)return null;if(t.FrameID<0||t.FrameID>=this.Frame.SubFrame.length)return null;var e=this,a=aa.GetDrawPictureByClassName(t.ClassName);if(!a)return null;var i=a.Create();return i.Canvas=this.Canvas,i.Status=10,i.Frame=this.Frame.SubFrame[t.FrameID].Frame,i.Symbol=this.Symbol,i.Period=888888888,t.Value&&(i.Value=t.Value),t.Guid&&(i.Guid=t.Guid),i.ImportStorageData&&i.ImportStorageData(t),i.SetOption(t),t.EnableUpdateXValue&&i.UpdateXValue(),i.ValueToPoint(),i.GetActiveDrawPicture=function(){return e.GetActiveDrawPicture()},"ChartDrawPictureText"===i.ClassName&&(i.IsInitialized=!0),this.ChartDrawPicture.push(i),1==t.Draw&&this.DrawDynamicInfo(),i},this.ReloadChartDrawPicture=function(){this.ChartDrawPicture=[],this.SelectChartDrawPicture&&(this.SelectChartDrawPicture.IsSelected=!1),this.SelectChartDrawPicture=null,this.CurrentChartDrawPicture=null,this.MoveOnChartDrawPicture=null,this.ChartDrawStorage&&(this.ChartDrawStorageCache=this.ChartDrawStorage.GetDrawData({Symbol:this.Symbol,Period:888888888}))},this.CreateChartDrawPictureByStorage=function(){var t=this;if(this.ChartDrawStorageCache&&!(this.ChartDrawStorageCache.length<=0)){for(var e=0;e<this.ChartDrawStorageCache.length;++e){var a=this.ChartDrawStorageCache[e];if(!(a.FrameID<0||!this.Frame.SubFrame||this.Frame.SubFrame.length<a.FrameID)){var i=aa.CreateChartDrawPicture(a);i&&(i.Canvas=this.Canvas,i.Status=10,i.Frame=this.Frame.SubFrame[a.FrameID].Frame,i.ImportStorageData&&i.ImportStorageData(a),i.ResetXValue(),i.UpdateXValue(),i.ValueToPoint(),i.GetActiveDrawPicture=function(){return t.GetActiveDrawPicture()},"ChartDrawPictureText"===i.ClassName&&(i.IsInitialized=!0),this.ChartDrawPicture.push(i))}}this.ChartDrawStorageCache=null}},this.SetSizeChange=function(t){this.Frame.SetSizeChage(t);for(var e in this.ExtendChartPaint){this.ExtendChartPaint[e].SizeChange=t}},this.SetSizeChage=this.SetSizeChange,this.GetDataIndexByPoint=function(t){var e=this.Frame;if(this.Frame.SubFrame&&this.Frame.SubFrame.length>0&&(e=this.Frame.SubFrame[0].Frame),e){var a=e.GetXData(t);return parseInt(a.toFixed(0))}},this.GetDateTimeByPoint=function(t,e){var a=this.PtInClient_V2(t,e);if(a<=0)return null;if(!this.Frame.SubFrame[0]||!this.Frame.SubFrame[0].Frame)return null;var i=this.Frame.SubFrame[0].Frame,r=this.Frame.SourceData;if(!r||!we.IsNonEmptyArray(r.Data))return null;var n=-1,o={ClientPos:a};if(1==a){var s=i.GetXData(t);n=parseInt(s.toFixed(0)),we.IsNumber(r.DataOffset)&&(n+=r.DataOffset)}else{if(!(a>=100&&a<=199))return null;var l=a-100,s=i.GetXData(t);n=parseInt(s.toFixed(0));var h=n%i.MinuteCount;o.DayIndex=l,o.DataIndex=h}if(n<0||n>=r.Data.length)return null;o.Index=n;var u=r.Data[n];return u?(o.Date=u.Date,o.Time=u.Time,o):null},this.GetSelectRectData=function(t){if(Math.abs(t.XStart-t.XEnd)<5)return!1;var e=this.PtInClient(t.XStart,t.YStart),a=this.PtInClient(t.XEnd,t.YEnd);t.StartClientPos=e,t.EndClientPos=a;var i=this.SourceData;if(!i)return!1;if(!we.IsNonEmptyArray(i.Data))return!1;var r=this.GetDataIndexByPoint(t.XStart),n=this.GetDataIndexByPoint(t.XEnd);if(Math.abs(r-n)<2)return!1;t.Data=i;var o=i.DataOffset;r+=o,n+=o,r>n?(t.Start=n,t.End=r):(t.Start=r,t.End=n);var s=i.Data.length;return t.End>=s&&(t.End=s-1),!0},this.Super_UpdateFrameMaxMin=this.UpdateFrameMaxMin,this.UpdateFrameMaxMin=function(){if(this.Super_UpdateFrameMaxMin(),1==this.DayCount){var t=this.Frame.SubFrame[1];t.Frame&&(t.Frame.XYSplit=!0)}},this.ExportMainData=function(t,e){return t.ExportMinuteData(e)},this.DisplayLatest=function(){var t=this.GetEventCallback(Kn.ON_DISPLAY_LATEST);if(t){var e={PreventDefault:!1};if(t.Callback(t,e,this),e.PreventDefault)return}this.CursorIndex=null,this.LastPoint.X=0,this.LastPoint.Y=0,this.GlobalOption.IsDisplayLatest=!0,this.DrawDynamicInfo()},this.TryClickIndexTitle=function(t,e){for(var a=0;a<this.TitlePaint.length;++a){var i=this.TitlePaint[a];if(i.IsClickTitle&&i.IsClickTitle(t,e)){var r={Point:{X:t,Y:e},Title:i.Title,FrameID:i.Frame.Identify};Xn.Chart.Log("[MinuteChartContainer::TryClickIndexTitle] click title ",r);var n=this.GetEventCallback(Kn.ON_CLICK_INDEXTITLE);return n&&n.Callback&&n.Callback(n,r,this),!0}}return!1},this.ClearSelectedXBorder=function(){if(this.GlobalOption&&this.GlobalOption.SelectedXBorder){this.GlobalOption.SelectedXBorder.Date=null}},this.DrawSelectedXBorder=function(){if(this.DayCount<=1)return null;if(!0===this.Frame.IsHScreen)return null;if(this.GlobalOption&&this.GlobalOption.SelectedXBorder){var t=this.GlobalOption.SelectedXBorder;if(we.IsPlusNumber(t.Mode)&&we.IsPlusNumber(t.Date)&&we.IsNonEmptyArray(this.DayData)){var e=null,a=t.DayIndex,i=this.Frame.ChartBorder.GetBorder(),r={Left:i.Left,Top:i.Top,Right:i.Right,Bottom:i.Bottom};r.Width=r.Right-r.Left;var n=this.Frame.SubFrame[0].Frame,o=n.XPointCount,s=n.MinuteCount,l=o/s,h=r.Width/l;if(i.DayBorder){for(var a=-1,u=0;u<this.DayData.length;++u){var C=this.DayData[u];if(C.Date==t.Date){a=this.DayData.length-1-u;break}}if(a<0)return;var t=i.DayBorder[a];if(!t)return;e={Left:t.LeftEx,Right:t.RightEx,Top:i.Bottom,Bottom:i.ChartHeight},e.Width=e.Right-e.Left,e.Height=e.Bottom-e.Top}else{for(var a=-1,u=0;u<this.DayData.length;++u){var C=this.DayData[u];if(C.Date==t.Date){a=this.DayData.length-1-u;break}}if(a<0)return;e={Left:i.Left+a*h,Width:h,Top:i.Bottom,Bottom:i.ChartHeight},e.Right=e.Left+e.Width,e.Height=e.Bottom-e.Top}n.Canvas.strokeStyle=So.SelFrameBorderColor,n.Canvas.strokeRect(p(e.Left),p(e.Top),g(e.Width),g(e.Height)-1)}}},this.PtInMulitDayMinute=function(t,e){if(this.DayCount<=1)return null;if(!0===this.Frame.IsHScreen)return null;if(!we.IsNonEmptyArray(this.DayData))return null;var a=this.Frame.ChartBorder.GetBorder(),i={Left:a.Left,Top:a.Top,Right:a.Right,Bottom:a.Bottom};if(i.Width=i.Right-i.Left,!(t>i.Left&&t<i.Right&&e>i.Top&&e<i.Bottom))return null;if(a.DayBorder)for(var r=0;r<a.DayBorder.length;++r){var n=a.DayBorder[r],o={Left:n.LeftEx,Right:n.RightEx};if(t>=o.Left&&t<=o.Right){var s=this.DayData[this.DayData.length-1-r];return s?s.Date:null}}else for(var l=this.Frame.SubFrame[0].Frame,h=l.XPointCount,u=l.MinuteCount,C=h/u,c=i.Width/C,o={Left:i.Left,Right:c+i.Left},r=0;r<C;++r){if(t>=o.Left&&t<=o.Right){var s=this.DayData[this.DayData.length-1-r];return s?s.Date:null}o.Left+=c,o.Right+=c}return null},this.DrawTooltipDialog=function(){this.DialogTooltip&&this.UpdateTooltipDialog()},this.UpdateTooltipDialog=function(){if(!this.DialogTooltip)return!1;if(!this.ChartCorssCursor)return!1;var t=null,e=0;if(this.ChartCorssCursor.ClientPos>=0){var a=this.TitlePaint[0];if(a&&a.PointInfo){var i=a.PointInfo;if(2==i.ClientPos||3==i.ClientPos||i.ClientPos>=200&&i.ClientPos<=299||i.ClientPos>=300&&i.ClientPos<=399){var r=a.GetCurrentAuctionData();if(!r)return!1;t={Type:1,Data:r}}else{var n=a.GetCurrentKLineData();if(!n)return!1;t={Type:0,Data:n}}}}else{if(!this.SourceData||!we.IsNonEmptyArray(this.SourceData.Data))return!1;var n=this.SourceData.Data[this.SourceData.Data.length-1],o={Symbol:this.Symbol,Date:n.Date,Time:n.Time};if(!this.DialogTooltip.IsEqualDataID(o))return!1;t={Type:0,Data:n},e=2}var s={DataType:e,ClientPos:this.ChartCorssCursor.ClientPos,IsShowCorss:this.ChartCorssCursor.IsShowCorss,MinItem:t,Symbol:this.Symbol,Name:this.Name,LastValue:this.ChartCorssCursor.LastValue};return this.DialogTooltip.Update(s),!0},this.DrawSelectRectDialog=function(t){this.DialogSelectRect&&this.UpdateSelectRectDialog(t)},this.UpdateSelectRectDialog=function(t){if(!this.DialogSelectRect)return!1;var e,a,i=t.data;if(i&&we.IsNumber(i.X)&&we.IsNumber(i.Y)){var r=(C(),this.UIElement.getBoundingClientRect()),n=m();e=i.X,a=i.Y,e+=r.left+n.Left,a+=r.top+n.Top}var o={Symbol:this.Symbol,Name:this.Name,SelectData:i.SelectData,X:e,Y:a,e:t};this.DialogSelectRect.Update(o)}}function Si(t){this.newMethod=Ti,this.newMethod(t),delete this.newMethod,this.ClassName="CustomKLineChartContainer",this.CustomKLineApiUrl=So.Domain+"/API/IndexCalculate",this.CustomStock,this.QueryDate={Start:20180101,End:20180627},this.RequestHistoryData=function(){var t=this;this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.Draw(),n.HttpRequest({url:this.CustomKLineApiUrl,data:{stock:t.CustomStock,Name:t.Symbol,date:{startdate:t.QueryDate.Start,enddate:t.QueryDate.End}},type:"post",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvHistoryData(e)}})},this.RecvHistoryData=function(t){var e=Ti.JsonDataToHistoryData(t),a=new tt;a.Data=e,a.DataType=0;var i=new tt;if(i.Data=e,i.Right=this.Right,i.Period=this.Period,i.DataType=0,i.Right>0){var r=i.GetRightData(i.Right,{AlgorithmType:this.RightFormula});i.Data=r}if(tt.IsDayPeriod(this.Period,!1)){var n=a.GetPeriodData(i.Period);i.Data=n}this.SourceData=a,this.Name=t.name,this.BindMainData(i,this.PageSize);for(var o=0;o<this.Frame.SubFrame.length;++o)this.BindIndexData(o,i);this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Frame.SetSizeChage(!0),this.Draw()}}function xi(t,e){!0===e?(this.newMethod=yi,this.newMethod(t),delete this.newMethod):(this.newMethod=Ti,this.newMethod(t),delete this.newMethod),this.BuySellPaint,this.TrainDataCount=300,this.TrainStartDate,this.AutoRunTimer=null,this.BuySellData=[],this.TrainCallback,this.DragMode=1,this.IsAutoUpdate=!1,this.KLineSourceData,this.TrainInfo={Start:{},End:{}},this.Super_RecvFlowCapitalData=this.RecvFlowCapitalData,this.CreateBuySellPaint=function(){var t=new oe;t.Canvas=this.Canvas,t.ChartBorder=this.Frame.SubFrame[0].Frame.ChartBorder,t.ChartFrame=this.Frame.SubFrame[0].Frame,t.Name="KLine-Train-BuySell",this.ChartPaintEx[0]=t},this.GetKDataIndexByDateTime=function(t,e){if(!e||!t)return-1;for(var a=0;a<t.length;++a){var i=t[a];if(tt.IsMinutePeriod(this.Period,!0)){if(we.IsNumber(this.TrainStartDate.Time)){if(i.Date>=this.TrainStartDate.Date&&i.Time>=this.TrainStartDate.Time)return a}else if(i.Date>=this.TrainStartDate.Date)return a}else if((tt.IsDayPeriod(this.Period,!0)||tt.IsTickPeriod(this.Period))&&i.Date>=this.TrainStartDate.Date)return a}return-1},this.AfterBindMainData=function(t){this.ChartPaintEx[0]||this.CreateBuySellPaint();var e=this.ChartPaint[0].Data;this.ChartPaintEx[0].Data=e;var a=e.Data[e.Data.length-1];this.TrainInfo.LastShowData=a,this.TrainInfo.LastData=this.SourceData.Data[this.SourceData.Data.length-1],"Update"!=t&&this.UpdateTrainUICallback("å¼å§")},this.BeforeBindMainData=function(t){if("Update"!=t){this.KLineSourceData=new tt,this.KLineSourceData.Data=this.SourceData.Data.slice(0);var e=this.SourceData.Data.length,a=e-this.TrainDataCount-20,i=this.GetKDataIndexByDateTime(this.SourceData.Data,this.TrainStartDate);i>=0&&(a=i+1,e-a<this.TrainDataCount&&(this.TrainDataCount=e-a));var r=a-1,n=this.SourceData.Data[r];this.TrainInfo.Start.Index=r,this.TrainInfo.Start.Date=n.Date,this.TrainInfo.Start.Time=n.Time,this.TrainInfo.End.Index=r,this.TrainInfo.End.Date=n.Date,this.TrainInfo.End.Time=n.Time,this.TrainInfo.LastData=n,this.SourceData.Data.length=a}},this.Run=function(t){if(!(this.AutoRunTimer||this.TrainDataCount<=0)){var e=this;this.AutoRunTimer=setInterval(function(){e.MoveNextKLineData(t)||clearInterval(e.AutoRunTimer)},1e3)}},this.MoveNextKLineData=function(t){if(this.TrainDataCount<=0)return!1;var e=1;t&&t.Step>1&&(e=t.Step);for(var a=0,i=0;i<e;++i){var r=this.TrainInfo.End.Index+1;if(r>=this.KLineSourceData.Data.length)break;var n=this.KLineSourceData.Data[r];if(this.SourceData.Data.push(n),this.TrainInfo.End.Index=r,this.TrainInfo.End.Date=n.Date,this.TrainInfo.End.Time=n.Time,--this.TrainDataCount,++a,this.TrainDataCount<=0)break}if(0==a)return!1;var o=this.Frame.GetCurrentPageSize();return we.IsNumber(o)&&(this.PageSize=o-this.RightSpaceCount),t&&t.PageSize>0&&(this.PageSize=t.PageSize),this.Update(),this.TrainDataCount<=0?(this.FinishTrainData(),this.UpdateTrainUICallback("ç»æ"),!1):(this.UpdateTrainUICallback("è®­ç»ä¸­"),!0)},this.UpdateTrainUICallback=function(t){if(this.mapEvent.has(Kn.RECV_TRAIN_MOVE_STEP)){var e=this.mapEvent.get(Kn.RECV_TRAIN_MOVE_STEP);if(e.Callback){var a={TrainDataCount:this.TrainDataCount,BuySellData:this.BuySellData,KLine:{Start:{Index:this.TrainInfo.Start.Index,Date:this.TrainInfo.Start.Date},End:{Index:this.TrainInfo.End.Index,Date:this.TrainInfo.End.Date}},LastData:this.TrainInfo.LastData,LastShowData:this.TrainInfo.LastShowData};we.IsNumber(this.TrainInfo.Start.Time)&&(a.KLine.Start.Time=this.TrainInfo.Start.Time),we.IsNumber(this.TrainInfo.End.Time)&&(a.KLine.End.Time=this.TrainInfo.End.Time),t&&(a.Description=t),this.TrainDataCount<=0&&(a.Symbol=this.Symbol,a.Name=this.Name),e.Callback(e,a,this)}}},this.FinishTrainData=function(){Xn.Chart.Log("[KLineTrainChartContainer::FinishTrainData] trian end ")},this.Stop=function(){null!=this.AutoRunTimer&&clearInterval(this.AutoRunTimer),this.AutoRunTimer=null},this.BuyOrSell=function(t,e){if(!this.TrainInfo.LastShowData)return!1;var a=this.ChartPaintEx[0];if(!a)return!1;var i=this.ChartPaint[0].Data;if(!i||i.Data.length<=0)return!1;var r=i.Data.length-1,n={Date:this.TrainInfo.End.Date,Time:this.TrainInfo.End.Time,Price:t.Price,Vol:t.Vol,Op:0,ID:t.ID};1==t.Op&&(n.Op=1);var o=r;n.Key=o,this.BuySellData.push(n),a.AddTradeItem(n),1==e&&this.Draw()},this.RestartTrain=function(t){Xn.Chart.Log("[KLineTrainChartContainer::RestartTrain] option ",t),this.TrainInfo={Start:{},End:{}},this.BuySellData=[],this.KLineSourceData=null;var e=this.ChartPaintEx[0];e&&(e.Data=null,e.ClearTradeData()),t.Symbol&&(this.Symbol=t.Symbol),we.IsNumber(t.Period)&&(this.Period=t.Period),we.IsNumber(t.Right)&&(this.Right=t.Right),t.Train&&(t.Train.DataCount>1&&(this.TrainDataCount=t.Train.DataCount),t.Train.DateTime&&(this.TrainStartDate=t.Train.DateTime));var a=this.Symbol;this.ChangeSymbol(a)},this.RecvFlowCapitalData=function(t){if(t.stock&&1==t.stock.length){var e=t.stock[0],a=new Array;for(var i in e.stockday){var r=e.stockday[i],n=new Z;n.Date=r.date;var o=r.capital;o&&(o.a>0&&(n.Value=o.a,a.push(n)))}if(tt.IsMinutePeriod(this.Period,!0)){var s=this.SourceData.GetMinuteFittingFinanceData(a);for(var l in this.SourceData.Data){var r=this.SourceData.Data[l];s[l]&&(r.FlowCapital=s[l].Value)}var h=this.ChartPaint[0].Data,u=new tt;if(u.Data=this.SourceData.Data,tt.IsMinutePeriod(h.Period,!1)){var C=u.GetPeriodData(h.Period);u.Data=C}h.Data=u.Data;var s=this.KLineSourceData.GetMinuteFittingFinanceData(a);for(var c in this.KLineSourceData.Data){var r=this.KLineSourceData.Data[c];s[c]&&(r.FlowCapital=s[c].Value)}}else{var s=this.SourceData.GetFittingFinanceData(a);for(var f in this.SourceData.Data){var r=this.SourceData.Data[f];s[f]&&(r.FlowCapital=s[f].Value)}var h=this.ChartPaint[0].Data,u=new tt;if(u.Data=this.SourceData.Data,h.Right>0){var d=u.GetRightData(h.Right,{AlgorithmType:this.RightFormula});u.Data=d}if(tt.IsDayPeriod(h.Period,!1)){var C=u.GetPeriodData(h.Period);u.Data=C}h.Data=u.Data;var s=this.KLineSourceData.GetFittingFinanceData(a);for(var D in this.KLineSourceData.Data){var r=this.KLineSourceData.Data[D];s[D]&&(r.FlowCapital=s[D].Value)}}this.FlowCapitalReady=!0;var m=!1;for(var p in this.ExtendChartPaint){var r=this.ExtendChartPaint[p];if("StockChip"==r.ClassName){m=!0;break}}m&&this.Draw()}},this.AutoUpdate()}function bi(t,e){this.newMethod=xi,this.newMethod(t,e),delete this.newMethod,this.IsHScreen=e,this.IsZoomLockRight=!0,this.RightSpaceCount=0,this.RecvFlowCapitalData=function(t){this.Super_RecvFlowCapitalData(t)},this.BeforeBindMainData=function(t){},this.UpdateLastDataIcon=function(){if(this.ChartPaintEx[0]){this.ChartPaintEx[0].LastDataIndex=this.TrainInfo.End.Index}},this.AfterBindMainData=function(t){if(this.ChartPaintEx[0]||(this.CreateBuySellPaint(),this.ChartPaintEx[0].LastDataDrawType=1),"Update"!=t){var e=this.ChartOperator_Temp_GetHistroyData();if(!e)return!1;var a=e.Data.length,i=a-this.TrainDataCount-20,r=this.Frame.SubFrame[0].Frame.XPointCount,n=this.GetKDataIndexByDateTime(e.Data,this.TrainStartDate);n>=0&&(i=n+1,a-i<this.TrainDataCount&&(this.TrainDataCount=a-i));var o=i-r;e.DataOffset=o;var s=i-1,l=e.Data[s];this.TrainInfo.LastShowData=l,this.TrainInfo.LastData=l,this.TrainInfo.Start.Index=s,this.TrainInfo.Start.Date=l.Date,this.TrainInfo.Start.Time=l.Time,this.TrainInfo.End.Index=s,this.TrainInfo.End.Date=l.Date,this.TrainInfo.End.Time=l.Time,this.UpdateLastDataIcon(),this.UpdateTrainUICallback("å¼å§")}},this.Super_UpdataDataoffset=this.UpdataDataoffset,this.UpdataDataoffset=function(){this.Super_UpdataDataoffset();var t=this.ChartPaint[0].Data;this.ChartPaintEx[0].Data=t},this.MoveNextKLineData=function(t){if(this.TrainDataCount<=0)return!1;var e=this.ChartOperator_Temp_GetHistroyData();if(!e)return!1;var a=1;t&&t.Step>1&&(a=t.Step);for(var i=e.Data.length,r=0,n=0;n<a;++n){var o=this.TrainInfo.End.Index+1;if(o>=i)break;var s=e.Data[o];if(this.TrainInfo.End.Index=o,this.TrainInfo.End.Date=s.Date,this.TrainInfo.End.Time=s.Time,--this.TrainDataCount,++r,this.TrainDataCount<=0)break}if(0==r)return!1;this.TrainInfo.LastShowData=s,this.TrainInfo.LastData=s;var l=this.TrainInfo.End.Index,h=this.Frame.SubFrame[0].Frame.XPointCount,u=l-h+1;return e.DataOffset=u,this.UpdateLastDataIcon(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw(),this.TrainDataCount<=0?(this.FinishTrainData(),this.UpdateTrainUICallback("ç»æ"),!1):(this.UpdateTrainUICallback("è®­ç»ä¸­"),!0)},this.BuyOrSell=function(t,e){if(!this.TrainInfo.LastShowData)return!1;var a=this.ChartPaintEx[0];if(!a)return!1;var i=this.ChartPaint[0].Data;if(!i||i.Data.length<=0)return!1;var r=this.TrainInfo.End.Index,n={Date:this.TrainInfo.End.Date,Time:this.TrainInfo.End.Time,Price:t.Price,Vol:t.Vol,Op:0,ID:t.ID};1==t.Op&&(n.Op=1);var o=r;n.Key=o,this.BuySellData.push(n),a.AddTradeItem(n),1==e&&this.Draw()},this.DataMove=function(t,e){var a=this.GetMoveOneStepWidth(),i=t;if((t=parseInt(t/a))<=0)return!1;var r=this.ChartOperator_Temp_GetHistroyData();if(!r)return!1;var n=0;if(!(n=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount))return!1;if(this.Frame.SubFrame&&this.Frame.SubFrame.length>0&&this.Frame.SubFrame[0].Frame){var o=this.Frame.SubFrame[0].Frame;(o.DataWidth<=1||o.DistanceWidth<=1)&&we.IsPlusNumber(this.StepPixel)&&(t=i*this.StepPixel)}if(e){if(this.RightSpaceCount>0){if(n+r.DataOffset>=r.Data.length+this.RightSpaceCount-1)return!1;r.DataOffset+=t,r.DataOffset+n>=r.Data.length+this.RightSpaceCount&&(r.DataOffset=r.Data.length-(n-this.RightSpaceCount))}else{var s=this.TrainInfo.End.Index+1;if(n+r.DataOffset>=s)return!1;r.DataOffset+=t,r.DataOffset+n>=s&&(r.DataOffset=s-n)}return!0}return!(r.DataOffset<=0)&&(r.DataOffset-=t,r.DataOffset<0&&(r.DataOffset=0),!0)},this.DataMoveRight=function(){var t=this.ChartOperator_Temp_GetHistroyData();if(!t)return!1;var e=0;if(!(e=this.Frame.XPointCount?this.Frame.XPointCount:this.Frame.SubFrame[0].Frame.XPointCount))return!1;var a=this.TrainInfo.End.Index+1;return!(e+t.DataOffset>=a)&&(++t.DataOffset,!0)}}function yi(t){this.newMethod=Ti,this.newMethod(t),delete this.newMethod,this.ClassName="KLineChartHScreenContainer",this.OnMouseMove=function(t,e,a,i){this.LastPoint.X=t,this.LastPoint.Y=e,this.CursorIndex=this.Frame.GetXData(e);var r={ParentFunction:"OnMouseMove",Point:{X:t,Y:e},IsPhone:!0===i};this.DrawDynamicInfo(r)},t.onmousedown=function(e){if(this.JSChartContainer&&0!=this.JSChartContainer.DragMode){var a=C();if(this.JSChartContainer.TryClickLock){var i=(e.clientX-this.getBoundingClientRect().left)*a,r=(e.clientY-this.getBoundingClientRect().top)*a;if(this.JSChartContainer.TryClickLock(i,r))return}var n={Click:{},LastMove:{}};n.Click.X=e.clientX,n.Click.Y=e.clientY,n.LastMove.X=e.clientX,n.LastMove.Y=e.clientY,this.JSChartContainer.MouseDrag=n,document.JSChartContainer=this.JSChartContainer,this.JSChartContainer.SelectChartDrawPicture=null,t.ondblclick=function(t){var e=t.clientX-this.getBoundingClientRect().left,a=t.clientY-this.getBoundingClientRect().top;this.JSChartContainer&&this.JSChartContainer.OnDoubleClick(e,a,t)},document.onmousemove=function(t){if(this.JSChartContainer&&(!this.JSChartContainer.ChartSplashPaint||1!=this.JSChartContainer.ChartSplashPaint.IsEnableSplash)){var e=this.JSChartContainer.MouseDrag;if(e){var a=Math.abs(e.LastMove.Y-t.clientY);if(1==this.JSChartContainer.DragMode){if(a<5)return;if(a<this.JSChartContainer.GetMoveOneStepWidth())return;var i=!0;e.LastMove.Y<t.clientY&&(i=!1),this.JSChartContainer.DataMove(a,i)&&(this.JSChartContainer.UpdataDataoffset(),this.JSChartContainer.UpdatePointByCursorIndex(),this.JSChartContainer.UpdateFrameMaxMin(),this.JSChartContainer.ResetFrameXYSplit(),this.JSChartContainer.Draw()),e.LastMove.X=t.clientX,e.LastMove.Y=t.clientY}}}},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null,this.JSChartContainer.MouseDrag=null,this.JSChartContainer.CurrentChartDrawPicture=null,this.JSChartContainer=null}}},this.OnTouchStart=function(e){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){this.IsPress=!1,this.PhonePinch=null,this.IsOnTouch=!0,this.TouchDrawCount=0,this.StopDragTimer();var a=this.IsSingleTouch(e);if(e.cancelable&&e.preventDefault(),this.IsPhoneDragging(e)){var i=this.GetToucheData(e,!1),r=this.PointAbsoluteToRelative(i[0].clientX,i[0].clientY,!0);if(this.TryClickLock||this.TryClickIndexTitle){var n=r.X,o=r.Y;if(this.TryClickLock&&this.TryClickLock(n,o))return;if(this.TryClickIndexTitle&&this.TryClickIndexTitle(n,o))return}if(this.ClickFrameButton){var s=this.Frame.PtInButtons(r.X,r.Y);if(s)return void this.ClickFrameButton(s,e)}this.EnableVerticalDrag&&(this.VerticalDrag={IsDrag:!1},this.Frame.PtInFrameVertical(r.X,r.Y)&&(this.VerticalDrag.IsDrag=!0));var l=!0;this.ChartDrawOption.IsLockScreen?l=!1:this.DragMode==Jn.CLICK_TOUCH_MODE_ID?1==this.TouchStatus.CorssCursorShow&&(l=!1):this.DragMode==Jn.DISABLE_DRAG_ID?l=!1:a||(l=!1),this.VerticalDrag&&(l=!1);var h={Click:{},LastMove:{}};if(h.Click.X=i[0].clientX,h.Click.Y=i[0].clientY,h.LastMove.X=i[0].clientX,h.LastMove.Y=i[0].clientY,this.MouseDrag=h,this.PhoneTouchInfo={Start:{X:i[0].clientX,Y:i[0].clientY},End:{X:i[0].clientX,Y:i[0].clientY}},this.SelectChartDrawPicture&&(this.SelectChartDrawPicture.IsSelected=!1),this.SelectChartDrawPicture=null,this.CurrentChartDrawPicture){return 2==this.CurrentChartDrawPicture.Status?this.SetChartDrawPictureThirdPoint(h.Click.X,h.Click.Y,!0):(this.SetChartDrawPictureFirstPoint(h.Click.X,h.Click.Y,!0),this.FinishChartDrawPicturePoint()&&this.DrawDynamicInfo({Corss:!1,Tooltip:!1})),void(e.cancelable&&e.preventDefault())}var u={};C();if(u.X=i[0].clientX-t.getBoundingClientRect().left,u.Y=i[0].clientY-t.getBoundingClientRect().top,this.GetChartDrawPictureByPoint(u)){u.ChartDrawPicture.Status=20,u.ChartDrawPicture.ValueToPoint(),u.ChartDrawPicture.MovePointIndex=u.PointIndex,u.ChartDrawPicture.IsSelected=!0,this.CurrentChartDrawPicture=u.ChartDrawPicture,this.SelectChartDrawPicture=u.ChartDrawPicture;var c=this.GetEventCallback(Kn.ON_CLICK_DRAWPICTURE);if(c&&c.Callback){var f={DrawPicture:u.ChartDrawPicture};c.Callback(c,f,this)}return void(e.cancelable&&e.preventDefault())}if(l){var d=this;this.DragTimer=setTimeout(function(){if(d.IsPress=!1,h.Click.X==h.LastMove.X&&h.Click.Y==h.LastMove.Y){d.MouseDrag;d.MouseDrag=null,d.MoveCorssCursor(h.Click,e)}},d.PressTime)}this.ChartDrawOption.IsLockScreen?this.MouseDrag=null:this.DragMode==Jn.CLICK_TOUCH_MODE_ID||(this.DragMode==Jn.DISABLE_DRAG_ID?(this.MouseDrag=null,this.MoveCorssCursor(h.Click,e)):this.VerticalDrag?this.VerticalDrag.IsDrag||this.MoveCorssCursor(h.Click,e):this.IsClickShowCorssCursor&&this.MoveCorssCursor(h.Click,e))}else if(this.IsPhonePinching(e)){var D={Start:{},Last:{}},i=this.GetToucheData(e,!1);D.Start={X:i[0].pageX,Y:i[0].pageY,X2:i[1].pageX,Y2:i[1].pageY},D.Last={X:i[0].pageX,Y:i[0].pageY,X2:i[1].pageX,Y2:i[1].pageY},this.PhonePinch=D,this.SelectChartDrawPicture=null}this.TouchEvent({EventID:Kn.ON_PHONE_TOUCH,FunctionName:"OnTouchStart"},e)}},this.OnTouchMove=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){t.cancelable&&t.preventDefault();var e=this.GetToucheData(t,!1);if(this.IsPhoneDragging(t)){var a=this.MouseDrag;if(null==a)this.ChartDrawOption.IsLockScreen||this.MoveCorssCursor({X:e[0].clientX,Y:e[0].clientY},t);else{var i=Math.abs(a.LastMove.Y-e[0].clientY),r=Math.abs(a.LastMove.X-e[0].clientX),n=this.DragMode==Jn.CLICK_TOUCH_MODE_ID&&1==this.TouchStatus.CorssCursorShow;if(this.VerticalDrag&&(n=!0!==this.VerticalDrag.IsDrag),this.CurrentChartDrawPicture){var o=this.CurrentChartDrawPicture;if(1==o.Status||2==o.Status){if(i<5&&r<5)return;this.SetChartDrawPictureSecondPoint(e[0].clientX,e[0].clientY,!0)&&this.DrawDynamicInfo()}else if(3==o.Status)this.SetChartDrawPictureThirdPoint(e[0].clientX,e[0].clientY,!0)&&this.DrawDynamicInfo();else if(20==o.Status){if(i<5&&r<5)return;this.MoveChartDrawPicture(e[0].clientX-a.LastMove.X,e[0].clientY-a.LastMove.Y,!0)&&this.DrawDynamicInfo()}a.LastMove.X=e[0].clientX,a.LastMove.Y=e[0].clientY}else if(n){this.MouseDrag;this.MouseDrag=null,this.MoveCorssCursor(a.Click,t)}else if(1==this.DragMode||0==n){if(i<5)return;var s=this.GetMoveOneStepWidth();if(i<s)return;if(this.EnableVerticalDrag){if(!this.VerticalDrag)return;if(!this.VerticalDrag.IsDrag)return}var l=!0;a.LastMove.Y<e[0].clientY&&(l=!1),this.DataMove(i,l)?(this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.ResetFrameXYSplit(),this.Draw(),this.OnKLinePageChange("OnTouchMove")):this.DragDownloadData&&this.DragDownloadData(),a.LastMove.X=e[0].clientX,a.LastMove.Y=e[0].clientY}}this.PhoneTouchInfo&&(this.PhoneTouchInfo.End.X=e[0].clientX,this.PhoneTouchInfo.End.Y=e[0].clientY)}else if(this.IsPhonePinching(t)){if(this.DragMode==Jn.DISABLE_DRAG_ID)return;var h=this.PhonePinch;if(!h)return;var u=Math.abs(e[0].pageX-e[1].pageX),C=Math.abs(h.Last.X-h.Last.X2),c=u-C;if(Math.abs(c)<5)return;if(c>0){var f={};if(f.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomUp(f))return;this.CursorIndex=f.Index,this.UpdatePointByCursorIndex(),this.UpdataDataoffset(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("OnTouchMove")}else{var f={};if(f.Index=parseInt(Math.abs(this.CursorIndex-.5).toFixed(0)),!this.Frame.ZoomDown(f))return;this.CursorIndex=f.Index,this.UpdataDataoffset(),this.UpdatePointByCursorIndex(),this.UpdateFrameMaxMin(),this.Draw(),this.ShowTooltipByKeyDown(),this.OnKLinePageChange("OnTouchMove")}h.Last={X:e[0].pageX,Y:e[0].pageY,X2:e[1].pageX,Y2:e[1].pageY}}}},this.OnTouchEnd=function(t){if(Xn.Chart.Log("[KLineChartHScreenContainer:OnTouchEnd]",t),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){if(this.CurrentChartDrawPicture){var e=this.CurrentChartDrawPicture;2==e.Status||1==e.Status||3==e.Status?(e.PointStatus=e.Status,this.FinishChartDrawPicturePoint()?this.DrawDynamicInfo():!1):20==e.Status&&this.FinishMoveChartDrawPicture()&&this.DrawDynamicInfo()}this.IsOnTouch=!1,this.VerticalDrag=null,this.StopDragTimer(),this.TouchEvent({EventID:Kn.ON_PHONE_TOUCH,FunctionName:"OnTouchEnd"},t),this.OnTouchFinished(),this.TouchDrawCount=0}},this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new Pe,this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.StringFormatX=go.Create("CorssCursor_XStringFormat"),this.ChartCorssCursor.StringFormatX.LanguageID=this.LanguageID,this.ChartCorssCursor.StringFormatY=go.Create("CorssCursor_YStringFormat"),this.ChartCorssCursor.StringFormatY.LanguageID=this.LanguageID,this.ChartCorssCursor.StringFormatY.ExtendChartPaint=this.ExtendChartPaint,this.ChartCorssCursor.GetEventCallback=function(t){return e.GetEventCallback(t)},this.ChartSplashPaint=new _e,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.HQChart=this,this.Frame=new W,this.Frame.ChartBorder=new M,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartCorssCursor.Frame=this.Frame,this.ChartSplashPaint.Frame=this.Frame,this.CreateChildWindow(t),this.CreateMainKLine();for(var a in this.Frame.SubFrame){var i=new ea;i.Frame=this.Frame.SubFrame[a].Frame,i.Canvas=this.Canvas,i.LanguageID=this.LanguageID,i.GetEventCallback=function(t){return e.GetEventCallback(t)},i.SelectedChart=this.SelectedChart,this.TitlePaint.push(i)}this.UIElement.addEventListener("keydown",f,!0)},this.CreateChildWindow=function(t){for(var e=this,a=0;a<t;++a){var i=new M;i.UIElement=this.UIElement;var r=$n.Create("KLineHScreenFrame",{ID:a});if(r.Canvas=this.Canvas,r.GetExtraCanvas=function(t){return e.GetExtraCanvas(t)},r.ChartBorder=i,r.Identify=a,r.RightSpaceCount=this.RightSpaceCount,r.HorizontalMax=20,r.HorizontalMin=10,0==a){r.YSplitOperator=new Fe,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("price"),r.YSplitOperator.FrameSplitData2=this.FrameSplitData.get("double"),r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)};var n=C();i.TopSpace=12*n,i.BottomSpace=12*n}else r.YSplitOperator=new Me,r.YSplitOperator.LanguageID=this.LanguageID,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double");r.YSplitOperator.Frame=r,r.YSplitOperator.ChartBorder=i,r.XSplitOperator=new Le,r.XSplitOperator.Frame=r,r.XSplitOperator.ChartBorder=i,r.XSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},a!=t-1&&(r.XSplitOperator.ShowText=!1);for(var o=r.HorizontalMin;o<=r.HorizontalMax;o+=1)r.HorizontalInfo[o]=new F,r.HorizontalInfo[o].Value=o,0==a&&o==r.HorizontalMin||(r.HorizontalInfo[o].Message[1]=o.toString(),r.HorizontalInfo[o].Font="14px å¾®è½¯éé»");var s=new H;r.FrameData.SubFrameItem=s,s.Frame=r,s.Height=0==a?20:10,this.Frame.SubFrame[a]=s}}}function Ei(t){this.newMethod=Ii,this.newMethod(t),delete this.newMethod,this.ClassName="MinuteChartHScreenContainer",this.OnMouseMove=function(t,e,a,i){this.LastPoint.X=t,this.LastPoint.Y=e,this.CursorIndex=this.Frame.GetXData(e);var r=this.PtInClient(t,e),n={ParentFunction:"OnMouseMove",Point:{X:t,Y:e},IsPhone:!0===i,ClientPos:r};this.DrawDynamicInfo(n)},this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new Pe,this.ChartCorssCursor.PtInClient=function(t,a){return e.PtInClient(t,a)},this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.StringFormatX=go.Create("CorssCursor_Minute_XStringFormat"),this.ChartCorssCursor.StringFormatX.GetEventCallback=function(t){return e.GetEventCallback(t)},this.ChartCorssCursor.StringFormatY=go.Create("CorssCursor_YStringFormat"),this.ChartCorssCursor.StringFormatY.GetEventCallback=function(t){return e.GetEventCallback(t)},this.ChartCorssCursor.CallAcutionXOperator=new Oe,this.ChartCorssCursor.GetEventCallback=function(t){return e.GetEventCallback(t)},this.ChartSplashPaint=new _e,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.HQChart=this,this.Frame=new W,this.Frame.ChartBorder=new M,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=25,this.Frame.ChartBorder.Left=50,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartCorssCursor.Frame=this.Frame,this.ChartSplashPaint.Frame=this.Frame,this.CreateChildWindow(t),this.CreateMainKLine();for(var a in this.Frame.SubFrame){var i=new ea;i.Frame=this.Frame.SubFrame[a].Frame,i.Canvas=this.Canvas,i.LanguageID=this.LanguageID,i.GetEventCallback=function(t){return e.GetEventCallback(t)},i.SelectedChart=this.SelectedChart,this.TitlePaint.push(i)}this.ChartCorssCursor.StringFormatX.Frame=this.Frame.SubFrame[0].Frame,this.ChartCorssCursor.StringFormatY.Frame=this.Frame,this.ChartCorssCursor.CallAcutionXOperator.Frame=this.Frame.SubFrame[0].Frame,this.UIElement.addEventListener("keydown",f,!0)},this.CreateChildWindow=function(t){for(var e=this,a=0;a<t;++a){var i=new M;i.UIElement=this.UIElement;var r=new O;r.Canvas=this.Canvas,r.ChartBorder=i,r.Identify=a,a<2&&(r.ChartBorder.TitleHeight=0),r.XPointCount=243,r.HQChart=this,r.GetEventCallback=function(t){return e.GetEventCallback(t)};var n=[9,8,7,6,5,4,3,2,1];r.HorizontalMax=n[0],r.HorizontalMin=n[n.length-1],0==a?(r.YSplitOperator=new Ne,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("price"),r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},r.YSplitOperator.DayOffset=this.DayOffset,r.YSplitOperator.HQChart=this):(r.YSplitOperator=new Me,r.YSplitOperator.LanguageID=this.LanguageID,r.YSplitOperator.FrameSplitData=this.FrameSplitData.get("double"),r.YSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)}),r.YSplitOperator.Frame=r,r.YSplitOperator.ChartBorder=i,r.XSplitOperator=new Re,r.XSplitOperator.Frame=r,r.XSplitOperator.ChartBorder=i,r.XSplitOperator.DayOffset=this.DayOffset,r.XSplitOperator.GetEventCallback=function(t){return e.GetEventCallback(t)},a!=t-1&&(r.XSplitOperator.ShowText=!1),r.XSplitOperator.Operator();for(var o in n)r.HorizontalInfo[o]=new F,r.HorizontalInfo[o].Value=n[o],0==a&&o==r.HorizontalMin||(r.HorizontalInfo[o].Message[1]=n[o].toString(),r.HorizontalInfo[o].Font="14px å¾®è½¯éé»");var s=new H;r.FrameData.SubFrameItem=s,s.Frame=r,s.Height=0==a?20:10,this.Frame.SubFrame[a]=s}}}function wi(t){this.newMethod=u,this.newMethod(t),delete this.newMethod,this.ClassName="DepthChartContainer",this.Symbol,this.MapAsk=new Vn.default,this.MapBid=new Vn.default,this.IsAutoUpdate=!1,this.AutoUpdateFrequency=3e4,this.AutoUpdateTimer,this.DefaultZoom=.8,this.MaxVolRate=1.1,this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.ChartCorssCursor=new Be,this.ChartCorssCursor.Canvas=this.Canvas,this.ChartCorssCursor.HQChart=this,this.ChartSplashPaint=new _e,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.Frame=new U,this.Frame.ChartBorder=new M,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.ChartBorder.TitleHeight=0,this.Frame.Canvas=this.Canvas,this.Frame.Identify=0;var a=new Me;a.FrameSplitData=this.FrameSplitData.get("double"),a.LanguageID=this.LanguageID,a.Frame=this.Frame,a.SplitCount=5,a.LineType=3,a.IgnoreYValue=[0],a.ChartBorder=this.Frame.ChartBorder,a.GetEventCallback=function(t){return e.GetEventCallback(t)},this.Frame.YSplitOperator=a;var i=new Ae;i.Frame=this.Frame,i.ChartBorder=this.Frame.ChartBorder,i.LanguageID=this.LanguageID,i.LineType=3,i.GetEventCallback=function(t){return e.GetEventCallback(t)},this.Frame.XSplitOperator=i,this.ChartCorssCursor&&(this.ChartCorssCursor.Frame=this.Frame),this.ChartSplashPaint.Frame=this.Frame;var r=new se;r.Canvas=this.Canvas,r.ChartBorder=this.Frame.ChartBorder,r.ChartFrame=this.Frame,r.Name="æ·±åº¦å¾",this.ChartPaint.push(r);var n=!0;t&&!1===t.Wheel&&(n=!1,Xn.Chart.Log("[DepthChartContainer::Create] not register wheel event.")),this.UIElement.addEventListener("keydown",function(t){e.OnKeyDown(t)},!0),n&&this.UIElement.addEventListener("wheel",function(t){e.OnWheel(t)},!0)},this.OnWheel=function(t){Xn.Chart.Log("[KLineChartContainer::OnWheel]",t);var e=t.clientX-this.UIElement.getBoundingClientRect().left,a=t.clientY-this.UIElement.getBoundingClientRect().top,i=!1;this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),i=this.Canvas.isPointInPath(e,a);var r=t.wheelDelta;we.IsObjectExist(t.wheelDelta)||(r=-.01*t.deltaY);var n=!0;this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Wheel&&(n=!1),i&&r<0&&n?this.Frame.ZoomDown()&&(this.UpdateFrameMaxMin(),this.Draw()):i&&r>0&&n&&this.Frame.ZoomUp()&&(this.UpdateFrameMaxMin(),this.Draw()),t.preventDefault?t.preventDefault():t.returnValue=!1},this.UIOnMouseDown=function(t){},this.OnTouchStart=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){this.IsOnTouch=!0,this.TouchDrawCount=0,this.PhonePinch=null;var e=this.IsSingleTouch(t);if(0!=this.EnableScrollUpDown&&e||t.cancelable&&t.preventDefault(),this.IsPhoneDragging(t)){var a={Click:{},LastMove:{}},i=this.GetToucheData(t,this.IsForceLandscape);a.Click.X=i[0].clientX,a.Click.Y=i[0].clientY,a.LastMove.X=i[0].clientX,a.LastMove.Y=i[0].clientY,this.MouseDrag=a,this.MoveCorssCursor(a.Click,t)}else if(this.IsPhonePinching(t)){var r={Start:{},Last:{}},i=this.GetToucheData(t,this.IsForceLandscape);r.Start={X:i[0].pageX,Y:i[0].pageY,X2:i[1].pageX,Y2:i[1].pageY},r.Last={X:i[0].pageX,Y:i[0].pageY,X2:i[1].pageX,Y2:i[1].pageY},this.PhonePinch=r}}},this.OnTouchMove=function(e){var a=this.GetToucheData(e,!1);if(this.IsPhoneDragging(e)){var i=this.MouseDrag;if(null==i){var r=C(),n=a[0].clientX-t.getBoundingClientRect().left*r,o=a[0].clientY-t.getBoundingClientRect().top*r;this.OnMouseMove(n,o,e)}else{var s=this.GetMoveAngle(i.LastMove,{X:a[0].clientX,Y:a[0].clientY}),l=Math.abs(i.LastMove.X-a[0].clientX),h=Math.abs(i.LastMove.Y-a[0].clientY);if(l=parseInt(l),(h>0&&l<=3||s<=this.TouchMoveMinAngle)&&1==this.EnableScrollUpDown)return;this.PreventTouchEvent(e),this.MouseDrag=null;var r=C(),n=a[0].clientX-t.getBoundingClientRect().left*r,o=a[0].clientY-t.getBoundingClientRect().top*r;this.OnMouseMove(n,o,e)}}else if(this.IsPhonePinching(e)){this.PreventTouchEvent(e);var u=this.PhonePinch;if(!u)return;if(this.EnableZoomUpDown&&!1===this.EnableZoomUpDown.Touch)return;var c=Math.abs(a[0].pageY-a[1].pageY),f=Math.abs(u.Last.Y-u.Last.Y2),d=c-f,D=Math.abs(a[0].pageX-a[1].pageX),m=Math.abs(u.Last.X-u.Last.X2),p=D-m,v=this.ZoomStepPixel;if(Math.abs(d)<v&&Math.abs(p)<v)return;var g=d;if(Math.abs(d)<v&&(g=p),g>0){if(!this.Frame.ZoomUp())return;this.UpdateFrameMaxMin(),this.Draw()}else{if(!this.Frame.ZoomDown())return;this.UpdateFrameMaxMin(),this.Draw()}u.Last={X:a[0].pageX,Y:a[0].pageY,X2:a[1].pageX,Y2:a[1].pageY}}this.PreventTouchEvent(e)},this.OnTouchEnd=function(t){Xn.Chart.Log("[DepthChartContainer::OnTouchEnd]",t),this.IsOnTouch=!1,this.OnTouchFinished(),this.TouchDrawCount=0},this.OnTouchFinished=function(){if(!0===this.CorssCursorTouchEnd)return void this.DrawDynamicInfo()},this.ChangeSymbol=function(t){this.CancelAutoUpdate(),this.Symbol=t,this.MapBid=new Vn.default,this.MapAsk=new Vn.default,this.Frame.VerticalRange.Differ=null,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.Draw(),this.RequestDepthData()},this.RequestDepthData=function(){var t=this;if(this.NetworkFilter){var e={Name:"DepthChartContainer::RequestDepthData",Explain:"æ·±åº¦å¾æ°æ®",Request:{Data:{symbol:t.Symbol}},Self:this,PreventDefault:!1};if(this.NetworkFilter(e,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvDepthData(e),t.AutoUpdate()}),1==e.PreventDefault)return}},this.RecvDepthData=function(t){this.UpdateAskAndBid(t);var e=(0,Fn.default)(this.MapAsk.values());e.sort(function(t,e){return t.Price-e.Price});var a=0;for(var i in e){var r=e[i];a+=r.Vol,e[i]={Price:r.Price,Vol:a}}var n=(0,Fn.default)(this.MapBid.values());n.sort(function(t,e){return e.Price-t.Price});var a=0;for(var i in n){var r=n[i];a+=r.Vol,n[i]={Price:r.Price,Vol:a}}var o={Asks:e,Bids:n};this.ChartPaint[0].Data=o,this.Frame.XSplitOperator.Symbol=this.Symbol,this.ChartCorssCursor.Data=o,this.ChartCorssCursor.Symbol=this.Symbol,this.UpdateFramePriceList(),this.UpdateFrameMaxMin(),this.Draw()},this.UpdateAskAndBid=function(t){"snapshot"==t.datatype&&(this.MapBid=new Vn.default,this.MapAsk=new Vn.default);for(var e in t.asks){var a=t.asks[e],i=parseFloat(a[0]),r=parseFloat(a[1]);if(this.MapAsk.has(i)){var n=this.MapAsk.get(i);r<=0?this.MapAsk.delete(i):n.Vol=r}else r>0&&this.MapAsk.set(i,{Price:i,Vol:r})}for(var e in t.bids){var a=t.bids[e],i=parseFloat(a[0]),r=parseFloat(a[1]);if(this.MapBid.has(i)){var n=this.MapBid.get(i);r<=0?this.MapBid.delete(i):n.Vol=r}else r>0&&this.MapBid.set(i,{Price:i,Vol:r})}},this.UpdateFramePriceList=function(){var t=(0,Fn.default)(this.MapAsk.keys()),e=(0,Fn.default)(this.MapBid.keys());t.sort(function(t,e){return t-e}),e.sort(function(t,e){return t-e});var a={Max:88,Min:8};if(t.length>1&&e.length>1){var i=t[0],r=t[t.length-1],n=e[0],o=e[e.length-1],s=r-i,l=o-n,h=Math.max(s,l),u={Min:i,Max:i+h},C={Max:o,Min:o-h};a={Max:u.Max,Min:C.Min}}this.Frame.SetPriceList(t,e);var c=this.Frame.VerticalRange;c.Max=a.Max,c.Center=a.Min+(a.Max-a.Min)/2,c.Min=a.Min,c.MaxDiffer=h,c.Ask=u,c.Bid=C,we.IsNumber(c.Differ)||(c.Differ=h*this.DefaultZoom),c.Min=c.Center-c.Differ,c.Max=c.Center+c.Differ},this.UpdateFrameMaxMin=function(){var t=this.ChartPaint[0].GetMaxMin();this.Frame.HorizontalMax=t.Max*this.MaxVolRate,this.Frame.HorizontalMin=0,this.Frame.XYSplit=!0},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=void 0)},this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},this.AutoUpdate=function(){if(this.CancelAutoUpdate(),this.IsAutoUpdate&&this.Symbol){var t=this,e=wo.GetMarketStatus(this.Symbol);if(0!=e&&3!=e){var a=this.AutoUpdateFrequency;1==e?this.AutoUpdateTimer=setTimeout(function(){t.AutoUpdate()},a):2==e&&(this.AutoUpdateTimer=setTimeout(function(){t.RequestDepthData()},a))}}}}function Fi(t,e){this.Name=t,this.Param=e,this.LineColor,this.ReqeustData=null}function Mi(t){this.Index,this.Name=t,this.Script=null,this.ClassName="BaseIndex",this.OverlayIndex=null,this.GetEventCallback,this.Status=0,this.Guid=D(),this.Create=function(t,e){},this.NotSupport=function(t,e,a){if(!this.IsOverlay()){t.DeleteIndexPaint(e);var i=t.Frame.SubFrame[e].Frame,r=new Ct;r.Canvas=t.Canvas,r.ChartBorder=i.ChartBorder,r.ChartFrame=i,r.NotSupportMessage=a,t.ChartPaint.push(r)}},this.FormatIndexTitle=function(){var t=this.Name,e=null;for(var a in this.Index){var i=this.Index[a];null!=i.Param&&(e?e+=","+i.Param.toString():e=i.Param.toString())}return e&&(t+="("+e+")"),t},this.IsOverlay=function(){return!(!this.OverlayIndex||1!=this.OverlayIndex.IsOverlay)},this.CreateChart=function(t){return new ct},this.CreatePaints=function(t,e){var a=null,i=this.IsOverlay();i?(a=this.OverlayIndex.Frame.Frame,this.OverlayIndex.Frame.ChartPaint=[]):(a=t.Frame.SubFrame[e].Frame,t.DeleteIndexPaint(e));var r=[];for(var n in this.Index){var o=this.CreateChart(n);o.Color=this.Index[n].LineColor,o.Canvas=t.Canvas,o.Name=this.Name+"-"+n.toString(),o.ChartBorder=a.ChartBorder,o.ChartFrame=a,i?this.OverlayIndex.Frame.ChartPaint.push(o):t.ChartPaint.push(o),r.push(o)}return r},this.SendEvent=function(t,e,a,i){if(t.GetIndexEvent){var r=t.GetIndexEvent();if(r){var n={Data:this.GetOutData(),WindowIndex:e,Name:this.Name,HistoryData:a,Stock:{Symbol:t.Symbol,Name:t.Name}};i&&(n.Error=i),r.Callback(r,n,self)}}},this.GetOutData=function(){return null}}function Li(){this.newMethod=Mi,this.newMethod("OX"),delete this.newMethod,this.ClassName="JSIndex_OX",this.IsUsePageData=!0,this.BlockSize=.5,this.Arguments=[{Name:"Reversal",Value:3}],this.SetArgs=function(t){if(t&&we.IsNonEmptyArray(t))for(var e=0;e<t.length;++e){var a=t[e];"Reversal"==a.Name&&this.SetParamValue(a.Name,a.Value)}},this.SetParamValue=function(t,e){for(var a=0;a<this.Arguments.length;++a){var i=this.Arguments[a];i.Name==t&&(i.Value=e)}},this.GetParamValue=function(t){for(var e=0;e<this.Arguments.length;++e){var a=this.Arguments[e];if(a.Name==t)return a.Value}},this.RequestData=function(t,e,a){return this.BindData(t,e,a),t.UpdataDataoffset(),t.UpdateFrameMaxMin(),t.Draw(),!0},this.CreatePaints=function(t,e){var a=null,i=this.IsOverlay();i?(a=this.OverlayIndex.Frame.Frame,this.OverlayIndex.Frame.ChartPaint=[]):(a=t.Frame.SubFrame[e].Frame,t.DeleteIndexPaint(e));var r=[],n=new ae;return n.Canvas=t.Canvas,n.Name=this.Name+"-0",n.ChartBorder=a.ChartBorder,n.ChartFrame=a,i?this.OverlayIndex.Frame.ChartPaint.push(n):t.ChartPaint.push(n),r.push(n),r},this.CalculateBlockSize=function(t,e){var a=t-e;return a<=5?.25:a<=20?.5:a<=100?1:a<=200?2:a<=500?5:a<=1e3?10:50},this.Calculate=function(t,e){if(!t.ChartPaint[0])return null;var a=t.ChartPaint[0].ShowRange;if(!a)return null;if(!we.IsNonEmptyArray(e.Data))return null;for(var i=null,r=null,n=null,o=a.Start;o<=a.End&&o<e.Data.length;++o){var s=e.Data[o];null==i?we.IsNumber(s.High)&&(i=s.High):we.IsNumber(s.High)&&i<s.High&&(i=s.High),null==r?we.IsNumber(s.Low)&&(r=s.Low):we.IsNumber(s.Low)&&r>s.Low&&(r=s.Low),null==n&&we.IsNumber(s.High)&&(n=s.High)}var l=this.GetParamValue("Reversal"),h=this.CalculateBlockSize(i,r);this.BlockSize=h;for(var u={Max:i+h,Min:r-h,StartPrice:n,Data:[],BlockSize:h},C=1,c=n,f={Type:0,Data:[],Start:null,End:null},o=a.Start,d=0;o<=a.End&&o<e.Data.length;++o){var s=e.Data[o];if(1==C){if(s.High>=c+h){var D=parseInt((s.High-c)/h);for(d=0;d<D;++d)c+=h,f.Data.push(c)}else if(s.Low<=c-h*l){C=0,f&&we.IsNonEmptyArray(f.Data)&&u.Data.push(f),f={Type:1,Data:[],Start:null,End:null};var D=parseInt((c-s.Low)/h);for(d=0;d<D;++d)c-=h,f.Data.push(c)}}else if(s.Low<=c-h){var D=parseInt((c-s.Low)/h);for(d=0;d<D;++d)c-=h,f.Data.push(c)}else if(s.High>=c+h*l){C=1,f&&we.IsNonEmptyArray(f.Data)&&u.Data.push(f),f={Type:0,Data:[],Start:null,End:null};var D=parseInt((s.High-c)/h);for(d=0;d<D;++d)c+=h,f.Data.push(c)}null==f.Start&&(f.Start=s),f.End=s}return f&&we.IsNonEmptyArray(f.Data)&&u.Data.push(f),u},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e),r=this.IsOverlay(),n=t.GetEventCallback(Kn.ON_CALCULATE_INDEX_OX);if(n&&n.Callback){var o={HQChart:t,WidnowIndex:e,HisData:a,OXData:null};n.Callback(n,o,this),i[0].OXData=o.OXData}else i[0].OXData=this.Calculate(t,a);var s=this.BlockSize,l=this.GetParamValue("Reversal"),h=this.Name+" BlockSize="+s+" Reversal="+l,u=e+1;if(r){var C=t.TitlePaint[u],c={Data:[],Title:""};C.OverlayIndex.set(this.OverlayIndex.Identify,c)}else t.TitlePaint[u].Title=h;return!0}}function Ni(t){this.newMethod=Mi,this.newMethod("VRVR"),delete this.newMethod,this.ClassName="VolProfileVisibleRangeIndex",this.IsUsePageData=!0,this.ChartVolProfile,this.HQChart,this.WindowIndex,this.RequestTimer=null,this.DelayRequestFrequency=500,this.VolType=0,this.BarPosition=1,this.BarWidthRate=.3,this.Arguments=[{Name:"VAVol",Value:70},{Name:"BarPosition",Value:0}],this.SetArgs=function(t){if(t&&we.IsNonEmptyArray(t))for(var e=0;e<t.length;++e){var a=t[e];"VAVol"==a.Name?this.SetParamValue(a.Name,a.Value):"BarPosition"==a.Name&&this.SetParamValue(a.Name,a.Value)}},this.SetParamValue=function(t,e){for(var a=0;a<this.Arguments.length;++a){var i=this.Arguments[a];i.Name==t&&(i.Value=e)}},t&&(we.IsNumber(t.VolType)&&(this.VolType=t.VolType),we.IsNumber(t.BarWidthRate)&&(this.BarWidthRate=t.BarWidthRate),we.IsNumber(t.DelayRequestFrequency)&&(this.DelayRequestFrequency=t.DelayRequestFrequency),t.Args&&this.SetArgs(t.Args),we.IsNumber(t.BarPosition)&&(this.BarPosition=t.BarPosition,this.SetParamValue("BarPosition",this.BarPosition))),this.GetParamValue=function(t){for(var e=0;e<this.Arguments.length;++e){var a=this.Arguments[e];if(a.Name==t)return a.Value}},this.Create=function(t,e){this.HQChart=t,this.WindowIndex=e},this.CreateChart=function(t,e){var a=null,i=this.IsOverlay();i?(a=this.OverlayIndex.Frame.Frame,this.OverlayIndex.Frame.ChartPaint=[]):(a=t.Frame.SubFrame[e].Frame,t.DeleteIndexPaint(e));var r=[],n=new ie;return n.Canvas=t.Canvas,n.Name=this.Name+"-0",n.ChartBorder=a.ChartBorder,n.ChartFrame=a,n.HQChart=this.HQChart,n.Identify=this.Guid,n.SetOption(this),i?this.OverlayIndex.Frame.ChartPaint.push(n):t.ChartPaint.push(n),r.push(n),this.ChartVolProfile=n,r},this.CancelRequestTimer=function(){this.RequestTimer&&(clearTimeout(this.RequestTimer),this.RequestTimer=null)},this.RequestData=function(t,e,a,i){var r=this;this.CancelRequestTimer();var n=function(){var e=t.ChartPaint[0],a=e.Data;if(a&&!we.IsNonEmptyArray(!a.Data)){var i=e.DrawKRange;if(i&&we.IsNumber(i.Start)&&we.IsNumber(i.End)){var n=a.Data[i.Start],o=a.Data[i.End],s={Start:{Date:n.Date,DataIndex:i.Start},End:{Date:o.Date,DataIndex:i.End},Chart:r};we.IsNumber(n.Time)&&(s.Start.Time=n.Time),we.IsNumber(o.Time)&&(s.End.Time=o.Time),s.ValueAreaVol=r.Arguments[0].Value,r.Arguments[1].Value>0?r.BarPosition=1:r.BarPosition=0,r.ChartVolProfile&&r.ChartVolProfile.SetOption({BarPosition:r.BarPosition}),r.DataStatus=0,t&&t.RequestVolumeProfileData&&t.RequestVolumeProfileData(s)}}};return i&&1==i.Type?this.RequestTimer=setTimeout(function(){n()},this.DelayRequestFrequency):n(),!0},this.OnRecvVolumeProfileData=function(t){return this.BindData(t),this.HQChart.UpdataDataoffset(),this.HQChart.UpdateFrameMaxMin(),this.HQChart.Draw(),!0},this.BindData=function(t){this.ChartVolProfile&&1!=this.ChartVolProfile.IsDestroy||this.CreateChart(this.HQChart,this.WindowIndex);var e=this.ChartVolProfile;if(e.Data=null,t&&we.IsNonEmptyArray(t.Data)&&we.IsNumber(t.MaxPrice)&&we.IsNumber(t.MinPrice)){for(var a=0,i=0,r=null,n=0,o=0;n<t.Data.length;++n){var s=t.Data[n];for(i=0,o=0;o<s.Vol.length;++o){var l=s.Vol[o];we.IsNumber(l.Value)&&(i+=l.Value)}a<i&&(a=i,r=s.Price)}if(!(this.maxVolPrice<=0||this.maxVol<=0)){e.MaxVolPrice=r,e.MaxVol=a,e.MaxPrice=t.MaxPrice,e.MinPrice=t.MinPrice,e.Data=t;var h=this.WindowIndex+1;this.HQChart.TitlePaint[h].Title="VPVR",this.HQChart.TitlePaint[h].Identify=this.Guid;var u=new ta(e.Data,"VPVR",e.Data);u.ChartClassName="ChartVolProfileVisibleRange",u.Chart=e,this.HQChart.TitlePaint[h].Data[0]=u}}}}function Ri(){this.newMethod=Mi,this.newMethod("CJL"),delete this.newMethod,this.Index=new Array(new Fi("VOL",null),new Fi("OPID",null)),this.Index[0].LineColor=So.Index.LineColor[0],this.Index[1].LineColor=So.Index.LineColor[1],this.CreateChart=function(t){if(0==t){var e=new bt;return e}if(1==t){var e=new Dt;return e.LineWidth=1*C(),e}},this.RequestData=function(t,e,a){return this.BindData(t,e,a),t.UpdataDataoffset(),t.UpdateFrameMaxMin(),t.Draw(),!0},this.BindData=function(t,e,a){var i=this.CreatePaints(t,e),r=this.IsOverlay();if(i.length!=this.Index.length)return!1;var n=a.GetVol(),o=a.GetPosition();i[0].HistoryData=a,i[0].Data.Data=n,i[1].Data.Data=o;var s=e+1;if(r){var l=t.TitlePaint[s],h={Data:[],Title:""};l.OverlayIndex.set(this.OverlayIndex.Identify,h);for(var u in i){var C=new ta(i[u].Data,this.Index[u].Name,this.Index[u].LineColor);l.OverlayIndex.get(this.OverlayIndex.Identify).Data[u]=C}}else t.TitlePaint[s].Data[0]=new ta(i[0].Data,this.Index[0].Name,this.Index[0].LineColor),t.TitlePaint[s].Data[1]=new ta(i[1].Data,this.Index[1].Name,this.Index[1].LineColor),t.TitlePaint[s].Title=this.Name;return!0}}function Ai(t,e,a,i){this.newMethod=Mi,this.newMethod(t),delete this.newMethod,this.Script=e,this.Arguments=[],this.OutVar=[],this.ApiUrl=So.PyIndexDomain+"/hq/code",a&&(this.Arguments=a),this.RequestData=function(t,e,a){this.OutVar=[];var i=this,r={HQChart:t,WindowIndex:e,HistoryData:a},o="";for(var s in this.Arguments){o.length>0&&(o+=",");var l=this.Arguments[s];o+='"'+l.Name+'":'+l.Value}o="{"+o+"}";var h=JSON.parse(o),u=(0,Bn.default)({code:this.Script,symbol:r.HQChart.Symbol,period:r.HQChart.Period,right:r.HQChart.Right,params:h,numcount:t.MaxRequestDataCount});return n.HttpRequest({url:this.ApiUrl,data:u,type:"post",dataType:"json",contentType:" application/json; charset=utf-8",async:!0,success:function(t){i.RecvData(t,r)},complete:function(t){},error:function(t,e){i.RecvError(t,e,r)}}),!0},this.RecvError=function(t,e,a){Xn.Chart.Log("[PyScriptIndex::RecvError] error",e),a.HQChart.ScriptErrorCallback&&a.HQChart.ScriptErrorCallback(e)},this.RecvData=function(t,e){if(0!=t.code)return Xn.Chart.Log("[PyScriptIndex::RecvData] failed.",t),void(e.HQChart.ScriptErrorCallback&&e.HQChart.ScriptErrorCallback(t.msg));Xn.Chart.Log("[PyScriptIndex::RecvData] recv data.",t);var a=t.date;for(var i in t.data){for(var r=t.data[i],n=[],o=0;o<a.length&&o<a.length;++o)if(!(o>=r.data.length)){var s=new Z;s.Date=a[o],s.Value=r.data[o],n.push(s)}var l=e.HistoryData.GetFittingData(n),h=new tt;h.Data=l,h.Period=e.HQChart.Period,h.Right=e.HQChart.Right;var u={Name:r.name,Type:r.graph,LineWidth:r.width,Data:h.GetValue(),Color:r.color};this.OutVar.push(u)}this.BindData(e.HQChart,e.WindowIndex,e.HistoryData),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),e.HQChart.Draw()},this.BindData=function(t,e,a){t.DeleteIndexPaint(e);for(var i in this.OutVar){var r=this.OutVar[i];switch(r.Type){case"line":this.CreateLine(t,e,r,i);break;case"colorstick":this.CreateColorStock(t,e,r,i)}}var n=e+1;t.TitlePaint[n].Title=this.Name;var o="";for(var s in this.Arguments){var l=this.Arguments[s];o.length>0&&(o+=","),o+=l.Value.toString()}return o.length>0&&(t.TitlePaint[n].Title=this.Name+"("+o+")"),!0},this.CreateLine=function(t,e,a,i){var r=new ct;r.Canvas=t.Canvas,r.DrawType=1,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=a.Color:r.Color=this.GetDefaultColor(i),a.LineWidth>0&&(r.LineWidth=a.LineWidth),0==a.IsShow&&(r.IsShow=!1);var n=e+1;r.Data.Data=a.Data,t.TitlePaint[n].Data[i]=new ta(r.Data,a.Name,r.Color),t.ChartPaint.push(r)},this.CreateColorStock=function(t,e,a,i){var r=new _t;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame;var n=e+1;r.Data.Data=a.Data,t.TitlePaint[n].Data[i]=new ta(r.Data,a.Name,this.GetDefaultColor(i)),t.ChartPaint.push(r)},this.GetDefaultColor=function(t){var e=["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"];return e[parseInt(t)%(e.length-1)]}}function Oi(t,e,a,i){this.newMethod=Ai,this.newMethod(t),delete this.newMethod,this.JsonData,i.JsonData&&(this.JsonData=i.JsonData),this.RequestData=function(t,e,a){if(this.JsonData){var i={HQChart:t,WindowIndex:e,HistoryData:a};this.JsonData.code=0;var r=this.JsonData;this.RecvData(r,i)}else console.warn("[PyScriptIndex::RequestData] JsonData is null"),i.HQChart.ScriptErrorCallback&&i.HQChart.ScriptErrorCallback("json æ°æ®ä¸è½ä¸ºç©º")}}function Pi(){}function Bi(){this.MaxRequestDataCount=1e3,this.StartDate=20160101,this.Data,this.ClassName="IKLineInfo",this.Explain="IKLineInfo",this.GetToday=function(){var t=new Date;return 1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate()},this.GetRequestData=function(t){var e={Symbol:t.Symbol,MaxRequestDataCount:t.MaxRequestDataCount,MaxRequestMinuteDayCount:t.MaxRequestMinuteDayCount,Period:t.Period},a=null;return t.ChartOperator_Temp_GetHistroyData&&(a=t.ChartOperator_Temp_GetHistroyData()),a&&(e.DateRange=a.GetDateRange()),e},this.NetworkFilter=function(t,e){if(!t.NetworkFilter)return!1;var a=this,i={HQChart:t},r={Name:this.ClassName+"::RequestData",Explain:this.Explain,Request:this.GetRequestData(t),Self:this,HQChart:t,PreventDefault:!1};return e&&(1==e.Update&&(r.Update={Start:{Date:e.StartDate}},i.Update={Start:{Date:e.StartDate}}),r.CallFunctionName=e.FunctionName),t.NetworkFilter(r,function(t){a.RecvData(t,i)}),1==r.PreventDefault}}function _i(){this.newMethod=Bi,this.newMethod(),delete this.newMethod,this.ClassName="InvestorInfo",this.Explain="äºå¨æ",this.RequestData=function(t,e){var a=this,i={HQChart:t};if(this.Data=[],!this.NetworkFilter(t,e)){var r={filed:["question","answerdate","symbol","id"],symbol:[i.HQChart.Symbol],querydate:{StartDate:this.StartDate,EndDate:this.GetToday()},start:0,end:this.MaxRequestDataCount},o=So.Domain+So.KLine.Info.Investor.ApiUrl;return n.HttpRequest({url:o,data:r,type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)}}),!0}},this.RecvData=function(t,e){if(!(t.list.length<=0)){for(var a in t.list){var i=t.list[a],r=new Q;r.Date=i.answerdate,r.Title=i.question,r.InfoType=to.INVESTOR,this.Data.push(r)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}function Gi(){this.newMethod=Bi,this.newMethod(),delete this.newMethod,this.ClassName="AnnouncementInfo",this.Explain="å¬å",this.ApiType=1,this.RequestData=function(t,e){var a=this,i={HQChart:t};if(e&&!0===e.Update||(this.Data=[]),!this.NetworkFilter(t,e))if(1==this.ApiType){var r=So.CacheDomain+"/cache/analyze/shszreportlist/"+i.HQChart.Symbol+".json";n.HttpRequest({url:r,type:"get",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)},error:function(t,e){a.RecvError(t,e,i)}})}else{var r=So.Domain+So.KLine.Info.Announcement.ApiUrl;n.HttpRequest({url:r,data:{filed:["title","releasedate","symbol","id"],symbol:[i.HQChart.Symbol],querydate:{StartDate:this.StartDate,EndDate:this.GetToday()},start:0,end:this.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)},error:function(t,e){a.RecvError(t,e,i)}})}},this.RecvData=function(t,e){if(we.IsNonEmptyArray(t.report)){for(var a=[],i=0;i<t.report.length;++i){var r=t.report[i],n=new Q;n.Date=r.releasedate,n.Title=r.title,n.InfoType=to.ANNOUNCEMENT,we.IsNumber(r.time)&&(n.Time=r.time);for(var o in r.type){switch(r.type[o]){case"ä¸å­£åº¦æ¥å":n.InfoType=to.ANNOUNCEMENT_QUARTER_1;break;case"åå¹´åº¦æ¥å":n.InfoType=to.ANNOUNCEMENT_QUARTER_2;break;case"ä¸å­£åº¦æ¥å":n.InfoType=to.ANNOUNCEMENT_QUARTER_3;break;case"å¹´åº¦æ¥å":n.InfoType=to.ANNOUNCEMENT_QUARTER_4}}for(var o in r.typeex){var s=r.typeex[o];n.InfoType=to.ANNOUNCEMENT_EX_START+s;break}a.push(n)}!0===t.Update&&this.Data.length>0?this.UpdateData(a):this.Data=a,e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}},this.UpdateData=function(t){if(t&&!(t.length<=0)){var e=new Rn.default;for(var a in this.Data){var i=this.Data[a],r=i.Date+"-"+i.Time+"-"+i.InfoType+"-"+i.Title;e.add(r)}var n=0;for(var a in t){var i=t[a],r=i.Date+"-"+i.Time+"-"+i.InfoType+"-"+i.Title;e.has(r)||(this.Data.push(i),++n)}Xn.Chart.Log("[AnnouncementInfo::UpdateData] add new count="+n)}},this.RecvError=function(t,e,a){console.warn("[AnnouncementInfo::RecvError] error, http ",e,t)}}function ki(){this.newMethod=Bi,this.newMethod(),delete this.newMethod,this.ClassName="PforecastInfo",this.Explain="ä¸ç»©é¢å",this.RequestData=function(t,e){this.Data=[];So.Domain,So.KLine.Info.Pforecast.ApiUrl;if(!this.NetworkFilter(t,e))return console.warn("[PforecastInfo::RequestData] NetworkFilter error."),!0},this.RecvData=function(t,e){if(we.IsNonEmptyArray(t.report)){for(var a=0;a<t.report.length;++a){var i=t.report[a],r=new Q;r.Date=i.date,r.Title=i.title,r.InfoType=to.PFORECAST,r.ExtendData={Type:i.title,ReportDate:i.reportdate},i.fweek&&(r.ExtendData.FWeek={},null!=i.fweek.week1&&(r.ExtendData.FWeek.Week1=i.fweek.week1),null!=i.fweek.week4&&(r.ExtendData.FWeek.Week4=i.fweek.week4)),this.Data.push(r)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}function Vi(){this.newMethod=Bi,this.newMethod(),delete this.newMethod,this.ClassName="ResearchInfo",this.Explain="è°ç ",this.RequestData=function(t,e){this.Data=[];So.Domain,So.KLine.Info.Research.ApiUrl;if(!this.NetworkFilter(t,e))return console.warn("[ResearchInfo::RequestData] NetworkFilter error."),!0},this.RecvData=function(t,e){if(we.IsNonEmptyArray(t.list)){for(var a=0;a<t.list.length;++a){var i=t.list[a],r=new Q;r.ID=i.id,r.Date=i.researchdate,r.InfoType=to.RESEARCH,r.ExtendData={Level:i.level,Type:i.type},this.Data.push(r)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}function Hi(){this.newMethod=Bi,this.newMethod(),delete this.newMethod,this.ClassName="BlockTrading",this.Explain="å¤§å®äº¤æ",this.RequestData=function(t,e){var a=this,i={HQChart:t};this.Data=[];var r=So.Domain+So.KLine.Info.BlockTrading.ApiUrl;if(!this.NetworkFilter(t,e))return n.HttpRequest({url:r,data:{field:["blocktrading.price","blocktrading.vol","blocktrading.premium","fweek","price"],condition:[{item:["date","int32","gte",this.StartDate]},{item:["blocktrading.vol","int32","gte","0"]}],symbol:[i.HQChart.Symbol],start:0,end:this.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)}}),!0},this.RecvData=function(t,e){if(1==t.stock.length&&!(t.stock[0].stockday.length<=0)){for(var a in t.stock[0].stockday){var i=t.stock[0].stockday[a],r=new Q;r.Date=i.date,r.InfoType=to.BLOCKTRADING,r.ExtendData={Price:i.blocktrading.price,Premium:i.blocktrading.premium,Vol:i.blocktrading.vol,ClosePrice:i.price},i.fweek&&(r.ExtendData.FWeek={},null!=i.fweek.week1&&(r.ExtendData.FWeek.Week1=i.fweek.week1),null!=i.fweek.week4&&(r.ExtendData.FWeek.Week4=i.fweek.week4)),this.Data.push(r)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}function Yi(){this.newMethod=Bi,this.newMethod(),delete this.newMethod,this.ClassName="TradeDetail",this.Explain="å¤§å®äº¤æ",this.RequestData=function(t,e){var a=this,i={HQChart:t};this.Data=[];var r=So.Domain+So.KLine.Info.TradeDetail.ApiUrl;if(!this.NetworkFilter(t,e))return n.HttpRequest({url:r,data:{field:["tradedetail.typeexplain","tradedetail.type","fweek"],condition:[{item:["date","int32","gte",this.StartDate]},{item:["tradedetail.type","int32","gte","0"]}],symbol:[i.HQChart.Symbol],start:0,end:this.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){a.RecvData(t,i)}}),!0},this.RecvData=function(t,e){if(1==t.stock.length&&!(t.stock[0].stockday.length<=0)){for(var a in t.stock[0].stockday){var i=t.stock[0].stockday[a],r=new Q;r.Date=i.date,r.InfoType=to.TRADEDETAIL,r.ExtendData={Detail:new Array};for(var n in i.tradedetail){var o=i.tradedetail[n];r.ExtendData.Detail.push({Type:o.type,TypeExplain:o.typeexplain})}i.fweek&&(r.ExtendData.FWeek={},null!=i.fweek.week1&&(r.ExtendData.FWeek.Week1=i.fweek.week1),null!=i.fweek.week4&&(r.ExtendData.FWeek.Week4=i.fweek.week4)),this.Data.push(r)}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}}function Xi(){}function Wi(){this.Data,this.ClassName="IMinuteInfo"}function Ui(){this.newMethod=Wi,this.newMethod(),delete this.newMethod,this.ClassName="MarketEventInfo",this.RequestData=function(t){var e=this;this.Data=[];var a={HQChart:t},i=So.CacheDomain+"/cache/analyze/shszevent/marketevent/concept/"+t.TradeDate+".json";if(t.NetworkFilter){var r={Name:"MarketEventInfo::RequestData",Explain:"å¤§çå¼å¨",Request:{Url:i,Type:"Get",Data:{Date:t.TradeDate,Symbol:t.Symbol}},Self:this,PreventDefault:!1};if(t.NetworkFilter(r,function(t){e.RecvData(t,a),a.HQChart.UpdataChartInfo(),a.HQChart.Draw()}),1==r.PreventDefault)return}return n.HttpRequest({url:i,type:"get",dataType:"json",async:!0,success:function(t){e.RecvData(t,a)},error:function(t,e){console.warn("[MarketEventInfo::RequestData] error, http ",e,t)}}),!0},this.RecvData=function(t,e){for(var a in t.event){var i=t.event[a];for(var r in i.data){var n=i.data[r];if(Array.isArray(n)){if(n.length<2)continue;var o={Date:i.date,Time:n[0],Title:n[1],Type:0};n.length>=3&&n[2]&&"string"==typeof n[2]&&(o.Color=n[2]),n.length>=4&&n[3]&&"string"==typeof n[3]&&(o.BGColor=n[3]),this.Data.push(o)}else{if(!we.IsNumber(n.Date)||!we.IsNumber(n.Time)||!n.Title)continue;var o={Date:n.Date,Time:n.Time,Title:n.Title,Type:0};n.Color&&(o.Color=n.Color),n.BGColor&&(o.BGColor=n.BGColor),we.IsNumber(n.Price)&&(o.Price=n.Price),n.Content&&(o.Content=n.Content),n.Link&&(o.Link=n.Link),this.Data.push(o)}}}e.HQChart.UpdataChartInfo(),e.HQChart.Draw()}}function Ki(){this.DataMap=new Vn.default([["ChartPictureSettingMenu",{Create:function(t){return new Ji(t)}}],["ChartPictureTextSettingMenu",{Create:function(t){return new qi(t)}}]]),this.Create=function(t,e){return this.DataMap.has(t)?this.DataMap.get(t).Create(e):(Xn.Warn("[DialogFactory::Create] can't find class="+t+"."),null)},this.Add=function(t,e){this.DataMap.set(t,{Create:e.Create})}}function zi(t){this.DivElement=t,this.ID=null,this.TimeOut=null,this.Hide=function(){(0,Yn.default)("#"+this.ID).hide()},this.Show=function(t,e,a,i){var r={display:"block"};we.IsNumber(t)&&(r.left=t+"px"),we.IsNumber(e)&&(r.top=e+"px"),we.IsNumber(a)&&(r.width=a+"px"),we.IsNumber(i)&&(r.height=i+"px"),(0,Yn.default)("#"+this.ID).css(r)}}function Ji(t){this.newMethod=zi,this.newMethod(t),delete this.newMethod,this.HQChart,this.ChartPicture,this.SubToolsDiv,this.SettingMenu,this.SettingPV,this.DoModal=function(t){if(!this.SubToolsDiv){this.ID=D();var e=document.createElement("div");e.className="subTolls",e.id=this.ID,this.DivElement.appendChild(e),this.SubToolsDiv=e}this.HQChart=t.data.HQChart,this.ChartPicture=t.data.ChartPicture;var a=C(),i=this.HQChart.Frame.SubFrame[0].Frame,r=i.ChartBorder.Top+40,n=i.ChartBorder.Right,o=i.ChartBorder.GetLeft(),s=this.ChartPicture.ClassName,l=this.ChartPicture.LineColor;0!=l.indexOf("rgb(")&&0!=l.indexOf("RGB(")||(l=aa.RGBToHex(l.toLowerCase()));var h="";h="ChartDrawPictureText"===s?'<span class="changes-color" title="æ¹åå¾å½¢é¢è²"><i class="iconfont icon-bianji"></i><input type="color" name="color" id="color" class="change-color" value="'+l+'"></span>\n<span class="subtool-set" title="è®¾ç½®"><i class="iconfont icon-shezhi"></i></span><span class="subtool-del"><i class="iconfont icon-recycle_bin"></i></span>':"ChartDrawVolProfile"==s?'<span class="vp-set" title="è®¾ç½®"><i class="iconfont icon-shezhi"></i></span><span class="subtool-del"><i class="iconfont icon-recycle_bin"></i></span>':'<p class="changes-color" title="æ¹åå¾å½¢é¢è²"><i class="iconfont icon-bianji"></i><input type="color" name="color" id="color" class="change-color" value="'+l+'"></p>\n        <p class="subtool-del"><i class="iconfont icon-recycle_bin"></i></p>',this.SubToolsDiv.style.right=n/a+"px",this.SubToolsDiv.style.top=r/a+"px",this.SubToolsDiv.innerHTML=h,this.SubToolsDiv.style.position="absolute",this.SubToolsDiv.style.display="block";var u=this.HQChart,c=this.ChartPicture;this.SubToolsDiv;(0,Yn.default)(".subtool-del").click(function(){u.SelectChartDrawPicture=null,u.ClearChartDrawPicture(c),(0,Yn.default)(".subTolls").css("display","none")});var f=this;(0,Yn.default)(".subtool-set").click(function(){(0,Yn.default)(f.SubToolsDiv).hide(),f.SettingMenu||(f.SettingMenu=new qi(i.ChartBorder.UIElement.parentNode)),f.SettingMenu.ChartPicture=c,f.SettingMenu.HQChart=u,f.SettingMenu.Position={Left:n+80,Top:r+20},f.SettingMenu.DoModal()}),(0,Yn.default)(".changes-color").click(function(){document.getElementById("color").click(),(0,Yn.default)(".change-color").change(function(){var t=(0,Yn.default)(".change-color").val();c.LineColor=t,c.PointColor=t,u.ChartDrawStorage&&u.ChartDrawStorage.SaveDrawData(c)})}),(0,Yn.default)(".vp-set").click(function(){f.SettingPV||(f.SettingPV=new Zi(i.ChartBorder.UIElement.parentNode)),f.SettingPV.ChartPicture=c,f.SettingPV.HQChart=u,f.SettingPV.Position={Left:n+80,Top:r+20},f.SettingPV.DoModal()}),Xn.Chart.Log("[ChartPictureSettingMenu::DoModal]",{Top:r,Left:o,Right:n})}}function qi(t){this.newMethod=zi,this.newMethod(t),delete this.newMethod,this.ChartPicture,this.SettingDiv,this.Position,this.BackupData,this.Close=function(){this.SettingDiv&&this.DivElement.removeChild(this.SettingDiv)},this.DoModal=function(){var t=this.ChartPicture.Text,e=this.ChartPicture.FontOption,a=this.ChartPicture.LineColor;this.BackupData={Text:t,LineColor:a,FontOption:{Family:e.Family,Size:e.Size,Weight:e.Weight,Style:e.Style}},Xn.Chart.Log("[ChartPictureTextSettingMenu::DoModal] picture info",this.BackupData);var i=this,r=this.DivElement.getElementsByClassName("chartpicture-text-setting")[0];r?this.SettingDiv=r:(r=document.createElement("div"),r.className="chartpicture-text-setting",this.DivElement.appendChild(r),this.SettingDiv=r);var n=[10,11,12,14,16,20,24,28,32,40],o=["å¾®è½¯éé»","å®ä½","Arial","ä»¿å®"],s="",l="";o.forEach(function(t,e){l+=0!==e?"<p>"+t+"</P>":'<p class="active">'+t+"</P>"}),n.forEach(function(t,e){s+=5!==e?"<p>"+t+"</P>":'<p class="active">'+t+"</P>"});var h='<div class="contentWrap"><div class="styleOptions"><span class="colorPicker"><input type="color" id="fontColor" value="#1e90ff"></span><div class="likeSelect fontSelect"><span class="choicedText">å¾®è½¯éé»</span><div class="selectList">'+l+'</div><i class="iconfont icon-xia"></i></div><div class="likeSelect fontSizeSelect"><span class="choicedText">20</span><div class="selectList">'+s+'</div><i class="iconfont icon-xia"></i></div><span class="strongFont likeBtn"><i class="iconfont icon-jiacu"></i></span><span class="italicsFont likeBtn"><i class="iconfont icon-qingxieL"></i></span></div><textarea class="tArea" id="tArea" placeholder="Text"></textarea></div>',u=C(),c='<div class="titleWrap"><span class="titleName">æ ·å¼è®¾ç½®</span><i class="closeBtn iconfont icon-close"></i></div>'+h+'<div class="btnsContainer"><span class="okBtn btn">ç¡®è®¤</span><span class="cancelBtn btn">åæ¶</span></div>';this.SettingDiv.style.left=this.Position.Left/u+"px",this.SettingDiv.style.top=this.Position.Top/u+"px",this.SettingDiv.innerHTML=c,this.SettingDiv.style.position="absolute",this.SettingDiv.style.display="block",(0,Yn.default)(".chartpicture-text-setting .colorPicker").css({borderColor:i.ChartPicture.LineColor,"background-color":i.ChartPicture.LineColor});var f=this.ChartPicture.FontOption.Family;(0,Yn.default)(".chartpicture-text-setting .fontSelect .choicedText").html(f),o.forEach(function(t,e){t==f&&((0,Yn.default)(".chartpicture-text-setting .fontSelect p").removeClass("active"),(0,Yn.default)(".chartpicture-text-setting .fontSelect p").eq(e).addClass("active"))});var d=this.ChartPicture.FontOption.Size;(0,Yn.default)(".chartpicture-text-setting .fontSizeSelect .choicedText").html(d),n.forEach(function(t,e){t==d&&((0,Yn.default)(".chartpicture-text-setting .fontSizeSelect p").removeClass("active"),(0,Yn.default)(".chartpicture-text-setting .fontSizeSelect p").eq(e).addClass("active"))});var D=this.ChartPicture.FontOption.Weight;null!=D&&"bold"==D&&(0,Yn.default)(".chartpicture-text-setting .strongFont").addClass("hot");var m=this.ChartPicture.FontOption.Style;null!=m&&"italic"==m&&(0,Yn.default)(".chartpicture-text-setting .italicsFont").addClass("hot");var t=this.ChartPicture.Text;(0,Yn.default)(".chartpicture-text-setting .tArea").val(t);(0,Yn.default)(".chartpicture-text-setting #fontColor").change({Picture:this.ChartPicture},function(t){var e=(0,Yn.default)(this).val();(0,Yn.default)(this).parent().css({borderColor:e,"background-color":e});var a=t.data.Picture;a.LineColor=e,a.Update&&a.Update()}),(0,Yn.default)(".chartpicture-text-setting .fontSelect,.chartpicture-text-setting .fontSizeSelect").click(function(){(0,Yn.default)(this).find(".selectList").toggle(),(0,Yn.default)(this).toggleClass("hot")}),(0,Yn.default)(".chartpicture-text-setting .fontSelect p").click({Picture:this.ChartPicture},function(t){var e=(0,Yn.default)(this).closest(".fontSelect").find(".choicedText").html(),a=t.currentTarget.innerHTML;if(e!==a){(0,Yn.default)(this).closest(".fontSelect").find(".choicedText").html(a),(0,Yn.default)(this).siblings().removeClass("active"),(0,Yn.default)(this).addClass("active");var i=t.data.Picture;i.FontOption.Family=a,i.Update&&i.Update()}}),(0,Yn.default)(".chartpicture-text-setting .fontSizeSelect p").click({Picture:this.ChartPicture},function(t){var e=(0,Yn.default)(this).closest(".fontSizeSelect").find(".choicedText").html(),a=t.currentTarget.innerHTML;if(e!==a){(0,Yn.default)(this).closest(".fontSizeSelect").find(".choicedText").html(a),(0,Yn.default)(this).siblings().removeClass("active"),(0,Yn.default)(this).addClass("active");var i=t.data.Picture;i.FontOption.Size=Number(a),i.Update&&i.Update()}}),(0,Yn.default)(".chartpicture-text-setting .strongFont").click({Picture:this.ChartPicture},function(t){if((0,Yn.default)(this).toggleClass("hot"),(0,Yn.default)(this).attr("class").indexOf("hot")>0){var e=t.data.Picture;e.FontOption.Weight="bold",e.Update&&e.Update()}}),(0,Yn.default)(".chartpicture-text-setting .italicsFont").click({Picture:this.ChartPicture},function(t){if((0,Yn.default)(this).toggleClass("hot"),(0,Yn.default)(this).attr("class").indexOf("hot")>0){var e=t.data.Picture;e.FontOption.Style="italic",e.Update&&e.Update()}}),(0,Yn.default)(".chartpicture-text-setting .titleWrap .closeBtn,.chartpicture-text-setting .btnsContainer .cancelBtn").click({Picture:this.ChartPicture},function(t){var e=t.data.Picture;e.Text=i.BackupData.Text,e.LineColor=i.BackupData.LineColor,e.FontOption=i.BackupData.FontOption,e.Update&&e.Update(),i.Close()}),(0,Yn.default)(".chartpicture-text-setting .tArea").keyup({Picture:this.ChartPicture},function(t){Xn.Chart.Log('[ChartPictureTextSettingMenu::DoModal] $(".chartpicture-text-setting .tArea").keyup()');var e=(0,Yn.default)(this).val(),a=t.data.Picture;a.Text=e,a.Update&&a.Update()}),(0,Yn.default)(".chartpicture-text-setting .btnsContainer .okBtn").click(function(){i.Close(),i.HQChart&&i.HQChart.ChartDrawStorage&&i.HQChart.ChartDrawStorage.SaveDrawData(i.ChartPicture)})}}function Zi(t){this.newMethod=zi,this.newMethod(t),delete this.newMethod,this.ChartPicture,this.SettingDiv,this.Position,this.ID=D(),this.Close=function(){this.SettingDiv&&this.DivElement.removeChild(this.SettingDiv)},this.DoModal=function(){var t=this.ChartPicture.VAVol,e=this.ChartPicture.BarPosition,a=this,i=document.getElementById(this.ID);i?this.SettingDiv=i:(i=document.createElement("div"),i.className="jchart-modifyindex-box",i.id=this.ID,this.DivElement.appendChild(i),this.SettingDiv=i),i.innerHTML="<div class='parameter'>            <div class='parameter-header'>                <span>åºå®èå´æäº¤éåå¸è®¾ç½®</span>                <strong id='close' class='icon iconfont icon-close'></strong>            </div>            <div class='parameter-content'>\n                <input class='row-line' value="+t+" />VAVol <br>\n                <input class='row-line' value="+e+" />BarPosition\n            </div>            <div class='parameter-footer'>                <button class='submit' >ç¡®å®</button>                <button class='cancel' >åæ¶</button>            </div>        </div>";var r=C(),n=this.HQChart.Frame.SubFrame[0].Frame,o=n.ChartBorder.Top+40,s=n.ChartBorder.Right;n.ChartBorder.GetLeft();this.SettingDiv.style.right=s/r+"px",this.SettingDiv.style.top=o/r+"px",this.SettingDiv.style.position="absolute",this.SettingDiv.style.display="block",i.getElementsByClassName("cancel")[0].onclick=function(){a.Close()},i.getElementsByClassName("icon iconfont icon-close")[0].onclick=function(){a.Close()},i.getElementsByClassName("submit")[0].onclick=function(){var t=i.getElementsByClassName("row-line")[0].value;a.ChartPicture.VAVol=parseFloat(t);var t=parseInt(i.getElementsByClassName("row-line")[1].value);a.ChartPicture.BarPosition=t>0?1:0,a.ChartPicture.RequestVolumeProfileData(),a.Close()}}}function ji(){this.SHSZ=null,this.BJ=null,this.SHO=null,this.SZO=null,this.HK=null,this.Futures=new Vn.default,this.USA=null,this.FTSE=null,this.FHK=null,this.ForeEx=null,this.BIT=null,this.TW=null,this.JP=null,this.HSX=null,this.HNX=null,this.UPCOM=null,this.Initialize=function(){},this.GetET=function(t){throw{Name:"MinuteTimeStringData::GetET",Error:"not implement"}},this.GetSHSZ=function(t){return this.SHSZ||(this.SHSZ=this.CreateSHSZData()),this.SHSZ},this.GetBJ=function(t){return this.BJ||(this.BJ=this.CreateBJData()),this.BJ},this.GetSHO=function(t){return this.SHO||(this.SHO=this.CreateSHOData()),this.SHO},this.GetSZO=function(t){return this.SZO||(this.SZO=this.CreateSZOData()),this.SZO},this.GetHK=function(t){return this.HK||(this.HK=this.CreateHKData()),this.HK},this.GetTW=function(t){return this.TW&&(this.TW=this.CreateTWData()),this.TW},this.GetJP=function(t){return this.JP&&(this.JP=this.CreateJPData()),this.JP},this.GetHSX=function(t){return this.HSX&&(this.HSX=this.CreateHSXData()),this.HSX},this.GetHNX=function(t){return this.HNX&&(this.HSX=this.CreateHNXData()),this.HNX},this.GetUPCOM=function(t){return this.UPCOM&&(this.UPCOM=this.CreateUPCOMData()),this.UPCOM},this.GetFutures=function(t){if(!this.Futures.has(t.Name)){var e=this.CreateTimeData(t.Data);this.Futures.set(t.Name,e)}return this.Futures.get(t.Name)},this.GetUSA=function(t){return this.USA||(this.USA=this.CreateUSAData(0)),this.USA},this.GetFTSE=function(){return this.FTSE||(this.FTSE=this.CreateFTSEData()),this.FTSE},this.GetFHK=function(){return this.FHK||(this.FHK=this.CreateFHKData()),this.FHK},this.GetForeignExchange=function(t){return this.ForeEx||(this.ForeEx=this.CreateForeignExchangeData()),this.ForeEx},this.GetBIT=function(t){return this.BIT||(this.BIT=this.CreateBITData()),this.BIT},this.CreateSHSZData=function(){var t=[{Start:925,End:925},{Start:930,End:1130},{Start:1300,End:1500}];return this.CreateTimeData(t)},this.CreateBJData=function(){var t=[{Start:925,End:925},{Start:930,End:1130},{Start:1300,End:1500}];return this.CreateTimeData(t)},this.CreateSHOData=function(){var t=[{Start:930,End:1129},{Start:1300,End:1500}];return this.CreateTimeData(t)},this.CreateSZOData=function(){var t=[{Start:930,End:1129},{Start:1300,End:1500}];return this.CreateTimeData(t)},this.CreateHKData=function(){var t=[{Start:930,End:1200},{Start:1300,End:1600}];return this.CreateTimeData(t)},this.CreateTWData=function(){var t=[{Start:900,End:1330}];return this.CreateTimeData(t)},this.CreateJPData=function(){var t=[{Start:900,End:1130},{Start:1230,End:1500}];return this.CreateTimeData(t)},this.CreateFTSEData=function(){var t=[{Start:1700,End:2359},{Start:0,End:445},{Start:900,End:1630}];return this.CreateTimeData(t)},this.CreateFHKData=function(){var t=[{Start:1715,End:2359},{Start:0,End:300},{Start:915,End:1200},{Start:1300,End:1630}];return this.CreateTimeData(t)},this.CreateHSXData=function(){throw{Name:"MinuteTimeStringData::CreateHSXData",Error:"not implement"}},this.CreateHNXData=function(){throw{Name:"MinuteTimeStringData::CreateHNXData",Error:"not implement"}},this.CreateUPCOMData=function(){throw{Name:"MinuteTimeStringData::CreateUPCOMData",Error:"not implement"}},this.CreateUSAData=function(t){if(1==t){var e=[{Start:2130,End:2359},{Start:0,End:400}];return this.CreateTimeData(e)}if(2==t){var a=[{Start:2230,End:2359},{Start:0,End:500}];return this.CreateTimeData(a)}var i=[{Start:930,End:1600}];return this.CreateTimeData(i)},this.CreateForeignExchangeData=function(){var t=[{Start:600,End:2359},{Start:0,End:559}];return this.CreateTimeData(t)},this.CreateBITData=function(){var t=[{Start:600,End:2359},{Start:0,End:559}];return this.CreateTimeData(t)},this.CreateTimeData=function(t){var e=[];for(var a in t)for(var i=t[a],r=i.Start;r<=i.End;++r)r%100>=60||e.push(r);return e},this.GetTimeData=function(t){if(!t)return this.SHSZ;var e=t.toLocaleUpperCase();if(wo.IsSHO(e))return this.GetSHO();if(wo.IsSZO(e))return this.GetSZO();if(wo.IsSH(e)||wo.IsSZ(e))return this.GetSHSZ(e);if(wo.IsBJ(e))return this.GetBJ(e);if(wo.IsHK(e))return this.GetHK(e);if(wo.IsTW(e))return this.GetTW(e);if(wo.IsJP(e))return this.GetJP(e);if(wo.IsUSA(e))return this.GetUSA(e);if(wo.IsCFFEX(e)||wo.IsCZCE(e)||wo.IsDCE(e)||wo.IsSHFE(e)||wo.IsGZFE(e)){var a=Lo.GetSplitData(e);return a?this.GetFutures(a):null}if(wo.IsFTSE(e))return this.GetFTSE();if(wo.IsFHK(e))return this.GetFHK();if(wo.IsForeignExchange(e))return this.GetForeignExchange(e);if(wo.IsET(e))return this.GetET(e);if(wo.IsBIT(e))return this.GetBIT(e);if(wo.IsHSX(e))return this.GetHSX(e);if(wo.IsHNX(e))return this.GetHNX(e);if(wo.IsUPCOM(e))return this.GetUPCOM(e);if(wo.IsNYMEX(e)){var a=No.GetSplitData(e);return a?this.GetFutures(a):null}if(wo.IsCOMEX(e)){var a=Ro.GetSplitData(e);return a?this.GetFutures(a):null}if(wo.IsNYBOT(e)){var a=Ao.GetSplitData(e);return a?this.GetFutures(a):null}if(wo.IsCBOT(e)){var a=Oo.GetSplitData(e);return a?this.GetFutures(a):null}if(wo.IsLME(e)){var a=Po.GetSplitData(e);return a?this.GetFutures(a):null}if(wo.IsTOCOM(e)){var a=Bo.GetSplitData(e);return a?this.GetFutures(a):null}if(wo.IsIPE(e)){var a=_o.GetSplitData(e);return a?this.GetFutures(a):null}}}function Qi(){var t={Full:[[0,0,"rgb(200,200,200)","09:30"],[31,0,"RGB(200,200,200)","10:00"],[61,0,"RGB(200,200,200)","10:30"],[91,0,"RGB(200,200,200)","11:00"],[122,1,"RGB(200,200,200)","13:00"],[152,0,"RGB(200,200,200)","13:30"],[182,0,"RGB(200,200,200)","14:00"],[212,0,"RGB(200,200,200)","14:30"],[242,1,"RGB(200,200,200)","15:00"]],Simple:[[0,0,"rgb(200,200,200)","09:30"],[61,0,"RGB(200,200,200)","10:30"],[122,1,"RGB(200,200,200)","13:00"],[182,0,"RGB(200,200,200)","14:00"],[242,1,"RGB(200,200,200)","15:00"]],Min:[[0,0,"rgb(200,200,200)","09:30"],[122,1,"RGB(200,200,200)","13:00"],[242,1,"RGB(200,200,200)","15:00"]],Count:243,MiddleCount:122,GetData:function(t){return t<200?this.Min:t<400?this.Simple:this.Full}},e={Full:[[0,0,"rgb(200,200,200)","09:30"],[30,0,"RGB(200,200,200)","10:00"],[60,0,"RGB(200,200,200)","10:30"],[90,0,"RGB(200,200,200)","11:00"],[120,1,"RGB(200,200,200)","13:00"],[150,0,"RGB(200,200,200)","13:30"],[180,0,"RGB(200,200,200)","14:00"],[210,0,"RGB(200,200,200)","14:30"],[240,1,"RGB(200,200,200)","15:00"]],Simple:[[0,0,"rgb(200,200,200)","09:30"],[60,0,"RGB(200,200,200)","10:30"],[120,1,"RGB(200,200,200)","13:00"],[180,0,"RGB(200,200,200)","14:00"],[240,1,"RGB(200,200,200)","15:00"]],Min:[[0,0,"rgb(200,200,200)","09:30"],[120,1,"RGB(200,200,200)","13:00"],[240,1,"RGB(200,200,200)","15:00"]],Count:241,MiddleCount:120,GetData:function(t){return t<200?this.Min:t<400?this.Simple:this.Full}},a={Full:[[0,1,"RGB(200,200,200)","09:30"],[30,0,"RGB(200,200,200)","10:00"],[60,1,"RGB(200,200,200)","10:30"],[90,0,"RGB(200,200,200)","11:00"],[120,1,"RGB(200,200,200)","11:30"],[151,0,"RGB(200,200,200)","13:00"],[181,1,"RGB(200,200,200)","13:30"],[211,0,"RGB(200,200,200)","14:00"],[241,1,"RGB(200,200,200)","14:30"],[271,0,"RGB(200,200,200)","15:00"],[301,1,"RGB(200,200,200)","15:30"],[331,1,"RGB(200,200,200)","16:00"]],Simple:[[0,1,"RGB(200,200,200)","09:30"],[60,1,"RGB(200,200,200)","10:30"],[120,1,"RGB(200,200,200)","11:30"],[211,0,"RGB(200,200,200)","14:00"],[271,0,"RGB(200,200,200)","15:00"],[331,1,"RGB(200,200,200)","16:00"]],Min:[[0,1,"RGB(200,200,200)","09:30"],[151,0,"RGB(200,200,200)","13:00"],[331,1,"RGB(200,200,200)","16:00"]],Count:332,MiddleCount:151,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}},i={Full:[[0,0,"rgb(200,200,200)","9:30"],[30,0,"RGB(200,200,200)","10:00"],[90,1,"RGB(200,200,200)","11:00"],[150,0,"RGB(200,200,200)","12:00"],[210,0,"RGB(200,200,200)","13:00"],[270,0,"RGB(200,200,200)","14:00"],[330,0,"RGB(200,200,200)","15:00"],[390,0,"RGB(200,200,200)","16:00"]],Simple:[[30,0,"rgb(200,200,200)","10:00"],[150,1,"RGB(200,200,200)","12:00"],[270,0,"RGB(200,200,200)","14:00"],[390,0,"RGB(200,200,200)","16:00"]],Min:[[30,0,"rgb(200,200,200)","10:00"],[210,1,"RGB(200,200,200)","13:00"],[390,0,"RGB(200,200,200)","16:00"]],Count:391,MiddleCount:211,GetData:function(t){return t<200?this.Min:t<400?this.Simple:this.Full}},r={Full:[[0,1,"RGB(200,200,200)","17:00"],[120,1,"RGB(200,200,200)","19:00"],[240,1,"RGB(200,200,200)","21:00"],[360,1,"RGB(200,200,200)","23:00"],[480,1,"RGB(200,200,200)","01:00"],[600,1,"RGB(200,200,200)","03:00"],[706,1,"RGB(200,200,200)","09:00"],[826,1,"RGB(200,200,200)","11:00"],[946,1,"RGB(200,200,200)","13:00"],[1066,1,"RGB(200,200,200)","15:00"],[1156,1,"RGB(200,200,200)","16:30"]],Simple:[[0,1,"RGB(200,200,200)","17:00"],[240,1,"RGB(200,200,200)","21:00"],[480,1,"RGB(200,200,200)","01:00"],[706,1,"RGB(200,200,200)","09:00"],[946,1,"RGB(200,200,200)","13:00"],[1156,1,"RGB(200,200,200)","16:30"]],Min:[[0,1,"RGB(200,200,200)","17:00"],[706,1,"RGB(200,200,200)","09:00"],[1156,1,"RGB(200,200,200)","16:30"]],Count:1157,MiddleCount:707,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}},n={Full:[[0,1,"RGB(200,200,200)","17:15"],[105,1,"RGB(200,200,200)","19:00"],[225,1,"RGB(200,200,200)","21:00"],[345,1,"RGB(200,200,200)","23:00"],[586,0,"RGB(200,200,200)","09:15"],[691,1,"RGB(200,200,200)","11:00"],[812,1,"RGB(200,200,200)","14:00"],[963,1,"RGB(200,200,200)","16:30"]],Simple:[[0,1,"RGB(200,200,200)","17:15"],[225,1,"RGB(200,200,200)","21:00"],[586,0,"RGB(200,200,200)","09:15"],[752,1,"RGB(200,200,200)","13:00"],[963,1,"RGB(200,200,200)","16:30"]],Min:[[0,1,"RGB(200,200,200)","17:15"],[586,0,"RGB(200,200,200)","09:15"],[963,1,"RGB(200,200,200)","16:30"]],Count:963,MiddleCount:526,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}},o={Full:[[0,1,"RGB(200,200,200)","06:00"],[120,1,"RGB(200,200,200)","08:00"],[240,1,"RGB(200,200,200)","10:00"],[360,1,"RGB(200,200,200)","12:00"],[480,0,"RGB(200,200,200)","14:00"],[600,1,"RGB(200,200,200)","16:00"],[720,1,"RGB(200,200,200)","18:00"],[840,1,"RGB(200,200,200)","20:00"],[960,1,"RGB(200,200,200)","22:00"],[1080,1,"RGB(200,200,200)","0:00"],[1200,1,"RGB(200,200,200)","02:00"],[1320,1,"RGB(200,200,200)","04:00"]],Simple:[[0,1,"RGB(200,200,200)","06:00"],[240,1,"RGB(200,200,200)","10:00"],[480,0,"RGB(200,200,200)","14:00"],[720,1,"RGB(200,200,200)","18:00"],[960,1,"RGB(200,200,200)","22:00"],[1200,1,"RGB(200,200,200)","02:00"]],Min:[[0,1,"RGB(200,200,200)","06:00"],[480,0,"RGB(200,200,200)","14:00"],[960,1,"RGB(200,200,200)","22:00"]],Count:1440,MiddleCount:600,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}},s={Full:[[0,1,"RGB(200,200,200)","09:00"],[30,0,"RGB(200,200,200)","09:30"],[60,1,"RGB(200,200,200)","10:00"],[90,0,"RGB(200,200,200)","10:30"],[120,1,"RGB(200,200,200)","11:00"],[150,0,"RGB(200,200,200)","11:30"],[180,1,"RGB(200,200,200)","12:00"],[210,0,"RGB(200,200,200)","12:30"],[240,1,"RGB(200,200,200)","13:00"],[270,0,"RGB(200,200,200)","13:30"]],Simple:[[0,1,"RGB(200,200,200)","09:00"],[60,1,"RGB(200,200,200)","10:00"],[120,1,"RGB(200,200,200)","11:00"],[180,1,"RGB(200,200,200)","12:00"],[270,0,"RGB(200,200,200)","13:30"]],Min:[[0,1,"RGB(200,200,200)","09:00"],[60,1,"RGB(200,200,200)","11:00"],[270,0,"RGB(200,200,200)","13:30"]],Count:271,MiddleCount:151,GetData:function(t){return t<200?this.Min:t<450?this.Simple:this.Full}};this.GetCoordinateData=function(e,a){var i=null;if(e){var r=e.toLocaleUpperCase();if(wo.IsSHO(r))i=this.GetSHOData(r,a);else if(wo.IsSZO(r))i=this.GetSZOData(r,a);else if(wo.IsSH(r)||wo.IsSZ(r)||wo.IsSHSZIndex(r))i=this.GetSHSZData(r,a);else if(wo.IsBJ(r))i=this.GetBJData(r,a);else if(wo.IsHK(r))i=this.GetHKData(r,a);else if(wo.IsTW(r))i=this.GetTWData(r,a);else if(wo.IsJP(r))i=this.GetJPData(r,a);else{if(wo.IsCFFEX(r)||wo.IsCZCE(r)||wo.IsDCE(r)||wo.IsSHFE(r)||wo.IsGZFE(r))return this.GetChinatFuturesData(r,a);if(wo.IsUSA(r))i=this.GetUSAData(r,a);else if(wo.IsFTSE(r))i=this.GetFTSEData(r,a);else if(wo.IsFHK(r))i=this.GetFHKData(r,a);else if(wo.IsForeignExchange(r))i=this.GetForeignExchangeData(r);else if(wo.IsBIT(r,a))i=this.GetBITData(r,a);else if(wo.IsET(r))i=this.GetETData(r,a);else{if(wo.IsNYMEX(r))return i=this.GetNYMEXData(r,a);if(wo.IsCOMEX(r))return i=this.GetCOMEXData(r,a);if(wo.IsNYBOT(r))return i=this.GetNYBOTData(r,a);if(wo.IsCBOT(r))return i=this.GetCBOTData(r,a);if(wo.IsLME(r))return i=this.GetLMEData(r,a);if(wo.IsTOCOM(r))return i=this.GetTOCOMData(r,a);if(wo.IsIPE(r))return i=this.GetIPEData(r,a);if(wo.IsHSX(r))return i=this.GetHSXData(r,a);if(wo.IsHNX(r))return i=this.GetHNXData(r,a);if(wo.IsUPCOM(r))return i=this.GetUPCOMData(r,a)}}}else i=t;return{Count:i.Count,MiddleCount:i.MiddleCount,Data:i.GetData(a)}},this.GetSHSZData=function(e,a){return t},this.GetBJData=function(e,a){return t},this.GetUSAData=function(t,e){return i},this.GetHKData=function(t,e){return a},this.GetTWData=function(t,e){return s},this.GetSHOData=function(t,a){return e},this.GetSZOData=function(t,a){return e},this.GetFuturesData=function(t,e,a){var i=a.GetSplitData(t);if(!i)return null;var r=Fo.GetFutures(i);if(!r)return null;var n={Count:r.length},o=null;o=e<200?i.Coordinate.Min:e<480?i.Coordinate.Simple:i.Coordinate.Full;for(var s=[],l=0;l<r.length;++l)for(var h=r[l],u=0;u<o.length;++u){var C=o[u];if(h==C.Value){var c=[l,0,"RGB(200,200,200)",C.Text];s.push(c);break}}return n.Data=s,n},this.GetChinatFuturesData=function(t,e){return this.GetFuturesData(t,e,Lo)},this.GetNYMEXData=function(t,e){return this.GetFuturesData(t,e,No)},this.GetCOMEXData=function(t,e){return this.GetFuturesData(t,e,Ro)},this.GetNYBOTData=function(t,e){return this.GetFuturesData(t,e,Ao)},this.GetCBOTData=function(t,e){return this.GetFuturesData(t,e,Oo)},this.GetLMEData=function(t,e){return this.GetFuturesData(t,e,Po)},this.GetTOCOMData=function(t,e){return this.GetFuturesData(t,e,Bo)},this.GetIPEData=function(t,e){return this.GetFuturesData(t,e,_o)},this.GetFTSEData=function(t,e){return r},this.GetFHKData=function(t,e){return n},this.GetForeignExchangeData=function(t,e){return o},this.GetBITData=function(t,e){return o},this.GetETData=function(t,e){throw{Name:"MinuteCoordinateData::GetETData",Error:"not implement"}},this.GetJPData=function(t,e){throw{Name:"MinuteCoordinateData::GetJPData",Error:"not implement"}},this.GetHSXData=function(t,e){throw{Name:"MinuteCoordinateData::GetHSXData",Error:"not implement"}},this.GetHNXData=function(t,e){throw{Name:"MinuteCoordinateData::GetHNXData",Error:"not implement"}},this.GetUPCOMData=function(t,e){throw{Name:"MinuteCoordinateData::GetUPCOMData",Error:"not implement"}}}function $i(){this.TIME_SPLIT=[{Name:"9:00-10:15,10:31-11:30,13:31-15:00",Data:[{Start:900,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:930,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1e3,Text:"10:00"},{Value:1100,Text:"11:00"},{Value:1400,Text:"14:00"},{Value:1500,Text:"15:00"}],Min:[{Value:900,Text:"9:00"},{Value:1330,Text:"13:30"},{Value:1500,Text:"15:00"}]}},{Name:"9:30-11:30,13:01-15:15",Data:[{Start:930,End:1130},{Start:1301,End:1515}],Coordinate:{Full:[{Value:930,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1515,Text:"15:15"}],Simple:[{Value:930,Text:"9:30"},{Value:1030,Text:"10:30"},{Value:1300,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1515,Text:"15:15"}],Min:[{Value:930,Text:"9:30"},{Value:1300,Text:"13:00"},{Value:1515,Text:"15:15"}]}},{Name:"9:30-11:30,13:00-15:00",Data:[{Start:930,End:1130},{Start:1301,End:1500}],Coordinate:{Full:[{Value:930,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:930,Text:"9:30"},{Value:1030,Text:"10:30"},{Value:1300,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1500,Text:"15:00"}],Min:[{Value:930,Text:"9:30"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-23:30,9:00-10:15,10:30-11:30,13:30-15:00",Data:[{Start:2100,End:2330},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-1:00,9:01-10:15,10:31-11:30,13:31-15:00",Data:[{Start:2100,End:2359},{Start:0,End:100},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-2:30,9:01-10:15,10:31-11:30,13:31-15:00",Data:[{Start:2100,End:2359},{Start:0,End:230},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-23:00,9:01-10:15,10:30-11:30,13:31-15:00",Data:[{Start:2100,End:2300},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:1030,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1500,Text:"15:00"}]}},{Name:"9:00-11:30,13:00-15:00",Data:[{Start:900,End:1130},{Start:1300,End:1500}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1e3,Text:"10:00"},{Value:1300,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1500,Text:"15:00"}],Min:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:00-23:00,9:00-10:15,10:30-11:30,13:30-15:00",Data:[{Start:2100,End:2300},{Start:900,End:1015},{Start:1030,End:1130},{Start:1330,End:1500}],Coordinate:{Full:[{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:1030,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1500,Text:"15:00"}]}},{Name:"9:01-10:15,10:31-11:30,13:31-15:00",Data:[{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:901,Text:"9:00"},{Value:930,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:901,Text:"9:00"},{Value:1e3,Text:"10:00"},{Value:1330,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Min:[{Value:901,Text:"9:00"},{Value:1330,Text:"13:30"},{Value:1500,Text:"15:00"}]}},{Name:"21:01-1:00,9:01-10:15,10:31-11:30,13:31-15:00",Data:[{Start:2101,End:2359},{Start:0,End:100},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2101,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2101,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2101,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:01-23:00,9:01-10:15,10:30-11:30,13:31-15:00",Data:[{Start:2101,End:2300},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2101,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:1030,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2101,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Min:[{Value:2101,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1500,Text:"15:00"}]}},{Name:"21:01-2:30,9:01-10:15,10:31-11:30,13:31-15:00",Data:[{Start:2101,End:2359},{Start:0,End:230},{Start:901,End:1015},{Start:1031,End:1130},{Start:1331,End:1500}],Coordinate:{Full:[{Value:2101,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:901,Text:"9:00"},{Value:1031,Text:"10:30"},{Value:1331,Text:"13:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:2101,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:901,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"}],Min:[{Value:2101,Text:"21:00"},{Value:901,Text:"9:00"},{Value:1500,Text:"15:00"}]}},{Name:"9:30-11:30,13:01-15:15",Data:[{Start:931,End:1130},{Start:1301,End:1515}],Coordinate:{Full:[{Value:931,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1301,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1515,Text:"15:15"}],Simple:[{Value:931,Text:"9:30"},{Value:1030,Text:"10:30"},{Value:1301,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1515,Text:"15:15"}],Min:[{Value:931,Text:"9:30"},{Value:1301,Text:"13:00"},{Value:1515,Text:"15:15"}]}},{Name:"9:31-11:30,13:01-15:00",Data:[{Start:931,End:1130},{Start:1301,End:1500}],Coordinate:{Full:[{Value:931,Text:"9:30"},{Value:1e3,Text:"10:00"},{Value:1030,Text:"10:30"},{Value:1100,Text:"11:00"},{Value:1301,Text:"13:00"},{Value:1330,Text:"13:30"},{Value:1400,Text:"14:00"},{Value:1430,Text:"14:30"},{Value:1500,Text:"15:00"}],Simple:[{Value:931,Text:"9:30"},{Value:1030,Text:"10:30"},{Value:1301,Text:"13:00"},{Value:1400,Text:"14:00"},{Value:1500,Text:"15:00"}],Min:[{Value:931,Text:"9:30"},{Value:1301,Text:"13:00"},{Value:1500,Text:"15:00"}]}}],this.MAP_TWOWORDS=new Vn.default([[wo.DCE+"-JD",{Time:0,Decimal:0,Name:"é¸¡è"}],[wo.DCE+"-FB",{Time:0,Decimal:2,Name:"çº¤æ¿"}],[wo.DCE+"-BB",{Time:0,Decimal:2,Name:"è¶æ¿"}],[wo.DCE+"-PP",{Time:6,Decimal:0,Name:"ä¸ç¯"}],[wo.DCE+"-JM",{Time:6,Decimal:1,Name:"ç¦ç¤"}],[wo.DCE+"-EG",{Time:6,Decimal:0,Name:"ä¹äºé"}],[wo.DCE+"-EB",{Time:6,Decimal:0,Name:"è¯ä¹ç¯"}],[wo.DCE+"-CS",{Time:6,Decimal:0,Name:"æ·ç²"}],[wo.DCE+"-PG",{Time:6,Decimal:0,Name:"æ¶²åæ°"}],[wo.DCE+"-RR",{Time:6,Decimal:0,Name:"æ¢ç±³"}],[wo.DCE+"-LH",{Time:0,Decimal:0,Name:"ççª"}],[wo.SHFE+"-CU",{Time:4,Decimal:0,Name:"é"}],[wo.SHFE+"-AL",{Time:4,Decimal:0,Name:"é"}],[wo.SHFE+"-NI",{Time:4,Decimal:0,Name:"é"}],[wo.SHFE+"-SN",{Time:4,Decimal:0,Name:"æ²ªé¡"}],[wo.SHFE+"-ZN",{Time:4,Decimal:0,Name:"æ²ªé"}],[wo.SHFE+"-PB",{Time:4,Decimal:0,Name:"æ²ªé"}],[wo.SHFE+"-RU",{Time:6,Decimal:0,Name:"å¤©ç¶æ©¡è¶"}],[wo.SHFE+"-FU",{Time:6,Decimal:0,Name:"çææ²¹"}],[wo.SHFE+"-RB",{Time:6,Decimal:0,Name:"èºçº¹é¢"}],[wo.SHFE+"-BU",{Time:6,Decimal:0,Name:"ç³æ²¹æ²¥é"}],[wo.SHFE+"-HC",{Time:6,Decimal:0,Name:"ç­è½§å·æ¿"}],[wo.SHFE+"-SP",{Time:6,Decimal:0,Name:"çº¸æµ"}],[wo.SHFE+"-WR",{Time:0,Decimal:0,Name:"çº¿æ"}],[wo.SHFE+"-AG",{Time:5,Decimal:0,Name:"ç½é¶"}],[wo.SHFE+"-AU",{Time:5,Decimal:2,Name:"é»é"}],[wo.SHFE+"-SS",{Time:4,Decimal:0,Name:"ä¸éé¢"}],[wo.SHFE+"-AO",{Time:4,Decimal:0,Name:"æ°§åé"}],[wo.SHFE+"-BR",{Time:6,Decimal:0,Name:"åææ©¡è¶"}],[wo.SHFE+"-NR",{Time:6,Decimal:1,Name:"20å·è¶"}],[wo.SHFE+"-SC",{Time:5,Decimal:1,Name:"åæ²¹"}],[wo.SHFE+"-LU",{Time:6,Decimal:0,Name:"ä½ç¡«çæ²¹"}],[wo.SHFE+"-BC",{Time:4,Decimal:0,Name:"å½éé"}],[wo.SHFE+"-EC",{Time:0,Decimal:0,Name:"éè¿ææ°"}],[wo.CZCE+"-CF",{Time:6,Decimal:0,Name:"æ£è±"}],[wo.CZCE+"-SR",{Time:6,Decimal:0,Name:"ç½ç³"}],[wo.CZCE+"-MA",{Time:6,Decimal:0,Name:"ç²é"}],[wo.CZCE+"-ZC",{Time:6,Decimal:1,Name:"å¨åç¤"}],[wo.CZCE+"-TA",{Time:6,Decimal:0,Name:"ç²¾å¯¹è¯äºç²é¸(PTA)"}],[wo.CZCE+"-RM",{Time:6,Decimal:0,Name:"èç±½ç²"}],[wo.CZCE+"-OI",{Time:6,Decimal:0,Name:"èç±½æ²¹"}],[wo.CZCE+"-ME",{Time:3,Decimal:0,Name:"ç²é(è)"}],[wo.CZCE+"-FG",{Time:6,Decimal:0,Name:"å¹³æ¿ç»ç"}],[wo.CZCE+"-WS",{Time:0,Decimal:0}],[wo.CZCE+"-WT",{Time:0,Decimal:0}],[wo.CZCE+"-GN",{Time:0,Decimal:0}],[wo.CZCE+"-RO",{Time:0,Decimal:0}],[wo.CZCE+"-RS",{Time:0,Decimal:0,Name:"èç±½"}],[wo.CZCE+"-ER",{Time:0,Decimal:0}],[wo.CZCE+"-RI",{Time:0,Decimal:0,Name:"æ©ç±¼ç¨»"}],[wo.CZCE+"-WH",{Time:0,Decimal:0,Name:"å¼ºéº¦"}],[wo.CZCE+"-AP",{Time:0,Decimal:0,Name:"è¹æ"}],[wo.CZCE+"-PM",{Time:0,Decimal:0,Name:"æ®éº¦"}],[wo.CZCE+"-QM",{Time:0,Decimal:0}],[wo.CZCE+"-TC",{Time:0,Decimal:0}],[wo.CZCE+"-JR",{Time:0,Decimal:0,Name:"ç²³ç¨»"}],[wo.CZCE+"-LR",{Time:0,Decimal:0,Name:"æç±¼ç¨»"}],[wo.CZCE+"-SF",{Time:0,Decimal:0,Name:"ç¡é"}],[wo.CZCE+"-SM",{Time:0,Decimal:0,Name:"é°ç¡"}],[wo.CZCE+"-CJ",{Time:0,Decimal:2,Name:"çº¢æ£"}],[wo.CZCE+"-CY",{Time:6,Decimal:0,Name:"æ£çº±"}],[wo.CZCE+"-UR",{Time:0,Decimal:0,Name:"å°¿ç´ "}],[wo.CZCE+"-SA",{Time:6,Decimal:0,Name:"çº¯ç¢±"}],[wo.CZCE+"-PF",{Time:6,Decimal:0,Name:"ç­çº¤"}],[wo.CZCE+"-PK",{Time:0,Decimal:0,Name:"è±ç"}],[wo.CZCE+"-PR",{Time:6,Decimal:0,Name:"ç¶ç"}],[wo.CFFEX+"-TF",{Time:1,Decimal:3,Name:"äºåº"}],[wo.CFFEX+"-TS",{Time:1,Decimal:3,Name:"äºåº"}],[wo.CFFEX+"-IH",{Time:2,Decimal:1,Name:"ä¸è¯è¡ææè´§"}],[wo.CFFEX+"-IC",{Time:2,Decimal:1,Name:"ä¸­è¯è¡ææè´§"}],[wo.CFFEX+"-IF",{Time:2,Decimal:1,Name:"æ²ªæ·±è¡ææè´§"}],[wo.CFFEX+"-IM",{Time:2,Decimal:1,Name:"ä¸­è¯1000è¡ææè´§"}],[wo.CFFEX+"-IO",{Time:2,Decimal:1,Name:"æ²ªæ·±300è¡æææ"}],[wo.CFFEX+"-MO",{Time:2,Decimal:1,Name:"ä¸­è¯1000è¡æææ"}],[wo.CFFEX+"-HO",{Time:2,Decimal:1,Name:"ä¸è¯50è¡æææ"}],[wo.GZFE+"-SI",{Time:0,Decimal:2,Name:"å·¥ä¸ç¡"}],[wo.GZFE+"-LC",{Time:0,Decimal:2,Name:"ç¢³é¸é"}]]),this.MAP_ONEWORD=new Vn.default([[wo.DCE+"-C",{Time:6,Decimal:0,Name:"çç±³"}],[wo.DCE+"-L",{Time:6,Decimal:0,Name:"ä¹ç¯"}],[wo.DCE+"-V",{Time:6,Decimal:0,Name:"PVC"}],[wo.DCE+"-A",{Time:6,Decimal:0,Name:"è±ä¸"}],[wo.DCE+"-B",{Time:6,Decimal:0,Name:"è±äº"}],[wo.DCE+"-M",{Time:6,Decimal:0,Name:"è±ç²"}],[wo.DCE+"-Y",{Time:6,Decimal:0,Name:"è±æ²¹"}],[wo.DCE+"-P",{Time:6,Decimal:0,Name:"æ£æ¦"}],[wo.DCE+"-J",{Time:6,Decimal:1,Name:"ç¦ç­"}],[wo.DCE+"-I",{Time:6,Decimal:1,Name:"éç¿"}],[wo.CFFEX+"-T",{Time:1,Decimal:3,Name:"ååº"}]]),this.AddNewFutures=function(t){if(t){var e=t.Suffix+"-"+t.Symbol,a={Time:t.Time,Decimal:t.Decimal,Name:t.Name};1==t.Symbol.length?this.MAP_ONEWORD.set(e,a):2==t.Symbol.length&&this.MAP_TWOWORDS.set(e,a)}},this.GetData=function(t){var e=t.charAt(0),a=t.substr(0,2),i=null,r=null;return wo.IsDCE(t)?(i=wo.DCE+"-"+e,r=wo.DCE+"-"+a):wo.IsSHFE(t)?(i=wo.SHFE+"-"+e,r=wo.SHFE+"-"+a):wo.IsCFFEX(t)?(i=wo.CFFEX+"-"+e,r=wo.CFFEX+"-"+a):wo.IsCZCE(t)?(i=wo.CZCE+"-"+e,r=wo.CZCE+"-"+a):wo.IsGZFE(t)&&(i=wo.GZFE+"-"+e,r=wo.GZFE+"-"+a),this.MAP_TWOWORDS.has(r)?this.MAP_TWOWORDS.get(r):this.MAP_ONEWORD.has(i)?this.MAP_ONEWORD.get(i):null},this.GetSplitData=function(t){var e=this.GetData(t);return e?this.TIME_SPLIT[e.Time]:null},this.GetDecimal=function(t){var e=this.GetData(t);return e?e.Decimal:2}}function tr(){this.TIME_SPLIT=[{Name:"6:00-5:00",Data:[{Start:600,End:2359},{Start:0,End:500}],Coordinate:{Full:[{Value:600,Text:"6:00"},{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"},{Value:400,Text:"4:00"}],Simple:[{Value:600,Text:"6:00"},{Value:1e3,Text:"10:00"},{Value:1400,Text:"14:00"},{Value:1800,Text:"18:00"},{Value:2200,Text:"22:00"},{Value:200,Text:"2:00"}],Min:[{Value:600,Text:"6:00"},{Value:1800,Text:"18:00"},{Value:500,Text:"5:00"}]}}],this.TIME_SPLIT2=[{Name:"7:00-6:00",Data:[{Start:700,End:2359},{Start:0,End:600}],Coordinate:{Full:[{Value:700,Text:"7:00"},{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"},{Value:500,Text:"5:00"}],Simple:[{Value:700,Text:"7:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"},{Value:1900,Text:"19:00"},{Value:2300,Text:"23:00"},{Value:300,Text:"3:00"}],Min:[{Value:700,Text:"7:00"},{Value:1900,Text:"19:00"},{Value:500,Text:"5:00"}]}}],this.FUTURES_LIST=[{Symbol:"CL",Decimal:2,Time:0,Name:"åæ²¹"},{Symbol:"NG",Decimal:3,Time:0,Name:"å¤©ç¶æ°"},{Symbol:"RB",Decimal:4,Time:0,Name:"æ±½æ²¹"},{Symbol:"PL",Decimal:1,Time:0,Name:"éé"},{Symbol:"PA",Decimal:2,Time:0,Name:"é¯é"},{Symbol:"HR",Decimal:0,Time:0,Name:"ç­è½§é¢å·"},{Symbol:"QM",Decimal:3,Time:0,Name:"è¿·ä½ åæ²¹"},{Symbol:"HO",Decimal:4,Time:0,Name:"çæ²¹"}],this.MarketSuffix=".NYMEX",this.TimeType=0,this.GetFuturesInfo=function(t){if(t.indexOf(this.MarketSuffix)<=0)return null;for(var e in this.FUTURES_LIST){var a=this.FUTURES_LIST[e];if(0==t.indexOf(a.Symbol))return a}return null},this.GetSplitData=function(t){var e=0==this.TimeType?this.TIME_SPLIT:this.TIME_SPLIT2,a=this.GetFuturesInfo(t);return a?e[a.Time]:e[0]},this.GetDecimal=function(t){var e=this.GetFuturesInfo(t);return e?e.Decimal:3},this.GetMarketStatus=function(t){var e=lr(-4),a=new Date,i=e.getDay(),r=100*a.getHours()+a.getMinutes();return 6==i||0==i?0:r>430&&r<730?1:2},this.AddNewFutures=function(t){if(t){for(var e={Symbol:t.Symbol,Time:t.Time,Decimal:t.Decimal,Name:t.Name},a=0;a<this.FUTURES_LIST.length;++a){if(this.FUTURES_LIST[a].Symbol==e.Symbol)return void(this.FUTURES_LIST[a]=e)}this.FUTURES_LIST.push(e)}}}function er(){this.newMethod=tr,this.newMethod(),delete this.newMethod,this.FUTURES_LIST=[{Symbol:"GC",Decimal:1,Time:0,Name:"COMEXé»é"},{Symbol:"QO",Decimal:2,Time:0,Name:"è¿·ä½ é»é"},{Symbol:"MG",Decimal:1,Time:0,Name:"å¾®åé»é"},{Symbol:"QI",Decimal:4,Time:0,Name:"è¿·ä½ ç½é¶"},{Symbol:"SI",Decimal:3,Time:0,Name:"COMEXç½é¶"},{Symbol:"HG",Decimal:4,Time:0,Name:"COMEXé"}],this.MarketSuffix=".COMEX"}function ar(){this.newMethod=tr,this.newMethod(),delete this.newMethod,this.TIME_SPLIT=[{Name:"9:00-2:20",Data:[{Start:900,End:2359},{Start:0,End:220}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:100,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1700,Text:"17:00"},{Value:100,Text:"1:00"}]}},{Name:"15:30-1:00",Data:[{Start:1530,End:2359},{Start:0,End:100}],Coordinate:{Full:[{Value:1600,Text:"16:00"},{Value:1700,Text:"17:00"},{Value:1800,Text:"18:00"},{Value:1900,Text:"19:00"},{Value:2e3,Text:"20:00"},{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:0,Text:"0:00"},{Value:100,Text:"1:00"}],Simple:[{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"}],Min:[{Value:1600,Text:"16:00"},{Value:2100,Text:"21:00"},{Value:100,Text:"1:00"}]}}],this.TIME_SPLIT2=[{Name:"10:00-3:20",Data:[{Start:1e3,End:2359},{Start:0,End:320}],Coordinate:{Full:[{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:1e3,Text:"10:00"},{Value:1400,Text:"14:00"},{Value:1800,Text:"18:00"},{Value:2200,Text:"22:00"},{Value:200,Text:"2:00"}],Min:[{Value:1e3,Text:"10:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}},{Name:"16:30-2:00",Data:[{Start:1630,End:2359},{Start:0,End:200}],Coordinate:{Full:[{Value:1700,Text:"17:00"},{Value:1800,Text:"18:00"},{Value:1900,Text:"19:00"},{Value:2e3,Text:"20:00"},{Value:2100,Text:"21:00"},{Value:2200,Text:"22:00"},{Value:2300,Text:"23:00"},{Value:0,Text:"0:00"},{Value:100,Text:"1:00"},{Value:200,Text:"2:00"}],Simple:[{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"}],Min:[{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:200,Text:"2:00"}]}}],this.FUTURES_LIST=[{Symbol:"SB",Decimal:2,Time:1},{Symbol:"CT",Decimal:2,Time:0}],this.MarketSuffix=".NYBOT",this.GetMarketStatus=function(t){var e=lr(-4),a=e.getDay(),i=100*e.getHours()+e.getMinutes();if(6==a||0==a)return 0;var r=this.GetFuturesInfo(t);if(!r)return 2;if("SB"==r.Symbol){if(i>300&&i<1400)return 2}else if("CT"==r.Symbol)return i>=0&&i<=1500||i>=2e3&&i<=2359?2:1;return 0}}function ir(){this.newMethod=tr,this.newMethod(),delete this.newMethod,this.TIME_SPLIT=[{Name:"8:00-2:20",Data:[{Start:800,End:2359},{Start:0,End:220}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"}],Min:[{Value:800,Text:"8:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}},{Name:"8:00-2:45",Data:[{Start:800,End:2359},{Start:0,End:245}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"}],Min:[{Value:800,Text:"8:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}},{Name:"6:00-5:00",Data:[{Start:600,End:2359},{Start:0,End:500}],Coordinate:{Full:[{Value:600,Text:"6:00"},{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"},{Value:400,Text:"4:00"}],Simple:[{Value:600,Text:"6:00"},{Value:1e3,Text:"10:00"},{Value:1400,Text:"14:00"},{Value:1800,Text:"18:00"},{Value:2200,Text:"22:00"},{Value:200,Text:"2:00"}],Min:[{Value:600,Text:"6:00"},{Value:1800,Text:"18:00"},{Value:500,Text:"5:00"}]}},{Name:"08:00-20:45 21:31-02:20",Data:[{Start:800,End:2045},{Start:2131,End:2359},{Start:0,End:220}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"}],Min:[{Value:800,Text:"8:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}},{Name:"8:00-2:45",Data:[{Start:800,End:2045},{Start:2131,End:2359},{Start:0,End:245}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"}],Min:[{Value:800,Text:"8:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}},{Name:"06:00-04:15 04:31-05:00",Data:[{Start:600,End:2359},{Start:0,End:415},{Start:431,End:500}],Coordinate:{Full:[{Value:600,Text:"6:00"},{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"},{Value:400,Text:"4:00"}],Simple:[{Value:600,Text:"6:00"},{Value:1e3,Text:"10:00"},{Value:1400,Text:"14:00"},{Value:1800,Text:"18:00"},{Value:2200,Text:"22:00"},{Value:200,Text:"2:00"}],Min:[{Value:600,Text:"6:00"},{Value:1800,Text:"18:00"},{Value:500,Text:"5:00"}]}}],this.TIME_SPLIT2=[{Name:"9:00-3:20",Data:[{Start:900,End:2359},{Start:0,End:320}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1900,Text:"19:00"},{Value:300,Text:"3:00"}]}},{Name:"9:00-3:45",Data:[{Start:900,End:2359},{Start:0,End:345}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1900,Text:"19:00"},{Value:300,Text:"3:00"}]}},{Name:"7:00-6:00",Data:[{Start:700,End:2359},{Start:0,End:600}],Coordinate:{Full:[{Value:700,Text:"7:00"},{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"},{Value:500,Text:"5:00"}],Simple:[{Value:700,Text:"7:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"},{Value:1900,Text:"19:00"},{Value:2300,Text:"23:00"},{Value:300,Text:"3:00"}],Min:[{Value:700,Text:"7:00"},{Value:1800,Text:"18:00"},{Value:500,Text:"5:00"}]}},{Name:"09:00-21:45 22:31-03:20",Data:[{Start:900,End:2145},{Start:2231,End:2359},{Start:0,End:320}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1900,Text:"19:00"},{Value:300,Text:"3:00"}]}},{Name:"09:00-21:45 22:31-03:45",Data:[{Start:900,End:2145},{Start:2231,End:2359},{Start:0,End:345}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1900,Text:"19:00"},{Value:300,Text:"3:00"}]}},{Name:"07:00-05:15 05:31-06:00",Data:[{Start:700,End:2359},{Start:0,End:515},{Start:531,End:600}],Coordinate:{Full:[{Value:700,Text:"7:00"},{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"},{Value:500,Text:"5:00"}],Simple:[{Value:700,Text:"7:00"},{Value:1100,Text:"11:00"},{Value:1500,Text:"15:00"},{Value:1900,Text:"19:00"},{Value:2300,Text:"23:00"},{Value:300,Text:"3:00"}],Min:[{Value:700,Text:"7:00"},{Value:1800,Text:"18:00"},{Value:500,Text:"5:00"}]}}],this.FUTURES_LIST=[{Symbol:"ZC",Decimal:2,Time:0,Name:"çç±³"},{Symbol:"XC",Decimal:2,Time:1,Name:"è¿·ä½ çç±³"},{Symbol:"ZS",Decimal:2,Time:0,Name:"å¤§è±"},{Symbol:"XK",Decimal:2,Time:1,Name:"è¿·ä½ å¤§è±"},{Symbol:"ZL",Decimal:2,Time:0,Name:"è±æ²¹"},{Symbol:"ZR",Decimal:2,Time:0,Name:"ç¨»è°·"},{Symbol:"ZO",Decimal:2,Time:0,Name:"çéº¦"},{Symbol:"ZW",Decimal:2,Time:0,Name:"å°éº¦"},{Symbol:"XW",Decimal:2,Time:1,Name:"è¿·ä½ å°éº¦"},{Symbol:"ZM",Decimal:1,Time:0,Name:"è±ç²"},{Symbol:"EH",Decimal:3,Time:2},{Symbol:"YM",Decimal:0,Time:2,Name:"å°åéæ"},{Symbol:"ES",Decimal:2,Time:2,Name:"å°åæ æ®"},{Symbol:"NQ",Decimal:2,Time:2,Name:"å°åçº³æ"},{Symbol:"TY",Decimal:4,Time:2,Name:"10å¹´ç¾å½åº"},{Symbol:"TU",Decimal:4,Time:2,Name:"2å¹´ç¾å½åº"},{Symbol:"FV",Decimal:4,Time:2,Name:"5å¹´ç¾å½åº"},{Symbol:"US",Decimal:4,Time:2,Name:"30å¹´ç¾å½åº"},{Symbol:"UL",Decimal:4,Time:2,Name:"è¶å½åº"}],this.MarketSuffix=".CBOT"}function rr(){this.newMethod=tr,this.newMethod(),delete this.newMethod,this.TIME_SPLIT=[{Name:"LME 9:00-3:00",Data:[{Start:900,End:2359},{Start:0,End:300}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:300,Text:"3:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:100,Text:"1:00"}],Min:[{Value:900,Text:"9:00"},{Value:1800,Text:"18:00"},{Value:300,Text:"3:00"}]}}],this.TIME_SPLIT=[{Name:"LME 8:00-2:00",Data:[{Start:800,End:2359},{Start:0,End:200}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"}],Min:[{Value:800,Text:"8:00"},{Value:1800,Text:"18:00"},{Value:200,Text:"2:00"}]}}],this.FUTURES_LIST=[{Symbol:"SN",Decimal:0,Time:0,Name:"LMEé¡"},{Symbol:"AH",Decimal:2,Time:0,Name:"LMEé"},{Symbol:"PB",Decimal:2,Time:0,Name:"LMEé"},{Symbol:"ZS",Decimal:2,Time:0,Name:"LMEé"},{Symbol:"CA",Decimal:2,Time:0,Name:"LMEé"},{Symbol:"NI",Decimal:0,Time:0,Name:"LMEé"}],this.MarketSuffix=".LME"}function nr(){this.newMethod=tr,this.newMethod(),delete this.newMethod,this.TimeType=0,this.TIME_SPLIT=[{Name:"15:30-04:30 07:46-14:15",Data:[{Start:1530,End:2359},{Start:0,End:430},{Start:746,End:1415}],Coordinate:{Full:[{Value:1530,Text:"15:30"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:300,Text:"3:00"},{Value:430,Text:"4:30"},{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1415,Text:"14:15"}],Simple:[{Value:1530,Text:"15:30"},{Value:1900,Text:"19:00"},{Value:2300,Text:"23:00"},{Value:100,Text:"1:00"},{Value:430,Text:"4:30"},{Value:1100,Text:"11:00"},{Value:1415,Text:"14:15"}],Min:[{Value:1530,Text:"15:30"},{Value:100,Text:"1:00"},{Value:1415,Text:"14:15"}]}}],this.FUTURES_LIST=[{Symbol:"JRV",Decimal:0,Time:0,Name:"ä¸äº¬TSR20æ©¡è¶"},{Symbol:"JPL",Decimal:0,Time:0,Name:"ä¸äº¬éé"},{Symbol:"JAU",Decimal:0,Time:0,Name:"ä¸äº¬é»é"},{Symbol:"JCO",Decimal:0,Time:0,Name:"ä¸­ä¸åæ²¹"},{Symbol:"JRU",Decimal:1,Time:0,Name:"ä¸äº¬RSS3æ©¡è¶æ©¡è¶"},{Symbol:"JAG",Decimal:1,Time:0,Name:"æ¥ç½é¶"},{Symbol:"JPA",Decimal:1,Time:0,Name:"æ¥é¯é"}],this.MarketSuffix=".TOCOM"}function or(){this.newMethod=tr,this.newMethod(),delete this.newMethod,this.MarketSuffix=".IPE",this.TIME_SPLIT=[{Name:"8:00-6:00",Data:[{Start:800,End:2359},{Start:0,End:600}],Coordinate:{Full:[{Value:800,Text:"8:00"},{Value:1e3,Text:"10:00"},{Value:1200,Text:"12:00"},{Value:1400,Text:"14:00"},{Value:1600,Text:"16:00"},{Value:1800,Text:"18:00"},{Value:2e3,Text:"20:00"},{Value:2200,Text:"22:00"},{Value:0,Text:"0:00"},{Value:200,Text:"2:00"},{Value:400,Text:"4:00"},{Value:600,Text:"6:00"}],Simple:[{Value:800,Text:"8:00"},{Value:1200,Text:"12:00"},{Value:1600,Text:"16:00"},{Value:2e3,Text:"20:00"},{Value:0,Text:"0:00"},{Value:400,Text:"4:00"},{Value:600,Text:"6:00"}],Min:[{Value:800,Text:"8:00"},{Value:2e3,Text:"20:00"},{Value:600,Text:"6:00"}]}}],this.TIME_SPLIT2=[{Name:"09:00-07:00",Data:[{Start:900,End:2359},{Start:0,End:700}],Coordinate:{Full:[{Value:900,Text:"9:00"},{Value:1100,Text:"11:00"},{Value:1300,Text:"13:00"},{Value:1500,Text:"15:00"},{Value:1700,Text:"17:00"},{Value:1900,Text:"19:00"},{Value:2100,Text:"21:00"},{Value:2300,Text:"23:00"},{Value:1,Text:"1:00"},{Value:300,Text:"3:00"},{Value:500,Text:"5:00"},{Value:700,Text:"7:00"}],Simple:[{Value:900,Text:"9:00"},{Value:1300,Text:"13:00"},{Value:1700,Text:"17:00"},{Value:2100,Text:"21:00"},{Value:1,Text:"1:00"},{Value:500,Text:"5:00"},{Value:700,Text:"7:00"}],Min:[{Value:900,Text:"9:00"},{Value:2100,Text:"21:00"},{Value:700,Text:"7:00"}]}}],this.FUTURES_LIST=[{Symbol:"RC",Decimal:2,Time:0,Name:"ç½å¸æ¯å¡åå¡"},{Symbol:"W",Decimal:2,Time:0,Name:"ç½ç³"},{Symbol:"C",Decimal:2,Time:0,Name:"ä¼¦æ¦å¯å¯"},{Symbol:"R",Decimal:2,Time:0,Name:"é¿æè±å½å½åº"},{Symbol:"L",Decimal:2,Time:0,Name:"3ä¸ªæè±éå©ç"},{Symbol:"T",Decimal:2,Time:0,Name:"WTIåæ²¹"},{Symbol:"G",Decimal:2,Time:0,Name:"ä½ç¡«æ´æ²¹"},{Symbol:"B",Decimal:2,Time:0,Name:"å¸ä¼¦ç¹åæ²¹"}]}function sr(t){var e=2;if(!t)return e;var a=t.toUpperCase();return"function"==typeof wo.GetCustomDecimal?wo.GetCustomDecimal(a):e=wo.IsSHSZFund(a)?3:wo.IsSHO(a)||wo.IsSZO(a)?wo.GetSHODecimal(a):wo.IsChinaFutures(a)?Lo.GetDecimal(a):wo.IsFHK(a)?wo.GetFHKDecimal(a):wo.IsFTSE(a)?wo.GetFTSEDecimal(a):wo.IsBIT(a)?wo.GetBITDecimal(a):wo.IsET(a)?wo.GetETDecimal(a):wo.IsForeignExchange(a)?wo.GetForeignExchangeDecimal(a):wo.IsNYMEX(a)?No.GetDecimal(a):wo.IsCOMEX(a)?Ro.GetDecimal(a):wo.IsNYBOT(a)?Ao.GetDecimal(a):wo.IsCBOT(a)?Oo.GetDecimal(a):wo.IsLME(a)?Po.GetDecimal(a):wo.IsTOCOM(a)?Bo.GetDecimal(a):wo.IsIPE(a)?_o.GetDecimal(a):wo.IsHK(a)?wo.GetHKDecimal(a):wo.IsTW(a)?wo.GetTWDecimal(a):wo.IsJP(a)?wo.GetJPDecimal(a):wo.IsHSX(a)?wo.GetHSXDecimal(a):wo.IsHNX(a)?wo.GetHNXDecimal(a):wo.IsUPCOM(a)?wo.GetUPCOMDecimal(a):wo.IsSZ(a)?wo.GetSZDecimal(a):wo.IsSH(a)?wo.GetSHDecimal(a):wo.GetDefaultDecimal(a)}function lr(t){if("number"==typeof t){var e=new Date,a=e.getTime(),i=6e4*e.getTimezoneOffset(),r=a+i;return new Date(r+36e5*t)}}function hr(){}function ur(){this.Error=[],this.RecordError=function(t){this.Error.push(t)},this.ConstructError=function(t,e){var a=new Error(t);try{throw a}catch(t){En.default&&bn.default&&(a=(0,En.default)(t),a.Column=e)}return a},this.CreateError=function(t,e,a,i,r){var n="Line "+e+": "+i,o=this.ConstructError(n,a);return o.Index=t,o.LineNumber=e,o.Description=i,o.Word=r,o},this.ThrowError=function(t,e,a,i,r){throw this.CreateError(t,e,a,i,r)},this.ThrowDownloadJob=function(t,e,a,i,r){var n=this.CreateError(t,e,a,i);throw n.Job=r,n}}function Cr(t,e){this.Source=t,this.ErrorHandler=e,this.Length=t.length,this.Index=0,this.LineNumber=t.length>0?1:0,this.LineStart=0,this.CurlyStack=[],this.SaveState=function(){return{Index:this.Index,LineNumber:this.LineNumber,LineStart:this.LineStart}},this.RestoreState=function(t){this.Index=t.Index,this.LineNumber=t.LineNumber,this.LineStart=t.LineStart},this.IsEOF=function(){return this.Index>=this.Length},this.IsKeyword=function(t){return!1},this.CodePointAt=function(t){var e=this.Source.charCodeAt(t);if(e>=55296&&e<=56319){var a=this.Source.charCodeAt(t+1);if(a>=56320&&a<=57343){e=1024*(e-55296)+a-56320+65536}}return e},this.Lex=function(){if(this.IsEOF())return{Type:2,Value:"",LineNumber:this.LineNumber,LineStart:this.LineStart,Start:this.Index,End:this.Index};var t=this.Source.charCodeAt(this.Index);return Ho.IsIdentifierStart(t)?this.ScanIdentifier():40===t||41===t||59===t?this.ScanPunctuator():39===t||34===t?this.ScanStringLiteral():46==t?Ho.IsDecimalDigit(this.Source.charCodeAt(this.Index+1))?this.ScanNumericLiteral():this.ScanPunctuator():Ho.IsDecimalDigit(t)?this.ScanNumericLiteral():t>=55296&&t<57343&&Ho.IsIdentifierStart(this.CodePointAt(this.Index))?this.ScanIdentifier():this.ScanPunctuator()},this.ScanIdentifier=function(){var t=void 0,e=this.Index,a=92===this.Source.charCodeAt(e)?this.GetComplexIdentifier():this.GetIdentifier();if(3!=(t=a.length?3:this.IsKeyword(a)?4:null==a?5:"true"==a||"false"==a?1:3)&&e+a.length!=this.Index){this.Index;throw this.Index=e,ko.InvalidEscapedReservedWord}return"AND"!=a&&"OR"!=a||(t=7),{Type:t,Value:a,LineNumber:this.LineNumber,LineStart:this.LineStart,Start:e,End:this.Index}},this.GetIdentifier=function(){for(var t=this.Index++;!this.IsEOF();){var e=this.Source.charCodeAt(this.Index);if(92==e)return this.Index=t,this.GetComplexIdentifier();if(e>=55296&&e<57343)return this.Index=t,this.GetComplexIdentifier();if(!Ho.IsIdentifierPart(e))break;++this.Index}return this.Source.slice(t,this.Index)},this.ScanPunctuator=function(){var t=this.Index,e=this.Source[this.Index];switch(e){case"(":++this.Index;break;case")":case";":case",":case".":++this.Index;break;default:e=this.Source.substr(this.Index,3),"AND"==e?this.Index+=3:(e=this.Source.substr(this.Index,2),"&&"===e||"||"===e||"=="===e||"!="===e||"<="===e||">="===e||"=>"===e||":="==e||"OR"==e||"<>"==e?this.Index+=2:(e=this.Source[this.Index],"<>=!+-*%&|^/:".indexOf(e)>=0&&++this.Index))}return this.Index==t&&this.ThrowUnecpectedToken(),{Type:7,Value:e,LineNumber:this.LineNumber,LineStart:this.LineStart,Start:t,End:this.Index}},this.ScanStringLiteral=function(){var t=this.Index,e=this.Source[this.Index];++this.Index;for(var a="";!this.IsEOF();){var i=this.Source[this.Index++];if(i==e){e="";break}if("\\"==i)throw"not complete";if(Ho.IsLineTerminator(i.charCodeAt(0)))break;a+=i}return""!=e&&(this.Index=t,this.ThrowUnecpectedToken()),{Type:8,Value:a,LineNumber:this.LineNumber,LineStart:this.LineStart,Start:t,End:this.Index}},this.ScanNumericLiteral=function(){var t=this.Index,e=this.Source[this.Index],a="";if("."!=e){if(a=this.Source[this.Index++],e=this.Source[this.Index],"0"==a&&("x"==e||"X"==e))return++this.Index,this.ScanHexLiteral(t);for(;Ho.IsDecimalDigit(this.Source.charCodeAt(this.Index));)a+=this.Source[this.Index++];e=this.Source[this.Index]}if("."==e){for(a+=this.Source[this.Index++];Ho.IsDecimalDigit(this.Source.charCodeAt(this.Index));)a+=this.Source[this.Index++];e=this.Source[this.Index]}if("e"==e||"E"==e)if(a+=this.Source[this.Index++],e=this.Source[this.Index],"+"!=e&&"-"!=e||(a+=this.Source[this.Index]),Ho.IsDecimalDigit(this.Source.charCodeAt(this.Index)))for(;Ho.IsDecimalDigit(this.Source.charCodeAt(this.Index));)a+=this.Source[this.Index++];else this.ThrowUnecpectedToken();return Ho.IsIdentifierStart(this.Source.charCodeAt(this.Index))&&this.ThrowUnecpectedToken(),{Type:6,Value:parseFloat(a),LineNumber:this.LineNumber,LineStart:this.LineStart,Start:t,End:this.Index}},this.ScanComments=function(){for(this.Index;!this.IsEOF();){var t=this.Source.charCodeAt(this.Index);if(Ho.IsWhiteSpace(t))++this.Index;else if(Ho.IsLineTerminator(t))++this.Index,13==t&&10==this.Source.charCodeAt(this.Index)&&++this.Index,++this.LineNumber,this.LineStart=this.Index,!0;else if(47==t){if(47!=(t=this.Source.charCodeAt(this.Index+1)))break;this.Index+=2;this.SkipSingleLineComment(2);!0}else{if(123!=t)break;this.Index+=1;this.SkipMultiLineComment()}}},this.SkipMultiLineComment=function(){for(var t=[];!this.IsEOF();){var e=this.Source.charCodeAt(this.Index);if(Ho.IsLineTerminator(e))++this.LineNumber,++this.Index,this.LineStart=this.Index;else{if(125==e)return this.Index+=1,t;++this.Index}}return t},this.SkipSingleLineComment=function(t){for(var e=[];!this.IsEOF();){var a=this.Source.charCodeAt(this.Index);if(++this.Index,Ho.IsLineTerminator(a))return 13===a&&10===this.Source.charCodeAt(this.Index)&&++this.Index,++this.LineNumber,this.LineStart=this.Index,e}return e},this.ThrowUnecpectedToken=function(t,e){return t||(t=ko.UnexpectedTokenIllegal),this.ErrorHandler.ThrowError(this.Index,this.LineNumber,this.Index-this.LineStart+1,t,e)}}function cr(t){this.ErrorHandler=new ur,this.Scanner=new Cr(t,this.ErrorHandler),this.Buffer=[],this.GetNextToken=function(){if(0==this.Buffer.length){this.Scanner.ScanComments();if(!this.Scanner.IsEOF()){var t=this.Scanner.Lex(),e={Type:Yo[t.Type],Value:this.Scanner.Source.slice(t.Start,t.End)};this.Buffer.push(e)}}return this.Buffer.shift()}}function fr(t){this.IsNeedIndexData=!1,this.IsNeedLatestIndexData=!1,this.IsNeedSymbolData=!1,this.IsNeedMarginData=new Rn.default,this.IsNeedNewsAnalysisData=new Rn.default,this.NeedBlockIncreaseData=[],this.IsNeedSymbolExData=new Rn.default,this.NeedHK2SHSZData=[],this.IsNeedSectionFinance=new Vn.default,this.FunctionData=[],this.Dynainfo=[],this.IsAPIData=[],this.ExecuteIndex=[],this.OtherSymbolData=[],this.PeriodSymbolData=[],this.ErrorHandler=t,this.GetDataJobList=function(){var t=[];this.IsNeedSymbolData&&t.push({ID:Ko.JOB_DOWNLOAD_SYMBOL_DATA}),this.IsNeedIndexData&&t.push({ID:Ko.JOB_DOWNLOAD_INDEX_DATA}),this.IsNeedLatestIndexData&&t.push({ID:Ko.JOB_DOWNLOAD_LATEST_INDEX_DATA});for(var e=0;e<this.Dynainfo.length;++e){var a=this.Dynainfo[e];t.push(a)}for(var e in this.NeedBlockIncreaseData)t.push(this.NeedBlockIncreaseData[e]);var i=!0,r=!1,n=void 0;try{for(var o,s=(0,Gn.default)(this.IsNeedMarginData);!(i=(o=s.next()).done);i=!0){var l=o.value;t.push({ID:l})}}catch(t){r=!0,n=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw n}}for(var e in this.NeedHK2SHSZData)t.push(this.NeedHK2SHSZData[e]);var h=!0,u=!1,C=void 0;try{for(var c,f=(0,Gn.default)(this.IsNeedNewsAnalysisData);!(h=(c=f.next()).done);h=!0){var l=c.value;t.push({ID:l})}}catch(t){u=!0,C=t}finally{try{!h&&f.return&&f.return()}finally{if(u)throw C}}var d=!0,D=!1,m=void 0;try{for(var p,v=(0,Gn.default)(this.IsNeedSymbolExData);!(d=(p=v.next()).done);d=!0){var l=p.value;t.push({ID:l})}}catch(t){D=!0,m=t}finally{try{!d&&v.return&&v.return()}finally{if(D)throw m}}var g=!0,T=!1,I=void 0;try{for(var S,x=(0,Gn.default)(this.IsNeedSectionFinance);!(g=(S=x.next()).done);g=!0){var a=S.value;t.push({ID:Ko.JOB_DOWNLOAD_SECTION_SF,SF:a})}}catch(t){T=!0,I=t}finally{try{!g&&x.return&&x.return()}finally{if(T)throw I}}for(var e in this.IsAPIData){var a=this.IsAPIData[e];t.push(a)}for(var e in this.ExecuteIndex){var a=this.ExecuteIndex[e];t.push(a)}for(var e in this.OtherSymbolData){var a=this.OtherSymbolData[e];t.push(a)}for(var e in this.PeriodSymbolData){var a=this.PeriodSymbolData[e];t.push(a)}for(var e in this.FunctionData){var a=this.FunctionData[e];t.push(a)}return t},this.VerifySymbolVariable=function(t,e){if(new Rn.default(["INDEXA","INDEXC","INDEXH","INDEXL","INDEXO","INDEXV","INDEXDEC","INDEXADV"]).has(t))return void(this.IsNeedIndexData=!0);if(new Rn.default(["CLOSE","C","VOL","V","OPEN","O","HIGH","H","LOW","L","AMOUNT","AMO","VOLINSTK"]).has(t))return void(this.IsNeedSymbolData=!0);if("VOLR"===t&&(this.IsNeedSymbolExData.has(Ko.JOB_DOWNLOAD_VOLR_DATA)||this.IsNeedSymbolExData.add(Ko.JOB_DOWNLOAD_VOLR_DATA)),new Rn.default(["CAPITAL","TOTALCAPITAL","EXCHANGE","HYBLOCK","DYBLOCK","GNBLOCK","FGBLOCK","ZSBLOCK","ZHBLOCK","ZDBLOCK","HYZSCODE","GNBLOCKNUM","FGBLOCKNUM","ZSBLOCKNUM","ZHBLOCKNUM","ZDBLOCKNUM","HYSYL","HYSJL","FROMOPEN","LARGEINTRDVOL","LARGEOUTTRDVOL","TRADENUM","TRADEINNUM","TRADEOUTNUM","LARGETRDINNUM","LARGETRDOUTNUM","CUR_BUYORDER","CUR_SELLORDER","ACTINVOL","ACTOUTVOL","BIDORDERVOL","BIDCANCELVOL","AVGBIDPX","OFFERORDERVOL","OFFERCANCELVOL","AVGOFFERPX"]).has(t)){var a={ID:Ko.JOB_DOWNLOAD_VARIANT,VariantName:t};return e&&(a.Token={Index:e.Start,Line:e.LineNumber}),void this.FunctionData.push(a)}if("ADVANCE"==t||"DECLINE"==t){var a={ID:Ko.JOB_DOWNLOAD_INDEX_INCREASE_DATA,IsSelfSymbol:!0,FunctionName:t};return e&&(a.Token={Index:e.Start,Line:e.LineNumber}),void this.NeedBlockIncreaseData.push(a)}if(t.indexOf("#")>0){var i=t.split("#");if(2!=i.length){var r=t+", è·¨å¨æè¯­æ³éè¯¯, åéå#å¨æ";this.ThrowUnexpectedToken(e,r)}else{if(["C","CLOSE","O","OPEN","H","HIGH","L","LOW","AMOUNT","AMO","VOL","V","VOLINSTK"].indexOf(i[0])<0){var r=t+", è·¨å¨æè¯­æ³éè¯¯, æ°æ®åªæ¯æ'OPEN,HIGH,LOW,CLOSE,VOL,AMOUNT,VOLINSTK'";this.ThrowUnexpectedToken(e,r)}if(["MIN1","MIN5","MIN15","MIN30","MIN60","MIN120","MIN240","DAY","WEEK","MONTH","SEASON","YEAR","HALFYEAR","WEEK2","MULTIDAY","DAY2","DAY3","DAY4","DAY5","DAY6","DAY7","DAY8","DAY9","DAY10","DAY11","DAY12","DAY13","DAY14","DAY15"].indexOf(i[1])<0){var r=t+", è·¨å¨æè¯­æ³éè¯¯ï¼ å¨æåªæ¯æ'MIN1,MIN5,MIN15,MIN30,MIN60,DAY,WEEK,MONTH,SEASON,YEAR'";this.ThrowUnexpectedToken(e,r)}var a={ID:Ko.JOB_DOWNLOAD_SYMBOL_PERIOD_DATA,VarName:t,ValueName:i[0],PeriodName:i[1]};e&&(a.Token={Index:e.Start,Line:e.LineNumber}),this.PeriodSymbolData.push(a)}}else if(Go.IsCustomVariant(t)){var a={VariantName:t,ID:Ko.JOB_CUSTOM_VARIANT_DATA};return e&&(a.Token={Index:e.Start,Line:e.LineNumber}),void this.FunctionData.push(a)}},this.VerifySymbolLiteral=function(t,e){if(we.IsString(t)&&t.indexOf("$")>0){if(2!=t.split("$").length)return;var a={Literal:t,ID:Ko.JOB_DOWNLOAD_OTHER_SYMBOL_DATA};e&&(a.Token={Index:e.Start,Line:e.LineNumber}),this.OtherSymbolData.push(a)}},this.VerifySymbolFunction=function(t,e,a){if(Go.IsCustomFunction(t.Name)){var i={FunctionName:t.Name,ID:Ko.JOB_CUSTOM_FUNCTION_DATA,Args:e};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if(Go.IsCustomDataFunction(t.Name)){var i={FunctionName:t.Name,ID:Ko.JOB_CUSTOM_DATA_FUNCTION,Args:e};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("DYNAINFO"==t.Name){var i={ID:Ko.JOB_DOWNLOAD_SYMBOL_LATEST_DATA,Args:e,FunctionName:t.Name};return void this.Dynainfo.push(i)}if("FINANCE"==t.Name){var i={ID:Ko.JOB_DOWNLOAD_FINANCE,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("FINVALUE"==t.Name){var i={ID:Ko.JOB_DOWNLOAD_FINVALUE,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("FINONE"==t.Name){var i={ID:Ko.JOB_DOWNLOAD_FINONE,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}for(var r=0;r<zo.length;++r){var n=zo[r];if(n.Name==t.Name){var i={ID:n.JobID,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}}if("MARGIN"===t.Name){var o=Ko.GetMarginJobID(e[0].Value);return void(o&&!this.IsNeedMarginData.has(o)&&this.IsNeedMarginData.add(o))}if("NEWS"===t.Name){var s=Ko.GetNewsAnalysisID(e[0].Value);return void(s&&!this.IsNeedNewsAnalysisData.has(s)&&this.IsNeedNewsAnalysisData.add(s))}if("HK2SHSZ"===t.Name){var i={ID:Ko.JOB_DOWNLOAD_HK_TO_SHSZ,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.NeedHK2SHSZData.push(i)}if("COST"==t.Name||"WINNER"==t.Name||"PPART"==t.Name||"COSTEX"==t.Name||"LWINNER"==t.Name||"PWINNER"==t.Name){var i={ID:Ko.JOB_DOWNLOAD_FINANCE,Args:[7],FunctionName:"FINANCE",FunctionName2:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("INBLOCK"==t.Name){var i={ID:Ko.JOB_DOWNLOAD_VARIANT,VariantName:"INBLOCK"};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.FunctionData.push(i)}if("BETA"===t.Name)return void(this.IsNeedIndexData=!0);if("UPCOUNT"==t.Name||"DOWNCOUNT"==t.Name){var i={ID:Ko.JOB_DOWNLOAD_INDEX_INCREASE_DATA,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.NeedBlockIncreaseData.push(i)}if("STKINDI"==t.Name||"CALCSTOCKINDEX"==t.Name){var i={ID:Ko.JOB_EXECUTE_INDEX,Args:e,FunctionName:t.Name};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.ExecuteIndex.push(i)}if(t.Type==Xo.Literal){var i={ID:Ko.JOB_EXECUTE_INDEX,Args:e,FunctionName:t.Value,DynamicName:t.Value};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.ExecuteIndex.push(i)}if("COVER_C"==t.Name||"COVER_O"==t.Name||"COVER_H"==t.Name||"COVER_L"==t.Name||"COVER_A"==t.Name||"COVER_V"==t.Name){var l=e[0].Value;if(["MIN1","MIN5","MIN15","MIN30","MIN60","DAY","WEEK","MONTH","SEASON","YEAR"].indexOf(l)<0){var h=t.Name+", è·¨å¨æå½æ°éè¯¯ï¼ å¨æåªæ¯æ'MIN1,MIN5,MIN15,MIN30,MIN60,DAY,WEEK,MONTH,SEASON,YEAR'";this.ThrowUnexpectedToken(a,h)}var u=hr.GetConvertValueName(t.Name),i={ID:Ko.JOB_DOWNLOAD_SYMBOL_PERIOD_DATA,FunctionName:t.Name,ValueName:u,PeriodName:l};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.PeriodSymbolData.push(i)}if("SF"!=t.Name){if("LOADAPIDATA"==t.Name){var i={Name:t.Name,ID:Ko.JOB_DOWNLOAD_CUSTOM_API_DATA,Args:e};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.IsAPIData.push(i)}if(new Rn.default(["CLOSE","C","VOL","V","OPEN","O","HIGH","H","LOW","L","AMOUNT","AMO","VOLINSTK"]).has(t.Name)){var i={Name:t.Name,ID:Ko.JOB_DOWNLOAD_OTHER_SYMBOL_DATA,Args:e};return a&&(i.Token={Index:a.Start,Line:a.LineNumber}),void this.OtherSymbolData.push(i)}}else{var C=Ko.GetSectionReportPeriod(e[0].Value,e[1].Value);if(!C)return;var c=Ko.GetSectionFinanceID(e[2].Value);if(!c)return;var f=C.Year+"-"+C.Quarter;if(this.IsNeedSectionFinance.has(f)){var d=this.IsNeedSectionFinance.get(f);d.Fields.has(c)||d.Fields.add(c)}else{var d={Period:C,Fields:new Rn.default([c])};this.IsNeedSectionFinance.set(f,d)}}},this.VerifyMemberVariable=function(t,e,a){var i={ID:Ko.JOB_EXECUTE_INDEX,Member:{Object:t,Property:e}};a&&(i.Token={Index:a.Start,Line:a.LineNumber}),this.ExecuteIndex.push(i)},this.ExpressionStatement=function(t){return{Type:Xo.ExpressionStatement,Expression:t}},this.Script=function(t){return{Type:Xo.Program,Body:t,SourceType:"éè¾¾ä¿¡èæ¬"}},this.SequenceExpression=function(t){return{Type:Xo.SequenceExpression,Expression:t}},this.BinaryExpression=function(t,e,a){return{Type:"||"===t||"&&"===t||"AND"==t||"OR"==t?Xo.LogicalExpression:Xo.BinaryExpression,Operator:t,Left:e,Right:a}},this.Literal=function(t,e,a){return this.VerifySymbolLiteral(t,a),{Type:Xo.Literal,Value:t,Raw:e}},this.Identifier=function(t,e){return this.VerifySymbolVariable(t,e),{Type:Xo.Identifier,Name:t}},this.MemberIdentifier=function(t,e){return{Type:Xo.Identifier,Name:t}},this.AssignmentExpression=function(t,e,a){return{Type:Xo.AssignmentExpression,Operator:t,Left:e,Right:a}},this.UnaryExpression=function(t,e){return{Type:Xo.UnaryExpression,Operator:t,Argument:e,Prefix:!0}},this.EmptyStatement=function(){return{Type:Xo.EmptyStatement}},this.CallExpression=function(t,e,a){return this.VerifySymbolFunction(t,e,a),{Type:Xo.CallExpression,Callee:t,Arguments:e}},this.StaticMemberExpression=function(t,e,a){return this.VerifyMemberVariable(t,e,a),{Type:Xo.MemberExpression,Computed:!1,Object:t,Property:e}},this.Directive=function(t,e){return{Type:Xo.ExpressionStatement,Expression:t,Directive:e}},this.ThrowUnexpectedToken=function(t,e){throw this.UnexpectedTokenError(t,e)},this.UnexpectedTokenError=function(t,e){var a=e||ko.UnexpectedToken,i="ILLEGAL";if(t&&(i=t.Value),a=a.replace("%0",i),t&&"number"==typeof t.LineNumber){var r=t.Start,n=t.LineNumber;return this.ErrorHandler.CreateError(r,n,-1,a)}}}function dr(t){this.ErrorHandler=new ur,this.Scanner=new Cr(t,this.ErrorHandler),this.Node=new fr(this.ErrorHandler),this.LookAhead={Type:2,Value:"",LineNumber:this.Scanner.LineNumber,LineStart:0,Start:0,End:0},this.HasLineTerminator=!1,this.Context={IsModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,FirstCoverInitializedNameError:null,IsAssignmentTarget:!1,IsBindingElement:!1,InFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},Strict:!1},this.PeratorPrecedence={")":0,";":0,",":0,"]":0,"||":1,OR:1,"&&":2,AND:2,"|":3,"^":4,"&":5,"==":6,"=":6,"!=":6,"<>":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.StartMarker={Index:0,Line:this.Scanner.LineNumber,Column:0},this.LastMarker={Index:0,Line:this.Scanner.LineNumber,Column:0},this.Initialize=function(){this.NextToken(),this.LastMarker={Index:this.Scanner.Index,Line:this.Scanner.LineNumber,Column:this.Scanner.Index-this.Scanner.LineStart}},this.CreateNode=function(){return{Index:this.StartMarker.Index,Line:this.StartMarker.Line,Column:this.StartMarker.Column}},this.StartNode=function(t,e){void 0==e&&(e=0);var a=t.Start-t.LineStart,i=t.LineNumber;return a<0&&(a+=e,i--),{Index:t.Start,Line:i,Column:a}},this.Match=function(t){return 7==this.LookAhead.Type&&this.LookAhead.Value==t},this.Expect=function(t,e){var a=this.NextToken();7==a.Type&&a.Value==t||this.ThrowUnexpectedToken(a,e)},this.MatchAssign=function(){if(7!=this.LookAhead.Type)return!1;var t=this.LookAhead.Value;return":"==t||":="==t},this.GetTokenRaw=function(t){return this.Scanner.Source.slice(t.Start,t.End)},this.NextToken=function(){var t=this.LookAhead;this.LastMarker.Index=this.Scanner.Index,this.LastMarker.Line=this.Scanner.LineNumber,this.LastMarker.Column=this.Scanner.Index-this.Scanner.LineStart,this.CollectComments(),this.Scanner.Index!==this.StartMarker.Index&&(this.StartMarker.Index=this.Scanner.Index,this.StartMarker.Line=this.Scanner.LineNumber,this.StartMarker.Column=this.Scanner.Index-this.Scanner.LineStart);var e=this.Scanner.Lex();return this.HasLineTerminator=t.LineNumber!=e.LineNumber,e&&this.Context.Strict&&e.Type,this.LookAhead=e,t},this.CollectComments=function(){this.Scanner.ScanComments()},this.ParseScript=function(){for(var t=this.CreateNode(),e=this.ParseDirectivePrologues();2!=this.LookAhead.Type;)e.push(this.ParseStatementListItem());return this.Finalize(t,this.Node.Script(e))},this.ParseDirective=function(){var t=this.LookAhead,e=this.CreateNode(),a=this.ParseExpression(),i=a.Type===Xo.Literal?this.GetTokenRaw(t).slice(1,-1):null;return this.ConsumeSemicolon(),this.Finalize(e,i?this.Node.Directive(a,i):this.Node.ExpressionStatement(a))},this.ParseDirectivePrologues=function(){for(var t=[];;){if(8!=this.LookAhead.Type)break;var e=this.ParseDirective();t.push(e)}return t},this.ParseStatementListItem=function(){var t=void 0;return this.Context.IsAssignmentTarget=!0,this.Context.IsBindingElement=!0,4==this.LookAhead.Type||(t=this.ParseStatement()),t},this.ParseStatement=function(){var t=void 0;switch(this.LookAhead.Type){case 1:case 5:case 6:case 8:case 10:case 9:t=this.ParseExpressionStatement();break;case 7:var e=this.LookAhead.Value;t="("===e?this.ParseExpressionStatement():";"===e?this.ParseEmptyStatement():this.ParseExpressionStatement();break;case 3:t=this.ParseLabelledStatement();break;case 4:break;default:t="error"}return t},this.ParseEmptyStatement=function(){var t=this.CreateNode();return this.Expect(";"),this.Finalize(t,this.Node.EmptyStatement())},this.ParseLabelledStatement=function(){var t=this.CreateNode(),e=this.ParseExpression();this.ConsumeSemicolon();var a=new this.Node.ExpressionStatement(e);return this.Finalize(t,a)},this.ParseExpression=function(){var t=this.LookAhead,e=this.IsolateCoverGrammar(this.ParseAssignmentExpression);if(this.Match(",")){var a=[];for(a.push(e);2!=this.LookAhead.Type&&this.Match(",");)this.NextToken(),a.push(this.IsolateCoverGrammar(this.ParseAssignmentExpression));e=this.Finalize(this.StartNode(t),this.Node.SequenceExpression(a))}return e},this.ParseAssignmentExpression=function(){var t=void 0,e=this.LookAhead,a=e;if(t=this.ParseConditionalExpression(),this.MatchAssign()){if(!this.Context.IsAssignmentTarget){var i=t.Marker;this.ThrowUnexpectedError(i.Index,i.Line,i.Column,ko.InvalidLHSInAssignment)}this.Match("=")||this.Match(":")?this.ReinterpretExpressionAsPattern(t):(this.Context.IsAssignmentTarget=!1,this.Context.IsBindingElement=!1),a=this.NextToken();var r=a.Value,n=this.IsolateCoverGrammar(this.ParseAssignmentExpression);t=this.Finalize(this.StartNode(e),this.Node.AssignmentExpression(r,t,n)),this.Context.FirstCoverInitializedNameError=null}return t},this.ParseConditionalExpression=function(){this.LookAhead;return this.InheritCoverGrammar(this.ParseBinaryExpression)},this.ParseBinaryExpression=function(){var t=this.LookAhead,e=this.InheritCoverGrammar(this.ParseExponentiationExpression),a=this.LookAhead,i=this.BinaryPrecedence(a);if(i>0){this.NextToken(),this.Context.IsAssignmentTarget=!1,this.Context.IsBindingElement=!1;for(var r=[t,this.LookAhead],n=e,o=this.IsolateCoverGrammar(this.ParseExponentiationExpression),s=[n,a.Value,o],l=[i];;){if((i=this.BinaryPrecedence(this.LookAhead))<=0)break;for(;s.length>2&&i<=l[l.length-1];){o=s.pop();var h=s.pop();l.pop(),n=s.pop(),r.pop();var u=this.StartNode(r[r.length-1]);s.push(this.Finalize(u,this.Node.BinaryExpression(h,n,o)))}s.push(this.NextToken().Value),l.push(i),r.push(this.LookAhead),s.push(this.IsolateCoverGrammar(this.ParseExponentiationExpression))}var C=s.length-1;e=s[C];for(var c=r.pop();C>1;){var f=r.pop(),d=c&&c.LineStart,D=this.StartNode(f,d),m=s[C-1];e=this.Finalize(D,this.Node.BinaryExpression(m,s[C-2],e)),C-=2,c=f}}return e},this.ParseExponentiationExpression=function(){this.LookAhead;return this.InheritCoverGrammar(this.ParseUnaryExpression)},this.ParseUnaryExpression=function(){var t=void 0;if(this.Match("+")||this.Match("-")){var e=this.StartNode(this.LookAhead),a=this.NextToken();t=this.InheritCoverGrammar(this.ParseUnaryExpression),t=this.Finalize(e,this.Node.UnaryExpression(a.Value,t)),this.Context.IsAssignmentTarget=!1,this.Context.IsBindingElement=!1}else t=this.ParseUpdateExpression();return t},this.ParseUpdateExpression=function(){this.LookAhead;return this.InheritCoverGrammar(this.ParseLeftHandSideExpressionAllowCall)},this.ParseLeftHandSideExpressionAllowCall=function(){var t=this.LookAhead,e=void 0;for(e=this.InheritCoverGrammar(this.ParsePrimaryExpression);;)if(this.Match(".")){this.Context.IsBindingElement=!1,this.Context.IsAssignmentTarget=!0,this.Expect(".");var a=this.ParseMemberIdentifierName();e=this.Finalize(this.StartNode(t),this.Node.StaticMemberExpression(e,a,t))}else{if(!this.Match("("))break;this.Context.IsBindingElement=!1,this.Context.IsAssignmentTarget=!1;var i=this.ParseArguments();e=this.Finalize(this.StartNode(t),this.Node.CallExpression(e,i,t))}return e},this.IsIdentifierName=function(t){return 3===t.Type||4===t.Type||1===t.Type||5===t.Type},this.ParseIdentifierName=function(){var t=this.CreateNode(),e=this.NextToken();return this.IsIdentifierName(e)||this.ThrowUnexpectedToken(e),this.Finalize(t,this.Node.Identifier(e.Value,e))},this.ParseMemberIdentifierName=function(){var t=this.CreateNode(),e=this.NextToken();return this.IsIdentifierName(e)||this.ThrowUnexpectedToken(e),this.Finalize(t,this.Node.MemberIdentifier(e.Value,e))},this.ParseArguments=function(){this.Expect("(");var t=[];if(!this.Match(")"))for(;;){var e=this.IsolateCoverGrammar(this.ParseAssignmentExpression);if(t.push(e),this.Match(")"))break;if(this.ExpectCommaSeparator(),this.Match(")"))break}return this.Expect(")"),t},this.ExpectCommaSeparator=function(){this.Expect(",","å½æ°åæ°æ ¼å¼éè¯¯")},this.ParsePrimaryExpression=function(){var t,e,a=this.CreateNode(),i=void 0;switch(this.LookAhead.Type){case 3:t=this.NextToken(),i=this.Finalize(a,this.Node.Identifier(t.Value,t));break;case 6:case 8:this.Context.IsAssignmentTarget=!1,this.Context.IsBindingElement=!1,t=this.NextToken(),e=this.GetTokenRaw(t),i=this.Finalize(a,this.Node.Literal(t.Value,e,t));break;case 7:switch(this.LookAhead.Value){case"(":this.Context.IsBindingElement=!1,i=this.InheritCoverGrammar(this.ParseGroupExpression);break;default:i=this.ThrowUnexpectedToken(this.NextToken())}break;default:i=this.ThrowUnexpectedToken(this.NextToken())}return i},this.ParseGroupExpression=function(){var t=void 0;if(this.Expect("("),this.Match(")"))this.NextToken();else{this.LookAhead;if(this.Context.IsBindingElement=!0,t=this.InheritCoverGrammar(this.ParseAssignmentExpression),this.Match(",")){var e=[];for(this.Context.IsAssignmentTarget=!1,e.push(t);2!=this.LookAhead.Type&&this.Match(",");)this.NextToken(),this.Match(")")}this.Expect(")"),this.Context.IsBindingElement=!1}return t},this.ParseExpressionStatement=function(){var t=this.CreateNode(),e=this.ParseExpression();return this.ConsumeSemicolon(),this.Finalize(t,this.Node.ExpressionStatement(e))},this.ConsumeSemicolon=function(){this.Match(";")?this.NextToken():this.HasLineTerminator||(this.LastMarker.Index=this.StartMarker.Index,this.LastMarker.Line=this.StartMarker.Line,this.LastMarker.Column=this.StartMarker.Column)},this.ReinterpretExpressionAsPattern=function(t){switch(t.Type){case Xo.Identifier:case Xo.MemberExpression:case Xo.AssignmentExpression:}},this.Finalize=function(t,e){return e.Marker={Line:t.Line,Column:t.Column,Index:t.Index},e},this.BinaryPrecedence=function(t){var e=t.Value;return 7===t.Type?this.PeratorPrecedence[e]||0:0},this.IsolateCoverGrammar=function(t){var e=this.Context.IsBindingElement,a=this.Context.IsAssignmentTarget,i=this.Context.FirstCoverInitializedNameError;this.Context.IsBindingElement=!0,this.Context.IsAssignmentTarget=!0,this.Context.FirstCoverInitializedNameError=null;var r=t.call(this);return this.Context.FirstCoverInitializedNameError,this.Context.IsBindingElement=e,this.Context.IsAssignmentTarget=a,this.Context.FirstCoverInitializedNameError=i,r},this.InheritCoverGrammar=function(t){var e=this.Context.IsBindingElement,a=this.Context.IsAssignmentTarget,i=this.Context.FirstCoverInitializedNameError;this.Context.IsBindingElement=!0,this.Context.IsAssignmentTarget=!0,this.Context.FirstCoverInitializedNameError=null;var r=t.call(this);return this.Context.IsBindingElement=this.Context.IsBindingElement&&e,this.Context.IsAssignmentTarget=this.Context.IsAssignmentTarget&&a,this.Context.FirstCoverInitializedNameError=i||this.Context.FirstCoverInitializedNameError,r},this.ThrowUnexpectedToken=function(t,e){throw this.UnexpectedTokenError(t,e)},this.ThrowUnexpectedError=function(t,e,a,i){var r=i||"æ§è¡å¼å¸¸";return this.ErrorHandler.ThrowError(t,e,a,r)},this.UnexpectedTokenError=function(t,e){var a=e||ko.UnexpectedToken,i="ILLEGAL";if(t&&(i=t.Value),a=a.replace("%0",i),t&&"number"==typeof t.LineNumber){var r=t.Start,n=t.LineNumber,o=this.LastMarker.Index-this.LastMarker.Column,s=t.Start-o+1;return this.ErrorHandler.CreateError(r,n,s,a)}var l=this.LastMarker.Index,h=this.LastMarker.Line,u=this.LastMarker.Column+1;return this.ErrorHandler.CreateError(l,h,u,a)}}function Dr(t,e){this.ErrorHandler=t,this.SymbolData=e,this.Add=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t+e;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)r[o]=null,o<t.length&&o<e.length&&this.IsNumber(t[o])&&this.IsNumber(e[o])&&(r[o]=t[o]+e[o]);return r}var s=void 0,l=void 0;a?(s=t,l=e):(s=e,l=t);for(var h in l)r[h]=null,this.IsNumber(l[h])&&this.IsNumber(s)&&(r[h]=s+l[h]);return r},this.Subtract=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t-e;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)r[o]=null,o<t.length&&o<e.length&&this.IsNumber(t[o])&&this.IsNumber(e[o])&&(r[o]=t[o]-e[o]);return r}if(a)for(var s in e)r[s]=null,this.IsNumber(t)&&this.IsNumber(e[s])&&(r[s]=t-e[s]);else for(var l in t)r[l]=null,this.IsNumber(t[l])&&this.IsNumber(e)&&(r[l]=t[l]-e);return r},this.Multiply=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t*e;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)r[o]=null,o<t.length&&o<e.length&&this.IsNumber(t[o])&&this.IsNumber(e[o])&&(r[o]=t[o]*e[o]);return r}var s=void 0,l=void 0;a?(s=t,l=e):(s=e,l=t);for(var h in l)r[h]=null,this.IsNumber(l[h])&&this.IsNumber(s)&&(r[h]=s*l[h]);return r},this.Divide=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return 0==e?null:t/e;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)r[o]=null,o<t.length&&o<e.length&&this.IsNumber(t[o])&&this.IsDivideNumber(e[o])&&(r[o]=t[o]/e[o]);return r}if(a)for(var s in e)r[s]=null,this.IsNumber(t)&&this.IsDivideNumber(e[s])&&(r[s]=t/e[s]);else for(var l in t)r[l]=null,this.IsNumber(t[l])&&this.IsDivideNumber(e)&&(r[l]=t[l]/e);return r},this.GT=function(t,e){var a=we.IsNumber(t),i=we.IsNumber(e);if(a&&i)return t>e?1:0;var r=[];if(Array.isArray(t)&&Array.isArray(e)){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)if(r[o]=null,o<t.length&&o<e.length){if(!we.IsVaild(t[o]))continue;if(!we.IsVaild(e[o]))continue;isNaN(t[o])||isNaN(e[o])||(r[o]=t[o]>e[o]?1:0)}return r}if(a&&Array.isArray(e))for(var s in e)r[s]=null,we.IsVaild(t)&&we.IsVaild(e[s])&&(isNaN(t)||isNaN(e[s])||(r[s]=t>e[s]?1:0));else if(i&&Array.isArray(t))for(var l in t)r[l]=null,we.IsVaild(t[l])&&we.IsVaild(e)&&(isNaN(t[l])||isNaN(e)||(r[l]=t[l]>e?1:0));return r},this.GTE=function(t,e){var a=we.IsNumber(t),i=we.IsNumber(e);if(a&&i)return t>=e?1:0;var r=[];if(Array.isArray(t)&&Array.isArray(e)){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)if(r[o]=null,o<t.length&&o<e.length){if(!we.IsVaild(t[o]))continue;if(!we.IsVaild(e[o]))continue;r[o]=t[o]>=e[o]?1:0}return r}if(a&&Array.isArray(e))for(var s in e)r[s]=null,we.IsVaild(t)&&we.IsVaild(e[s])&&(r[s]=t>=e[s]?1:0);else if(i&&Array.isArray(t))for(var l in t)r[l]=null,we.IsVaild(t[l])&&we.IsVaild(e)&&(r[l]=t[l]>=e?1:0);return r},this.LT=function(t,e){var a=we.IsNumber(t),i=we.IsNumber(e);if(a&&i)return t<e?1:0;var r=[];if(Array.isArray(t)&&Array.isArray(e)){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)if(r[o]=null,o<t.length&&o<e.length){if(!we.IsVaild(t[o]))continue;if(!we.IsVaild(e[o]))continue;r[o]=t[o]<e[o]?1:0}return r}if(a&&Array.isArray(e))for(var s in e)r[s]=null,we.IsVaild(t)&&we.IsVaild(e[s])&&(r[s]=t<e[s]?1:0);else if(i&&Array.isArray(t))for(var l in t)r[l]=null,we.IsVaild(t[l])&&we.IsVaild(e)&&(r[l]=t[l]<e?1:0);return r},this.LTE=function(t,e){var a=we.IsNumber(t),i=we.IsNumber(e);if(a&&i)return t>=e?1:0;var r=[];if(Array.isArray(t)&&Array.isArray(e)){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)if(r[o]=null,o<t.length&&o<e.length){if(!we.IsVaild(t[o]))continue;if(!we.IsVaild(e[o]))continue;r[o]=t[o]<=e[o]?1:0}return r}if(a&&Array.isArray(e))for(var s in e)r[s]=null,we.IsVaild(t)&&we.IsVaild(e[s])&&(r[s]=t<=e[s]?1:0);else if(i&&Array.isArray(t))for(var l in t)r[l]=null,we.IsVaild(t[l])&&we.IsVaild(e)&&(r[l]=t[l]<=e?1:0);return r},this.EQ=function(t,e){var a=we.IsNumber(t),i=we.IsNumber(e);if(a&&i)return t==e?1:0;var r=[];if(Array.isArray(t)&&Array.isArray(e)){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)r[o]=null,o<t.length&&o<e.length&&(isNaN(t[o])||isNaN(e[o])||(r[o]=t[o]==e[o]?1:0));return r}if(a&&Array.isArray(e))for(var s in e)r[s]=null,isNaN(t)||isNaN(e[s])||(r[s]=t==e[s]?1:0);else if(i&&Array.isArray(t))for(var l in t)r[l]=null,isNaN(t[l])||isNaN(e)||(r[l]=t[l]==e?1:0);return r},this.NEQ=function(t,e){var a=we.IsNumber(t),i=we.IsNumber(e);if(a&&i)return t!=e?1:0;var r=[];if(Array.isArray(t)&&Array.isArray(e)){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)r[o]=null,o<t.length&&o<e.length&&(isNaN(t[o])||isNaN(e[o])||(r[o]=t[o]!=e[o]?1:0));return r}if(a&&Array.isArray(e))for(var s in e)r[s]=null,isNaN(t)||isNaN(e[s])||(r[s]=t!=e[s]?1:0);else if(i&&Array.isArray(t))for(var l in t)r[l]=null,isNaN(t[l])||isNaN(e)||(r[l]=t[l]!=e?1:0);return r},this.And=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t&&e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)r[o]=null,o<t.length&&o<e.length&&(isNaN(t[o])||isNaN(e[o])||(r[o]=t[o]&&e[o]?1:0));return r}if(a)for(var s in e)r[s]=null,isNaN(t)||isNaN(e[s])||(r[s]=t&&e[s]?1:0);else for(var l in t)r[l]=null,isNaN(t[l])||isNaN(e)||(r[l]=t[l]&&e?1:0);return r},this.Or=function(t,e){var a="number"==typeof t,i="number"==typeof e;if(a&&i)return t||e?1:0;var r=[];if(!a&&!i){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)r[o]=null,o<t.length&&o<e.length&&(isNaN(t[o])||isNaN(e[o])||(r[o]=t[o]||e[o]?1:0));return r}if(a)for(var s in e)r[s]=null,isNaN(t)||isNaN(e[s])||(r[s]=t||e[s]?1:0);else for(var l in t)r[l]=null,isNaN(t[l])||isNaN(e)||(r[l]=t[l]||e?1:0);return r},this.IF=function(t,e,a){var i=this.IsNumber(t),r=this.IsNumber(e),n=this.IsNumber(a),o=Array.isArray(e),s=Array.isArray(a);if(i)return t?e:a;var l=[];for(var h in t)t[h]?l[h]=r?e:o?e[h]:null:l[h]=n?a:s?a[h]:null;return l},this.IFN=function(t,e,a){return this.IF(t,a,e)},this.REF=function(t,e){var a=[];if("number"==typeof e)if(we.IsNumber(t)){if(e<0)return a;var i=this.SymbolData.Data.Data;if(!i||i.length<=0)return a;for(var r=i.length,n=e;n<r;++n)a[n]=t}else{if(t.length<=0)return a;if(e>=t.length)return a;a=t.slice(0,t.length-e);for(var o=t[0],s=0;s<e;++s)a.unshift(o)}else for(var l=0;l<t.length;++l)if(a[l]=null,!(l>=e.length)){var h=e[l];a[l]=h>=0&&h<=l?t[l-h]:l?a[l-1]:t[l]}return a},this.REFV=function(t,e){var a=[];if("number"==typeof e){if(t.length<=0)return a;if(e>=t.length)return a;a=t.slice(0,t.length-e);for(var i=0;i<e;++i)a.unshift(null)}else for(var r=0;r<t.length;++r)if(a[r]=null,!(r>=e.length)){var n=e[r];n>=0&&n<=r&&(a[r]=t[r-n])}return a},this.REFX=function(t,e){var a=[];if("number"==typeof e){if(t.length<=0)return a;if(e>=t.length)return t.length>0?t[t.length-1]:a;a=t.slice(e,t.length);for(var i=t[t.length-1],r=0;r<e;++r)a.push(i)}else for(var n=t.length,o=0;o<t.length;++o)if(a[o]=null,!(o>=e.length)){var s=e[o];a[o]=s>=0&&s+o<n?t[o+s]:o?a[o-1]:t[o]}return a},this.REFXV=function(t,e){var a=[];if("number"==typeof e){if(t.length<=0)return a;if(e>=t.length)return a;a=t.slice(e,t.length);for(var i=0;i<e;++i)a.push(null)}else for(var r=t.length,n=0;n<t.length;++n)if(a[n]=null,!(n>=e.length)){var o=e[n];o>=0&&o+n<r&&(a[n]=t[n+o])}return a},this.MAX=function(t,e){if(0==t.length&&this.ThrowUnexpectedNode(e,"MAX() Error: åæ°ä¸ªæ°ä¸è½ä¸º0"),1==t.length)return t[0];var a=[],i=[];for(var r in t){var n=t[r];we.IsNumber(n)?i.push(n):Array.isArray(n)&&a.push(n)}var o=null;if(i.length>0){o=i[0];for(var r=1;r<i.length;++r)o=Math.max(o,i[r])}var s=null;if(a.length>0){s=a[0].slice(0);for(var r=1;r<a.length;++r){var l=a[r];for(var h in l){var u=s[h],n=l[h];we.IsNumber(u)&&(we.IsNumber(n)?s[h]=Math.max(u,n):s[h]=null)}}}if(null==s&&null!=o)return o;if(s&&null==o)return s;for(var r in s)we.IsNumber(s[r])&&(s[r]=Math.max(s[r],o));return s},this.MIN=function(t,e){if(0==t.length&&this.ThrowUnexpectedNode(e,"MIN() Error: åæ°ä¸ªæ°ä¸è½ä¸º0"),1==t.length)return t[0];var a=[],i=[];for(var r in t){var n=t[r];we.IsNumber(n)?i.push(n):Array.isArray(n)&&a.push(n)}var o=null;if(i.length>0){o=i[0];for(var r=1;r<i.length;++r)o=Math.min(o,i[r])}var s=null;if(a.length>0){s=a[0].slice(0);for(var r=1;r<a.length;++r){var l=a[r];for(var h in l){var u=s[h],n=l[h];we.IsNumber(u)&&(we.IsNumber(n)?s[h]=Math.min(u,n):s[h]=null)}}}if(null==s&&null!=o)return o;if(s&&null==o)return s;for(var r in s)we.IsNumber(s[r])&&(s[r]=Math.min(s[r],o));return s},this.ABS=function(t){var e=[];for(var a in t)e[a]=null,isNaN(t[a])||(e[a]=Math.abs(t[a]));return e},this.MA=function(t,e){var a=[];if(e<=0)return a;if(Array.isArray(e)){for(var i=0;i<t.length;++i)if(a[i]=null,!(i>=e.length)){var r=e[i];if(this.IsNumber(r)&&!(r<=0)){for(var n=0,o=0,s=i,l=0;s>=0&&l<r;--s,++l)n+=t[s],++o;o>0&&(a[i]=n/o)}}}else{if(e=parseInt(e),e<=0&&(e=1),!t||!t.length)return a;for(var i=0;i<t.length&&(a[i]=null,!this.IsNumber(t[i]));++i);for(var t=t.slice(0),h=0;i<t.length;++i,++h)if(h<e-1)a[i]=null;else{for(var u=t[i-(e-1)],C=0,c=e-1;c>=0;--c){var f=t[i-c];this.IsNumber(f)?u=f:(f=u,t[i-c]=f),C+=f}a[i]=C/e}}return a},this.EMA=function(t,e){var a=[];if(t.length<=0)return a;if(Array.isArray(e))for(var i=0;i<e.length;++i){var r=e[i];if(this.IsNumber(r)&&!((r=parseInt(r))<=0)){r>i+1&&(r=i+1);for(var n=[2/(r+1),(r-1)/(r+1)],o=null,s=null,l=0;l<r;++l){var h=i-(r-l-1),u=t[h];this.IsNumber(u)||coninue,null==s?(o=u,s=o):(o=n[0]*u+n[1]*s,s=o)}a[i]=o}}else{if((e=parseInt(e))<=0)return a;for(var C=0;C<t.length&&(null==t[C]||isNaN(t[C]));++C);var c=C,f=C+1;a[c]=t[c];for(var i=C+1;i<t.length;++i,++c,++f)a[f]=(2*t[f]+(e-1)*a[c])/(e+1)}return a},this.XMA=function(t,e){for(var a=[],i=0;i<t.length&&!this.IsNumber(t[i]);++i);for(var r=parseInt((e-2)/2),n=0,o=0,s=0,l=0,h=i,u=0;h<t.length;++h){for(s=h-r-1,l=h+(e-r)-1,u=s;u<l;++u)u>=0&&u<t.length&&this.IsNumber(t[u])&&(n+=t[u],++o);a[h]=0!=o?n/o:null,n=0,o=0}return a},this.SMA=function(t,e,a){var i=[];if(Array.isArray(e))for(var r=0;r<e.length;++r){var n=e[r];if(this.IsNumber(n)&&!((n=parseInt(n))<=0)){n>r+1&&(n=r+1);for(var o=null,s=null,l=0;l<n;++l){var h=r-(n-l-1),u=t[h];this.IsNumber(u)&&(null==o?(o=u,s=u):(s=(a*u+(n-a)*o)/n,o=s))}i[r]=s}}else{for(var r=e,C=null;r<t.length;++r)if(null!=t[r]&&!isNaN(t[r])){C=t[r],i[r]=C;break}for(++r;r<t.length;++r)i[r]=(a*t[r]+(e-a)*C)/e,C=i[r]}return i},this.DMA=function(t,e){var a=[];if(t.length<0||t.length!=e.length)return a;for(var i=0;i<t.length;++i)if(null!=t[i]&&!isNaN(t[i])&&null!=e[i]&&!isNaN(e[i])){a[i]=t[i];break}for(i+=1;i<t.length;++i)null==t[i]||null==e[i]?a[i]=null:e[i]<1?a[i]=e[i]*t[i]+(1-e[i])*a[i-1]:a[i]=t[i];return a},this.WMA=function(t,e){var a=[];if(!t||!t.length)return a;if(Array.isArray(e)){for(c=0;c<e.length&&c<t.length;++c){a[c]=null;var i=e[c];if(!(i<=0)){for(var r=0,n=0,o=0,s=0,l=0;l<i;++l)if(o=c-(i-l-1),n=t[o],r=l,this.IsNumber(n)){s=n;break}if(!(r>=i)){for(var h=0,u=0,l=r,C=1;l<i;++l,++C)o=c-(i-l-1),n=t[o],this.IsNumber(n)?s=n:n=s,u+=C,h+=n*C;a[c]=h/u}}}return a}if(e<=0)return[];var c=0;for(c=0;c<t.length&&!this.IsNumber(t[c]);++c)a[c]=null;for(var t=t.slice(0),f=0;c<t.length;++c,++f)if(f<e-1)a[c]=null;else{for(var s=t[c-(e-1)],h=0,u=0,l=e-1;l>=0;--l){var n=t[c-l];this.IsNumber(n)?s=n:(n=s,t[c-l]=n),u+=e-l,h+=n*(e-l)}a[c]=h/u}return a},this.MEMA=function(t,e){var a=[];if(!t||!t.length)return a;var i=0,r=0;for(r=0;r<t.length&&!this.IsNumber(t[r]);++r)a[r]=null;if(i=r,e<1||i+e>=t.length)return a;for(var n=0,t=t.slice(0);i<r+e;++i)a[i]=null,!this.IsNumber(t[i])&&i-1>=0&&(t[i]=t[i-1]),n+=t[i];for(a[i-1]=n/e;i<t.length;++i)this.IsNumber(a[i-1])&&this.IsNumber(t[i])?a[i]=(t[i]+a[i-1]*(e-1))/e:i-1>-1&&this.IsNumber(a[i-1])?a[i]=a[i-1]:a[i]=null;return a},this.EXPMA=function(t,e){var a=[];if(e>=t.length)return a;for(var i=e;i<t.length;++i)if(null!=t[i]){a[i]=t[i];break}for(i+=1;i<t.length;++i)null!=a[i-1]&&null!=t[i]?a[i]=(2*t[i]+(e-1)*a[i-1])/(e+1):null!=a[i-1]&&(a[i]=a[i-1]);return a},this.EXPMEMA=function(t,e){var a=[];if(e>=t.length)return a;for(var i=0;i<t.length&&(!t[i]||isNaN(t[i]));++i);for(var r=0,n=0;i<t.length&&n<e;++n,++i)t[i]&&!isNaN(t[i])?r+=t[i]:r+=t[i-1];for(a[i-1]=r/e;i<t.length;++i)null!=a[i-1]&&null!=t[i]?a[i]=(2*t[i]+(e-1)*a[i-1])/(e+1):null!=a[i-1]&&(a[i]=a[i-1]);return a},this.SUMBARS=function(t,e){var a=[];if(!(t&&t.length&&e&&e.length))return a;for(var i=0,r=0,n=0;i<t.length&&!this.IsNumber(t[i]);++i)a[i]=null;for(r=t.length-1;r>=i;--r){var o=0;for(n=r,o=0;n>=i&&o<e[r];--n)o+=t[n];a[r]=n<i?null:r-n}for(r=i+1;r<t.length;++r)null==a[r]&&(a[r]=a[r-1]);return a},this.REVERSE=function(t){if(this.IsNumber(t))return 0-t;for(var e=[],a=0;a<t.length&&!this.IsNumber(t[a]);++a)e[a]=null;for(;a<t.length;++a)this.IsNumber(t[a])?e[a]=0-t[a]:e[a]=null;return e},this.COUNT=function(t,e){if(Array.isArray(e)){for(var a=null,i=t.length,r=0;r<i;++r)if(this.IsNumber(t[r])){a=r;break}if(null==a)return[];for(var n=[],o=0,r=0;r<e.length;++r){var s=e[r];if(0!=s){we.IsNumber(s)?s<0&&(s=r+1):s=r+1,o=0;for(var l=r,h=0;l>=0&&h<s;--l,++h)t[l]&&++o;n[r]=o}else n[r]=0}return n}for(var s=e,i=t.length,s=s<1?i:s,r=0,l=0;r<i&&!this.IsNumber(t[r]);++r);for(var n=[],u=0;r<i&&l<s;++r,++l)u=t[r]?u+1:u,n[r]=u;for(;r<i;++r)t[r-s]&&u&&u--,u=t[r]?u+1:u,n[r]=u;return n},this.HHV=function(t,e){var a=[];if(Array.isArray(e)){for(var i=null,r=0,n=0;r<t.length;++r)if(a[r]=null,!(r>=e.length)){i=null;var o=e[r];if(o>0&&o<=r)for(n=r-o;n<=r;++n)(null==i||i<t[n])&&(i=t[n]);else for(o=r,n=0;n<=r;++n)(null==i||i<t[n])&&(i=t[n]);a[r]=i}}else{if(!we.IsNonEmptyArray(t))return a;e=parseInt(e),e<=0?e=t.length:e>t.length&&(e=t.length);var s=this.GetFirstVaildIndex(t);if(s>=t.length)return a;var l=s;l<t.length&&(a[l]=t[l]);for(var r=l+1,n=2;r<t.length&&n<e;++r,++n)t[r]>=t[l]&&(l=r),a[r]=t[l];for(;r<t.length;++r){if(r-l<e)l=t[r]<t[l]?l:r;else for(n=l=r-e+1;n<=r;++n)l=t[n]<t[l]?l:n;a[r]=t[l]}}return a},this.HV=function(t,e){var a=this.HHV(t,e);return this.REF(a,1)},this.LLV=function(t,e){var a=[];if(Array.isArray(e)){for(var i=0;i<t.length;++i)if(a[i]=null,!(i>=e.length)){var r=null,n=e[i];if(n>0&&n<=i)for(var o=i-n;o<=i;++o)(null==r||r>t[o])&&(r=t[o]);else{n=i;for(var o=0;o<=i;++o)(null==r||r>t[o])&&(r=t[o])}a[i]=r}}else{if(!we.IsNonEmptyArray(t))return a;e=parseInt(e),e<=0?e=t.length:e>t.length&&(e=t.length);var s=this.GetFirstVaildIndex(t);if(s>=t.length)return a;var l=s;l<t.length&&(a[l]=t[l]);for(var i=l+1,o=2;i<t.length&&o<e;++i,++o)t[i]<=t[l]&&(l=i),a[i]=t[l];for(;i<t.length;++i){if(i-l<e)l=t[i]>t[l]?l:i;else for(o=l=i-e+1;o<=i;++o)l=t[o]>t[l]?l:o;a[i]=t[l]}}return a},this.LV=function(t,e){var a=this.LLV(t,e);return this.REF(a,1)},this.STD=function(t,e){var a=[];if(!Array.isArray(t))return a;var i=this.GetFirstVaildIndex(t);if(!we.IsNumber(e))return a;if(i+e>t.length||e<1)return a;var r=i,n=0,o=!0,s=0,l=0;for(r+=e-1;r<t.length;++r){if(s=0,o){for(o=!1,n=r-e+1;n<=r;++n)l+=t[n];l/=e}else l+=(t[r]-t[r-e])/e;for(n=r-e+1;n<=r;++n)s+=(t[n]-l)*(t[n]-l);a[r]=Math.sqrt(s/(e-1))}return a},this.STDDEV=function(t,e){var a=[];if(!Array.isArray(t))return a;var i=this.GetFirstVaildIndex(t);if(!we.IsNumber(e))return a;if(i+e>t.length||e<1)return a;var r=i,n=0,o=!0,s=0,l=0;for(r+=e-1;r<t.length;++r){if(s=0,o){for(o=!1,n=r-e+1;n<=r;++n)l+=t[n];l/=e}else l+=(t[r]-t[r-e])/e;for(n=r-e+1;n<=r;++n)s+=(t[n]-l)*(t[n]-l);a[r]=Math.sqrt(s/(e-1))/Math.sqrt(e)}return a},this.AVEDEV=function(t,e){for(var a=[],i=0,r=[],n=e-1;n<t.length;++n){i=0;for(var o=0;o<e;++o)i+=t[n-o];r[n]=i/e}for(var n=e-1;n<t.length;++n){i=0;for(var o=0;o<e;++o)i+=Math.abs(t[n-o]-r[n]);a[n]=i/e}return a},this.CROSS=function(t,e){var a=[];if(Array.isArray(t)&&Array.isArray(e)){if(t.length!=e.length)return a=[];for(var i=0;i<t.length&&(!this.IsNumber(t[i])||!this.IsNumber(e[i]));++i);for(++i;i<t.length;++i)a[i]=t[i]>e[i]&&t[i-1]<e[i-1]?1:0}else if(Array.isArray(t)&&"number"==typeof e){for(var i=0;i<t.length&&!this.IsNumber(t[i]);++i);for(++i;i<t.length;++i)a[i]=t[i]>e&&t[i-1]<e?1:0}else if("number"==typeof t&&Array.isArray(e)){for(var i=0;i<e.length&&!this.IsNumber(e[i]);++i);for(++i;i<e.length;++i)a[i]=e[i]<t&&e[i-1]>t?1:0}return a},this.CROSSDOWN=function(t,e){return this.CROSS(e,t)},this.CROSSUP=function(t,e){return this.CROSS(t,e)},this.MULAR=function(t,e){var a=[];if(Array.isArray(e))for(var i=0;i<t.length;++i){a[i]=null;var r=e[i];if(this.IsNumber(r)&&!((r=parseInt(r))<0))for(var n=i,o=0;n>=0&&o<r;--n,++o)0==o?a[i]=t[n]:a[i]*=t[n]}else{if(t.length<e)return a;if(0==e){for(var s=e;s<t.length;++s)if(this.IsNumber(t[s])){a[s]=t[s];break}for(++s;s<t.length;++s)a[s]=a[s-1]*t[s]}else for(var i=e-1,n=0;i<t.length;++i,++n)for(var o=0;o<e;++o)0==o?a[i]=t[o+n]:a[i]*=t[o+n]}return a},this.SUM=function(t,e){var a=[];if(Array.isArray(e))for(var i=0;i<t.length;++i){a[i]=null;var r=e[i];if(r>0)for(var n=i,o=0;n>=0&&o<r;--n,++o)0==o?a[i]=t[n]:a[i]+=t[n]}else if(e<=0){for(var s=-1,i=0;i<t.length;++i)if(we.IsNumber(t[i])){s=i;break}if(s<0)return a;a[s]=t[s];for(var i=s+1;i<t.length;++i)a[i]=a[i-1]+t[i]}else{a[0]=t[0];for(var i=1;i<e&&i<t.length;++i)a[i]=a[i-1]+t[i];for(var i=e-1,n=0;i<t.length;++i,++n)for(var o=0;o<e;++o)0==o?a[i]=t[o+n]:a[i]+=t[o+n]}return a},this.BARSCOUNT=function(t){var e=[],a=null;for(var i in t){if(e[i]=0,null==a){if(!this.IsNumber(t[i]))continue;a=0}e[i]=a,++a}return e},this.DEVSQ=function(t,e){if(this.IsNumber(t)&&this.IsNumber(e))return 0;var a=[];if(Array.isArray(t)){var i=null;if(Array.isArray(e)){for(var r=e.length-1;r>=0;--r)if(this.IsNumber(e[r])){i=parseInt(e[r]);break}}else i=parseInt(e);if(!this.IsNumber(i))return a;var n=t.length,r=0,o=0,s=0,l=0,h=0;for(r=0;r<n&&!this.IsNumber(t[r]);++r)a[r]=null;if(i<1||r+i>n)return a;for(l=0;r<n&&o<i;++r,++o)l+=t[r]/i;if(o==i){for(h=0,r--;s<i;s++)h+=(t[r-s]-l)*(t[r-s]-l);a[r]=h,r++}for(;r<n;++r){for(l+=(t[r]-t[r-i])/i,h=0,s=0;s<i;++s)h+=(t[r-s]-l)*(t[r-s]-l);a[r]=h}}return a},this.NOT=function(t){if("number"==typeof t)return t?0:1;var e=[];for(var a in t)e[a]=null,this.IsNumber(t[a])&&(e[a]=t[a]?0:1);return e},this.FORCAST=function(t,e){var a=[];"number"!=typeof e&&(e=parseInt(e));var i=e,r=t.length;if(i<1||i>=r)return a;var n,o,s,l,h,u=0,C=0,c=0,f=0;for(l=0;l<r&&!this.IsNumber(t[l]);++l)a[l]=null;for(s=l+i-1;s<r;++s){for(u=C=c=f=0,l=0,h=i;l<i&&l<=s;++l,--h)u+=h,C+=t[s-l];for(u/=i,C/=i,l=0,h=i;l<i&&l<=s;++l,--h)c+=(h-u)*(t[s-l]-C),f+=(h-u)*(h-u);o=c/f,n=C-u*o,a[s]=o*i+n}return a},this.TSMA=function(t,e){var a=[];"number"!=typeof e&&(e=parseInt(e));var i=e,r=t.length;if(i<1||i>=r)return a;var n,o,s,l,h,u=0,C=0,c=0,f=0;for(l=0;l<r&&!this.IsNumber(t[l]);++l)a[l]=null;for(s=l+i-1;s<r;++s){for(u=C=c=f=0,l=0,h=i;l<i&&l<=s;++l,--h)u+=h,C+=t[s-l];for(u/=i,C/=i,l=0,h=i;l<i&&l<=s;++l,--h)c+=(h-u)*(t[s-l]-C),f+=(h-u)*(h-u);o=c/f,n=C-u*o,a[s]=o*i+n+o}return a},this.SLOPE=function(t,e){var a=[];if("number"!=typeof e&&(e=parseInt(e)),e<1||!t.length)return a;if(e>=t.length)return a;for(var i=0,r=0;r<t.length&&(a[r]=null,!this.IsNumber(t[r]));++r,++i);for(var n=void 0,o=void 0,s=void 0,l=void 0,h=i+e-1;h<t.length;++h){a[h]=null,n=o=s=l=0;for(var u=0;u<e&&u<=h;++u)n+=h-u,o+=t[h-u];for(n/=e,o/=e,u=0;u<e&&u<=h;++u)s+=(h-u-n)*(t[h-u]-o),l+=(h-u-n)*(h-u-n);l?a[h]=s/l:h&&(a[h]=a[h-1])}return a},this.STDP=function(t,e){var a=[];if(!Array.isArray(t))return a;var i=this.GetFirstVaildIndex(t);if(!we.IsNumber(e))return a;if(i+e>t.length||e<1)return a;var r=i,n=0,o=!0,s=0,l=0;for(r+=e-1;r<t.length;++r){if(s=0,o){for(o=!1,n=r-e+1;n<=r;++n)l+=t[n];l/=e}else l+=(t[r]-t[r-e])/e;for(n=r-e+1;n<=r;++n)s+=(t[n]-l)*(t[n]-l);a[r]=Math.sqrt(s/e)}return a},this.VAR=function(t,e){if(this.IsNumber(t)&&this.IsNumber(e))return 0;var a=[];if(Array.isArray(t)&&this.IsNumber(e)){var i=parseInt(e),r=t.length;if(i<=0||i>=r)return a;var n,o;for(n=0;n<r&&!this.IsNumber(t[n]);++n)a[n]=null;var s,l;for(o=0,n=n+i-1;n<r;++n){for(s=l=0,o=0;o<i&&o<=n;++o)s+=t[n-o]*t[n-o],l+=t[n-o];a[n]=(i*s-l*l)/i*(i-1)}}else if(Array.isArray(t)&&Array.isArray(e))for(var h=this.GetFirstVaildIndex(t),n=h;n<t.length;++n){var s=l=0;if(this.IsNumber(e[n])){var i=parseInt(e[n]);if(!(i<=0||n-(i-1)<0)){for(var o=0;o<i;++o)s+=t[n-o]*t[n-o],l+=t[n-o];a[n]=(i*s-l*l)/i*(i-1)}}}return a},this.VARP=function(t,e){var a=[];"number"!=typeof e&&(e=parseInt(e));var i=e,r=t.length;if(i<1||i>=r)return a;var n=0,o=0;for(n=0;n<r&&!this.IsNumber(t[n]);++n)a[n]=null;for(var s=0,l=0;n<r&&o<i;++n,++o)s+=t[n]*t[n],l+=t[n];for(o==i&&(a[n-1]=(i*s-l*l)/(i*i));n<r;++n)s+=t[n]*t[n]-t[n-i]*t[n-i],l+=t[n]-t[n-i],a[n]=(i*s-l*l)/(i*i);return a},this.RANGE=function(t,e,a){var i="number"==typeof t,r="number"==typeof e,n="number"==typeof a;if(i&&r&&n)return t>Math.min(e,a)&&t<Math.max(e,a)?1:0;for(var o=[],s=void 0,l=void 0,h=0;h<t.length;++h)if(o[h]=null,s=t[h],this.IsNumber(s)){if(r)l=e;else{if(h>=e.length)continue;l=e[h]}if(this.IsNumber(l)){if(n)rangeValue2=a;else{if(h>=a.length)continue;rangeValue2=a[h]}this.IsNumber(rangeValue2)&&(o[h]=s>Math.min(l,rangeValue2)&&s<Math.max(l,rangeValue2)?1:0)}}return o},this.EXIST=function(t,e){if("number"==typeof t)return 0;if(Array.isArray(e)){var a=[];if(t.length<=0)return a;for(var i in t)a[i]=0;for(var i=0;i<e.length&&i<t.length;++i){var r=e[i];if(this.IsNumber(r)&&!((r=parseInt(r))<=0)){r>i+1&&(r=i+1);for(var n=!1,o=0,s=0;s<r;++s)if(i-(r-s-1),o=t[i],this.IsNumber(o)&&o>0){n=!0;break}a[i]=n?1:0}}return a}e=parseInt(e);for(var o,l=null,a=[],h=0;h<t.length;++h)a[h]=null,o=t[h],this.IsNumber(o)&&o>0&&(l=h),a[h]=null!=l&&h-l<e?1:0;return a},this.TFILTER=function(t,e,a){if(!this.IsNumber(a))return[];if(1==a)return this.And(t,this.EQ(this.COUNT(t,this.BARSLAST(e)),1));if(2==a)return this.And(e,this.EQ(this.COUNT(e,this.BARSLAST(t)),1));if(0==a){for(var i=this.And(e,this.EQ(this.COUNT(e,this.BARSLAST(t)),1)),r=this.And(e,this.EQ(this.COUNT(e,this.BARSLAST(t)),1)),n=0;n<i.length;++n){r[n]>0&&(i[n]=2)}return i}return[]},this.FILTER=function(t,e){for(var a=[],i=0,r=0;i<t.length;++i)if(t[i]){for(a[i]=1,r=0;r<e&&r+i+1<t.length;++r)a[r+i+1]=0;i+=e}else a[i]=0;return a},this.FILTERX=function(t,e,a){for(var i=[],r=0,n=0;r<t.length;++r)if(t[r]){for(i[r]=1,n=0;n<e&&r-n-1>=0;++n)i[r-n-1]=0;r+=e}else i[r]=0;return i},this.BARSLAST=function(t){var e=[];if(!t)return e;for(var a=null,i=0;i<t.length;++i)e[i]=null,t[i]>0?a=0:null!=a&&++a,null!=a&&(e[i]=a);return e},this.BARSLASTS=function(t,e,a){var i=[];if(!t)return i;e<=0&&(e=t.length);for(var r=null,n=0,o=0,s=0;s<t.length;++s){i[s]=null;t[s]>0?(null==r?(r=0,++o):++o>e&&(r-=n),n=0):null!=r&&(++r,++n),null!=r&&(i[s]=r)}return i},this.BARSSINCEN=function(t,e){var a=[];if(this.IsNumber(e)&&Array.isArray(t)){var i=e;i<1&&(i=t.length);var r=this.GetFirstVaildIndex(t);if(r>=t.length)return a;var n=0;for(n=r<=i-1?i-1:r,a[n]=n-r;n<t.length;++n)if(this.IsNumber(a[n-1])){if(a[n-1]+1<i)a[n]=a[n-1]+1;else for(var o=n-i+1;o<=n;++o)if(!(Math.abs(t[o])<1e-6)){a[n]=n-o;break}}else Math.abs(t[n])<1e-6||(a[n]=0)}return a},this.BARSSINCE=function(t){for(var e=[],a=null,i=0;i<t.length;++i)e[i]=null,null==a?t[i]&&(a=0):++a,a&&(e[i]=a);return e},this.Trigonometric=function(t,e){if(Array.isArray(t)){var a=[];for(var i in t){var r=t[i];this.IsNumber(r)?a[i]=e(r):a[i]=null}return a}return this.IsNumber(t)?e(t):null},this.ASIN=function(t){if(Array.isArray(t)){var e=[];for(var a in t){var i=t[a];if(e[a]=null,this.IsNumber(i))if(i>=-1&&i<=1)e[a]=Math.asin(i);else if(a-1>=0){var r=e[a-1];this.IsNumber(r)&&(e[a]=r)}}return e}return this.IsNumber(t)?Math.acos(t):null},this.ACOS=function(t){if(Array.isArray(t)){var e=[];for(var a in t){var i=t[a];if(e[a]=null,this.IsNumber(i))if(i>=-1&&i<=1)e[a]=Math.acos(i);else if(a-1>=0){var r=e[a-1];this.IsNumber(r)&&(e[a]=r)}}return e}return this.IsNumber(t)?Math.acos(t):null},this.LAST=function(t,e,a){if(!Array.isArray(t))return[];for(var i=[],r=t.length,n=e,o=a,s=0,l=0,h=0,u=0;s<r&&!t[s];++s);for(l=s,u=s-o+1;l<r;++l,++u){for(h=0==n?s:Math.max(s,l-n);h<u&&!(t[h]<=0);++h);i[l]=h<u?0:1}return i},this.ZIG=function(t,e){var a=this.SymbolData.Data,i=[];if("number"==typeof t)switch(t){case 0:t=a.GetOpen();break;case 1:t=a.GetHigh();break;case 2:t=a.GetLow();break;case 3:t=a.GetClose();break;default:return i}return this.ZIG_Calculate(t,e)},this.GetFirstVaildIndex=function(t){for(var e=0;e<t.length;++e)if(this.IsNumber(t[e]))return e;return t.length},this.ZIG_Calculate=function(t,e){var a=[],i=t.length,r=this.GetFirstVaildIndex(t),n=0,o=0,s=0,l=0,h=0;for(n=r+1,o=s=r;n<i-1&&s==r;++n)s=100*Math.abs(t[n]-t[r])>=e*t[r]?t[n]>t[r]?n:-n:r;for(;n<i-1;++n)if(t[n]>=t[n-1]&&t[n]>=t[n+1])if(s<0){if(100*(t[n]-t[-s])<e*t[-s])continue;for(h=(t[o]-t[l=-s])/(-s-o),a[l--]=t[-s];l>=o;l--)a[l]=t[-s]+(-s-l)*h;o=-s,s=n}else t[n]>t[s]&&(s=n);else if(t[n]<=t[n-1]&&t[n]<=t[n+1])if(s>0){if(100*(t[s]-t[n])<e*t[s])continue;for(h=(t[s]-t[l=o])/(s-o),a[l++]=t[o];l<=s;++l)a[l]=t[o]+(l-o)*h;o=s,s=-n}else t[n]<t[-s]&&(s=-n);if(Math.abs(s)>=i-2&&(s>0&&t[i-1]>=t[s]&&(s=i-1),s<0&&t[i-1]<=t[-s]&&(s=1-i)),s>0)for(h=(t[s]-t[l=o])/(s-o),a[l++]=t[o];l<=s;++l)a[l]=t[o]+(l-o)*h;else for(h=(t[o]-t[l=-s])/(-s-o),a[l--]=t[-s];l>=o;l--)a[l]=t[-s]+(-s-l)*h;if((s=Math.abs(s))<i-1)if(t[i-1]>=t[s])for(h=(t[i-1]-t[l=s])/(i-s),a[l++]=t[s];l<i;++l)a[l]=t[s]+(l-s)*h;else for(h=(t[s]-t[l=i-1])/(i-s),a[l--]=t[i-1];l>=s;l--)a[l]=t[i-1]+(i-l)*h;return a},this.JSDraw=null,this.CalculateZIGLine=function(t,e,a,i,r){null==this.JSDraw&&(this.JSDraw=new mr(this.ErrorHandler));var n=e.Up,o=t;if(n)for(var s=t.ID+1;s<a.ID;++s){var l=i[s];this.IsNumber(l)&&(o.Value<l&&(o={ID:s,Value:l}))}else for(var s=t.ID+1;s<a.ID;++s){var l=i[s];this.IsNumber(l)&&(o.Value>l&&(o={ID:s,Value:l}))}e.Value=o.Value,e.ID=o.ID;var h={Start:{ID:t.ID,Value:t.Value},End:{ID:e.ID,Value:e.Value}},u=this.JSDraw.CalculateDrawLine(h);for(var s in u){var C=u[s];r[C.ID]=C.Value}if(a.ID==i.length-1){h={Start:{ID:e.ID,Value:e.Value},End:{ID:a.ID,Value:a.Value}},u=this.JSDraw.CalculateDrawLine(h);for(var s in u){var C=u[s];r[C.ID]=C.Value}}else t.ID=e.ID,t.Value=e.Value,e.ID=a.ID,e.Value=a.Value,e.Up=t.Value<e.Value},this.TROUGHBARS=function(t,e,a){var i=this.ZIG(t,e),r=[],n=a;if(n<1)return r;for(var o=i.length,s=[],l=0;l<n;++l)s[l]=0;var h=0,l=this.GetFirstVaildIndex(i)+1;for(n--;l<o&&i[l]>i[l-1];++l);for(;l<o&&i[l]<i[l-1];++l);for(s[0]=--l;l<o-1;++l){if(i[l]<i[l+1]){if(h){if(n)for(var u=s.slice(0),C=0;C<n;++C)s[C+1]=u[C];s[h=0]=l}}else h=1;s[n]&&(r[l]=l-s[n])}return s[n]&&(r[l]=l-s[n]),r},this.TROUGH=function(t,e,a){var i=this.ZIG(t,e),r=[],n=a;if(n<1)return r;for(var o=i.length,s=[],l=0;l<n;++l)s[l]=0;var l=1,h=0,l=this.GetFirstVaildIndex(i)+1;for(n--;l<o&&i[l]>i[l-1];++l);for(;l<o&&i[l]<i[l-1];++l);for(s[0]=--l;l<o-1;++l){if(i[l]<i[l+1]){if(h){if(n)for(var u=s.slice(0),C=0;C<n;++C)s[C+1]=u[C];s[h=0]=l}}else h=1;s[n]&&(r[l]=i[s[n]])}return s[n]&&(r[l]=i[s[n]]),r},this.PEAKBARS=function(t,e,a){var i=this.ZIG(t,e),r=[],n=i.length,o=a;if(o<1)return r;for(var s=[],l=0;l<o;++l)s[l]=0;var h=0,l=this.GetFirstVaildIndex(i)+1;for(o--;l<n&&i[l]<i[l-1];++l);for(;l<n&&i[l]>i[l-1];++l);for(s[0]=--l;l<n-1;++l){if(i[l]>i[l+1]){if(h){if(o)for(var u=s.slice(0),C=0;C<o;++C)s[C+1]=u[C];s[h=0]=l}}else h=1;s[o]&&(r[l]=l-s[o])}return s[o]&&(r[l]=l-s[o]),r},this.PEAK=function(t,e,a){var i=this.ZIG(t,e),r=[],n=i.length,o=a;if(o<1)return r;for(var s=0,l=[],h=0;h<o;++h)l[h]=0;var h=this.GetFirstVaildIndex(i)+1;for(o--;h<n&&i[h]<i[h-1];++h);for(;h<n&&i[h]>i[h-1];++h);for(l[0]=--h;h<n-1;++h){if(i[h]>i[h+1]){if(s){if(o)for(var u=l.slice(0),C=0;C<o;++C)l[C+1]=u[C];l[s=0]=h}}else s=1;l[o]&&(r[h]=i[l[o]])}return l[o]&&(r[h]=i[l[o]]),r},this.EVERY=function(t,e){var a=[];if(e<1)return a;if(we.IsNumber(e)){e=parseInt(e);for(var i=0;i<t.length&&(a[i]=null,!this.IsNumber(t[i]));++i);for(var r=0;i<t.length;++i)t[i]?r+=1:r=0,r==e?(a[i]=1,--r):a[i]=0}else if(Array.isArray(e))for(var i=0;i<e.length;++i){var n=e[i];if(a[i]=null,we.IsPlusNumber(n)){n=parseInt(n);for(var r=0,o=i,s=0;o>=0&&s<n;--o,++s)t[o]&&++r;a[i]=r==n?1:0}}return a},this.COST=function(t,e){var a=[],i=t/100;if(i<1e-6||i>1)return a;var r=this.SymbolData.Data.Data;if(!r||r.length<=0)return a;for(var n=this.SymbolData.GetStockCacheData({FunctionName:"FINANCE",Args:[7],ArgCount:1,Node:e}),o=r[0].High,s=r[0].Low,l=0;l<r.length;++l){var h=r[l];s=Math.min(s,h.Low),o=Math.max(o,h.High)}(s>2e3||s<0||o>2e3||s<0)&&this.ThrowUnexpectedNode(e,"COST() åå²Kçº¿æå¤§æå°å¼éè¯¯, è¶åº(0,1000)èå´");var u=parseInt(100*o+1),C=parseInt(100*s-1),c=0,f=0,d=0;o=u/100,s=C/100;var D=u-C+1;if(D<1)return a;for(var m=[],p=[],l=0;l<D;++l)m[l]=0,p[l]=0;for(var v=0,g=0,T=0,I=0,l=0;l<r.length;++l)if(!(l>=n.length)){if(n[l]>1){var S=r[l];v=S.Vol/n[l];for(var x=0;x<D;x++)m[x]*=1-v;c=parseInt(Math.min(u,Math.max(C,100*S.Low)))-C,f=parseInt(Math.min(u,Math.max(C,100*S.High)))-C,d=parseInt(Math.min(u,Math.max(C,100*S.Close)))-C;for(var x=0;x<D;++x)p[x]=0;var b=parseInt((c+f+2*d)/4);if(b==f||b==c)p[b]+=S.Vol;else{for(var y=S.Vol/(b-c),E=c;E<b;++E)p[E]+=y/(b-c)*(E-c);for(E;E<=f;++E)p[E]+=y/(b-f)*(E-f)}for(var g=0,x=c;x<=f;x++)m[x]+=p[x];for(var x=0;x<D;x++)g+=m[x];for(x=0,I=T=0;x<D;++x)if((T+=m[x])>=g*i){I=(o-s)*x/D+s;break}}a[l]=I}return a},this.WINNER=function(t,e){var a=[],i=this.SymbolData.Data.Data;if(!i||i.length<=0)return a;for(var r=this.SymbolData.GetStockCacheData({FunctionName:"FINANCE",Args:[7],ArgCount:1,Node:e}),n=i[0].High,o=i[0].Low,s=0;s<i.length;++s){var l=i[s];o=Math.min(o,l.Low),n=Math.max(n,l.High)}(o>5e3||o<0||n>5e3||o<0)&&this.ThrowUnexpectedNode(e,"WINNER() åå²Kçº¿æå¤§æå°å¼éè¯¯, è¶åº(0,5000)èå´");var h=parseInt(100*n+1),u=parseInt(100*o-1),C=0,c=0,f=0;n=h/100,o=u/100;var d=h-u+1;if(d<1)return a;for(var D=[],m=[],s=0;s<d;++s)D[s]=0,m[s]=0;for(var p=0,v=0,g=0,s=0;s<i.length;++s)if(!(s>=r.length)&&r[s]>1){var T=i[s];p=T.Vol/r[s];for(var I=0;I<d;I++)D[I]*=1-p;C=parseInt(Math.min(h,Math.max(u,100*T.Low)))-u,c=parseInt(Math.min(h,Math.max(u,100*T.High)))-u,f=parseInt(Math.min(h,Math.max(u,100*T.Close)))-u;for(var I=0;I<d;++I)m[I]=0;var S=parseInt((C+c+2*f)/4);if(S==c||S==C)m[S]+=T.Vol;else{for(var x=T.Vol/(S-C),b=C;b<S;++b)m[b]+=x/(S-C)*(b-C);for(b;b<=c;++b)m[b]+=x/(S-c)*(b-c)}for(var v=0,I=C;I<=c;I++)D[I]+=m[I];for(var I=0;I<d;I++)v+=D[I];c=Array.isArray(t)?parseInt(Math.min(100*t[s]-u,d-1)):parseInt(Math.min(100*t-u,d-1));for(var I=0,g=0;I<=c;I++)g+=D[I];v>0?a[s]=g/v:s-1>=0&&(a[s]=a[s-1])}return a},this.COSTEX=function(t,e,a){var i=[],r=this.SymbolData.Data.Data;if(!r||r.length<=0)return i;for(var n=this.SymbolData.GetStockCacheData({FunctionName:"FINANCE",Args:[7],ArgCount:1,Node:a}),o=r[0].High,s=r[0].Low,l=0;l<r.length;++l){var h=r[l];s=Math.min(s,h.Low),o=Math.max(o,h.High)}(s>5e3||s<0||o>5e3||s<0)&&this.ThrowUnexpectedNode(a,"COSTEX() åå²Kçº¿æå¤§æå°å¼éè¯¯, è¶åº(0,5000)èå´");var u=parseInt(100*o+1),C=parseInt(100*s-1),c=0,f=0,d=0;o=u/100,s=C/100;var D=u-C+1;if(D<1)return i;for(var m=[],p=[],l=0;l<D;++l)m[l]=0,p[l]=0;for(var v=0,g=0,T=0,I=0,S=0,x=0,b=0,l=0,y=0;l<r.length;++l)if(!(l>=n.length)&&n[l]>1){var E=r[l];v=E.Vol/n[l];for(var y=0;y<D;y++)m[y]*=1-v;c=parseInt(Math.min(u,Math.max(C,100*E.Low)))-C,f=parseInt(Math.min(u,Math.max(C,100*E.High)))-C,d=parseInt(Math.min(u,Math.max(C,100*E.Close)))-C;for(var y=0;y<D;++y)p[y]=0;var w=parseInt((c+f+2*d)/4);if(w==f||w==c)p[w]+=E.Vol;else{for(var F=E.Vol/(w-c),M=c;M<w;++M)p[M]+=F/(w-c)*(M-c);for(M;M<=f;++M)p[M]+=F/(w-f)*(M-f)}g=0;for(var y=c;y<=f;y++)m[y]+=p[y];for(var y=0;y<D;y++)g+=m[y];for(f=Array.isArray(t)?parseInt(Math.min(100*t[l]-C,D-1)):parseInt(Math.min(100*t-C,D-1)),y=0,I=0,S=0;y<=f;y++)I+=m[y],S+=.01*(y+C)*m[y];for(f=Array.isArray(e)?parseInt(Math.min(100*e[l]-C,D-1)):parseInt(Math.min(100*e-C,D-1)),y=0,x=0,b=0;y<=f;y++)x+=m[y],b+=.01*(y+C)*m[y];T=I-x,dPerVolRange=S-b,Math.abs(dPerVolRange)>.001&&0!=T?i[l]=dPerVolRange/T:l-1>=0&&(i[l]=i[l-1])}return i},this.PPART=function(t,e){var a=[],i=t;if(i<0)return a;var r=this.SymbolData.Data.Data;if(!r||r.length<=0)return a;for(var n=this.SymbolData.GetStockCacheData({FunctionName:"FINANCE",Args:[7],ArgCount:1,Node:e}),o=i,s=0;o<r.length;++o){var l=o-i;if(!(l<0)){var h=0;for(s=0;s<i;++s){h+=r[s+l].Vol}if(o<n.length&&n[o]>0){var u=1-h/n[o];a[o]=u}}}return a},this.LWINNER=function(t,e,a){var i=t;i<=0&&this.ThrowUnexpectedNode(a,"LWINNER() ç¬¬1ä¸ªåæ°éè¯¯");var r=[],n=this.SymbolData.Data.Data;if(!n||n.length<=0)return r;for(var o=this.SymbolData.GetStockCacheData({FunctionName:"FINANCE",Args:[7],ArgCount:1,Node:a}),s=0,l=0,h=i-1,u=0,C=0;h<n.length;++h){for(var c=h-i+1,f=n[c].High,d=n[c].Low,u=0;u<i;++u){var D=n[c+u];d=Math.min(d,D.Low),f=Math.max(f,D.High)}(d>5e3||d<0||f>5e3||d<0)&&this.ThrowUnexpectedNode(a,"LWINNER() åå²Kçº¿æå¤§æå°å¼éè¯¯, è¶åº(0,5000)èå´");var m=parseInt(100*f+1),p=parseInt(100*d-1),v=0,g=0,T=0;f=m/100,d=p/100;var I=m-p+1;if(I<1)return r;for(var S=[],x=[],u=0;u<I;++u)S[u]=0,x[u]=0;for(u=0;u<i;++u){var b=o[c+u];if(!(b<1)){var y=n[c+u],E=y.Vol/b;for(C=0;C<I;C++)S[C]*=1-E;v=parseInt(Math.min(m,Math.max(p,100*y.Low)))-p,g=parseInt(Math.min(m,Math.max(p,100*y.High)))-p,T=parseInt(Math.min(m,Math.max(p,100*y.Close)))-p;for(var C=0;C<I;++C)x[C]=0;var w=parseInt((v+g+2*T)/4);if(w==g||w==v)x[w]+=y.Vol;else{for(var F=y.Vol/(w-v),M=v;M<w;++M)x[M]+=F/(w-v)*(M-v);for(var L;L<=g;++L)x[L]+=F/(w-g)*(L-g)}s=0;for(var C=v;C<=g;C++)S[C]+=x[C]}}for(var u=0;u<I;u++)s+=S[u];for(g=Array.isArray(e)?parseInt(Math.min(100*e[h]-p,I-1)):parseInt(Math.min(100*e-p,I-1)),l=0,C=0;C<=g;C++)l+=S[C];s>0&&l>0&&l<=s?r[h]=l/s:h-1>=0&&(r[h]=r[h-1])}return r},this.PWINNER=function(t,e,a){return[]},this.CalculateChip=function(t,e,a,i){for(var r={Min:null,Max:null,Data:[]},n=1,o=null,s=null,l=t;l>=0;--l){var h={},u=a[l];h.Vol=l==t?u.Vol*e[l]:u.Vol*n,h.Date=u.Date,h.High=u.High,h.Low=u.Low,null==o?o=h.High:o<h.High&&(o=h.High),null==s?s=h.Low:s<h.Low&&(s=h.Low),r.Data[l]=h,n*=1-e[l]/100*i}return r.Max=o,r.Min=s,r},this.UPNDAY=function(t,e){var a=[];if(e<1)return a;if(null==t||e>t.length)return a;for(var i=0,r=0;r<t.length;++r)a[r]=0,r-1<0||(this.IsNumber(t[r])&&this.IsNumber(t[r-1])?(t[r]>t[r-1]?++i:i=0,i==e&&(a[r]=1,--i)):i=0);return a},this.DOWNNDAY=function(t,e){var a=[];if(e<1)return a;if(null==t||e>t.length)return a;for(var i=0,r=0;r<t.length;++r)a[r]=0,r-1<0||(this.IsNumber(t[r])&&this.IsNumber(t[r-1])?(t[r]<t[r-1]?++i:i=0,i==e&&(a[r]=1,--i)):i=0);return a},this.NDAY=function(t,e,a){var i=[];if(a<1)return i;if(!Array.isArray(t)&&!Array.isArray(e))return i;if(null==t||null==e)return i;if(Array.isArray(t)&&Array.isArray(e)){if(a>=t.length||a>=e.length)return i;for(var r=Math.max(t.length,e.length),n=0,o=0;o<r;++o)i[o]=0,o>=t.length||o>=e.length||(this.IsNumber(t[o])&&this.IsNumber(e[o])?(t[o]>e[o]?++n:n=0,n==a&&(i[o]=1,--n)):n=0)}else if(Array.isArray(t)&&!Array.isArray(e)){if(a>=t.length||!this.IsNumber(e))return;var n=0;for(var s in t)i[s]=0,this.IsNumber(t[s])?(t[s]>e?++n:n=0,n==a&&(i[s]=1,--n)):n=0}else if(!Array.isArray(t)&&Array.isArray(e)){if(a>=e.length||!this.IsNumber(t))return;var n=0;for(var l in e)i[l]=0,this.IsNumber(e[l])?(t>e[l]?++n:n=0,n==a&&(i[l]=1,--n)):n=0}return i},this.LONGCROSS=function(t,e,a){for(var i=[],r=Math.max(t.length,e.length),n=0;n<r;++n)i[n]=0,n-1<0||n>=t.length||n>=e.length||this.IsNumber(t[n])&&this.IsNumber(e[n])&&this.IsNumber(t[n-1])&&this.IsNumber(e[n-1])&&t[n]>e[n]&&t[n-1]<e[n-1]&&(i[n]=1);for(var o=0,s=0;o<r;++o)if(i[o])for(s=1;s<=a&&o-s>=0;++s)if(t[o-s]>=e[o-s]){i[o]=0;break}return i},this.ISVALID=function(t){if(Array.isArray(t)){for(var e=[],a=0;a<t.length;++a){var i=t[a];e[a]=i?1:0}return e}return t?1:0},this.EXISTR=function(t,e,a){var i=[];if(!Array.isArray(t))return i;if(e=parseInt(e),a=parseInt(a),e<=0&&(e=t.length),a<=0&&(a=1),a>e)return i;for(var r,i=[],n=0,o=0;n<t.length;++n)if(i[n]=null,!(n-e<0||n-a<0))for(i[n]=0,o=e;o>=a;--o){var r=t[n-o];if(this.IsNumber(r)&&r){i[n]=1;break}}return i},this.RELATE=function(t,e,a){var i=[];if(a<1&&(a=1),!Array.isArray(t)||!Array.isArray(e))return i;for(var r=this.CalculateAverage(t,a),n=this.CalculateAverage(e,a),o=Math.max(t.length,e.length),s=0,l=0;s<o;++s)if(i[s]=null,!(s>=t.length||s>=e.length||s>=r.length||s>=n.length)){var h=r[s],u=n[s],C=0,c=0,f=0;for(l=s-a+1;l<=s;++l)C+=(t[l]-h)*(e[l]-u),c+=Math.pow(t[l]-h,2),f+=Math.pow(e[l]-u,2);i[s]=C/a/(Math.sqrt(c/a)*Math.sqrt(f/a))}return i},this.CalculateAverage=function(t,e){var a=[];if(e<1)return a;for(var i=0,r=0;r<t.length&&!this.IsNumber(t[r]);++r);for(;r<t.length&&r<e;++r){a[r]=null;var n=t[r];this.IsNumber(n)&&(i+=n)}for(a[r-1]=i/e;r<t.length;++r){var n=t[r],o=t[r-e];this.IsNumber(n)||(n=0),this.IsNumber(o)||(o=0),i=i-o+n,a[r]=i/e}return a},this.COVAR=function(t,e,a){if(this.IsNumber(t)||this.IsNumber(e))return 0;var i=[];if(a<1&&(a=1),!Array.isArray(t)||!Array.isArray(e))return i;for(var r=this.CalculateAverage(t,a),n=this.CalculateAverage(e,a),o=Math.max(t.length,e.length),o=Math.max(t.length,e.length),s=0,l=0;s<o;++s)if(i[s]=null,!(s>=t.length||s>=e.length||s>=r.length||s>=n.length)){var h=r[s],u=n[s],C=0;for(l=s-a+1;l<=s;++l)C+=(t[l]-h)*(e[l]-u);i[s]=C/a}return i},this.HHVBARS=function(t,e){var a=[];if(!Array.isArray(t))return a;if(Array.isArray(e))for(var i=0;i<e.length;++i){a[i]=null;var r=e[i];if(this.IsNumber(r)){var n=i-r;n<0&&(n=0);for(var o=null,s=n;s<t.length;++s)if(this.IsNumber(t[s])){o=s;break}for(var l=0;s<t.length&&l<r;++l,++s)t[s]>=t[o]&&(o=s);null!=o&&(a[i]=i-o)}}else{e<1&&(e=t.length);for(var o=null,i=0;i<t.length;++i)if(a[i]=null,this.IsNumber(t[i])){o=i;break}var s=0;for(i=o+1;i<t.length&&s<e;++i,++s)t[i]>=t[o]&&(o=i),e==t.length&&(a[i]=i-o);for(;i<t.length;++i){if(i-o<e)t[i]>=t[o]&&(o=i);else for(o=i-e+1,s=o;s<=i;++s)t[s]>=t[o]&&(o=s);a[i]=i-o}}return a},this.LLVBARS=function(t,e){var a=[];if(!Array.isArray(t))return a;if(Array.isArray(e))for(var i=0;i<e.length;++i){a[i]=null;var r=e[i];if(this.IsNumber(r)){var n=i-r;n<0&&(n=0);for(var o=null,s=n;s<t.length;++s)if(this.IsNumber(t[s])){o=s;break}for(var l=0;s<t.length&&l<r;++l,++s)t[s]<=t[o]&&(o=s);null!=o&&(a[i]=i-o)}}else{e<1&&(e=t.length);for(var o=null,i=0;i<t.length;++i)if(a[i]=null,this.IsNumber(t[i])){o=i;break}var s=0;for(i=o+1;i<t.length&&s<e;++i,++s)t[i]<=t[o]&&(o=i),e==t.length&&(a[i]=i-o);for(;i<t.length;++i){if(i-o<e)t[i]<=t[o]&&(o=i);else for(o=i-e+1,s=o;s<=i;++s)t[s]<=t[o]&&(o=s);a[i]=i-o}}return a},this.BETA=function(t){var e=[],a=this.SymbolData.Data,i=this.SymbolData.IndexData;t<=0&&(t=1);for(var r=[],n=[],o=0;o<a.Data.length;++o){r[o]=0,n[o]=0;var s=a.Data[o],l=i.Data[o];s.Close>0&&s.YClose>0&&(r[o]=(s.Close-s.YClose)/s.YClose),l.Close>0&&l.YClose>0&&(n[o]=(l.Close-l.YClose)/l.YClose)}for(var h=this.CalculateAverage(r,t),u=this.CalculateAverage(n,t),C=0,c=0;C<a.Data.length;++C)if(e[C]=null,!(C>=r.length||C>=n.length||C>=h.length||C>=u.length)){var f=h[C],d=u[C],D=0,m=0;for(c=C-t+1;c<=C;++c){var p=n[c]-d,v=r[c]-f;D+=p*v,m+=p*p}this.IsDivideNumber(m)&&this.IsNumber(D)&&(e[C]=D/m)}return e},this.BETA2=function(t,e,a){var i=[];a<=0&&(a=1);for(var r=[null],n=[null],o=Math.max(t.length,e.length),s={X:t[0],Y:e[0]},l=1;l<o;++l){r[l]=0,n[l]=0;var h=t[l],u=e[l];s.X>0&&(r[l]=(h-s.X)/s.X),s.Y>0&&(n[l]=(u-s.Y)/s.Y),s={X:h,Y:u}}for(var C=this.CalculateAverage(r,a),c=this.CalculateAverage(n,a),l=0,f=0;l<o;++l)if(i[l]=null,!(l>=r.length||l>=n.length||l>=C.length||l>=c.length)){var d=C[l],D=c[l],m=0,p=0;for(f=l-a+1;f<=l;++f){var v=r[f]-d,g=n[f]-D;m+=v*g,p+=v*v}this.IsDivideNumber(p)&&this.IsNumber(m)&&(i[l]=m/p)}return i},this.SAR=function(t,e,a){var i=[],r=this.SymbolData.Data;if(t>=r.Data.length)return i;for(var n=null,o=null,s=0;s<t;++s){var l=r.Data[s];null==n?n=l.High:n<l.High&&(n=l.High),null==o?o=l.Low:o>l.Low&&(o=l.Low)}var h=0;i[t-1]=o;for(var u=o,C=r.Data[0].High,c=e/100,s=t;s<r.Data.length;++s){var f=C,l=r.Data[s],d=r.Data[s-1];0==h?l.Low<i[s-1]?(h=1,C=l.Low,c=e/100,u=Math.max(l.High,d.High),u=Math.max(u,f+c*(C-f))):(h=0,l.High>f&&(C=l.High,c=Math.min(c+e/100,a/100)),u=Math.min(l.Low,d.Low),u=Math.min(u,i[s-1]+c*(C-i[s-1]))):1==h&&(l.High>i[s-1]?(h=0,C=l.High,c=e/100,u=Math.min(l.Low,d.Low),u=Math.min(u,i[s-1]+c*(C-f))):(h=1,l.Low<f&&(C=l.Low,c=Math.min(c+e/100,a/100)),u=Math.max(l.High,d.High),u=Math.max(u,i[s-1]+c*(C-i[s-1])))),i[s]=u}return i},this.SARTURN=function(t,e,a){var i=[],r=this.SAR(t,e,a),n=this.SymbolData.Data,o=0;for(o=0;o<r.length&&!this.IsNumber(r[o]);++o);var s=0;o<n.Data.length&&(s=n.Data[o].Close>r[o]);for(var l=o+1;l<n.Data.length;++l){var h=n.Data[l];h.Close<r[l]&&s?i[l]=-1:i[l]=h.Close>r[l]&&!s?1:0,s=h.Close>r[l]}return i},this.BACKSET=function(t,e){var a=[];if(!t)return a;var i=t.length;if(!this.IsNumber(i)||i<=0)return a;if(Array.isArray(e)){for(var r=0;r<i;++r)a[r]=0;for(var r=0;r<i;++r){var n=t[r],o=e[r];if(this.IsNumber(n)&&n&&this.IsNumber(o))for(var s=r,l=0;s>=0&&l<o;--s,++l)a[s]=1}}else{for(var r=0;r<i;++r)a[r]=0;for(var h=0;h<i&&!this.IsNumber(t[h]);++h);if(h==i)return a;for(var u=Math.min(i-h,Math.max(e,1)),r=i-1,s=0;r>=0;--r){var n=t[r];if(this.IsNumber(n)&&n)for(s=r;s>r-u;--s)a[s]=1}if(t[r])for(s=r;s>=h;--s)a[s]=1}return a},this.BETWEEN=function(t,e,a){var i=[],r="number"==typeof t,n="number"==typeof e,o="number"==typeof a;if(r&&n&&o)return t>=e&&t<=a?1:0;for(var s in t){i[s]=0;var l=t[s],h=null,u=null;n?h=e:s<e.length-1&&(h=e[s]),o?u=a:s<a.length-1&&(u=a[s]),null!=h&&null!=u&&(h>u?l>=u&&l<=h&&(i[s]=1):l<=u&&l>=h&&(i[s]=1))}return i},this.STRCAT=function(t,e){var a=[];return we.IsString(t)&&we.IsString(e)&&(a=t+e),a},this.VARCAT=function(t,e){var a=[];if(Array.isArray(t)&&Array.isArray(e))for(var i=Math.max(t.length,e.length),r="",n=0;n<i;++n){if(a[n]=null,r="",n<t.length){var o=t[n];we.IsString(o)&&(r+=o)}if(n<e.length){var o=e[n];we.IsString(o)&&(r+=o)}""!=r&&(a[n]=r)}else if(we.IsString(t)&&Array.isArray(e))for(var n=0;n<e.length;++n){a[n]=null;var o=e[n];we.IsString(o)&&(a[n]=t+o)}else if(Array.isArray(t)&&we.IsString(e))for(var n=0;n<t.length;++n){a[n]=null;var o=t[n];we.IsString(o)&&(a[n]=o+e)}else we.IsString(t)&&we.IsString(e)&&(a=t+e);return a},this.FINDSTR=function(t,e){var a,i,r=[];if(a=we.IsNumber(t)?t.toString():t,i=we.IsNumber(e)?e.toString():e,we.IsString(a)&&we.IsString(i))return a.indexOf(i)>=0?1:0;if(Array.isArray(t)&&we.IsString(i))for(var n=0;n<t.length;++n){var o=t[n];we.IsString(o)?r[n]=o.indexOf(i)>=0?1:0:we.IsNumber(o)?(a=o.toString(),r[n]=a.indexOf(i)>=0?1:0):r[n]=0}return r},this.STRLEN=function(t){if(we.IsString(t))return t.length;if(Array.isArray(t)){for(var e=[],a=0;a<t.length;++a){var i=t[a];we.IsString(i)?e[a]=i.length:e[a]=null}return e}return null},this.STRCMP=function(t,e){return we.IsString(t)&&we.IsString(e)?t==e?1:0:null},this.STRSPACE=function(t){var e=[];if(Array.isArray(t))for(var a=0;a<t.length;++a){e[a]=null;var i=t[a];we.IsString(i)&&(e[a]=i+" ")}else we.IsString(t)&&(e=t+" ");return e},this.CON2STR=function(t,e){var a=[];if(Array.isArray(t))for(var i=t.length-1;i>=0;--i){var r=t[i];if(this.IsNumber(r))return a=r.toFixed(e)}else this.IsNumber(t)&&(a=t.toFixed(e));return a},this.VAR2STR=function(t,e){var a=[];if(Array.isArray(t))for(var i=0;i<t.length;++i){a[i]=null;var r=t[i];this.IsNumber(r)&&(a[i]=r.toFixed(e))}else this.IsNumber(t)&&(a=t.toFixed(e));return a},this.MOD=function(t,e){var a=[],i="number"==typeof t,r="number"==typeof e;if(i&&r)return Dr.MOD(t,e);if(!i&&!r){for(var n=Math.max(t.length,e.length),o=0;o<n;++o)a[o]=null,o<t.length&&o<e.length&&this.IsNumber(t[o])&&this.IsNumber(e[o])&&(a[o]=Dr.MOD(t[o],e[o]));return a}if(i&&!r){for(var s in e)a[s]=null,this.IsNumber(t)&&this.IsNumber(e[s])&&(a[s]=Dr.MOD(t,e[s]));return a}if(!i&&r){for(var s in t)a[s]=null,this.IsNumber(t[s])&&this.IsNumber(e)&&(a[s]=Dr.MOD(t[s],e));return a}return a},this.POW=function(t,e){var a=[];if(Array.isArray(t)&&Array.isArray(e))for(var i=0;i<t.length;++i){var r=t[i],n=e[i];this.IsNumber(r)&&this.IsNumber(n)?a[i]=Math.pow(r,n):a[i]=null}else if(we.IsNumber(t)&&Array.isArray(e))for(var i=0;i<e.length;++i){var o=e[i];this.IsNumber(o)?a[i]=Math.pow(t,o):a[i]=null}else{if(we.IsNumber(t)&&we.IsNumber(e))return Math.pow(t,e);if(Array.isArray(t)&&we.IsNumber(e))for(var i=0;i<t.length;++i){var o=t[i];this.IsNumber(o)?a[i]=Math.pow(o,e):a[i]=null}}return a},this.CEILING=function(t){if("number"==typeof t)return parseInt(t);var e=[];for(var a in t){var i=t[a];this.IsNumber(i)?e[a]=parseInt(i):e[a]=null}return e},this.FLOOR=function(t){if("number"==typeof t)return parseInt(t-1);var e=[];for(var a in t){var i=t[a];this.IsNumber(i)?e[a]=parseInt(i-1):e[a]=null}return e},this.ZTPRICE=function(t,e){if(!this.IsNumber(e))return null;if(Array.isArray(t)){var a=[];for(var i in t){var r=t[i];this.IsNumber(r)?a[i]=(1+e)*r:a[i]=null}return a}if(this.IsNumber(t)){var a=(1+e)*t;return a}},this.DTPRICE=function(t,e){if(!this.IsNumber(e))return null;if(Array.isArray(t)){var a=[];for(var i in t){var r=t[i];this.IsNumber(r)?a[i]=(1-e)*r:a[i]=null}return a}if(this.IsNumber(t)){var a=(1-e)*t;return a}},this.FRACPART=function(t){if(Array.isArray(t)){var e=[],a=0;for(var i in t){var r=t[i];this.IsNumber(r)?(a=parseInt(r),e[i]=r-a):e[i]=null}return e}if(this.IsNumber(t)){a=parseInt(t);var e=t-a;return e}},this.SIGN=function(t){if(Array.isArray(t)){for(var e=[],a=0;a<t.length;++a){var i=t[a];e[a]=null,we.IsNumber(i)&&(e[a]=i>0?1:0==i?0:-1)}return e}return t>0?1:0==t?0:-1},this.BARSLASTCOUNT=function(t){var e=null;if(Array.isArray(t)){if(e=[],t.length>0)for(var a=0,i=t.length-1;i>=0;--i){a=0;for(var r=i;r>=0&&t[r];--r)++a;e[i]=a}}else e=t?1:0;return e},this.INTPART=function(t){var e=null;if(Array.isArray(t)){e=[];for(var a in t){var i=t[a];this.IsNumber(i)?e[a]=parseInt(i):e[a]=null}}else this.IsNumber(t)&&(e=parseInt(t));return e},this.CONST=function(t){if(Array.isArray(t)){var e=t.length;return e>0?t[e-1]:null}return t},this.TOPRANGE=function(t){if(this.IsNumber(t))return 0;var e=[];if(Array.isArray(t))for(var a=t.length,i=a-1;i>=0;--i){e[i]=0;var r=t[i];if(this.IsNumber(r)){for(var n=0,o=i-1;o>=0&&!(t[o]>r);--o)++n;e[i]=n}}return e},this.LOWRANGE=function(t){if(this.IsNumber(t))return 0;var e=[];if(Array.isArray(t))for(var a=t.length,i=a-1;i>=0;--i){e[i]=0;var r=t[i];if(this.IsNumber(r)){for(var n=0,o=i-1;o>=0&&!(t[o]<r);--o)++n;e[i]=n}}return e},this.FINDLOW=function(t,e,a,i){if(this.IsNumber(t))return t;var r=[];if(Array.isArray(t))for(var n=t.length,o=n-1;o>=0;--o){r[o]=null;for(var s=[],l=e;l<a;++l){var h=o-l;if(h<0)break;var u=t[h];this.IsNumber(u)&&s.push(u)}if(s.length>0){s.sort(function(t,e){return t-e});var h=i-1;h<0?h=0:h>=s.length&&(h=s.length-1),r[o]=s[h]}}return r},this.FINDHIGH=function(t,e,a,i){if(this.IsNumber(t))return t;var r=[];if(Array.isArray(t))for(var n=t.length,o=n-1;o>=0;--o){r[o]=null;for(var s=[],l=e;l<a;++l){var h=o-l;if(h<0)break;var u=t[h];this.IsNumber(u)&&s.push(u)}if(s.length>0){s.sort(function(t,e){return e-t});var h=i-1;h<0?h=0:h>=s.length&&(h=s.length-1),r[o]=s[h]}}return r},this.FINDHIGHBARS=function(t,e,a,i){if(this.IsNumber(t))return a-e-i;var r=[];if(Array.isArray(t))for(var n=t.length,o=n-1;o>=0;--o){r[o]=null;for(var s=[],l=e;l<a;++l){var h=o-l;if(h<0)break;var u=t[h];this.IsNumber(u)&&s.push({Value:u,Period:l})}if(s.length>0){s.sort(function(t,e){return e.Value-t.Value});var h=i-1;h<0?h=0:h>=s.length&&(h=s.length-1),r[o]=s[h].Period}}return r},this.FINDLOWBARS=function(t,e,a,i){if(this.IsNumber(t))return a-e-i;var r=[];if(Array.isArray(t))for(var n=t.length,o=n-1;o>=0;--o){r[o]=null;for(var s=[],l=e;l<a;++l){var h=o-l;if(h<0)break;var u=t[h];this.IsNumber(u)&&s.push({Value:u,Period:l})}if(s.length>0){s.sort(function(t,e){return t.Value-e.Value});var h=i-1;h<0?h=0:h>=s.length&&(h=s.length-1),r[o]=s[h].Period}}return r},this.HOD=function(t,e){var a=[];if(we.IsNumber(t))return 1;if(Array.isArray(t))for(var i=t.length,r=i-1;r>=0;--r){var n=t[r];if(we.IsNumber(n)){if(Array.isArray(e))var o=parseInt(e[r]);else var o=parseInt(e);e<=0&&(o=r);for(var s=1,l=r-1,h=1;l>=0&&h<o;--l,++h){var u=t[l];we.IsNumber(u)&&u>n&&++s}a[r]=s}}return a},this.LOD=function(t,e){var a=[];if(we.IsNumber(t))return 1;if(Array.isArray(t))for(var i=t.length,r=i-1;r>=0;--r){var n=t[r];if(we.IsNumber(n)){if(Array.isArray(e))var o=parseInt(e[r]);else var o=parseInt(e);e<=0&&(o=r);for(var s=1,l=r-1,h=1;l>=0&&h<o;--l,++h){var u=t[l];we.IsNumber(u)&&u<n&&++s}a[r]=s}}return a},this.BARSNEXT=function(t){if(!Array.isArray(t))return 0;for(var e=[],a=0;a<t.length;++a){e[a]=0;for(var i=a,r=0;i<t.length;++i,++r){if(t[i]>0){e[a]=r;break}}}return e},this.RAND=function(t){if(Array.isArray(t)){var e=[];for(var a in t){e[a]=null;var i=t[a],r=parseInt(i);r<=0||(e[a]=Math.ceil(Math.random()*r))}return e}var r=parseInt(t);if(r<=0)return null;for(var n=this.SymbolData.Data,o=n.Data.length,e=[],a=0;a<o;++a)e[a]=Math.ceil(Math.random()*r);return e},this.AMA=function(t,e){var a,i=[];if(Array.isArray(e)){for(var r=t.length-1;r>=0;--r)if(this.IsNumber(e[r])){a=e[r];break}}else a=e;if(this.IsNumber(a)){if(a>1)return i;var n=0,o=0;for(n;n<t.length;++n)if(i[n]=null,this.IsNumber(t[n])){o=t[n],i[n]=o;break}for(var r=n+1;r<t.length;++r){var s=t[r];i[r]=i[r-1]+a*(s-i[r-1])}}return i},this.TMA=function(t,e,a){var i=[];if(this.IsNumber(e)&&e<=1&&this.IsNumber(a)&&a<1){var r=!1;for(var n in t)if(i[n]=null,0==r){var o=t[n];this.IsNumber(o)&&(i[n]=o,i[n],r=!0)}else{var o=t[n];if(!this.IsNumber(o))continue;i[n]=e*i[n-1]+a*o,i[n]}}return i},this.ROUND=function(t){if(this.IsNumber(t))return Math.round(t);var e=[];if(Array.isArray(t))for(var a in t){var i=t[a];this.IsNumber(i)?e[a]=Math.round(i):e[a]=null}return e},this.ROUND2=function(t,e){var a=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12],i=0;if(this.IsNumber(e)&&(i=parseInt(e)),e<0?i=0:e>=a.length&&(i=a.length-1),this.IsNumber(t))return Math.round(t*a[i])/a[i];var r=[];if(Array.isArray(t))for(var n in t){var o=t[n];this.IsNumber(o)?r[n]=Math.round(o*a[i])/a[i]:r[n]=null}return r},this.TRMA=function(t,e){if(!this.IsNumber(e)||e<=0)return[];e=parseInt(e);var a=0,i=0;e%2==0?(a=parseInt(e/2),i=a+1):(a=parseInt((e+1)/2),i=a);var r=this.MA(t,a);return this.MA(r,i)},this.VALUEWHEN=function(t,e){if(Array.isArray(t)){var a=[];if(Array.isArray(e)){var i=null;for(var r in t)if(r>=e.length)a[r]=i;else{var n=e[r];t[r]?(a[r]=n,i=n):a[r]=i}}else{var i=null;for(var r in t)t[r]?(a[r]=e,i=e):a[r]=i}return a}return t?1:0},this.HARMEAN=function(t,e){var a=[];if(Array.isArray(t))if(Array.isArray(e))for(var i=0;i<t.length;++i)if(i>=e.length)a[i]=null;else{var r=parseInt(e[i]);if(r<=0||r>i)a[i]=null;else{for(var n=0,o=0;o<r;++o){var s=t[i-o];if(!this.IsNumber(s)||0==s){n=null;break}n+=1/s}a[i]=null==n?null:1/(n/r)}}else if(this.IsNumber(e)){if((e=parseInt(e))<=0)return a;for(var i=0;i<t.length;++i)if(e>i)a[i]=null;else{for(var n=0,o=0;o<e;++o){var s=t[i-o];if(!this.IsNumber(s)||0==s){n=null;break}n+=1/s}a[i]=null==n?null:1/(n/e)}}return a},this.DATETODAY=function(t){var e=[],a=new Date("1990-12-19");if(Array.isArray(t))for(var i in t){e[i]=null;var r=t[i];if(this.IsNumber(r)){var n=r+19e6;if(!(n<19901219)){var o=parseInt(n/1e4),s=parseInt(n%1e4/100),l=parseInt(n%100),h=new Date(o+"-"+s+"-"+l);e[i]=Math.round((h-a)/864e5)}}}else if(this.IsNumber(t)){var n=t+19e6;if(n>=19901219){var o=parseInt(n/1e4),s=parseInt(n%1e4/100),l=parseInt(n%100),h=new Date(o+"-"+s+"-"+l);return Math.round((h-h)/864e5)}}return e},this.DAYTODATE=function(t){var e=new Date("1990-12-19"),a=[];if(Array.isArray(t))for(var i in t){a[i]=null;var r=t[i];if(this.IsNumber(r)){e.setDate(e.getDate()+r);var n=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();n-=19e6,a[i]=n,e.setDate(e.getDate()-r)}}else if(this.IsNumber(t)){e.setDate(e.getDate()+t);var n=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();return n-=19e6}return a},this.TIMETOSEC=function(t){return 60*parseInt(t/1e4)*60+60*parseInt(t%1e4/100)+t%100},this.SECTOTIME=function(t){Math.floor(t/86400);return 1e4*Math.floor(t%86400/3600)+100*Math.floor(t%3600/60)+t%60},this.ANY=function(t,e){e<=0&&(e=1);var a=[];if(Array.isArray(t)){if(e>=t.length)return 0;for(var i=e,r=0;i<t.length;++i){var n=0;for(r=0;r<e;++r){if(t[i-r]>0){n=1;break}}a[i]=n}return a}if(we.IsNumber(t)){if(t<=0)return 0;if(e>=this.SymbolData.Data.Data.length)return 0;for(var i=e;i<this.SymbolData.Data.Data.length;++i)a[i]=1;return a}return 0},this.ALL=function(t,e){e<=0&&(e=1);var a=[];if(Array.isArray(t)){if(e>=t.length)return 0;for(var i=e,r=0;i<t.length;++i){var n=1;for(r=0;r<e;++r){if(!(t[i-r]>0)){n=0;break}}a[i]=n}return a}if(we.IsNumber(t)){if(t<=0)return 0;if(e>=this.SymbolData.Data.Data.length)return 0;for(var i=e;i<this.SymbolData.Data.Data.length;++i)a[i]=1;return a}return 0},this.TESTSKIP=function(t,e){if(Array.isArray(t)){if(t.length<=0)return!1;return!!t[t.length-1]}return we.IsNumber(t)?!(t<=0):!!t},this.IFC=function(t){if(Array.isArray(t)){var e=t[t.length-1];return!!we.IsNumber(e)&&e>0}return!!we.IsNumber(t)&&t>0},this.ALIGNRIGHT=function(t){if(Array.isArray(t)){for(var e=[],a=t.length-1,i=t.length-1;i>=0;--i){var r=t[i];(we.IsNumber(r)||we.IsString(r))&&(e[a]=r,--a)}for(var i=a;i>=0;--i)e[i]=null;return e}return t},this.SUMBARS=function(t,e){var a=Array.isArray(t),i=Array.isArray(e),r=we.IsNumber(t),n=we.IsNumber(e),o=[];if(a&&n)for(var s=0,l=0;s<t.length;++s){for(var h=0,l=0,u=s-1;u>=0;--u,++l){var C=t[s];if(we.IsNumber(C)&&(h+=t[u])>e)break}o[s]=l}else if(a&&i)for(var c=Math.max(t.length,e.length),s=0;s<c;++s){o[s]=null;var h=0,l=0,f=e[s];if(we.IsNumber(f)){for(var u=s-1;u>=0;--u,++l){var C=t[s];if(we.IsNumber(C)&&(h+=t[u])>f)break}o[s]=l}}else if(r&&i)for(var s=0;s<e.length;++s){o[s]=null;var h=0,l=0,f=e[s];if(we.IsNumber(f)){for(var u=s-1;u>=0&&!((h+=t)>f);--u,++l);o[s]=l}}return o},this.STRFORMAT=function(t,e,a){var i=t.match(/{[0-9.:]+}/g);if(!we.IsNonEmptyArray(i))return null;for(var r=new Vn.default,n=-1,o=0;o<i.length;++o){var s=i[o];if(!(s.length<3)){var l=s.slice(1,s.length-1),h=-1,u=-1;if(l.indexOf(":")>0){var C=l.split(":");if(C&&(C[0]&&(h=parseInt(C[0])),C[1]))if(C[1].indexOf(".")>=0){for(var c=0,f=C[1],d=f.length-1;d>=0&&"0"==f[d];--d)++c;c>0&&(u=c)}else"0"==C[1]&&(u=0)}else h=parseInt(l);if(!(h<0)){var D={Src:s,Index:h,Text:null,Decimal:null};u>=0&&(D.Decimal=u),n<h&&(n=h),r.set(h,D)}}}for(var m=!1,p=0,o=1;o<e.length;++o){var s=e[o];Array.isArray(s)&&(m=!0,p<s.length&&(p=s.length))}if(m){for(var v=[],o=0;o<p;++o){var g=t,T=!0,I=!1,S=void 0;try{for(var x,b=(0,Gn.default)(r);!(T=(x=b.next()).done);T=!0){var s=x.value,y=s[1],D=e[y.Index+1],E="null";if(D)if(Array.isArray(D)){var l=D[o];l&&(E=we.IsNumber(y.Decimal)?""+l.toFixed(y.Decimal):""+l)}else E=""+D;g=g.replace(y.Src,E)}}catch(t){I=!0,S=t}finally{try{!T&&b.return&&b.return()}finally{if(I)throw S}}v[o]=g}return v}var v=t,w=!0,F=!1,M=void 0;try{for(var L,N=(0,Gn.default)(r);!(w=(L=N.next()).done);w=!0){var s=L.value,y=s[1],D=e[y.Index+1],E="null";D&&(E=""+D),v=v.replace(y.Src,E)}}catch(t){F=!0,M=t}finally{try{!w&&N.return&&N.return()}finally{if(F)throw M}}return v},this.CallFunction=function(t,e,a,i){switch(t){case"MAX":case"MAX6":return this.MAX(e,a);case"MIN":case"MIN6":return this.MIN(e,a);case"REF":return this.REF(e[0],e[1]);case"REFV":return this.REFV(e[0],e[1]);case"REFX":return this.REFX(e[0],e[1]);case"REFXV":return this.REFXV(e[0],e[1]);case"REFX1":return this.REFX(e[0],e[1]);case"ABS":return this.ABS(e[0]);case"MA":return this.MA(e[0],e[1]);case"EMA":return this.EMA(e[0],e[1]);case"SMA":return this.SMA(e[0],e[1],e[2]);case"DMA":return this.DMA(e[0],e[1]);case"XMA":return this.XMA(e[0],e[1]);case"EXPMA":return this.EXPMA(e[0],e[1]);case"EXPMEMA":return this.EXPMEMA(e[0],e[1]);case"COUNT":return this.COUNT(e[0],e[1]);case"LLV":return this.LLV(e[0],e[1]);case"LV":return this.LV(e[0],e[1]);case"LLVBARS":return this.LLVBARS(e[0],e[1]);case"HHV":return this.HHV(e[0],e[1]);case"HV":return this.HV(e[0],e[1]);case"HHVBARS":return this.HHVBARS(e[0],e[1]);case"MULAR":return this.MULAR(e[0],e[1]);case"CROSS":return this.CROSS(e[0],e[1]);case"LONGCROSS":return this.LONGCROSS(e[0],e[1],e[2]);case"ISVALID":return this.ISVALID(e[0]);case"CROSSDOWN":return this.CROSSDOWN(e[0],e[1]);case"CROSSUP":return this.CROSSUP(e[0],e[1]);case"AVEDEV":return this.AVEDEV(e[0],e[1]);case"STD":return this.STD(e[0],e[1]);case"STDDEV":return this.STDDEV(e[0],e[1]);case"IF":case"IFF":case"IFELSE":return this.IF(e[0],e[1],e[2]);case"IFN":return this.IFN(e[0],e[1],e[2]);case"NOT":return this.NOT(e[0]);case"SUM":return this.SUM(e[0],e[1]);case"RANGE":return this.RANGE(e[0],e[1],e[2]);case"EXIST":return this.EXIST(e[0],e[1]);case"EXISTR":return this.EXISTR(e[0],e[1],e[2]);case"FILTER":return this.FILTER(e[0],e[1]);case"TFILTER":return this.TFILTER(e[0],e[1],e[2]);case"FILTERX":return this.FILTERX(e[0],e[1],a);case"SLOPE":return this.SLOPE(e[0],e[1]);case"BARSLAST":return this.BARSLAST(e[0]);case"BARSLASTS":return this.BARSLASTS(e[0],e[1],a);case"BARSCOUNT":return this.BARSCOUNT(e[0]);case"BARSSINCEN":return this.BARSSINCEN(e[0],e[1]);case"BARSSINCE":return this.BARSSINCE(e[0]);case"LAST":return this.LAST(e[0],e[1],e[2]);case"EVERY":return this.EVERY(e[0],e[1]);case"DEVSQ":return this.DEVSQ(e[0],e[1]);case"ZIG":return this.ZIG(e[0],e[1]);case"TROUGHBARS":return this.TROUGHBARS(e[0],e[1],e[2]);case"TROUGH":return this.TROUGH(e[0],e[1],e[2]);case"PEAKBARS":return this.PEAKBARS(e[0],e[1],e[2]);case"PEAK":return this.PEAK(e[0],e[1],e[2]);case"COST":return this.COST(e[0]);case"WINNER":return this.WINNER(e[0],a);case"PPART":return this.PPART(e[0],a);case"COSTEX":return this.COSTEX(e[0],e[1],a);case"LWINNER":return this.LWINNER(e[0],e[1],a);case"PWINNER":return this.PWINNER(e[0],e[1],a);case"FORCAST":return this.FORCAST(e[0],e[1]);case"TSMA":return this.TSMA(e[0],e[1]);case"STDP":return this.STDP(e[0],e[1]);case"VAR":return this.VAR(e[0],e[1]);case"VARP":return this.VARP(e[0],e[1]);case"UPNDAY":return this.UPNDAY(e[0],e[1]);case"DOWNNDAY":return this.DOWNNDAY(e[0],e[1]);case"NDAY":return this.NDAY(e[0],e[1],e[2]);case"RELATE":return this.RELATE(e[0],e[1],e[2]);case"COVAR":return this.COVAR(e[0],e[1],e[2]);case"BETA":return this.BETA(e[0]);case"BETA2":return this.BETA2(e[0],e[1],e[2]);case"WMA":return this.WMA(e[0],e[1]);case"MEMA":return this.MEMA(e[0],e[1]);case"SUMBARS":return this.SUMBARS(e[0],e[1]);case"REVERSE":return this.REVERSE(e[0]);case"SAR":return this.SAR(e[0],e[1],e[2]);case"SARTURN":return this.SARTURN(e[0],e[1],e[2]);case"BACKSET":return this.BACKSET(e[0],e[1]);case"BETWEEN":return this.BETWEEN(e[0],e[1],e[2]);case"STRCAT":return this.STRCAT(e[0],e[1]);case"CON2STR":return this.CON2STR(e[0],e[1]);case"VAR2STR":return this.VAR2STR(e[0],e[1]);case"VARCAT":return this.VARCAT(e[0],e[1]);case"STRSPACE":return this.STRSPACE(e[0]);case"FINDSTR":return this.FINDSTR(e[0],e[1]);case"STRCMP":return this.STRCMP(e[0],e[1]);case"STRLEN":return this.STRLEN(e[0]);case"STRFORMAT":return this.STRFORMAT(e[0],e,a);case"DTPRICE":return this.DTPRICE(e[0],e[1]);case"ZTPRICE":return this.ZTPRICE(e[0],e[1]);case"MOD":return this.MOD(e[0],e[1]);case"POW":return this.POW(e[0],e[1]);case"CEILING":return this.CEILING(e[0]);case"FLOOR":return this.FLOOR(e[0]);case"FRACPART":return this.FRACPART(e[0]);case"SIGN":return this.SIGN(e[0]);case"BARSLASTCOUNT":return this.BARSLASTCOUNT(e[0]);case"INTPART":return this.INTPART(e[0]);case"CONST":return this.CONST(e[0]);case"TOPRANGE":return this.TOPRANGE(e[0]);case"LOWRANGE":return this.LOWRANGE(e[0]);case"FINDLOW":return this.FINDLOW(e[0],e[1],e[2],e[3]);case"FINDLOWBARS":return this.FINDLOWBARS(e[0],e[1],e[2],e[3]);case"FINDHIGH":return this.FINDHIGH(e[0],e[1],e[2],e[3]);case"FINDHIGHBARS":return this.FINDHIGHBARS(e[0],e[1],e[2],e[3]);case"BARSNEXT":return this.BARSNEXT(e[0]);case"HOD":return this.HOD(e[0],e[1]);case"LOD":return this.LOD(e[0],e[1]);case"AMA":return this.AMA(e[0],e[1]);case"TMA":return this.TMA(e[0],e[1],e[2]);case"ROUND":return this.ROUND(e[0]);case"ROUND2":return this.ROUND2(e[0],e[1]);case"TRMA":return this.TRMA(e[0],e[1]);case"VALUEWHEN":return this.VALUEWHEN(e[0],e[1]);case"HARMEAN":return this.HARMEAN(e[0],e[1]);case"DATETODAY":return this.DATETODAY(e[0]);case"DAYTODATE":return this.DAYTODATE(e[0]);case"TIMETOSEC":return this.TIMETOSEC(e[0]);case"SECTOTIME":return this.SECTOTIME(e[0]);case"ANY":return this.ANY(e[0],e[1]);case"ALL":return this.ALL(e[0],e[1]);case"TESTSKIP":return this.TESTSKIP(e[0],a);case"SUMBARS":return this.SUMBARS(e[0],e[1]);case"ALIGNRIGHT":return this.ALIGNRIGHT(e[0]);case"ATAN":return this.Trigonometric(e[0],Math.atan);case"ACOS":return this.ACOS(e[0]);case"ASIN":return this.ASIN(e[0]);case"COS":return this.Trigonometric(e[0],Math.cos);case"SIN":return this.Trigonometric(e[0],Math.sin);case"TAN":return this.Trigonometric(e[0],Math.tan);case"LN":return this.Trigonometric(e[0],Math.log);case"LOG":return this.Trigonometric(e[0],Sn.default);case"EXP":return this.Trigonometric(e[0],Math.exp);case"SQRT":return this.Trigonometric(e[0],Math.sqrt);case"RAND":return this.RAND(e[0]);default:this.ThrowUnexpectedNode(a,"å½æ°"+t+"ä¸å­å¨",t)}},this.CallCustomFunction=function(t,e,a,i){var r=Go.CustomFunction.Data.get(t),n=a.GetStockCacheData({CustomName:t,Node:i});if(!r.Invoke)return{Out:n};Xn.Complier.Log("[JSAlgorithm::CallCustomFunction] call custom function functionInfo=",r);var o=this,s={Name:t,Args:e,Symbol:a.Symbol,Period:a.Period,Right:a.Right,KData:a.Data,DownloadData:n,ThrowError:function(t){o.ThrowUnexpectedNode(i,t)}};return r.Invoke(s)},this.ThrowUnexpectedNode=function(t,e,a){var i=t.Marker,r=e||"æ§è¡å¼å¸¸";return this.ErrorHandler.ThrowError(i.Index,i.Line,i.Column,r,a)}}function mr(t,e){this.ErrorHandler=t,this.SymbolData=e,this.DRAWTEXT=function(t,e,a){var i=[],r={DrawData:i,DrawType:"DRAWTEXT",Text:a};if(Array.isArray(t)){if(t.length<=0)return r;var n=this.IsNumber(e),o=!1;"TOP"!==e&&"BOTTOM"!==e||(r.FixedPosition=e,o=!0);for(var s in t)i[s]=null,!isNaN(t[s])&&t[s]&&(n||o?i[s]=e:this.IsNumber(e[s])&&(i[s]=e[s]))}else if(this.IsNumber(t)&&t){var n=this.IsNumber(e),o=!1;"TOP"!==e&&"BOTTOM"!==e||(r.FixedPosition=e,o=!0);for(var s=0;s<this.SymbolData.Data.Data.length;++s)n||o?i[s]=e:this.IsNumber(e[s])&&(i[s]=e[s])}return r},this.DRAWTEXT_FIX=function(t,e,a,i,r){var n={Value:[],Text:[]},o={DrawData:n,DrawType:"DRAWTEXT_FIX",Text:null,Position:{X:e,Y:a,Type:i}};if(t.length<=0)return o;if(Array.isArray(t))for(var s in t)n.Text[s]=null,n.Value[s]=0,!isNaN(t[s])&&t[s]&&(n.Value[s]=1,n.Text[s]=r);else if(t)for(var s=0;s<this.SymbolData.Data.Data.length;++s)n.Text[s]=r,n.Value[s]=1;return o},this.SUPERDRAWTEXT=function(t,e,a,i,r){var n=[],o={DrawData:n,DrawType:"SUPERDRAWTEXT",Text:a,YOffset:r,Direction:i,TextAlign:"center"};if(t.length<=0)return o;var s="number"==typeof e;for(var l in t)n[l]=null,!isNaN(t[l])&&t[l]&&(s?n[l]=e:this.IsNumber(e[l])&&(n[l]=e[l]));return o},this.STICKLINE=function(t,e,a,i,r){var n=[],o={DrawData:n,DrawType:"STICKLINE",Width:i,Type:r};o.Width<0&&(o.Width=3);var s="number"==typeof e,l="number"==typeof a;if(Array.isArray(t)){if(t.length<=0)return o;for(var h in t)if(n[h]=null,!isNaN(t[h])&&t[h])if(s&&l)n[h]={Value:e,Value2:a};else if(s&&!l){if(isNaN(a[h]))continue;n[h]={Value:e,Value2:a[h]}}else if(!s&&l){if(isNaN(e[h]))continue;n[h]={Value:e[h],Value2:a}}else{if(isNaN(e[h])||isNaN(a[h]))continue;n[h]={Value:e[h],Value2:a[h]}}}else{if(!t)return o;for(var h=0;h<this.SymbolData.Data.Data.length;++h)if(n[h]=null,s&&l)n[h]={Value:e,Value2:a};else if(s&&!l){if(!we.IsNumber(a[h]))continue;n[h]={Value:e,Value2:a[h]}}else if(!s&&l){if(!we.IsNumber(e[h]))continue;n[h]={Value:e[h],Value2:a}}else{if(!we.IsNumber(e[h])||!we.IsNumber(a[h]))continue;n[h]={Value:e[h],Value2:a[h]}}}return o},this.DRAWLINE=function(t,e,a,i,r){var n=[],o={DrawData:n,DrawType:"DRAWLINE",Expand:r};if(t.length<=0)return o;for(var s=Math.max(t.length,a.length),l=!1,h=!1,u={Start:{},End:{},List:new Array},C=0;C<s;++C){if(n[C]=null,C<t.length&&C<a.length)if(0==l&&0==h){if(null==t[C]||!t[C])continue;l=!0,u.Start={ID:C,Value:e[C]}}else if(1==l&&0==h){var c=null!=a[C]&&a[C];if(!c){t[C]&&(u.Start={ID:C,Value:e[C]});continue}c&&(h=!0,u.End={ID:C,Value:i[C]})}else if(1==l&&1==h){var c=null!=a[C]&&a[C];if(c)u.End={ID:C,Value:i[C]};else if(t[C]){var f=this.CalculateDrawLine(u);for(var d in f){var D=f[d];n[D.ID]=D.Value}1==r&&this.CalculateDrawDataExtendLine(n,u.Start.ID-2),l=h=!1,u={Start:{},End:{}},l=!0,h=!1,u.Start={ID:C,Value:e[C]}}}if(1==l&&1==h){var m=this.CalculateDrawLine(u);for(var p in m){var v=m[p];n[v.ID]=v.Value}}}return 1==r&&this.CalculateDrawDataExtendLine(n),o},this.DRAWBAND=function(t,e,a,i){we.IsNumber(e)&&(e="rgb("+e+",0,0)"),we.IsNumber(i)&&(i="rgb("+i+",0,0)");var r=[],n={DrawData:r,DrawType:"DRAWBAND",Color:[null,null]};e&&(n.Color[0]=e.toLowerCase()),i&&(n.Color[1]=i.toLowerCase());var o=we.IsNumber(t),s=we.IsNumber(a);if(o||s){if(o&&!s)for(var l=a.length,h=0;h<l;++h){var u={Value:t,Value2:null};h<a.length&&(u.Value2=a[h]),r.push(u)}else if(!o&&s)for(var l=t.length,h=0;h<l;++h){var u={Value:null,Value2:a};h<t.length&&(u.Value=t[h]),r.push(u)}else if(o&&s)for(var l=this.SymbolData.Data.Data.length,h=0;h<l;++h){var u={Value:t,Value2:a};r.push(u)}}else for(var l=Math.max(t.length,a.length),h=0;h<l;++h){var u={Value:null,Value2:null};h<t.length&&(u.Value=t[h]),h<a.length&&(u.Value2=a[h]),r.push(u)}return n},this.GetDataByIndex=function(t,e){var a={Result:!1,Data:null};return this.IsNumber(t)?(a.Result=!0,a.Data=t):e<t.length?(a.Result=!0,a.Data=t[e]):a.Result=!1,a},this.FILLRGN=function(t,e,a){var i=[],r={DrawData:i,DrawType:"FILLRGN"};this.IsNumber(e),this.IsNumber(a);if(Array.isArray(t))for(var n in t){i[n]=null;var o=t[n];if(o){var s=this.GetDataByIndex(e,n);if(s.Result){var l=this.GetDataByIndex(a,n);if(l.Result){var h={Value:s.Data,Value2:l.Data};i[n]=h}}}}else if(t)for(var n=0;n<this.SymbolData.Data.Data.length;++n){i[n]=null;var s=this.GetDataByIndex(e,n);if(s.Result){var l=this.GetDataByIndex(a,n);if(l.Result){var h={Value:s.Data,Value2:l.Data};i[n]=h}}}return r},this.DRAWKLINE=function(t,e,a,i){for(var r=[],n={DrawData:r,DrawType:"DRAWKLINE"},o=Math.max(t.length,e.length,a.length,i.length),s=0;s<o;++s){var l={Open:null,High:null,Low:null,Close:null};s<t.length&&s<e.length&&s<a.length&&s<i.length&&(l.Open=e[s],l.High=t[s],l.Low=a[s],l.Close=i[s]),r[s]=l}return n},this.DRAWKLINE_IF=function(t,e,a,i,r){for(var n=[],o={DrawData:n,DrawType:"DRAWKLINE_IF"},s=Math.max(t.length,e.length,a.length,i.length,r.length),l=0;l<s;++l){var h={Open:null,High:null,Low:null,Close:null};l<e.length&&l<a.length&&l<i.length&&l<r.length&&l<t.length&&t[l]&&(h.Open=a[l],h.High=e[l],h.Low=i[l],h.Close=r[l]),n[l]=h}return o},this.DRAWOVERLAYKLINE=function(t,e,a,i){for(var r=[],n={DrawData:r,DrawType:"DRAWOVERLAYKLINE"},o=Math.max(e.length,t.length,a.length,i.length),s=this.SymbolData.Data.Data,l=0;l<o;++l){var h={Open:null,High:null,Low:null,Close:null},u=s[l];l<e.length&&l<t.length&&l<a.length&&l<i.length&&we.IsNumber(t[l])&&we.IsNumber(e[l])&&we.IsNumber(a[l])&&we.IsNumber(a[l])&&(h.Open=t[l],h.High=e[l],h.Low=a[l],h.Close=i[l],h.Date=u.Date,we.IsNumber(u.Time)&&(h.Time=u.Time)),r[l]=h}return n},this.DRAWCOLORKLINE=function(t,e,a){var i=[],r={DrawData:i,DrawType:"DRAWCOLORKLINE",IsEmptyBar:!(0==a),Color:e};if(Array.isArray(t))for(var n=0;n<t.length&&n<this.SymbolData.Data.Data.length;++n){i[n]=null;var o=t[n];if(o){var s=this.SymbolData.Data.Data[n];s&&(i[n]={Open:s.Open,High:s.High,Low:s.Low,Close:s.Close})}}else if(t)for(var n=0;n<this.SymbolData.Data.Data.length;++n){i[n]=null;var s=this.SymbolData.Data.Data[n];s&&(i[n]={Open:s.Open,High:s.High,Low:s.Low,Close:s.Close})}return r},this.POLYLINE=function(t,e){var a=[],i={DrawData:a,DrawType:"POLYLINE"},r=we.IsNumber(e),n=!1;if(r){if(this.IsNumber(t)){if(t)for(var o=this.SymbolData.Data.Data.length,s=0;s<o;++s)a[s]=e}else if(Array.isArray(t))for(var l=!1,s=0;s<t.length;++s)if(a[s]=null,l)a[s]=e;else{if(!t[s])continue;l=!0,a[s]=e}}else if(we.IsNumber(t)){if(!t)return i;for(var h={Start:{},End:{},List:[]},s=0;s<e.length;++s)if(a[s]=null,0==n){if(!this.IsNumber(e[s]))continue;n=!0,h.Start={ID:parseInt(s),Value:e[s]}}else if(1==n){if(!this.IsNumber(e[s]))continue;h.End={ID:parseInt(s),Value:e[s]};var u=this.CalculateDrawLine(h);for(var C in u){var c=u[C];a[c.ID]=c.Value}var f={ID:h.End.ID,Value:h.End.Value};h={Start:f,End:{}}}this.CalculateDrawDataExtendLine(a)}else{var d={Start:{},End:{},List:[]};for(var D in t)if(a[D]=null,0==n){if(null==t[D]||!t[D])continue;if(D>=e.length||!this.IsNumber(e[D]))continue;n=!0,d.Start={ID:parseInt(D),Value:e[D]}}else if(1==n){if(null==t[D]||!t[D])continue;if(D>=e.length||!this.IsNumber(e[D]))continue;d.End={ID:parseInt(D),Value:e[D]};var m=this.CalculateDrawLine(d);for(var p in m){var v=m[p];a[v.ID]=v.Value}var g={ID:d.End.ID,Value:d.End.Value};d={Start:g,End:{}}}this.CalculateDrawDataExtendLine(a)}return i},this.CalculateDrawDataExtendLine=function(t,e){if(!(e<0)){var a=null,i=t.length;this.IsNumber(e)&&e<i&&(i=e);for(var r=i-1;r>=0;--r)if(this.IsNumber(t[r])){a=r;break}if(null!=a&&a-1>=0)for(var n=a-1,r=a+1;r<i;++r){var o=t[n],s=t[a],l=(o-s)*(r-n)/(a-n);if(o-l<0)break;t[r]=o-l}}},this.DRAWNUMBER=function(t,e,a,i){var r={Value:[],Text:[]},n={DrawData:r,DrawType:"DRAWNUMBER"},o=2;we.IsNumber(i)&&(o=i);var s={DataType:0,SingleValue:null,ArrayValue:null};Array.isArray(e)?(s.ArrayValue=e,s.DataType=2):("TOP"!==e&&"BOTTOM"!==e||(n.FixedPosition=e),s.SingleValue=e,s.DataType=1);var l={DataType:0,SingleValue:null,ArrayValue:null};if(Array.isArray(a)?(l.ArrayValue=a,l.DataType=2):(l.SingleValue=a,l.DataType=1,we.IsNumber(a)&&(we.IsInteger(a)?l.SingleValue=a.toString():text=a.toFixed(o))),Array.isArray(t))for(var h=0;h<t.length;++h)r.Value[h]=null,t[h]&&(r.Value[h]=this.DRAWNUMBER_Temp_PriceItem(h,s),r.Text[h]=this.DRAWNUMBER_Temp_NumberItem(h,l,o));else if(this.IsNumber(t)&&t)for(var h=0;h<this.SymbolData.Data.Data.length;++h)r.Value[h]=this.DRAWNUMBER_Temp_PriceItem(h,s),r.Text[h]=this.DRAWNUMBER_Temp_NumberItem(h,l,o);return n},this.DRAWNUMBER_Temp_PriceItem=function(t,e){return e?1==e.DataType?e.SingleValue:we.IsNonEmptyArray(e.ArrayValue)?e.ArrayValue[t]:null:null},this.DRAWNUMBER_Temp_NumberItem=function(t,e,a){if(!e)return null;if(1==e.DataType)return e.SingleValue;if(!we.IsNonEmptyArray(e.ArrayValue))return null;var i=e.ArrayValue[t];return this.IsNumber(i)?we.IsInteger(i)?i.toString():i.toFixed(a):i.toString()},this.DRAWNUMBER_FIX=function(t,e,a,i,r){var n={Value:[],Text:[]},o={DrawData:n,DrawType:"DRAWNUMBER_FIX",Position:{X:e,Y:a,Type:i}},s=we.IsNumber(r);if(Array.isArray(t)){for(var l in t)if(n.Text[l]=null,n.Value[l]=null,t[l])if(s)n.Text[l]=this.RemoveZero(r.toFixed(2)),n.Value[l]=r;else{if(l>=r.length||!we.IsNumber(r[l]))continue;var h=r[l];n.Text[l]=this.RemoveZero(h.toFixed(2)),n.Value[l]=h}}else if(t)for(var l=0;l<this.SymbolData.Data.Data.length;++l)if(s)n.Text[l]=this.RemoveZero(r.toFixed(2)),n.Value[l]=r;else{if(l>=r.length||!we.IsNumber(r[l]))continue;var h=r[l];n.Text[l]=this.RemoveZero(h.toFixed(2)),n.Value[l]=h}else;return o},this.DRAWICON=function(t,e,a){if(we.IsString(a)){var i=a.replace("ICO","");a=parseInt(i)}var r=Go.GetDrawIcon(a);r||Go.GetDrawTextIcon(a),r||(r={Symbol:"ð©"});var n=[],o={DrawData:n,DrawType:"DRAWICON",Icon:r,IconType:a};if(t.length<=0)return o;var s="number"==typeof e;if("number"==typeof t){if(!t)return o;for(var l=0;l<this.SymbolData.Data.Data.length;++l)s?n[l]=e:l<e.length&&this.IsNumber(e[l])?n[l]=e[l]:n[l]=null;return o}for(var l in t)n[l]=null,t[l]&&(s?n[l]=e:this.IsNumber(e[l])&&(n[l]=e[l]));return o},this.ICON=function(t,e){if(we.IsString(e)){var a=e.replace("ICO","");e=parseInt(a)}var i=Go.GetDrawIcon(e);i||Go.GetDrawTextIcon(e),i||(i={Symbol:"ð©"});for(var r=[],n={DrawData:r,DrawType:"ICON",Icon:i},o=0;o<this.SymbolData.Data.Data.length;++o){var s=this.SymbolData.Data.Data[o];s&&(0==t?r[o]=s.Low:1==t&&(r[o]=s.High))}return n},this.TIPICON=function(t,e,a,i){if(we.IsString(a)){var r=a.replace("ICO","");a=parseInt(r)}var n=Go.GetDrawIcon(a),o=[],s={DrawData:o,DrawType:"TIPICON",Icon:n,IconType:a,Text:i};if(t.length<=0)return s;var l="number"==typeof e;if(we.IsNumber(t)){if(!t)return s;for(var h=0;h<this.SymbolData.Data.Data.length;++h)l?o[h]=e:h<e.length&&we.IsNumber(e[h])?o[h]=e[h]:o[h]=null}else if(Array.isArray(t))for(var h=0;h<t.length;++h)o[h]=null,t[h]&&(l?o[h]=e:we.IsNumber(e[h])&&(o[h]=e[h]));return s},this.DRAWCHANNEL=function(t,e,a,i,r,n,o){var s=[],l={DrawData:s,DrawType:"DRAWCHANNEL",Border:{}};if(t.length<=0)return l;if(i&&(l.Border.Color=i),o&&(l.AreaColor=o),r>0&&(l.Border.Width=r),n)if("0"==n)l.Border.Dotted=[];else{var h=n.split(",");l.Border.Dotted=[];for(var u in h){var C=h[u];if(C){var c=parseInt(h[u]);we.IsNumber(c)&&(c<=0||l.Border.Dotted.push(c))}}l.Border.Dotted.length<=0&&(l.Border.Dotted=null)}var f="number"==typeof e,d="number"==typeof a;if("number"==typeof t){if(!t)return l;for(var u=0;u<this.SymbolData.Data.Data.length;++u)if(s[u]=null,f&&d)s[u]={Value:e,Value2:a};else if(f&&!d){if(isNaN(a[u]))continue;s[u]={Value:e,Value2:a[u]}}else if(!f&&d){if(isNaN(e[u]))continue;s[u]={Value:e[u],Value2:a}}else{if(isNaN(e[u])||isNaN(a[u]))continue;s[u]={Value:e[u],Value2:a[u]}}}else for(var u=0;u<t.length;++u)if(s[u]=null,!isNaN(t[u])&&t[u])if(f&&d)s[u]={Value:e,Value2:a};else if(f&&!d){if(isNaN(a[u]))continue;s[u]={Value:e,Value2:a[u]}}else if(!f&&d){if(isNaN(e[u]))continue;s[u]={Value:e[u],Value2:a}}else{if(isNaN(e[u])||isNaN(a[u]))continue;s[u]={Value:e[u],Value2:a[u]}}return l},this.RGB=function(t,e,a){return"RGB("+t+","+e+","+a+")"},this.RGBA=function(t,e,a,i){return"RGB("+t+","+e+","+a+","+i+")"},this.UPCOLOR=function(t){return t},this.DOWNCOLOR=function(t){return t},this.STICKTYPE=function(t){return t},this.XMOVE=function(t){return t},this.YMOVE=function(t){return t},this.LINEDASH=function(t){return we.IsNonEmptyArray(t)?t.slice():[]},this.KLINETYPE=function(t){return t},this.FIRSTDRAW=function(t){return t},this.SOUND=function(t){return{Name:"SOUND",Value:t}},this.PLAYSOUND=function(t,e){return null},this.PARTLINE=function(t){var e=[],a={DrawData:e,DrawType:"PARTLINE"};if(t.length<3)return a;for(var i=t[0],r=[],n=1;n<t.length&&n+1<t.length;n+=2)r.push({Cond:t[n],RGB:t[n+1]});for(var n in i){var o={Value:null,RGB:null};e[n]=o;var s=i[n];if(this.IsNumber(s)){var l=null;for(var h in r){var u=r[h];if(Array.isArray(u.Cond)){if(n<u.Cond.length&&u.Cond[n]){l=u.RGB;break}}else if(this.IsNumber(u.Cond)&&u.Cond){l=u.RGB;break}}l&&(o.Value=s,o.RGB=l)}}return a},this.FILLRGN2=function(t){var e=[],a={DrawData:e,DrawType:"FILLRGN2"};if(t.length<4)return a;for(var i=t[0],r=t[1],n=[],o=2;o<t.length&&o+1<t.length;o+=2)n.push({Cond:t[o],Color:t[o+1]});for(var o=0;o<this.SymbolData.Data.Data.length;++o){e[o]=null;var s={Value:null,Value2:null,Color:null};for(var l in n){var h=n[l];if(Array.isArray(h.Cond)){if(o<h.Cond.length&&h.Cond[o]){s.Color=h.Color;break}}else if(this.IsNumber(h.Cond)&&h.Cond){s.Color=h.Color;break}}if(s.Color){if(Array.isArray(i)){if(o>=i.length)continue;if(!this.IsNumber(i[o]))continue;s.Value=i[o]}else{if(!this.IsNumber(i))continue;s.Value=i}if(Array.isArray(r)){if(o>=r.length)continue;if(!this.IsNumber(r[o]))continue;s.Value2=r[o]}else{if(!this.IsNumber(r))continue;s.Value2=r}e[o]=s}}return a},this.FLOATRGN=function(t){var e=[],a={DrawData:e,DrawType:"FLOATRGN"};if(t.length<4)return a;for(var i=t[0],r=t[1],n=[],o=2;o<t.length&&o+1<t.length;o+=2)n.push({Cond:t[o],Color:t[o+1]});for(var o=0;o<this.SymbolData.Data.Data.length;++o){e[o]=null;var s={Value:null,Value2:null,Color:null};for(var l in n){var h=n[l];if(Array.isArray(h.Cond)){if(o<h.Cond.length&&h.Cond[o]){s.Color=h.Color;break}}else if(this.IsNumber(h.Cond)&&h.Cond){s.Color=h.Color;break}}if(s.Color){if(Array.isArray(i)){if(o>=i.length)continue;if(!this.IsNumber(i[o]))continue;s.Value=i[o]}else{if(!this.IsNumber(i))continue;s.Value=i}if(Array.isArray(r)){if(o>=r.length)continue;if(!this.IsNumber(r[o]))continue;s.Value2=r[o]}else{if(!this.IsNumber(r))continue;s.Value2=r}e[o]=s}}return a},this.FILLBGRGN=function(t,e){var a=[],i={DrawData:a,DrawType:1==t?"FILLTOPRGN":"FILLBOTTOMRGN"};if(e.length<3)return i;for(var r=e[0],n=[],o=1;o<e.length&&o+1<e.length;o+=2)n.push({Cond:e[o],Color:e[o+1]});for(var o=0;o<this.SymbolData.Data.Data.length;++o){a[o]=null;var s={Value:null,Color:null};for(var l in n){var h=n[l];if(Array.isArray(h.Cond)){if(o<h.Cond.length&&h.Cond[o]){s.Color=h.Color;break}}else if(this.IsNumber(h.Cond)&&h.Cond){s.Color=h.Color;break}}if(s.Color){if(Array.isArray(r)){if(o>=r.length)continue;if(!this.IsNumber(r[o]))continue;s.Value=r[o]}else{if(!this.IsNumber(r))continue;s.Value=r}a[o]=s}}return i},this.FILLVERTICALRGN=function(t){var e=[],a={DrawData:e,DrawType:"FILLVERTICALRGN"};if(t.length<2)return a;for(var i=[],r=0;r<t.length&&r+1<t.length;r+=2)i.push({Cond:t[r],Color:t[r+1]});for(var r=0;r<this.SymbolData.Data.Data.length;++r){e[r]=null;var n={Color:null};for(var o in i){var s=i[o];if(Array.isArray(s.Cond)){if(r<s.Cond.length&&s.Cond[r]){n.Color=s.Color;break}}else if(this.IsNumber(s.Cond)&&s.Cond){n.Color=s.Color;break}}n.Color&&(e[r]=n)}return a},this.DRAWGBK=function(t,e,a,i){var r={Color:[],Angle:i};e&&r.Color.push(e),a&&r.Color.push(a);var n={DrawData:null,DrawType:"DRAWGBK"};if(Array.isArray(t))for(var o in t){var s=t[o];if(s){n.DrawData=r;break}}else t&&(n.DrawData=r);return n},this.DRAWGBK2=function(t,e,a,i){var r={Color:[],Angle:i};e&&r.Color.push(e),a&&r.Color.push(a);var n={DrawData:null,DrawType:"DRAWGBK2"};if(Array.isArray(t)){r.Data=[];for(var o in t){var s=t[o];r.Data[o]=s?1:0}n.DrawData=r}else t&&(n.DrawData=r,n.DrawType="DRAWGBK");return n},this.DRAWGBK_DIV=function(t,e,a,i,r){var n={AryColor:[e,a],ColorType:i,FillType:r,Data:[]},o={DrawData:n,DrawType:"DRAWGBK_DIV"};if(!this.SymbolData||!this.SymbolData.Data||!we.IsNonEmptyArray(this.SymbolData.Data.Data))return o;var s=this.SymbolData.Data.Data;if(Array.isArray(t))for(var l=0;l<s.length;++l){var h=t[l],u=null;if(h){var C=s[l];u=1==r?{AryValue:[C.High,C.Low]}:2==r?{AryValue:[C.Open,C.Close]}:{AryValue:null}}n.Data[l]=u}else if(t)for(var l=0;l<s.length;++l){var C=s[l],u=null;u=1==r?{AryValue:[C.High,C.Low]}:2==r?{AryValue:[C.Open,C.Close]}:{AryValue:null},n.Data[l]=u}return o},this.DRAWTEXT_LINE=function(t,e,a,i,r,n,o){var s={Text:{Title:a,Color:i},Line:{Type:n,Color:o}};r<=0&&(r=12),s.Text.Font=r*C()+"px å¾®è½¯éé»";var l={DrawData:null,DrawType:"DRAWTEXT_LINE"};if(Array.isArray(t)){var h=null;we.IsNonEmptyArray(t)&&(h=t[t.length-1]),h&&(Array.isArray(e)?s.Price=e[t.length-1]:s.Price=e,l.DrawData=s)}else if(t){if(Array.isArray(e)){var u=null;e.length>0&&(u=e[e.length-1]),s.Price=u}else s.Price=e;l.DrawData=s}return l},this.DRAWRECTREL=function(t,e,a,i,r){var n={Rect:{Left:Math.min(t,a),Top:Math.min(e,i),Right:Math.max(a,t),Bottom:Math.max(i,e)},Color:r};return 0==r&&(n.Color=null),{DrawData:n,DrawType:"DRAWRECTREL"}},this.DRAWTEXTREL=function(t,e,a){var i={Point:{X:t,Y:e}};return we.IsString(a)?i.Text=a:we.IsNonEmptyArray(a)&&(i.Text=a[0]),{DrawData:i,DrawType:"DRAWTEXTREL"}},this.DRAWTEXTABS=function(t,e,a){var i={Point:{X:t,Y:e}};return we.IsString(a)?i.Text=a:we.IsNonEmptyArray(a)&&(i.Text=a[0]),{DrawData:i,DrawType:"DRAWTEXTABS"}},this.DRAWOVERLAYLINE=function(t,e,a){var i={Data:t,MainData:e};return a&&"string"==typeof a&&(i.Title=a),{DrawData:i,DrawType:"DRAWOVERLAYLINE"}},this.DRAWSL=function(t,e,a,i,r){var n={Data:[],Option:[]},o={DrawData:n,DrawType:"DRAWSL"},s=this.IsNumber(e);if(Array.isArray(t))for(var l in t)n.Data[l]=null,t[l]&&(s?(n.Data[l]=e,n.Option[l]={Slope:a,Length:i,Direct:r}):l<e.length&&this.IsNumber(e[l])&&(n.Data[l]=e[l],n.Option[l]={Slope:a,Length:i,Direct:r}));else if(t)for(var h=this.SymbolData.Data.Data.length,l=0;l<h;++l)n.Data[l]=null,s?(n.Data[l]=e,n.Option[l]={Slope:a,Length:i,Direct:r}):l<e.length&&this.IsNumber(e[l])&&(n.Data[l]=e[l],n.Option[l]={Slope:a,Length:i,Direct:r});return o},this.VERTLINE=function(t,e){var a={Data:[],LineType:e},i={DrawData:a,DrawType:"VERTLINE"};if(Array.isArray(t))for(var r=0;r<t.length;++r){var n=t[r];a.Data[r]=n?1:0}return i},this.HORLINE=function(t,e,a,i){var r={Data:[],LineType:a,Extend:i},n={DrawData:r,DrawType:"HORLINE"};if(Array.isArray(t)&&Array.isArray(e))for(var o=0;o<t.length;++o){var s=t[o];if(r.Data[o]=null,s&&!(o>=e.length)){var l=e[o];we.IsNumber(l)&&(r.Data[o]=l)}}else if(Array.isArray(t)&&we.IsNumber(e))for(var o=0;o<t.length;++o){var s=t[o];r.Data[o]=null,s&&(r.Data[o]=e)}else if(we.IsNumber(t)&&t&&this.SymbolData&&this.SymbolData.Data&&this.SymbolData.Data.Data)if(Array.isArray(e)){for(var h=this.SymbolData.Data.Data.length,o=0;o<h;++o)if(r.Data[o]=null,!(o>=e.length)){var l=e[o];we.IsNumber(l)&&(r.Data[o]=l)}}else if(we.IsNumber(e))for(var h=this.SymbolData.Data.Data.length,o=0;o<h;++o)r.Data[o]=e;return n},this.BACKGROUND=function(t,e,a,i,r,n){var o={Margin:[0,1,1,1]};return t&&(o.Color=t),e&&(o.Border=e),we.IsNumber(a)&&(o.Margin[2]=a),we.IsNumber(i)&&(o.Margin[3]=i),we.IsNumber(r)&&(o.Margin[0]=r),we.IsNumber(n)&&(o.Margin[1]=n),o},this.CKLINE=function(t,e,a,i){var r={Color:t,LineWidth:1,LineType:0,LineDot:[3,3]};if(we.IsPlusNumber(e)&&(r.LineWidth=e),we.IsPlusNumber(a)&&(r.LineType=a),i){var n=i.split(","),o=[];for(var s in n){var l=n[s];if(l){var h=parseInt(n[s]);h<=0||o.push(h)}}o.length>0&&(r.LineDotted=o)}r.Data=[];for(var s=0;s<this.SymbolData.Data.Data.length;++s){var l=this.SymbolData.Data.Data[s];r.Data[s]={High:l.High,Low:l.Low}}return r},this.BUY=function(t,e,a,i){var r={Color:"rgb(0,255,0)",Type:"SVG",Icon:"î "};we.IsString(a)&&(r.Icon=a),i&&(r.Color=i);var n=this.CalculateTradeData(t,e,r);return n.DrawType="BUY",n},this.BUYSHORT=function(t,e,a,i){var r={Color:"rgb(0,255,0)",Type:"SVG",Icon:"î "};we.IsString(a)&&(r.Icon=a),i&&(r.Color=i);var n=this.CalculateTradeData(t,e,r);return n.DrawType="BUYSHORT",n},this.SELL=function(t,e,a,i){var r={Color:"rgb(255,0,0)",Type:"SVG",Icon:"î¡"};we.IsString(a)&&(r.Icon=a),i&&(r.Color=i);var n=this.CalculateTradeData(t,e,r);return n.DrawType="SELL",n},this.SELLSHORT=function(t,e,a,i){var r={Color:"rgb(255,0,0)",Type:"SVG",Icon:"î¡"};we.IsString(a)&&(r.Icon=a),i&&(r.Color=i);var n=this.CalculateTradeData(t,e,r);return n.DrawType="SELLSHORT",n},this.CalculateTradeData=function(t,e,a){var i=[],r=[],n={DrawData:{Data:i,Icons:r}};if(Array.isArray(t))for(var o=Array.isArray(e),s=0;s<t.length;++s)i[s]=0,r[s]=null,t[s]&&(i[s]=1,r[s]=o?{Value:e[s],Type:a.Type,Color:a.Color,Icon:a.Icon}:{Value:e,Type:a.Type,Color:a.Color,Icon:a.Icon});else we.IsNumber(t);return n}}function pr(t,e,a){this.AST=t,this.Execute=a,this.Symbol="600000.sh",this.Name,this.Data=null,this.PeriodData=new Vn.default,this.IsApiPeriod=!1,this.SourceData=null,this.MarketValue=null,this.Period=0,this.Right=0,this.DataType=0,this.IsBeforeData=!1,this.DayCount,this.Arguments=[],this.KLineApiUrl=Go.Domain+"/API/KLine2",this.MinuteKLineApiUrl=Go.Domain+"/API/KLine3",this.RealtimeApiUrl=Go.Domain+"/API/stock",this.HistoryMinuteApiUrl=So.Domain+"/API/StockMinuteData",this.StockHistoryDayApiUrl=Go.Domain+"/API/StockHistoryDay",this.StockHistoryDay3ApiUrl=Go.Domain+"/API/StockHistoryDay3",this.StockHistoryDay2ApiUrl=Go.Domain+"/API/StockHistoryDay2",this.StockNewsAnalysisApiUrl=Go.CacheDomain+"/cache/newsanalyze",this.HKToSHSZApiUrl=[Go.CacheDomain+"/cache/historyday/all/hk2shsz.json",Go.CacheDomain+"/cache/analyze/hk2shsz/hk2shsz.json",Go.Domain+"/API/HKToSHSZMinuteData",Go.CacheDomain+"/cache/analyze/hk2szshanalyze"],this.MaxRequestDataCount=1e3,this.MaxRequestMinuteDayCount=5,this.KLineDateTimeRange,this.LatestData=new Vn.default,this.IndexData,this.LatestIndexData,this.MarginData=new Vn.default,this.HKToSHSZData=new Vn.default,this.NewsAnalysisData=new Vn.default,this.ExtendData=new Vn.default,this.UserData=new Vn.default,this.CustomAPIData=new Vn.default,this.ScriptIndexOutData=new Vn.default,this.OtherSymbolData=new Vn.default,this.StockData=new Vn.default,this.SectionFinanceData=new Vn.default,this.ThrowSFPeirod=new Rn.default,this.NetworkFilter,this.DrawInfo,e&&(e.HQDataType&&(this.DataType=e.HQDataType),e.Data&&(this.Data=e.Data,this.DataType!=Jo.MINUTE_ID&&this.DataType!=Jo.MULTIDAY_MINUTE_ID&&this.DataType!=Jo.HISTORY_MINUTE_ID&&(this.Period=e.Data.Period,this.Right=e.Data.Right)),e.SourceData&&(this.SourceData=e.SourceData),e.Symbol&&(this.Symbol=e.Symbol),e.Name&&(this.Name=e.Name),e.MaxRequestDataCount>0&&(this.MaxRequestDataCount=e.MaxRequestDataCount),e.MaxRequestMinuteDayCount>0&&(this.MaxRequestMinuteDayCount=e.MaxRequestMinuteDayCount),e.KLineApiUrl&&(this.KLineApiUrl=e.KLineApiUrl),e.Right&&(this.Right=e.Right),e.Period&&(this.Period=e.Period),!0===e.IsBeforeData&&(this.IsBeforeData=e.IsBeforeData),e.NetworkFilter&&(this.NetworkFilter=e.NetworkFilter),e.DayCount>0&&(this.DayCount=e.DayCount),e.Arguments&&(this.Arguments=e.Arguments),e.KLineRange&&(this.KLineDateTimeRange=e.KLineRange),e.IsApiPeriod&&(this.IsApiPeriod=e.IsApiPeriod),e.DrawInfo&&(this.DrawInfo=e.DrawInfo)),this.RecvError=function(t){throw Xn.Complier.Log("[JSSymbolData::RecvError] ajax error.",t.status),{FunctionName:"RecvError",Request:t}},this.GetLatestDataKey=function(t){var t="DYNAINFO-"+t;return t},this.GetLatestData=function(t){var e=this.JobArgumentsToArray(t,1),a=e[0],i=this.GetLatestDataKey(a);if(this.LatestData.has(i))return this.Execute.RunNextJob();var r=this;if(this.NetworkFilter){var o={Name:"JSSymbolData::GetLatestData",Explain:"DYNAINFO()",Args:e,Request:{Url:r.RealtimeApiUrl,Type:"POST",Data:{symbol:[this.Symbol],field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time","increase","exchangerate","amplitude"]}},Self:this,PreventDefault:!1};if(this.NetworkFilter(o,function(t){r.RecvLatestData(t),r.Execute.RunNextJob()}),1==o.PreventDefault)return}n.HttpRequest({url:r.RealtimeApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time","increase","exchangerate","amplitude"],symbol:[this.Symbol]},type:"post",dataType:"json",async:!0,success:function(t){r.RecvLatestData(t),r.Execute.RunNextJob()},error:function(t){r.RecvError(t)}})},this.RecvLatestData=function(t){if(2==t.ver)return void this.RecvLatestDataVer2(t);if(t.stock&&1==t.stock.length){var e=t.stock[0];e&&(we.IsNumber(e.yclose)&&this.LatestData.set(Wo.YCLOSE,e.yclose),we.IsNumber(e.open)&&this.LatestData.set(Wo.OPEN,e.open),we.IsNumber(e.high)&&this.LatestData.set(Wo.HIGH,e.high),we.IsNumber(e.low)&&this.LatestData.set(Wo.LOW,e.low),we.IsNumber(e.price)&&this.LatestData.set(Wo.CLOSE,e.price),we.IsNumber(e.vol)&&this.LatestData.set(Wo.VOL,e.vol),we.IsNumber(e.amount)&&this.LatestData.set(Wo.AMOUNT,e.amount),we.IsNumber(e.increase)&&this.LatestData.set(Wo.INCREASE,e.increase),we.IsNumber(e.exchangerate)&&this.LatestData.set(Wo.EXCHANGERATE,e.exchangerate),we.IsNumber(e.amplitude)&&this.LatestData.set(Wo.AMPLITUDE,e.amplitude),Xn.Complier.Log("[JSSymbolData::RecvLatestData] symbol, LatestData",e.symbol,this.LatestData))}},this.RecvLatestDataVer2=function(t){if(we.IsNonEmptyArray(t.data)){for(var e=t.symbol,a=0;a<t.data.length;++a){var i=t.data[a];i&&(we.IsNumber(i.id)&&(we.IsNumber(i.value)||we.IsString(i.value))&&(Xn.Complier.Log("[JSSymbolData::RecvLatestDataVer2] symbol="+e+" DYNAINFO("+i.id+")="+i.value+"."),this.LatestData.set(i.id,i.value)))}Xn.Complier.Log("[JSSymbolData::RecvLatestDataVer2]",this.LatestData)}},this.GetLatestCacheData=function(t){return this.LatestData.has(t)?this.LatestData.get(t):null},this.GetLatestIndexData=function(){if(this.LatestIndexData)return this.Execute.RunNextJob();var t=this;if(this.NetworkFilter){var e={Name:"JSSymbolData::GetLatestIndexData",Explain:"ææ°å¤§çæ°æ®",Request:{Url:t.RealtimeApiUrl,Type:"POST",Data:{symbol:["000001.sh"],field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time","increase","amplitude"]}},Self:this,PreventDefault:!1};if(this.NetworkFilter(e,function(e){t.RecvLatestIndexData(e),t.Execute.RunNextJob()}),1==e.PreventDefault)return}n.HttpRequest({url:t.RealtimeApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","amount","date","time","increase","amplitude"],symbol:["000001.sh"]},type:"post",dataType:"json",async:!0,success:function(e){t.RecvLatestIndexData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})},this.RecvLatestIndexData=function(t){if(t.stock&&1==t.stock.length){var e=t.stock[0];this.LatestIndexData={Symbol:e.symbol,Name:e.name,Date:e.date,Time:e.time,YClose:e.yclose,Price:e.price,Open:e.open,High:e.high,Low:e.low,Vol:e.vol,Amount:e.amount,Increase:e.increase,Amplitude:e.amplitude},Xn.Complier.Log("[JSSymbolData::RecvLatestIndexData]",this.LatestIndexData)}},this.GetVolRateData=function(t,e){var a=t.ID.toString()+"-VolRate-"+this.Symbol;if(this.ExtendData.has(a))return this.Execute.RunNextJob();var i=this,r=30;if(this.NetworkFilter){var o=this.Data.GetDateRange(),r=1;this.DataType==Jo.MULTIDAY_MINUTE_ID&&(r=this.DayCount);var s={Name:"JSSymbolData::GetVolRateData",Explain:"åæ¶éæ¯æ°æ®(æäº¤é)",Request:{Url:i.KLineApiUrl,Type:"POST",Data:{symbol:i.Symbol,dayCount:r,field:["name","symbol","vol"],period:0,right:0,dateRange:o}},Self:this,PreventDefault:!1};if(this.NetworkFilter(s,function(t){i.RecvVolRateData(t,a),i.Execute.RunNextJob()}),1==s.PreventDefault)return}n.HttpRequest({url:i.KLineApiUrl,data:{field:["name","symbol","vol"],symbol:i.Symbol,start:-1,count:r},type:"post",dataType:"json",async:!0,success:function(t){i.RecvVolRateData(t,a),i.Execute.RunNextJob()},error:function(t){i.RecvError(t)}})},this.RecvVolRateData=function(t,e){var a=0,i=0,r=new Vn.default;if(2==t.Ver){if(!we.IsNonEmptyArray(t.data))return;for(var n=0;n<t.data.length;++n){var o=t.data[n];we.IsNonEmptyArray(o)&&(o.length<2||we.IsNumber(o[0])&&we.IsPlusNumber(o[1])&&r.set(o[0],{AvgVol5:o[1]}))}}else{if(!we.IsNonEmptyArray(t.data))return;var s=241;we.IsNumber(t.minutecount)&&(s=t.minutecount);for(var n=0,l=0,h=0;n<t.data.length;++n){for(a=0,l=n,h=0;l>=0&&h<5;--l,++h){var o=t.data[l];we.IsNumber(o[6])&&(a+=o[6])}if(h>0){i=a/h/s;var o=t.data[n];r.set(o[0],{AvgVol5:i})}}}r.size>0&&this.ExtendData.set(e,r),Xn.Complier.Log("[JSSymbolData::RecvVolRateData]",r)},this.GetVolRateCacheData=function(t){var e=Ko.JOB_DOWNLOAD_VOLR_DATA.toString()+"-VolRate-"+this.Symbol;e&&this.ExtendData.has(e)||this.Execute.ThrowUnexpectedNode(t,"ä¸æ¯æVOLR");for(var a=[],i=this.ExtendData.get(e),r=0,n=0,o=null,s=0,l=0;s<this.Data.Data.length;++s){a[s]=null;var h=this.Data.Data[s];if(n!=h.Date){if(o=null,l=0,r=0,i.has(h.Date)){o=i.get(h.Date).AvgVol5}n=h.Date}null!=o&&(r+=h.Vol,a[s]=r/(l+1)/o*100,++l)}return a},this.GetIndexData=function(){if(this.IndexData)return this.Execute.RunNextJob();var t=this;if(tt.IsDayPeriod(this.Period,!0)){if(this.NetworkFilter){var e=this.Data.GetDateRange(),a={Name:"JSSymbolData::GetIndexData",Explain:"å¤§çæ°æ®",Period:t.Period,Request:{Url:t.KLineApiUrl,Type:"POST",Data:{field:["name","symbol","yclose","open","price","high","low","vol","up","down","stop","unchanged"],indexSymbol:"000001.sh",symbol:this.Symbol,period:this.Period,dateRange:e}},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.RecvIndexHistroyData(e),t.Execute.RunNextJob()}),1==a.PreventDefault)return}n.HttpRequest({url:t.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","up","down","stop","unchanged"],symbol:"000001.sh",start:-1,count:t.MaxRequestDataCount+500},type:"post",dataType:"json",async:!0,success:function(e){t.RecvIndexHistroyData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})}else if(tt.IsMinutePeriod(this.Period,!0)){if(this.NetworkFilter){var e=this.Data.GetDateRange(),a={Name:"JSSymbolData::GetIndexData",Explain:"å¤§çæ°æ®",Period:t.Period,Request:{Url:t.MinuteKLineApiUrl,Type:"POST",Data:{field:["name","symbol","yclose","open","price","high","low","vol"],indexSymbol:"000001.sh",symbol:this.Symbol,period:this.Period,dateRange:e}},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(e){t.RecvIndexMinuteHistroyData(e),t.Execute.RunNextJob()}),1==a.PreventDefault)return}n.HttpRequest({url:t.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:"000001.sh",start:-1,count:t.MaxRequestMinuteDayCount+5},type:"post",dataType:"json",async:!0,success:function(e){t.RecvIndexMinuteHistroyData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})}},this.RecvIndexHistroyData=function(t){Xn.Complier.Log("[JSSymbolData::RecvIndexHistroyData] recv data",t);var e=this.JsonDataToHistoryData(t);if(this.IndexData=new tt,this.IndexData.DataType=0,this.IndexData.Data=e,1==this.IsApiPeriod)this.IndexData.Period=this.Period,this.IndexData.Data=this.Data.FixKData(e,this.Period);else{var a=this.SourceData.GetOverlayData(this.IndexData.Data);if(this.IndexData.Data=a,tt.IsDayPeriod(this.Period,!1)){var i=this.IndexData.GetPeriodData(this.Period);this.IndexData.Data=i}}},this.RecvIndexMinuteHistroyData=function(t){Xn.Complier.Log("[JSSymbolData::RecvIndexMinuteHistroyData] recv data",t);var e=this.JsonDataToMinuteHistoryData(t);if(this.IndexData=new tt,this.IndexData.DataType=1,this.IndexData.Data=e,1==this.IsApiPeriod)this.IndexData.Period=this.Period,this.IndexData.Data=this.Data.FixKData(e,this.Period);else if(tt.IsMinutePeriod(this.Period,!1)){var a=this.IndexData.GetPeriodData(this.Period);this.IndexData.Data=a}},this.GetOtherSymbolParam=function(t){var e=t.split("$");if(!new Rn.default(["CLOSE","C","VOL","V","OPEN","O","HIGH","H","LOW","L","AMOUNT","AMO","VOLINSTK"]).has(e[1]))return null;var a=e[0];if(6==a.length)"6"==a[0]||"5"==a[0]||"8"==a[0]||"9"==a[0]?a+=".SH":"0"!=a[0]&&"1"!=a[0]&&"2"!=a[0]&&"3"!=a[0]||(a+=".SZ");else if(0==a.indexOf("SZ"))a=a.substr(2)+".SZ";else if(0==a.indexOf("SH"))a=a.substr(2)+".SH";else{if(!(a.indexOf("_")>0))return null;var i=a.split("_");a=i[1]+"."+i[0]}return{Symbol:a.toLowerCase(),DataName:e[1]}},this.GetOtherSymbolData=function(t){var e=this.Symbol;if(t.Literal){var a=this.GetOtherSymbolParam(t.Literal.toUpperCase());if(!a){var i=t.Token;this.Execute.ErrorHandler.ThrowError(i.Index,i.Line,0,t.Literal+" Error.")}e=a.Symbol}else{var a=t.Args;if(a.length>0){var r=a[0];if(r.Type==Xo.Literal)e=r.Value;else if(r.Type==Xo.Identifier){var o=!1;for(var s in this.Arguments){var l=this.Arguments[s];if(l.Name==r.Name){e=l.Value,o=!0;break}}if(!o){var i=t.Token;this.Execute.ErrorHandler.ThrowError(i.Index,i.Line,0,t.FunctionName+"() Error: can't read "+r.Name)}}}}if(t.Symbol=e.toLowerCase(),t.Symbol==this.Symbol)return this.Execute.RunNextJob();if(this.OtherSymbolData.has(t.Symbol))return this.Execute.RunNextJob();var h=this;if(this.DataType==Jo.KLINE_ID&&tt.IsDayPeriod(this.Period,!0)){if(this.NetworkFilter){var u=this.Data.GetDateRange(),C={Name:"JSSymbolData::GetOtherSymbolData",Explain:"æå®ä¸ªè¡æ°æ®",Request:{Data:{symbol:t.Symbol,right:h.Right,period:h.Period,dateRange:u}},Self:this,PreventDefault:!1};if(this.NetworkFilter(C,function(e){h.RecvOtherSymbolKData(e,t),h.Execute.RunNextJob()}),1==C.PreventDefault)return}n.HttpRequest({url:h.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:h.MaxRequestDataCount+500},type:"post",dataType:"json",async:!0,success:function(e){h.RecvOtherSymbolKDayData(e,t),h.Execute.RunNextJob()},error:function(t){h.RecvError(t)}})}else if(tt.IsMinutePeriod(this.Period,!0)||this.DataType==Jo.MINUTE_ID||this.DataType==Jo.MULTIDAY_MINUTE_ID){if(this.NetworkFilter){var u=this.Data.GetDateRange(),C={Name:"JSSymbolData::GetOtherSymbolData",Explain:"æå®ä¸ªè¡æ°æ®",Request:{Data:{symbol:t.Symbol,right:h.Right,period:h.Period,dateRange:u}},Self:this,PreventDefault:!1};if(this.NetworkFilter(C,function(e){h.RecvOtherSymbolKData(e,t),h.Execute.RunNextJob()}),1==C.PreventDefault)return}n.HttpRequest({url:h.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:h.MaxRequestMinuteDayCount+5},type:"post",dataType:"json",async:!0,success:function(e){h.RecvOtherSymbolKMinuteData(e,t),h.Execute.RunNextJob()},error:function(t){h.RecvError(t)}})}},this.RecvOtherSymbolKData=function(t,e){Xn.Complier.Log("[JSSymbolData::RecvOtherSymbolKData] recv data",t);var a=new tt,i=null,r=this.Period;this.DataType==Jo.KLINE_ID&&tt.IsDayPeriod(this.Period,!0)?(i=this.JsonDataToHistoryData(t),a.DataType=0):(i=this.JsonDataToMinuteHistoryData(t),a.DataType=1,this.DataType!=Jo.MINUTE_ID&&this.DataType!=Jo.MULTIDAY_MINUTE_ID||(r=4)),a.Period=this.Period,a.Right=this.Right,a.Data=this.Data.FixKData(i,r),this.OtherSymbolData.set(e.Symbol,a)},this.RecvOtherSymbolKDayData=function(t,e){Xn.Complier.Log("[JSSymbolData::RecvOtherSymbolKDayData] recv data",t);var a=this.JsonDataToHistoryData(t),i=new tt;i.DataType=0,i.Data=a;var r=this.SourceData.GetOverlayData(i.Data);if(i.Data=r,tt.IsDayPeriod(this.Period,!1)){var n=i.GetPeriodData(this.Period);i.Data=n}this.OtherSymbolData.set(e.Symbol,i)},this.RecvOtherSymbolKMinuteData=function(t,e){Xn.Complier.Log("[JSSymbolData::RecvOtherSymbolKMinuteData] recv data",t);var a=this.JsonDataToMinuteHistoryData(t),i=new tt;if(i.DataType=1,i.Data=a,tt.IsMinutePeriod(this.Period,!1)){var r=i.GetPeriodData(this.Period);i.Data=r}this.OtherSymbolData.set(e.Symbol,i)},this.GetOtherSymolCacheData=function(t){var e,a;if(t.FunctionName){a=t.FunctionName;var i=t.Args;if(i.length<=0)return this.GetSymbolCacheData(a);e=i[0].toString().toLowerCase()}else if(t.Literal){var i=this.GetOtherSymbolParam(t.Literal.toUpperCase());if(!i)return[];e=i.Symbol,a=i.DataName}if(e==this.Symbol)return this.GetSymbolCacheData(a);if(!this.OtherSymbolData.has(e))return[];var r=this.OtherSymbolData.get(e),n=e.toUpperCase();switch(a){case"CLOSE":case"C":return r.GetClose();case"VOL":case"V":return wo.IsSHSZ(n)?r.GetVol(100):r.GetVol();case"OPEN":case"O":return r.GetOpen();case"HIGH":case"H":return r.GetHigh();case"LOW":case"L":return r.GetLow();case"AMOUNT":case"AMO":return r.GetAmount();case"VOLINSTK":return r.GetPosition()}},this.GetIndexCacheData=function(t){if(!this.IndexData)return new Array;switch(t){case"INDEXA":return this.IndexData.GetAmount();case"INDEXC":return this.IndexData.GetClose();case"INDEXH":return this.IndexData.GetHigh();case"INDEXL":return this.IndexData.GetLow();case"INDEXO":return this.IndexData.GetOpen();case"INDEXV":return this.IndexData.GetVol();case"INDEXADV":return this.IndexData.GetUp();case"INDEXDEC":return this.IndexData.GetDown()}},this.GetBlockSymbol=function(t){var e=new Vn.default([["æ²ªæ·±Aè¡","CNA.ci"],["åä¸æ¿","GEM.ci"],["æ²ªå¸Aè¡","SHA.ci"],["ä¸­å°æ¿","SME.ci"],["æ·±å¸Aè¡","SZA.ci"]]);if(e.has(t))return e.get(t);if(!t)return null;var a=null,i=t.toUpperCase();if(i.indexOf(".SH")>0||i.indexOf(".SZ")>0){if(!new Rn.default(["000001.SH","000003.SH","000016.SH","000300.SH","000905.SH","399001.SZ"," 399005.SZ","399006.SZ"]).has(i))return null;a=t.replace(".SH",".sh"),a=t.replace(".SZ",".sz")}else t.indexOf(".CI")>0&&(a=t.replace(".CI",".ci"));return a},this.GetIndexIncreaseData=function(t){var e=null;if(t.IsSelfSymbol)e=this.Symbol;else{if(!t.Args||t.Args.length<=0){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,t.FunctionName+" Error: åæ°ä¸è½ä¸ºç©º")}e=t.Args[0].Value}var i=this.GetBlockSymbol(e);if(!i){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,t.FunctionName+" Error: can't support "+e)}var r=t.ID.toString()+"-UpCount-"+i,o=t.ID.toString()+"-DownCount-"+i;if(this.ExtendData.has(r)&&this.ExtendData.has(o))return this.Execute.RunNextJob();var s=this;if(this.NetworkFilter){var l={Type:this.DataType};this.DataType===Jo.KLINE_ID&&(l.Period=this.Period);var h=this.Data.GetDateRange(),u={Name:"JSSymbolData::GetIndexIncreaseData",Explain:"æ¶¨åå®¶æ°ç»è®¡",DateRange:h,DataType:l,Request:{Url:"æ°æ®å°å",Type:"POST",Data:{symbol:this.Symbol,blocksymbol:i,field:["up","down"]}},Self:this,PreventDefault:!1};if(this.NetworkFilter(u,function(t){this.DataType===Jo.KLINE_ID?this.RecvHistoryIncreaseDataV2(t,{UpKey:r,DownKey:o}):this.RecvMinuteIncreaseDataV2(t,{UpKey:r,DownKey:o}),s.Execute.RunNextJob()}),1==u.PreventDefault)return}if(this.DataType===Jo.MINUTE_ID||this.DataType===Jo.MULTIDAY_MINUTE_ID){var C=Go.CacheDomain+"/cache/analyze/increaseanalyze/"+i+".json";Xn.Complier.Log("[JSSymbolData::GetIndexIncreaseData] minute Get url=",C),n.HttpRequest({url:C,type:"get",dataType:"json",async:!0,success:function(t){s.RecvMinuteIncreaseData(t,{UpKey:r,DownKey:o}),s.Execute.RunNextJob()},error:function(t){s.RecvError(t)}})}else this.DataType===Jo.KLINE_ID&&tt.IsDayPeriod(this.Period,!0)?(Xn.Complier.Log("[JSSymbolData::GetIndexIncreaseData] K day Get url=",s.KLineApiUrl),n.HttpRequest({url:s.KLineApiUrl,data:{symbol:i,start:-1,count:s.MaxRequestDataCount,field:["up","down"]},type:"post",dataType:"json",async:!0,success:function(t){s.RecvHistoryIncreaseData(t,{UpKey:r,DownKey:o}),s.Execute.RunNextJob()},error:function(t){s.RecvError(t)}})):this.Execute.RunNextJob()},this.RecvHistoryIncreaseDataV2=function(t,e){Xn.Complier.Log("[JSSymbolData::RecvHistoryIncreaseData] recv data, key",t,e);var a=[],i=[];for(var r in t.data){var n=t.data[r],o=new Z,s=new Z,l=n[0],h=null;o.Date=l,s.Date=l,tt.IsMinutePeriod(this.Period,!0)&&we.IsNumber(n[1])&&(h=n[1],o.Time=h,s.Time=h),o.Value=n[2],a[r]=o,s.Value=n[3],i[r]=s}var u=this.Data.GetFittingData2(a,0),C=this.Data.GetFittingData2(i,0);this.ExtendData.set(e.UpKey,u),this.ExtendData.set(e.DownKey,C)},this.RecvHistoryIncreaseData=function(t,e){Xn.Complier.Log("[JSSymbolData::RecvHistoryIncreaseData] recv data",t);var a=[],i=[];for(var r in t.data){var n=t.data[r],o=new Z,s=new Z;o.Date=n[0],o.Value=n[8],a[r]=o,s.Date=n[0],s.Value=n[9],i[r]=s}var l,h;l=this.SourceData?this.SourceData.GetFittingData(a):this.Data.GetFittingData(aryData),h=this.SourceData?this.SourceData.GetFittingData(i):this.Data.GetFittingData(aryData),this.ExtendData.set(e.UpKey,l),this.ExtendData.set(e.DownKey,h)},this.RecvMinuteIncreaseDataV2=function(t,e){Xn.Complier.Log("[JSSymbolData::RecvMinuteIncreaseDataV2] recv data, key",t,e)},this.RecvMinuteIncreaseData=function(t,e){if(Xn.Complier.Log("[JSSymbolData::RecvMinuteIncreaseData] recv data",t),t.minute){var a=t.minute;if(a.time&&a.up&&a.down){var i=[],r=[];if(this.IsBeforeData)for(var n=0,o=0;n<this.Data.Data.length;++n){i[n]=null,r[n]=null;var s=this.Data.Data[n];if(!s.Before){var l=s.DateTime;if(l){var h=l.split(" ");if(2==h.length){var u=parseInt(h[0]);u==t.date&&(i[n]=a.up[o],r[n]=a.down[o],++o)}}}}else for(var n=0,o=0;n<this.Data.Data.length;++n){i[n]=null,r[n]=null;var s=this.Data.Data[n],l=s.DateTime;if(l){var h=l.split(" ");if(2==h.length){var u=parseInt(h[0]);u==t.date&&(i[n]=a.up[o],r[n]=a.down[o],++o)}}}this.ExtendData.set(e.UpKey,i),this.ExtendData.set(e.DownKey,r)}}},this.GetIndexIncreaseCacheData=function(t,e,a){var i=this.GetBlockSymbol(e);i||this.Execute.ThrowUnexpectedNode(a,"ä¸æ¯æå½æ°"+t+"("+e+")");var r;if("UPCOUNT"==t||"ADVANCE"==t?r=Ko.JOB_DOWNLOAD_INDEX_INCREASE_DATA.toString()+"-UpCount-"+i:"DOWNCOUNT"!=t&&"DECLINE"!=t||(r=Ko.JOB_DOWNLOAD_INDEX_INCREASE_DATA.toString()+"-DownCount-"+i),r&&this.ExtendData.has(r)||this.Execute.ThrowUnexpectedNode(a,"ä¸æ¯æå½æ°"+t+"("+e+")"),this.DataType===Jo.MINUTE_ID||this.DataType===Jo.MULTIDAY_MINUTE_ID)return this.ExtendData.get(r);if(this.DataType===Jo.KLINE_ID&&tt.IsDayPeriod(this.Period,!0)){var n=this.ExtendData.get(r),o=new tt;if(o.Data=n,o.Period=this.Period,o.Period>0){var s=o.GetPeriodSingleData(o.Period);o.Data=s}return o.GetValue()}return null},this.GetSymbolData=function(){if(this.Data)return this.Execute.RunNextJob();var t=this;if(this.DataType===Jo.MINUTE_ID)return void n.HttpRequest({url:t.RealtimeApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol","amount","date","minute","time","minutecount"],symbol:[t.Symbol],start:-1},type:"post",dataType:"json",async:!0,success:function(e){t.RecvMinuteData(e),t.Execute.RunNextJob()}});if(this.DataType===Jo.MULTIDAY_MINUTE_ID)return void n.HttpRequest({url:t.HistoryMinuteApiUrl,data:{symbol:t.Symbol,daycount:t.DayCount},type:"post",dataType:"json",async:!0,success:function(e){t.RecvMultiDayMinuteData(e),t.Execute.RunNextJob()}});if(tt.IsDayPeriod(this.Period,!0)){if(this.NetworkFilter){var e={Name:"JSSymbolData::GetSymbolData",Explain:"æ¥çº¿æ°æ®",Request:{Url:t.RealtimeApiUrl,Type:"POST",Data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestDataCount,period:this.Period,right:this.Right}},Self:this,PreventDefault:!1};if(this.KLineDateTimeRange&&(e.Request.KLineDataTimeRange={Start:{Date:this.KLineDateTimeRange.Start.Date},End:{Date:this.KLineDateTimeRange.End.Date}},this.IsNumber(this.KLineDateTimeRange.Start.Time)&&(e.Request.KLineDataTimeRange.Start.Time=this.KLineDateTimeRange.Start.Time),this.IsNumber(this.KLineDateTimeRange.End.Time)&&(e.Request.KLineDataTimeRange.End.Time=this.KLineDateTimeRange.End.Time)),this.NetworkFilter(e,function(e){t.RecvHistroyData(e),t.Execute.RunNextJob()}),1==e.PreventDefault)return}n.HttpRequest({url:t.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(e){t.RecvHistroyData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})}else if(tt.IsMinutePeriod(this.Period,!0)||tt.IsSecondPeriod(this.Period)||tt.IsMilliSecondPeriod(this.Period)){if(this.NetworkFilter){var e={Name:"JSSymbolData::GetSymbolData",Explain:"åéKçº¿æ°æ®",Request:{Url:t.MinuteKLineApiUrl,Type:"POST",Data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestMinuteDayCount,period:this.Period,right:this.Right}},Self:this,PreventDefault:!1};if(this.KLineDateTimeRange&&(e.Request.KLineDataTimeRange={Start:{Date:this.KLineDateTimeRange.Start.Date},End:{Date:this.KLineDateTimeRange.End.Date}},this.IsNumber(this.KLineDateTimeRange.Start.Time)&&(e.Request.KLineDataTimeRange.Start.Time=this.KLineDateTimeRange.Start.Time),this.IsNumber(this.KLineDateTimeRange.End.Time)&&(e.Request.KLineDataTimeRange.End.Time=this.KLineDateTimeRange.End.Time)),this.NetworkFilter(e,function(e){t.RecvMinuteHistroyData(e),t.Execute.RunNextJob()}),1==e.PreventDefault)return}n.HttpRequest({url:this.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:t.Symbol,start:-1,count:t.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(e){t.RecvMinuteHistroyData(e),t.Execute.RunNextJob()},error:function(e){t.RecvError(e)}})}},this.RecvHistroyData=function(t){Xn.Complier.Log("[JSSymbolData::RecvHistroyData] recv data",t);var e=this.JsonDataToHistoryData(t);if(this.Data=new tt,this.Data.DataType=0,this.Data.Data=e,this.SourceData=new tt,this.SourceData.Data=e,this.IsApiPeriod);else{if(this.Right>0){var a=this.Data.GetRightData(this.Right);this.Data.Data=a}if(tt.IsDayPeriod(this.Period,!1)){var i=this.Data.GetPeriodData(this.Period);this.Data.Data=i}}this.Data.Right=this.Right,this.Data.Period=this.Period,this.Name=t.name},this.RecvMinuteHistroyData=function(t){Xn.Complier.Log("[JSSymbolData::RecvMinuteHistroyData] recv data",t);var e=this.JsonDataToMinuteHistoryData(t);if(this.Data=new tt,this.Data.DataType=1,this.Data.Data=e,this.SourceData=new tt,this.SourceData.Data=e,this.IsApiPeriod);else if(tt.IsMinutePeriod(this.Period,!1)){var a=this.Data.GetPeriodData(this.Period);this.Data.Data=a}this.Data.Period=this.Period,this.Name=t.name},this.RecvMinuteData=function(t){Xn.Complier.Log("[JSSymbolData::RecvMinuteData] recv data",t);var e=this.JsonDataToMinuteData(t);this.Data=new tt,this.Data.DataType=2,this.Data.Data=e,this.Name=t.stock[0].name},this.RecvMultiDayMinuteData=function(t){var e=this.JsonDataToMultiDayMinuteData(t);this.Data=new tt,this.Data.DataType=2,this.Data.Data=e,this.Name=t.name},this.GetSymbolCacheData=function(t){if(!this.Data)return new Array;var e=this.Symbol.toUpperCase();switch(t){case"CLOSE":case"C":return this.Data.GetClose();case"VOL":case"V":return wo.IsSHSZ(e)&&this.DataType==Jo.KLINE_ID?this.Data.GetVol(100):this.Data.GetVol();case"OPEN":case"O":return this.Data.GetOpen();case"HIGH":case"H":return this.Data.GetHigh();case"LOW":case"L":return this.Data.GetLow();case"AMOUNT":case"AMO":return this.Data.GetAmount();case"OPI":case"VOLINSTK":return this.Data.GetPosition();case"ZSTJJ":return this.Data.GetAvPrice();case"SETTLE":case"QHJSJ":return this.Data.GetSettlementPrice();case"ISEQUAL":return this.Data.GetIsEqual();case"ISUP":return this.Data.GetIsUp();case"ISDOWN":return this.Data.GetIsDown()}},this.GetSymbolPeriodData=function(t){var e=hr.GetPeriodInfo({Name:t.PeriodName}).Period,a={PeriodID:e,PeriodName:t.PeriodName};if(e==this.Period&&this.Execute.RunNextJob(),this.IsApiPeriod){if(this.PeriodData.has(t.PeriodName))return this.Execute.RunNextJob()}else if(tt.IsDayPeriod(e,!0)){if(tt.IsDayPeriod(this.Period,!0))return this.Execute.RunNextJob();a={PeriodID:0,PeriodName:"DAY"}}else{if(!tt.IsMinutePeriod(e,!0))return this.Execute.RunNextJob();if(tt.IsMinutePeriod(this.Period,!0))return this.Execute.RunNextJob();a={PeriodID:4,PeriodName:"MIN1"}}var i=this;if(this.NetworkFilter){var r={Name:"JSSymbolData::GetSymbolPeriodData",Explain:"è·¨å¨ææ°æ®",Request:{Data:{field:["symbol","name",t.ValueName],period:t.PeriodName,symbol:i.Symbol}},Self:this,PreventDefault:!1};if(this.NetworkFilter(r,function(t){i.RecvSymbolPeriodData(t,a),i.Execute.RunNextJob()}),1==r.PreventDefault)return}if(tt.IsMinutePeriod(e,!0))n.HttpRequest({url:this.MinuteKLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:i.Symbol,start:-1,count:i.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(t){i.RecvSymbolPeriodData(t,a),i.Execute.RunNextJob()},error:function(t){i.RecvError(t)}});else{if(!tt.IsDayPeriod(e,!0))return this.Execute.RunNextJob();n.HttpRequest({url:i.KLineApiUrl,data:{field:["name","symbol","yclose","open","price","high","low","vol"],symbol:i.Symbol,start:-1,count:i.MaxRequestDataCount},type:"post",dataType:"json",async:!0,success:function(t){i.RecvSymbolPeriodData(t,a),i.Execute.RunNextJob()},error:function(t){i.RecvError(t)}})}},this.RecvSymbolPeriodData=function(t,e){if(Xn.Complier.Log("[JSSymbolData::RecvSymbolPeriodData] data, periodInfo ",t,e),tt.IsDayPeriod(e.PeriodID,!0)){var a=this.JsonDataToHistoryData(t),i=new tt;i.DataType=0,i.Data=a,i.Right=0,i.Period=e.PeriodID,this.PeriodData.set(e.PeriodName,i)}else if(tt.IsMinutePeriod(e.PeriodID,!0)){var a=this.JsonDataToMinuteHistoryData(t),r=new tt;r.DataType=1,r.Data=a,r.Right=0,r.Period=e.PeriodID,this.PeriodData.set(e.PeriodName,r)}},this.GetSymbolPeriodCacheData=function(t,e){var a=hr.GetPeriodInfo({Name:e});if(this.Period==a.Period)return this.GetSymbolCacheData(t);var i=null;if(this.IsApiPeriod){var r=hr.GetPeriodInfo({PeriodID:this.Period});if(!r)return null;if(r.Order>a.Order)return null;if(!this.PeriodData.has(e))return null;i=this.PeriodData.get(e),i=i.Data}else{var r=hr.GetPeriodInfo({PeriodID:this.Period});if(!r)return null;if(r.Order>a.Order)return null;if(tt.IsDayPeriod(a.Period,!0)&&tt.IsMinutePeriod(this.Period,!0)){var n=this.PeriodData.get("DAY");i=0==a.Period?n.Data:n.GetPeriodData(a.Period)}else{var o=new tt;if(o.Data=this.SourceData.Data,o.Period=this.Period,o.Right=this.Right,tt.IsDayPeriod(a.Period,!0)&&o.Right>0){var s=o.GetRightData(o.Right);o.Data=s}i=o.GetPeriodData(a.Period)}}var l=this.Data.ConverPeriod(i,this.Period,a.Period),h=new tt;h.Data=l;var u=this.Symbol.toUpperCase();switch(t){case"C":case"CLOSE":return h.GetClose();case"O":case"OPEN":return h.GetOpen();case"H":case"HIGH":return h.GetHigh();case"L":case"LOW":return h.GetLow();case"AMO":case"AMOUNT":return h.GetAmount();case"V":case"VOL":return wo.IsSHSZ(u)?h.GetVol(100):h.GetVol();case"VOLINSTK":return h.GetPosition();default:return null}},this.GetSymbolPeriodCacheData2=function(t,e,a){var i=hr.GetPeriodInfo({Name:e});if(!i)return null;var r=hr.GetPeriodInfo({PeriodID:this.Period});if(!r)return null;if(r.Order>i.Order)return null;var n;if(r.Period==i.Period)n=this.Data;else{var o;if(this.IsApiPeriod){if(!this.PeriodData.has(e))return null;o=this.PeriodData.get(e)}else if(tt.IsMinutePeriod(r.Period,!0)&&tt.IsDayPeriod(i.Period,!0)){var s=this.PeriodData.get("DAY");o=0==i.Period?s:s.GetPeriodData(i.Period)}else{var l=new tt;if(l.Data=this.SourceData.Data,l.Period=this.Period,l.Right=this.Right,tt.IsDayPeriod(i.Period,!0)&&l.Right>0){var h=l.GetRightData(l.Right);l.Data=h}o=l.GetPeriodData(i.Period)}var u=this.Data.ConverPeriod(o,this.Period,i.Period),n=new tt;n.Data=u}if(we.IsPlusNumber(a)){var C=new tt,u=n.GetRef(a);C.Data=u,n=C}var c=this.Symbol.toUpperCase();switch(t){case"C":case"CLOSE":return n.GetClose();case"O":case"OPEN":return n.GetOpen();case"H":case"HIGH":return n.GetHigh();case"L":case"LOW":return n.GetLow();case"AMO":case"AMOUNT":return n.GetAmount();case"V":case"VOL":return wo.IsSHSZ(c)?n.GetVol(100):n.GetVol();case"VOLINSTK":return n.GetPosition();default:return null}},this.GetCurrBarsCount=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=this.Data.Data.length,a=e-1;a>=0;--a)t.push(a+1);return t},this.GetBarPos=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=this.Data.Data.length,a=0;a<e;++a)t.push(a+1);return t},this.GetTotalTradeMinuteCount=function(){var t=Mo.GetCoordinateData(this.Symbol);return t&&t.Count>0?t.Count-1:242},this.GetTotalBarsCount=function(){return this.Data.Data.length},this.GetIsLastBar=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=this.Data.Data.length,a=0;a<e;++a)a==e-1?t.push(1):t.push(0);return t},this.GetBarStatus=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=this.Data.Data.length,a=0;a<e;++a)t[a]=0==a?1:a==e-1?2:0;return t},this.GetTRData=function(t){var e=[];if(!this.Data||!we.IsNonEmptyArray(this.Data.Data))return e;for(var a=this.Data.Data.length,i=0;i<a;++i){var r=this.Data.Data[i],n=null;if(we.IsNumber(r.High)&&we.IsNumber(r.Low)){var o=Math.abs(r.High-r.Low);(null==n||n<o)&&(n=o)}if(we.IsNumber(r.High)&&we.IsNumber(r.YClose)){var o=Math.abs(r.High-r.YClose);(null==n||n<o)&&(n=o)}if(we.IsNumber(r.YClose)&&we.IsNumber(r.Low)){var o=Math.abs(r.Low-r.YClose);(null==n||n<o)&&(n=o)}e[i]=n}return e},this.GetMarginCacheData=function(t,e){var a=Ko.GetMarginJobID(t);return a||this.Execute.ThrowUnexpectedNode(e,"ä¸æ¯æMARGIN("+t+")"),this.MarginData.has(a)?this.MarginData.get(a):[]},this.GetMarginData=function(t){if(this.MarginData.has(t))return this.Execute.RunNextJob();Xn.Complier.Log("[JSSymbolData::GetMarginData] jobID=",t);var e=this,a=["name","date","symbol"];switch(t){case Ko.JOB_DOWNLOAD_MARGIN_BALANCE:a.push("margin.balance");break;case Ko.JOB_DOWNLOAD_MARGIN_RATE:a.push("margin.rate");break;case Ko.JOB_DOWNLOAD_MARGIN_BUY_BALANCE:case Ko.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT:case Ko.JOB_DOWNLOAD_MARGIN_BUY_REPAY:case Ko.JOB_DOWNLOAD_MARGIN_BUY_NET:a.push("margin.buy");break;case Ko.JOB_DOWNLOAD_MARGIN_SELL_BALANCE:case Ko.JOB_DOWNLOAD_MARGIN_SELL_VOLUME:case Ko.JOB_DOWNLOAD_MARGIN_SELL_REPAY:case Ko.JOB_DOWNLOAD_MARGIN_SELL_NET:a.push("margin.sell")}n.HttpRequest({url:this.StockHistoryDayApiUrl,data:{field:a,symbol:[this.Symbol],orderfield:"date"},type:"post",dataType:"json",async:!0,success:function(a){e.RecvMarginData(a,t),e.Execute.RunNextJob()}})},this.RecvMarginData=function(t,e){if(Xn.Complier.Log(t),t.stock&&1==t.stock.length){var a=t.stock[0],i=new Array,r=[],n=[],o=[];for(var s in a.stockday){var l=a.stockday[s],h=l.margin;if(h){var u=new Z;switch(u.Date=l.date,e){case Ko.JOB_DOWNLOAD_MARGIN_BALANCE:if(!this.IsNumber(h.balance))continue;u.Value=h.balance,i.push(u);break;case Ko.JOB_DOWNLOAD_MARGIN_RATE:if(!this.IsNumber(h.rate))continue;u.Value=h.rate,i.push(u);break;case Ko.JOB_DOWNLOAD_MARGIN_BUY_BALANCE:case Ko.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT:case Ko.JOB_DOWNLOAD_MARGIN_BUY_REPAY:case Ko.JOB_DOWNLOAD_MARGIN_BUY_NET:var C=h.buy;if(!C)continue;if(!(this.IsNumber(C.balance)&&this.IsNumber(C.amount)&&this.IsNumber(C.repay)&&this.IsNumber(C.net)))continue;u.Value=C.balance;var c=new Z;c.Date=l.date,c.Value=C.amount;var f=new Z;f.Date=l.date,f.Value=C.repay;var d=new Z;d.Date=l.date,d.Value=C.net,i.push(u),r.push(c),n.push(f),o.push(d);break;case Ko.JOB_DOWNLOAD_MARGIN_SELL_BALANCE:case Ko.JOB_DOWNLOAD_MARGIN_SELL_VOLUME:case Ko.JOB_DOWNLOAD_MARGIN_SELL_REPAY:case Ko.JOB_DOWNLOAD_MARGIN_SELL_NET:var D=h.sell;if(!D)continue;if(!(this.IsNumber(D.balance)&&this.IsNumber(D.volume)&&this.IsNumber(D.repay)&&this.IsNumber(D.net)))continue;u.Value=C.balance;var c=new Z;c.Date=l.date,c.Value=C.volume;var f=new Z;f.Date=l.date,f.Value=C.repay;var d=new Z;d.Date=l.date,d.Value=C.net,i.push(u),r.push(c),n.push(f),o.push(d);break;default:continue}}}var m=[];e===Ko.JOB_DOWNLOAD_MARGIN_BALANCE||e===Ko.JOB_DOWNLOAD_MARGIN_RATE?m.push({JobID:e,Data:i}):e===Ko.JOB_DOWNLOAD_MARGIN_BUY_BALANCE||e===Ko.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT||e===Ko.JOB_DOWNLOAD_MARGIN_BUY_REPAY||e===Ko.JOB_DOWNLOAD_MARGIN_BUY_NET?(m.push({JobID:Ko.JOB_DOWNLOAD_MARGIN_BUY_BALANCE,Data:i}),m.push({JobID:Ko.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT,Data:r}),m.push({JobID:Ko.JOB_DOWNLOAD_MARGIN_BUY_REPAY,Data:n}),m.push({JobID:Ko.JOB_DOWNLOAD_MARGIN_BUY_NET,Data:o})):e!==Ko.JOB_DOWNLOAD_MARGIN_SELL_BALANCE&&e!==Ko.JOB_DOWNLOAD_MARGIN_SELL_VOLUME&&e!==Ko.JOB_DOWNLOAD_MARGIN_SELL_REPAY&&e!==Ko.JOB_DOWNLOAD_MARGIN_SELL_NET||(m.push({JobID:Ko.JOB_DOWNLOAD_MARGIN_SELL_BALANCE,Data:i}),m.push({JobID:Ko.JOB_DOWNLOAD_MARGIN_SELL_VOLUME,Data:r}),m.push({JobID:Ko.JOB_DOWNLOAD_MARGIN_SELL_REPAY,Data:n}),m.push({JobID:Ko.JOB_DOWNLOAD_MARGIN_SELL_NET,Data:o}));for(var p in m){var v=this.SourceData.GetFittingData(m[p].Data),g=new tt;if(g.Data=v,g.Period=this.Period,g.Period>0){var T=g.GetPeriodSingleData(g.Period);g.Data=T}var I=g.GetValue();this.MarginData.set(m[p].JobID,I)}}},this.GetNewsAnalysisCacheData=function(t,e){var a=Ko.GetNewsAnalysisID(t);return a||this.Execute.ThrowUnexpectedNode(e,"ä¸æ¯æNEWS("+t+")"),this.NewsAnalysisData.has(a)?this.NewsAnalysisData.get(a):[]},this.GetHKToSHSZData=function(t){var e=t.Args,a=this.Symbol;if(e.length>0){var i=e[0];if(i.Type==Xo.Literal)a=i.Value;else if(i.Type==Xo.Identifier){var r=!1;for(var n in this.Arguments){var o=this.Arguments[n];if(o.Name==i.Name){a=o.Value,r=!0;break}}if(!r){var s=t.Token;this.Execute.ErrorHandler.ThrowError(s.Index,s.Line,0,"HK2SHSZ() Error: can't read "+i.Name)}}}t.Symbol=a,1==a||2==a||3==a?this.GetHKToSHSZMarketData(a,t):this.GetHKToSHSZStockData(a,t)},this.GetHKToSHSZStockData=function(t,e){if(this.HKToSHSZData.has(t))return this.Execute.RunNextJob();var a=t.toLowerCase(),i=this,r=this.HKToSHSZApiUrl[3]+"/"+a+".json";n.HttpRequest({url:r,type:"get",dataType:"json",async:!0,success:function(t){i.RecvHKToSHSZStockData(t,e),i.Execute.RunNextJob()},error:function(t){console.warn("[JSSymbolData::GetHKToSHSZStockData] request url="+r+" failed. error="+t.status),i.RecvHKToSHSZStockData(null,e),i.Execute.RunNextJob()}})},this.RecvHKToSHSZStockData=function(t,e){if(t){for(var a=t.symbol,i=a.toUpperCase(),r=[],n=0;n<t.date.length;++n){var o=new Z;o.Date=t.date[n],o.Value=t.vol[n],r.push(o)}var s=this.Data.GetFittingData(r),l=new tt;if(l.Data=s,l.Period=this.Period,l.Period>0){var h=l.GetPeriodSingleData(l.Period);l.Data=h}var t=l.GetValue();this.HKToSHSZData.set(i,t)}},this.GetHKToSHSZMarketData=function(t,e){if(this.HKToSHSZData.has(t))return this.Execute.RunNextJob();var a,i=0;this.DataType===Jo.MINUTE_ID?i=1:this.DataType==Jo.MULTIDAY_MINUTE_ID?i=2:this.Period<=3&&(i=0),a=this.HKToSHSZApiUrl[i];var r=this;Xn.Complier.Log("[JSSymbolData::GetHKToSHSZMarketData] code="+t+" url="+a+", dataType="+i),2===i?n.HttpRequest({url:a,data:{symbol:this.Symbol,daycount:this.MaxRequestMinuteDayCount},type:"post",dataType:"json",async:!0,success:function(t){r.RecvMulitMinuteHKToSHSZData(t,e),r.Execute.RunNextJob()}}):n.HttpRequest({url:a,type:"get",dataType:"json",async:!0,success:function(t){0==i?r.RecvHKToSHSZData(t,e):1==i&&r.RecvMinuteHKToSHSZData(t,e),r.Execute.RunNextJob()}})},this.RecvMinuteHKToSHSZData=function(t,e){var a=[],i=[],r=[];if(this.IsBeforeData){for(o in this.SourceData.Data){var n=this.SourceData.Data[o];if(!n.Before)break;a.push(null),i.push(null),r.push(null)}for(var o=0;o<t.time.length;++o){if(925!==t.time[o]){var s=t.hk2sh[o],l=t.hk2sz[o],h=s+l;a.push(h),i.push(s),r.push(l)}}}else for(var o=0;o<t.time.length;++o){var s=(t.time[o],t.hk2sh[o]),l=t.hk2sz[o],h=s+l;a.push(h),i.push(s),r.push(l)}var u=[{Data:a,ID:1},{Data:i,ID:2},{Data:r,ID:3}];for(var o in u){var n=u[o];this.HKToSHSZData.set(n.ID,n.Data)}},this.RecvHKToSHSZData=function(t,e){for(var a=[],i=[],r=[],n=0;n<t.date.length;++n){var o=t.date[n],s=1e6*t.hk2sh[n],l=1e6*t.hk2sz[n],h=s+l,u=new Z;u.Date=o,u.Value=h;var C=new Z;C.Date=o,C.Value=s;var c=new Z;c.Date=o,c.Value=l,a.push(u),i.push(C),r.push(c)}var f=[{Data:a,ID:1},{Data:i,ID:2},{Data:r,ID:3}];for(var d in f){var D=this.Data.GetFittingData(f[d].Data),m=new tt;if(m.Data=D,m.Period=this.Period,m.Period>0){var p=m.GetPeriodSingleData(m.Period);m.Data=p}var v=m.GetValue();this.HKToSHSZData.set(f[d].ID,v)}},this.RecvMulitMinuteHKToSHSZData=function(t,e){if(t.data&&!(t.data.length<=0)){for(var a=[],i=[],r=[],n=0,o=0;n<this.Data.Data.length&&o<t.data.length;){a[n]=null,i[n]=null,r[n]=null;var s=this.Data.Data[n],l=s.DateTime;if(l){var h=l.split(" ");if(2==h.length){var u=parseInt(h[0]),C=t.data[o];if(!C.minute||C.minute.length<=0)++o;else if(C.date>u)++n;else if(C.date<u)++o;else{for(var c in C.minute){var f=C.minute[c],d=f[1],D=f[2],m=d+D;a[n]=m,i[n]=d,r[n]=D,++n}++o}}else++n}else++n}var p=[{Data:a,ID:1},{Data:i,ID:2},{Data:r,ID:3}];for(var n in p){var s=p[n];this.HKToSHSZData.set(s.ID,s.Data)}}},this.GetHKToSHSZCacheData=function(t,e){return t||(t=this.Symbol),"string"==typeof t&&(t=t.toUpperCase()),this.HKToSHSZData.has(t)?this.HKToSHSZData.get(t):[]},this.GetNewsAnalysisData=function(t){if(this.NewsAnalysisData.has(t))return this.Execute.RunNextJob();var e=this,a=new Vn.default([[Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_NEGATIVE,"negative"],[Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_RESEARCH,"research"],[Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_INTERACT,"interact"],[Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE,"holderchange"],[Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2,"holderchange"],[Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_TRUSTHOLDER,"trustholder"],[Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_BLOCKTRADING,"Blocktrading"],[Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_COMPANYNEWS,"companynews"],[Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_TOPMANAGERS,"topmanagers"],[Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_PLEDGE,"Pledge"]]);if(!a.has(t))return void this.Execute.RunNextJob();var i=a.get(t),r=this.StockNewsAnalysisApiUrl+"/"+i+"/"+this.Symbol+".json";n.HttpRequest({url:r,type:"get",dataType:"json",async:!0,success:function(a){e.RecvNewsAnalysisData(a,t),e.Execute.RunNextJob()},error:function(a,i){e.RecvNewsAnalysisDataError(a,i,t),e.Execute.RunNextJob()}})},this.RecvNewsAnalysisDataError=function(t,e,a){Xn.Complier.Log("[JSSymbolData::RecvNewsAnalysisDataError] ajax error.",t.status);for(var i=[],r=0;r<this.Data.Data.length;++r){var n=new Z;n.Date=this.Data.Data[r].Date,n.Value=0,i.push(n)}var o=new tt;o.Data=i,this.NewsAnalysisData.set(a,o.GetValue())},this.RecvNewsAnalysisData=function(t,e){if(t.data&&t.date&&!(t.data.length<=0||t.data.length!=t.date.length))if(Xn.Complier.Log("[JSSymbolData::RecvNewsAnalysisData] jobID",e,t.update),e==Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE||e==Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2){for(var a=[],i=[],r=0;r<t.data.length;++r){var n=new Z;n.Date=t.date[r],n.Value=t.data[r],this.IsNumber(n.Value)&&a.push(n),r<t.data2.length&&(n=new Z,n.Date=t.date[r],n.Value=t.data2[r],this.IsNumber(n.Value)&&i.push(n))}var o=this.Data.GetFittingData2(a,0),s=new tt;s.Data=o,this.NewsAnalysisData.set(Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE,s.GetValue()),o=this.Data.GetFittingData2(i,0),s=new tt,s.Data=o,this.NewsAnalysisData.set(Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2,s.GetValue())}else{for(var a=[],r=0;r<t.data.length;++r){var n=new Z;n.Date=t.date[r],n.Value=t.data[r],a.push(n)}var l=this.Data.GetFittingData2(a,0),s=new tt;s.Data=l,this.NewsAnalysisData.set(e,s.GetValue())}},this.GetSectionFinanceData=function(t){var e=t.SF[0],a=t.SF[1].Period;if(this.SectionFinanceData.has(e))return this.Execute.RunNextJob();Xn.Complier.Log("[JSSymbolData::GetSectionFinanceData] "+a.Year+"-"+a.Quarter);var i="announcement"+a.Quarter,r=this,o=["name","date","symbol",i,"finance"+a.Quarter],s=[i+".year","int32","eq",a.Year.toString()];n.HttpRequest({url:this.StockHistoryDayApiUrl,data:{field:o,symbol:[this.Symbol],condition:[{item:s}]},type:"post",dataType:"json",async:!0,success:function(e){r.RecvSectionFinanceData(e,t),r.Execute.RunNextJob()}})},this.RecvSectionFinanceData=function(t,e){if(t.stock&&1==t.stock.length){var a=t.stock[0];if(a.stockday&&!(a.stockday.length<=0)){var i=a.stockday[0],r=e.SF[1].Period,n=null;if(1===r.Quarter?n=i.finance1:2===r.Quarter?n=i.finance2:3===r.Quarter?n=i.finance3:4===r.Quarter&&(n=i.finance4),n){var t=new Vn.default([[Ko.JOB_DOWNLOAD_SECTION_F_01,n.currentassets],[Ko.JOB_DOWNLOAD_SECTION_F_02,n.monetaryfunds],[Ko.JOB_DOWNLOAD_SECTION_F_03,n.inventory],[Ko.JOB_DOWNLOAD_SECTION_F_04,n.currentliabilities],[Ko.JOB_DOWNLOAD_SECTION_F_05,n.ncurrentliabilities],[Ko.JOB_DOWNLOAD_SECTION_F_06,n.expenses3],[Ko.JOB_DOWNLOAD_SECTION_F_07,n.investmentincome],[Ko.JOB_DOWNLOAD_SECTION_F_08,n.pcnprofit],[Ko.JOB_DOWNLOAD_SECTION_F_09,n.nnetprofit],[Ko.JOB_DOWNLOAD_SECTION_F_10,n.npersearning],[Ko.JOB_DOWNLOAD_SECTION_F_11,n.woewa],[Ko.JOB_DOWNLOAD_SECTION_F_12,n.inprocess],[Ko.JOB_DOWNLOAD_SECTION_F_13,n.accdepreciation],[Ko.JOB_DOWNLOAD_SECTION_F_14,n.mholderprofit],[Ko.JOB_DOWNLOAD_SECTION_F_15,n.lossexchange],[Ko.JOB_DOWNLOAD_SECTION_F_16,n.baddebts],[Ko.JOB_DOWNLOAD_SECTION_F_17,n.fixedassets],[Ko.JOB_DOWNLOAD_SECTION_F_18,n.curdepreciation],[Ko.JOB_DOWNLOAD_SECTION_F_19,n.orevenues],[Ko.JOB_DOWNLOAD_SECTION_F_20,n.moprofit],[Ko.JOB_DOWNLOAD_SECTION_F_21,n.oprofit],[Ko.JOB_DOWNLOAD_SECTION_F_22,n.nprofit],[Ko.JOB_DOWNLOAD_SECTION_F_23,n.areceivable],[Ko.JOB_DOWNLOAD_SECTION_F_24,n.financialcost],[Ko.JOB_DOWNLOAD_SECTION_F_25,n.ccfo],[Ko.JOB_DOWNLOAD_SECTION_F_26,n.totalassets],[Ko.JOB_DOWNLOAD_SECTION_F_27,n.totalliabilities],[Ko.JOB_DOWNLOAD_SECTION_F_28,n.totalownersequity],[Ko.JOB_DOWNLOAD_SECTION_F_29,n.grossmargin],[Ko.JOB_DOWNLOAD_SECTION_F_30,n.percreserve],[Ko.JOB_DOWNLOAD_SECTION_F_31,n.peruprofit],[Ko.JOB_DOWNLOAD_SECTION_F_32,n.persearning],[Ko.JOB_DOWNLOAD_SECTION_F_33,n.pernetasset],[Ko.JOB_DOWNLOAD_SECTION_F_34,n.perccfo],[Ko.JOB_DOWNLOAD_SECTION_F_38,n.alratio],[Ko.JOB_DOWNLOAD_SECTION_F_39,n.profityoy]]);4===r.Quarter&&(t.set(Ko.JOB_DOWNLOAD_SECTION_F_35,n.nnprofitincrease),t.set(Ko.JOB_DOWNLOAD_SECTION_F_36,n.nnprofitspeed),t.set(Ko.JOB_DOWNLOAD_SECTION_F_37,n.nprofitincrease));var o=e.SF[0];this.SectionFinanceData.set(o,t)}}}},this.GetSectionFinanceCacheData=function(t,e,a,i){var r=Ko.GetSectionReportPeriod(t,e);r||this.Execute.ThrowUnexpectedNode(i,"ä¸æ¯æFS("+t+", "+e+", '"+a+"') æ¥åæéè¯¯");var n=Ko.GetSectionFinanceID(a);n||this.Execute.ThrowUnexpectedNode(i,"ä¸æ¯æFS("+t+", "+e+",'"+a+"') è´¢å¡æ°æ®å­æ®µåç§°éè¯¯");var o=r.Year+"-"+r.Quarter;if(!this.SectionFinanceData.has(o)&&!this.ThrowSFPeirod.has(o)){this.ThrowSFPeirod.add(o);var s={ID:Ko.JOB_DOWNLOAD_SECTION_SF,SF:[o,{Period:r,Fields:new Rn.default([n])}]};this.Execute.ThrowDownloadSF(i,s,"FS("+t+", "+e+", '"+a+"') å¨æä¸è½½")}if(!this.SectionFinanceData.has(o))return this.Execute.ThrowUnexpectedNode(i,"ä¸æ¯æFS("+t+", "+e+", '"+a+"') æ²¡æè¿æè´¢å¡æ°æ®");var l=this.SectionFinanceData.get(o);return l.has(n)||this.Execute.ThrowUnexpectedNode(i,"ä¸æ¯æFS("+t+", "+e+", '"+a+"') æ²¡æè¿æè´¢å¡æ°æ®å­æ®µ"),l.get(n)},this.GetStockDataKey=function(t,e){var a=t.FunctionName;if(e.length>0){a+="(";for(var i=0;i<e.length;++i)i>0&&(a+=","),a+=e[i].toString();a+=")"}return a},this.GetFinance=function(t){var e=this.JobArgumentsToArray(t,1),a=e[0],i=this.GetStockDataKey(t,e);if(this.StockData.has(i))return this.Execute.RunNextJob();var r=this;if(this.NetworkFilter){var n=this.Data.GetDateRange(),o={Name:"JSSymbolData::GetFinance",Explain:"è´¢å¡æ°æ®FINANCE(ID)",JobID:t.ID,Request:{Url:r.RealtimeApiUrl,Type:"POST",Data:{id:a,symbol:this.Symbol,daterange:n}},Self:this,PreventDefault:!1};if(this.NetworkFilter(o,function(e){e.Error?r.AddStockValueError(i,e.Error):r.RecvStockValue(e,t,i,0),r.Execute.RunNextJob()}),1==o.PreventDefault)return}new wr({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,RealtimeUrl:this.RealtimeApiUrl,Args:e,DataKey:i,Callback:function(t,e,a){r.RecvStockValue(t,e,a,0),r.Execute.RunNextJob()},ErrorCallback:function(t){r.AddStockValueError(i,t)}}).Download()},this.GetProFinance=function(t){for(var e=t.ID,a=null,i=0;i<zo.length;++i){var r=zo[i];if(r.JobID==e){a=r;break}}if(!a)return this.Execute.RunNextJob();var n=this.JobArgumentsToArray(t,a.ArgCount),o=this.GetStockDataKey(t,n);if(this.StockData.has(o))return this.Execute.RunNextJob();var s=this,l=0;if([Ko.JOB_DOWNLOAD_GPJYVALUE,Ko.JOB_DOWNLOAD_SCJYVALUE,Ko.JOB_DOWNLOAD_BKJYVALUE].includes(e)&&(l=1==n[2]?0:2),this.NetworkFilter){var h=this.Data.GetDateRange(),u={Name:a.FuncName,Explain:a.Explain,JobID:e,Request:{Url:s.StockHistoryDayApiUrl,Type:"POST",Data:{Args:n,symbol:this.Symbol,daterange:h}},Self:this,PreventDefault:!1};if(this.NetworkFilter(u,function(e){s.RecvStockValue(e,t,o,l),s.Execute.RunNextJob()}),1==u.PreventDefault)return}Xn.Chart.Warn("[JSSymbolData::GetProFinance] "+a.FuncName+" Not implemented.")},this.GetVariantData=function(t){var e=t.VariantName;if(this.StockData.has(e))return this.Execute.RunNextJob();var a=this;if(this.NetworkFilter){var i=this.Data.GetDateRange(),r={Name:"JSSymbolData::GetVariantData",Explain:"åéæ°æ®ä¸è½½",JobID:t.ID,Request:{Url:"æ°æ®å°å",Type:"POST",Data:{VariantName:t.VariantName,symbol:this.Symbol,daterange:i}},Self:this,PreventDefault:!1};if(this.NetworkFilter(r,function(i){if(i.Error)a.AddStockValueError(e,i.Error);else{var r=0;we.IsNumber(i.DataType)&&(r=i.DataType),a.RecvStockValue(i.Data,t,e,r)}a.Execute.RunNextJob()}),1==r.PreventDefault)return}var n,o=function(t){a.AddStockValueError(e,t)};if("CAPITAL"==t.VariantName||"TOTALCAPITAL"==t.VariantName||"EXCHANGE"==t.VariantName){var s=function(t,e,i){a.RecvStockValue(t,e,i,0),a.Execute.RunNextJob()};n=new wr({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,RealtimeUrl:this.RealtimeApiUrl,Args:[t.VariantName],DataKey:e,Callback:s,ErrorCallback:o})}else{if("HYBLOCK"!=t.VariantName&&"DYBLOCK"!=t.VariantName&&"GNBLOCK"!=t.VariantName){if("INBLOCK"==t.VariantName){var l=t.VariantName+", è¯·å¯¹æ¥å¤é¨æ°æ®.";return this.AddStockValueError(e,l),void this.Execute.RunNextJob()}var l="ä¸æ¯æåé"+t.VariantName+", è¯·å¯¹æ¥å¤é¨æ°æ®.";return this.AddStockValueError(e,l),void this.Execute.RunNextJob()}var s=function(t,e,i,r){a.RecvStockValue(t,e,i,r),a.Execute.RunNextJob()};n=new Fr({Job:t,Symbol:this.Symbol,Url:this.StockHistoryDayApiUrl,RealtimeUrl:this.RealtimeApiUrl,Args:[t.VariantName],DataKey:e,Callback:s,ErrorCallback:o})}n.Download()},this.GetCustomVariantData=function(t){var e=t.VariantName;if(this.StockData.has(e))return this.Execute.RunNextJob();var a=Go.CustomVariant.Data.get(e),i=this;if(this.NetworkFilter){var r=this.Data.GetDateRange(),n={Name:"JSSymbolData::GetCustomVariantData",Explain:"èªå®ä¹åéæ°æ®ä¸è½½",JobID:t.ID,Request:{Url:"æ°æ®å°å",Type:"POST",Data:{VariantName:t.VariantName,symbol:this.Symbol,daterange:r,period:this.Period,right:this.Right}},Self:this,VariantInfo:a,PreventDefault:!1};this.NetworkFilter(n,function(a){a.Error?i.AddStockValueError(e,a.Error):i.RecvStockValue(a.Data,t,e,a.DataType),i.Execute.RunNextJob()})}else this.AddStockValueError(e,"èªå®ä¹åé"+e+"ä¸è½½å¤±è´¥"),this.Execute.RunNextJob()},this.GetCustomFunctionData=function(t){var e=t.FunctionName,a=Go.CustomFunction.Data.get(e);if(!a.IsDownload)return this.Execute.RunNextJob();if(this.StockData.has(e))return this.Execute.RunNextJob();var i=this;if(this.NetworkFilter){var r=this.Data.GetDateRange(),n={Name:"JSSymbolData::GetCustomFunctionData",Explain:"èªå®ä¹å½æ°æ°æ®ä¸è½½",JobID:t.ID,Request:{Url:"æ°æ®å°å",Type:"POST",Data:{FunctionName:t.FunctionName,symbol:this.Symbol,daterange:r,JobItem:t,period:this.Period,right:this.Right}},Self:this,FunctionInfo:a,PreventDefault:!1};this.NetworkFilter(n,function(a){a.Error?i.AddStockValueError(e,a.Error):i.RecvStockValue(a.Data,t,e,a.DataType),i.Execute.RunNextJob()})}else this.AddStockValueError(e,"èªå®ä¹å½æ°"+e+"ä¸è½½å¤±è´¥"),this.Execute.RunNextJob()},this.GetCustomFunctionDataV2=function(t){var e=t.FunctionName,a=Go.CustomDataFunction.Data.get(e);if(a){var i=this.JobArgumentsToArray(t,a.ArgCount),r=this.GetStockDataKey(t,i);if(this.StockData.has(r))return this.Execute.RunNextJob();var n=this;if(this.NetworkFilter){var o=this.Data.GetDateRange(),s={Name:"JSSymbolData::GetCustomFunctionData",Explain:"èªå®ä¹å½æ°æ°æ®ä¸è½½",JobID:t.ID,Request:{Url:"æ°æ®å°å",Type:"POST",Data:{FunctionName:t.FunctionName,symbol:this.Symbol,daterange:o,JobItem:t,Key:r,period:this.Period,right:this.Right}},Self:this,FunctionInfo:a,PreventDefault:!1};this.NetworkFilter(s,function(e){e.Error?n.AddStockValueError(r,e.Error):n.RecvStockValue(e.Data,t,r,e.DataType),n.Execute.RunNextJob()})}else this.AddStockValueError(r,"èªå®ä¹å½æ°"+r+"ä¸è½½å¤±è´¥"),this.Execute.RunNextJob()}},this.RecvStockValue=function(t,e,a,i){if(!t)return void Xn.Complier.Log("[JSSymbolData::RecvStockValue] key="+a+" data is null");if(0==i)if(Array.isArray(t)){var r,n=this.Data;if(this.DataType==Jo.KLINE_ID)if(tt.IsDayPeriod(this.Period,!0))r=n.GetFittingFinanceData(t);else{if(!tt.IsMinutePeriod(this.Period,!0))return;r=n.GetMinuteFittingFinanceData(t)}else r=n.GetMinuteFittingFinanceData(t);var o=new tt;o.Data=r;var s=o.GetValue();if("EXCHANGE"==a)for(var l in s){var h=n.Data[l];we.IsPlusNumber(s[l])&&(s[l]=h.Vol/s[l]*100)}this.StockData.set(a,{Data:s})}else this.StockData.set(a,{Data:t.Value});else if(1==i)this.StockData.set(a,{Data:t.Value});else if(2==i){var r,n=this.Data;if(this.DataType==Jo.KLINE_ID)if(tt.IsDayPeriod(this.Period,!0))r=n.GetFittingTradeData(t,0);else if(tt.IsMinutePeriod(this.Period,!0))r=n.GetMinuteFittingTradeData(t,0);else{if(!tt.IsTickPeriod(this.Period))return;r=n.GetMinuteFittingTradeData(t,0)}else r=n.GetMinuteFittingTradeData(t,0);var o=new tt;o.Data=r;var s=o.GetValue();this.StockData.set(a,{Data:s})}},this.AddStockValueError=function(t,e){this.StockData.set(t,{Error:e})},this.GetStockCacheData=function(t){var e;if(t.FunctionName)e=this.GetStockDataKey({FunctionName:t.FunctionName},t.Args);else if(t.VariantName)e=t.VariantName;else{if(!t.CustomName)return null;e=t.CustomName}if(!this.StockData.has(e))return null;var a=this.StockData.get(e);return a.Error&&this.Execute.ThrowUnexpectedNode(t.Node,a.Error),a.Data},this.IsInBlock=function(t,e){var a=this.GetStockCacheData({VariantName:"INBLOCK",Node:e});if(!a)return 0;for(var i=a.split("|"),r=0;r<i.length;++r){if(i[r]==t)return 1}return 0},this.JobArgumentsToArray=function(t,e){var a=t.Args;if(a.length!=e){var i=t.Token;this.Execute.ErrorHandler.ThrowError(i.Index,i.Line,0,t.FunctionName+"() Error: argument count error.")}for(var r=[],n=0;n<a.length;++n){var o=a[n];if(we.IsNumber(o))r.push(o);else if(o.Type==Xo.Literal)r.push(o.Value);else if(o.Type==Xo.Identifier){var s=!1;for(var l in this.Arguments){var h=this.Arguments[l];if(h.Name==o.Name){r.push(h.Value),s=!0;break}}if(!s){var i=t.Token;this.Execute.ErrorHandler.ThrowError(i.Index,i.Line,0,t.FunctionName+"() Error: can't read "+o.Name)}}}return r},this.DownloadCustomAPIData=function(t){if(!this.NetworkFilter)return this.Execute.RunNextJob();var e=[];for(var a in t.Args){var i=t.Args[a];if(i.Type==Xo.Literal)e.push(i.Value);else{if(i.Type!=Xo.Identifier)return this.Execute.RunNextJob();var r=!1;for(var n in this.Arguments){var o=this.Arguments[n];if(o.Name==i.Name){e.push(o.Value),r=!0;break}}if(!r){var s=t.Token;this.Execute.ErrorHandler.ThrowError(s.Index,s.Line,0,"LoadAPIData() Error: can't read "+i.Name)}}}var l=this,h={Name:"JSSymbolData::DownloadCustomAPIData",Explain:"ä¸è½½èªå®ä¹apiæ°æ®",Period:this.Period,Right:this.Right,Symbol:this.Symbol,KData:this.Data,Cache:this.CustomAPIData,Args:e,Self:this,PreventDefault:!1};this.NetworkFilter(h,function(t){l.RecvCustomAPIData(t,e),l.Execute.RunNextJob()}),1!=h.PreventDefault&&this.Execute.RunNextJob()},this.RecvCustomAPIData=function(t,e){t&&(1==t.Type?this.RecvCustomAPISingleData(t,e):this.RecvCustomAPIGroupData(t,e))},this.RecvCustomAPIGroupData=function(t,e){if(t&&t.data){var a=t.data,i=this.GenerateCustomAPIKey(e);if(tt.IsMinutePeriod(this.Period,!0)){if(!a.date||!a.time)return;var r=a.date;a.time;for(var n in a)if("date"!=n&&"time"!=n)var o=a[n]}else if(tt.IsDayPeriod(this.Period,!0)){if(!a.date)return;var r=a.date,s={__Type__:"Object"};for(var n in a)if("date"!=n){var o=a[n];if(Array.isArray(o)){var l=this.FittingCustomAPIArray(o,r);s[n]=l}else this.IsNumber(o)&&(s[n]=o)}this.CustomAPIData.set(i,s)}}},this.RecvCustomAPISingleData=function(t,e){var a=t.data,i=this.GenerateCustomAPIKey(e);if(tt.IsMinutePeriod(this.Period,!0)){if(!a.date||!a.time)return;var r=a.date;a.time;for(var n in a)if("date"!=n&&"time"!=n){a[n]}}else if(tt.IsDayPeriod(this.Period,!0)){if(!a.date)return;var r=a.date,o=a.value,s=null;s=Array.isArray(o)?1==t.DataType?this.FittingCustomAPIFinanceArray(o,r):this.FittingCustomAPIArray(o,r):o,this.CustomAPIData.set(i,s)}},this.FittingCustomAPIFinanceArray=function(t,e,a){var i=this.Data,r=[];for(var n in t){var o=t[n],s=new Z;s.Date=e[n],a&&n<a.length&&(s.Time=a[n]),s.Value=o,r.push(s)}var l;if(tt.IsDayPeriod(this.Period,!0))l=i.GetFittingFinanceData(r);else{if(!tt.IsMinutePeriod(this.Period,!0))return null;l=i.GetMinuteFittingFinanceData(r)}var h=new tt;return h.Data=l,h.GetValue()},this.FittingCustomAPIArray=function(t,e,a){var i=this.Data,r=[];for(var n in t){var o=t[n],s=new Z;s.Date=e[n],a&&n<a.length&&(s.Time=a[n]),s.Value=o,r.push(s)}var l;if(tt.IsDayPeriod(this.Period,!0))l=i.GetFittingData(r);else{if(!tt.IsMinutePeriod(this.Period,!0))return null;l=i.GetMinuteFittingData(r)}var h=new tt;return h.Data=l,h.GetValue()},this.GenerateCustomAPIKey=function(t){if(t.length<=0)return"__12_EMPTY_ARGS__";var e="";for(var a in t)e.length>0&&(e+=","),e+=t[a];return e},this.GetCustomApiData=function(t){var e=this.GenerateCustomAPIKey(t);return this.CustomAPIData.has(e)?this.CustomAPIData.get(e):(Xn.Complier.Log("[JSSymbolData::GetCustomApiData] can't find api data key=["+e+"]"),null)},this.ReadArgumentValue=function(t,e){if(e.Name=t.Name,t.Type==Xo.Literal)return e.Value=t.Value,!0;if(t.Type==Xo.Identifier){var a=!1;for(var i in this.Arguments){var r=this.Arguments[i];if(r.Name==t.Name)return e.Value=r.Value,a=!0,!0}if(!a)return e.Error="can't read "+t.Name,!1}return e.Error="can't read "+t.Name+", type error.",!1},this.ReadIndexFunctionOut=function(t,e){var a={};if("object"===(void 0===t?"undefined":(0,Ln.default)(t))){if(!this.ReadArgumentValue(t,a))return e.Error=a.Error,!1}else a.Value=t;return e.OutIndex=a.Value,e.Out=null,!0},this.ReadIndexFunctionValue=function(t,e){var a={};if("object"===(void 0===t?"undefined":(0,Ln.default)(t))){if(!this.ReadArgumentValue(t,a))return e.Error=a.Error,!1}else a.Value=t;var i=a.Value.indexOf(".");if(-1!=i){e.Name=a.Value.slice(0,i);var r=a.Value.indexOf("#",i+1);-1!=r?(e.Out=a.Value.slice(i+1,r),e.Period=a.Value.slice(r+1)):e.Out=a.Value.slice(i+1)}else{var r=a.Value.indexOf("#");-1!=r?(e.Name=a.Value.slice(0,r),e.Period=a.Value.slice(r+1)):e.Name=a.Value}var n=new Vn.default([["DAY",0],["WEEK",1],["MONTH",2],["SEASON",9],["YEAR",3],["HALFYEAR",22],["WEEK2",21],["MIN1",4],["MIN5",5],["MIN15",6],["MIN30",7],["MIN60",8],["MIN120",11],["MIN240",12],["DAY2",40002],["MULTIDAY",40002],["DAY3",40003],["DAY4",40004],["DAY5",40005],["DAY6",40006],["DAY7",40007],["DAY8",40008],["DAY9",40009],["DAY10",40010],["DAY11",40011],["DAY12",40012],["DAY13",40013],["DAY14",40014],["DAY15",40015]]);if(e.Period){if(!n.has(e.Period))return e.Error=e.Period+", å¨æéè¯¯",!1;e.PeriodID=n.get(e.Period)}return!0},this.ReadSymbolArgumentValue=function(t,e){var a={};if("object"===(void 0===t?"undefined":(0,Ln.default)(t))){if(!this.ReadArgumentValue(t,a))return e.Error=a.Error,!1}else a.Value=t;""==a.Value&&(a.Value=this.Symbol);var i=a.Value;return i.indexOf(".SH")>0?e.Symbol=i.replace(".SH",".sh"):i.indexOf(".SZ")>0?e.Symbol=i.replace(".SZ",".sz"):0==i.indexOf("SH")?e.Symbol=i.slice(2)+".sh":0==i.indexOf("SZ")?e.Symbol=i.slice(2)+".sz":e.Symbol=i,!0},this.ReadIndexArgumentValue=function(t,e){e.Args=[];for(var a in e.SytemIndex.Args){var i=e.SytemIndex.Args[a];e.Args.push({Value:i.Value,Name:i.Name})}if(t.length>2&&e.SytemIndex.Args&&e.SytemIndex.Args.length>0)for(var a=2,r=0;a<t.length&&r<e.SytemIndex.Args.length;++a,++r){var n={},i=t[a];if("object"===(void 0===i?"undefined":(0,Ln.default)(i))){if(!this.ReadArgumentValue(i,n))return e.Error=n.Error,!1}else n.Value=i;e.Args[r].Value=n.Value}return!0},this.GenerateScriptIndexKey=function(t){var e="",a=t.Args;for(var i in a){e.length>0&&(e+=",");e+=a[i].Value.toString()}var r="ALL";return t.Out?r=t.Out:we.IsPlusNumber(t.OutIndex)&&(r="Out["+(t.OutIndex-1)+"]"),"("+t.Symbol+","+t.PeriodID+"), "+t.Name+"("+e+")=>"+r},this.CallMemberScriptIndex=function(t){var e=this;if(t.Member.Object.Type!=Xo.Identifier||t.Member.Property.Type!=Xo.Identifier){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallMemberScriptIndex() Error: åæ°éè¯¯")}var i=t.Member.Object.Name,r=t.Member.Property.Name;if(""==r||null==r){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallMemberScriptIndex() Error: "+i+"."+r+" ææ è¾åºåééè¯¯")}if(this.Execute.VarTable.has(i)){if(this.Execute.VarTable.get(i).hasOwnProperty(r))return Xn.Complier.Log("[JSSymbolData::CallMemberScriptIndex] index data "+i+"."+r+" in cache."),this.Execute.RunNextJob()}var n=i+"."+r,o={Job:t,PeriodID:this.Period,Symbol:this.Symbol};if(!this.ReadIndexFunctionValue(n,o)){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallMemberScriptIndex() Error: '"+n+"' "+o.Error)}var l=new s,h=l.Get(o.Name);if(!h){var a=t.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallMemberScriptIndex() Error: '"+n+"' "+o.Name+" ææ ä¸å­å¨")}if(Array.isArray(h.Args)&&h.Args.length>0){o.Args=[];for(var u in h.Args){var C=h.Args[u];o.Args.push({Value:C.Value,Name:C.Name})}}Xn.Complier.Log("[JSSymbolData::CallMemberScriptIndex] call script index",o);var c=this.Data.GetDateRange(),f={HQDataType:this.DataType,Symbol:o.Symbol,Name:"",Right:this.Right,Period:o.PeriodID,Data:null,SourceData:null,Callback:function(t,a,i){e.RecvMemberScriptIndexData(t,a,i),e.Execute.RunNextJob()},CallbackParam:o,Async:!0,MaxRequestDataCount:this.MaxRequestDataCount+60,MaxRequestMinuteDayCount:this.MaxRequestMinuteDayCount+2,Arguments:o.Args,IsBeforeData:this.IsBeforeData,NetworkFilter:this.NetworkFilter,IsApiPeriod:this.IsApiPeriod,KLineRange:c};Tr.Execute(h.Script,f,function(t,a){e.ExecuteScriptIndexError(t,a)})},this.CallDynamicScriptIndex=function(t,e){var a=this,i=t.DynamicName,r={Job:t,PeriodID:this.Period,Symbol:this.Symbol};if(!this.ReadIndexFunctionValue(i,r)){var n=t.Token;this.Execute.ErrorHandler.ThrowError(n.Index,n.Line,0,"CallDynamicScriptIndex() Error: '"+i+"' "+r.Error)}var o=new s,l=o.Get(r.Name);if(!l){var n=t.Token;this.Execute.ErrorHandler.ThrowError(n.Index,n.Line,0,"CallDynamicScriptIndex() Error: '"+i+"' "+r.Name+" ææ ä¸å­å¨")}if(r.SytemIndex=l,!this.ReadDynamicIndexArgumentValue(t.Args,r,e)){var n=t.Token;this.Execute.ErrorHandler.ThrowError(n.Index,n.Line,0,"CallDynamicScriptIndex() "+r.Name+" ææ åæ°éè¯¯ : "+r.Error+" ")}Xn.Complier.Log("[JSSymbolData::CallMemberScriptIndex] call script index",r);var h=this.Data.GetDateRange(),u={HQDataType:this.DataType,Symbol:r.Symbol,Name:"",Right:this.Right,Period:r.PeriodID,Data:null,SourceData:null,Callback:function(t,e,i){a.RecvDynamicScriptIndexData(t,e,i),a.Execute.RunNextJob()},CallbackParam:r,Async:!0,MaxRequestDataCount:this.MaxRequestDataCount+60,MaxRequestMinuteDayCount:this.MaxRequestMinuteDayCount+2,Arguments:r.Args,IsBeforeData:this.IsBeforeData,NetworkFilter:this.NetworkFilter,IsApiPeriod:this.IsApiPeriod,KLineRange:h};Tr.Execute(l.Script,u,function(t,e){a.ExecuteScriptIndexError(t,e)})},this.ReadDynamicIndexArgumentValue=function(t,e,a){e.Args=[];for(var i=0;i<e.SytemIndex.Args.length;++i){var r=e.SytemIndex.Args[i];e.Args.push({Value:r.Value,Name:r.Name,IsDefault:!0})}if(!we.IsNonEmptyArray(t))return!0;for(var i=0;i<t.length;++i){var r=t[i],n=e.Args[i];n&&(r.Type==Xo.Literal?(n.Value=r.Value,n.IsDefault=!1):r.Type==Xo.Identifier&&a.has(r.Name)&&(n.Value=a.get(r.Name),n.IsDefault=!1))}return!0},this.CallScriptIndex=function(t,e){var a=this;if(t.Member)return this.CallMemberScriptIndex(t);if(t.DynamicName)return this.CallDynamicScriptIndex(t,e);if(!(t.Args&&t.Args.length>=2)){var i=t.Token;this.Execute.ErrorHandler.ThrowError(i.Index,i.Line,0,"CallScriptIndex() Error: "+t.FunctionName+" åæ°éè¯¯")}var r={Job:t,PeriodID:this.Period};if(!this.ReadSymbolArgumentValue(t.Args[0],r)){var i=t.Token;this.Execute.ErrorHandler.ThrowError(i.Index,i.Line,0,"CallScriptIndex() Error: "+r.Error)}if(!this.ReadIndexFunctionValue(t.Args[1],r)){var i=t.Token;this.Execute.ErrorHandler.ThrowError(i.Index,i.Line,0,"CallScriptIndex() Error: "+r.Error)}if("CALCSTOCKINDEX"==t.FunctionName&&!this.ReadIndexFunctionOut(t.Args[2],r)){var i=t.Token;this.Execute.ErrorHandler.ThrowError(i.Index,i.Line,0,"CallScriptIndex() Error: "+r.Error)}var n=new s,o=n.Get(r.Name);if(!o){var i=t.Token;this.Execute.ErrorHandler.ThrowError(i.Index,i.Line,0,"CallScriptIndex() "+r.Name+" ææ ä¸å­å¨")}if(r.SytemIndex=o,!this.ReadIndexArgumentValue(t.Args,r)){var i=t.Token;this.Execute.ErrorHandler.ThrowError(i.Index,i.Line,0,"CallScriptIndex() "+r.Name+" ææ åæ°éè¯¯ : "+r.Error+" ")}Xn.Complier.Log("[JSSymbolData::CallScriptIndex] call script index",r);var l=null;if(this.Data&&this.Data.Data.length>0){var h=this.Data.Data[0],u=this.Data.Data[this.Data.Data.length-1];l={Start:{Date:h.Date,Time:h.Time},End:{Date:u.Date,Time:u.Time}}}var C={HQDataType:this.DataType,Symbol:r.Symbol,Name:"",Right:this.Right,Period:r.PeriodID,Data:null,SourceData:null,Callback:function(t,e,i){a.RecvScriptIndexData(t,e,i),a.Execute.RunNextJob()},CallbackParam:r,Async:!0,MaxRequestDataCount:this.MaxRequestDataCount+60,MaxRequestMinuteDayCount:this.MaxRequestMinuteDayCount+2,Arguments:r.Args,IsBeforeData:this.IsBeforeData,NetworkFilter:this.NetworkFilter,IsApiPeriod:this.IsApiPeriod,KLineRange:l};Tr.Execute(r.SytemIndex.Script,C,function(t,e){a.ExecuteScriptIndexError(t,e)})},this.RecvMemberScriptIndexData=function(t,e,a){Xn.Complier.Log("[JSSymbolData::RecvMemberScriptIndexData] ",t,e,a);var i=a.Data.Data,r=t,n=this.Data.FitKLineIndex(i,r,this.Period,e.PeriodID),o=e.Job.Member,s=o.Object.Name,l=(o.Property.Name,{});this.Execute.VarTable.has(s)?l=this.Execute.VarTable.get(s):this.Execute.VarTable.set(s,l);for(var h in n){var u=t[h].Name;e.Period&&(u+="#"+e.Period),l[u]=n[h].Data}},this.RecvDynamicScriptIndexData=function(t,e,a){Xn.Complier.Log("[JSSymbolData::RecvDynamicScriptIndexData] ",t,e,a);var i=a.Data.Data,r=t,n=this.Data.FitKLineIndex(i,r,this.Period,e.PeriodID),o=e.Name,s={};this.Execute.VarTable.has(o)?s=this.Execute.VarTable.get(o):this.Execute.VarTable.set(o,s);for(var l="",h=0;h<e.Args.length;++h){var u=e.Args[h];!1===u.IsDefault&&(l.length>0&&(l+=","),l+=""+u.Value)}for(var C="("+l+")",h=0;h<n.length;++h){var c=t[h].Name+"#"+C;e.Period&&(c+="#"+e.Period),s[c]=n[h].Data}},this.RecvScriptIndexData=function(t,e,a){var i=this.GenerateScriptIndexKey(e);Xn.Complier.Log("[JSSymbolData::RecvScriptIndexData] ",t,e,a,i);var r=a.Data.Data,n=t;if(e.Out){for(var o=0;o<t.length;++o){var s=t[o];if(s.Name==e.Out){n=[s];break}}var l=this.Data.FitKLineIndex(r,n,this.Period,e.PeriodID);this.ScriptIndexOutData.set(i,l[0].Data)}else if(we.IsPlusNumber(e.OutIndex)){var h=e.OutIndex-1;n=[t[h]];var l=this.Data.FitKLineIndex(r,n,this.Period,e.PeriodID);this.ScriptIndexOutData.set(i,l[0].Data)}else{var l=this.Data.FitKLineIndex(r,n,this.Period,e.PeriodID),u={__Type__:"Object"};for(var o in l){var s=l[o];u[s.Name]=s.Data}this.ScriptIndexOutData.set(i,u)}},this.ExecuteScriptIndexError=function(t,e){var a=e.Job.Token;this.Execute.ErrorHandler.ThrowError(a.Index,a.Line,0,"CallScriptIndex() "+e.Name+" ææ æ§è¡éè¯¯ : "+t+" ")},this.GetScriptIndexOutData=function(t,e,a){var i={PeriodID:this.Period};this.ReadSymbolArgumentValue(t[0],i)||this.Execute.ThrowUnexpectedNode(e,a+"() è¡ç¥¨ä»£ç éè¯¯: "+i.Error),this.ReadIndexFunctionValue(t[1],i)||this.Execute.ThrowUnexpectedNode(e,a+"() ææ éè¯¯: "+i.Error),"CALCSTOCKINDEX"==a&&(this.ReadIndexFunctionOut(t[2],i)||this.Execute.ThrowUnexpectedNode(e,a+"() Error: "+i.Error));var r=new s,n=r.Get(i.Name);n||this.Execute.ThrowUnexpectedNode(e,a+"() ææ éè¯¯: "+i.Name+" ææ ä¸å­å¨"),i.SytemIndex=n,this.ReadIndexArgumentValue(t,i)||this.Execute.ThrowUnexpectedNode(e,a+"()  ææ åæ°éè¯¯: "+i.Error);var o=this.GenerateScriptIndexKey(i);return this.ScriptIndexOutData.has(o)?this.ScriptIndexOutData.get(o):null},this.JsonDataToHistoryData=function(t){for(var e=t.data,a=new Array,i=0;i<e.length;++i){var r=new K;r.Date=e[i][0],r.Open=e[i][2],r.YClose=e[i][1],r.Close=e[i][5],r.High=e[i][3],r.Low=e[i][4],r.Vol=e[i][6],r.Amount=e[i][7],e[i].length>8&&(r.Up=e[i][8]),e[i].length>9&&(r.Down=e[i][9]),e[i].length>10&&(r.Stop=e[i][10]),e[i].length>11&&(r.Unchanged=e[i][11]),isNaN(r.Open)||r.Open<=0||a.push(r)}return a},this.JsonDataToMinuteHistoryData=function(t){for(var e=t.data,a=new Array,i=0;i<e.length;++i){var r=new K;r.Date=e[i][0],r.Open=e[i][2],r.YClose=e[i][1],r.Close=e[i][5],r.High=e[i][3],r.Low=e[i][4],r.Vol=e[i][6],r.Amount=e[i][7],r.Time=e[i][8],a.push(r)}for(var n=0;n<a.length;++n){var o=a[n];if(null==o&&coninue,isNaN(o.Open)||o.Open<=0||isNaN(o.High)||o.High<=0||isNaN(o.Low)||o.Low<=0||isNaN(o.Close)||o.Close<=0||isNaN(o.YClose)||o.YClose<=0)if(0==n)o.YClose>0&&(o.Open=o.YClose,o.High=o.YClose,o.Low=o.YClose,o.Close=o.YClose);else for(var s=n-1;s>=0;--s){var l=a[s];if(null==l&&coninue,l.Open>0&&l.High>0&&l.Low>0&&l.Close>0){o.YClose<=0&&(o.YClose=l.Close),o.Open=l.Open,o.High=l.High,o.Low=l.Low,o.Close=l.Close;break}}}return a},this.JsonDataToMinuteData=function(t){var e=new Array;for(var a in t.stock[0].minute){var i=t.stock[0].minute[a],r=new z;r.Close=i.price,r.Open=i.open,r.High=i.high,r.Low=i.low,r.Vol=i.vol,r.Amount=i.amount,r.DateTime=0==a?t.stock[0].date.toString()+" 0925":t.stock[0].date.toString()+" "+i.time.toString(),r.Date=t.stock[0].date,r.Time=i.time,r.Increase=i.increase,r.Risefall=i.risefall,r.AvPrice=i.avprice,e[a]=r}return e},this.JsonDataToMultiDayMinuteData=function(t){var e=t.symbol,a=e.toUpperCase(),i=wo.IsSHSZ(a),r=(wo.IsChinaFutures(a),[]);for(var n in t.data){var o=[],s=t.data[n],l=s.date,h=s.yclose,u=h,C=null;for(var c in s.minute){var f=s.minute[c];f[2]&&(u=f[2]);var d=new z;d.Close=f[2],d.Open=f[1],d.High=f[3],d.Low=f[4],d.Vol=f[5]/100,d.Amount=f[6],7<f.length&&f[7]>0&&(d.AvPrice=f[7],C=f[7]),d.DateTime=l.toString()+" "+f[0].toString(),d.Date=l,d.Time=f[0],d.Close||(d.Close=u,d.Open=d.High=d.Low=d.Close),!d.AvPrice&&C&&(d.AvPrice=C),d.Close&&h?d.Increase=(d.Close-h)/h*100:d.Increase=null,0==c&&(i&&(d.DateTime=l.toString()+" 0925"),d.IsFristData=!0),d.Open<=0&&(d.Open=null),d.Close<=0&&(d.Close=null),d.AvPrice<=0&&(d.AvPrice=null),d.High<=0&&(d.High=null),d.Low<=0&&(d.Low=null),d.AvPrice<=0&&(d.AvPrice=null),o[c]=d}var D=new tt;D.Data=o,D.YClose=h,D.Close=s.close,D.Date=l,r.push(D)}for(var o=[],n=r.length-1;n>=0;--n){var d=r[n];for(var c in d.Data)o.push(d.Data[c])}return o},this.CODELIKE=function(t){return this.Symbol&&0==this.Symbol.indexOf(t)?1:0},this.NAMELIKE=function(t){return this.Name&&0==this.Name.indexOf(t)?1:0},this.SETCODE=function(){return this.Symbol.indexOf(".sh")?1:(this.Symbol.indexOf(".sz"),0)},this.GetSymbol=function(){return this.Symbol},this.GetName=function(){return this.Name},this.DATE=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];t[e]=a.Date-19e6}return t},this.YEAR=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];this.IsNumber(a.Date)?t[e]=parseInt(a.Date/1e4):t[e]=null}return t},this.DAY=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];this.IsNumber(a.Date)?t[e]=parseInt(a.Date%100):t[e]=null}return t},this.MONTH=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];this.IsNumber(a.Date)?t[e]=parseInt(a.Date%1e4/100):t[e]=null}return t},this.TIME=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=0;e<this.Data.Data.length;++e){var a=this.Data.Data[e];this.IsNumber(a.Time)?t[e]=a.Time:t[e]=0}return t},this.TIME2=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=0;e<this.Data.Data.length;++e){var a=this.Data.Data[e];this.IsNumber(a.Time)?t[e]=100*a.Time:t[e]=0}return t},this.DateTime=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=tt.IsMinutePeriod(this.Period,!0),a=0;a<this.Data.Data.length;++a){var i=this.Data.Data[a];t[a]=e?1e4*i.Date+i.Time:i.Date}return t},this.WEEK=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;var e=new Date;for(var a in this.Data.Data){var i=this.Data.Data[a];if(t[a]=null,this.IsNumber(i.Date)){var r=parseInt(i.Date/1e4),n=parseInt(i.Date%1e4/100),o=i.Date%100;e.setFullYear(r,n-1,o),t[a]=e.getDay()}}return t},this.DAYSTOTODAY=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e=new Date,a=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=0;i<this.Data.Data.length;++i){var r=this.Data.Data[i];if(t[i]=null,this.IsNumber(r.Date)){var n=parseInt(r.Date/1e4),o=parseInt(r.Date%1e4/100),s=r.Date%100,l=new Date(n,o-1,s),h=Math.ceil((a-l)/864e5);t[i]=h}}return t},this.WEEKOFYEAR=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data){var a=this.Data.Data[e];if(t[e]=null,this.IsNumber(a.Date)){var i=parseInt(a.Date/1e4),r=parseInt(a.Date%1e4/100),n=a.Date%100,o=new Date(i,r-1,n),s=new Date(i,0,1),l=Math.ceil((o-s)/864e5);l+=s.getDay()+1-1;var h=Math.ceil(l/7),u=h;t[e]=u}}return t},this.GetYearWeek=function(t){var e=new Date(t.getFullYear(),0,1),a=t.getDay();0==a&&(a=7);var i=e.getDay();0==i&&(i=7);var r=t.getTime()-e.getTime(),n=Math.floor((r+864e5*(i-a))/864e5);return Math.ceil(n/7)+1},this.REFDATE=function(t,e){var a=null;if(Array.isArray(e)?e.length>0&&(a=e[e.length-1]):this.IsNumber(e)&&(a=e),null==a)return null;a<5e6&&(a+=19e6);var i=null;for(var r in this.Data.Data)if(this.Data.Data[r].Date==a){i=parseInt(r);break}return null==i||i>=t.length?null:t[i]},this.PERIOD=function(){var t=[5,6,7,11,0,1,2,3,4,5,9];return this.Period>=0&&this.Period<=t.length-1?t[this.Period]:this.Period},this.GetDrawNull=function(){var t=[];if(!this.Data||!this.Data.Data||!this.Data.Data.length)return t;for(var e in this.Data.Data)t[e]=null;return t},this.HOUR=function(){var t=[];if(!this.Data||!this.Data.Data||!we.IsNonEmptyArray(this.Data.Data))return t;for(var e=0;e<this.Data.Data.length;++e){var a=this.Data.Data[e];t[e]=0,we.IsNumber(a.Time)&&(t[e]=parseInt(a.Time/100))}return t},this.MINUTE=function(){var t=[];if(!this.Data||!this.Data.Data||!we.IsNonEmptyArray(this.Data.Data))return t;for(var e=0;e<this.Data.Data.length;++e){var a=this.Data.Data[e];t[e]=0,we.IsNumber(a.Time)&&(t[e]=a.Time%100)}return t},this.SysParam=function(t,e){if(!this.DrawInfo)return[];if(2==t){if(e.IsUsePageData=!0,we.IsNumber(this.DrawInfo.Start))return this.DrawInfo.Start+1}else if(3==t){if(e.IsUsePageData=!0,we.IsNumber(this.DrawInfo.End))return this.DrawInfo.End+1}else{if(4==t){if(e.IsUsePageData=!0,!we.IsNumber(this.DrawInfo.End)||!we.IsNumber(this.DrawInfo.Start))return[];if(!this.Data||!we.IsNonEmptyArray(this.Data.Data))return[];for(var a=null,i=this.DrawInfo.Start;i<=this.DrawInfo.End&&i<this.Data.Data.length;++i){var r=this.Data.Data[i];we.IsNumber(r.High)&&(null==a?a=r.High:a<r.High&&(a=r.High))}return a}if(5==t){if(e.IsUsePageData=!0,!we.IsNumber(this.DrawInfo.End)||!we.IsNumber(this.DrawInfo.Start))return[];if(!this.Data||!we.IsNonEmptyArray(this.Data.Data))return[];for(var n=null,i=this.DrawInfo.Start;i<=this.DrawInfo.End&&i<this.Data.Data.length;++i){var r=this.Data.Data[i];we.IsNumber(r.Low)&&(null==n?n=r.Low:n>r.Low&&(n=r.Low))}return n}}return[]}}function vr(t,e){var a=this;this.AST=t,this.ErrorHandler=new ur,this.VarTable=new Vn.default,this.VarDrawTable=new Vn.default,this.OutVarTable=[],this.Arguments=[],this.ErrorCallback,this.GetEventCallback,this.IsUsePageData=!1,this.IndexCtrl,this.Debug=0,this.DebugFilter,this.Interrupt={Exit:!1},this.ConstVarTable=new Vn.default([["CLOSE",null],["VOL",null],["OPEN",null],["HIGH",null],["LOW",null],["AMOUNT",null],["C",null],["V",null],["O",null],["H",null],["L",null],["AMO",null],["VOLR",null],["VOLINSTK",null],["OPI",null],["QHJSJ",null],["SETTLE",null],["ZSTJJ",null],["ISEQUAL",null],["ISUP",null],["ISDOWN"],["DATE",null],["YEAR",null],["MONTH",null],["PERIOD",null],["WEEK",null],["WEEKDAY",null],["TIME",null],["DAY",null],["DATETIME",null],["TIME2",null],["WEEKOFYEAR",null],["DAYSTOTODAY",null],["HOUR",null],["MINUTE",null],["INDEXA",null],["INDEXC",null],["INDEXH",null],["INDEXL",null],["INDEXO",null],["INDEXV",null],["INDEXADV",null],["INDEXDEC",null],["ADVANCE",null],["DECLINE",null],["FROMOPEN",null],["TOTALFZNUM",null],["CURRBARSCOUNT",null],["TOTALBARSCOUNT",null],["ISLASTBAR",null],["BARSTATUS",null],["BARPOS",null],["CAPITAL",null],["TOTALCAPITAL",null],["EXCHANGE",null],["SETCODE",null],["CODE",null],["STKNAME",null],["TQFLAG",null],["HYBLOCK",null],["DYBLOCK",null],["GNBLOCK",null],["FGBLOCK",null],["ZSBLOCK",null],["ZHBLOCK",null],["ZDBLOCK",null],["HYZSCODE",null],["GNBLOCKNUM",null],["FGBLOCKNUM",null],["ZSBLOCKNUM",null],["ZHBLOCKNUM",null],["ZDBLOCKNUM",null],["HYSYL",null],["HYSJL",null],["DRAWNULL",null],["NULL",null],["MACHINEDATE",null],["MACHINETIME",null],["MACHINEWEEK",null],["TR",null],["AUTOFILTER",null],["LARGEINTRDVOL",null],["LARGEOUTTRDVOL",null],["TRADENUM",null],["TRADEINNUM",null],["TRADEOUTNUM",null],["LARGETRDINNUM",null],["LARGETRDOUTNUM",null],["CUR_BUYORDER",null],["CUR_SELLORDER",null],["ACTINVOL",null],["ACTOUTVOL",null],["BIDORDERVOL",null],["BIDCANCELVOL",null],["AVGBIDPX",null],["OFFERORDERVOL",null],["OFFERCANCELVOL",null],["AVGOFFERPX",null]]),this.SymbolData=new pr(this.AST,e,this),this.Algorithm=new Dr(this.ErrorHandler,this.SymbolData),this.Draw=new mr(this.ErrorHandler,this.SymbolData),this.JobList=[],this.UpdateUICallback=null,this.CallbackParam=null,this.IsSectionMode=!1,e&&(e.Callback&&(this.UpdateUICallback=e.Callback),e.CallbackParam&&(this.CallbackParam=e.CallbackParam,this.CallbackParam.HQChart&&(this.GetEventCallback=function(t){return a.CallbackParam.HQChart.GetEventCallback(t)})),e.Arguments&&(this.Arguments=e.Arguments),e.IsSectionMode&&(this.IsSectionMode=e.IsSectionMode),e.Self&&(this.IndexCtrl=e.Self),we.IsNumber(e.Debug)&&(this.Debug=e.Debug),e.DebugFilter&&(this.DebugFilter=e.DebugFilter)),this.Execute=function(){this.OutVarTable=[],this.VarTable=new Vn.default,this.VarDrawTable=new Vn.default,Xn.Complier.Log("[JSExecute::Execute] Load Arguments",this.Arguments);for(var t in this.Arguments){var e=this.Arguments[t];this.VarTable.set(e.Name,e.Value)}this.RunNextJob()},this.RunNextJob=function(){if(!(this.JobList.length<=0)){Xn.Complier.Log("[JSExecute::Execute] JobList",this.JobList);var t=this.JobList.shift();switch(t.ID){case Ko.JOB_DOWNLOAD_SYMBOL_DATA:return this.SymbolData.GetSymbolData();case Ko.JOB_DOWNLOAD_SYMBOL_PERIOD_DATA:return this.SymbolData.GetSymbolPeriodData(t);case Ko.JOB_DOWNLOAD_INDEX_DATA:return this.SymbolData.GetIndexData();case Ko.JOB_DOWNLOAD_LATEST_INDEX_DATA:return this.SymbolData.GetLatestIndexData();case Ko.JOB_DOWNLOAD_INDEX_INCREASE_DATA:return this.SymbolData.GetIndexIncreaseData(t);case Ko.JOB_DOWNLOAD_SYMBOL_LATEST_DATA:return this.SymbolData.GetLatestData(t);case Ko.JOB_DOWNLOAD_VOLR_DATA:return this.SymbolData.GetVolRateData(t);case Ko.JOB_DOWNLOAD_OTHER_SYMBOL_DATA:return this.SymbolData.GetOtherSymbolData(t);case Ko.JOB_DOWNLOAD_RELEASE_DATE_DATA:return this.SymbolData.GetCompanyReleaseDate(t.ID);case Ko.JOB_DOWNLOAD_MARGIN_BALANCE:case Ko.JOB_DOWNLOAD_MARGIN_RATE:case Ko.JOB_DOWNLOAD_MARGIN_BUY_BALANCE:case Ko.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT:case Ko.JOB_DOWNLOAD_MARGIN_BUY_REPAY:case Ko.JOB_DOWNLOAD_MARGIN_BUY_NET:case Ko.JOB_DOWNLOAD_MARGIN_SELL_BALANCE:case Ko.JOB_DOWNLOAD_MARGIN_SELL_VOLUME:case Ko.JOB_DOWNLOAD_MARGIN_SELL_REPAY:case Ko.JOB_DOWNLOAD_MARGIN_SELL_NET:return this.SymbolData.GetMarginData(t.ID);case Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_NEGATIVE:case Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_RESEARCH:case Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_INTERACT:case Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE:case Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2:case Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_TRUSTHOLDER:case Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_BLOCKTRADING:case Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_COMPANYNEWS:case Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_TOPMANAGERS:case Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_PLEDGE:return this.SymbolData.GetNewsAnalysisData(t.ID);case Ko.JOB_DOWNLOAD_HK_TO_SHSZ:return this.SymbolData.GetHKToSHSZData(t);case Ko.JOB_DOWNLOAD_SECTION_SF:return this.SymbolData.GetSectionFinanceData(t);case Ko.JOB_DOWNLOAD_FINANCE:return this.SymbolData.GetFinance(t);case Ko.JOB_DOWNLOAD_FINONE:case Ko.JOB_DOWNLOAD_FINVALUE:case Ko.JOB_DOWNLOAD_GPJYVALUE:case Ko.JOB_DOWNLOAD_GPJYONE:case Ko.JOB_DOWNLOAD_SCJYVALUE:case Ko.JOB_DOWNLOAD_SCJYONE:case Ko.JOB_DOWNLOAD_BKJYVALUE:case Ko.JOB_DOWNLOAD_BKJYONE:return this.SymbolData.GetProFinance(t);case Ko.JOB_DOWNLOAD_VARIANT:return this.SymbolData.GetVariantData(t);case Ko.JOB_CUSTOM_VARIANT_DATA:return this.SymbolData.GetCustomVariantData(t);case Ko.JOB_CUSTOM_FUNCTION_DATA:return this.SymbolData.GetCustomFunctionData(t);case Ko.JOB_CUSTOM_DATA_FUNCTION:return this.SymbolData.GetCustomFunctionDataV2(t);case Ko.JOB_DOWNLOAD_CUSTOM_API_DATA:return this.SymbolData.DownloadCustomAPIData(t);case Ko.JOB_EXECUTE_INDEX:return this.SymbolData.CallScriptIndex(t,this.VarTable);case Ko.JOB_RUN_SCRIPT:return 1===this.Debug&&this.DebugFilter?this.DebugRun():this.Run()}}},this.ReadSymbolData=function(t,e){switch(t){case"CLOSE":case"C":case"VOL":case"V":case"OPEN":case"O":case"HIGH":case"H":case"LOW":case"L":case"AMOUNT":case"AMO":case"OPI":case"VOLINSTK":case"SETTLE":case"QHJSJ":case"ZSTJJ":case"ISEQUAL":case"ISUP":case"ISDOWN":return this.SymbolData.GetSymbolCacheData(t);case"VOLR":return this.SymbolData.GetVolRateCacheData(e);case"TR":return this.SymbolData.GetTRData(e);case"INDEXA":case"INDEXC":case"INDEXH":case"INDEXH":case"INDEXO":case"INDEXV":case"INDEXL":case"INDEXADV":case"INDEXDEC":return this.SymbolData.GetIndexCacheData(t);case"CURRBARSCOUNT":return this.SymbolData.GetCurrBarsCount();case"BARPOS":return this.SymbolData.GetBarPos();case"TOTALBARSCOUNT":return this.SymbolData.GetTotalBarsCount();case"TOTALFZNUM":return this.SymbolData.GetTotalTradeMinuteCount();case"ISLASTBAR":return this.SymbolData.GetIsLastBar();case"BARSTATUS":return this.SymbolData.GetBarStatus();case"TOTALCAPITAL":case"CAPITAL":case"EXCHANGE":case"HYBLOCK":case"DYBLOCK":case"GNBLOCK":case"FGBLOCK":case"ZSBLOCK":case"ZHBLOCK":case"ZDBLOCK":case"HYZSCODE":case"GNBLOCKNUM":case"FGBLOCKNUM":case"ZSBLOCKNUM":case"ZHBLOCKNUM":case"ZDBLOCKNUM":case"HYSYL":case"HYSJL":case"FROMOPEN":case"LARGEINTRDVOL":case"LARGEOUTTRDVOL":case"TRADENUM":case"TRADEINNUM":case"TRADEOUTNUM":case"LARGETRDINNUM":case"LARGETRDOUTNUM":case"CUR_BUYORDER":case"CUR_SELLORDER":case"ACTINVOL":case"ACTOUTVOL":case"BIDORDERVOL":case"BIDCANCELVOL":case"AVGBIDPX":case"OFFERORDERVOL":case"OFFERCANCELVOL":case"AVGOFFERPX":return this.SymbolData.GetStockCacheData({VariantName:t,Node:e});case"SETCODE":return this.SymbolData.SETCODE();case"CODE":return this.SymbolData.GetSymbol();case"STKNAME":return this.SymbolData.GetName();case"TIME":return this.SymbolData.TIME();case"TIME2":return this.SymbolData.TIME2();case"DATE":return this.SymbolData.DATE();case"DATETIME":return this.SymbolData.DateTime();case"YEAR":return this.SymbolData.YEAR();case"MONTH":return this.SymbolData.MONTH();case"WEEK":case"WEEKDAY":return this.SymbolData.WEEK();case"DAY":return this.SymbolData.DAY();case"PERIOD":return this.SymbolData.PERIOD();case"HOUR":return this.SymbolData.HOUR();case"MINUTE":return this.SymbolData.MINUTE();case"DRAWNULL":case"NULL":return this.SymbolData.GetDrawNull();case"ADVANCE":case"DECLINE":return this.SymbolData.GetIndexIncreaseCacheData(t,this.SymbolData.Symbol,e);case"TQFLAG":return this.SymbolData.Right;case"MACHINEDATE":var a=new Date;return 1e4*a.getFullYear()+1*a.getMonth()*100+a.getDate()-19e6;case"MACHINETIME":var a=new Date;return 1e4*a.getHours()+1*a.getMinutes()*100+a.getSeconds();case"MACHINEWEEK":var a=new Date;return a.getDay();case"WEEKOFYEAR":return this.SymbolData.WEEKOFYEAR();case"DAYSTOTODAY":return this.SymbolData.DAYSTOTODAY()}this.ThrowUnexpectedNode(e,"åé"+t+"ä¸å­å¨",t)},this.ReadCustomVariant=function(t,e){return this.SymbolData.GetStockCacheData({VariantName:t,Node:e})},this.ReadVariable=function(t,e){if(this.ConstVarTable.has(t)){var a=this.ConstVarTable.get(t);return null==a&&(a=this.ReadSymbolData(t,e),this.ConstVarTable.set(t,a)),a}if(Go.IsCustomVariant(t))return this.ReadCustomVariant(t,e);if(this.VarTable.has(t))return this.VarTable.get(t);if(t.indexOf("#")>0){var i=t.split("#");return this.SymbolData.GetSymbolPeriodCacheData(i[0],i[1])}if(0==t.indexOf("COLOR")){var r=Tr.ColorVarToRGB(t);if(r)return r}return this.ThrowUnexpectedNode(e,"åé"+t+"ä¸å­å¨",t),null},this.ReadMemberVariable=function(t){var e=t.Object,a=t.Property,i=void 0;if(!(i=e.Type==Xo.BinaryExpression||e.Type==Xo.LogicalExpression?this.VisitBinaryExpression(e):e.Type==Xo.CallExpression?this.VisitCallExpression(e):this.GetNodeValue(e)))return null;var r=i[a.Name];return r||null},this.SingleDataToArrayData=function(t){for(var e=this.SymbolData.Data.Data.length,a=[],i=0;i<e;++i)a[i]=t;return a},this.RunAST=function(){this.AST||this.ThrowError(),this.AST.Body||this.ThrowError();for(var t=0;t<this.AST.Body.length;++t){var e=this.AST.Body[t];if(this.RunASTNode(e,t),this.Interrupt&&this.Interrupt.Exit){Xn.Complier.Log("[JSExecute::RunAST] Interrupt",this.Interrupt);break}}return Xn.Complier.Log("[JSExecute::RunAST]",this.VarTable),this.OutVarTable},this.RunASTNode=function(t,e){this.VisitNode(t);var a=e;if(t.Type==Xo.ExpressionStatement&&t.Expression)if(t.Expression.Type==Xo.AssignmentExpression){if(":"==t.Expression.Operator&&t.Expression.Left){var i=t.Expression,r=i.Left.Name,n=this.VarTable.get(r);if(this.VarDrawTable.has(r)){var o=this.VarDrawTable.get(r);this.OutVarTable.push({Name:o.Name,Draw:o,Type:1})}else{var s=0;if(n&&"object"==(void 0===n?"undefined":(0,Ln.default)(n))&&"Object"==n.__Type__)s=1e3;else if(!this.IsSectionMode&&!Array.isArray(n))if("string"==typeof n){var l=parseFloat(n);we.IsNumber(l)?n=this.SingleDataToArrayData(l):(n=this.SingleDataToArrayData(n),s=1001)}else n=this.SingleDataToArrayData(n);this.OutVarTable.push({Name:r,Data:n,Type:s})}}}else if(t.Expression.Type==Xo.CallExpression){var h=t.Expression;if(this.Draw.IsDrawFunction(h.Callee.Name)){var u=h.Draw;u.Name=h.Callee.Name,this.OutVarTable.push({Name:u.Name,Draw:u,Type:1})}else if("IFC"===h.Callee.Name&&h.Draw){var C=h.Draw;C.Name=C.DrawType,this.OutVarTable.push({Name:C.Name,Draw:C,Type:1})}else{var c=h.Out;m="__temp_c_"+h.Callee.Name+"_"+a+"__";var s=0;Array.isArray(c)||(c=this.SingleDataToArrayData(c)),this.OutVarTable.push({Name:m,Data:c,Type:s,NoneName:!0})}}else if(t.Expression.Type==Xo.Identifier){var f=t.Expression.Name,d=this.ReadVariable(f,t.Expression),s=0;d&&"object"==(void 0===d?"undefined":(0,Ln.default)(d))&&"Object"==d.__Type__?s=1e3:this.IsSectionMode||Array.isArray(d)||(d="string"==typeof d?this.SingleDataToArrayData(parseFloat(d)):this.SingleDataToArrayData(d)),f="__temp_i_"+a+"__",this.OutVarTable.push({Name:f,Data:d,Type:s,NoneName:!0})}else if(t.Expression.Type==Xo.Literal){var D=t.Expression.Value;we.IsString(D)&&D.indexOf("$")>0&&(D=this.SymbolData.GetOtherSymolCacheData({Literal:D})),m="__temp_li_"+a+"__";var s=0;Array.isArray(D)||(D=this.SingleDataToArrayData(D)),this.OutVarTable.push({Name:m,Data:D,Type:s,NoneName:!0})}else if(t.Expression.Type==Xo.BinaryExpression){var m="__temp_b_"+a+"__",p=t.Expression.Out,s=0;Array.isArray(p)||(p=this.SingleDataToArrayData(p)),this.OutVarTable.push({Name:m,Data:p,Type:s,NoneName:!0})}else if(t.Expression.Type==Xo.LogicalExpression){var m="__temp_l_"+a+"__",v=t.Expression.Out,s=0;Array.isArray(v)||(v=this.SingleDataToArrayData(v)),this.OutVarTable.push({Name:m,Data:v,Type:s,NoneName:!0})}else if(t.Expression.Type==Xo.UnaryExpression){var m="__temp_u_"+a+"__",g={};if(this.ReadUnaryExpression(t.Expression,g)){var s=0;this.OutVarTable.push({Name:m,Data:g.OutVar,Type:s,NoneName:!0})}}else if(t.Expression.Type==Xo.MemberExpression){var T=this.ReadMemberVariable(t.Expression);if(T){var s=0,m="__temp_di_"+a+"__";Array.isArray(T)||(T=this.SingleDataToArrayData(T)),this.OutVarTable.push({Name:m,Data:T,Type:s,NoneName:!0})}}else if(t.Expression.Type==Xo.SequenceExpression){for(var I=void 0,S=void 0,x=void 0,b=void 0,y=void 0,E=void 0,w=void 0,F=!1,M=!1,L=!1,N=!1,R=!1,A=!1,O=!1,P=!1,B=!1,_=!0,G=!1,k=!1,V=!1,H=!1,Y=!1,X=!0,W=!1,U=!1,K=!1,z=-1,J=-1,q=-1,Z=null,j=null,Q=null,$=null,tt=null,et=null,at=null,it=0;it<t.Expression.Expression.length;++it){var rt=t.Expression.Expression[it];if(rt.Type==Xo.AssignmentExpression&&":"==rt.Operator&&rt.Left){if(0==it){I=rt.Left.Name;var nt=this.VarTable.get(I);this.VarDrawTable.has(I)?S=this.VarDrawTable.get(I):Array.isArray(nt)||(nt=this.SingleDataToArrayData(nt),this.VarTable.set(I,nt))}}else if(rt.Type==Xo.Identifier){var ot=rt.Name;if("COLORSTICK"===ot)F=!0;else if("POINTDOT"===ot)M=!0;else if("CIRCLEDOT"===ot)N=!0;else if("DOTLINE"===ot)k=!0;else if("UPDOWNDOT"==ot)L=!0;else if("LINESTICK"===ot)R=!0;else if("STICK"===ot)A=!0;else if("VOLSTICK"===ot)O=!0;else if("LINEAREA"==ot)P=!0;else if("DRAWABOVE"===ot)W=!0;else if("DRAWCENTER"===ot)U=!0;else if("DRAWBELOW"==ot)K=!0;else if("STEPLINE"==ot)B=!0;else if("SINGLELINE"==ot)H=!0;else if(0==ot.indexOf("COLOR"))x=ot;else if(0==ot.indexOf("RGBX")&&10==ot.length)x=ot;else if(0==ot.indexOf("LINETHICK"))w=ot;else if("ALIGN0"==ot)z=0;else if("ALIGN1"==ot)z=1;else if("ALIGN2"==ot)z=2;else if("VALIGN0"==ot)J=0;else if("VALIGN1"==ot)J=1;else if("VALIGN2"==ot)J=2;else if(0==ot.indexOf("NODRAW"))_=!1;else if(0==ot.indexOf("EXDATA"))G=!0;else if(0==ot.indexOf("LINEOVERLAY"))V=!0;else if(0==ot.indexOf("NOTEXT")||0==ot.indexOf("NOTITLE"))X=!1;else if(0==ot.indexOf("FONTSIZE")){var st=ot.replace("FONTSIZE","");q=parseInt(st)}else if(0==it){I=rt.Name;var lt=this.ReadVariable(I,rt);Array.isArray(lt)||(lt=this.SingleDataToArrayData(lt)),I="__temp_si_"+a+"__",Y=!0,this.VarTable.set(I,lt)}}else if(rt.Type==Xo.Literal){if(0==it){var ht=this.SingleDataToArrayData(rt.Value);I=rt.Value.toString(),this.VarTable.set(I,ht)}}else if(rt.Type==Xo.CallExpression)if(0==it)if(this.Draw.IsDrawFunction(rt.Callee.Name))S=rt.Draw,S.Name=rt.Callee.Name;else{var ut=rt.Out;I="__temp_sc_"+rt.Callee.Name+"_"+a+"__",Y=!0,this.VarTable.set(I,ut)}else if("RGB"==rt.Callee.Name||"RGBA"==rt.Callee.Name)x=rt.Out;else if("UPCOLOR"==rt.Callee.Name)b=rt.Out;else if("DOWNCOLOR"==rt.Callee.Name)y=rt.Out;else if("STICKTYPE"==rt.Callee.Name)E=rt.Out;else if("XMOVE"==rt.Callee.Name)$=rt.Out;else if("YMOVE"==rt.Callee.Name)tt=rt.Out;else if("LINEDASH"==rt.Callee.Name)we.IsNonEmptyArray(rt.Out)&&(at=rt.Out.slice());else if("FIRSTDRAW"==rt.Callee.Name)0===rt.Out?Q=!1:1===rt.Out&&(Q=!0);else if("SOUND"==rt.Callee.Name){this.GetSoundEvent();I=null}else if("ICON"==rt.Callee.Name){var Ct=this.VarTable.get(I);Ct&&(S=this.GetOutIconData(Ct,rt.Draw))&&(S.Name=rt.Callee.Name),I=null}else"BACKGROUND"==rt.Callee.Name?(Z=rt.Draw,I=null):"CKLINE"==rt.Callee.Name?(j=rt.Draw,I=null):"KLINETYPE"==rt.Callee.Name&&(et=rt.Out);else if(rt.Type==Xo.BinaryExpression){if(0==it){I="__temp_sb_"+a+"__";var ct=rt.Out;Y=!0,this.VarTable.set(I,ct)}}else if(rt.Type==Xo.UnaryExpression){if(0==it){I="__temp_su_"+a+"__";var g={};this.ReadUnaryExpression(rt,g)&&(Y=!0,this.VarTable.set(I,g.OutVar))}}else if(rt.Type==Xo.MemberExpression&&0==it){var T=this.ReadMemberVariable(rt);T&&(Array.isArray(T)||(varValue=this.SingleDataToArrayData(T)),Y=!0,I="__temp_di_"+a+"__",this.VarTable.set(I,T))}}if(M&&I){var ft=this.VarTable.get(I);Array.isArray(ft)||(ft=this.SingleDataToArrayData(ft));var dt={Name:I,Data:ft,Radius:So.POINTDOT.Radius,Type:3};x&&(dt.Color=x),w&&(dt.LineWidth=w),this.OutVarTable.push(dt)}else if(N&&I){var Dt=this.VarTable.get(I);Array.isArray(Dt)||(Dt=this.SingleDataToArrayData(Dt));var mt={Name:I,Data:Dt,Radius:So.CIRCLEDOT.Radius,Type:3};x&&(mt.Color=x),w&&(mt.LineWidth=w),this.OutVarTable.push(mt)}else if(L&&I){var pt=this.VarTable.get(I);Array.isArray(pt)||(pt=this.SingleDataToArrayData(pt));var vt={Name:I,Data:pt,Radius:So.CIRCLEDOT.Radius,Type:3,UpDownDot:!0};x&&(vt.Color=x),w&&(vt.LineWidth=w),this.OutVarTable.push(vt)}else if(R&&I){var gt=this.VarTable.get(I),Tt={Name:I,Data:gt,Type:4};x&&(Tt.Color=x),w&&(Tt.LineWidth=w),this.OutVarTable.push(Tt)}else if(A&&I){var It=this.VarTable.get(I),St={Name:I,Data:It,Type:5};x&&(St.Color=x),w&&(St.LineWidth=w),this.OutVarTable.push(St)}else if(O&&I){var xt=this.VarTable.get(I),bt={Name:I,Data:xt,Type:6};x&&(bt.Color=x),b&&(bt.UpColor=b),y&&(bt.DownColor=y),w&&(bt.LineWidth=w),we.IsNumber(E)&&(bt.StickType=E),this.OutVarTable.push(bt)}else if(P&&I){var yt=this.VarTable.get(I),Et={Name:I,Data:yt,Type:9};x&&(Et.Color=x),b&&(Et.UpColor=b),y&&(Et.DownColor=y),w&&(Et.LineWidth=w),this.OutVarTable.push(Et)}else if(F&&I){var wt=this.VarTable.get(I),Ft={Name:I,Data:wt,Color:x,Type:2};w&&(Ft.LineWidth=w),x&&(Ft.Color=x),b&&(Ft.UpColor=b),y&&(Ft.DownColor=y),this.OutVarTable.push(Ft)}else if(I&&x&&!S){var Mt=this.VarTable.get(I);Array.isArray(Mt)||(Mt=this.SingleDataToArrayData(Mt));var Lt={Name:I,Data:Mt,Color:x,Type:0};w&&(Lt.LineWidth=w),0==_&&(Lt.IsShow=!1),1==G&&(Lt.IsExData=!0),1==k&&(Lt.IsDotLine=!0),we.IsNonEmptyArray(at)&&(Lt.LineDash=at),1==V&&(Lt.IsOverlayLine=!0),1==H&&(Lt.IsSingleLine=!0),1==Y&&(Lt.NoneName=!0),0==X&&(Lt.IsShowTitle=!1),1==B&&(Lt.Type=7),this.OutVarTable.push(Lt)}else if(S){var T={Name:S.Name,Draw:S,Type:1};x&&(T.Color=x),1==k&&(T.IsDotLine=!0),we.IsNonEmptyArray(at)&&(T.LineDash=at),w&&(T.LineWidth=w),W&&(T.IsDrawAbove=!0),U&&(T.IsDrawCenter=!0),K&&(T.IsDrawBelow=!0),z>=0&&(T.DrawAlign=z),J>=0&&(T.DrawVAlign=J),q>0&&(T.DrawFontSize=q),Z&&(T.Background=Z),j&&(T.VerticalLine=j),we.IsNumber($)&&(T.XOffset=$),we.IsNumber(tt)&&(T.YOffset=tt),we.IsBool(Q)&&(T.IsFirstDraw=Q),we.IsNumber(et)&&(T.KLineType=et),this.OutVarTable.push(T)}else if(I){var Nt=this.VarTable.get(I),Rt={Name:I,Data:Nt,Type:0};x&&(Rt.Color=x),w&&(Rt.LineWidth=w),0==_&&(Rt.IsShow=!1),1==G&&(Rt.IsExData=!0),1==k&&(Rt.IsDotLine=!0),we.IsNonEmptyArray(at)&&(Rt.LineDash=at),1==V&&(Rt.IsOverlayLine=!0),1==H&&(Rt.IsSingleLine=!0),0==X&&(Rt.IsShowTitle=!1),1==B&&(Rt.Type=7),this.OutVarTable.push(Rt)}}},this.ReadUnaryExpression=function(t,e){var a=t.Argument,i=null;if(a.Type==Xo.Literal)i=a.Value,Array.isArray(i)||(i=this.SingleDataToArrayData(i));else if(a.Type==Xo.Identifier){var r=a.Name;i=this.ReadVariable(r,t.Expression),Array.isArray(i)||(i=this.SingleDataToArrayData(i))}else if(a.Type==Xo.BinaryExpression)i=a.Out,Array.isArray(i)||(i=this.SingleDataToArrayData(i));else{if(a.Type!=Xo.CallExpression)return!1;var n=a;if(this.Draw.IsDrawFunction(n.Callee.Name))return!1;if("IFC"===n.Callee.Name&&n.Draw)return!1;i=n.Out,Array.isArray(i)||(i=this.SingleDataToArrayData(i))}return"-"==t.Operator&&i&&(i=this.Algorithm.Subtract(0,i)),e.OutVar=i,!0},this.GetOutIconData=function(t,e){if(Array.isArray(t)){for(var a=0;a<t.length&&a<e.DrawData.length;++a){t[a]<=0&&(e.DrawData[a]=null)}return e}return t?e:null},this.GetSoundEvent=function(){return this.GetEventCallback?this.GetEventCallback(Kn.ON_PLAY_SOUND):null},this.Run=function(){try{var t=this.RunAST();Xn.Complier.Log("[JSComplier.Run] execute finish",t),this.IndexCtrl&&(this.IndexCtrl.Status=0),this.UpdateUICallback&&(Xn.Complier.Log("[JSComplier.Run] invoke UpdateUICallback."),this.CallbackParam&&this.CallbackParam.Job&&this.CallbackParam.Job.ID==Ko.JOB_EXECUTE_INDEX?this.UpdateUICallback(t,this.CallbackParam,this.SymbolData):(this.CallbackParam&&this.CallbackParam.Self&&"ScriptIndexConsole"===this.CallbackParam.Self.ClassName&&(this.CallbackParam.JSExecute=this),1==this.IsUsePageData&&(this.CallbackParam.Self.IsUsePageData=!0),this.UpdateUICallback(t,this.CallbackParam)))}catch(t){Xn.Complier.Log(t),t.Job?(Xn.Complier.Log("[JSComplier.Run] download job and reexectue",t.Job),this.JobList.push(t.Job),this.JobList.push({ID:Ko.JOB_RUN_SCRIPT}),this.Execute()):this.ErrorCallback&&(this.IndexCtrl&&(this.IndexCtrl.Status=0),this.ErrorCallback(t,this.CallbackParam))}},this.DebugRun_End=function(){var t=this.OutVarTable;Xn.Complier.Log("[JSComplier.DebugRun_End] execute finish",t),this.IndexCtrl&&(this.IndexCtrl.Status=0),this.UpdateUICallback&&(Xn.Complier.Log("[JSComplier.DebugRun_End] invoke UpdateUICallback."),this.CallbackParam&&this.CallbackParam.Job&&this.CallbackParam.Job.ID==Ko.JOB_EXECUTE_INDEX?this.UpdateUICallback(t,this.CallbackParam,this.SymbolData):(this.CallbackParam&&this.CallbackParam.Self&&"ScriptIndexConsole"===this.CallbackParam.Self.ClassName&&(this.CallbackParam.JSExecute=this),1==this.IsUsePageData&&(this.CallbackParam.Self.IsUsePageData=!0),this.UpdateUICallback(t,this.CallbackParam)))},this.DebugRun_Next=function(t){var e=this;if(t.ExeLine<t.LineCount){var a=this.AST.Body[t.ExeLine];this.RunASTNode(a),++t.ExeLine,this.DebugFilter(t,function(){e.DebugRun_Next(t)})}else this.DebugRun_End(),t.Status=2,this.DebugFilter(t,null)},this.DebugRun=function(){var t=this;try{this.AST||this.ThrowError(),this.AST.Body||this.ThrowError();var e={LineCount:this.AST.Body.length,ExeLine:0,Self:this,Status:1};this.DebugFilter(e,function(){t.DebugRun_Next(e)})}catch(t){this.ErrorCallback&&(this.IndexCtrl&&(this.IndexCtrl.Status=0),this.ErrorCallback(t,this.CallbackParam))}},this.VisitNode=function(t){switch(t.Type){case Xo.SequenceExpression:this.VisitSequenceExpression(t);break;case Xo.ExpressionStatement:this.VisitNode(t.Expression);break;case Xo.AssignmentExpression:this.VisitAssignmentExpression(t);break;case Xo.BinaryExpression:case Xo.LogicalExpression:this.VisitBinaryExpression(t);break;case Xo.CallExpression:this.VisitCallExpression(t);break;case Xo.UnaryExpression:this.VisitUnaryExpression(t)}},this.VisitUnaryExpression=function(t){if("-"==t.Operator)var e=this.GetNodeValueEx(t.Argument),a=this.Algorithm.Subtract(0,e);else var a=t.Argument.Value;return a},this.VisitSequenceExpression=function(t){for(var e in t.Expression){var a=t.Expression[e];this.VisitNode(a)}},this.GetDynamicScriptIndex=function(t,e){var a=t.Callee.Value,i=a.split(".");2!=i.length&&this.ThrowUnexpectedNode(t,"è°ç¨ææ æ ¼å¼'"+a+"'éè¯¯");var r=i[0],n=i[1],o=null,s=n.indexOf("#");-1!=s&&(o=n.slice(s+1),n=n.slice(0,s));for(var l="",h=0;h<e.length;++h){var u=e[h];l.length>0&&(l+=","),l+=""+u}var C="("+l+")",c=n+"#"+C;if(o&&(c+="#"+o),!this.VarTable.has(r))return null;var f=this.VarTable.get(r),u=f[c];return u},this.VisitCallExpression=function(t){for(var e=t.Callee.Name,a=[],i=0;i<t.Arguments.length;++i){var r,n=t.Arguments[i];if("IFC"===e&&i>=1)break;r=n.Type==Xo.BinaryExpression||n.Type==Xo.LogicalExpression?this.VisitBinaryExpression(n):n.Type==Xo.CallExpression?this.VisitCallExpression(n):this.GetNodeValue(n),a.push(r)}if(t.Callee.Type==Xo.Literal){t.Out=[],t.Draw=null;var o=this.GetDynamicScriptIndex(t,a);return o&&(t.Out=o),t.Out}if("IFC"===e){var r,s=this.Algorithm.IFC(a[0]),n=s?t.Arguments[1]:t.Arguments[2];return r=n.Type==Xo.BinaryExpression||n.Type==Xo.LogicalExpression?this.VisitBinaryExpression(n):n.Type==Xo.CallExpression?this.VisitCallExpression(n):this.GetNodeValue(n),t.Out=r,n.Draw&&(t.Draw=n.Draw),t.Out}if(Go.IsCustomFunction(e)){var o=this.Algorithm.CallCustomFunction(e,a,this.SymbolData,t);return t.Out=[],t.Draw=null,o&&(o.Out&&(t.Out=o.Out),o.Draw&&(t.Draw=o.Draw)),t.Out}if(Go.IsCustomDataFunction(e)){var l=Go.CustomDataFunction.Data.get(e);return t.Out=this.SymbolData.GetStockCacheData({FunctionName:e,Args:a,ArgCount:l.ArgCount,Node:t}),t.Draw=null,t.Out}switch(e){case"DYNAINFO":t.Out=this.SymbolData.GetLatestCacheData(a[0]);break;case"STICKLINE":t.Draw=this.Draw.STICKLINE(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWTEXT":t.Draw=this.Draw.DRAWTEXT(a[0],a[1],a[2]),t.Out=[];break;case"DRAWTEXT_FIX":t.Draw=this.Draw.DRAWTEXT_FIX(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"SUPERDRAWTEXT":t.Draw=this.Draw.SUPERDRAWTEXT(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWICON":t.Draw=this.Draw.DRAWICON(a[0],a[1],a[2]),t.Out=[];break;case"ICON":t.Draw=this.Draw.ICON(a[0],a[1]),t.Out=[];break;case"TIPICON":t.Draw=this.Draw.TIPICON(a[0],a[1],a[2],a[3]),t.Out=[];break;case"BACKGROUND":t.Draw=this.Draw.BACKGROUND(a[0],a[1],a[2],a[3],a[4],a[5]),t.Out=[];break;case"CKLINE":t.Draw=this.Draw.CKLINE(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWLINE":t.Draw=this.Draw.DRAWLINE(a[0],a[1],a[2],a[3],a[4]),t.Out=t.Draw.DrawData;break;case"DRAWBAND":t.Draw=this.Draw.DRAWBAND(a[0],a[1],a[2],a[3]),t.Out=[];break;case"FILLRGN":a.length>=4?t.Draw=this.Draw.FILLRGN2(a):t.Draw=this.Draw.FILLRGN(a[0],a[1],a[2]),t.Out=[];break;case"FLOATRGN":t.Draw=this.Draw.FLOATRGN(a),t.Out=[];break;case"FILLTOPRGN":t.Draw=this.Draw.FILLBGRGN(1,a),t.Out=[];break;case"FILLBOTTOMRGN":t.Draw=this.Draw.FILLBGRGN(0,a),t.Out=[];break;case"FILLVERTICALRGN":t.Draw=this.Draw.FILLVERTICALRGN(a),t.Out=[];break;case"DRAWKLINE":case"DRAWKLINE1":t.Draw=this.Draw.DRAWKLINE(a[0],a[1],a[2],a[3]),t.Out=[];break;case"DRAWKLINE_IF":t.Draw=this.Draw.DRAWKLINE_IF(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"KLINETYPE":t.Out=this.Draw.KLINETYPE(a[0]);break;case"DRAWOVERLAYKLINE":t.Draw=this.Draw.DRAWOVERLAYKLINE(a[0],a[1],a[2],a[3]),t.Out=[];break;case"DRAWCOLORKLINE":t.Draw=this.Draw.DRAWCOLORKLINE(a[0],a[1],a[2]),t.Out=[];break;case"PLOYLINE":case"POLYLINE":t.Draw=this.Draw.POLYLINE(a[0],a[1]),t.Out=t.Draw.DrawData;break;case"DRAWNUMBER":t.Draw=this.Draw.DRAWNUMBER(a[0],a[1],a[2],a[3]),t.Out=t.Draw.DrawData.Value;break;case"DRAWNUMBER_FIX":t.Draw=this.Draw.DRAWNUMBER_FIX(a[0],a[1],a[2],a[3],a[4]),t.Out=t.Draw.DrawData.Value;break;case"DRAWCHANNEL":t.Draw=this.Draw.DRAWCHANNEL(a[0],a[1],a[2],a[3],a[4],a[5],a[6]),t.Out=[];break;case"RGB":t.Out=this.Draw.RGB(a[0],a[1],a[2]);break;case"RGBA":t.Out=this.Draw.RGBA(a[0],a[1],a[2],a[3]);break;case"UPCOLOR":t.Out=this.Draw.UPCOLOR(a[0]);break;case"DOWNCOLOR":t.Out=this.Draw.DOWNCOLOR(a[0]);break;case"STICKTYPE":t.Out=this.Draw.STICKTYPE(a[0]);break;case"XMOVE":t.Out=this.Draw.XMOVE(a[0]);break;case"YMOVE":t.Out=this.Draw.YMOVE(a[0]);break;case"LINEDASH":t.Out=this.Draw.LINEDASH(a);break;case"FIRSTDRAW":t.Out=this.Draw.FIRSTDRAW(a[0]);break;case"PARTLINE":t.Draw=this.Draw.PARTLINE(a),t.Out=[];break;case"DRAWGBK":t.Draw=this.Draw.DRAWGBK(a[0],a[1],a[2],a[3]),t.Out=[];break;case"DRAWGBK2":t.Draw=this.Draw.DRAWGBK2(a[0],a[1],a[2],a[3]),t.Out=[];break;case"DRAWGBK_DIV":t.Draw=this.Draw.DRAWGBK_DIV(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWTEXT_LINE":t.Draw=this.Draw.DRAWTEXT_LINE(a[0],a[1],a[2],a[3],a[4],a[5],a[6]),t.Out=[];break;case"DRAWRECTREL":t.Draw=this.Draw.DRAWRECTREL(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"DRAWTEXTREL":t.Draw=this.Draw.DRAWTEXTREL(a[0],a[1],a[2]),t.Out=[];break;case"DRAWTEXTABS":t.Draw=this.Draw.DRAWTEXTABS(a[0],a[1],a[2]),t.Out=[];break;case"DRAWOVERLAYLINE":t.Draw=this.Draw.DRAWOVERLAYLINE(a[0],a[1],a[2]),t.Out=t.Draw.DrawData.Data;break;case"DRAWSL":t.Draw=this.Draw.DRAWSL(a[0],a[1],a[2],a[3],a[4]),t.Out=[];break;case"VERTLINE":t.Draw=this.Draw.VERTLINE(a[0],a[1]),t.Out=t.Draw.DrawData.Data;break;case"HORLINE":t.Draw=this.Draw.HORLINE(a[0],a[1],a[2],a[3]),t.Out=t.Draw.DrawData.Data;break;case"CODELIKE":t.Out=this.SymbolData.CODELIKE(a[0]);break;case"NAMELIKE":case"NAMEINCLUDE":t.Out=this.SymbolData.NAMELIKE(a[1]);break;case"REFDATE":t.Out=this.SymbolData.REFDATE(a[0],a[1]);break;case"FINANCE":case"FINVALUE":t.Out=this.SymbolData.GetStockCacheData({FunctionName:e,Args:a,ArgCount:1,Node:t});break;case"FINONE":t.Out=this.SymbolData.GetStockCacheData({FunctionName:e,Args:a,ArgCount:3,Node:t});break;case"GPJYVALUE":case"SCJYVALUE":case"BKJYVALUE":t.Out=this.SymbolData.GetStockCacheData({FunctionName:e,Args:a,ArgCount:3,Node:t});break;case"GPJYONE":case"SCJYONE":case"BKJYONE":t.Out=this.SymbolData.GetStockCacheData({FunctionName:e,Args:a,ArgCount:4,Node:t});break;case"MARGIN":t.Out=this.SymbolData.GetMarginCacheData(a[0],t);break;case"HK2SHSZ":t.Out=this.SymbolData.GetHKToSHSZCacheData(a[0],t);break;case"NEWS":t.Out=this.SymbolData.GetNewsAnalysisCacheData(a[0],t);break;case"UPCOUNT":case"DOWNCOUNT":t.Out=this.SymbolData.GetIndexIncreaseCacheData(e,a[0],t);break;case"SF":t.Out=this.SymbolData.GetSectionFinanceCacheData(a[0],a[1],a[2],t);break;case"LOADAPIDATA":t.Out=this.SymbolData.GetCustomApiData(a);break;case"STKINDI":case"CALCSTOCKINDEX":t.Out=this.SymbolData.GetScriptIndexOutData(a,t,e);break;case"SOUND":t.Draw=this.Draw.SOUND(a[0]),t.Out=[];break;case"PLAYSOUND":t.Draw=this.Draw.PLAYSOUND(a[0],a[1]),t.Out=[];break;case"CLOSE":case"C":case"VOL":case"V":case"OPEN":case"O":case"HIGH":case"H":case"LOW":case"L":case"AMOUNT":case"AMO":t.Out=this.SymbolData.GetOtherSymolCacheData({FunctionName:e,Args:a});break;case"INBLOCK":t.Out=this.SymbolData.IsInBlock(a[0],t);break;case"COVER_C":case"COVER_O":case"COVER_H":case"COVER_L":case"COVER_A":case"COVER_V":return 2==a.length?this.SymbolData.GetSymbolPeriodCacheData2(hr.GetConvertValueName(e),a[0],a[1]):this.SymbolData.GetSymbolPeriodCacheData(hr.GetConvertValueName(e),a[0]);case"SYSPARAM":t.Out=this.SymbolData.SysParam(a[0],this);break;case"TESTSKIP":var h=this.Algorithm.TESTSKIP(a[0],t);if(t.Out=null,h&&(this.Interrupt.Exit=!0,t&&t.Marker)){var u=t.Marker;this.Interrupt.Line=u.Line,this.Interrupt.Index=u.Index,this.Interrupt.Column=u.Column}break;case"BUY":t.Draw=this.Draw.BUY(a[0],a[1],a[2],a[3]),t.Out=t.Draw.DrawData.Data;break;case"SELL":t.Draw=this.Draw.SELL(a[0],a[1],a[2],a[3]),t.Out=t.Draw.DrawData.Data;break;case"SELLSHORT":t.Draw=this.Draw.SELLSHORT(a[0],a[1],a[2],a[3]),t.Out=t.Draw.DrawData.Data;break;case"BUYSHORT":t.Draw=this.Draw.BUYSHORT(a[0],a[1],a[2],a[3]),t.Out=t.Draw.DrawData.Data;break;default:t.Out=this.Algorithm.CallFunction(e,a,t,this.SymbolData)}return t.Out},this.VisitAssignmentExpression=function(t){var e=t.Left;e.Type!=Xo.Identifier&&this.ThrowUnexpectedNode(t);var a=e.Name,i=t.Right,r=null,n=null;i.Type==Xo.BinaryExpression||i.Type==Xo.LogicalExpression?r=this.VisitBinaryExpression(i):i.Type==Xo.CallExpression?(r=this.VisitCallExpression(i),i.Draw&&(n=i.Draw)):i.Type==Xo.Literal?(r=i.Value,we.IsString(r)&&i.Value.indexOf("$")>0&&(r=this.SymbolData.GetOtherSymolCacheData({Literal:r}))):i.Type==Xo.Identifier?r=this.ReadVariable(i.Name,i):i.Type==Xo.MemberExpression?r=this.ReadMemberVariable(i):i.Type==Xo.UnaryExpression&&(r=this.VisitUnaryExpression(i)),Uo&&Xn.Complier.Log("[JSExecute::VisitAssignmentExpression]",a," = ",r),n&&this.VarDrawTable.set(a,n),this.VarTable.set(a,r)},this.VisitBinaryExpression=function(t){var e=[];e.push(t);for(var a=null;0!=e.length;)if(a=e[e.length-1],a.Left&&t!=a.Left&&t!=a.Right)e.push(a.Left);else if(a.Right&&t!=a.Right)e.push(a.Right);else{var i=e.pop();if(i.Type==Xo.BinaryExpression){var r=this.GetNodeValue(i.Left),n=this.GetNodeValue(i.Right);switch(Uo&&Xn.Complier.Log("[JSExecute::VisitBinaryExpression] BinaryExpression",i,r,n),i.Out=null,i.Operator){case"-":i.Out=this.Algorithm.Subtract(r,n);break;case"*":i.Out=this.Algorithm.Multiply(r,n);break;case"/":i.Out=this.Algorithm.Divide(r,n);break;case"+":i.Out=this.Algorithm.Add(r,n);break;case">":i.Out=this.Algorithm.GT(r,n);break;case">=":i.Out=this.Algorithm.GTE(r,n);break;case"<":i.Out=this.Algorithm.LT(r,n);break;case"<=":i.Out=this.Algorithm.LTE(r,n);break;case"==":case"=":i.Out=this.Algorithm.EQ(r,n);break;case"!=":case"<>":i.Out=this.Algorithm.NEQ(r,n)}Uo&&Xn.Complier.Log("[JSExecute::VisitBinaryExpression] BinaryExpression",i)}else if(i.Type==Xo.LogicalExpression){var o=this.GetNodeValue(i.Left),s=this.GetNodeValue(i.Right);switch(Uo&&Xn.Complier.Log("[JSExecute::VisitBinaryExpression] LogicalExpression",i,o,s),i.Out=null,i.Operator){case"&&":case"AND":i.Out=this.Algorithm.And(o,s);break;case"||":case"OR":i.Out=this.Algorithm.Or(o,s)}Uo&&Xn.Complier.Log("[JSExecute::VisitBinaryExpression] LogicalExpression",i)}t=a}return t.Out},this.GetNodeValueEx=function(t){return t.Type==Xo.BinaryExpression||t.Type==Xo.LogicalExpression?this.VisitBinaryExpression(t):t.Type==Xo.CallExpression?this.VisitCallExpression(t):this.GetNodeValue(t)},this.GetNodeValue=function(t){switch(t.Type){case Xo.Literal:return t.Value;case Xo.UnaryExpression:var e=this.VisitUnaryExpression(t);return e;case Xo.Identifier:var e=this.ReadVariable(t.Name,t);return e;case Xo.BinaryExpression:case Xo.LogicalExpression:return t.Out;case Xo.CallExpression:return this.VisitCallExpression(t);case Xo.MemberExpression:return this.ReadMemberVariable(t);default:this.ThrowUnexpectedNode(t)}},this.ThrowUnexpectedNode=function(t,e,a){var i=t.Marker,r=e||"æ§è¡å¼å¸¸";return this.ErrorHandler.ThrowError(i.Index,i.Line,i.Column,r,a)},this.ThrowDownloadSF=function(t,e,a){var i=t.Marker,r=a;return this.ErrorHandler.ThrowDownloadJob(i.Index,i.Line,i.Column,r,e)},this.ThrowError=function(){}}function gr(t,e){this.AST=t,this.ErrorHandler=new ur,this.ErrorCallback,this.UpdateUICallback,this.CallbackParam,this.JobList=[],this.VarTable=new Vn.default,this.OutVarTable=[],this.MaxValueLength=150,this.ConstVarTable=new Vn.default([["CLOSE","æ¶çä»·"],["VOL","æäº¤é"],["OPEN","å¼çä»·"],["HIGH","æé«ä»·"],["LOW","æä½ä»·"],["AMOUNT","æäº¤é"],["C","æ¶çä»·"],["V","æäº¤é"],["O","å¼çä»·"],["H","æé«ä»·"],["L","æä½ä»·"],["AMO","æäº¤é"],["VOLR","éæ¯"],["VOLINSTK","æä»é"],["OPI","æä»é"],["ZSTJJ","åä»·"],["QHJSJ","ç»ç®ä»·"],["SETTLE","ç»ç®ä»·"],["DATE","æ¥æ"],["YEAR","å¹´ä»½"],["MONTH","æä»½"],["DAY","æ¥"],["PERIOD","å¨æ"],["WEEK","ææ"],["TIME","æ¶é´"],["INDEXA","å¤§çæäº¤é¢"],["INDEXC","å¤§çæ¶çä»·"],["INDEXH","å¤§çæé«ä»·"],["INDEXL","å¤§çæä½ä»·"],["INDEXO","å¤§çå¼çä»·"],["INDEXV","å¤§çæäº¤é"],["INDEXADV","å¤§çä¸æ¶¨å®¶æ°"],["INDEXDEC","Â´å¤§çä¸è·å®¶æ°"],["ADVANCE","ä¸æ¶¨å®¶æ°"],["DECLINE","ä¸è·å®¶æ°"],["FROMOPEN","å½åç¦»å¼çåéæ°"],["TOTALFZNUM","æ»åéæ°"],["CURRBARSCOUNT","å°æåäº¤æçå¨æ"],["TOTALBARSCOUNT","æ»çå¨ææ°"],["ISLASTBAR","æ¯å¦æ¯æåä¸ä¸ªå¨æ"],["BARSTATUS","æ°æ®ä½ç½®ç¶æ"],["CAPITAL","å½åæµéè¡æ¬(æ)"],["TOTALCAPITAL","å½åæ»è¡æ¬(æ)"],["EXCHANGE","æ¢æç"],["SETCODE","å¸åºç±»å"],["CODE","åç§ä»£ç "],["STKNAME","åç§åç§°"],["TQFLAG","å½åå¤æç¶æ"],["HYBLOCK","æå±è¡ä¸"],["DYBLOCK","æå±å°å"],["GNBLOCK","æå±æ¦å¿µ"],["FGBLOCK","æå±é£æ ¼æ¿å"],["ZSBLOCK","æå±ææ°æ¿å"],["ZHBLOCK","æå±ç»åæ¿å"],["ZDBLOCK","æå±èªå®ä¹æ¿å"],["HYZSCODE","æå±è¡ä¸çæ¿åææ°ä»£ç "],["GNBLOCKNUM","æå±æ¦å¿µæ¿åçä¸ªæ°"],["FGBLOCKNUM","æå±é£æ ¼æ¿åçä¸ªæ°"],["ZSBLOCKNUM","æå±ææ°æ¿åçä¸ªæ°"],["ZHBLOCKNUM","æå±ç»åæ¿åçä¸ªæ°"],["ZDBLOCKNUM","æå±èªå®ä¹æ¿åçä¸ªæ°"],["HYSYL","ææ°å¸ççæä¸ªè¡æå±è¡ä¸çå¸çç"],["HYSJL","ææ°å¸åçæä¸ªè¡æå±è¡ä¸çå¸åç"],["DRAWNULL","æ ææ°æ®"],["TR","æ±çå®æ³¢å¹"],["LARGEINTRDVOL","éç¬ä¹°å¥å¤§åæäº¤é"],["LARGEOUTTRDVOL","éç¬ååºå¤§åæäº¤é"],["TRADENUM","éç¬æäº¤æ»åæ°"],["TRADEINNUM","éç¬ä¹°å¥æäº¤åæ°"],["TRADEOUTNUM","éç¬ååºæäº¤åæ°"],["LARGETRDINNUM","éç¬ä¹°å¥å¤§åæäº¤åæ°"],["LARGETRDOUTNUM","éç¬ååºå¤§åæäº¤åæ°"],["CUR_BUYORDER","æ»å§ä¹°é"],["CUR_SELLORDER","æ»å§åé"],["ACTINVOL","ä¸»å¨ä¹°æäº¤é"],["ACTOUTVOL","ä¸»å¨åæäº¤é"],["BIDORDERVOL","ç´¯è®¡æ»ææå§ä¹°é"],["BIDCANCELVOL","ç´¯è®¡æ»æææ¤ä¹°é"],["AVGBIDPX","ææ°å§ä¹°åä»·"],["OFFERORDERVOL","ç´¯è®¡æ»ææå§åé"],["OFFERCANCELVOL","ç´¯è®¡æ»æææ¤åé"],["AVGOFFERPX","ææ°å§ååä»·"]]),e&&(e.Callback&&(this.UpdateUICallback=e.Callback),e.CallbackParam&&(this.CallbackParam=e.CallbackParam),e.Arguments&&(this.Arguments=e.Arguments)),this.Run=function(){try{this.OutVarTable=[],this.VarTable=new Vn.default,Xn.Complier.Log("[JSExecute::JSExplainer] Load Arguments",this.Arguments);for(var t in this.Arguments){var e=this.Arguments[t];this.VarTable.set(e.Name,e.Value)}var a=this.RunAST();Xn.Complier.Log("[JSExplainer.Run] explain finish",a),this.UpdateUICallback&&(Xn.Complier.Log("[JSExplainer.Run] invoke UpdateUICallback."),this.UpdateUICallback(a))}catch(t){Xn.Complier.Log("[JSExplainer.Run] throw error ",t),this.ErrorCallback&&this.ErrorCallback(t,this.OutVarTable)}},this.RunAST=function(){this.AST||this.ThrowError(),this.AST.Body||this.ThrowError();for(var t=0;t<this.AST.Body.length;++t){var e=this.AST.Body[t];if(this.VisitNode(e),e.Type==Xo.ExpressionStatement&&e.Expression)if(e.Expression.Type==Xo.AssignmentExpression){if(":"==e.Expression.Operator&&e.Expression.Left){var a=e.Expression,i=a.Left.Name,r="è¾åº"+i+": "+this.VarTable.get(i);this.OutVarTable.push({Name:i,Data:r,Type:0})}else if(":="==e.Expression.Operator&&e.Expression.Left){var n=e.Expression,o=n.Left.Name,s="èµå¼"+o+": "+this.VarTable.get(o);this.OutVarTable.push({Name:o,Data:s,Type:0,IsOut:!1})}}else if(e.Expression.Type==Xo.CallExpression){var l=e.Expression;if(this.IsDrawFunction(l.Callee.Name)){var h=l.Out,u=l.Callee.Name;this.OutVarTable.push({Name:u,Draw:"è¾åº: "+h,Type:1})}else{var C=l.Out;D="__temp_c_"+l.Callee.Name+"_"+t+"__",this.OutVarTable.push({Name:D,Data:"è¾åº: "+C,Type:0,NoneName:!0})}}else if(e.Expression.Type==Xo.Identifier){var c=e.Expression.Name,f=this.ReadVariable(c,e.Expression);c="__temp_i_"+t+"__",this.OutVarTable.push({Name:c,Data:"è¾åº: "+f,Type:0,NoneName:!0})}else if(e.Expression.Type==Xo.Literal){var d=e.Expression.Value;we.IsString(d)&&d.indexOf("$")>0&&(d=this.GetOtherSymbolExplain({Literal:d},e)),D="__temp_li_"+t+"__";this.OutVarTable.push({Name:D,Data:"è¾åº: "+d,Type:0,NoneName:!0})}else if(e.Expression.Type==Xo.BinaryExpression){var D="__temp_b_"+t+"__",m=e.Expression.Out;this.OutVarTable.push({Name:D,Data:"è¾åº: "+m,Type:0,NoneName:!0})}else if(e.Expression.Type==Xo.LogicalExpression){var D="__temp_l_"+t+"__",p=e.Expression.Out;this.OutVarTable.push({Name:D,Data:"è¾åº: "+p,Type:0,NoneName:!0})}else if(e.Expression.Type==Xo.UnaryExpression){var D="__temp_l_"+t+"__",v=e.Expression.Argument,g=null;if(v.Type==Xo.Literal)g=v.Value;else if(v.Type==Xo.Identifier){var T=v.Name;g=this.ReadVariable(T,e.Expression)}else v.Type==Xo.BinaryExpression&&(g=v.Out);"-"==e.Expression.Operator&&(g="-"+g),this.OutVarTable.push({Name:D,Data:"è¾åº: "+g,Type:0,NoneName:!0})}else if(e.Expression.Type==Xo.SequenceExpression){var I=void 0,S=void 0,x=void 0,b=void 0,y=void 0,E=!1,w=!1,F=!1,M=!1,L=!1,N=!1,R=!0,A=!1,O=!1,P=!1;for(var B in e.Expression.Expression){var _=e.Expression.Expression[B];if(_.Type==Xo.AssignmentExpression&&":"==_.Operator&&_.Left){I=_.Left.Name;var G=this.VarTable.get(I);this.VarTable.set(I,this.ConvertToShortValue(G))}else if(_.Type==Xo.Identifier){var k=_.Name;if("COLORSTICK"===k)E=!0;else if("POINTDOT"===k)w=!0;else if("CIRCLEDOT"===k)F=!0;else if("DOTLINE"===k)A=!0;else if("LINESTICK"===k)M=!0;else if("STICK"===k)L=!0;else if("VOLSTICK"===k)N=!0;else if("DRAWABOVE"===k)P=!0;else if(0==k.indexOf("COLOR"))b=k;else if(0==k.indexOf("LINETHICK"))y=k;else if("ALIGN0"==k)0;else if("ALIGN1"==k)1;else if("ALIGN2"==k)2;else if("VALIGN0"==k)0;else if("VALIGN1"==k)1;else if("VALIGN2"==k)2;else if(0==k.indexOf("NODRAW"))R=!1;else if(0==k.indexOf("EXDATA"))!0;else if(0==k.indexOf("LINEOVERLAY"))!0;else if(0==k.indexOf("FONTSIZE")){var V=k.replace("FONTSIZE","");parseInt(V)}else{I=_.Name;var H=this.ReadVariable(I,_);I="__temp_si_"+t+"__",O=!0,this.VarTable.set(I,this.ConvertToShortValue(H))}}else if(_.Type==Xo.Literal){var Y=_.Value;I=_.Value.toString(),O=!0,this.VarTable.set(I,Y)}else if(_.Type==Xo.CallExpression){if(0==B)if(this.IsDrawFunction(_.Callee.Name))x=_.Out,S=_.Callee.Name;else{var X=_.Out;I="__temp_sc_"+_.Callee.Name+"_"+t+"__",O=!0,this.VarTable.set(I,X)}}else if(_.Type==Xo.BinaryExpression){I="__temp_sb_"+t+"__";var W=_.Out;O=!0,this.VarTable.set(I,W)}else if(_.Type==Xo.UnaryExpression){I="__temp_sb_"+t+"__";var v=_.Argument,U=null;if(v.Type==Xo.Literal)U=v.Value;else if(v.Type==Xo.Identifier){var K=v.Name;U=this.ReadVariable(K,e.Expression)}else v.Type==Xo.BinaryExpression&&(U=v.Out);"-"==_.Operator&&(U="-"+U),O=!0,this.VarTable.set(I,U)}}var z;if(z=x?"è¾åº: "+x:O?"è¾åº: "+this.VarTable.get(I):"è¾åº"+I+": "+this.VarTable.get(I),b&&(z+=",é¢è²"+this.GetColorExplain(b)),y&&(z+=",çº¿æ®µç²ç»"+this.GetLineWidthExplain(y)),0==R&&(z+=",ä¸æ¾ç¤º"),1==A&&(z+=",ç»èçº¿"),1==P&&(z+=",æ¾ç¤ºå¨ä½ç½®ä¹ä¸"),w&&I){z+=",ç»å°åç¹çº¿";var J={Name:I,Draw:z,Radius:So.POINTDOT.Radius,Type:3};this.OutVarTable.push(J)}else if(F&&I){z+=",ç»å°ååçº¿";var q={Name:I,Draw:z,Radius:So.CIRCLEDOT.Radius,Type:3};this.OutVarTable.push(q)}else if(M&&I){z+=",ç»åºæ±ç¶çº¿åææ çº¿";var Z={Name:I,Draw:z,Type:4};this.OutVarTable.push(Z)}else if(L&&I){z+=",ç»æ±ç¶çº¿";var j={Name:I,Draw:z,Type:5};this.OutVarTable.push(j)}else if(N&&I){z+=",ç»æäº¤éæ±ç¶çº¿";var Q={Name:I,Draw:z,Type:6};this.OutVarTable.push(Q)}else if(I&&b){var $={Name:I,Data:z,Color:b,Type:0};this.OutVarTable.push($)}else if(x){var tt={Name:S,Draw:z,Type:1};this.OutVarTable.push(tt)}else if(E&&I){z+=",ç»å½©è²æ±ç¶çº¿";var et={Name:I,Draw:z,Color:b,Type:2};this.OutVarTable.push(et)}else if(I){var at={Name:I,Data:z,Type:0};this.OutVarTable.push(at)}}}return Xn.Complier.Log("[JSExplainer::Run]",this.VarTable),this.OutVarTable},this.VisitNode=function(t){switch(t.Type){case Xo.SequenceExpression:this.VisitSequenceExpression(t);break;case Xo.ExpressionStatement:this.VisitNode(t.Expression);break;case Xo.AssignmentExpression:this.VisitAssignmentExpression(t);break;case Xo.BinaryExpression:case Xo.LogicalExpression:this.VisitBinaryExpression(t);break;case Xo.CallExpression:this.VisitCallExpression(t);break;case Xo.UnaryExpression:this.VisitUnaryExpression(t)}},this.VisitSequenceExpression=function(t){for(var e in t.Expression){var a=t.Expression[e];this.VisitNode(a)}},this.VisitUnaryExpression=function(t){if("-"==t.Operator){return"-"+this.GetNodeValueEx(t.Argument)}return t.Argument.Value},this.VisitCallExpression=function(t){var e=t.Callee.Name,a=[];for(var i in t.Arguments){var r=t.Arguments[i],n=void 0;n=r.Type==Xo.BinaryExpression||r.Type==Xo.LogicalExpression?this.VisitBinaryExpression(r):r.Type==Xo.CallExpression?this.VisitCallExpression(r):this.GetNodeValue(r),a.push(n)}if(t.Callee.Type==Xo.Literal){var o=t.Callee.Value;return t.Out="ææ å¼ç¨'"+o+"'",t.Out}if(Uo&&Xn.Complier.Log("[JSExplainer::VisitCallExpression]",e,"(",a.toString(),")"),Go.IsCustomFunction(e)){var s=Go.CustomFunction.Data.get(e);return s.Description?t.Out=s.Description:t.Out="èªå®ä¹å½æ°"+e,t.Out}return t.Out=this.CallFunctionExplain(e,a,t),t.Out},this.FUNCTION_INFO_LIST=new Vn.default([["REF",{Name:"REF",Param:{Count:2},ToString:function(t){return t[1]+"æ¥åç"+t[0]}}],["REFX",{Name:"REFX",Param:{Count:2},ToString:function(t){return t[1]+"æ¥åç"+t[0]}}],["REFV",{Name:"REFV",Param:{Count:2},ToString:function(t){return t[1]+"æ¥åç(æªä½å¹³æ»å¤ç)"+t[0]}}],["REFXV",{Name:"REFXV",Param:{Count:2},ToString:function(t){return t[1]+"æ¥åç(æªä½å¹³æ»å¤ç)"+t[0]}}],["REFDATE",{Name:"REFDATE",Param:{Count:2},ToString:function(t){return t[1]+"æ¥"+t[0]}}],["COUNT",{Name:"COUNT",Param:{Count:2},ToString:function(t){return"ç»è®¡"+t[1]+"æ¥ä¸­æ»¡è¶³"+t[0]+"çå¤©æ°"}}],["BARSLASTCOUNT",{Name:"BARSLASTCOUNT",Param:{Count:1},ToString:function(t){return"æ¡ä»¶"+t[0]+"è¿ç»­æç«æ¬¡æ°"}}],["BARSCOUNT",{Name:"BARSCOUNT",Param:{Count:1},ToString:function(t){return t[0]+"æææ°æ®å¨ææ°"}}],["BARSLAST",{Name:"BARSLAST",Param:{Count:1},ToString:function(t){return"ä¸æ¬¡"+t[0]+"ä¸ä¸º0è·ä»å¤©æ°"}}],["BARSLASTS",{Name:"BARSLASTS",Param:{Count:2},ToString:function(t){return"åæ°ç¬¬Næ¬¡æç«æ¶è·ä»çå¨ææ°"}}],["BARSNEXT",{Name:"BARSNEXT",Param:{Count:1},ToString:function(t){return"ä¸æ¬¡"+t[0]+"ä¸ä¸º0è·ä»å¤©æ°"}}],["BARSSINCEN",{Name:"BARSSINCEN",Param:{Count:2},ToString:function(t){return"å¨"+t[1]+"å¨æåé¦æ¬¡"+t[0]+"è·ä»å¤©æ°"}}],["BARSSINCE",{Name:"BARSSINCE",Param:{Count:1},ToString:function(t){return"é¦æ¬¡"+t[0]+"è·ä»å¤©æ°"}}],["HHV",{Name:"HHV",Param:{Count:2},ToString:function(t){return t[1]+"æ¥å"+t[0]+"çæé«å¼"}}],["LLV",{Name:"LLV",Param:{Count:2},ToString:function(t){return t[1]+"æ¥å"+t[0]+"çæä½å¼"}}],["ZTPRICE",{Name:"ZTPRICE",Param:{Count:2},ToString:function(t){return"è®¡ç®æ¶¨åä»·"}}],["DTPRICE",{Name:"DTPRICE",Param:{Count:2},ToString:function(t){return"è®¡ç®è·åä»·"}}],["BACKSET",{Name:"BACKSET",Param:{Count:2},ToString:function(t){return"è¥"+t[0]+"åå°æè¿"+t[1]+"å¨æç½®ä¸º1"}}],["HOD",{Name:"HOD",Param:{Count:2},ToString:function(t){return t[1]+"æ¥å"+t[0]+"çé«å¼åæ¬¡"}}],["LOD",{Name:"LOD",Param:{Count:2},ToString:function(t){return t[1]+"æ¥å"+t[0]+"çä½å¼åæ¬¡"}}],["REVERSE",{Name:"REVERSE",Param:{Count:1},ToString:function(t){return t[0]+"çç¸åæ°"}}],["FILTER",{Name:"FILTER",Param:{Count:2},ToString:function(t){return t[0]+"ç"+t[1]+"æ¥è¿æ»¤"}}],["FILTERX",{Name:"FILTERX",Param:{Count:2},ToString:function(t){return t[0]+"ç"+t[1]+"æ¥ååè¿æ»¤"}}],["TFILTER",{Name:"TFILTER",Param:{Count:3},ToString:function(t){return"ä¿¡å·è¿æ»¤(å¤å¤´)"}}],["SUMBARS",{Name:"SUMBARS",Param:{Count:2},ToString:function(t){return t[0]+"ç´¯å è³"+t[1]+"çå¤©æ°"}}],["MA",{Name:"MA",Param:{Count:2},ToString:function(t){return t[0]+"ç"+t[1]+"æ¥ç®åç§»å¨å¹³å"}}],["SMA",{Name:"SMA",Param:{Count:3},ToString:function(t){return t[0]+"ç"+t[1]+"æ¥["+t[2]+"æ¥æé]ç§»å¨å¹³å"}}],["MEMA",{Name:"MEMA",Param:{Count:2},ToString:function(t){return t[0]+"ç"+t[1]+"æ¥å¹³æ»ç§»å¨å¹³å"}}],["EMA",{Name:"EMA",Param:{Count:2},ToString:function(t){return t[0]+"ç"+t[1]+"æ¥ææ°ç§»å¨å¹³å"}}],["EXPMA",{Name:"EXPMA",Param:{Count:2},ToString:function(t){return t[0]+"ç"+t[1]+"æ¥ææ°ç§»å¨å¹³å"}}],["EXPMEMA",{Name:"EXPMEMA",Param:{Count:2},ToString:function(t){return t[0]+"ç"+t[1]+"æ¥ææ°å¹³æ»ç§»å¨å¹³å"}}],["WMA",{Name:"WMA",Param:{Count:2},ToString:function(t){return t[0]+"ç"+t[1]+"æ¥å æç§»å¨å¹³å"}}],["DMA",{Name:"DMA",Param:{Count:2},ToString:function(t){return"ä»¥"+t[1]+"ä¸ºæé"+t[0]+"çå¨æç§»å¨å¹³å"}}],["XMA",{Name:"XMA",Param:{Count:2},ToString:function(t){return t[0]+"ç"+t[1]+"æ¥åç§»ç§»å¨å¹³å"}}],["RANGE",{Name:"RANGE",Param:{Count:3},ToString:function(t){return t[0]+"ä½äº"+t[1]+"å"+t[2]+"ä¹é´"}}],["CONST",{Name:"CONST",Param:{Count:1},ToString:function(t){return t[0]+"çæåä¸æ¥å¼"}}],["TOPRANGE",{Name:"TOPRANGE",Param:{Count:1},ToString:function(t){return"å½åå¼æ¯è¿"+t[0]+"å¨æçæå¤§å¼"}}],["LOWRANGE",{Name:"LOWRANGE",Param:{Count:1},ToString:function(t){return"å½åå¼æ¯è¿"+t[0]+"å¨æçæå°å¼"}}],["FINDHIGH",{Name:"FINDHIGH",Param:{Count:4},ToString:function(t){return t[0]+"å¨"+t[1]+"æ¥åç"+t[2]+"å¤©åç¬¬"+t[3]+"ä¸ªæé«ä»·"}}],["FINDHIGHBARS",{Name:"FINDHIGHBARS",Param:{Count:4},ToString:function(t){return t[0]+"å¨"+t[1]+"æ¥åç"+t[2]+"å¤©åç¬¬"+t[3]+"ä¸ªæé«ä»·å°å½åå¨æçå¨ææ°"}}],["FINDLOW",{Name:"FINDLOW",Param:{Count:4},ToString:function(t){return t[0]+"å¨"+t[1]+"æ¥åç"+t[2]+"å¤©åç¬¬"+t[3]+"ä¸ªæä½ä»·"}}],["FINDLOWBARS",{Name:"FINDLOWBARS",Param:{Count:2},ToString:function(t){return t[0]+"å¨"+t[1]+"æ¥åç"+t[2]+"å¤©åç¬¬"+t[3]+"ä¸ªæä½ä»·å°å½åå¨æçå¨ææ°"}}],["SUM",{Name:"SUM",Param:{Count:2},ToString:function(t){return""+t[0]+t[1]+"æ¥ç´¯å "}}],["MULAR",{Name:"MULAR",Param:{Count:2},ToString:function(t){return t[0]+"å"+t[1]+"æ¥ç´¯ä¹"}}],["AMA",{Name:"AMA",Param:{Count:2},ToString:function(t){return"ä»¥"+t[1]+"ä¸ºæé"+t[0]+"çèªéåºåçº¿"}}],["TMA",{Name:"TMA",Param:{Count:3},ToString:function(t){return t[0]+"ç"+t[1]+"æ¥["+t[2]+"æ¥æé]ç§»å¨å¹³å"}}],["CROSS",{Name:"CROSS",Param:{Count:2},ToString:function(t){return t[0]+"ä¸ç©¿"+t[1]}}],["LONGCROSS",{Name:"LONGCROSS",Param:{Count:3},ToString:function(t){return t[0]+"å°äº"+t[1]+"ä¿æ"+t[2]+"ä¸ªäº¤ææ¥åäº¤åä¸ç©¿"}}],["UPNDAY",{Name:"UPNDAY",Param:{Count:2},ToString:function(t){return"æè¿"+t[1]+"æ¥"+t[0]+"è¿æ¶¨"}}],["DOWNNDAY",{Name:"DOWNNDAY",Param:{Count:2},ToString:function(t){return"æè¿"+t[1]+"æ¥"+t[0]+"è¿è·"}}],["NDAY",{Name:"NDAY",Param:{Count:3},ToString:function(t){return"æè¿"+t[2]+"æ¥"+t[0]+"ä¸ç´å¤§äº"+t[1]}}],["EXIST",{Name:"EXIST",Param:{Count:2},ToString:function(t){return"æè¿"+t[1]+"æ¥å­å¨"+t[0]}}],["EXISTR",{Name:"EXISTR",Param:{Count:3},ToString:function(t){return"ä»å"+t[1]+"æ¥å°å"+t[2]+"æ¥å­å¨"+t[0]}}],["EVERY",{Name:"EVERY",Param:{Count:2},ToString:function(t){return"æè¿"+t[1]+"æ¥ä¸ç´å­å¨"+t[0]}}],["LAST",{Name:"LAST",Param:{Count:3},ToString:function(t){return"ä»å"+t[1]+"æ¥å°å"+t[2]+"æ¥æç»­"+t[0]}}],["NOT",{Name:"NOT",Param:{Count:1},ToString:function(t){return t[0]+"åå"}}],["IF",{Name:"IF",Param:{Count:3},ToString:function(t){return"å¦æ"+t[0]+",è¿å"+t[1]+",å¦åè¿å"+t[2]}}],["IFF",{Name:"IFF",Param:{Count:3},ToString:function(t){return"å¦æ"+t[0]+",è¿å"+t[1]+",å¦åè¿å"+t[2]}}],["IFN",{Name:"IFN",Param:{Count:3},ToString:function(t){return"å¦æ"+t[0]+",è¿å"+t[1]+",å¦åè¿å"+t[2]}}],["IFC",{Name:"IFC",Param:{Count:3},ToString:function(t){return"å¦æ"+t[0]+",è¿å"+t[1]+",å¦åè¿å"+t[2]}}],["TESTSKIP",{Name:"TESTSKIP",Param:{Count:1},ToString:function(t){return"å¦ææ»¡è¶³æ¡ä»¶"+t[0]+",å¬å¼è¿å"}}],["VALUEWHEN",{Name:"VALUEWHEN",Param:{Count:2},ToString:function(t){return"å¦æ"+t[0]+",è¿å"+t[1]+",å¦åè¿åä¸ä¸ªè¾åºå¼ "}}],["MAX",{Name:"MAX",Param:{Count:2},ToString:function(t){return t[0]+"å"+t[1]+"çè¾å¤§å¼"}}],["MIN",{Name:"MIN",Param:{Count:2},ToString:function(t){return t[0]+"å"+t[1]+"çè¾å°å¼"}}],["ACOS",{Name:"ACOS",Param:{Count:1},ToString:function(t){return t[0]+"çåä½å¼¦"}}],["ASIN",{Name:"ASIN",Param:{Count:1},ToString:function(t){return t[0]+"çåæ­£å¼¦"}}],["ATAN",{Name:"ATAN",Param:{Count:1},ToString:function(t){return t[0]+"çåæ­£å"}}],["COS",{Name:"COS",Param:{Count:1},ToString:function(t){return t[0]+"çä½å¼¦"}}],["SIN",{Name:"SIN",Param:{Count:1},ToString:function(t){return t[0]+"çæ­£å¼¦"}}],["TAN",{Name:"TAN",Param:{Count:1},ToString:function(t){return t[0]+"çæ­£å"}}],["EXP",{Name:"EXP",Param:{Count:1},ToString:function(t){return t[0]+"çææ°"}}],["LN",{Name:"LN",Param:{Count:1},ToString:function(t){return t[0]+"çèªç¶å¯¹æ°"}}],["LOG",{Name:"LOG",Param:{Count:1},ToString:function(t){return t[0]+"çå¯¹æ°"}}],["SQRT",{Name:"SQRT",Param:{Count:1},ToString:function(t){return t[0]+"çå¼æ¹"}}],["ABS",{Name:"ABS",Param:{Count:1},ToString:function(t){return t[0]+"çç»å¯¹å¼"}}],["POW",{Name:"POW",Param:{Count:2},ToString:function(t){return t[0]+"ç"+t[1]+"ä¹å¹"}}],["CEILING",{Name:"CEILING",Param:{Count:1},ToString:function(t){return t[0]+"çåä¸èå¥"}}],["FLOOR",{Name:"FLOOR",Param:{Count:1},ToString:function(t){return t[0]+"çåä¸èå¥"}}],["INTPART",{Name:"INTPART",Param:{Count:1},ToString:function(t){return t[0]+"çæ´æ°é¨å"}}],["BETWEEN",{Name:"BETWEEN",Param:{Count:3},ToString:function(t){return t[0]+"ä½äº"+t[1]+"å"+t[2]+"ä¹é´"}}],["FRACPART",{Name:"FRACPART",Param:{Count:1},ToString:function(t){return t[0]+"çå°æ°é¨å"}}],["ROUND",{Name:"ROUND",Param:{Count:1},ToString:function(t){return"å¯¹"+t[0]+"(è¿è¡)åèäºå¥"}}],["ROUND2",{Name:"ROUND2",Param:{Count:2},ToString:function(t){return"å¯¹"+t[0]+"(è¿è¡)åèäºå¥"}}],["SIGN",{Name:"SIGN",Param:{Count:1},ToString:function(t){return t[0]+"çç¬¦å·"}}],["MOD",{Name:"MOD",Param:{Count:2},ToString:function(t){return t[0]+"å³äº"+t[1]+"çæ¨¡"}}],["RAND",{Name:"RAND",Param:{Count:1},ToString:function(t){return"éæºæ­£æ´æ°"}}],["AVEDEV",{Name:"AVEDEV",Param:{Count:2},ToString:function(t){return t[0]+"ç"+t[1]+"æ¥å¹³åç»å¯¹åå·®"}}],["DEVSQ",{Name:"DEVSQ",Param:{Count:2},ToString:function(t){return t[0]+"ç"+t[1]+"æ¥æ°æ®åå·®å¹³æ¹å"}}],["FORCAST",{Name:"FORCAST",Param:{Count:2},ToString:function(t){return t[0]+"ç"+t[1]+"æ¥çº¿æ§åå½é¢æµå¼"}}],["TSMA",{Name:"TSMA",Param:{Count:2},ToString:function(t){return t[0]+"å¨"+t[1]+"ä¸ªå¨æåçæ¶é´åºåä¸è§ç§»å¨å¹³å"}}],["SLOPE",{Name:"SLOPE",Param:{Count:2},ToString:function(t){return t[0]+"ç"+t[1]+"æ¥çº¿æ§åå½æç"}}],["STD",{Name:"STD",Param:{Count:2},ToString:function(t){return t[0]+"ç"+t[1]+"æ¥ä¼°ç®æ åå·®"}}],["STDP",{Name:"STDP",Param:{Count:2},ToString:function(t){return t[0]+"ç"+t[1]+"æ¥æ»ä½æ åå·®"}}],["STDDEV",{Name:"STDDEV",Param:{Count:2},ToString:function(t){return t[0]+"ç"+t[1]+"æ¥æ ååå·®"}}],["VAR",{Name:"VAR",Param:{Count:2},ToString:function(t){return t[0]+"ç"+t[1]+"æ¥ä¼°ç®æ ·æ¬æ¹å·®"}}],["VARP",{Name:"VARP",Param:{Count:2},ToString:function(t){return t[0]+"ç"+t[1]+"æ¥æ»ä½æ ·æ¬æ¹å·®"}}],["COVAR",{Name:"COVAR",Param:{Count:3},ToString:function(t){return t[0]+"å"+t[1]+"ç"+t[2]+"å¨æçåæ¹å·®"}}],["RELATE",{Name:"RELATE",Param:{Count:3},ToString:function(t){return t[0]+"å"+t[1]+"ç"+t[0]+"å¨æçç¸å³ç³»æ°"}}],["BETA",{Name:"BETA",Param:{Count:1},ToString:function(t){return"Î²(Beta)ç³»æ°"}}],["BETAEX",{Name:"BETAEX",Param:{Count:3},ToString:function(t){return t[0]+"å"+t[1]+"ç"+t[2]+"å¨æçç¸å³æ¾å¤§ç³»æ°"}}],["COST",{Name:"COST",Param:{Count:1},ToString:function(t){return"è·å©çä¸º"+t[0]+"%çææ¬åå¸"}}],["WINNER",{Name:"WINNER",Param:{Count:1},ToString:function(t){return"ä»¥"+t[0]+"è®¡ç®çè·å©çæ¯ä¾"}}],["LWINNER",{Name:"LWINNER",Param:{Count:2},ToString:function(t){return"æè¿"+t[0]+"æ¥é£é¨åææ¬ä»¥"+t[1]+"ä»·æ ¼ååºçè·å©çæ¯ä¾"}}],["PWINNER",{Name:"PWINNER",Param:{Count:2},ToString:function(t){return t[0]+"æ¥åé£é¨åææ¬ä»¥"+t[1]+"ä»·æ ¼ååºçè·å©çæ¯ä¾"}}],["COSTEX",{Name:"COSTEX",Param:{Count:2},ToString:function(t){return"ä½äºä»·æ ¼"+t[0]+"å"+t[1]+"é´çææ¬"}}],["PPART",{Name:"PPART",Param:{Count:2},ToString:function(t){return t[0]+"æ¥åé£é¨åææ¬å æ»ææ¬çæ¯ä¾"}}],["SAR",{Name:"SAR",Param:{Count:3},ToString:function(t){return"æ­¥é¿ä¸º"+t[1]+"æéå¼ä¸º"+t[0]+"ç"+t[2]+"æ¥æç©è½¬å"}}],["SARTURN",{Name:"SARTURN",Param:{Count:3},ToString:function(t){return"æ­¥é¿ä¸º"+t[1]+"æéå¼ä¸º"+t[0]+"ç"+t[2]+"æ¥æç©è½¬åç¹"}}],["CON2STR",{Name:"CON2STR",Param:{Count:2},ToString:function(t){return t[0]+"è½¬ä¸ºå­ç¬¦ä¸²"}}],["VAR2STR",{Name:"VAR2STR",Param:{Count:2},ToString:function(t){return t[0]+"è½¬ä¸ºå­ç¬¦ä¸²"}}],["STR2CON",{Name:"STR2CON",Param:{Count:1},ToString:function(t){return t[0]+"è½¬ä¸ºæ°å­"}}],["STRLEN",{Name:"STRLEN",Param:{Count:1},ToString:function(t){return"å¾å°"+t[0]+"å­ç¬¦ä¸²é¿åº¦"}}],["STRCAT",{Name:"STRCAT",Param:{Count:2},ToString:function(t){return"å­ç¬¦ä¸²ç¸å "}}],["VARCAT",{Name:"VARCAT",Param:{Count:2},ToString:function(t){return"å­ç¬¦ä¸²ç¸å "}}],["STRSPACE",{Name:"STRSPACE",Param:{Count:1},ToString:function(t){return"å­ç¬¦ä¸²"+t[0]+"å ä¸ç©ºæ ¼"}}],["SUBSTR",{Name:"SUBSTR",Param:{Count:3},ToString:function(t){return"å­ç¬¦ä¸²"+t[0]+"ä¸­åä¸é¨å"}}],["STRCMP",{Name:"STRCMP",Param:{Count:2},ToString:function(t){return"å­ç¬¦ä¸²"+t[0]+"åå­ç¬¦ä¸²"+t[1]+"æ¯è¾"}}],["FINDSTR",{Name:"FINDSTR",Param:{Count:2},ToString:function(t){return"å­ç¬¦ä¸²"+t[0]+"ä¸­æ¥æ¾å­ç¬¦ä¸²"+t[1]}}],["NAMEINCLUDE",{Name:"NAMEINCLUDE",Param:{Count:1},ToString:function(t){return"æ¥æ¾åç§åç§°ä¸­åå«"+t[0]}}],["CODELIKE",{Name:"CODELIKE",Param:{Count:1},ToString:function(t){return"æ¥æ¾åç§åç§°ä¸­åå«"+t[0]}}],["INBLOCK",{Name:"AVEDEV",Param:{Count:1},ToString:function(t){return"å±äº"+t[0]+"æ¿å"}}],["STKINDI",{Name:"STKINDI",Param:{Dynamic:!0},ToString:function(t){return"ææ å¼ç¨"}}],["STRFORMAT",{Name:"STRFORMAT",Param:{Dynamic:!0},ToString:function(t){return"æ ¼å¼å"+t[0]+"å­ç¬¦ä¸²"}}],["NAMELIKE",{Name:"NAMELIKE",Param:{Count:1},ToString:function(t){return"åç§åç§°æ¯å¦ä»¥'"+t[0]+"'å¼å¤´"}}],["HHVBARS",{Name:"HHVBARS",Param:{Count:2},ToString:function(t){return 0==t[1]?"åå²"+t[0]+"æ°é«è·ä»å¤©æ°":t[1]+"æ¥å"+t[0]+"æ°é«è·ä»å¤©æ°"}}],["LLVBARS",{Name:"LLVBARS",Param:{Count:2},ToString:function(t){return 0==t[1]?"åå²"+t[0]+"æ°ä½è·ä»å¤©æ°":t[1]+"æ¥å"+t[0]+"æ°ä½è·ä»å¤©æ°"}}],["L2_VOLNUM",{Name:"L2_VOLNUM",Param:{Count:2},ToString:function(t){return"åæ°åæ¡£"}}],["L2_VOL",{Name:"L2_VOL",Param:{Count:2},ToString:function(t){return"æäº¤éåæ¡£"}}],["L2_AMO",{Name:"L2_AMO",Param:{Count:2},ToString:function(t){return"æäº¤é¢åæ¡£"}}]]),this.CallFunctionExplain=function(t,e,a){if(this.FUNCTION_INFO_LIST.has(t)){var i=this.FUNCTION_INFO_LIST.get(t);return!0===i.Param.Dynamic||i.Param.Count!=e.length&&this.ThrowUnexpectedNode(a,"å½æ°"+t+"åæ°ä¸ªæ°ä¸æ­£ç¡®. éè¦"+i.Param.Count+"ä¸ªåæ°"),i.ToString(e)}switch(t){case"CALCSTOCKINDEX":return"å¼ç¨"+e[0]+"ç"+e[1]+"ææ ç¬¬"+e[2]+"ä¸ªè¾åºå¼";case"PEAK":case"PEAKBARS":case"ZIG":case"ZIGA":case"TROUGH":case"TROUGHBARS":return this.GetZIGExplain(t,e);case"FINANCE":return this.GetFinanceExplain(e);case"DYNAINFO":return this.GetDynainfoExplain(e);case"CLOSE":case"C":case"VOL":case"V":case"OPEN":case"O":case"HIGH":case"H":case"LOW":case"L":case"AMOUNT":case"AMO":return this.GetOtherSymbolExplain({FunctionName:t,Args:e},a);case"PLOYLINE":return"å½æ»¡è¶³æ¡ä»¶"+e[0]+"æ¶ä»¥"+e[1]+"ä½ç½®ä¸ºé¡¶ç¹ç»æçº¿è¿æ¥";case"DRAWLINE":return"å½æ»¡è¶³æ¡ä»¶"+e[0]+"æ¶,å¨"+e[1]+"ä½ç½®ç»ç´çº¿èµ·ç¹ï¼å½æ»¡è¶³æ¡ä»¶"+e[2]+"æ¶,å¨"+e[3]+"ä½ç½®ç»ç´çº¿ç»ç¹,"+e[4]+"è¡¨ç¤ºæ¯å¦å»¶é¿";case"DRAWSL":return"å½æ»¡è¶³æ¡ä»¶"+e[0]+"æ¶,å¨"+e[1]+"ä½ç½®ç»æçº¿çº¿æ§åå½,"+e[2]+"æç,"+e[3]+"é¿åº¦,"+e[4]+"æ¹å";case"DRAWKLINE":case"DRAWKLINE1":return"Kçº¿";case"DRAWICON":return"å½æ»¡è¶³æ¡ä»¶"+e[0]+"æ¶,å¨"+e[1]+"ä½ç½®ç»"+e[2]+"å·å¾æ ";case"DRAWTEXT":return"å½æ»¡è¶³æ¡ä»¶"+e[0]+"æ¶,å¨"+e[1]+"ä½ç½®ä¹¦åæå­";case"DRAWTEXT_FIX":return"å½æ»¡è¶³æ¡ä»¶"+e[0]+"æ¶,å¨æ¨ªè½´"+e[1]+"çºµè½´"+e[2]+"ä½ç½®ä¹¦åæå­";case"DRAWNUMBER":return"å½æ»¡è¶³æ¡ä»¶"+e[0]+"æ¶,å¨"+e[1]+"ä½ç½®ä¹¦åæ°å­";case"DRAWNUMBER_FIX":return"å½æ»¡è¶³æ¡ä»¶"+e[0]+"æ¶,å¨æ¨ªè½´"+e[1]+"çºµè½´"+e[2]+"ä½ç½®ä¹¦åæ°å­";case"RGB":return"èªå®è²["+e[0]+","+e[1]+","+e[2]+"]";case"RGBA":return"èªå®è²["+e[0]+","+e[1]+","+e[2]+","+e[3]+"]";case"DRAWBAND":return"ç»å¸¦ç¶çº¿";case"DRAWRECTREL":return"ç¸å¯¹ä½ç½®ä¸ç»ç©å½¢.";case"DRAWGBK":return"å¡«åèæ¯";case"TIPICON":return"å½æ»¡è¶³æ¡ä»¶"+e[0]+"æ¶,å¨"+e[1]+"ä½ç½®ç»"+e[2]+"å·å¾æ ";case"STICKLINE":var r="";return r=-1==e[4]?"èçº¿ç©ºå¿æ±":0==e[4]?"å®å¿æ±":"å®çº¿ç©ºå¿æ±","å½æ»¡è¶³æ¡ä»¶"+e[0]+"æ¶, å¨"+e[1]+"å"+e[2]+"ä½ç½®ä¹é´ç»æ±ç¶çº¿,å®½åº¦ä¸º"+e[3]+","+r;case"PARTLINE":return"ç»æçº¿";case"SELL":return"ååºå¹³ä»";case"BUY":return"ä¹°å¥å¼ä»";case"SELLSHORT":return"ååºå¼ä»";case"BUYSHORT":return"ä¹°å¥å¹³ä»";case"YMOVE":return;case"BACKGROUND":return"ç»å¶èæ¯";case"UPCOLOR":return"ä¸æ¶¨é¢è²"+e[0];case"DOWNCOLOR":return"ä¸è·é¢è²"+e[0];case"STICKTYPE":case"FIRSTDRAW":return"";default:this.ThrowUnexpectedNode(a,"å½æ°"+t+"ä¸å­å¨")}},this.GetDynainfoExplain=function(t){var e=new Vn.default([[3,"åæ¶çä»·"],[4,"å¼çä»·"],[5,"æé«ä»·"],[6,"æä½ä»·"],[7,"ç°ä»·"],[8,"æ»é"],[9,"ç°é"],[10,"æ»éé¢"],[11,"åä»·"],[12,"æ¥æ¶¨è·"],[13,"æ¯å¹"],[14,"æ¶¨å¹"],[15,"å¼çæ¶çæäº¤éé¢"],[16,"å5æ¥æ¯åéåé"],[17,"éæ¯"],[18,"ä¸æ¶¨å®¶æ°"],[19,"ä¸è·å®¶æ°"]]),a=t[0];return e.has(a)?e.get(a):"å³æ¶è¡æ["+a+"]"},this.GetFinanceExplain=function(t){var e=new Vn.default([[1,"æ»è¡æ¬"],[2,"å¸åºç±»å"],[3,"æ²ªæ·±åç§ç±»å"],[4,"æ²ªæ·±è¡ä¸ä»£ç "],[5,"Bè¡"],[6,"Hè¡"],[7,"æµéè¡æ¬[è¡]"],[8,"è¡ä¸äººæ°[æ·]"],[9,"èµäº§è´åºç%"],[10,"æ»èµäº§"],[11,"æµå¨èµäº§"],[12,"åºå®èµäº§"],[13,"æ å½¢èµäº§"],[15,"æµå¨è´åº"],[16,"å°æ°è¡ä¸æç"]]),a=t[0];return e.has(a)?e.get(a):"è´¢å¡æ°æ®["+a+"]"},this.GetZIGExplain=function(t,e){var a=e[0];switch(0==a?a="å¼çä»·":1==a?a="æé«ä»·":2==a?a="æä½ä»·":3==a&&(a="æ¶çä»·"),t){case"PEAK":return a+"ç"+e[1]+"%ä¹å­è½¬åçå"+e[2]+"ä¸ªæ³¢å³°å¼";case"PEAKBARS":return a+"ç"+e[1]+"5%ä¹å­è½¬åçå"+e[2]+"ä¸ªæ³¢å³°ä½ç½®";case"ZIG":return a+"ç"+e[1]+"çä¹å­è½¬å";case"ZIGA":return a+"åå"+e[1]+"çä¹å­è½¬å";case"TROUGH":return a+"ç"+e[1]+"%ä¹å­è½¬åçå"+e[2]+"ä¸ªæ³¢è°·å¼";case"TROUGHBARS":return a+"ç"+e[1]+"%ä¹å­è½¬åçå"+e[2]+"ä¸ªæ³¢è°·ä½ç½®"}},this.GetColorExplain=function(t){var e=new Vn.default([["COLORBLACK","é»è²"],["COLORBLUE","èè²"],["COLORGREEN","ç»¿è²"],["COLORCYAN","éè²"],["COLORRED","çº¢è²"],["COLORMAGENTA","æ´çº¢è²"],["COLORBROWN","æ£è²"],["COLORLIGRAY","æ·¡ç°è²"],["COLORGRAY","æ·±ç°è²"],["COLORLIBLUE","æ·¡èè²"],["COLORLIGREEN","æ·¡ç»¿è²"],["COLORLICYAN","æ·¡éè²"],["COLORLIRED","æ·¡çº¢è²"],["COLORLIMAGENTA","æ·¡æ´çº¢è²"],["COLORWHITE","ç½è²"],["COLORYELLOW","é»è²"]]);return e.has(t)?e.get(t):0==t.indexOf("COLOR")?"#"+t.substr(5):"rgb(30,144,255)"},this.GetLineWidthExplain=function(t){var e=parseInt(t.replace("LINETHICK",""));return we.IsPlusNumber(e)?e:1},this.SymbolPeriodExplain=function(t,e){var a=new Vn.default([["CLOSE","æ¶çä»·"],["C","æ¶çä»·"],["VOL","æäº¤é"],["V","æäº¤é"],["OPEN","å¼çä»·"],["O","å¼çä»·"],["HIGH","æé«ä»·"],["H","æé«ä»·"],["LOW","æä½ä»·"],["L","æä½ä»·"],["AMOUNT","æäº¤éé¢"],["AMO","æäº¤éé¢"],["VOLINSTK","æä»é"]]),i=new Vn.default([["MIN1","1åé"],["MIN5","5åé"],["MIN15","15åé"],["MIN30","30åé"],["MIN60","60åé"],["DAY","æ¥"],["WEEK","å¨"],["MONTH","æ"],["SEASON","å­£"],["YEAR","å¹´"],["WEEK2","åå¨"],["HALFYEAR","åå¹´"]]),r=t;a.has(t)&&(r=a.get(t));var n=e;return i.has(e)&&(n=i.get(e)),r+"[å"+n+"æ°æ®]"},this.GetOtherSymbolExplain=function(t,e){var a=new Vn.default([["CLOSE","æ¶çä»·"],["C","æ¶çä»·"],["VOL","æäº¤é"],["V","æäº¤é"],["OPEN","å¼çä»·"],["O","å¼çä»·"],["HIGH","æé«ä»·"],["H","æé«ä»·"],["LOW","æä½ä»·"],["L","æä½ä»·"],["AMOUNT","æäº¤éé¢"],["AMO","æäº¤éé¢"],["VOLINSTK","æä»é"]]);if(t.FunctionName){var i=t.Args,r=a.get(t.FunctionName);return"["+i[0]+"]"+r}if(t.Literal){var n=t.Literal.toUpperCase(),i=n.split("$");if(!a.has(i[1]))return"";var o=i[0],r=a.get(i[1]);return"["+o+"]"+r}},this.IsDrawFunction=function(t){return!!new Rn.default(["STICKLINE","DRAWTEXT","SUPERDRAWTEXT","DRAWLINE","DRAWBAND","DRAWKLINE","DRAWKLINE1","DRAWKLINE_IF","PLOYLINE","POLYLINE","DRAWNUMBER","DRAWNUMBER_FIX","DRAWICON","DRAWCHANNEL","PARTLINE","DRAWTEXT_FIX","DRAWGBK","DRAWTEXT_LINE","DRAWRECTREL","DRAWTEXTABS","DRAWOVERLAYLINE","FILLRGN","FILLRGN2","FILLTOPRGN","FILLBOTTOMRGN","FILLVERTICALRGN","FLOATRGN","DRAWSL","DRAWGBK2","BUY","BUYSHORT","SELL","SELLSHORT"]).has(t)},this.VisitAssignmentExpression=function(t){var e=t.Left;e.Type!=Xo.Identifier&&this.ThrowUnexpectedNode(t);var a=e.Name,i=t.Right,r=null;i.Type==Xo.BinaryExpression||i.Type==Xo.LogicalExpression?r=this.VisitBinaryExpression(i):i.Type==Xo.CallExpression?r=this.VisitCallExpression(i):i.Type==Xo.Literal?(r=i.Value,we.IsString(r)&&i.Value.indexOf("$")>0&&(r=this.GetOtherSymbolExplain({Literal:r},t))):i.Type==Xo.Identifier?r=this.ReadVariable(i.Name,i):i.Type==Xo.MemberExpression?r=this.ReadMemberVariable(i):i.Type==Xo.UnaryExpression&&(r=this.VisitUnaryExpression(i)),Uo&&Xn.Complier.Log("[JSExplainer::VisitAssignmentExpression]",a," = ",r),this.VarTable.set(a,this.ConvertToShortValue(r))},this.ConvertToShortValue=function(t){var e=this.MaxValueLength;if(t&&t.length>=e){var a=t.slice(0,e-10);return a+="......"}return t},this.ReadMemberVariable=function(t){var e=t.Object,a=t.Property,i=void 0;if(e.Type==Xo.BinaryExpression||e.Type==Xo.LogicalExpression)i=this.VisitBinaryExpression(e);else{if(e.Type!=Xo.CallExpression){if(a.Name.indexOf("#")>0)var r=a.Name.split("#"),n=e.Name+"ç"+r[0]+"[å¨æ"+r[1]+"]";else var n=e.Name+"ç"+a.Name;return n}i=this.VisitCallExpression(e)}if(!i)return null;var n=i[a.Name];return n||null},this.VisitBinaryExpression=function(t){var e=[];e.push(t);for(var a=null;0!=e.length;)if(a=e[e.length-1],a.Left&&t!=a.Left&&t!=a.Right)e.push(a.Left);else if(a.Right&&t!=a.Right)e.push(a.Right);else{var i=e.pop();if(i.Type==Xo.BinaryExpression){var r=this.GetNodeValue(i.Left),n=this.GetNodeValue(i.Right);Uo&&Xn.Complier.Log("[JSExplainer::VisitBinaryExpression] BinaryExpression",i,r,n),i.Out=null,i.Out="("+r+" "+i.Operator+" "+n+")","æ¶çä»·"==r&&"å¼çä»·"==n?">"==i.Operator?i.Out="(æ¶é³çº¿)":"<"==i.Operator?i.Out="(æ¶é´çº¿)":"="==i.Operator&&(i.Out="(å¹³ç)"):"å¼çä»·"==r&&"æ¶çä»·"==n&&("<"==i.Operator?i.Out="(æ¶é³çº¿)":">"==i.Operator?i.Out="(æ¶é´çº¿)":"="==i.Operator&&(i.Out="(å¹³ç)")),Uo&&Xn.Complier.Log("[JSExplainer::VisitBinaryExpression] BinaryExpression",i)}else if(i.Type==Xo.LogicalExpression){var o=this.GetNodeValue(i.Left),s=this.GetNodeValue(i.Right);switch(Uo&&Xn.Complier.Log("[JSExecute::VisitBinaryExpression] LogicalExpression",i,o,s),i.Out=null,i.Operator){case"&&":case"AND":i.Out="("+o+" å¹¶ä¸ "+s+")";break;case"||":case"OR":i.Out="("+o+" æè "+s+")"}Uo&&Xn.Complier.Log("[JSExplainer::VisitBinaryExpression] LogicalExpression",i)}t=a}return t.Out},this.GetNodeValueEx=function(t){return t.Type==Xo.BinaryExpression||t.Type==Xo.LogicalExpression?this.VisitBinaryExpression(t):t.Type==Xo.CallExpression?this.VisitCallExpression(t):this.GetNodeValue(t)},this.GetNodeValue=function(t){switch(t.Type){case Xo.Literal:return t.Value;case Xo.UnaryExpression:return this.VisitUnaryExpression(t);case Xo.Identifier:return this.ReadVariable(t.Name,t);case Xo.BinaryExpression:case Xo.LogicalExpression:return t.Out;case Xo.CallExpression:return this.VisitCallExpression(t);default:this.ThrowUnexpectedNode(t)}},this.ReadVariable=function(t,e){if(this.ConstVarTable.has(t)){return this.ConstVarTable.get(t)}if(Go.IsCustomVariant(t)){var a=Go.CustomVariant.Data.get(t);return a.Description?a.Description:t}if(this.VarTable.has(t))return this.VarTable.get(t);if(t.indexOf("#")>0){var i=t.split("#");return this.SymbolPeriodExplain(i[0],i[1])}return"AUTOFILTER"==t?this.AUTOFILTER():(this.ThrowUnexpectedNode(e,"åé"+t+"ä¸å­å¨"),t)},this.AUTOFILTER=function(){return null},this.ThrowUnexpectedNode=function(t,e){var a=t.Marker,i=e||"æ§è¡å¼å¸¸";return this.ErrorHandler.ThrowError(a.Index,a.Line,a.Column,i)},this.ThrowError=function(){}}function Tr(){}function Ir(){this.DataMap=new Vn.default,this.Add=function(t,e){this.DataMap.set(t,{MinuteFittingCallback:e.MinuteFittingCallback,KLineFittingCallback:e.KLineFittingCallback,CreateChartCallback:e.CreateChartCallback,FormatTitleCallback:e.FormatTitleCallback})},this.Get=function(t){return this.DataMap.has(t)?this.DataMap.get(t):null},this.Has=function(t){return this.DataMap.has(t)}}function Sr(t,e,a,i){this.newMethod=Mi,this.newMethod(t),delete this.newMethod,this.ClassName="ScriptIndex",this.Script=e,this.Arguments=[],this.OutVar=[],this.ID,this.FloatPrecision=2,this.StringFormat,this.IsShowIndexTitle=!0,this.KLineType=null,this.InstructionType,this.YSpecificMaxMin=null,this.YSplitScale=null,this.Condition=null,this.OutName=null,this.YSplitType,this.IsLocked=!1,this.LockCallback=null,this.LockID=null,this.LockBG=null,this.LockTextColor=null,this.LockText=null,this.LockFont=null,this.LockCount=20,this.LockMinWidth=null,this.TitleFont=So.TitleFont,this.IsShortTitle=!1,this.IsUsePageData=!1,this.YAxis=null,this.Debug,this.IsSync=!1,this.IsShow=!0,this.RunCount=0,this.MaxRunCount=-1,i&&(i.FloatPrecision>=0&&(this.FloatPrecision=i.FloatPrecision),i.StringFormat>0&&(this.StringFormat=i.StringFormat),we.IsBool(i.IsShowIndexTitle)&&(this.IsShowIndexTitle=i.IsShowIndexTitle),i.ID&&(this.ID=i.ID),(i.KLineType>=0||-1===i.KLineType)&&(this.KLineType=i.KLineType),i.InstructionType&&(this.InstructionType=i.InstructionType),i.YSpecificMaxMin&&(this.YSpecificMaxMin=i.YSpecificMaxMin),i.YSplitScale&&(this.YSplitScale=i.YSplitScale),i.Condition&&(this.Condition=i.Condition),i.TitleFont&&(this.TitleFont=i.TitleFont),i.IsShortTitle&&(this.IsShortTitle=i.IsShortTitle),i.OutName&&(this.OutName=i.OutName),we.IsNumber(i.YSplitType)&&(this.YSplitType=i.YSplitType),we.IsBool(i.IsSync)&&(this.IsSync=i.IsSync),we.IsNumber(i.MaxRunCount)&&(this.MaxRunCount=i.MaxRunCount),i.Debug&&we.IsPlusNumber(i.Debug.Count)&&i.Debug.Callback&&(this.Debug={Count:i.Debug.Count,Callback:i.Debug.Callback})),i&&i.Lock&&(1==i.Lock.IsLocked&&(this.IsLocked=!0),i.Lock.Callback&&(this.LockCallback=i.Lock.Callback),i.Lock.ID&&(this.LockID=i.Lock.ID),i.Lock.BG&&(this.LockBG=i.Lock.BG),i.Lock.TextColor&&(this.LockTextColor=i.Lock.TextColor),i.Lock.Text&&(this.LockText=i.Lock.Text),i.Lock.Font&&(this.LockFont=i.Lock.Font),i.Lock.Count&&(this.LockCount=i.Lock.Count),i.Lock.MinWidth&&(this.LockMinWidth=i.Lock.MinWidth*C())),i&&i.YAxis&&(this.YAxis={},we.IsNumber(i.YAxis.FloatPrecision)&&(this.YAxis.FloatPrecision=i.YAxis.FloatPrecision),we.IsNumber(i.YAxis.StringFormat)&&(this.YAxis.StringFormat=i.YAxis.StringFormat),we.IsBool(i.YAxis.EnableRemoveZero)&&(this.YAxis.EnableRemoveZero=i.YAxis.EnableRemoveZero),we.IsBool(i.YAxis.ExcludeValue)&&(this.YAxis.ExcludeValue=i.YAxis.ExcludeValue)),a&&(this.Arguments=a),this.CopyTo=function(t){t.FloatPrecision=this.FloatPrecision,t.StringFormat=this.StringFormat,t.KLineType=this.KLineType,t.InstructionType=this.InstructionType,t.Condition=this.Condition,t.TitleFont=this.TitleFont,t.IsShortTitle=this.IsShortTitle,t.OutName=this.OutName,t.Arguments=this.Arguments,t.Script=this.Script,t.Name=this.Name,t.ID=this.ID},this.SetLock=function(t){1==t.IsLocked?(this.IsLocked=!0,t.Callback&&(this.LockCallback=t.Callback),t.ID&&(this.LockID=t.ID),t.BG&&(this.LockBG=t.BG),t.TextColor&&(this.LockTextColor=t.TextColor),t.Text&&(this.LockText=t.Text),t.Font&&(this.LockFont=t.Font),t.Count&&(this.LockCount=t.Count),t.MinWidth&&(this.LockMinWidth=t.MinWidth*C())):(this.IsLocked=!1,this.LockCallback=null,this.LockID=null,this.LockBG=null,this.LockTextColor=null,this.LockText=null,this.LockFont=null,this.LockCount=20)},this.IsExcessRunCount=function(){return!(this.MaxRunCount<0)&&this.RunCount>=this.MaxRunCount},this.ExecuteScript=function(t,e,a){this.OutVar=[];var i={HQChart:t,WindowIndex:e,HistoryData:a,Self:this},r=Jo.KLINE_ID;"MinuteChartContainer"===t.ClassName||"MinuteChartHScreenContainer"===t.ClassName?r=t.DayCount>1?Jo.MULTIDAY_MINUTE_ID:Jo.MINUTE_ID:"HistoryMinuteChartContainer"===t.ClassName&&(r=Jo.HISTORY_MINUTE_ID);var n={HQDataType:r,Symbol:t.Symbol,Name:t.Name,Data:a,SourceData:t.SourceData,Callback:this.RecvResultData,CallbackParam:i,Async:!0,MaxRequestDataCount:t.MaxRequestDataCount,MaxRequestMinuteDayCount:t.MaxRequestMinuteDayCount,Arguments:this.Arguments,Condition:this.Condition,IsBeforeData:t.IsBeforeData,IsApiPeriod:t.IsApiPeriod,DrawInfo:null,Self:this};if(this.Debug&&we.IsPlusNumber(this.Debug.Count)&&this.Debug.Callback&&(--this.Debug.Count,n.Debug=1,n.DebugFilter=this.Debug.Callback),t&&t.ChartPaint[0]){var o=t.ChartPaint[0];o&&o.DrawKRange&&(n.DrawInfo={Start:o.DrawKRange.Start,End:o.DrawKRange.End})}if(r===Jo.HISTORY_MINUTE_ID&&(n.TrateDate=t.TradeDate),r===Jo.MULTIDAY_MINUTE_ID&&(n.DayCount=t.DayCount),t.NetworkFilter&&(n.NetworkFilter=t.NetworkFilter),this.Condition&&!this.IsMeetCondition(i,n))return void this.ShowConditionError(i,this.Condition.Message);++this.RunCount;var s=this.Script;Tr.Execute(s,n,t.ScriptErrorCallback)},this.IsMeetCondition=function(t,e){if(Xn.Complier.Log("[ScriptIndex::IsMeetCondition] ",this.Condition),this.Condition.Period){if(!this.IsMeetPeriodCondition(t,e))return!1;if(!this.IsMeetIncludeCondition(t,e))return!1}return!0},this.IsMeetPeriodCondition=function(t,e){if(!this.Condition.Period)return!0;for(var a in this.Condition.Period){var i=this.Condition.Period[a];switch(i){case Wn.MINUTE_ID:if(e.HQDataType==Jo.MINUTE_ID)return!0;break;case Wn.MULTIDAY_MINUTE_ID:if(e.HQDataType==Jo.MULTIDAY_MINUTE_ID)return!0;break;case Wn.KLINE_DAY_ID:case Wn.KLINE_WEEK_ID:case Wn.KLINE_MONTH_ID:case Wn.KLINE_YEAR_ID:case Wn.KLINE_TWOWEEK_ID:case Wn.KLINE_QUARTER_ID:case Wn.KLINE_MINUTE_ID:case Wn.KLINE_5_MINUTE_ID:case Wn.KLINE_15_MINUTE_ID:case Wn.KLINE_30_MINUTE_ID:case Wn.KLINE_60_MINUTE_ID:if(t.HQChart.Period==i)return!0}}return!1},this.IsMeetIncludeCondition=function(t,e){if(!this.Condition.Include||this.Condition.Include.length<=0)return!0;var a=t.HQChart.Symbol;a&&(a=a.toUpperCase());for(var i in this.Condition.Include){if(a==this.Condition.Include[i])return!0}return!1},this.ShowConditionError=function(t,e){var a=t.HQChart,i=t.WindowIndex;a.DeleteIndexPaint(i),0==i&&a.ShowKLine(!0);var r="ææ ä¸æ¯æå½ååç§æå¨æ";e&&(r=e);var n=new ct;n.Canvas=a.Canvas,n.ChartBorder=a.Frame.SubFrame[i].Frame.ChartBorder,n.ChartFrame=a.Frame.SubFrame[i].Frame,n.NotSupportMessage=r,a.ChartPaint.push(n),a.UpdataDataoffset(),a.UpdateFrameMaxMin(),a.Draw()},this.RecvResultData=function(t,e){var a=e.HQChart,i=e.WindowIndex,r=e.HistoryData;if(e.Self.OutVar=t,e.Self.BindData(a,i,r),0==e.Self.IsLocked)e.HQChart.Frame.SubFrame[i].Frame.SetLock(null);else{var n={IsLocked:!0,Callback:e.Self.LockCallback,IndexName:e.Self.Name,ID:e.Self.LockID,BG:e.Self.LockBG,Text:e.Self.LockText,TextColor:e.Self.LockTextColor,Font:e.Self.LockFont,Count:e.Self.LockCount,MinWidth:e.Self.LockMinWidth};e.HQChart.Frame.SubFrame[i].Frame.SetLock(n)}if(e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),!1===e.Self.IsSync&&e.HQChart.Draw(),a.GetIndexEvent){var o=a.GetIndexEvent();if(o){var s=e.Self,l={OutVar:s.OutVar,WindowIndex:i,Name:s.Name,Arguments:s.Arguments,HistoryData:r,Stock:{Symbol:a.Symbol,Name:a.Name}};o.Callback(o,l,s)}}},this.SetChartIndexName=function(t){this.Name?t.IndexName=this.Name:this.ID&&(t.IndexName,this.ID),this.ID&&(t.IndexID=this.ID),this.YAxis&&we.IsBool(this.YAxis.ExcludeValue)&&(t.IsExcludeYValue=this.YAxis.ExcludeValue),t.Script=this},this.SetTitleData=function(t,e){t.ChartClassName=e.ClassName,t.IsVisible=e.IsVisible},this.ReloadChartResource=function(t,e,a){var i=t.GetEventCallback(Kn.ON_RELOAD_INDEX_CHART_RESOURCE);if(i&&i.Callback){var r={Chart:a,IndexName:this.Name,IndexID:this.ID,HQChart:t,WindowIndex:e};i.Callback(i,r,this)}},this.CreateLine=function(t,e,a,i,r){if(7==r)var n=new gt;else var n=new ct;if(n.Canvas=t.Canvas,n.DrawType=1,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,n.Identify=this.Guid,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),8==r&&(n.DrawType=2,n.BreakPoint=a.BreakPoint),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(n.LineWidth=o)}a.IsDotLine&&(n.IsDotLine=!0,n.LineDash=So.DOTLINE.LineDash.slice()),we.IsNonEmptyArray(a.LineDash)&&(n.LineDash=a.LineDash),0==a.IsShow&&(n.IsShow=!1);var s=e+1;n.Data.Data=a.Data,this.ReloadChartResource(t,e,n),!1===a.IsShowTitle||we.IsString(a.Name)&&0==a.Name.indexOf("NOTEXT")||(a.NoneName?t.TitlePaint[s].Data[i]=new ta(n.Data,null,n.Color):t.TitlePaint[s].Data[i]=new ta(n.Data,a.Name,n.Color),this.SetTitleData(t.TitlePaint[s].Data[i],n)),this.SetChartIndexName(n),t.ChartPaint.push(n)},this.CreateArea=function(t,e,a,i){var r=new ft;if(r.Canvas=t.Canvas,r.DrawType=1,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Identify=this.Guid,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.DownColor?r.AreaColor=a.DownColor:a.UpColor&&(r.AreaColor=a.UpColor,r.AreaDirection=1),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));we.IsPlusNumber(n)&&(r.LineWidth=n)}we.IsNonEmptyArray(a.LineDash)&&(r.LineDash=a.LineDash),0==a.IsShow&&(r.IsShow=!1);var o=e+1;r.Data.Data=a.Data,!1===a.IsShowTitle||we.IsString(a.Name)&&0==a.Name.indexOf("NOTEXT")||(a.NoneName?t.TitlePaint[o].Data[i]=new ta(r.Data,null,r.Color):t.TitlePaint[o].Data[i]=new ta(r.Data,a.Name,r.Color),t.TitlePaint[o].Data[i].ChartClassName=r.ClassName),this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateOverlayLine=function(t,e,a,i,r){if(7==r)var n=new gt;var n=new Dt;if(n.Canvas=t.Canvas,n.DrawType=1,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(n.LineWidth=o)}a.IsDotLine&&(n.IsDotLine=!0),0==a.IsShow&&(n.IsShow=!1);var s=e+1;n.Data.Data=a.Data,t.TitlePaint[s].Data[i]=new ta(n.Data,a.Name,n.Color),t.TitlePaint[s].Data[i].ChartClassName=n.ClassName,t.ChartPaint.push(n)},this.CreateSingleLine=function(t,e,a,i,r){var n=new pt;if(n.Canvas=t.Canvas,n.DrawType=1,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,n.Identify=this.Guid,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(n.LineWidth=o)}a.IsDotLine&&(n.IsDotLine=!0),0==a.IsShow&&(n.IsShow=!1);var s=e+1;n.Data.Data=a.Data,this.ReloadChartResource(t,e,n),!1===a.IsShowTitle||we.IsString(a.Name)&&0==a.Name.indexOf("NOTEXT")||(a.NoneName?t.TitlePaint[s].Data[i]=new ta(n.Data,null,n.Color):t.TitlePaint[s].Data[i]=new ta(n.Data,a.Name,n.Color),this.SetTitleData(t.TitlePaint[s].Data[i],n)),this.SetChartIndexName(n),t.ChartPaint.push(n)},this.CreateBar=function(t,e,a,i){var r=new Ft;r.Canvas=t.Canvas,a.Draw.Width>0?r.Width=a.Draw.Width:r.Width=0,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i);r.Data.Data=a.Draw.DrawData,r.BarType=a.Draw.Type,this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateText=function(t,e,a,i,r){var n=new Mt;n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,n.ReloadResource(),a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),!0===a.IsDrawCenter&&(n.TextAlign="center"),!0===a.IsDrawAbove&&(n.Direction=1),!0===a.IsDrawBelow&&(n.Direction=2);a.Draw.Position&&(n.Position=a.Draw.Position),a.Draw.DrawData&&(n.Data.Data=a.Draw.DrawData),n.Text=a.Draw.Text,a.Draw.Direction>0&&(n.Direction=a.Draw.Direction),a.Draw.YOffset>0&&(n.YOffset=a.Draw.YOffset),a.Draw.TextAlign&&(n.TextAlign=a.Draw.TextAlign),a.DrawVAlign>=0&&(0==a.DrawVAlign?n.Direction=1:1==a.DrawVAlign?n.Direction=0:2==a.DrawVAlign&&(n.Direction=2)),a.DrawAlign>=0&&(0==a.DrawAlign?n.TextAlign="left":1==a.DrawAlign?n.TextAlign="center":2==a.DrawAlign&&(n.TextAlign="right")),a.DrawFontSize>0&&(n.FixedFontSize=a.DrawFontSize),a.Background&&(n.TextBG=a.Background),this.SetChartIndexName(n),t.ChartPaint.push(n)},this.CreateDrawNumber=function(t,e,a,i){var r=new Rt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.ReloadResource(),a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),!0===a.IsDrawCenter&&(r.TextAlign="center"),!0===a.IsDrawAbove&&(r.TextBaseline="bottom"),!0===a.IsDrawBelow&&(r.TextBaseline="top"),r.Data.Data=a.Draw.DrawData.Value,r.Text=a.Draw.DrawData.Text,a.Draw.Direction>0&&(r.Direction=a.Draw.Direction),a.Draw.YOffset>0&&(r.YOffset=a.Draw.YOffset),a.Draw.TextAlign&&(r.TextAlign=a.Draw.TextAlign),"TOP"===a.Draw.FixedPosition?r.FixedPosition=1:"BOTTOM"===a.Draw.FixedPosition&&(r.FixedPosition=2),a.DrawVAlign>=0&&(0==a.DrawVAlign?r.TextBaseline="top":1==a.DrawVAlign?r.TextBaseline="middle":2==a.DrawVAlign&&(r.TextBaseline="bottom")),a.DrawAlign>=0&&(0==a.DrawAlign?r.TextAlign="left":1==a.DrawAlign?r.TextAlign="center":2==a.DrawAlign&&(r.TextAlign="right")),a.DrawFontSize>0&&(r.FixedFontSize=a.DrawFontSize),a.Background&&(r.TextBG=a.Background),a.VerticalLine&&(r.VerticalLine=a.VerticalLine);t.ChartPaint.push(r)},this.CreateDrawTextV2=function(t,e,a,i){var r=new Nt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.ReloadResource(),a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),!0===a.IsDrawCenter&&(r.TextAlign="center"),!0===a.IsDrawAbove&&(r.TextBaseline="bottom"),!0===a.IsDrawBelow&&(r.TextBaseline="top"),a.Draw.DrawData&&(r.Data.Data=a.Draw.DrawData),r.Text=a.Draw.Text,a.Draw.Direction>0&&(r.Direction=a.Draw.Direction),a.Draw.YOffset>0&&(r.YOffset=a.Draw.YOffset),a.Draw.TextAlign&&(r.TextAlign=a.Draw.TextAlign),"TOP"===a.Draw.FixedPosition?r.FixedPosition=1:"BOTTOM"===a.Draw.FixedPosition&&(r.FixedPosition=2),a.DrawVAlign>=0&&(0==a.DrawVAlign?r.TextBaseline="top":1==a.DrawVAlign?r.TextBaseline="middle":2==a.DrawVAlign&&(r.TextBaseline="bottom")),a.DrawAlign>=0&&(0==a.DrawAlign?r.TextAlign="left":1==a.DrawAlign?r.TextAlign="center":2==a.DrawAlign&&(r.TextAlign="right")),a.DrawFontSize>0&&(r.FixedFontSize=a.DrawFontSize),a.Background&&(r.TextBG=a.Background),a.VerticalLine&&(r.VerticalLine=a.VerticalLine),we.IsNumber(a.YOffset)&&(r.ShowOffset.Y=a.YOffset),we.IsNumber(a.XOffset)&&(r.ShowOffset.X=a.XOffset);this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateMACD=function(t,e,a,i){var r=new _t;if(r.Canvas=t.Canvas,r.Identify=this.Guid,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var o=e+1;r.Data.Data=a.Data;var s=this.GetDefaultColor(i);a.Color&&(s=this.GetColor(a.Color)),a.UpColor&&(r.UpColor=a.UpColor),a.DownColor&&(r.DownColor=a.DownColor),this.ReloadChartResource(t,e,r),t.TitlePaint[o].Data[i]=new ta(r.Data,a.Name,s),this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreatePointDot=function(t,e,a,i,r){var n=new It;if(n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),a.Radius&&(n.Radius=a.Radius),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(o)&&o>0&&(n.Radius=o)}we.IsBool(a.UpDownDot)&&(n.EnableUpDownColor=a.UpDownDot,n.HistoryData=r);var s=e+1;n.Data.Data=a.Data,t.TitlePaint[s].Data[i]=new ta(n.Data,a.Name,n.Color),this.SetChartIndexName(n),t.ChartPaint.push(n)},this.CreateStick=function(t,e,a,i){var r=new St;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var o=e+1;r.Data.Data=a.Data,this.ReloadChartResource(t,e,r),t.TitlePaint[o].Data[i]=new ta(r.Data,a.Name,r.Color),this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateLineStick=function(t,e,a,i){var r=new xt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var o=e+1;r.Data.Data=a.Data,t.TitlePaint[o].Data[i]=new ta(r.Data,a.Name,r.Color),t.ChartPaint.push(r)},this.CreateStraightLine=function(t,e,a,i){var r=new ct;if(r.DrawType=1,r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var o=e+1;r.Data.Data=a.Draw.DrawData,"DRAWLINE"==a.Name&&(t.TitlePaint[o].Data[i]=new ta(r.Data,null,r.Color)),t.ChartPaint.push(r)},this.CreateVolStick=function(t,e,a,i,r){var n=new bt;if(n.Canvas=t.Canvas,n.Name=a.Name,n.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,n.ChartFrame=t.Frame.SubFrame[e].Frame,n.KLineDrawType=t.KLineDrawType,n.Identify=this.Guid,a.Color?n.Color=this.GetColor(a.Color):n.Color=this.GetDefaultColor(i),a.UpColor&&(n.UpColor=a.UpColor),a.DownColor&&(n.DownColor=a.DownColor),we.IsNumber(a.StickType)&&(n.BarType=a.StickType),we.IsNumber(a.BarColorType)&&(n.BarColorType=a.BarColorType),a.LineWidth){var o=parseInt(a.LineWidth.replace("LINETHICK",""));we.IsPlusNumber(o)&&(n.BarWidth=o)}var s=e+1;if(n.Data.Data=a.Data,n.HistoryData=r,this.ReloadChartResource(t,e,n),!1===a.IsShowTitle);else if(we.IsString(a.Name)&&0==a.Name.indexOf("NOTEXT"));else{var l=new ta(n.Data,a.Name,n.Color);t.TitlePaint[s].Data[i]=l,this.SetTitleData(l,n)}this.SetChartIndexName(n),t.ChartPaint.push(n)},this.CreateBand=function(t,e,a,i){var r=new kt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.FirstColor=a.Draw.Color[0],r.SecondColor=a.Draw.Color[1],r.Data.Data=a.Draw.DrawData,we.IsBool(a.IsFirstDraw)&&(r.IsDrawFirst=a.IsFirstDraw);var n=e+1,o=new ta(r.Data,a.Name,r.Color);o.DataType=r.ClassName,o.ExtendData={Color:[r.FirstColor,r.SecondColor]},t.TitlePaint[n].Data[i]=o,this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateFillRGN=function(t,e,a,i){var r=new Vt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),t.ChartPaint.push(r)},this.CreateFillRGN2=function(t,e,a,i){var r=new Ht;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateFillBGRGN=function(t,e,a,i){var r=new Xt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateFLOATRGN=function(t,e,a,i){var r=new Yt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreateKLine=function(t,e,a,i){var r=new nt;r.Canvas=t.Canvas,r.Name=a.Name,r.Identify=this.Guid,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,r.IsShowMaxMinPrice=!1,r.IsShowKTooltip=!1,we.IsNumber(a.KLineType)&&(r.DrawType=a.KLineType),a.Color&&(r.UnchagneColor=r.DownColor=r.UpColor=this.GetColor(a.Color)),this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateOverlayKLine=function(t,e,a,i){var r=null;if(t.IsKLineContainer())r=new lt;else{if(!t.IsMinuteContainer())return;r=new Ot}r.Canvas=t.Canvas,r.Name=a.Name,r.Identify=this.Guid,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),r.Data.Data=a.Draw.DrawData,r.MainData=t.ChartPaint[0].Data,t.ChartPaint.push(r)},this.CreateDrawColorKLine=function(t,e,a,i){var r=new ot;r.Canvas=t.Canvas,r.Name=a.Name,r.DrawName="DRAWCOLORKLINE",r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData,we.IsBool(a.Draw.IsEmptyBar)&&(r.IsEmptyBar=a.Draw.IsEmptyBar),a.Draw.Color&&(r.Color=a.Draw.Color),t.ChartPaint.push(r)},this.CreatePolyLine=function(t,e,a,i){var r=new ct;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.IsDotLine&&(r.IsDotLine=!0),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var o=e+1;r.Data.Data=a.Draw.DrawData,t.TitlePaint[o].Data[i]=new ta(r.Data," ",r.Color),t.ChartPaint.push(r)},this.CreateChartSlopeLine=function(t,e,a,i){var r=new Tt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.IsDotLine&&(r.IsDotLine=!0),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}var o=e+1;r.Data.Data=a.Draw.DrawData.Data,r.Option=a.Draw.DrawData.Option,t.TitlePaint[o].Data[i]=new ta(r.Data,null,r.Color),t.ChartPaint.push(r)},this.CreateChartVericaltLine=function(t,e,a,i){var r=new yt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}this.SetChartLineDash(r,a.Draw.DrawData),r.Data.Data=a.Draw.DrawData.Data,t.ChartPaint.push(r)},this.SetChartLineDash=function(t,e){if(we.IsNumber(e.LineType)){var a=e.LineType,i=C();switch(a){case 1:t.LineType=[10*i,10*i];break;case 2:t.LineType=[0,10*i],t.LineCap="square";break;case 3:t.LineType=[10*i,3*i,3*i,3*i];break;case 4:t.LineType=[10*i,3*i,3*i,3*i,3*i,3*i]}}else if(we.IsString(e.LineType)){for(var r=e.LineType.split(","),n=[],o=0;o<r.length;++o)n.push(parseInt(r[o]));t.LineType=n}},this.CreateChartHorizontalLine=function(t,e,a,i){var r=new Et;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}this.SetChartLineDash(r,a.Draw.DrawData),r.ExtendType=a.Draw.DrawData.Extend,r.Data.Data=a.Draw.DrawData.Data,t.ChartPaint.push(r)},this.CreateBackgroud=function(t,e,a,i){var r=new Ut;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw&&a.Draw.DrawData){var n=a.Draw.DrawData;r.Color=n.Color,r.ColorAngle=n.Angle,n.Data&&(r.Data.Data=n.Data)}t.ChartPaint.push(r)},this.CreateBackgroundDiv=function(t,e,a,i){var r=new Kt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw&&a.Draw.DrawData){var n=a.Draw.DrawData;r.AryColor=n.AryColor,r.ColorType=n.ColorType,n.Data&&(r.Data.Data=n.Data)}t.ChartPaint.push(r)},this.CreateLineMultiData=function(t,e,a,i){var r=new wt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw&&a.Draw.DrawData){var n=a.Draw.DrawData;r.Color=n.Color,n.PointColor&&(r.PointColor=n.PointColor),we.IsPlusNumber(n.PointRadius)&&(r.PointRadius=n.PointRadius),we.IsPlusNumber(n.LineWidth)&&(r.LineWidth=n.LineWidth),n.Data&&(r.Data.Data=n.Data)}var o=e+1,s=new ta(r.Data,a.Name,r.Color);s.DataType="MULTI_POINT_LINE",t.TitlePaint[o].Data[i]=s,t.ChartPaint.push(r)},this.CreateTradeIcon=function(t,e,a,i){var r=new Lt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data.Data=a.Draw.DrawData.Data,r.AryIcon=a.Draw.DrawData.Icons,r.TradeType=a.Draw.DrawType,a.Color&&we.IsNonEmptyArray(r.AryIcon))for(var n=0;n<r.AryIcon.length;++n){var o=r.AryIcon[n];o&&o.Color&&(o.Color=a.Color)}a.DrawFontSize>0&&(r.SVG.Size=a.DrawFontSize*C()),t.ChartPaint.push(r)},this.CreateTextLine=function(t,e,a,i){var r=new Jt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw&&a.Draw.DrawData){var n=a.Draw.DrawData;r.Text=n.Text,r.Line=n.Line,r.Price=n.Price}t.ChartPaint.push(r)},this.CreateNumberText=function(t,e,a,i){var r=new Mt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.ReloadResource(),r.TextAlign="center",a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.IsDrawAbove?r.Direction=1:r.Direction=2,a.Draw.Position&&(r.Position=a.Draw.Position);r.Data.Data=a.Draw.DrawData.Value,r.Text=a.Draw.DrawData.Text,this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateDrawText=function(t,e,a,i){var r=new Mt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.ReloadResource(),a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.IsDrawAbove?r.Direction=1:r.Direction=0,a.DrawFontSize>0&&(r.TextFont=a.DrawFontSize*C()+"px å¾®è½¯éé»");r.DrawData=a.Draw.DrawData,this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateIcon=function(t,e,a,i){var r=new Mt;r.Canvas=t.Canvas,r.TextAlign="center",r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Direction=2,a.IsDrawAbove&&(r.Direction=1),a.DrawVAlign>=0&&(0==a.DrawVAlign?r.Direction=1:1==a.DrawVAlign?r.Direction=0:2==a.DrawVAlign&&(r.Direction=2)),a.DrawAlign>=0&&(0==a.DrawAlign?r.TextAlign="left":1==a.DrawAlign?r.TextAlign="center":2==a.DrawAlign&&(r.TextAlign="right"));r.Data.Data=a.Draw.DrawData;var n=a.Draw.Icon;1==n.IconFont?(r.IconFont={Family:n.Family,Text:n.Symbol,Color:n.Color},a.Color&&(r.IconFont.Color=this.GetColor(a.Color))):(r.Text=n.Symbol,a.Color?r.Color=this.GetColor(a.Color):n.Color?r.Color=n.Color:r.Color="rgb(0,0,0)"),a.DrawFontSize>0&&(r.FixedFontSize=a.DrawFontSize),we.IsNumber(a.XOffset)&&(r.ShowOffset.X=a.XOffset),we.IsNumber(a.YOffset)&&(r.ShowOffset.Y=a.YOffset),this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateTipIcon=function(t,e,a,i){var r=new ee;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,t.ChartPaint[0].IsMinuteFrame()?r.Data=t.SourceData:r.Data=t.ChartPaint[0].Data,r.Family=a.Draw.Icon.Family,r.TextFont=So.TIPICON.TextFont;var n=So.TIPICON.Size,o=So.TIPICON.Color,s=0,l=2;if(we.IsNumber(a.YOffset)&&(s=a.YOffset),a.Color&&(o=this.GetColor(a.Color)),a.DrawFontSize>0&&(n=a.DrawFontSize),a.DrawVAlign>=0&&(l=a.DrawVAlign),a.Draw&&we.IsNonEmptyArray(a.Draw.DrawData)&&a.Draw.Icon){var h=a.Draw.DrawData,u=[],C=Array.isArray(a.Draw.Text),c=null;!C&&a.Draw.Text&&(c={Text:a.Draw.Text});for(var f=0;f<h.length;++f){var d=h[f];if(we.IsNumber(d)){var D={Index:f,Value:d,SVG:{Symbol:a.Draw.Icon.Symbol,Size:n,Color:o,YOffset:s,VAlign:l}};if(C){var m=a.Draw.Text[f];m&&(D.Tooltip={Text:m})}else D.Tooltip=c;u.push(D)}}r.Texts=u}t.ChartPaint.push(r)},this.CreateChannel=function(t,e,a,i){var r=new Wt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Draw.AreaColor?r.AreaColor=a.Draw.AreaColor:a.Color?r.AreaColor=this.GetColor(a.Color):r.AreaColor=this.GetDefaultColor(i),a.Draw.Border.Color?r.LineColor=a.Draw.Border.Color:r.LineColor=null,a.Draw.Border.Dotted&&(r.LineDotted=a.Draw.Border.Dotted),a.Draw.Border.Width>0&&(r.LineWidth=a.Draw.Border.Width),r.Data.Data=a.Draw.DrawData,t.ChartPaint.push(r)},this.CreatePartLine=function(t,e,a,i){var r=new vt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));we.IsPlusNumber(n)&&(r.LineWidth=n)}r.Data.Data=a.Draw.DrawData,this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateMultiLine=function(t,e,a,i){var r=new Zt;if(r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.Lines=a.Draw.DrawData,a.Draw.Name&&(r.Name=a.Draw.Name),a.Draw.LineDash&&(r.LineDash=a.Draw.LineDash),we.IsNumber(a.Draw.LineWidth)&&(r.LineWidth=a.Draw.LineWidth),we.IsBool(a.Draw.IsFullRangeMaxMin)&&(r.IsFullRangeMaxMin=a.Draw.IsFullRangeMaxMin),a.Draw.Arrow){var n=a.Draw.Arrow;1==n.Start&&(r.Arrow.Start=!0),1==n.End&&(r.Arrow.End=!0),we.IsNumber(n.Angle)&&(r.ArrawAngle=n.Angle),we.IsNumber(n.Length)&&(r.ArrawLength=n.Length),we.IsNumber(n.LineWidth)&&(r.ArrawLineWidth=n.LineWidth)}this.ReloadChartResource(t,e,r),this.SetChartIndexName(r),t.ChartPaint.push(r);var o=e+1;if(!1===a.IsShowTitle);else{var s=new ta(r.Data,r.Name,null);s.DataType="ChartMultiLine",s.Lines=r.Lines,t.TitlePaint[o].Data[i]=s}},this.CreateMultiPoint=function(t,e,a,i){var r=new jt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.PointGroup=a.Draw.DrawData,a.Draw.Name&&(r.Name=a.Draw.Name),this.SetChartIndexName(r),t.ChartPaint.push(r);var n=e+1,o=new ta(r.Data,r.Name,null);o.DataType="ChartMultiPoint",o.PointGroup=r.PointGroup,t.TitlePaint[n].Data[i]=o},this.CreateMultiBar=function(t,e,a,i){var r=new qt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.Bars=a.Draw.DrawData;var n=e+1,o=new ta({KData:r.Data,BarData:r.Bars},a.Name,null);o.IsShow=!1,o.DataType="MULTI_BAR",t.TitlePaint[n].Data[i]=o,this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateMultiText=function(t,e,a,i){var r=new Qt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.Texts=a.Draw.DrawData,this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateMultiSVGIcon=function(t,e,a,i){var r=new $t;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.Family=a.Draw.DrawData.Family,r.AryIcon=a.Draw.DrawData.Icon,r.BuildCacheData(),this.SetChartIndexName(r),t.ChartPaint.push(r)},this.CreateChartDrawSVG=function(t,e,a,i){var r=new ee;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,t.ChartPaint[0].IsMinuteFrame()?r.Data=t.SourceData:r.Data=t.ChartPaint[0].Data,we.IsBool(a.Draw.DrawData.EnableTooltip)&&(r.EnableTooltip=a.Draw.DrawData.EnableTooltip),we.IsBool(a.Draw.DrawData.IsDrawFirst)&&(r.IsDrawFirst=a.Draw.DrawData.IsDrawFirst),r.Family=a.Draw.DrawData.Family,r.TextFont=a.Draw.DrawData.TextFont,r.Texts=a.Draw.DrawData.Data,t.ChartPaint.push(r)},this.CreateMulitHtmlDom=function(t,e,a,i){var r=new te;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.HQChart=t,r.Data=t.ChartPaint[0].Data,r.Texts=a.Draw.DrawData,r.DrawCallback=a.Draw.Callback,t.ChartPaint.push(r)},this.CreateStackedBar=function(t,e,a,i){var r=new re;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.HQChart=t,r.Identify=this.Guid,r.Data.Data=a.Draw.DrawData,we.IsNonEmptyArray(a.Draw.BarColor)&&(r.BarColor=a.Draw.BarColor),we.IsNonEmptyArray(a.Draw.BarName)&&(r.BarName=a.Draw.BarName),we.IsNumber(a.Draw.LineWidth)&&(r.LineWidth=a.Draw.LineWidth),we.IsNumber(a.Draw.BarType)&&(r.BarType=a.Draw.BarType),t.ChartPaint.push(r);var n=e+1,o=new ta(r.Data,r.BarName,r.BarColor);o.DataType="ChartStackedBar",t.TitlePaint[n].Data[i]=o},this.CreateKLineTable=function(t,e,a,i){var r=new ht;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.HQChart=t,r.Identify=this.Guid,r.Data.Data=a.Draw.DrawData,we.IsNumber(a.Draw.RowCount)&&(r.RowCount=a.Draw.RowCount),we.IsBool(a.Draw.IsShowRowName)&&(r.IsShowRowName=a.Draw.IsShowRowName),we.IsNonEmptyArray(a.Draw.RowName)&&(r.RowName=a.Draw.RowName),a.Draw.BGColor&&(r.BGColor=a.Draw.BGColor),t.ChartPaint.push(r);var n=e+1,o=new ta(r.Data,r.BarName,r.BarColor);o.DataType="ChartKLineTable",t.TitlePaint[n].Data[i]=o},this.CreateScatterPlot=function(t,e,a,i){var r=new dt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.HQChart=t,r.Identify=this.Guid,r.Data.Data=a.Draw.DrawData,r.Color=a.Draw.Color,r.Radius=a.Draw.Radius,t.ChartPaint.push(r)},this.CreateClipColorStick=function(t,e,a,i){var r=new Gt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.HQChart=t,r.Identify=this.Guid,r.Data.Data=a.Draw.DrawData,a.Option&&r.SetOption&&r.SetOption(a.Option),t.ChartPaint.push(r);var n=e+1;if(!1===a.IsShowTitle);else{var o=this.GetDefaultColor(i);a.Option&&a.Option.TitleColor&&(o=this.GetColor(a.Option.TitleColor)),t.TitlePaint[n].Data[i]=new ta(r.Data,a.Name,o)}},this.CreateColorKLine=function(t,e,a,i){var r=new ot;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Data=t.ChartPaint[0].Data,r.KLineColor=a.Draw.DrawData.KLine,a.Color&&(r.Color=a.Color),t.ChartPaint.push(r)},this.CreateRectangle=function(t,e,a,i){var r=new zt;r.Canvas=t.Canvas,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,r.Color=[a.Draw.DrawData.Color],r.Rect=a.Draw.DrawData.Rect,a.Color&&(r.BorderColor=this.GetColor(a.Color)),t.ChartPaint.push(r)},this.CreateScriptOverlayLine=function(t,e,a,i){var r=new mt;if(r.Canvas=t.Canvas,r.DrawType=1,r.Name=a.Name,r.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,r.ChartFrame=t.Frame.SubFrame[e].Frame,a.Color?r.Color=this.GetColor(a.Color):r.Color=this.GetDefaultColor(i),a.LineWidth){var n=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(n)&&n>0&&(r.LineWidth=n)}a.IsDotLine&&(r.IsDotLine=!0),0==a.IsShow&&(r.IsShow=!1);var o=e+1;r.Data.Data=a.Draw.DrawData.Data,r.MainData.Data=a.Draw.DrawData.MainData,a.Draw.DrawData.Title&&(t.TitlePaint[o].Data[i]=new ta(r.Data,a.Draw.DrawData.Title,r.Color)),t.ChartPaint.push(r)},this.CreateSelfKLine=function(t,e,a){var i=new nt;i.Canvas=t.Canvas,i.Name="Self Kline",i.Identify=this.Guid,i.ChartBorder=t.Frame.SubFrame[e].Frame.ChartBorder,i.ChartFrame=t.Frame.SubFrame[e].Frame,i.Data=a,i.IsShowMaxMinPrice=!1,i.IsShowKTooltip=!1,i.DrawType=this.KLineType,t.ChartPaint.push(i)},this.BindInstructionData=function(t,e,a){if(!(null==this.OutVar||this.OutVar.length<0)){var i="";for(var r in this.Arguments){var n=this.Arguments[r];i.length>0&&(i+=","),i+=n.Value.toString()}if(i.length>0&&(i="("+i+")"),2==this.InstructionType){var o=this.OutVar[this.OutVar.length-1];return t.SetInstructionData(this.InstructionType,{Data:o.Data,Name:this.Name,Param:i,ID:this.ID}),!0}if(1==this.InstructionType){var s,l;for(var h in this.OutVar){var u=this.OutVar[h];"ENTERLONG"==u.Name?s=u.Data:"EXITLONG"==u.Name&&(l=u.Data)}return t.SetInstructionData(this.InstructionType,{Buy:s,Sell:l,Name:this.Name,Param:i,ID:this.ID}),!0}}},this.BindData=function(t,e,a){if(0==e&&this.InstructionType)return void this.BindInstructionData(t,e,a);if(t.DeleteIndexPaint(e),0==e&&t.ShowKLine(!0),!(null==this.OutVar||this.OutVar.length<0)){if(null!=this.KLineType&&(0===this.KLineType||1===this.KLineType||2===this.KLineType?this.CreateSelfKLine(t,e,a):-1===this.KLineType&&0==e&&t.ShowKLine(!1)),e>=1&&t.Frame){var i=t.Frame.SubFrame[e].Frame.YSplitOperator;i&&(i.Reset(),i.FloatPrecision=this.FloatPrecision,this.YAxis&&i.SetOption(this.YAxis)),this.YSpecificMaxMin&&(t.Frame.SubFrame[e].Frame.YSpecificMaxMin=this.YSpecificMaxMin),this.YSplitScale&&(t.Frame.SubFrame[e].Frame.YSplitScale=this.YSplitScale)}we.IsNumber(this.YSplitType)&&(t.Frame.SubFrame[e].Frame.YSplitOperator.SplitType=this.YSplitType);for(var r=0;r<this.OutVar.length;++r){var n=this.OutVar[r];if(!0!==n.IsExData&&(1e3!=n.Type&&1001!=n.Type)){if(0==n.Type)n.IsOverlayLine?this.CreateOverlayLine(t,e,n,r,n.Type):n.IsSingleLine?this.CreateSingleLine(t,e,n,r,n.Type):this.CreateLine(t,e,n,r,n.Type);else if(1==n.Type)switch(n.Draw.DrawType){case"STICKLINE":this.CreateBar(t,e,n,r);break;case"DRAWTEXT":this.CreateDrawTextV2(t,e,n,r);break;case"SUPERDRAWTEXT":this.CreateText(t,e,n,r);break;case"DRAWLINE":this.CreateStraightLine(t,e,n,r);break;case"DRAWBAND":this.CreateBand(t,e,n,r);break;case"FILLRGN":this.CreateFillRGN(t,e,n,r);break;case"FILLRGN2":this.CreateFillRGN2(t,e,n,r);break;case"FILLTOPRGN":case"FILLBOTTOMRGN":case"FILLVERTICALRGN":this.CreateFillBGRGN(t,e,n,r);break;case"FLOATRGN":this.CreateFLOATRGN(t,e,n,r);break;case"DRAWKLINE":case"DRAWKLINE1":this.CreateKLine(t,e,n,r);break;case"DRAWOVERLAYKLINE":this.CreateOverlayKLine(t,e,n,r);break;case"DRAWCOLORKLINE":this.CreateDrawColorKLine(t,e,n,r);break;case"DRAWKLINE_IF":this.CreateKLine(t,e,n,r);break;case"POLYLINE":this.CreatePolyLine(t,e,n,r);break;case"DRAWGBK":case"DRAWGBK2":this.CreateBackgroud(t,e,n,r);break;case"DRAWGBK_DIV":this.CreateBackgroundDiv(t,e,n,r);break;case"DRAWTEXT_LINE":this.CreateTextLine(t,e,n,r);break;case"DRAWNUMBER":this.CreateDrawNumber(t,e,n,r);break;case"DRAWNUMBER_FIX":case"DRAWTEXT_FIX":this.CreateNumberText(t,e,n,r);break;case"DRAWICON":case"ICON":this.CreateIcon(t,e,n,r);break;case"TIPICON":this.CreateTipIcon(t,e,n,r);break;case"DRAWCHANNEL":this.CreateChannel(t,e,n,r);break;case"PARTLINE":this.CreatePartLine(t,e,n,r);break;case"DRAWRECTREL":this.CreateRectangle(t,e,n,r);break;case"DRAWTEXTABS":case"DRAWTEXTREL":this.CreateDrawText(t,e,n,r);break;case"DRAWOVERLAYLINE":this.CreateScriptOverlayLine(t,e,n,r);break;case"DRAWSL":this.CreateChartSlopeLine(t,e,n,r);break;case"VERTLINE":this.CreateChartVericaltLine(t,e,n,r);break;case"HORLINE":this.CreateChartHorizontalLine(t,e,n,r);break;case"MULTI_LINE":this.CreateMultiLine(t,e,n,r);break;case"MULTI_POINT":this.CreateMultiPoint(t,e,n,r);break;case"MULTI_BAR":this.CreateMultiBar(t,e,n,r);break;case"MULTI_TEXT":this.CreateMultiText(t,e,n,r);break;case"MULTI_SVGICON":this.CreateMultiSVGIcon(t,e,n,r);break;case"DRAWSVG":this.CreateChartDrawSVG(t,e,n,r);break;case"MULTI_HTMLDOM":this.CreateMulitHtmlDom(t,e,n,r);break;case"COLOR_KLINE":this.CreateColorKLine(t,e,n,r);break;case"KLINE_BG":this.CreateBackgroud(t,e,n,r);break;case"MULTI_POINT_LINE":this.CreateLineMultiData(t,e,n,r);break;case"BUY":case"SELL":case"SELLSHORT":case"BUYSHORT":this.CreateTradeIcon(t,e,n,r);break;case qo.OVERLAY_BARS:this.CreateStackedBar(t,e,n,r);break;case qo.KLINE_TABLE:this.CreateKLineTable(t,e,n,r);break;case qo.SCATTER_PLOT:this.CreateScatterPlot(t,e,n,r);break;case qo.CLIP_COLOR_STICK:this.CreateClipColorStick(t,e,n,r);break;default:var o=Zo.Get(n.Draw.DrawType);o&&o.CreateChartCallback&&o.CreateChartCallback(t,e,n,r,this)}else 2==n.Type?this.CreateMACD(t,e,n,r):3==n.Type?this.CreatePointDot(t,e,n,r,a):4==n.Type?this.CreateLineStick(t,e,n,r):5==n.Type?this.CreateStick(t,e,n,r):6==n.Type?this.CreateVolStick(t,e,n,r,a):7==n.Type?this.CreateLine(t,e,n,r,n.Type):8==n.Type?this.CreateLine(t,e,n,r,n.Type):9==n.Type&&this.CreateArea(t,e,n,r);var s=t.TitlePaint[e+1];s&&s.Data&&r<s.Data.length&&(this.StringFormat>0&&(s.Data[r].StringFormat=this.StringFormat),this.FloatPrecision>=0&&(s.Data[r].FloatPrecision=this.FloatPrecision),this.OutName&&this.OutName.length>0&&this.Arguments&&this.Arguments.length>0&&s.SetDynamicTitle(this.OutName,this.Arguments))}}var l=e+1,s=t.TitlePaint[l];if(s.Title=this.Name,s.Identify=this.Guid,s.ArgumentsText=null,s.Script=this,s.IsShowMainIndexTitle=this.IsShowIndexTitle,!this.IsShortTitle){for(var h="",u=0;u<this.Arguments.length;++u){var C=this.Arguments[u];h.length>0&&(h+=","),h+=C.Value.toString()}h.length>0&&(s.ArgumentsText="("+h+")")}return this.TitleFont&&(s.Font=this.TitleFont),!0}},this.GetDefaultColor=function(t){var e=null;return So&&So.Index&&So.Index.LineColor&&(e=So.Index.LineColor),e&&Array.isArray(e)||(e=["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"]),e[parseInt(t)%(e.length-1)]},this.GetColor=function(t){if(0==t.indexOf("RGB("))return t.toLowerCase();if(0==t.indexOf("rgb("))return t;if(0==t.indexOf("RGBA("))return t.toLowerCase();if(0==t.indexOf("rgba("))return t;var e=Tr.ColorVarToRGB(t);return e||"rgb(30,144,255)"}}function xr(t,e,a,i){this.newMethod=Sr,this.newMethod(t,e,a,i),delete this.newMethod,this.ClassName="OverlayScriptIndex",this.OverlayIndex=null,this.ShowConditionError=function(t,e){var a=t.HQChart,i=(t.WindowIndex,"ææ ä¸æ¯æå½ååç§æå¨æ");e&&(i=e);var r=this.OverlayIndex,n=r.Frame;n.ChartPaint=[];var o=new ct;o.Canvas=a.Canvas,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.NotSupportMessage=i,n.ChartPaint.push(o),a.Draw()},this.BindData=function(t,e,a){if(this.OverlayIndex&&1==this.OverlayIndex.IsOverlay&&(this.OverlayIndex.Frame.ChartPaint=[],we.IsNonEmptyArray(this.OutVar))){var i=this.OverlayIndex.Frame.Frame.YSplitOperator;i&&(i.Reset(),i.FloatPrecision=this.FloatPrecision,we.IsNumber(this.YSplitType)&&(i.SplitType=this.YSplitType),this.YAxis&&i.SetOption(this.YAxis));var r={Data:[],Title:this.Name,Frame:this.OverlayIndex.Frame.Frame,Script:this,IsShowIndexTitle:this.IsShowIndexTitle},n="";for(var o in this.Arguments){var s=this.Arguments[o];n.length>0&&(n+=","),n+=s.Value.toString()}n.length>0&&(r.Title=this.Name+"("+n+")");var l=e+1,h=t.TitlePaint[l];if(h.OverlayIndex.set(this.OverlayIndex.Identify,r),this.OutName&&this.OutName.length>0&&this.Arguments&&this.Arguments.length>0&&h.SetDynamicTitle(this.OutName,this.Arguments,this.OverlayIndex.Identify),this.OverlayIndex.Frame.Frame.Title=this.Name,t.Frame.SubFrame[e]){var u=t.Frame.SubFrame[e].Frame;u&&(this.OverlayIndex.Frame.Frame.XPointCount=u.XPointCount)}for(var o=0;o<this.OutVar.length;++o){var C=this.OutVar[o];if(!0!==C.IsExData){if(0==C.Type)this.CreateLine(t,e,C,o,C.Type);else if(1==C.Type)switch(C.Draw.DrawType){case"STICKLINE":this.CreateBar(t,e,C,o);break;case"DRAWTEXT":this.CreateDrawTextV2(t,e,C,o);break;case"SUPERDRAWTEXT":this.CreateText(t,e,C,o);break;case"DRAWLINE":this.CreateStraightLine(t,e,C,o);break;case"DRAWBAND":this.CreateBand(t,e,C,o);break;case"DRAWKLINE":case"DRAWKLINE_IF":this.CreateKLine(t,e,C,o);break;case"POLYLINE":this.CreatePolyLine(t,e,C,o);break;case"DRAWGBK":case"DRAWGBK2":this.CreateBackgroud(t,e,C,o);break;case"DRAWNUMBER":case"DRAWNUMBER_FIX":case"DRAWTEXT_FIX":this.CreateNumberText(t,e,C,o);break;case"DRAWICON":this.CreateIcon(t,e,C,o);break;case"TIPICON":this.CreateTipIcon(t,e,C,o);break;case"DRAWCHANNEL":this.CreateChannel(t,e,C,o);break;case"DRAWTEXT_LINE":this.CreateTextLine(t,e,C,o);break;case"VERTLINE":this.CreateChartVericaltLine(t,e,C,o);break;case"HORLINE":this.CreateChartHorizontalLine(t,e,C,o);break;case"MULTI_LINE":this.CreateMultiLine(t,e,C,o);break;case"MULTI_POINT":this.CreateMultiPoint(t,e,C,o);break;case"MULTI_BAR":this.CreateMultiBar(t,e,C,o);break;case"MULTI_TEXT":this.CreateMultiText(t,e,C,o);break;case"MULTI_SVGICON":this.CreateMultiSVGIcon(t,e,C,o);break;case"DRAWSVG":this.CreateChartDrawSVG(t,e,C,o);break;case"MULTI_HTMLDOM":this.CreateMulitHtmlDom(t,e,C,o);break;case"KLINE_BG":this.CreateBackgroud(t,e,C,o);break;case"PARTLINE":this.CreatePartLine(t,e,C,o);break;case"DRAWTEXTABS":case"DRAWTEXTREL":this.CreateDrawText(t,e,C,o);break;case qo.OVERLAY_BARS:this.CreateStackedBar(t,e,C,o);break;case"DRAWCOLORKLINE":this.CreateDrawColorKLine(t,e,C,o);break;default:var c=Zo.Get(C.Draw.DrawType);c&&c.CreateChartCallback&&c.CreateChartCallback(t,e,C,o,this)}else 2==C.Type?this.CreateMACD(t,e,C,o):3==C.Type?this.CreatePointDot(t,e,C,o,a):4==C.Type?this.CreateLineStick(t,e,C,o):5==C.Type?this.CreateStick(t,e,C,o):6==C.Type?this.CreateVolStick(t,e,C,o,a):7==C.Type?this.CreateLine(t,e,C,o,C.Type):8==C.Type&&this.CreateLine(t,e,C,o,C.Type);var f=r.Data[o];f&&(this.FloatPrecision>=0&&(f.FloatPrecision=this.FloatPrecision),we.IsNumber(this.StringFormat)&&(f.StringFormat=this.StringFormat))}}return!0}},this.RecvResultData=function(t,e){var a=e.HQChart,i=e.WindowIndex,r=e.HistoryData;e.Self.OutVar=t,e.Self.BindData(a,i,r),e.HQChart.UpdataDataoffset(),e.HQChart.UpdateFrameMaxMin(),!1===e.Self.IsSync&&e.HQChart.Draw();var n=a.GetOverlayIndexEvent();if(n){var o=e.Self,s={OutVar:o.OutVar,WindowIndex:i,Name:o.Name,Arguments:o.Arguments,HistoryData:r,Identify:o.OverlayIndex.Identify,Stock:{Symbol:a.Symbol,Name:a.Name}};n.Callback(n,s,o)}},this.ReloadChartResource=function(t,e,a){var i=t.GetEventCallback(Kn.ON_RELOAD_OVERLAY_INDEX_CHART_RESOURCE);if(i&&i.Callback){var r=this.OverlayIndex,n=r.Frame,o=n.Script,s={Chart:a,IndexName:o.Name,IndexID:o.ID,HQChart:t,WindowIndex:e,Guid:r.Identify};i.Callback(i,s,this)}},this.CreateLine=function(t,e,a,i,r){var n=this.OverlayIndex,o=n.Frame;if(7==r)var s=new gt;else var s=new ct;if(s.Canvas=t.Canvas,s.DrawType=1,s.Name=a.Name,s.ChartBorder=o.Frame.ChartBorder,s.ChartFrame=o.Frame,s.Identify=n.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),8==r&&(s.DrawType=2,s.BreakPoint=a.BreakPoint),a.LineWidth){var l=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(l)&&l>0&&(s.LineWidth=l)}0==a.IsShow&&(s.IsShow=!1),s.Data.Data=a.Data,this.ReloadChartResource(t,e,s);var h=e+1,u=t.TitlePaint[h],C=new ta(s.Data,a.Name,s.Color);this.SetTitleData(C,s),u.OverlayIndex.get(n.Identify).Data[i]=C,this.SetChartIndexName(s),o.ChartPaint.push(s)},this.CreateBar=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Ft;o.Canvas=t.Canvas,a.Draw.Width>0?o.Width=a.Draw.Width:o.Width=1,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i);o.Data.Data=a.Draw.DrawData,this.SetChartIndexName(o),n.ChartPaint.push(o)},this.CreateDrawText=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Mt;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.ReloadResource(),a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i),a.IsDrawAbove?o.Direction=1:o.Direction=0,o.DrawData=a.Draw.DrawData,a.DrawFontSize>0&&(o.TextFont=a.DrawFontSize*C()+"px å¾®è½¯éé»"),n.ChartPaint.push(o)},this.CreateDrawTextV2=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Nt;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.ReloadResource(),a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i),!0===a.IsDrawCenter&&(o.TextAlign="center"),!0===a.IsDrawAbove&&(o.TextBaseline="bottom"),!0===a.IsDrawBelow&&(o.TextBaseline="top"),a.Draw.DrawData&&(o.Data.Data=a.Draw.DrawData),o.Text=a.Draw.Text,a.Draw.Direction>0&&(o.Direction=a.Draw.Direction),a.Draw.YOffset>0&&(o.YOffset=a.Draw.YOffset),a.Draw.TextAlign&&(o.TextAlign=a.Draw.TextAlign),"TOP"===a.Draw.FixedPosition?o.FixedPosition=1:"BOTTOM"===a.Draw.FixedPosition&&(o.FixedPosition=2),a.DrawVAlign>=0&&(0==a.DrawVAlign?o.TextBaseline="top":1==a.DrawVAlign?o.TextBaseline="middle":2==a.DrawVAlign&&(o.TextBaseline="bottom")),a.DrawAlign>=0&&(0==a.DrawAlign?o.TextAlign="left":1==a.DrawAlign?o.TextAlign="center":2==a.DrawAlign&&(o.TextAlign="right")),a.DrawFontSize>0&&(o.FixedFontSize=a.DrawFontSize),a.Background&&(o.TextBG=a.Background),a.VerticalLine&&(o.VerticalLine=a.VerticalLine),we.IsNumber(a.XOffset)&&(o.ShowOffset.X=a.XOffset),we.IsNumber(a.YOffset)&&(o.ShowOffset.Y=a.YOffset),n.ChartPaint.push(o)},this.CreateText=function(t,e,a,i,r){var n=this.OverlayIndex,o=n.Frame,s=new Mt;s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=o.Frame.ChartBorder,s.ChartFrame=o.Frame,s.Identify=n.Identify,s.ReloadResource(),a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i);a.Draw.Position&&(s.Position=a.Draw.Position),a.Draw.DrawData&&(s.Data.Data=a.Draw.DrawData),s.Text=a.Draw.Text,a.Draw.Direction>0&&(s.Direction=a.Draw.Direction),a.Draw.YOffset>0&&(s.YOffset=a.Draw.YOffset),a.Draw.TextAlign&&(s.TextAlign=a.Draw.TextAlign),o.ChartPaint.push(s)},this.CreateMACD=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new _t;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify;var s=e+1;o.Data.Data=a.Data;var l=t.TitlePaint[s],h=this.GetDefaultColor(i);a.Color&&(h=this.GetColor(a.Color)),a.UpColor&&(o.UpColor=a.UpColor),a.DownColor&&(o.DownColor=a.DownColor),this.ReloadChartResource(t,e,o),l.OverlayIndex.get(r.Identify).Data[i]=new ta(o.Data,a.Name,h),this.SetChartIndexName(o),n.ChartPaint.push(o)},this.CreatePointDot=function(t,e,a,i,r){var n=this.OverlayIndex,o=n.Frame,s=new It;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=o.Frame.ChartBorder,s.ChartFrame=o.Frame,s.Identify=n.Identify,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.Radius&&(s.Radius=a.Radius),a.LineWidth){var l=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(l)&&l>0&&(s.Radius=l)}we.IsBool(a.UpDownDot)&&(s.EnableUpDownColor=a.UpDownDot,s.HistoryData=r);var h=e+1;s.Data.Data=a.Data,t.TitlePaint[h].OverlayIndex.get(n.Identify).Data[i]=new ta(s.Data,a.Name,s.Color),this.SetChartIndexName(s),o.ChartPaint.push(s)},this.CreateStick=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new St;if(o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i),a.LineWidth){var s=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(s)&&s>0&&(o.LineWidth=s)}var l=e+1;o.Data.Data=a.Data,this.ReloadChartResource(t,e,o),t.TitlePaint[l].OverlayIndex.get(r.Identify).Data[i]=new ta(o.Data,a.Name,o.Color),n.ChartPaint.push(o)},this.CreateLineStick=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new xt;if(o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i),a.LineWidth){var s=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(s)&&s>0&&(o.LineWidth=s)}var l=e+1;o.Data.Data=a.Data,t.TitlePaint[l].OverlayIndex.get(r.Identify).Data[i]=new ta(o.Data,a.Name,o.Color),n.ChartPaint.push(o)},this.CreateStraightLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new ct;if(o.DrawType=1,o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i),a.LineWidth){var s=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(s)&&s>0&&(o.LineWidth=s)}o.Data.Data=a.Draw.DrawData,n.ChartPaint.push(o)},this.CreateVolStick=function(t,e,a,i,r){var n=this.OverlayIndex,o=n.Frame,s=new bt;if(s.Canvas=t.Canvas,s.Name=a.Name,s.ChartBorder=o.Frame.ChartBorder,s.ChartFrame=o.Frame,s.Identify=n.Identify,s.KLineDrawType=t.KLineDrawType,a.Color?s.Color=this.GetColor(a.Color):s.Color=this.GetDefaultColor(i),a.UpColor&&(s.UpColor=a.UpColor),a.DownColor&&(s.DownColor=a.DownColor),we.IsNumber(a.StickType)&&(s.BarType=a.StickType),we.IsNumber(a.BarColorType)&&(s.BarColorType=a.BarColorType),a.LineWidth){var l=parseInt(a.LineWidth.replace("LINETHICK",""));we.IsPlusNumber(l)&&(s.BarWidth=l)}var h=e+1;s.Data.Data=a.Data,s.HistoryData=r,this.ReloadChartResource(t,e,s);var u=t.TitlePaint[h],C=new ta(s.Data,a.Name,s.Color);u.OverlayIndex.get(n.Identify).Data[i]=C,this.SetTitleData(C,s),this.SetChartIndexName(s),o.ChartPaint.push(s)},this.CreateBand=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new kt;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.FirstColor=a.Draw.Color[0],o.SecondColor=a.Draw.Color[1],o.Data.Data=a.Draw.DrawData,we.IsBool(a.IsFirstDraw)&&(o.IsDrawFirst=a.IsFirstDraw),this.SetChartIndexName(o),n.ChartPaint.push(o)},this.CreateKLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new nt;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.Data.Data=a.Draw.DrawData,o.IsShowMaxMinPrice=!1,o.IsShowKTooltip=!1,a.Color&&(o.UnchagneColor=o.DownColor=o.UpColor=this.GetColor(a.Color)),n.ChartPaint.push(o)},this.CreatePolyLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new ct;if(o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i),a.LineWidth){var s=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(s)&&s>0&&(o.LineWidth=s)}var l=e+1;o.Data.Data=a.Draw.DrawData,t.TitlePaint[l].OverlayIndex.get(r.Identify).Data[i]=new ta(line.Data," ",line.Color),n.ChartPaint.push(o)},this.CreateNumberText=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Mt;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.ReloadResource(),o.TextAlign="center",a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i),a.IsDrawAbove?o.Direction=1:o.Direction=2,a.Draw.Position&&(o.Position=a.Draw.Position);o.Data.Data=a.Draw.DrawData.Value,o.Text=a.Draw.DrawData.Text,this.SetChartIndexName(o),n.ChartPaint.push(o)},this.CreateTextLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Jt;if(o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,a.Draw&&a.Draw.DrawData){var s=a.Draw.DrawData;o.Text=s.Text,o.Line=s.Line,o.Price=s.Price}n.ChartPaint.push(o)},this.CreateStackedBar=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new re;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,we.IsNonEmptyArray(a.Draw.BarColor)&&(o.BarColor=a.Draw.BarColor),we.IsNonEmptyArray(a.Draw.BarName)&&(o.BarName=a.Draw.BarName),we.IsNumber(a.Draw.LineWidth)&&(o.LineWidth=a.Draw.LineWidth),we.IsNumber(a.Draw.BarType)&&(o.BarType=a.Draw.BarType),o.Data.Data=a.Draw.DrawData;var s=e+1,l=t.TitlePaint[s],h=new ta(o.Data,o.BarName,o.BarColor);h.DataType="ChartStackedBar",l.OverlayIndex.get(r.Identify).Data[i]=h,n.ChartPaint.push(o)},this.CreateDrawColorKLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new ot;o.Canvas=t.Canvas,o.Name=a.Name,o.DrawName="DRAWCOLORKLINE",o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.Data.Data=a.Draw.DrawData,we.IsBool(a.Draw.IsEmptyBar)&&(o.IsEmptyBar=a.Draw.IsEmptyBar),a.Draw.Color&&(o.Color=a.Draw.Color),n.ChartPaint.push(o)},this.CreateIcon=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Mt;o.Canvas=t.Canvas,o.TextAlign="center",o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,a.DrawVAlign>=0&&(0==a.DrawVAlign?o.Direction=1:1==a.DrawVAlign?o.Direction=0:2==a.DrawVAlign&&(o.Direction=2)),a.DrawAlign>=0&&(0==a.DrawAlign?o.TextAlign="left":1==a.DrawAlign?o.TextAlign="center":2==a.DrawAlign&&(o.TextAlign="right")),we.IsNumber(a.XOffset)&&(o.ShowOffset.X=a.XOffset),we.IsNumber(a.YOffset)&&(o.ShowOffset.Y=a.YOffset),o.Data.Data=a.Draw.DrawData;var s=a.Draw.Icon;1==s.IconFont?o.IconFont={Family:s.Family,Text:s.Symbol,Color:s.Color}:(o.Text=s.Symbol,a.Color?o.Color=this.GetColor(a.Color):s.Color?o.Color=s.Color:o.Color="rgb(0,0,0)"),this.SetChartIndexName(o),n.ChartPaint.push(o)},this.CreateTipIcon=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new ee;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,t.ChartPaint[0].IsMinuteFrame()?o.Data=t.SourceData:o.Data=t.ChartPaint[0].Data,o.Family=a.Draw.Icon.Family,o.TextFont=So.TIPICON.TextFont;var s=So.TIPICON.Size,l=So.TIPICON.Color,h=0,u=2;if(we.IsNumber(a.YOffset)&&(h=a.YOffset),a.Color&&(l=this.GetColor(a.Color)),a.DrawFontSize>0&&(s=a.DrawFontSize),a.DrawVAlign>=0&&(u=a.DrawVAlign),a.Draw&&we.IsNonEmptyArray(a.Draw.DrawData)&&a.Draw.Icon){var C=a.Draw.DrawData,c=[],f=Array.isArray(a.Draw.Text),d=null;!f&&a.Draw.Text&&(d={Text:a.Draw.Text});for(var D=0;D<C.length;++D){var m=C[D];if(we.IsNumber(m)){var p={Index:D,Value:m,SVG:{Symbol:a.Draw.Icon.Symbol,Size:s,Color:l,YOffset:h,VAlign:u}};if(f){var v=a.Draw.Text[D];v&&(p.Tooltip={Text:v})}else p.Tooltip=d;c.push(p)}}o.Texts=c}n.ChartPaint.push(o)},this.CreateChannel=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Wt;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,a.Draw.AreaColor?o.AreaColor=a.Draw.AreaColor:a.Color?o.AreaColor=this.GetColor(a.Color):o.AreaColor=this.GetDefaultColor(i),a.Draw.Border.Color?o.LineColor=a.Draw.Border.Color:o.LineColor=null,a.Draw.Border.Dotted&&(o.LineDotted=a.Draw.Border.Dotted),a.Draw.Border.Width>0&&(o.LineWidth=a.Draw.Border.Width),o.Data.Data=a.Draw.DrawData,n.ChartPaint.push(o)},this.CreatePartLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new vt;if(o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,a.LineWidth){var s=parseInt(a.LineWidth.replace("LINETHICK",""));we.IsPlusNumber(s)&&(o.LineWidth=s)}o.Data.Data=a.Draw.DrawData,this.SetChartIndexName(o),n.ChartPaint.push(o)},this.CreateMultiLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Zt;if(o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.Data=t.ChartPaint[0].Data,o.Lines=a.Draw.DrawData,a.Draw.LineDash&&(o.LineDash=a.Draw.LineDash),we.IsNumber(a.Draw.LineWidth)&&(o.LineWidth=a.Draw.LineWidth),we.IsBool(a.Draw.IsFullRangeMaxMin)&&(o.IsFullRangeMaxMin=a.Draw.IsFullRangeMaxMin),a.Draw.Arrow){var s=a.Draw.Arrow;1==s.Start&&(o.Arrow.Start=!0),1==s.End&&(o.Arrow.End=!0),we.IsNumber(s.Angle)&&(o.ArrawAngle=s.Angle),we.IsNumber(s.Length)&&(o.ArrawLength=s.Length),we.IsNumber(s.LineWidth)&&(o.ArrawLineWidth=s.LineWidth)}this.ReloadChartResource(t,e,o),this.SetChartIndexName(o),n.ChartPaint.push(o)},this.CreateMultiPoint=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new jt;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.Data=t.ChartPaint[0].Data,o.PointGroup=a.Draw.DrawData,n.ChartPaint.push(o)},this.CreateBackgroud=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Ut;if(o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,a.Draw&&a.Draw.DrawData){var s=a.Draw.DrawData;o.Color=s.Color,o.ColorAngle=s.Angle,s.Data&&(o.Data.Data=s.Data)}n.ChartPaint.push(o)},this.CreateMultiBar=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new qt;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.Data=t.ChartPaint[0].Data,o.Bars=a.Draw.DrawData;var s=e+1,l=t.TitlePaint[s],h=new ta({KData:o.Data,BarData:o.Bars},a.Name,null);h.IsShow=!1,h.DataType="MULTI_BAR",l.OverlayIndex.get(r.Identify).Data[i]=h,this.SetChartIndexName(o),n.ChartPaint.push(o)},this.CreateMultiText=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Qt;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.Data=t.ChartPaint[0].Data,o.Texts=a.Draw.DrawData,this.SetChartIndexName(o),n.ChartPaint.push(o)},this.CreateMultiSVGIcon=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new $t;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.Data=t.ChartPaint[0].Data,o.Family=a.Draw.DrawData.Family,o.AryIcon=a.Draw.DrawData.Icon,o.BuildCacheData(),this.SetChartIndexName(o),n.ChartPaint.push(o)},this.CreateChartDrawSVG=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new ee;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,t.ChartPaint[0].IsMinuteFrame()?o.Data=t.SourceData:o.Data=t.ChartPaint[0].Data,we.IsBool(a.Draw.DrawData.EnableTooltip)&&(o.EnableTooltip=a.Draw.DrawData.EnableTooltip),we.IsBool(a.Draw.DrawData.IsDrawFirst)&&(o.IsDrawFirst=a.Draw.DrawData.IsDrawFirst),o.Family=a.Draw.DrawData.Family,o.TextFont=a.Draw.DrawData.TextFont,o.Texts=a.Draw.DrawData.Data,a.Draw.AutoPosition&&(o.AutoPosition=a.Draw.AutoPosition),this.ReloadChartResource(t,e,o),this.SetChartIndexName(o),n.ChartPaint.push(o)},this.CreateMulitHtmlDom=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new te;o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.HQChart=t,o.Data=t.ChartPaint[0].Data,o.Texts=a.Draw.DrawData,o.DrawCallback=a.Draw.Callback,n.ChartPaint.push(o)},this.CreateChartVericaltLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new yt;if(o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.HQChart=t,a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i),a.LineWidth){var s=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(s)&&s>0&&(o.LineWidth=s)}this.SetChartLineDash(o,a.Draw.DrawData),o.Data.Data=a.Draw.DrawData.Data,n.ChartPaint.push(o)},this.CreateChartHorizontalLine=function(t,e,a,i){var r=this.OverlayIndex,n=r.Frame,o=new Et;if(o.Canvas=t.Canvas,o.Name=a.Name,o.ChartBorder=n.Frame.ChartBorder,o.ChartFrame=n.Frame,o.Identify=r.Identify,o.HQChart=t,a.Color?o.Color=this.GetColor(a.Color):o.Color=this.GetDefaultColor(i),a.LineWidth){var s=parseInt(a.LineWidth.replace("LINETHICK",""));!isNaN(s)&&s>0&&(o.LineWidth=s)}this.SetChartLineDash(o,a.Draw.DrawData),o.ExtendType=a.Draw.DrawData.Extend,o.Data.Data=a.Draw.DrawData.Data,n.ChartPaint.push(o)},this.CreateSelfKLine=function(t,e,a){var i=this.OverlayIndex,r=i.Frame,n=new nt;n.Canvas=t.Canvas,n.Name="Self Kline",n.ChartBorder=r.Frame.ChartBorder,n.ChartFrame=r.Frame,n.Identify=i.Identify,n.Data=a,n.IsShowMaxMinPrice=!1,n.IsShowKTooltip=!1,n.DrawType=this.KLineType,r.ChartPaint.push(n)},this.GetDefaultColor=function(t){var e=["rgb(24,71,178)","rgb(42,230,215)","rgb(252,96,154)","rgb(0,128,255)","rgb(229,0,79)","rgb(68,114,196)","rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)"];return e[parseInt(t)%(e.length-1)]}}function br(t,e,a,i,r){this.newMethod=r?xr:Sr,this.newMethod(t,e,a,i),delete this.newMethod,this.ClassName="APIScriptIndex",this.IsOverlayIndex=1==r,this.ApiUrl,this.HQDataType,this.Version=1,i&&i.API&&(i.API.Url&&(this.ApiUrl=i.API.Url),i.API.Name&&(this.Name=this.ID=i.API.Name),i.API.ID&&(this.ID=i.API.ID),i.API.Version>0&&(this.Version=i.API.Version),!0===i.API.IsUsePageData&&(this.IsUsePageData=i.API.IsUsePageData)),this.Super_CopyTo=this.CopyTo,this.CopyTo=function(t){this.Super_CopyTo(t),t.ApiUrl=this.ApiUrl,t.Version=this.Version,t.IsOverlayIndex=this.IsOverlayIndex},this.RecvSubscribeData=function(t,e,a,i){2==this.Version?this.RecvAPIData2(t,e,a,i):this.RecvAPIData(t,e,a,i)},this.ExecuteScript=function(t,e,a){Xn.Complier.Log("[APIScriptIndex::ExecuteScript] name, Arguments ",this.Name,this.Arguments);var i=Jo.KLINE_ID,r=null;"MinuteChartContainer"===t.ClassName||"MinuteChartHScreenContainer"===t.ClassName?(i=t.DayCount>1?Jo.MULTIDAY_MINUTE_ID:Jo.MINUTE_ID,r=a.GetDateRange()):"HistoryMinuteChartContainer"===t.ClassName?i=Jo.HISTORY_MINUTE_ID:r=a.GetDateRange();var o=[];if(this.Arguments)for(var s in this.Arguments){var l=this.Arguments[s];o.push({name:l.Name,value:l.Value})}var h;t.GetRequestDataCount&&(h=t.GetRequestDataCount());var u=this,C={indexname:this.ID,symbol:t.Symbol,script:this.Script,args:o,period:t.Period,right:t.Right,hqdatatype:i};if(r&&(C.DateRange=r),h&&(C.maxdatacount=h.MaxRequestDataCount,C.maxminutedaycount=h.MaxRequestMinuteDayCount),i!=Jo.MULTIDAY_MINUTE_ID&&i!=Jo.MINUTE_ID||(C.daycount=t.DayCount),this.HQDataType=i,++this.RunCount,t.NetworkFilter){var c={Name:"APIScriptIndex::ExecuteScript",Explain:"ææ è®¡ç®",Request:{Url:u.ApiUrl,Type:"POST",Data:C},Self:this,HQChart:t,PreventDefault:!1};if(t.NetworkFilter(c,function(i){2==u.Version?u.RecvAPIData2(i,t,e,a):u.RecvAPIData(i,t,e,a)}),1==c.PreventDefault)return}n.HttpRequest({url:u.ApiUrl,data:C,type:"post",dataType:"json",async:!0,success:function(i){u.RecvAPIData(i,t,e,a)},error:function(t){u.RecvError(t)}})},this.RecvAPIData2=function(t,e,a,i){if(Xn.Complier.Log("[APIScriptIndex::RecvAPIData2] recv data ",this.Name,t),this.HQDataType==Jo.KLINE_ID?(this.OutVar=this.ConvertToLocalData(t,e),Xn.Complier.Log("[APIScriptIndex::RecvAPIData2] conver to OutVar ",this.OutVar)):this.HQDataType==Jo.MINUTE_ID?(this.OutVar=this.ConvertToLocalData(t,e),Xn.Complier.Log("[APIScriptIndex::RecvAPIData2] conver to OutVar ",this.OutVar)):this.HQDataType==Jo.MULTIDAY_MINUTE_ID&&(this.OutVar=this.ConvertToLocalData(t,e),Xn.Complier.Log("[APIScriptIndex::RecvAPIData2] conver to OutVar ",this.OutVar)),this.BindData(e,a,i),e.UpdataDataoffset(),e.UpdateFrameMaxMin(),e.Draw(),e.GetIndexEvent){var r=e.GetIndexEvent();if(r){var t={OutVar:this.OutVar,WindowIndex:a,Name:this.Name,Arguments:this.Arguments,HistoryData:i,Stock:{Symbol:e.Symbol,Name:e.Name}};r.Callback(r,t,this)}}},this.ConvertToLocalData=function(t,e){var a=t.OutVar;if("MinuteChartContainer"==e.ClassName||"MinuteChartHScreenContainer"==e.ClassName)var i=e.SourceData,r=i.GetAPIDataIndex(t.Date,t.Time);else{var i=e.ChartPaint[0].Data;if(tt.IsDayPeriod(t.Period,!0))var r=i.GetAPIDataIndex(t.Date);else var r=i.GetAPIDataIndex(t.Date,t.Time)}var n=[];for(var o in a){var s=a[o],l={Type:s.Type,Name:s.Name};if(0==s.Type){l.Data=[];for(var h=0;h<r.length;++h){var u=r[h];u.Index<0?l.Data[h]=null:l.Data[h]=s.Data[u.Index]}l.Name&&l.Name.indexOf("@NODRAW@")>=0&&(l.Name=l.Name.replace("@NODRAW@",""))}else{if(1!=s.Type)continue;l.Name=s.DrawType,l.Draw={DrawType:s.DrawType};var C=s.Draw;switch(s.DrawType){case"STICKLINE":for(var c=[],h=0;h<r.length;++h){c[h]=null;var u=r[h],f=u.Index;if(!(f<0)){var d=C.Price[f],D=C.Price2[f];we.IsNumber(d)&&we.IsNumber(D)&&(c[h]={Value:d,Value2:D})}}l.Draw.DrawData=c,l.Draw.Width=C.Width,l.Draw.Type=C.Empty;break;case"DRAWTEXT":for(var c=[],m=[],h=0;h<r.length;++h){c[h]=null;var u=r[h],f=u.Index;if(!(f<0)){var d=C.Price[f];if(we.IsNumber(d)&&(c[h]=d),Array.isArray(C.Text)){var s=C.Text[f];we.IsString(s)&&(m[h]=s)}}}Array.isArray(C.Text)?l.Draw.Text=m:l.Draw.Text=C.Text,l.Draw.DrawData=c;break;case"DRAWNUMBER":for(var c={Value:[],Text:[]},h=0;h<r.length;++h){c.Value[h]=null,c.Text[h]=null;var u=r[h],f=u.Index;if(!(f<0)){var d=C.Price[f],p=C.Number[f];we.IsNumber(d)&&we.IsNumber(p)&&(c.Value[h]=d,c.Text[h]=p.toFixed(2))}}l.Draw.DrawData=c;break;case"DRAWBAND":for(var c=[],h=0;h<r.length;++h){c[h]=null;var u=r[h],f=u.Index;if(!(f<0)){var d=C.Val1[f],D=C.Val2[f];we.IsNumber(d)&&we.IsNumber(D)&&(c[h]={Value:d,Value2:D})}}l.Draw.DrawData=c,l.Draw.Color=[null,null],C.Color1&&(l.Draw.Color[0]=C.Color1.toLowerCase()),C.Color2&&(l.Draw.Color[1]=C.Color2.toLowerCase());break;case"DRAWKLINE":for(var c=[],h=0;h<r.length;++h){var s={Open:null,High:null,Low:null,Close:null};c[h]=s;var u=r[h],f=u.Index;if(!(f<0)){var v=C.High[f],g=C.Low[f],T=C.Open[f],I=C.Close[f];we.IsPlusNumber(v)&&we.IsPlusNumber(g)&&we.IsPlusNumber(T)&&we.IsPlusNumber(I)&&(s.Open=T,s.Close=I,s.High=v,s.Low=g)}}l.Draw.DrawData=c;break;case"DRAWTEXT_FIX":for(var c={Value:[],Text:[]},h=0;h<r.length;++h){c.Value[h]=0,c.Text[h]=null;var u=r[h],f=u.Index;if(!(f<0)){C.Cond[f]&&(c.Value[h]=1,c.Text[h]=C.Text)}}l.Draw.DrawData=c,l.Draw.Position={X:C.X,Y:C.Y,Type:C.Type};break;case"DRAWNUMBER_FIX":for(var c={Value:[],Text:[]},h=0;h<r.length;++h){c.Value[h]=null,c.Text[h]=null;var u=r[h],f=u.Index;if(!(f<0)){var S=C.Number[f];we.IsNumber(S)&&(c.Value[h]=S,c.Text[h]=we.RemoveZero(S.toFixed(2)))}}l.Draw.DrawData=c,l.Draw.Position={X:C.X,Y:C.Y,Type:C.Type};break;case"DRAWICON":var x=Go.GetDrawIcon(C.Type);x||Go.GetDrawTextIcon(C.Type),x||(x={Symbol:"ð©"}),l.Draw.Icon=x;for(var c=[],h=0;h<r.length;++h){c[h]=null;var u=r[h],f=u.Index;if(!(f<0)){var S=C.Price[f];we.IsNumber(S)&&(c[h]=S)}}l.Draw.DrawData=c;break;case"PARTLINE":for(var c=[],h=0;h<r.length;++h){c[h]={Value:null,RGB:null};var u=r[h],f=u.Index;if(!(f<0)){var b=C.Color[f];if(we.IsString(b)){var S=C.Price[f];we.IsNumber(S)&&(c[h].Value=S,c[h].RGB=b)}}}l.Draw.DrawData=c;break;case"FILLRGN":for(var c=[],h=0;h<r.length;++h){c[h]=null;var u=r[h],f=u.Index;if(!(f<0)){var b=C.Color[f];if(we.IsString(b)){var S=C.Price[f];if(we.IsNumber(S)){var y=C.Price2[f];we.IsNumber(y)&&(c[h]={Value:S,Value2:y,Color:b})}}}}l.Draw.DrawData=c,l.Draw.DrawType="FILLRGN2";break;default:continue}}for(var o in s.Attribute){var E=s.Attribute[o];switch(E){case"COLORSTICK":l.Type=2;break;case"POINTDOT":l.Radius=So.POINTDOT.Radius,l.Type=3;break;case"CIRCLEDOT":l.Radius=So.CIRCLEDOT.Radius,l.Type=3;break;case"DOTLINE":l.IsDotLine=!0;break;case"DRAWABOVE":l.IsDrawAbove=!0;break;case"LINESTICK":l.Type=4;break;case"STICK":l.Type=5;break;case"VOLSTICK":l.Type=6;break;case"LINEAREA":l.Type=9;break;case"NODRAW":l.IsShow=!1;break;case"NONE_OUT_NAME":l.NoneName=!0;break;case"NOTEXT":l.IsShowTitle=!1}0==E.indexOf("COLOR")?l.Color=E:0==E.indexOf("LINETHICK")&&(l.LineWidth=E)}n.push(l)}return n},this.RecvAPIData=function(t,e,a,i){if(Xn.Complier.Log("[APIScriptIndex::RecvAPIData] recv data ",this.Name,t),0==t.code){if(e.EnableVerifyRecvData&&(!t.stock||e.Symbol!=t.stock.symbol))return void Xn.Chart.Warn("[APIScriptIndex::RecvAPIData] recv data symbol not match. HQChart["+e.Symbol+"]");if(t.error&&we.IsString(t.error.message)){var r={HQChart:e,WindowIndex:a,HistoryData:i,Self:this};return void this.ShowConditionError(r,t.error.message)}if(t.outdata&&t.outdata.name&&(this.Name=t.outdata.name),t.outdata.args){this.Arguments=[];for(var n in t.outdata.args){var o=t.outdata.args[n];this.Arguments.push({Name:o.name,Value:o.value})}}if(this.HQDataType==Jo.KLINE_ID?(this.OutVar=this.FittingData(t.outdata,e),Xn.Complier.Log("[APIScriptIndex::RecvAPIData] conver to OutVar ",this.OutVar)):this.OutVar=this.FittingMinuteData(t.outdata,e),this.BindData(e,a,i),0==this.IsLocked)e.Frame.SubFrame[a].Frame.SetLock(null);else{var s={IsLocked:!0,Callback:this.LockCallback,IndexName:this.Name,ID:this.LockID,BG:this.LockBG,Text:this.LockText,TextColor:this.LockTextColor,Font:this.LockFont,Count:this.LockCount,MinWidth:this.LockMinWidth};e.Frame.SubFrame[a].Frame.SetLock(s)}if(e.UpdataDataoffset(),e.UpdateFrameMaxMin(),!1===t.Redraw||!1===this.IsSync&&e.Draw(),e.GetIndexEvent){var l=e.GetIndexEvent();if(l){var t={OutVar:this.OutVar,WindowIndex:a,Name:this.Name,Arguments:this.Arguments,HistoryData:i,Stock:{Symbol:e.Symbol,Name:e.Name}};l.Callback(l,t,this)}}}},this.FittingArray=function(t,e,a,i,r){var n=i.ChartPaint[0].Data,o=[];for(var s in t){var l=t[s],h=new Z;h.Date=e[s],a&&s<a.length&&(h.Time=a[s]),h.Value=l,o.push(h)}var u;u=tt.IsDayPeriod(i.Period,!0)?n.GetFittingData(o):n.GetMinuteFittingData(o);var C=new tt;C.Data=u;return 1==r?C.GetObject():C.GetValue()},this.FittingMultiLine=function(t,e,a,i){var r=i.ChartPaint[0].Data;if(tt.IsDayPeriod(i.Period,!0)){var r=i.ChartPaint[0].Data,n=[];for(var o in t){var s=t[o];for(var l in s.Point){var h=s.Point[l];n.push(h)}}return n.sort(function(t,e){return t.Date-e.Date}),r.GetDateIndex(n),t}if(tt.IsMinutePeriod(i.Period,!0)||tt.IsTickPeriod(i.Period)||tt.IsSecondPeriod(i.Period)){var r=i.ChartPaint[0].Data,n=[];for(var o in t){var s=t[o];for(var l in s.Point){var h=s.Point[l];n.push(h)}}return n.sort(function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date}),r.GetDateTimeIndex(n),t}if(this.HQDataType==Jo.MINUTE_ID||this.HQDataType==Jo.MULTIDAY_MINUTE_ID){var u=i.SourceData,n=[];for(var o in t){var s=t[o];for(var l in s.Point){var h=s.Point[l];n.push(h)}}return n.sort(function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date}),u.GetDateTimeIndex(n),t}return null},this.FittingMultiText=function(t,e,a,i){if(tt.IsDayPeriod(i.Period,!0)){var r=i.ChartPaint[0].Data;return t.sort(function(t,e){return t.Date-e.Date}),r.GetDateIndex(t),t}if(tt.IsMinutePeriod(i.Period,!0)||tt.IsTickPeriod(i.Period)||tt.IsSecondPeriod(i.Period)||tt.IsMilliSecondPeriod(i.Period)){var r=i.ChartPaint[0].Data;return t.sort(function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date}),r.GetDateTimeIndex(t),t}if(this.HQDataType==Jo.MINUTE_ID||this.HQDataType==Jo.MULTIDAY_MINUTE_ID){var n=i.SourceData;return t.sort(function(t,e){return t.Date==e.Date?t.Time-e.Time:t.Date-e.Date}),n.GetDateTimeIndex(t),t}return null},this.FittingData=function(t,e){var a=t.outvar,i=t.date,r=t.time,n=(e.ChartPaint[0].Data,[]);if(!a)return n;for(var o=0;o<a.length;++o){var s=a[o],l={Name:s.name,Type:s.type};if(s.color&&(l.Color=s.color),we.IsBool(s.IsShowTitle)&&(l.IsShowTitle=s.IsShowTitle),s.data)l.Data=this.FittingArray(s.data,i,r,e),s.color&&(l.Color=s.color),s.linewidth&&(l.LineWidth=s.linewidth),we.IsBool(s.isshow)&&(l.IsShow=s.isshow),1==s.isexdata&&(l.IsExData=!0),s.BreakPoint&&(l.BreakPoint=s.BreakPoint),s.UpColor&&(l.UpColor=s.UpColor),s.DownColor&&(l.DownColor=s.DownColor),we.IsBool(s.isDotLine)&&(l.IsDotLine=s.isDotLine),we.IsNonEmptyArray(s.lineDash)&&(l.LineDash=s.lineDash),we.IsBool(s.isSingleLine)&&(l.IsSingleLine=s.isSingleLine),we.IsNumber(s.StickType)&&(l.StickType=s.StickType),we.IsNumber(s.BarColorType)&&(l.BarColorType=s.BarColorType),n.push(l);else if(s.Draw){var h=s.Draw,u={};if("DRAWICON"==h.DrawType)u.Icon=h.Icon,u.Name=h.Name,u.DrawType=h.DrawType,u.DrawData=this.FittingArray(h.DrawData,i,r,e),l.Draw=u,n.push(l);else if("DRAWTEXT"==h.DrawType)u.Text=h.Text,u.Name=h.Name,u.DrawType=h.DrawType,u.DrawData=this.FittingArray(h.DrawData,i,r,e),l.Draw=u,n.push(l);else if("STICKLINE"==h.DrawType)u.Name=h.Name,u.Type=h.Type,u.Width=h.Width,u.DrawType=h.DrawType,u.DrawData=this.FittingArray(h.DrawData,i,r,e,1),l.Draw=u,n.push(l);else if("DRAWBAND"==h.DrawType)u.Name=h.Name,u.Type=h.Type,u.DrawType=h.DrawType,u.DrawData=this.FittingArray(h.DrawData,i,r,e,1),u.Color=h.Color,l.Draw=u,n.push(l);else if("MULTI_LINE"==h.DrawType){if(u.Text=h.Text,u.Name=h.Name,u.DrawType=h.DrawType,u.DrawData=this.FittingMultiLine(h.DrawData,i,r,e),we.IsNonEmptyArray(u.DrawData))for(var C=0;C<u.DrawData.length;++C)this.GetKLineData(u.DrawData[C].Point,e);l.Draw=u,h.LineDash&&(u.LineDash=h.LineDash),we.IsBool(h.IsFullRangeMaxMin)&&(u.IsFullRangeMaxMin=h.IsFullRangeMaxMin),h.Arrow&&(u.Arrow=h.Arrow),we.IsNumber(h.LineWidth)&&(u.LineWidth=h.LineWidth),n.push(l)}else if("MULTI_POINT"==h.DrawType){if(u.Text=h.Text,u.Name=h.Name,u.DrawType=h.DrawType,u.DrawData=this.FittingMultiLine(h.DrawData,i,r,e),we.IsNonEmptyArray(u.DrawData))for(var C=0;C<u.DrawData.length;++C)this.GetKLineData(u.DrawData[C].Point,e);l.Draw=u,n.push(l)}else if("MULTI_BAR"==h.DrawType)u.Text=h.Text,u.Name=h.Name,u.DrawType=h.DrawType,u.DrawData=this.FittingMultiLine(h.DrawData,i,r,e),l.Draw=u,n.push(l);else if(h.DrawType==qo.OVERLAY_BARS)u.Name=h.Name,u.Type=h.Type,u.DrawType=h.DrawType,u.BarName=h.BarName,u.BarColor=h.BarColor,u.LineWidth=h.LineWidth,u.BarType=h.BarType,u.DrawData=this.FittingArray(h.DrawData,i,r,e,1),l.Draw=u,n.push(l);else if(h.DrawType==qo.SCATTER_PLOT)u.Name=h.Name,u.Type=h.Type,u.DrawType=h.DrawType,u.DrawData=this.FittingArray(h.DrawData,i,r,e,1),u.Color=h.Color,u.Radius=h.Radius,l.Draw=u,n.push(l);else if(h.DrawType==qo.KLINE_TABLE)u.Name=h.Name,u.Type=h.Type,u.DrawType=h.DrawType,u.DrawData=this.FittingArray(h.DrawData,i,r,e,1),u.RowCount=h.RowCount,u.RowName=h.RowName,u.IsShowRowName=h.IsShowRowName,u.BGColor=h.BGColor,l.Draw=u,n.push(l);else if("MULTI_TEXT"==h.DrawType)u.Text=h.Text,u.Name=h.Name,u.DrawType=h.DrawType,u.DrawData=this.FittingMultiText(h.DrawData,i,r,e),this.GetKLineData(u.DrawData,e),l.Draw=u,n.push(l);else if("MULTI_SVGICON"==h.DrawType)u.Text=h.Text,u.Name=h.Name,u.DrawType=h.DrawType,u.DrawData={Icon:h.DrawData.Icon,Family:h.DrawData.Family},l.Draw=u,n.push(l);else if("DRAWSVG"==h.DrawType)u.Text=h.Text,u.Name=h.Name,u.DrawType=h.DrawType,h.AutoPosition&&(u.AutoPosition=h.AutoPosition),u.DrawData={Data:this.FittingMultiText(h.Data,i,r,e),Family:h.Family,TextFont:h.TextFont,EnableTooltip:h.EnableTooltip,IsDrawFirst:h.IsDrawFirst},this.GetKLineData(u.DrawData.Data,e),l.Draw=u,n.push(l);else if("MULTI_HTMLDOM"==h.DrawType)u.Text=h.Text,u.Name=h.Name,u.DrawType=h.DrawType,u.Callback=h.Callback,u.DrawData=this.FittingMultiText(h.DrawData,i,r,e),this.GetKLineData(u.DrawData,e),l.Draw=u,n.push(l);else if("COLOR_KLINE"==h.DrawType){u.Text=h.Text,u.Name=h.Name,u.DrawType=h.DrawType;var c=this.FittingMultiText(h.DrawData.KLine,i,r,e),f=new Vn.default;for(var o in c){var s=c[o];f.set(s.Index,s)}u.DrawData={KLine:f},h.Color&&(l.Color=h.Color),l.Draw=u,n.push(l)}else if("KLINE_BG"==h.DrawType)u.Name=h.Name,u.DrawType=h.DrawType,u.DrawData={},u.DrawData.Color=h.Color,u.DrawData.Angle=h.Angle,2==h.Ver?u.DrawData.Data=this.FittingKLineBG_V2(h.DrawData,e):u.DrawData.Data=this.FittingKLineBG(h.DrawData,e),l.Draw=u,l.Name=h.DrawType,n.push(l);else if("MULTI_POINT_LINE"==h.DrawType)u.Name=h.Name,u.DrawType=h.DrawType,u.DrawData={},u.DrawData.Color=h.Color,u.DrawData.PointRadius=h.PointRadius,u.DrawData.PointColor=h.PointColor,u.DrawData.LineWidth=h.LineWidth,u.DrawData.Data=this.FittingMultiPointLine(h.DrawData,e),l.Draw=u,n.push(l);else if("PARTLINE"==h.DrawType)u.Name=h.Name,u.Type=h.Type,u.DrawType=h.DrawType,u.DrawData=this.FittingArray(h.DrawData,i,r,e,1),l.Draw=u,h.LineWidth&&(l.LineWidth=h.LineWidth),n.push(l);else if(h.DrawType==qo.CLIP_COLOR_STICK)u.Name=h.Name,u.Type=h.Type,u.DrawType=h.DrawType,u.DrawData=this.FittingArray(h.Data,i,r,e),l.Draw=u,h.LineWidth&&(l.LineWidth=h.LineWidth),h.UpColor&&(l.UpColor=h.UpColor),h.DownColor&&(l.DownColor=h.DownColor),n.push(l);else if("DRAWCOLORKLINE"==h.DrawType)u.Name=h.Name,u.Type=h.Type,u.DrawType=h.DrawType,u.DrawData=this.FittingArray(h.DrawData,i,r,e,1),l.Draw=u,h.Color&&(u.Color=h.Color),we.IsBool(h.IsEmptyBar)&&(u.IsEmptyBar=h.IsEmptyBar),n.push(l);else{var d=Zo.Get(h.DrawType);d&&d.KLineFittingCallback&&d.KLineFittingCallback(s,l,{Date:i,Time:r,HQChart:e},this)&&n.push(l)}}}return n},this.GetKLineData=function(t,e){if(t&&Array.isArray(t)){if(this.HQDataType==Jo.MINUTE_ID||this.HQDataType==Jo.MULTIDAY_MINUTE_ID)var a=e.SourceData;else var a=e.ChartPaint[0].Data;for(var i in t){var r=t[i];if(we.IsString(r.Value)&&(we.IsNumber(r.Index)&&!(r.Index<0||r.Index>=a.Data.length))){var n=r.Value.toUpperCase(),o=a.Data[r.Index];switch(n){case"HIGH":case"H":r.Value=o.High;break;case"L":case"LOW":r.Value=o.Low;break;case"C":case"CLOSE":r.Value=o.Close}}}}},this.FittingKLineBG=function(t,e){var a=e.ChartPaint[0].Data,i=[];if(tt.IsDayPeriod(e.Period,!0)){for(var r=!1,n=0,o=0;n<a.Data.length;){i[n]=0;var s=a.Data[n];if(o>=t.length)++n;else{var l=t[o];l.Date<s.Date?++o:l.Date>s.Date?++n:(r=!0,i[n]=1,++o,++n)}}if(r)return i}else if(tt.IsMinutePeriod(e.Period,!0)){for(var r=!1,n=0,o=0;n<a.Data.length;){i[n]=0;var s=a.Data[n];if(o>=t.length)++n;else{var l=t[o];l.Date<s.Date||l.Date==s.Date&&l.Time<s.Time?++o:l.Date>s.Date||l.Date==s.Date&&l.Time>s.Time?++n:(r=!0,i[n]=1,++o,++n)}}if(r)return i}return null},this.FittingKLineBG_V2=function(t,e){var a=e.ChartPaint[0].Data,i=[];if(tt.IsDayPeriod(e.Period,!0)){for(var r=!1,n=0,o=0;n<a.Data.length;++n){i[n]=0;var s=a.Data[n],l=s.Date;for(o=0;o<t.length;++o){var h=t[o];if(l>=h.Start.Date&&l<=h.End.Date){i[n]=1,r=!0;break}}}if(r)return i}else if(tt.IsMinutePeriod(e.Period,!0)){for(var u=[],n=0;n<t.length;++n){var C=t[n],c=1e4*C.Start.Date;we.IsNumber(C.Start.Time)&&(c+=C.Start.Time);var f=1e4*C.End.Date;we.IsNumber(C.End.Time)&&(f+=C.End.Time),u.push({Start:c,End:f})}for(var r=!1,n=0,o=0;n<a.Data.length;++n){i[n]=0;var s=a.Data[n],l=1e4*s.Date+s.Time;for(o=0;o<u.length;++o){var h=u[o];if(l>=h.Start&&l<=h.End){i[n]=1,r=!0;break}}}if(r)return i}return null},this.FittingMinuteData=function(t,e){for(var a=t.outvar,i=t.date,r=t.time,n=[],o=0;o<a.length;++o){var s=a[o],l={Name:s.name,Type:s.type};if(we.IsBool(s.IsShowTitle)&&(l.IsShowTitle=s.IsShowTitle),s.data)l.Data=this.FittingMinuteArray(s.data,i,r,e),s.color&&(l.Color=s.color),s.linewidth>=1&&(l.LineWidth=s.linewidth),0==s.isshow&&(l.IsShow=!1),1==s.isexdata&&(l.IsExData=!0),s.BreakPoint&&(l.BreakPoint=s.BreakPoint),s.UpColor&&(l.UpColor=s.UpColor),s.DownColor&&(l.DownColor=s.DownColor),we.IsBool(s.isDotLine)&&(l.IsDotLine=s.isDotLine),we.IsNonEmptyArray(s.lineDash)&&(l.LineDash=s.lineDash),we.IsBool(s.isSingleLine)&&(l.IsSingleLine=s.isSingleLine),n.push(l);else if(s.Draw){var h=s.Draw,u={};if("DRAWICON"==h.DrawType)u.Icon=h.Icon,u.Name=h.Name,u.DrawType=h.DrawType,u.DrawData=this.FittingMinuteArray(h.DrawData,i,r,e),l.Draw=u,n.push(l);else if("DRAWTEXT"==h.DrawType)u.Text=h.Text,u.Name=h.Name,u.DrawType=h.DrawType,u.DrawData=this.FittingMinuteArray(h.DrawData,i,r,e),l.Draw=u,n.push(l);else if("STICKLINE"==h.DrawType)u.Name=h.Name,u.Type=h.Type,u.Width=h.Width,u.DrawType=h.DrawType,u.DrawData=this.FittingMinuteArray(h.DrawData,i,r,e,1),l.Draw=u,n.push(l);else if(h.DrawType==qo.OVERLAY_BARS)u.Name=h.Name,u.Type=h.Type,u.DrawType=h.DrawType,u.BarName=h.BarName,u.BarColor=h.BarColor,u.LineWidth=h.LineWidth,u.DrawData=this.FittingMinuteArray(h.DrawData,i,r,e,1),l.Draw=u,n.push(l);else if(h.DrawType==qo.CLIP_COLOR_STICK)u.Name=h.Name,u.Type=h.Type,u.DrawType=h.DrawType,u.DrawData=this.FittingMinuteArray(h.Data,i,r,e),l.Draw=u,h.Option&&(l.Option=h.Option),n.push(l);else if("MULTI_LINE"==h.DrawType){u.Text=h.Text,u.Name=h.Name,u.DrawType=h.DrawType,u.DrawData=this.FittingMultiLine(h.DrawData,i,r,e);for(var C in u.DrawData)this.GetKLineData(u.DrawData[C].Point,e);l.Draw=u,h.LineDash&&(u.LineDash=h.LineDash),h.Arrow&&(u.Arrow=h.Arrow),n.push(l)}else if("MULTI_POINT"==h.DrawType){if(u.Text=h.Text,u.Name=h.Name,u.DrawType=h.DrawType,u.DrawData=this.FittingMultiLine(h.DrawData,i,r,e),we.IsNonEmptyArray(u.DrawData))for(var C=0;C<u.DrawData.length;++C)this.GetKLineData(u.DrawData[C].Point,e);l.Draw=u,n.push(l)}else if("MULTI_TEXT"==h.DrawType)u.Text=h.Text,u.Name=h.Name,u.DrawType=h.DrawType,u.DrawData=this.FittingMultiText(h.DrawData,i,r,e),this.GetKLineData(u.DrawData,e),l.Draw=u,n.push(l);else if("MULTI_SVGICON"==h.DrawType)u.Text=h.Text,u.Name=h.Name,u.DrawType=h.DrawType,u.DrawData={Icon:h.DrawData.Icon,Family:h.DrawData.Family},l.Draw=u,n.push(l);else if("DRAWSVG"==h.DrawType)u.Text=h.Text,u.Name=h.Name,u.DrawType=h.DrawType,h.AutoPosition&&(u.AutoPosition=h.AutoPosition),u.DrawData={Data:this.FittingMultiText(h.Data,i,r,e),Family:h.Family,TextFont:h.TextFont,EnableTooltip:h.EnableTooltip,IsDrawFirst:h.IsDrawFirst},this.GetKLineData(u.DrawData.Data,e),l.Draw=u,n.push(l);else if("MULTI_HTMLDOM"==h.DrawType)u.Text=h.Text,u.Name=h.Name,u.DrawType=h.DrawType,u.Callback=h.Callback,u.DrawData=this.FittingMultiText(h.DrawData,i,r,e),this.GetKLineData(u.DrawData,e),l.Draw=u,n.push(l);else if("DRAWCOLORKLINE"==h.DrawType)u.Name=h.Name,u.Type=h.Type,u.DrawType=h.DrawType,u.DrawData=this.FittingArray(h.DrawData,i,r,e,1),l.Draw=u,h.Color&&(u.Color=h.Color),we.IsBool(h.IsEmptyBar)&&(u.IsEmptyBar=h.IsEmptyBar),n.push(l);else{var c=Zo.Get(h.DrawType);c&&c.MinuteFittingCallback&&c.MinuteFittingCallback(s,l,{Date:i,Time:r,HQChart:e},this)&&n.push(l)}}}return n},this.FittingMinuteArray=function(t,e,a,i,r){var n=i.SourceData,o=[];for(var s in t){var l=t[s],h=new Z;h.Date=e[s],a&&s<a.length&&(h.Time=a[s]),h.Value=l,o.push(h)}var u;u=5==r?n.GetMinuteFittingDataV2(o):n.GetMinuteFittingData(o);var C=new tt;return C.Data=u,C.GetValue()},this.FittingMultiPointLine=function(t,e){var a=e.Period,i=t.Data,r=[];if(tt.IsDayPeriod(a,!0)){var n=i[0],o=e.ChartPaint[0].Data,s=o.Data[0],l=0,h=0;if(n.Date>s.Date){var u=0;for(l=0;l<o.Data.length;++l){var C=o.Data[l];if(C.Date==n.Date)break;if(C.Date>n.Date){l=u;break}u=l}}else for(h=0;h<i.length;++h){var c=i[h];if(c.Date>=s.Date)break}for(var f=null,d=l,D=h;d<o.Data.length&&D<i.length;){var C=o.Data[d],c=i[D];c.Date<=C.Date?(r[d]||(r[d]=[]),r[d].push({Date:c.Date,Value:c.Value,Data:c.Data,KDate:C.Date,Type:1}),f=c,++D):(f&&!r[d]&&(r[d]={Date:f.Date,Value:f.Value,Type:0}),++d)}if(f)for(;d<o.Data.length;++d)r[d]||(r[d]={Date:f.Date,Value:f.Value,Type:0});return r}if(tt.IsMinutePeriod(a,!0)){var o=e.ChartPaint[0].Data;return r}}}function yr(t,e,a){this.newMethod=Sr,this.newMethod(t,null,e,null),delete this.newMethod,this.JsonData,a.JsonData&&(this.JsonData=a.JsonData),this.RequestData=function(t,e,a){if(!this.JsonData)return console.warn("[LocalJsonDataIndex::RequestData] JsonData is null"),void(param.HQChart.ScriptErrorCallback&&param.HQChart.ScriptErrorCallback("json æ°æ®ä¸è½ä¸ºç©º"));this.OutVar=this.FittingData(this.JsonData,a),this.BindData(t,e,a)},this.FittingData=function(t,e){outVar=t.OutVar,date=t.Date,time=t.Time,result=[];for(i in outVar)if(item=outVar[i],Xn.Complier.Log("[LocalJsonDataIndex::FittingData] item",item),0==item.Type||3==item.Type){var a=[];outVarItem={Name:item.Name,Type:item.Type};for(j in item.Data){var r=new Z;r.Date=date[j],time&&j<time.length&&(r.Time=time[j]),r.Value=item.Data[j],a.push(r)}if(e.Period<4)var n=e.GetFittingData(a);else var n=e.GetMinuteFittingData(a);var o=new tt;o.Data=n,outVarItem.Data=o.GetValue(),result.push(outVarItem)}else console.warn("[LocalJsonDataIndex::FittingData] can't support ",item.Name,item.Type);return result}}function Er(t){this.ID,this.Name,this.Script,this.Arguments=[],this.ClassName="ScriptIndexConsole",this.ErrorCallback,this.FinishCallback,this.IsSectionMode=!1,this.NetworkFilter,this.IsApiPeriod=!1,t&&(t.Name&&(this.Name=t.Name),t.Script&&(this.Script=t.Script),t.ID&&(this.ID=t.ID),t.Args&&(this.Arguments=t.Args),t.ErrorCallback&&(this.ErrorCallback=t.ErrorCallback),t.FinishCallback&&(this.FinishCallback=t.FinishCallback),t.IsSectionMode&&(this.IsSectionMode=t.IsSectionMode),t.NetworkFilter&&(this.NetworkFilter=t.NetworkFilter),we.IsBool(t.IsApiPeriod)&&(this.IsApiPeriod=t.IsApiPeriod)),this.ExecuteScript=function(t){this.OutVar=[];var e={Self:this},a={HQDataType:t.HQDataType,Symbol:t.Stock.Symbol,Name:t.Stock.Name,Period:t.Period,Right:t.Right,Callback:this.RecvResultData,CallbackParam:e,Async:!0,MaxRequestDataCount:t.Request.MaxDataCount,MaxRequestMinuteDayCount:t.Request.MaxMinuteDayCount,Arguments:this.Arguments,IsSectionMode:this.IsSectionMode,ClassName:"ScriptIndexConsole",NetworkFilter:this.NetworkFilter,IsApiPeriod:this.IsApiPeriod,Self:this};t.HQDataType===Jo.HISTORY_MINUTE_ID&&(a.TrateDate=t.Request.TradeDate),t.HQDataType==Jo.MULTIDAY_MINUTE_ID&&(a.DayCount=t.DayCount),t.Data&&(a.Data=t.Data);var i=this.Script;Tr.Execute(i,a,this.ErrorCallback)},this.RecvResultData=function(t,e){var a=e.Self,i=e.JSExecute,r=null;i.SymbolData.Data&&(r=i.SymbolData.Data.GetDate());var n={Out:t,Date:r,Stock:{Name:i.SymbolData.Name,Symbol:i.SymbolData.Symbol},Index:{Name:a.Name,ID:a.ID}};i.SymbolData.DataType==Jo.MULTIDAY_MINUTE_ID||i.SymbolData.DataType==Jo.MINUTE_ID?n.Time=i.SymbolData.Data.GetTime():i.SymbolData.DataType==Jo.KLINE_ID&&tt.IsMinutePeriod(i.SymbolData.Period,!0)&&(n.Time=i.SymbolData.Data.GetTime()),a.FinishCallback&&a.FinishCallback(n,e.JSExecute)}}function wr(t){this.Url=t.Url,this.RealtimeUrl=t.RealtimeUrl,this.Job=t.Job,this.Symbol=t.Symbol,this.Args=t.Args,this.DataKey=t.DataKey,this.RecvCallback=t.Callback,this.ErrorCallback=t.ErrorCallback,this.Download=function(){var t=this.Args[0];switch(t){case 1:case 7:case"EXCHANGE":this.DownloadHistoryData(t);break;case 3:this.GetSymbolType(t);break;case 9:case 18:case 30:case 32:case 33:case 34:case 38:case 40:case 41:case 42:case 43:case"CAPITAL":case"TOTALCAPITAL":case 100:default:this.DownloadRealtimeData(t)}},this.GetSymbolType=function(t){var e=1;wo.IsSHSZIndex(this.Symbol)&&(e=0);var a={Date:null,Value:e};this.RecvCallback(a,this.Job,this.DataKey)},this.DownloadRealtimeData=function(t){var e=this,a=this.GetFieldList();if(!a)return this.Job.FunctionName2?message=this.Job.FunctionName2+" can't support.":this.Job.FunctionName?message=this.Job.FunctionName+"("+this.Args[0]+") can't support.":message=this.Args[0]+" can't support.",this.ErrorCallback(message),void e.RecvCallback(null,e.Job,e.DataKey);n.HttpRequest({url:this.RealtimeUrl,data:{field:a,symbol:[this.Symbol],condition:[],start:0,end:10},type:"post",dataType:"json",async:!0,success:function(t){var a=e.RealtimeDataToHQChartData(t);e.RecvCallback(a,e.Job,e.DataKey)}})},this.DownloadHistoryData=function(t){var e=this,a=this.GetFieldList();if(!a)return message=this.Job.FunctionName+"("+this.Args[0]+") can't support.",this.ErrorCallback(message),void e.RecvCallback(null,e.Job,e.DataKey);n.HttpRequest({url:this.Url,data:{field:a,symbol:[this.Symbol],condition:[],start:0,end:200},type:"post",dataType:"json",async:!0,success:function(t){var a=e.ToHQChartData(t);a&&a.sort(function(t,e){return t.Date-e.Date}),e.RecvCallback(a,e.Job,e.DataKey)}})},this.GetFieldList=function(){switch(this.Args[0]){case 1:return["capital.total","capital.date"];case 7:case"EXCHANGE":return["capital.a","capital.date"];case 9:return["finance.peruprofit","symbol","date"];case 18:return["finance.percreserve","symbol","date"];case 30:return["finance.nprofit","symbol","date"];case 32:return["finance.peruprofit","symbol","date"];case 33:return["finance.persearning","symbol","date"];case 34:return["finance.pernetasset","symbol","date"];case 38:return["finance.persearning","symbol","date"];case 40:return["capital.a","capital.date","symbol","date","price"];case 41:return["capital.total","capital.date","symbol","date","price"];case"CAPITAL":return["capital.a","capital.date","symbol","date"];case"TOTALCAPITAL":return["capital.total","capital.date","symbol","date"];case 42:return["company.releasedate","symbol","date"];case 43:return["dividendyield","symbol","date"];case 100:return["shareholder","symbol","date"];default:return null}},this.RealtimeDataToHQChartData=function(t,e){if(!t.stock||1!=t.stock.length)return null;var a=t.stock[0],e=this.Args[0],i=a.date;switch(e){case 9:return a.finance?{Date:i,Value:a.finance.peruprofit}:null;case 18:return a.finance?{Date:i,Value:a.finance.percreserve}:null;case 30:return a.finance?{Date:i,Value:a.finance.nprofit}:null;case 32:return a.finance?{Date:i,Value:a.finance.peruprofit}:null;case 33:return a.finance?{Date:i,Value:a.finance.persearning}:null;case 34:return a.finance?{Date:i,Value:a.finance.pernetasset}:null;case 38:return a.finance?{Date:i,Value:a.finance.persearning}:null;case 40:return a.capital?{Date:i,Value:a.capital.a*a.price}:null;case 41:return a.capital?{Date:i,Value:a.capital.total*a.price}:null;case 42:if(!a.company)return null;var r=a.company.releasedate,n=parseInt(r/1e4),o=parseInt(r%1e4/100),s=r%100,l=new Date(n,o-1,s),h=new Date;return{Date:i,Value:parseInt((h.getTime()-l.getTime())/864e5)+1};case 43:return a.dividendyield?{Date:i,Value:a.dividendyield.quarter4}:null;case 100:return a.shareholder?{Date:i,Value:a.shareholder.count}:null;case"CAPITAL":return a.capital?{Date:i,Value:a.capital.a/100}:null;case"TOTALCAPITAL":return a.capital?{Date:i,Value:a.capital.total/100}:null}},this.ToHQChartData=function(t){if(!t.stock||1!=t.stock.length)return null;var e=[],a=new Rn.default,i=t.stock[0],r=this.Args[0];for(var n in i.stockday){var o=i.stockday[n],s=this.ToHQChartItemData(o,r);s&&!a.has(s.Date)&&(e.push(s),a.add(s.Date))}return e},this.ToHQChartItemData=function(t,e){if(!t)return null;var a=t.date;switch(e){case 1:return t.capital?{Date:a,Value:t.capital.total}:null;case 7:case"EXCHANGE":return t.capital?{Date:a,Value:t.capital.a}:null;default:return null}}}function Fr(t){this.Url=t.Url,this.RealtimeUrl=t.RealtimeUrl,this.Job=t.Job,this.Symbol=t.Symbol,this.Args=t.Args,this.DataKey=t.DataKey,this.RecvCallback=t.Callback,this.ErrorCallback=t.ErrorCallback,this.Download=function(){var t=this.Args[0];switch(t){case"HYBLOCK":case"DYBLOCK":case"GNBLOCK":this.DownloadGroupName(t)}},this.DownloadGroupName=function(t){var e=this,a=["name","symbol"];"HYBLOCK"==t?a.push("industry"):"DYBLOCK"==t?a.push("region"):"GNBLOCK"==t&&a.push("concept"),n.HttpRequest({url:e.RealtimeUrl,data:{field:a,symbol:[this.Symbol]},type:"post",dataType:"json",async:!0,success:function(t){var a=e.RecvGroupName(t);e.RecvCallback(a,e.Job,e.DataKey,1)},error:function(t){e.ErrorCallback(t)}})},this.RecvGroupName=function(t){if(!t.stock||1!=t.stock.length)return null;var e=t.stock[0],a=this.Args[0],i=null;if("HYBLOCK"==a){var r=e.industry;if(!r)return null;var i;for(var n in r){var o=r[n];i=o.name}}else if("DYBLOCK"==a){var s=e.region;if(!s)return null;for(var n in s){var o=s[n];i=o.name}}else if("GNBLOCK"==a){var l=e.concept;if(!l)return null;i="";for(var n in l){var o=l[n];i.length>0&&(i+=" "),i+=o.name}}return{Value:i}}}function Mr(){return{BGColor:"rgb(0,0,0)",TooltipBGColor:"rgb(255, 255, 255)",TooltipAlpha:.92,SelectRectBGColor:"rgba(1,130,212,0.06)",UpBarColor:"rgb(238,21,21)",DownBarColor:"rgb(25,158,0)",UnchagneBarColor:"rgb(228,228,228)",EmptyBarBGColor:"rgb(0,0,0)",SplashScreen:{BGColor:"rgba(112,128,144,0.5)",TextColor:"rgb(230,230,230)"},HLCArea:{HighLineColor:"rgb(238,21,21)",LowLineColor:"rgb(25,158,0)",CloseLineColor:"rgb(156,156,156)",LineWidth:2*C(),UpAreaColor:"rgba(238,21,21, 0.3)",DownAreaColor:"rgba(25,158,0, 0.3)"},Minute:{VolBarColor:null,PriceColor:"rgb(25,180,231)",AreaPriceColor:"rgba(63,158,255,.3)",AvPriceColor:"rgb(255,236,0)",PositionColor:"rgb(218,165,32)",VolTitleColor:"rgb(190,190,190)",Before:{BGColor:"rgba(105,105,105,0.5)",AvPriceColor:"rgb(248,248,255)",CloseIcon:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"}},After:{BGColor:"rgba(105,105,105,0.5)",AvPriceColor:"rgb(248,248,255)"},NightDay:{NightBGColor:"rgb(22,22,22)",Font:12*C()+"px å¾®è½¯éé»",Day:{Color:"rgb(153,153,153)",BGColor:"rgb(51,51,51)",BorderColor:"rgb(51,51,51)",Margin:{Left:5,Top:2,Bottom:2,Right:5}},Night:{Color:"rgb(153,153,153)",BGColor:"rgb(51,51,51)",BorderColor:"rgb(51,51,51)",Margin:{Left:5,Top:2,Bottom:2,Right:5}}}},PopMinuteChart:{BGColor:"rgba(0,0,0,0.95)",BorderColor:"rgb(230,230,230)"},DefaultTextColor:"rgb(101,104,112)",DefaultTextFont:14*C()+"px å¾®è½¯éé»",TitleFont:13*C()+"px å¾®è½¯éé»",IndexTitleColor:"rgb(190, 190 ,190)",IndexTitleBGColor:"rgb(0,0,0)",IndexTitleBorderColor:"rgb(211, 211, 211)",IndexTitleBorderMoveOnColor:"rgb(30,144,255)",UpTextColor:"rgb(238,21,21)",DownTextColor:"rgb(25,158,0)",UnchagneTextColor:"rgb(190, 190 ,190)",CloseLineColor:"rgb(250,250,250)",IndexTitle:{UpDownArrow:{UpColor:"rgb(238,21,21)",DownColor:"rgb(25,158,0)",UnchangeColor:"rgb(190, 190 ,190)"},NameArrow:{Color:"rgb(190, 190 ,190)",Space:2,Symbol:"â¼"}},Title:{TradeIndexColor:"rgb(105,105,105)",ColorIndexColor:"rgb(112,128,144)",VolColor:"rgb(190, 190 ,190)",AmountColor:"rgb(190, 190 ,190)",DateTimeColor:"rgb(190, 190 ,190)",SettingColor:"rgb(190, 190 ,190)",NameColor:"rgb(190, 190 ,190)",TurnoverRateColor:"rgb(101,104,112)",PositionColor:"rgb(101,104,112)"},FrameBorderPen:"rgb(47,51,62)",MultiDayBorderPen:"rgba(236,236,236,0.5)",FrameSplitPen:"rgba(236,236,236,0.13)",FrameSplitTextColor:"rgb(220,220,220)",FrameSplitTextFont:12*C()+"px å¾®è½¯éé»",FrameTitleBGColor:"rgb(0,0,0)",OverlayIndexTitleBGColor:"rgba(0,0,0,0.7)",Frame:{XBottomOffset:2*C(),PercentageText:{PriceColor:"rgb(101,104,112)",PercentageColor:"rgb(101,104,112)",SplitColor:"rgb(101,104,112)",Font:14*C()+"px å¾®è½¯éé»"}},OverlayFrame:{BolderPen:"rgb(130,130,130)",TitleColor:"rgb(181,181,181)",TitleFont:11*C()+"px arial"},FrameLatestPrice:{TextColor:"rgb(255,255,255)",UpBarColor:"rgb(238,21,21)",DownBarColor:"rgb(25,158,0)",UnchagneBarColor:"rgb(190,190,190)",BGAlpha:.6,EmptyBGColor:"rgb(0,0,0)"},CorssCursorBGColor:"rgb(43,54,69)",CorssCursorTextColor:"rgb(255,255,255)",CorssCursorTextFont:12*C()+"px å¾®è½¯éé»",CorssCursorHPenColor:"rgb(130,130,130)",CorssCursorVPenColor:"rgb(130,130,130)",CorssCursor:{RightButton:{BGColor:"rgb(43,54,69)",PenColor:"rgb(255,255,255)",Icon:{Text:"î£",Color:"rgb(255,255,255)",Family:"iconfont",Size:18}}},OrderFlow:{UpColor:{BG:"rgb(223,191,180)",Border:"rgb(196,84,86)"},DownColor:{BG:"rgb(176,212,184)",Border:"rgb(66,94,74)"},UnchagneColor:{BG:"rgb(216,221,177)",Border:"rgb(209,172,129)"},Text:{Color:"rgb(248,248,255)",Family:"Arial",FontMaxSize:16,MaxValue:"8888"},Line:{UpDownColor:"rgb(220,220,220)",MiddleColor:"rgb(211,211,211)"}},KLine:{MaxMin:{Font:12*C()+"px å¾®è½¯éé»",Color:"rgb(255,250,240)",RightArrow:"â",LeftArrow:"â",HighYOffset:0,LowYOffset:0},Info:{Investor:{ApiUrl:"/API/NewsInteract",IconFont:{Family:"iconfont",Text:"î±",HScreenText:"î",Color:"#1c65db"}},Announcement:{ApiUrl:"/API/ReportList",IconFont:{Family:"iconfont",Text:"î³",HScreenText:"î",Color:"#f5a521"},IconFont2:{Family:"iconfont",Text:"î´",HScreenText:"î",Color:"#ed7520"}},Pforecast:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"î®",HScreenText:"î",Color:"#986cad"}},Research:{ApiUrl:"/API/InvestorRelationsList",IconFont:{Family:"iconfont",Text:"î²",HScreenText:"î",Color:"#19b1b7"}},BlockTrading:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"î°",HScreenText:"î",Color:"#f39f7c"}},TradeDetail:{ApiUrl:"/API/StockHistoryDay",IconFont:{Family:"iconfont",Text:"î¯",HScreenText:"î",Color:"#b22626"}}},NumIcon:{Color:"rgb(251,80,80)",Family:"iconfont",Text:["î","î»","î","î½","î¿","î","î","î","î","î","î¶","îµ","î·","î¸","î¹","îº","î¼","î¾","î","î","î"]},TradeIcon:{Family:"iconfont",Buy:{Color:"rgb(255,15,4)",Text:"î",HScreenText:"î"},Sell:{Color:"rgb(64,122,22)",Text:"î",HScreenText:"î"}}},VirtualKLine:{Color:"rgb(119,136,153)",LineDash:[2,2]},PriceGapStyple:{Line:{Color:"rgb(128,128,128)"},Text:{Color:"rgb(219,220,220)",Font:12*C()+"px å¾®è½¯éé»"}},Index:{LineColor:["rgb(255,189,09)","rgb(22,198,255)","rgb(174,35,161)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"],NotSupport:{Font:14*C()+"px å¾®è½¯éé»",TextColor:"rgb(250,250,250)"}},ColorArray:["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"],Buttons:{CloseOverlayIndex:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},CloseWindow:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},ChangeIndex:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},OverlayIndex:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},ModifyIndexParam:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},MaxMinWindow:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},TitleWindow:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},ExportData:{MoveOnColor:"rgb(255,255,255)",Color:"rgb(156,156,156)"},Tooltip:{Color:"rgb(204,204,204)",ColorBG:"rgb(32,32,32)",ColorBorder:"rgb(69,69,69)"}},DrawPicture:{LineColor:["rgb(41,98,255)"],PointColor:["rgb(41,98,255)","rgb(89,135,255)","rgb(0,0,0)"]},TooltipPaint:{BGColor:"rgba(20,20,20,0.8)",BorderColor:"rgb(210,210,210)",TitleColor:"rgb(210,210,210)",TitleFont:13*C()+"px å¾®è½¯éé»",DateTimeColor:"rgb(210,210,210)",VolColor:"rgb(255, 185, 15)",AmountColor:"rgb(210,210,210)",PositionColor:"rgb(255,215,0)"},PCTooltipPaint:{BGColor:"rgba(20,20,20,0.8)",BorderColor:"rgb(210,210,210)",TitleColor:"rgb(210,210,210)",TitleFont:12*C()+"px å¾®è½¯éé»",DateTimeColor:"rgb(210,210,210)",VolColor:"rgb(161,154,3)",AmountColor:"rgb(161,154,3)"},DialogTooltip:{BGColor:"rgb(20,20,20)",BorderColor:"rgb(170,170,170)",TitleColor:"rgb(250,250,250)",VolColor:"rgb(255, 185, 15)",AmountColor:"rgb(210,210,210)",DateTimeColor:"rgb(210,210,210)",TurnoverRateColor:"rgb(43,54,69)",PositionColor:"rgb(255,0,255)",TextColor:"rgb(210,210,210)",ValueColor:"rgb(210,210,210)",TitleBGColor:"rgb(200, 66, 69)"},FloatTooltip:{BGColor:"rgb(20,20,20)",BorderColor:"rgb(170,170,170)",VolColor:"rgb(255, 185, 15)",AmountColor:"rgb(210,210,210)",DateTimeColor:"rgb(210,210,210)",TurnoverRateColor:"rgb(43,54,69)",PositionColor:"rgb(255,0,255)",TextColor:"rgb(210,210,210)",ValueColor:"rgb(210,210,210)"},DialogSelectRect:{BGColor:"rgb(20,20,20)",BorderColor:"rgb(170,170,170)",TitleColor:"rgb(210,210,210)",VolColor:"rgb(255, 185, 15)",AmountColor:"rgb(210,210,210)",TextColor:"rgb(210,210,210)",ValueColor:"rgb(210,210,210)",TurnoverRateColor:"rgb(43,54,69)",PositionColor:"rgb(255,0,255)"},DialogSearchIndex:{BGColor:"rgb(20,20,20)",BorderColor:"rgb(170,170,170)",TitleColor:"rgb(230,230,230)",IndexNameColor:"rgb(210,210,210)",GroupNameColor:"rgb(210,210,210)",InputTextColor:"rgb(210,210,210)"},DialogPopKeyboard:{BGColor:"rgb(20,20,20)",BorderColor:"rgb(170,170,170)",TitleColor:"rgb(240,240,240)",Input:{BGColor:"rgb(20,20,20)",TextColor:"rgb(250,250,250)"}},MinuteInfo:{TextColor:"rgb(84,143,255)",Font:14*C()+"px å¾®è½¯éé»",PointColor:"rgb(38,113,254)",LineColor:"rgb(120,167,255)",TextBGColor:"rgba(255,255,255,1)"},DepthMapPaint:{LineColor:"rgba(255,185,15)",AreaColor:"rgba(255,185,15,0.8)",TextColor:"rgba(255,255,255)",TextBGColor:"rgb(43,54,69)"},KLineYAxisBGPaint:{Font:12*C()+"px å¾®è½¯éé»",TextColor:"rgb(255,255,255)",LineColor:"rgb(255,255,255)"},StockChip:{InfoColor:"rgb(255,255,255)",DayInfoColor:"rgb(0,0,0)"},DepthChart:{BidColor:{Line:"rgb(82,176,123)",Area:"rgba(82,176,123,0.5)"},AskColor:{Line:"rgb(207,76,89)",Area:"rgba(207,76,89, 0.5)"},LineWidth:4},DepthCorss:{BidColor:{Line:"rgb(82,176,123)"},AskColor:{Line:"rgb(207,76,89)"},LineWidth:2,LineDash:[3,3],Tooltip:{BGColor:"rgba(54,54,54, 0.8)",TextColor:"rgb(203,215,224)",Border:{Top:5,Left:20,Bottom:5,Center:5},Font:14*C()+"px å¾®è½¯éé»",LineHeight:16}},ChartDrawVolProfile:{BGColor:"rgba(244,250,254,0.3)",BorderColor:"rgba(255,255,255)",VolLineColor:"rgb(232,5,9)",UpVolColor:"rgba(103,179,238, 0.24)",DownVolColor:"rgba(237,208,105,0.24)",AreaUpColor:"rgb(103,179,238,0.7)",AreaDonwColor:"rgba(237,208,105,0.7)",Text:{Color:"rgb(0,0,0)",Family:"Arial",FontMaxSize:18,FontMinSize:6}},RectSelect:{LineColor:"rgb(115,83,64)",LineWidth:1*C(),LineDotted:[3,3],AreaColor:"rgba(26,13,7,0.5)"},RectDrag:{LineColor:"rgb(220,220,220)",LineWidth:1*C(),BGColor:"rgba(220,220,220,0.2)"},SelectedChart:{LineWidth:1,LineColor:"rgb(55,100,100)",Radius:4,MinSpace:200,BGColor:"rgb(255,255,255)"},DragMovePaint:{TextColor:"rgb(255,255,255)"},SessionBreaksPaint:{BGColor:[null,"rgb(42,46,57)"],SplitLine:{Color:"rgb(73,133,231)",Width:1*C(),Dash:[5*C(),5*C()]}},DealList:{BorderColor:"rgb(38,38,41)",Header:{Color:"RGB(245,245,245)",Mergin:{Left:5,Right:5,Top:4,Bottom:2},Font:{Size:12,Name:"å¾®è½¯éé»"}},Row:{Mergin:{Top:2,Bottom:2},Font:{Size:15,Name:"å¾®è½¯éé»"},BarMergin:{Top:2,Left:3,Right:3,Bottom:2}},FieldColor:{Vol:"rgb(192,192,0)",Time:"rgb(245,245,245)",Deal:"rgb(111,128,112)",Index:"rgb(245,245,245)",BarTitle:"rgb(245,245,245)",Text:"rgb(245,245,245)"},UpTextColor:"rgb(238,21,21)",DownTextColor:"rgb(25,158,0)",UnchagneTextColor:"rgb(228,228,228)"},Report:{BorderColor:"rgb(38,38,41)",SelectedColor:"rgb(49,48,56)",Header:{Color:"RGB(245,245,245)",SortColor:"rgb(255,0,0)",Font:{Size:12,Name:"å¾®è½¯éé»"}},Item:{Mergin:{Top:2,Bottom:4,Left:5,Right:5},Font:{Size:15,Name:"å¾®è½¯éé»"},BarMergin:{Top:2,Left:3,Right:3,Bottom:2},NameFont:{Size:14,Name:"å¾®è½¯éé»"},SymbolFont:{Size:12,Name:"å¾®è½¯éé»"}},FixedItem:{Font:{Size:15,Name:"å¾®è½¯éé»"}},LimitBorder:{Color:"rgb(64,64,64)",Mergin:{Top:1,Bottom:1,Left:0,Right:0}},FieldColor:{Index:"rgb(245,245,245)",Symbol:"rgb(255,255,255)",Name:"rgb(255,255,255)",Amount:"rgb(2,226,244)",Vol:"rgb(192,192,0)",BarTitle:"rgb(245,245,245)",Text:"rgb(245,245,245)"},NameSymbolV2:{Name:{Size:14,Name:"å¾®è½¯éé»",Color:"rgb(250,250,250)"},Symbol:{Size:12,Name:"å¾®è½¯éé»",Color:"rgb(190, 190, 190)"}},CloseLine:{CloseColor:"rgb(30,144,255)",YCloseColor:"rgba(220,220,220,0.5)",AreaColor:"rgba(220,220,220,0.2)"},KLine:{UpColor:"rgb(255,0,0)",DownColor:"rgb(0,128,0)",UnchagneColor:"rgb(240,240,240)",DataWidth:16,DistanceWidth:3},UpTextColor:"rgb(238,21,21)",DownTextColor:"rgb(25,158,0)",UnchagneTextColor:"rgb(228,228,228)",Tab:{Font:{Size:12,Name:"å¾®è½¯éé»"},ScrollBarWidth:100,ButtonColor:"rgb(13,12,15)",BarColor:"rgb(48,48,48)",BorderColor:"rgb(48,48,48)",TabTitleColor:"rgb(153,153,153)",TabSelectedTitleColor:"rgb(255,255,255)",TabSelectedBGColor:"rgb(234,85,4)",TabMoveOnTitleColor:"rgb(255,255,255)",TabBGColor:"rgb(28,28,31)"},PageInfo:{Font:{Size:15,Name:"å¾®è½¯éé»"},TextColor:"rgb(255,255,255)",BGColor:"rgba(49,48,56,0.8)",Mergin:{Left:5,Right:5,Top:4,Bottom:2}},DragRow:{Color:"rgba(255,250, 250,0.8)",TextColor:"rgba(0,0, 0, 0.8)",MoveRowColor:"rgb(135,206,250)",SrcRowColor:"rgb(49,48,56)"},VScrollbar:{BarWidth:40,ScrollBarHeight:60,ButtonColor:"rgba(13,12,15,0.8)",BarColor:"rgba(48,48,48,0.9)",BorderColor:"rgba(48,48,48,0.9)",BGColor:"rgba(211,211,211,0.5)"},CheckBox:{Family:"iconfont",Size:15,Checked:{Color:"rgb(69,147,238)",Symbol:"î³",DisableColor:"rgb(120,120,120)",MouseOnColor:"rgb(69,147,238)"},Unchecked:{Color:"rgb(210,210,210)",Symbol:"î´",DisableColor:"rgb(120,120,120)",MouseOnColor:"rgb(69,147,238)"}},Link:{Font:12*C()+"px å¾®è½¯éé»",TextColor:"rgb(0,144,255)",Disable:{TextColor:"rgb(211,211,211)"},MouseOn:{TextColor:"rgb(0,144,255)"}},ProgressBar:{BGColor:"rgb(20,24,28)",BarColor:"rgb(47,124,197)",Margin:{Left:2,Right:2,Bottom:2,Top:2},BarMargin:{Left:2,Right:2,Bottom:2,Top:2},TextColor:"rgb(230,230,230)",Font:12*C()+"px å¾®è½¯éé»",TextMargin:{Left:40,Right:2,Bottom:2,Top:2},Disable:{BGColor:"rgb(61,61,61)",BarColor:"rgb(131,131,131)",TextColor:"rgb(159,161,159)"}}},TReport:{BorderColor:"rgb(38,38,41)",SelectedColor:"rgb(180,180,180)",Header:{Color:"rgb(187,187,187)",SortColor:"rgb(255,0,0)",Mergin:{Left:5,Right:5,Top:4,Bottom:2},Font:{Size:14,Name:"å¾®è½¯éé»"}},Item:{Mergin:{Top:2,Bottom:0,Left:5,Right:5},Font:{Size:15,Name:"å¾®è½¯éé»"},BarMergin:{Top:2,Left:3,Right:3,Bottom:2},NameFont:{Size:14,Name:"å¾®è½¯éé»"},SymbolFont:{Size:12,Name:"å¾®è½¯éé»"}},CenterItem:{TextColor:"rgb(16,226,217)",BaseTextColor:"rgb(60,60,83)",BGColor:"rgb(65,65,65)"},FieldColor:{Index:"rgb(250,250,250)",Symbol:"rgb(60,60,60)",Name:"rgb(250,250,250)",Vol:"rgb(192,165,3)",Position:"rgb(250,250,250)",Amount:"rgb(16,226,217)",Text:"rgb(250,250,250)"},UpTextColor:"rgb(238,21,21)",DownTextColor:"rgb(25,158,0)",UnchangeTextColor:"rgb(187,187,187)",UpBGColor:"rgb(35,5,5)",DownBGColor:"rgb(5,35,5)",MarkBorder:{MaxPositionColor:"rgb(192,192,0)"}},Keyboard:{BorderColor:"rgb(38,38,41)",SelectedColor:"rgb(49,48,56)",TextColor:"rgb(245,245,245)",Item:{Mergin:{Top:2,Bottom:0,Left:1,Right:1},Font:{Size:15,Name:"å¾®è½¯éé»"},BarMergin:{Top:2,Left:0,Right:0,Bottom:2},NameFont:{Size:14,Name:"å¾®è½¯éé»"},SymbolFont:{Size:12,Name:"å¾®è½¯éé»"}},VScrollbar:{ScrollBarHeight:50,ButtonColor:"rgba(13,12,15,0.8)",BarColor:"rgba(48,48,48,0.9)",BorderColor:"rgba(48,48,48,0.9)",BGColor:"rgba(211,211,211,0.5)",BarWidth:{Size:8}}},ScrollBar:{BorderColor:"rgb(38,38,41)",XSplitTextColor:"rgb(240,240,240)",XSplitLineColor:"rgb(38,38,41)",Slider:{DateFont:14*C()+"px å¾®è½¯éé»",DateColor:"rgb(240,240,240)",BarColor:"rgb(105,105,105)",BarAreaColor:"rgba(128,128,128,0.65)"},BGChart:{Color:"rgb(105,113,125)",LineWidth:1,AreaColor:"rgba(24,28,42,0.5)"}},FrameButtomToolbar:{BGColor:"rgb(25,25,25)",BorderColor:"rgb(60,60,60)",Button:{Font:{Family:"å¾®è½¯éé»"},TitleColor:{Selected:"rgb(255,255,255)",Default:"rgb(140,140,140)",MoveOn:"rgb(255,255,255)"},BGColor:{Selected:"rgb(234,85,4)",Default:"rgb(25,25,25)",MoveOn:"rgb(59,59,59)"},BorderColor:"rgb(60,60,60)"}}}}function Lr(){}function Nr(t){this.DivElement=t,this.JSChartContainer,this.CanvasElement=document.createElement("canvas"),this.CanvasElement.className="jsdeallist-drawing",this.CanvasElement.id=D(),this.CanvasElement.setAttribute("tabindex",0),this.CanvasElement.style&&(this.CanvasElement.style.outline="none"),t.hasChildNodes()&&Xn.Chart.Log("[JSDealChart::JSDealList] divElement hasChildNodes",t.childNodes),t.appendChild(this.CanvasElement),this.OnSize=function(){var t=parseInt(this.DivElement.style.height.replace("px",""));this.CanvasElement.height=t,this.CanvasElement.width=parseInt(this.DivElement.style.width.replace("px","")),this.CanvasElement.style.width=this.CanvasElement.width+"px",this.CanvasElement.style.height=this.CanvasElement.height+"px";var e=C();this.CanvasElement.height*=e,this.CanvasElement.width*=e,Xn.Chart.Log("[JSDealChart::OnSize] devicePixelRatio="+window.devicePixelRatio+", height="+this.CanvasElement.height+", width="+this.CanvasElement.width),this.JSChartContainer&&this.JSChartContainer.OnSize&&this.JSChartContainer.OnSize()},this.SetOption=function(t){var e=this.CreateJSDealChartContainer(t);if(!e)return!1;t.OnCreatedCallback&&t.OnCreatedCallback(e),this.JSChartContainer=e,this.DivElement.JSChart=this,t.Symbol?e.ChangeSymbol(t.Symbol):e.Draw()},this.CreateJSDealChartContainer=function(t){var e=new Rr(this.CanvasElement);if(e.Create(t),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter),we.IsNonEmptyArray(t.Column)&&e.SetColumn(t.Column),we.IsNumber(t.ShowOrder)&&(e.ChartPaint[0].ShowOrder=t.ShowOrder),this.SetChartBorder(e,t),null!=t.IsAutoUpdate&&(e.IsAutoUpdate=t.IsAutoUpdate),t.AutoUpdateFrequency>0&&(e.AutoUpdateFrequency=t.AutoUpdateFrequency),we.IsBool(t.EnableFilter)&&(e.EnableFilter=t.EnableFilter),t.EventCallback)for(var a=0;a<t.EventCallback.length;++a){var i=t.EventCallback[a];e.AddEventCallback(i)}return e},this.SetChartBorder=function(t,e){if(e.Border){e.Border;we.IsNumber(e.Border.Left)&&(t.Frame.ChartBorder.Left=e.Border.Left),we.IsNumber(e.Border.Right)&&(t.Frame.ChartBorder.Right=e.Border.Right),we.IsNumber(e.Border.Top)&&(t.Frame.ChartBorder.Top=e.Border.Top),we.IsNumber(e.Border.Bottom)&&(t.Frame.ChartBorder.Bottom=e.Border.Bottom);var a=C();t.Frame.ChartBorder.Left*=a,t.Frame.ChartBorder.Right*=a,t.Frame.ChartBorder.Top*=a,t.Frame.ChartBorder.Bottom*=a}},this.ChangeSymbol=function(t,e){this.JSChartContainer&&this.JSChartContainer.ChangeSymbol(t,e)},this.SetColumn=function(t,e){this.JSChartContainer&&this.JSChartContainer.SetColumn(t,e)},this.EnableFilter=function(t,e){this.JSChartContainer&&this.JSChartContainer.EnableFilter(t,e)},this.AddEventCallback=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddEventCallback&&(Xn.Chart.Log("[JSDealChart:AddEventCallback] obj=",t),this.JSChartContainer.AddEventCallback(t))},this.ReloadResource=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ReloadResource&&(Xn.Chart.Log("[JSDealChart:ReloadResource] "),this.JSChartContainer.ReloadResource(t))}}function Rr(t){this.ClassName="JSDealChartContainer",this.Frame,this.ChartPaint=[],this.ChartSplashPaint=null,this.LoadDataSplashTitle="æ°æ®å è½½ä¸­",this.Canvas=t.getContext("2d"),this.ShowCanvas=null,this.Symbol,this.Name,this.TradeDate,this.NetworkFilter,this.Data={DataOffset:0,Data:[]},this.SourceData={DataOffset:0,Data:[]},this.IsShowLastPage=!0,this.mapEvent=new Vn.default,this.AutoUpdateTimer=null,this.AutoUpdateFrequency=15e3,this.LoadDataSplashTitle="æ°æ®å è½½ä¸­",this.UIElement=t,this.LastPoint=new E,this.IsDestroy=!1,this.ChartDestory=function(){this.IsDestroy=!0,this.StopAutoUpdate()},this.EnableFilterData=!1,this.FilterData=function(t){if(!this.EnableFilterData)return t;var e=this.GetEventCallback(Kn.ON_FILTER_DEAL_DATA);if(!e||!e.Callback)return t;var a={Data:t,Result:[]};return e.Callback(e,a,this),a.Result},this.EnableFilter=function(t,e){this.EnableFilterData=t,this.Data.Data=this.FilterData(this.SourceData.Data),this.Data.DataOffset=0,e&&(1==e.GotoLastPage&&this.GotoLastPage(),1==e.Redraw&&this.Draw())},this.CloneArray=function(t){var e=[];if(!we.IsNonEmptyArray(t))return e;for(var a=0;a<t.length;++a)e.push(t[a]);return e},this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new _e,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.Frame=new Ar,this.Frame.ChartBorder=new M,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartSplashPaint.Frame=this.Frame;var a=new Or;a.Frame=this.Frame,a.ChartBorder=this.Frame.ChartBorder,a.Canvas=this.Canvas,a.GetEventCallback=function(t){return e.GetEventCallback(t)},this.ChartPaint[0]=a,t&&(we.IsBool(t.IsSingleTable)&&(a.IsSingleTable=t.IsSingleTable),we.IsBool(t.IsShowHeader)&&(a.IsShowHeader=t.IsShowHeader),we.IsBool(t.IsShowLastPage)&&(this.IsShowLastPage=t.IsShowLastPage),we.IsNumber(t.BorderLine)&&(this.Frame.BorderLine=t.BorderLine));var i=!0,r=!0;t&&(!1===t.KeyDown&&(i=!1,Xn.Chart.Log("[JSDealChartContainer::Create] not register keydown event.")),!1===t.Wheel&&(r=!1,Xn.Chart.Log("[JSDealChartContainer::Create] not register wheel event."))),i&&this.UIElement.addEventListener("keydown",function(t){e.OnKeyDown(t)},!0),r&&this.UIElement.addEventListener("wheel",function(t){e.OnWheel(t)},!0)},this.Draw=function(){if(!(this.UIElement.width<=0||this.UIElement.height<=0)){this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height);var t=C();if(this.Canvas.lineWidth=t,this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash)return this.Frame.Draw({IsEnableSplash:this.ChartSplashPaint.IsEnableSplash}),void this.ChartSplashPaint.Draw();this.Frame.Draw(),this.Frame.DrawLogo();for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.IsDrawFirst&&a.Draw()}for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.IsDrawFirst||a.Draw()}}},this.ChangeSymbol=function(t,e){this.Symbol=t,this.Data=null,this.SourceData=null;var a=this.ChartPaint[0];if(a&&(a.Data=null),e&&we.IsNumber(e.TradeDate)&&(this.TradeDate=e.TradeDate),!this.Symbol)return void this.Draw();this.RequestDealData()},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=null)},this.AutoUpdateEvent=function(t,e){var a=t?Kn.RECV_START_AUTOUPDATE:Kn.RECV_STOP_AUTOUPDATE;if(this.mapEvent.has(a)){var i=this,r=this.mapEvent.get(a),n={Stock:{Symbol:this.Symbol,Name:this.Name,DayCount:this.DayCount},Explain:e};t&&(n.Callback=function(t){i.RecvDealUpdateData(t)}),r.Callback(r,n,this)}},this.RequestDealData=function(){this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.EnableSplash(!0),this.Draw();var t=this;if(this.NetworkFilter){var e={Name:"JSDealChartContainer::RequestDealData",Explain:"æäº¤æç»",Request:{Data:{symbol:t.Symbol,tradeDate:t.TradeDate}},Self:this,PreventDefault:!1};if(this.NetworkFilter(e,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvDealData(e),t.AutoUpdateEvent(!0,"JSDealChartContainer::RequestDealData"),t.AutoUpdate()}),1==e.PreventDefault)return}var a=So.CacheDomain+"/cache/dealday/today/"+this.Symbol+".json";n.HttpRequest({url:a,type:"get",dataType:"json",async:!0,success:function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvDealData(e),t.AutoUpdate(1)},error:function(e,a){t.ChartSplashPaint.EnableSplash(!1),t.AutoUpdate()}})},this.RecvDealData=function(t){var e=Rr.JsonDataToDealData(t);this.SourceData={DataOffset:0,Data:e},this.Data={DataOffset:0,Data:this.FilterData(this.CloneArray(e))},this.Symbol=t.symbol,this.Name=t.name;var a=this.ChartPaint[0];if(a.Data=this.Data,a.Symbol=this.Symbol,a.YClose=t.yclose,a.Open=t.open,this.IsShowLastPage){var i=a.GetPageSize(!0),r=e.length-i;r<0&&(r=0),this.Data.DataOffset=r}this.Draw()},this.RequestDealUpdateData=function(){var t=this;if(this.NetworkFilter){var e={Name:"JSDealChartContainer::RequestDealUpdateData",Explain:"å¢éæäº¤æç»",Request:{Data:{symbol:t.Symbol}},Self:this,PreventDefault:!1};if(this.Data&&we.IsNonEmptyArray(this.Data.Data)){var a=this.Data.Data[this.Data.Data.length-1];e.LastItem=a}if(this.NetworkFilter(e,function(e){t.RecvDealUpdateData(e),t.AutoUpdate()}),1==e.PreventDefault)return}},this.RecvDealUpdateData=function(t){var e=Rr.JsonDataToDealData(t);we.IsNonEmptyArray(e)&&(1===t.UpdateType?(this.SourceData.Data=e,this.Data.Data=this.FilterData(this.CloneArray(e)),this.Data.DataOffset>=this.Data.Data.length&&(this.Data.DataOffset=0)):(this.AddDealData(this.SourceData,e),this.AddDealData(this.Data,this.FilterData(e))),this.Draw())},this.AddDealData=function(t,e){if(t.Data){var a=0,i=this.ChartPaint[0];i&&(a=i.GetPageSize());for(var r=0;r<e.length;++r)t.Data.push(e[r]),t.DataOffset+a<t.Data.length&&++t.DataOffset}else t.Data=e},this.AutoUpdate=function(t){if(this.CancelAutoUpdate(),this.IsAutoUpdate&&this.Symbol){var e=this,a=wo.GetMarketStatus(this.Symbol);if(0!=a&&3!=a){var i=this.AutoUpdateFrequency;1==a?this.AutoUpdateTimer=setTimeout(function(){e.AutoUpdate()},i):2==a&&(this.AutoUpdateTimer=setTimeout(function(){e.RequestDealUpdateData()},i))}}},this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"JSDealChartContainer::StopAutoUpdate"),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},this.AddEventCallback=function(t){if(t&&t.event&&t.callback){var e={Callback:t.callback,Source:t};this.mapEvent.set(t.event,e)}},this.RemoveEventCallback=function(t){this.mapEvent.has(t)&&this.mapEvent.delete(t)},this.GetEventCallback=function(t){return this.mapEvent.has(t)?this.mapEvent.get(t):null},this.OnSize=function(){if(this.Frame){this.SetSizeChange(!0);var t=this.ChartPaint[0];if(t&&this.Data&&this.Data.DataOffset>0&&we.IsNonEmptyArray(this.Data.Data)){t.GetPageSize(!0)+this.Data.DataOffset>=this.Data.Data.length&&this.GotoLastPage()}this.Draw()}},this.SetSizeChange=function(t){var e=this.ChartPaint[0];e&&(e.SizeChange=t)},this.OnWheel=function(t){if(Xn.Chart.Log("[JSDealChartContainer::OnWheel]",t),(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash)&&this.Data&&we.IsNonEmptyArray(this.Data.Data)){var e=t.clientX-this.UIElement.getBoundingClientRect().left,a=t.clientY-this.UIElement.getBoundingClientRect().top;if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),this.Canvas.isPointInPath(e,a)){if(this.ChartPaint[0]){var i=t.wheelDelta;we.IsObjectExist(t.wheelDelta)||(i=-.01*t.deltaY),i<0?this.GotoNextPage()&&this.Draw():i>0&&this.GotoPreviousPage()&&this.Draw(),t.preventDefault?t.preventDefault():t.returnValue=!1}}}},this.OnKeyDown=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){switch(t.keyCode?t.keyCode:t.which){case 38:this.GotoPreviousPage()&&this.Draw();break;case 40:this.GotoNextPage()&&this.Draw()}t.preventDefault?t.preventDefault():t.returnValue=!1}},this.GotoNextPage=function(){if(!this.Data||!we.IsNonEmptyArray(this.Data.Data))return!1;var t=this.ChartPaint[0];if(!t)return!1;var e=t.GetPageSize();if(e>this.Data.Data.length)return!1;var a=this.Data.DataOffset+e;return a+e!=this.Data.Data.length-1&&(a+e>this.Data.Data.length?this.Data.DataOffset=this.Data.Data.length-e:this.Data.DataOffset=a,!0)},this.GotoPreviousPage=function(){if(!this.Data||!we.IsNonEmptyArray(this.Data.Data))return!1;var t=this.ChartPaint[0];if(!t)return!1;if(this.Data.DataOffset<=0)return!1;var e=t.GetPageSize(),a=this.Data.DataOffset;return a-=e,a<0&&(a=0),this.Data.DataOffset=a,!0},this.GotoLastPage=function(){var t=this.ChartPaint[0];if(t){var e=t.GetPageSize(!0),a=this.Data.Data.length-e;a<0&&(a=0),this.Data.DataOffset=a}},this.SetColumn=function(t,e){var a=this.ChartPaint[0];a&&(a.SetColumn(t),a.SizeChange=!0,e&&e.Redraw&&this.Draw())},this.ReloadResource=function(t){this.Frame.ReloadResource(t);for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.ReloadResource&&a.ReloadResource(t)}t&&t.Redraw&&(this.SetSizeChange(!0),this.Draw())}}function Ar(){this.ChartBorder,this.Canvas,this.BorderColor=So.DealList.BorderColor,this.LogoTextColor=So.FrameLogo.TextColor,this.LogoTextFont=So.FrameLogo.Font,this.ReloadResource=function(t){this.BorderColor=So.DealList.BorderColor,this.LogoTextColor=So.FrameLogo.TextColor,this.LogoTextFont=So.FrameLogo.Font},this.Draw=function(t){var e=p(this.ChartBorder.GetLeft()),a=p(this.ChartBorder.GetTop()),i=p(this.ChartBorder.GetRight()),r=p(this.ChartBorder.GetBottom()),n=i-e,o=r-a;we.IsNumber(this.BorderLine)?(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),(1&this.BorderLine)>0&&(this.Canvas.moveTo(e,a),this.Canvas.lineTo(i,a)),(2&this.BorderLine)>0&&(this.Canvas.moveTo(e,r),this.Canvas.lineTo(i,r)),(4&this.BorderLine)>0&&(this.Canvas.moveTo(e,a),this.Canvas.lineTo(e,r)),(8&this.BorderLine)>0&&(this.Canvas.moveTo(i,a),this.Canvas.lineTo(i,r)),this.Canvas.stroke()):(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(e,a,n,o))},this.DrawLogo=function(){var t=So.FrameLogo.Text;if(we.IsString(t)){this.Canvas.fillStyle=this.LogoTextColor,this.Canvas.font=this.LogoTextFont,this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom";var e=this.ChartBorder.GetLeft()+5,a=this.ChartBorder.GetBottom()-5;this.Canvas.fillText(t,e,a)}}}function Or(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ChartDealList",this.IsDrawFirst=!1,this.GetEventCallback,this.Data,this.Symbol,this.YClose,this.Open,this.Decimal=2,this.IsSingleTable=!1,this.IsShowHeader=!0,this.ShowOrder=1,this.SizeChange=!0,this.UpColor=So.DealList.UpTextColor,this.DownColor=So.DealList.DownTextColor,this.UnchagneColor=So.DealList.UnchagneTextColor,this.BorderColor=So.DealList.BorderColor,this.HeaderFontConfig={Size:So.DealList.Header.Font.Size,Name:So.DealList.Header.Font.Name},this.HeaderColor=So.DealList.Header.Color,this.HeaderMergin={Left:So.DealList.Header.Mergin.Left,Right:So.DealList.Header.Mergin.Right,Top:So.DealList.Header.Mergin.Top,Bottom:So.DealList.Header.Mergin.Bottom},this.ItemFontConfig={Size:So.DealList.Row.Font.Size,Name:So.DealList.Row.Font.Name},this.RowMergin={Top:So.DealList.Row.Mergin.Top,Bottom:So.DealList.Row.Mergin.Bottom},this.BarMergin={Top:So.DealList.Row.BarMergin.Top,Left:So.DealList.Row.BarMergin.Left,Right:So.DealList.Row.BarMergin.Right,Bottom:So.DealList.Row.BarMergin.Bottom},this.HeaderFont=12*C()+"px å¾®è½¯éé»",this.ItemFont=15*C()+"px å¾®è½¯éé»",this.RowCount=0,this.TableWidth=0,this.TableCount=0,this.HeaderHeight=0,this.Column=[{Type:Qo.TIME_ID,Title:"æ¶é´",TextAlign:"center",Width:null,TextColor:So.DealList.FieldColor.Time,MaxText:"88:88:88",Foramt:"HH:MM:SS"},{Type:Qo.PRICE_ID,Title:"ä»·æ ¼",TextAlign:"center",Width:null,MaxText:"888888.88"},{Type:Qo.VOL_ID,Title:"æäº¤",TextAlign:"right",Width:null,TextColor:So.DealList.FieldColor.Vol,MaxText:"888888"},{Type:Qo.BS_ID,Title:"",TextAlign:"right",Width:null,MaxText:"æ"}],this.RectClient={},this.ReloadResource=function(t){this.UpColor=So.DealList.UpTextColor,this.DownColor=So.DealList.DownTextColor,this.UnchagneColor=So.DealList.UnchagneTextColor,this.BorderColor=So.DealList.BorderColor,this.HeaderFontConfig={Size:So.DealList.Header.Font.Size,Name:So.DealList.Header.Font.Name},this.HeaderColor=So.DealList.Header.Color,this.HeaderMergin={Left:So.DealList.Header.Mergin.Left,Right:So.DealList.Header.Mergin.Right,Top:So.DealList.Header.Mergin.Top,Bottom:So.DealList.Header.Mergin.Bottom},this.ItemFontConfig={Size:So.DealList.Row.Font.Size,Name:So.DealList.Row.Font.Name},this.RowMergin={Top:So.DealList.Row.Mergin.Top,Bottom:So.DealList.Row.Mergin.Bottom};for(var e=0;e<this.Column.length;++e){var a=this.Column[e];a.Type==Qo.TIME_ID||a.Type==Qo.STRING_TIME_ID?a.TextColor=So.DealList.FieldColor.Time:a.Type==Qo.VOL_ID?a.TextColor=So.DealList.FieldColor.Vol:a.Type==Qo.DEAL_ID?a.TextColor=So.DealList.FieldColor.Deal:a.Type==Qo.INDEX_ID&&(a.TextColor=So.DealList.FieldColor.Index)}},this.SetColumn=function(t){if(we.IsNonEmptyArray(t)){this.Column=[];for(var e=0;e<t.length;++e){var a=t[e],i=this.GetDefaultColunm(a.Type);if(i){if(a.Title&&(i.Title=a.Title),a.TextAlign&&(i.TextAlign=a.TextAlign),a.TextColor&&(i.TextColor=a.TextColor),a.MaxText&&(i.MaxText=a.MaxText),a.Type==Qo.MULTI_BAR_ID||a.Type==Qo.CENTER_BAR_ID){if(!we.IsNumber(a.DataIndex))continue;i.DataIndex=a.DataIndex}else a.Type==Qo.TIME_ID&&we.IsString(a.Foramt)&&(i.Foramt=a.Foramt);this.Column.push(i)}}}},this.GetDefaultColunm=function(t){for(var e=[{Type:Qo.TIME_ID,Title:"æ¶é´",TextAlign:"center",Width:null,TextColor:So.DealList.FieldColor.Time,MaxText:"88:88:88",Foramt:"HH:MM:SS"},{Type:Qo.PRICE_ID,Title:"ä»·æ ¼",TextAlign:"center",Width:null,MaxText:"888888.88"},{Type:Qo.VOL_ID,Title:"æäº¤",TextAlign:"right",Width:null,TextColor:So.DealList.FieldColor.Vol,MaxText:"888888"},{Type:Qo.BS_ID,Title:"",TextAlign:"right",Width:null,MaxText:"æ"},{Type:Qo.DEAL_ID,Title:"ç¬æ°",TextAlign:"right",Width:null,TextColor:So.DealList.FieldColor.Deal,MaxText:"8888"},{Type:Qo.UPDOWN_ID,Title:"æ¶¨è·",TextAlign:"right",Width:null,MaxText:"-8888.88"},{Type:Qo.STRING_TIME_ID,Title:"æ¶é´",TextAlign:"center",Width:null,TextColor:So.DealList.FieldColor.Time,MaxText:"88:88:88"},{Type:Qo.INDEX_ID,Title:"åºå·",TextAlign:"center",Width:null,TextColor:So.DealList.FieldColor.Index,MaxText:"88888"},{Type:Qo.MULTI_BAR_ID,Title:"æ±å­",TextAlign:"center",Width:null,TextColor:So.DealList.FieldColor.BarTitle,MaxText:"888888"},{Type:Qo.CENTER_BAR_ID,Title:"æ±å­2",TextAlign:"center",Width:null,TextColor:So.DealList.FieldColor.BarTitle,MaxText:"888888"},{Type:Qo.CUSTOM_TEXT_ID,Title:"èªå®ä¹",TextAlign:"center",Width:null,TextColor:So.DealList.FieldColor.Text,MaxText:"æææææ"}],a=0;a<e.length;++a){var i=e[a];if(i.Type==t)return i}return null},this.Draw=function(){this.SizeChange?this.CalculateSize():this.UpdateCacheData(),this.DrawBorder(),this.DrawHeader(),this.DrawBody(),this.SizeChange=!1},this.UpdateCacheData=function(){this.RectClient.Left=this.ChartBorder.GetLeft(),this.RectClient.Right=this.ChartBorder.GetRight(),this.RectClient.Top=this.ChartBorder.GetTop(),this.RectClient.Bottom=this.ChartBorder.GetBottom(),this.Decimal=sr(this.Symbol)},this.GetPageSize=function(t){return t&&this.CalculateSize(),this.TableCount*this.RowCount},this.CalculateSize=function(){this.UpdateCacheData();var t=C();this.HeaderFont=this.HeaderFontConfig.Size*t+"px "+this.HeaderFontConfig.Name,this.ItemFont=this.ItemFontConfig.Size*t+"px "+this.ItemFontConfig.Name,this.Canvas.font=this.ItemFont;for(var e=0,a=0,i=0;i<this.Column.length;++i){var r=this.Column[i];a=this.Canvas.measureText(r.MaxText).width,r.Width=a+4,e+=r.Width}var n=this.RectClient.Right-this.RectClient.Left;this.TableCount=parseInt(n/e),this.IsSingleTable&&(this.TableCount=1),this.TableWidth=n/this.TableCount,this.HeaderHeight=this.GetFontHeight(this.HeaderFont,"æ")+this.HeaderMergin.Top+this.HeaderMergin.Bottom,this.IsShowHeader||(this.HeaderHeight=0),this.RowHeight=this.GetFontHeight(this.ItemFont,"æ")+this.HeaderMergin.Top+this.HeaderMergin.Bottom,this.RowCount=parseInt((this.RectClient.Bottom-this.RectClient.Top-this.HeaderHeight)/this.RowHeight)},this.DrawHeader=function(){if(this.IsShowHeader){var t=this.RectClient.Left+this.HeaderMergin.Left,e=this.RectClient.Top,a=e+this.HeaderMergin.Top+(this.HeaderHeight-this.HeaderMergin.Top-this.HeaderMergin.Bottom)/2;this.Canvas.font=this.HeaderFont,this.Canvas.fillStyle=this.HeaderColor;for(var i=0,r=0;i<this.TableCount;++i){var n=t+this.TableWidth*i,o=n;for(r=0;r<this.Column.length;++r){var s=this.Column[r],l=s.Width;r==this.Column.length-1&&(l=this.TableWidth-(o-n)-this.HeaderMergin.Right-this.HeaderMergin.Left);var h=o;"center"==s.TextAlign?(h=o+l/2,this.Canvas.textAlign="center"):"right"==s.TextAlign?(h=o+l,this.Canvas.textAlign="right"):this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(s.Title,h,a),o+=s.Width}}}},this.DrawBorder=function(){var t=p(this.RectClient.Left),e=p(this.RectClient.Right),a=p(this.RectClient.Top),i=p(this.RectClient.Bottom);this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),this.IsShowHeader&&(this.Canvas.moveTo(t,a+this.HeaderHeight),this.Canvas.lineTo(e,a+this.HeaderHeight));for(var r=p(t+this.TableWidth),n=1;n<this.TableCount;++n)this.Canvas.moveTo(r,a),this.Canvas.lineTo(r,i),r=p(r+this.TableWidth);this.Canvas.stroke()},this.DrawBody=function(){if(this.Data&&we.IsNonEmptyArray(this.Data.Data)){this.Canvas.font=this.ItemFont;var t=this.RectClient.Top+this.HeaderHeight,e=this.RectClient.Left+this.HeaderMergin.Left,a=this.Data.Data.length,i=this.Data.DataOffset;if(1==this.ShowOrder){var i=this.Data.DataOffset+this.TableCount*this.RowCount;i>=a&&(i=a-1);for(var r=0,n=0;r<this.TableCount;++r){var o=e+this.TableWidth*r,s=o,l=t;for(n=0;n<this.RowCount&&i>=0;++n,--i){var h=this.Data.Data[i];this.DrawRow(h,s,l,i),l+=this.RowHeight}}}else for(var r=0,n=0;r<this.TableCount;++r){var o=e+this.TableWidth*r,s=o,l=t;for(n=0;n<this.RowCount&&i<a;++n,++i){var h=this.Data.Data[i];this.DrawRow(h,s,l,i),l+=this.RowHeight}}}},this.DrawRow=function(t,e,a,i,r){for(var n=e,o=e+this.TableWidth,s=0;s<this.Column.length;++s){var l=this.Column[s],h=l.TextColor,u=null,C=l.Width,c=l.TextAlign;if(e+C>o)break;if(s==this.Column.length-1&&(C=this.TableWidth-(e-n)-this.HeaderMergin.Right-this.HeaderMergin.Left),l.Type==Qo.TIME_ID)u=we.FormatTimeString(t.Time,l.Foramt);else if(l.Type==Qo.STRING_TIME_ID)u=t.StrTime;else if(l.Type==Qo.PRICE_ID)h=t.Price>this.YClose?this.UpColor:t.Price<this.YClose?this.DownColor:this.UnchagneColor,u=t.Price.toFixed(this.Decimal);else if(l.Type==Qo.VOL_ID)u=we.FormatValueString(t.Vol,0),h=this.GetVolColor(l,t);else if(l.Type==Qo.DEAL_ID)u=we.FormatValueString(t.Deal,0);else if(l.Type==Qo.BS_ID)1==t.BS?(u="B",h=this.UpColor):2==t.BS&&(u="S",h=this.DownColor);else if(l.Type==Qo.UPDOWN_ID){if(we.IsNumber(this.YClose)){var f=t.Price-this.YClose;u=f.toFixed(2),h=f>0?this.UpColor:f<0?this.DownColor:this.UnchagneColor}}else if(l.Type==Qo.INDEX_ID)u=(i+1).toString();else if(l.Type==Qo.MULTI_BAR_ID){var d={Left:e,Top:a,Width:C,Height:this.RowHeight};this.DrawMultiBar(l,t,d)}else if(l.Type==Qo.CENTER_BAR_ID){var d={Left:e,Top:a,Width:C,Height:this.RowHeight};this.DrawCenterBar(l,t,d)}else if(l.Type==Qo.CUSTOM_TEXT_ID){var D={Text:null,TextColor:null,TextAlign:null},d={Left:e,Top:a,Width:C,Height:this.RowHeight};this.DrawCustomText(l,t,d,i,s,D)&&(D.Text&&(u=D.Text),D.TextColor&&(h=D.TextColor),D.TextAlign&&(c=D.TextAlign))}this.DrawItemText(u,h,c,e,a,C),e+=l.Width}},this.DrawItemText=function(t,e,a,i,r,n){var o=i;"center"==a?(o=i+n/2,this.Canvas.textAlign="center"):"right"==a?(o=i+n,this.Canvas.textAlign="right"):this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillStyle=e,t&&this.Canvas.fillText(t,o,r+this.RowHeight/2)},this.DrawMultiBar=function(t,e,a){if(!e.Source||!we.IsNonEmptyArray(e.Source))return!1;var i=e.Source[t.DataIndex];if(!i)return!1;if(!we.IsNonEmptyArray(i.Value))return!1;for(var r=a.Width-this.BarMergin.Left-this.BarMergin.Right,n=a.Left+this.BarMergin.Left,o=a.Top+this.RowMergin.Top+this.BarMergin.Top,s=a.Height-this.RowMergin.Top-this.RowMergin.Bottom-this.BarMergin.Top-this.BarMergin.Bottom,l=n+r,h=0;h<i.Value.length;++h){var u=i.Value[h];if(!(u<=0)){if(n>=l)break;var C=r*u;C<1&&(C=1),n+C>l&&(C=l-n);var c=h;we.IsNonEmptyArray(i.Color)&&h<i.Color.length&&(c=i.Color[h]),this.Canvas.fillStyle=So.DealList.FieldColor.Bar[c],this.Canvas.fillRect(n,o,C,s),n+=C}}return!0},this.DrawCenterBar=function(t,e,a){if(!e.Source||!we.IsNonEmptyArray(e.Source))return!1;var i=e.Source[t.DataIndex];if(!i)return!1;if(!we.IsNonEmptyArray(i.Value))return!1;for(var r=(a.Width-this.BarMergin.Left-this.BarMergin.Right)/2,n=a.Left+this.BarMergin.Left,o=n+r,s=a.Top+this.RowMergin.Top+this.BarMergin.Top,l=a.Height-this.RowMergin.Top-this.RowMergin.Bottom-this.BarMergin.Top-this.BarMergin.Bottom,h=0;h<i.Value.length&&h<2;++h){var u=i.Value[h];if(!(u<=0)){u>1&&(u=1);var C=r*u;C<1&&(C=1);var c=h;we.IsNonEmptyArray(i.Color)&&h<i.Color.length&&(c=i.Color[h]),this.Canvas.fillStyle=So.DealList.FieldColor.Bar[c],0==h?this.Canvas.fillRect(o,s,-C,l):this.Canvas.fillRect(o,s,C,l)}}},this.DrawCustomText=function(t,e,a,i,r,n){var o=this.GetEventCallback(Kn.ON_DRAW_DEAL_TEXT);if(!o||!o.Callback)return!1;var s={Data:e,DataIndex:i,ColumnIndex:r,ColumnInfo:t,Out:{Text:null,TextColor:null,TextAlign:null}};return o.Callback(o,s,this),!!s.Out.Text&&(n.Text=s.Out.Text,s.Out.TextColor&&(n.TextColor=s.Out.TextColor),s.Out.TextAlign&&(n.TextAlign=s.Out.TextAlign),!0)},this.GetVolColor=function(t,e){var a=this.GetEventCallback(Kn.ON_DRAW_DEAL_VOL_COLOR);if(a&&a.Callback){var i={Data:e,TextColor:null};if(a.Callback(a,i,this),i.TextColor)return i.TextColor}return t.TextColor},this.GetFontHeight=function(t,e){return c(this.Canvas,t,e)}}function Pr(t){this.DivElement=t,this.JSChartContainer,this.ResizeListener,this.CanvasElement=document.createElement("canvas"),this.CanvasElement.className="jsreportlist-drawing",this.CanvasElement.id=D(),this.CanvasElement.setAttribute("tabindex",0),this.CanvasElement.style&&(this.CanvasElement.style.outline="none"),t.hasChildNodes()&&Xn.Chart.Log("[JSReportChart::JSReportChart] divElement hasChildNodes",t.childNodes),t.appendChild(this.CanvasElement),this.MapExtraCanvasElement=new Vn.default,this.CreateExtraCanvasElement=function(e,a){if(this.MapExtraCanvasElement.has(e))return this.MapExtraCanvasElement.get(e);var i=document.createElement("canvas");i.className="jsreportlist-drawing-extra",i.id=D(),e==Pr.CorssCursorCanvasKey?i.setAttribute("tabindex",5):i.setAttribute("tabindex",1),i.style&&(i.style.outline="none",i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style["pointer-events"]="none"),a&&(we.IsNumber(a.TabIndex)&&i.setAttribute("tabindex",a.TabIndex),we.IsNumber(a.ZIndex)&&(i.style["z-index"]=a.ZIndex)),this.CanvasElement&&(i.height=this.CanvasElement.height,i.width=this.CanvasElement.width,i.style&&(i.style.width=this.CanvasElement.style.width,i.style.height=this.CanvasElement.style.height)),t.appendChild(i);var r={Element:i,Canvas:null};this.MapExtraCanvasElement.set(e,r)},this.GetExtraCanvas=function(t){if(!this.MapExtraCanvasElement.has(t))return null;var e=this.MapExtraCanvasElement.get(t);return e.Element?(e.Canvas||(e.Canvas=e.Element.getContext("2d")),e):null},this.OnSize=function(){var t=this.DivElement.offsetHeight,e=this.DivElement.offsetWidth;this.DivElement.style.height&&this.DivElement.style.width&&(this.DivElement.style.height.includes("px")&&(t=parseInt(this.DivElement.style.height.replace("px",""))),this.DivElement.style.width.includes("px")&&(e=parseInt(this.DivElement.style.width.replace("px","")))),this.CanvasElement.height=t,this.CanvasElement.width=e,this.CanvasElement.style.width=this.CanvasElement.width+"px",this.CanvasElement.style.height=this.CanvasElement.height+"px";var a=C();this.CanvasElement.height*=a,this.CanvasElement.width*=a;var i=!0,r=!1,n=void 0;try{for(var o,s=(0,Gn.default)(this.MapExtraCanvasElement);!(i=(o=s.next()).done);i=!0){var l=o.value,h=l[1],u=h.Element;u&&(u.height=this.CanvasElement.height,u.width=this.CanvasElement.width,u.style.width=this.CanvasElement.style.width,u.style.height=this.CanvasElement.style.height)}}catch(t){r=!0,n=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw n}}Xn.Chart.Log("[JSReportChart::OnSize] devicePixelRatio="+window.devicePixelRatio+", height="+this.CanvasElement.height+", width="+this.CanvasElement.width),this.JSChartContainer&&this.JSChartContainer.OnSize&&this.JSChartContainer.OnSize()},this.SetOption=function(t){var e=this.CreateJSReportChartContainer(t);if(!e)return!1;if(t.OnCreatedCallback&&t.OnCreatedCallback(e),this.JSChartContainer=e,this.DivElement.JSChart=this,t.EventCallback)for(var a=0;a<t.EventCallback.length;++a){var i=t.EventCallback[a];e.AddEventCallback(i)}1==t.EnableResize&&this.CreateResizeListener(),!0===t.EnablePopMenuV2&&e.InitalPopMenu(),t.EnableTooltip&&this.CreateExtraCanvasElement(Pr.TooltipCursorCanvasKey,{ZIndex:99}),t.Symbol&&(e.Symbol=t.Symbol),t.Name&&(e.Name=t.Name);var r={Callback:null};e.Symbol&&(r.Callback=function(){e.RequestMemberListData()}),!1===t.LoadStockList?(e.ChartSplashPaint.IsEnableSplash=!1,e.Draw()):e.RequestStockListData(r)},this.CreateJSReportChartContainer=function(t){var e=this,a=new _r(this.CanvasElement);if(a.GetExtraCanvas=function(t){return e.GetExtraCanvas(t)},a.Create(t),t.NetworkFilter&&(a.NetworkFilter=t.NetworkFilter),we.IsNonEmptyArray(t.Column)&&a.SetColumn(t.Column),we.IsNonEmptyArray(t.Tab)&&a.SetTab(t.Tab),we.IsNumber(t.TabSelected)&&a.SetSelectedTab(t.TabSelected),we.IsBool(t.EnableDragRow)&&(a.EnableDragRow=t.EnableDragRow),we.IsNumber(t.DragRowType)&&(a.DragRowType=t.DragRowType),we.IsBool(t.EnableDragHeader)&&(a.EnableDragHeader=t.EnableDragHeader),we.IsNumber(t.WheelPageType)&&(a.WheelPageType=t.WheelPageType),we.IsBool(t.PageUpDownCycle)&&(a.PageUpDownCycle=t.PageUpDownCycle),t.VScrollbar&&a.SetVScrollbar(t.VScrollbar),t.SortInfo){var i=t.SortInfo;we.IsNumber(i.Field)&&(a.SortInfo.Field=i.Field),we.IsNumber(i.Sort)&&(a.SortInfo.Sort=i.Sort)}if(t.VirtualTable){var i=t.VirtualTable;we.IsBool(i.Enable)&&(a.Data.Virtual.Enable=i.Enable)}var r=a.GetReportChart();if(r&&(we.IsNumber(t.TextOverflowStyle)&&(r.TextOverflowStyle=t.TextOverflowStyle),we.IsNumber(t.MultiSelectModel)&&(r.MultiSelectModel=t.MultiSelectModel)),this.SetChartBorder(a,t),null!=t.IsAutoUpdate&&(a.IsAutoUpdate=t.IsAutoUpdate),t.AutoUpdateFrequency>0&&(a.AutoUpdateFrequency=t.AutoUpdateFrequency),we.IsBool(t.EnableFilter)&&(a.EnableFilter=t.EnableFilter),t.EventCallback)for(var n=0;n<t.EventCallback.length;++n){var i=t.EventCallback[n];a.AddEventCallback(i)}return a},this.SetChartBorder=function(t,e){if(e.Border){e.Border;we.IsNumber(e.Border.Left)&&(t.Frame.ChartBorder.Left=e.Border.Left),we.IsNumber(e.Border.Right)&&(t.Frame.ChartBorder.Right=e.Border.Right),we.IsNumber(e.Border.Top)&&(t.Frame.ChartBorder.Top=e.Border.Top),we.IsNumber(e.Border.Bottom)&&(t.Frame.ChartBorder.Bottom=e.Border.Bottom);var a=C();t.Frame.ChartBorder.Left*=a,t.Frame.ChartBorder.Right*=a,t.Frame.ChartBorder.Top*=a,t.Frame.ChartBorder.Bottom*=a}},this.CreateResizeListener=function(){var t=this;this.ResizeListener=new ResizeObserver(function(e){t.OnDivResize(e)}),this.ResizeListener.observe(this.DivElement)},this.OnDivResize=function(t){Xn.Chart.Log("[JSReportChart::OnDivResize] entries=",t),this.OnSize()},this.ChangeSymbol=function(t,e){this.JSChartContainer&&this.JSChartContainer.ChangeSymbol(t,e)},this.SetColumn=function(t,e){this.JSChartContainer&&this.JSChartContainer.SetColumn(t,e)},this.SetSelectedRow=function(t){this.JSChartContainer&&this.JSChartContainer.SetSelectedRow(t)},this.EnableFilter=function(t,e){this.JSChartContainer&&this.JSChartContainer.EnableFilter(t,e)},this.AddEventCallback=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddEventCallback&&(Xn.Chart.Log("[JSReportChart:AddEventCallback] obj=",t),this.JSChartContainer.AddEventCallback(t))},this.ReloadResource=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ReloadResource&&(Xn.Chart.Log("[JSReportChart:ReloadResource] "),this.JSChartContainer.ReloadResource(t))},this.ChartDestory=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChartDestory&&this.JSChartContainer.ChartDestory()},this.Draw=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Draw&&(Xn.Chart.Log("[JSReportChart:Draw] "),this.JSChartContainer.Draw())}}function Br(){this.OriginalSymbol,this.Symbol,this.Name,this.YClose,this.Open,this.Price,this.High,this.Low,this.Amount,this.Vol,this.Increase,this.UpDown,this.Exchange,this.Amplitude,this.BuyPrice,this.BuyVol,this.SellPrice,this.SellVol,this.AvPrice,this.LimitHigh,this.LimitLow,this.VolIn,this.VolOut,this.DealNum,this.OutShares,this.TotalShares,this.MarketValue,this.CircMarketValue,this.CloseLine,this.ExtendData,this.Time,this.Date}function _r(t){this.ClassName="JSReportChartContainer",this.Frame,this.ChartPaint=[],this.ChartSplashPaint=null,this.LoadDataSplashTitle="æ°æ®å è½½ä¸­",this.SplashTitle={StockList:"ä¸è½½ç è¡¨ä¸­.....",MemberList:"ä¸è½½æåä¸­....."},this.Canvas=t.getContext("2d"),this.TooltipCanvas,this.ChartTooltip,this.Tooltip=document.createElement("div"),this.Tooltip.className="jsreport-tooltip",this.Tooltip.style.background=So.TooltipBGColor,this.Tooltip.style.opacity=So.TooltipAlpha,this.Tooltip.style["pointer-events"]="none",this.Tooltip.id=D(),t.parentNode.appendChild(this.Tooltip),this.Symbol,this.Name,this.NetworkFilter,this.Data={XOffset:0,YOffset:0,Data:[],Virtual:{Enable:!1,Count:0}},this.SourceData={Data:[]},this.BlockData=new Vn.default,this.MapStockData=new Vn.default,this.FixedRowData={Data:[],Type:0,Symbol:[]},this.FlashBG=new Vn.default,this.FlashBGTimer=null,this.GlobalOption={FlashBGCount:0},this.SortInfo={Field:-1,Sort:0},this.DragRow,this.DragColumnWidth,this.EnableDragRow=!1,this.DragRowType=0,this.AutoDragScrollTimer=null,this.EnablePageScroll=!1,this.DragMove,this.DragHeader,this.EnableDragHeader=!1,this.mapEvent=new Vn.default,this.AutoUpdateTimer=null,this.AutoUpdateFrequency=15e3,this.DelayUpdateTimer=null,this.DelayUpdateFrequency=500,this.UIElement=t,this.LastPoint=new E,this.IsOnTouch=!1,this.TouchDrag,this.TouchMoveMinAngle=70,this.YStepPixel=5*C(),this.XStepPixel=10*C(),this.PageUpDownCycle=!0,this.DragPageCycle=!0,this.WheelPageType=0,this.DragXScroll=null,this.DragYScroll=null,this.IsShowVScrollbar=!1,this.IsDestroy=!1,this.JSPopMenu,this.IsShowRightMenu=!0,this.LastMouseStatus={MoveStatus:null,TooltipStatus:null,MouseOnStatus:null},this.ChartDestory=function(){this.IsDestroy=!0,this.StopAutoUpdate()},this.StopAutoDragScrollTimer=function(){Xn.Chart.Log("[JSReportChartContainer::StopAutoDragScrollTimer] stop "),this.EnablePageScroll=!1,null!=this.AutoDragScrollTimer&&(clearTimeout(this.AutoDragScrollTimer),this.AutoDragScrollTimer=null)},this.InitalPopMenu=function(){this.JSPopMenu||(this.JSPopMenu=new on,this.JSPopMenu.Inital())},this.AutoScrollPage=function(t){var e=this;this.AutoDragScrollTimer=setTimeout(function(){e.ChartOperator_Temp_ScrollPage(t)},300)},this.ChartOperator_Temp_ScrollPage=function(t){if(this.EnablePageScroll){var e=this.GetReportChart();if(e){if(t>0){if(e.GetCurrentPageStatus().IsEnd)return;this.MoveYOffset(t,!1),++t}else{if(!(t<0))return;if(this.Data.YOffset<=0)return;this.MoveYOffset(t,!1),--t}this.Draw(),this.EnablePageScroll&&this.AutoScrollPage(t)}}},this.ClearCanvas=function(t){t&&this.UIElement&&t.clearRect(0,0,this.UIElement.width,this.UIElement.height)},this.ClearFixedRowData=function(){this.FixedRowData.Data=[],this.FixedRowData.Symbol=[]},this.SetFixedRowCount=function(t){var e=this.GetReportChart();e&&(e.FixedRowCount=t)},this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new _e,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.IsEnableSplash=!0,this.Frame=new Gr,this.Frame.ChartBorder=new M,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartSplashPaint.Frame=this.Frame;var a=new kr;a.Frame=this.Frame,a.ChartBorder=this.Frame.ChartBorder,a.Canvas=this.Canvas,a.UIElement=this.UIElement,a.GetEventCallback=function(t){return e.GetEventCallback(t)},a.GetStockDataCallback=function(t){return e.GetStockData(t)},a.GetBlockDataCallback=function(t){return e.GetBlockData(t)},a.GetFlashBGDataCallback=function(t,a){return e.GetFlashBGData(t,a)},a.Data=this.Data,a.GlobalOption=this.GlobalOption,a.FixedRowData=this.FixedRowData,a.SortInfo=this.SortInfo,a.Tab=new Vr,a.Tab.Frame=this.Frame,a.Tab.Canvas=this.Canvas,a.Tab.ChartBorder=this.Frame.ChartBorder,a.Tab.Report=a,a.VScrollbar=new Yr,a.VScrollbar.Frame=this.Frame,a.VScrollbar.Canvas=this.Canvas,a.VScrollbar.ChartBorder=this.Frame.ChartBorder,a.VScrollbar.Report=a,a.VScrollbar.IsShowCallback=function(){return!!e.DragYScroll||e.IsShowVScrollbar},this.ChartPaint[0]=a;var i=new Xr;if(i.Frame=this.Frame,i.ChartBorder=this.Frame.ChartBorder,this.ChartTooltip=i,t&&!0===t.PageInfo){var r=new Hr;r.Frame=this.Frame,r.ChartBorder=this.Frame.ChartBorder,r.Canvas=this.Canvas,r.Report=a,this.ChartPaint[1]=r}if(t&&(we.IsBool(t.IsShowHeader)&&(a.IsShowHeader=t.IsShowHeader),we.IsNumber(t.FixedColumn)&&(a.FixedColumn=t.FixedColumn),we.IsNumber(t.BorderLine)&&(this.Frame.BorderLine=t.BorderLine),we.IsBool(t.TabShow)&&(a.Tab.IsShow=t.TabShow),we.IsNumber(t.FixedRowCount)&&(a.FixedRowCount=t.FixedRowCount),we.IsBool(t.ItemBorder)&&(a.IsDrawBorder=t.ItemBorder),we.IsNumber(t.SelectedModel)&&(a.SelectedModel=t.SelectedModel),we.IsNonEmptyArray(t.FixedSymbol))){a.FixedRowCount=0,this.FixedRowData.Type=1,this.FixedRowData.Symbol=[];for(var n=t.FixedSymbol,o=0;o<n.length;++o){var s=n[o];this.FixedRowData.Symbol.push(s.Symbol),++a.FixedRowCount}}var l=!0,h=!0;t&&(!1===t.KeyDown&&(l=!1,Xn.Chart.Log("[JSDealChartContainer::Create] not register keydown event.")),!1===t.Wheel&&(h=!1,Xn.Chart.Log("[JSDealChartContainer::Create] not register wheel event."))),l&&this.UIElement.addEventListener("keydown",function(t){e.OnKeyDown(t)},!0),h&&this.UIElement.addEventListener("wheel",function(t){e.OnWheel(t)},!0),this.UIElement.ondblclick=function(t){e.UIOnDblClick(t)},this.UIElement.onmousedown=function(t){e.UIOnMouseDown(t)},this.UIElement.onmouseup=function(t){e.UIOnMounseUp(t)},this.UIElement.oncontextmenu=function(t){e.UIOnContextMenu(t)},this.UIElement.onmousemove=function(t){e.UIOnMouseMove(t)},this.UIElement.onmouseout=function(t){e.UIOnMounseOut(t)},this.UIElement.onmouseleave=function(t){e.UIOnMouseleave(t)},this.UIElement.ontouchstart=function(t){e.OnTouchStart(t)},this.UIElement.ontouchmove=function(t){e.OnTouchMove(t)},this.UIElement.ontouchend=function(t){e.OnTouchEnd(t)}},this.Draw=function(){if(!(this.UIElement.width<=0||this.UIElement.height<=0)){this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height);var t=C();if(this.Canvas.lineWidth=t,this.LastMouseStatus.MouseOnStatus=null,this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash)return this.Frame.Draw({IsEnableSplash:this.ChartSplashPaint.IsEnableSplash}),void this.ChartSplashPaint.Draw();this.Frame.Draw(),this.Frame.DrawLogo();for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.IsDrawFirst&&a.Draw(this.LastMouseStatus)}for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.IsDrawFirst||a.Draw(this.LastMouseStatus)}this.GlobalOption.FlashBGCount>0&&this.DelayDraw(500),this.DrawTooltip(this.LastMouseStatus.TooltipStatus)}},this.DelayDraw=function(t){var e=this;"number"==typeof this.FlashBGTimer&&(clearTimeout(this.FlashBGTimer),this.FlashBGTimer=null),this.FlashBGTimer=setTimeout(function(){e.Draw()},t)},this.ResetReportStatus=function(){this.Data.XOffset=0,this.Data.YOffset=0},this.ResetReportSelectStatus=function(){var t=this.GetReportChart();t&&(t.SelectedRow=-1,t.SelectedFixedRow=-1,t.MultiSelectedRow=[])},this.ClearData=function(){this.SourceData.Data=[],this.Data.Data=[],this.Data.Virtual.Count=0,this.BlockData=new Vn.default},this.ClearMapStockData=function(){this.MapStockData=new Vn.default},this.ResetSortStatus=function(){this.SortInfo.Field=-1,this.SortInfo.Sort=0},this.SetSelectedRow=function(t){var e=this.GetReportChart();return!!e&&(!!e.SetSelectedRow(t)&&void this.Draw())},this.SetSymbolList=function(t,e){if(this.ClearData(),this.ResetReportStatus(),this.ResetSortStatus(),we.IsNonEmptyArray(t))for(var a=0;a<t.length;++a)this.Data.Data.push(t[a]);var i=this.ChartPaint[0];i&&(i.Data=this.Data),this.Draw()},this.ChangeSymbol=function(t,e){var a=this;if(this.Symbol=t,this.ClearData(),this.ResetReportStatus(),this.ResetSortStatus(),this.ResetReportSelectStatus(),e){if(we.IsNumber(e.TabSelected)){var i=this.GetTabChart();i&&(i.SelectedTabIndex=e.TabSelected)}if(Array.isArray(e.FixedSymbol)){var r=this.GetReportChart();if(r){r.FixedRowCount=0,this.FixedRowData.Type=1,this.FixedRowData.Symbol=[];for(var n=e.FixedSymbol,o=0;o<n.length;++o){var s=n[o];this.FixedRowData.Symbol.push(s.Symbol),++r.FixedRowCount}this.SetSizeChange(!0)}}if(e.SortInfo){var s=e.SortInfo;we.IsNumber(s.Field)&&(this.SortInfo.Field=s.Field),we.IsNumber(s.Sort)&&(this.SortInfo.Sort=s.Sort)}if(we.IsBool(e.IsReloadStockList)){var l={Callback:null};return this.Symbol&&(l.Callback=function(){a.RequestMemberListData()}),this.MapStockData=new Vn.default,void this.RequestStockListData(l)}}this.RequestMemberListData()},this.UpdateFullData=function(t){var e=[];if(we.IsNonEmptyArray(t.data))for(var a=0;a<t.data.length;++a){var i=t.data[a],r=i[0],n=null;this.MapStockData.has(r)?n=this.MapStockData.get(r):(n=new Br,n.OriginalSymbol=r,this.MapStockData.set(r,n)),n.Symbol=this.GetSymbolNoSuffix(r),n.Name=i[1],this.ReadStockJsonData(n,i),e.push(r)}if(this.Data.Data=[],this.SourceData.Data=[],we.IsNonEmptyArray(e))for(var a=0;a<e.length;++a)this.Data.Data.push(e[a]),this.SourceData.Data.push(e[a]);this.Draw()},this.SetFullData=function(t){this.ClearMapStockData(),this.ClearData(),this.ResetReportStatus(),this.ResetSortStatus(),this.ResetReportSelectStatus(),this.UpdateFullData(t)},this.RequestMemberListData=function(){var t=this;if(this.NetworkFilter){var e={Name:"JSReportChartContainer::RequestMemberListData",Explain:"æ¿åæåæ°æ®",Request:{Data:{symbol:this.Symbol}},Self:this,PreventDefault:!1};if(this.SortInfo.Field>=0&&this.SortInfo.Sort>0){var a=this.GetReportChart();if(a){var i=a.Column[this.SortInfo.Field];e.Sort={Column:i,Field:this.SortInfo.Field,Sort:this.SortInfo.Sort}}}if(this.NetworkFilter(e,function(e){t.ChartSplashPaint.EnableSplash(!1),t.RecvMemberListData(e)}),1==e.PreventDefault)return}},this.RecvMemberListData=function(t){if(this.ClearData(),we.IsNonEmptyArray(t.data))for(var e=0;e<t.data.length;++e)this.Data.Data.push(t.data[e]),this.SourceData.Data.push(t.data[e]);if(t.Virtual){var a=t.Virtual;we.IsNumber(a.Count)&&(this.Data.Virtual.Count=a.Count)}this.Draw(),this.UpdateStockData()},this.AutoUpdateEvent=function(t,e){var a=t?Kn.RECV_START_AUTOUPDATE:Kn.RECV_STOP_AUTOUPDATE;if(this.mapEvent.has(a)){var i=this,r=this.mapEvent.get(a),n={Stock:{Symbol:this.Symbol,Name:this.Name,DayCount:this.DayCount},Explain:e};t&&(n.Callback=function(t){i.RecvDealUpdateData(t)}),r.Callback(r,n,this)}},this.RequestStockListData=function(t){this.ChartSplashPaint.SetTitle(this.SplashTitle.StockList),this.ChartSplashPaint.EnableSplash(!0),this.Draw();var e=this;if(this.NetworkFilter){var a={Name:"JSReportChartContainer::RequestStockListData",Explain:"ç è¡¨æ°æ®",Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(a){e.ChartSplashPaint.EnableSplash(!1),e.RecvStockListData(a,t)}),1==a.PreventDefault)return}},this.RecvStockListData=function(t,e){if(we.IsNonEmptyArray(t.data))for(var a=0;a<t.data.length;++a){var i=t.data[a],r=i[0],n=null;this.MapStockData.has(r)?n=this.MapStockData.get(r):(n=new Br,n.OriginalSymbol=r,this.MapStockData.set(r,n)),n.Symbol=this.GetSymbolNoSuffix(r),n.Name=i[1],we.IsNumber(i[88])&&(n.PriceColorType=i[88]),this.ReadStockJsonData(n,i)}if(e&&e.Callback)return void e.Callback();this.Draw(),this.UpdateStockData()},this.UpdateMapStockData=function(t){if(t&&we.IsNonEmptyArray(t.data))for(var e=0;e<t.data.length;++e){var a=t.data[e],i=a[0],r=null;this.MapStockData.has(i)?r=this.MapStockData.get(i):(r=new Br,r.OriginalSymbol=i,this.MapStockData.set(i,r)),r.Symbol=this.GetSymbolNoSuffix(i),r.Name=a[1],this.ReadStockJsonData(r,a)}},this.GetStockData=function(t){return this.MapStockData&&this.MapStockData.has(t)?this.MapStockData.get(t):null},this.GetBlockData=function(t){return this.BlockData&&this.BlockData.has(t)?this.BlockData.get(t):null},this.SetFlashBGItem=function(t,e){var a={ID:e.ID,Color:e.Color,Count:1};if(we.IsNumber(e.Count)&&(a.Count=e.Count),we.IsNumber(e.Time)?a.Time=e.Time:a.Time=Date.now(),this.FlashBG.has(t)){var i=this.FlashBG.get(t);i.LastTime=a.Time,i.Data.set(a.ID,a)}else{var i={LastTime:a.Time,Data:new Vn.default([[a.ID,a]])};this.FlashBG.set(t,i)}},this.GetFlashBGData=function(t,e){if(!this.FlashBG)return null;if(!this.FlashBG.has(t))return null;var a=this.FlashBG.get(t);if(e-a.LastTime>=3e3)return this.FlashBG.delete(t),null;if(!a.Data||a.Data.size<=0)return this.FlashBG.delete(t),null;var i=[],r=!0,n=!1,o=void 0;try{for(var s,l=(0,Gn.default)(a.Data);!(r=(s=l.next()).done);r=!0){var h=s.value,u=h[1];(e-u.Time>=3e3||u.Count<=0)&&i.push(u.ID)}}catch(t){n=!0,o=t}finally{try{!r&&l.return&&l.return()}finally{if(n)throw o}}if(we.IsNonEmptyArray(i)){for(var C=0;C<i.length;++C)a.Data.delete(i[C]);if(a.Data.size<=0)return this.FlashBG.delete(t),null}return a},this.DelayUpdateStockData=function(){var t=this;null!=this.DelayUpdateTimer&&(clearTimeout(this.DelayUpdateTimer),this.DelayUpdateTimer=null);var e=this.DelayUpdateFrequency;this.DelayUpdateTimer=setTimeout(function(){t.UpdateStockData()},e)},this.UpdateStockData=function(){if(we.IsNonEmptyArray(this.Data.Data)){var t=this.ChartPaint[0];if(t){if(this.Data.Virtual&&this.Data.Virtual.Enable)return void this.RequestVirtualStockData();if(this.SortInfo&&this.SortInfo.Field>=0&&this.SortInfo.Sort>0){var e=t.Column[this.SortInfo.Field];if(2==e.Sort)return void this.RequestStockSortData(e,this.SortInfo.Field,this.SortInfo.Sort)}var a=t.ShowSymbol;we.IsNonEmptyArray(a)&&this.RequestStockData(a)}}},this.RequestStockData=function(t){var e=this;if(this.NetworkFilter){var a={Name:"JSDealChartContainer::RequestStockData",Explain:"æ¥ä»·åè¡¨è¡ç¥¨æ°æ®",Request:{Data:{stocks:t},symbol:this.Symbol,name:this.Name},Self:this,PreventDefault:!1};if(this.NetworkFilter(a,function(t){e.RecvStockData(t),e.AutoUpdate()}),1==a.PreventDefault)return}},this.RecvStockData=function(t){var e=this,a=new Rn.default;if(we.IsNonEmptyArray(t.data))for(var i=0;i<t.data.length;++i){var r=t.data[i],n=r[0];if(n){var o=null;this.MapStockData.has(n)?o=this.MapStockData.get(n):(o=new Br,o.OriginalSymbol=n,o.Symbol=this.GetSymbolNoSuffix(n),this.MapStockData.set(n,o)),this.ReadStockJsonData(o,r),a.has(n)||a.add(n)}}var s=this.ChartPaint[0];if(s){var l=!1,s=this.ChartPaint[0];if(s&&1==this.SortInfo.Sort&&we.IsNumber(this.SortInfo.Field)&&this.SortInfo.Field>=0){var h=s.Column[this.SortInfo.Field],u=this.GetEventCallback(Kn.ON_REPORT_LOCAL_SORT);if(u&&u.Callback){var C={Column:h,SortInfo:this.SortInfo,SymbolList:this.Data.Data,Result:null};u.Callback(u,C,this),Array.isArray(C.Result)&&(this.Data.Data=C.Result)}else this.Data.Data.sort(function(t,a){return e.LocalSort(t,a,h,e.SortInfo.Sort)});l=!0}else for(var c=s.ShowSymbol,i=0;i<c.length;++i)if(a.has(c[i].Symbol)){l=!0;break}l&&this.Draw()}},this.ReadStockJsonData=function(t,e){we.IsString(e[1])&&(t.Name=e[1]),we.IsNumber(e[2])&&(t.YClose=e[2]),we.IsNumber(e[3])&&(t.Open=e[3]),we.IsNumber(e[4])&&(t.High=e[4]),we.IsNumber(e[5])&&(t.Low=e[5]),we.IsNumber(e[6])&&(t.Price=e[6]),we.IsNumber(e[7])&&(t.Vol=e[7]),we.IsNumber(e[8])&&(t.Amount=e[8]),we.IsNumber(e[9])&&(t.BuyPrice=e[9]),we.IsNumber(e[10])&&(t.BuyVol=e[10]),we.IsNumber(e[11])&&(t.SellPrice=e[11]),we.IsNumber(e[12])&&(t.SellVol=e[12]),we.IsNumber(e[13])&&(t.AvPrice=e[13]),we.IsNumber(e[14])&&(t.OutShares=e[14]),we.IsNumber(e[15])&&(t.TotalShares=e[15]),we.IsNumber(e[16])&&(t.LimitHigh=e[16]),we.IsNumber(e[17])&&(t.LimitLow=e[17]),we.IsNumber(e[18])&&(t.VolIn=e[18]),we.IsNumber(e[19])&&(t.VolOut=e[19]),we.IsNumber(e[20])&&(t.DealNum=e[20]),we.IsNumber(e[21])&&(t.Increase=e[21]),we.IsNumber(e[22])&&(t.UpDown=e[22]),we.IsNumber(e[23])&&(t.Exchange=e[23]),we.IsNumber(e[24])&&(t.Amplitude=e[24]),we.IsNumber(e[25])&&(t.CircMarketValue=e[25]),we.IsNumber(e[26])&&(t.MarketValue=e[26]),e[27]&&(t.NameEx=e[27]),we.IsNumber(e[21])||we.IsNumber(t.Price)&&we.IsNumber(t.YClose)&&0!=t.YClose&&(t.Increase=(t.Price-t.YClose)/t.YClose*100),we.IsNumber(e[22])||we.IsNumber(t.Price)&&we.IsNumber(t.YClose)&&(t.UpDown=t.Price-t.YClose),we.IsNumber(e[23])||we.IsNumber(t.Vol)&&we.IsNumber(t.OutShares)&&t.OutShares>0&&(t.Exchange=t.Vol/t.OutShares*100),we.IsNumber(e[24])||we.IsNumber(t.High)&&we.IsNumber(t.Low)&&we.IsNumber(t.YClose)&&0!=t.YClose&&(t.Amplitude=(t.High-t.Low)/t.YClose*100),we.IsNumber(e[25])||we.IsNumber(t.OutShares)&&we.IsNumber(t.Price)&&(t.CircMarketValue=t.OutShares*t.Price),we.IsNumber(e[26])||we.IsNumber(t.TotalShares)&&we.IsNumber(t.Price)&&(t.MarketValue=t.TotalShares*t.Price),e[30]&&(t.ExtendData=e[30]),e[31]&&this.BlockData.set(t.OriginalSymbol,e[31]),e[32]&&(t.CloseLine=e[32]),e[33]&&(t.KLine=e[33]),we.IsNumber(e[35])&&(t.Time=e[35]),we.IsNumber(e[36])&&(t.Date=e[36]),we.IsBool(e[37])&&(t.Checked=e[37]),we.IsNumber(e[38])&&(t.Position=e[38]),we.IsNumber(e[39])&&(t.FClose=e[39]),we.IsNumber(e[40])&&(t.YFClose=e[40]),we.IsNumber(e[41])&&(t.OpenPosition=e[41]),we.IsNumber(e[42])&&(t.ClosePosition=e[42]),we.IsNumber(e[43])&&(t.RSpeed1M=e[43]),we.IsNumber(e[44])&&(t.RSpeed3M=e[44]),we.IsNumber(e[45])&&(t.RSpeed5M=e[45]),we.IsNumber(e[46])&&(t.RSpeed10M=e[46]),we.IsNumber(e[47])&&(t.RSpeed15M=e[47]),we.IsNumber(e[101])&&(t.ReserveNumber1=e[101]),we.IsNumber(e[102])&&(t.ReserveNumber2=e[102]),we.IsNumber(e[103])&&(t.ReserveNumber3=e[103]),we.IsNumber(e[104])&&(t.ReserveNumber4=e[104]),we.IsNumber(e[105])&&(t.ReserveNumber5=e[105]),we.IsNumber(e[106])&&(t.ReserveNumber6=e[106]),we.IsNumber(e[107])&&(t.ReserveNumber7=e[107]),we.IsNumber(e[108])&&(t.ReserveNumber8=e[108]),we.IsNumber(e[109])&&(t.ReserveNumber9=e[109]),we.IsNumber(e[110])&&(t.ReserveNumber10=e[110]),we.IsString(e[201])&&(t.ReserveString1=e[201]),we.IsString(e[202])&&(t.ReserveString2=e[202]),we.IsString(e[203])&&(t.ReserveString3=e[203]),we.IsString(e[204])&&(t.ReserveString4=e[204]),we.IsString(e[205])&&(t.ReserveString5=e[205]),we.IsString(e[206])&&(t.ReserveString6=e[206]),we.IsString(e[207])&&(t.ReserveString7=e[207]),we.IsString(e[208])&&(t.ReserveString8=e[208]),we.IsString(e[209])&&(t.ReserveString9=e[209]),we.IsString(e[210])&&(t.ReserveString10=e[210]),(we.IsNumber(e[301])||we.IsObject(e[301]))&&(t.ReserveProgressBar1=e[301]),(we.IsNumber(e[302])||we.IsObject(e[302]))&&(t.ReserveProgressBar2=e[302]),(we.IsNumber(e[303])||we.IsObject(e[303]))&&(t.ReserveProgressBar3=e[303]),(we.IsNumber(e[304])||we.IsObject(e[304]))&&(t.ReserveProgressBar4=e[304]),(we.IsNumber(e[305])||we.IsObject(e[305]))&&(t.ReserveProgressBar5=e[305]),(we.IsNumber(e[306])||we.IsObject(e[306]))&&(t.ReserveProgressBar6=e[306]),(we.IsNumber(e[307])||we.IsObject(e[307]))&&(t.ReserveProgressBar7=e[307]),(we.IsNumber(e[308])||we.IsObject(e[308]))&&(t.ReserveProgressBar8=e[308]),(we.IsNumber(e[309])||we.IsObject(e[309]))&&(t.ReserveProgressBar9=e[309]),(we.IsNumber(e[310])||we.IsObject(e[310]))&&(t.ReserveProgressBar10=e[310])},this.GetSymbolNoSuffix=function(t){var e=t.lastIndexOf(".");return e>0?t.substring(0,e):t},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=null)},this.AutoUpdate=function(t){if(this.CancelAutoUpdate(),this.IsAutoUpdate){var e=this,a=2,i=this.GetEventCallback(Kn.ON_REPORT_MARKET_STATUS);if(i&&i.Callback){var r={MarketStatus:2};i.Callback(i,r,this),we.IsNumber(r.MarketStatus)&&(a=r.MarketStatus)}if(0!=a&&3!=a){var n=this.AutoUpdateFrequency;1==a?this.AutoUpdateTimer=setTimeout(function(){e.AutoUpdate()},n):2==a&&(this.AutoUpdateTimer=setTimeout(function(){e.UpdateStockData()},n))}}},this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"JSDealChartContainer::StopAutoUpdate"),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},this.AddEventCallback=function(t){if(t&&t.event&&t.callback){var e={Callback:t.callback,Source:t};this.mapEvent.set(t.event,e)}},this.RemoveEventCallback=function(t){this.mapEvent.has(t)&&this.mapEvent.delete(t)},this.GetEventCallback=function(t){return this.mapEvent.has(t)?this.mapEvent.get(t):null},this.OnSize=function(){this.Frame&&(this.SetSizeChange(!0),this.Draw(),this.DelayUpdateStockData())},this.SetSizeChange=function(t){for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a&&(a.SizeChange=t)}},this.OnWheel=function(t){if(Xn.Chart.Log("[JSReportChartContainer::OnWheel]",t),(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash)&&this.Data&&we.IsNonEmptyArray(this.Data.Data)){var e=t.clientX-this.UIElement.getBoundingClientRect().left,a=t.clientY-this.UIElement.getBoundingClientRect().top;if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),this.Canvas.isPointInPath(e,a)){if(this.ChartPaint[0]){var i=t.wheelDelta;we.IsObjectExist(t.wheelDelta)||(i=-.01*t.deltaY),1==this.WheelPageType?(console.log("[OnWheel] wheelValue="+i),i<0?(this.LastMouseStatus.TooltipStatus=null,this.GotoNextItem(1)&&(this.Draw(),this.DelayUpdateStockData())):i>0&&(this.LastMouseStatus.TooltipStatus=null,this.GotoNextItem(-1)&&(this.Draw(),this.DelayUpdateStockData()))):i<0?(this.LastMouseStatus.TooltipStatus=null,this.GotoNextPage(this.PageUpDownCycle)&&(this.Draw(),this.DelayUpdateStockData())):i>0&&(this.LastMouseStatus.TooltipStatus=null,this.GotoPreviousPage(this.PageUpDownCycle)&&(this.Draw(),this.DelayUpdateStockData())),t.preventDefault?t.preventDefault():t.returnValue=!1}}}},this.OnKeyDown=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){if(this.GetReportChart()){var e=t.keyCode?t.keyCode:t.which;if(116!=e){switch(e){case 33:this.GotoPreviousPage(this.PageUpDownCycle)&&(this.Draw(),this.DelayUpdateStockData());break;case 34:this.GotoNextPage(this.PageUpDownCycle)&&(this.Draw(),this.DelayUpdateStockData());break;case 38:var a=this.MoveSelectedRow(-1);a&&(a.Redraw&&this.Draw(),a.Update&&this.DelayUpdateStockData());break;case 40:var a=this.MoveSelectedRow(1);a&&(a.Redraw&&this.Draw(),a.Update&&this.DelayUpdateStockData());break;case 37:this.MoveXOffset(-1)&&this.Draw();break;case 39:this.MoveXOffset(1)&&this.Draw()}t.preventDefault?t.preventDefault():t.returnValue=!1}}}},this.UIOnDblClick=function(t){var e=C(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e,r=this.ChartPaint[0];r&&r.OnDblClick(a,i,t)},this.UIOnMouseDown=function(t){var e=this;this.DragXScroll=null,this.DragYScroll=null,this.DragHeader=null,this.DragColumnWidth=null,this.DragMove={Click:{X:t.clientX,Y:t.clientY},Move:{X:t.clientX,Y:t.clientY},PreMove:{X:t.clientX,Y:t.clientY}};var a=C(),i=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,r=(t.clientY-this.UIElement.getBoundingClientRect().top)*a,n=this.ChartPaint[0];if(n){var o=n.PtInHeaderDragBorder(i,r);if(o)this.DragColumnWidth={ClickPoint:{X:i,Y:r},LastPoint:{X:i,Y:r},ClickData:o,ColumnWidth:o.Column.Width};else{var s=n.OnMouseDown(i,r,t);if(!s)return;if(2!=s.Type&&4!=s.Type||0!=t.button&&2!=t.button){if(3==s.Type&&0==t.button)this.DragHeader={ClickPoint:{X:i,Y:r},Click:{X:t.clientX,Y:t.clientY},ClickData:s,LastMove:{X:t.clientX,Y:t.clientY},MovePoint:null,MoveToData:null};else if(1==s.Type&&0==t.button){var l=s.Tab;1==l.Type?this.MoveXOffset(-1)&&this.Draw():2==l.Type?this.MoveXOffset(1)&&this.Draw():3==l.Type?this.DragXScroll={Click:{X:i,Y:r},LastMove:{X:i,Y:r}}:4==l.Type?this.SetXOffset(l.Pos)&&this.Draw():5==l.Type&&this.OnClickTab(l,t)}else if(5==s.Type&&0==t.button){var h=s.VScrollbar;1==h.Type?this.MoveYOffset(-1)&&(this.Draw(),this.DelayUpdateStockData()):2==h.Type?this.MoveYOffset(1)&&(this.Draw(),this.DelayUpdateStockData()):3==h.Type?this.DragYScroll={Click:{X:i,Y:r},LastMove:{X:i,Y:r}}:4==h.Type&&this.SetYOffset(h.Pos)&&(this.Draw(),this.DelayUpdateStockData())}}else 0==t.button&&2==s.Type&&this.EnableDragRow&&this.SortInfo.Sort<=0&&(this.DragRow={Click:{X:t.clientX,Y:t.clientY},LastMove:{X:t.clientX,Y:t.clientY},Data:s}),1==s.Redraw&&this.Draw()}}document.onmousemove=function(t){e.DocOnMouseMove(t)},document.onmouseup=function(t){e.DocOnMouseUp(t)}},this.UIOnMounseUp=function(t){console.log('"UIOnMounseUp')},this.UIOnContextMenu=function(t){if((!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash)&&this.IsShowRightMenu){var e=t.clientX-this.UIElement.getBoundingClientRect().left,a=t.clientY-this.UIElement.getBoundingClientRect().top;"function"==typeof this.OnRightMenu&&this.OnRightMenu(e,a,t)}},this.OnRightMenu=function(t,e,a){a.preventDefault()},this.UIOnMouseMove=function(t){var e=C(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e,r=this.LastMouseStatus.MouseOnStatus;this.LastMouseStatus.OnMouseMove=null;var n=!1;if(this.LastMouseStatus.TooltipStatus&&(n=!0),this.LastMouseStatus.TooltipStatus=null,!this.DragRow&&!this.DrawHeader&&!this.DragColumnWidth){var o=this.GetTabChart(),s=!1;if(o){var l=o.PtInTab(a,i);if(l){var h=l.Index;o.MoveOnTabIndex!=h&&(o.MoveOnTabIndex=h,s=!0)}else o.MoveOnTabIndex>=0&&(o.MoveOnTabIndex=-1,s=!0)}this.LastMouseStatus.OnMouseMove={X:a,Y:i};var u={Cursor:"default",Name:"Default"},c=this.GetReportChart(),f=!1;if(c){var d=c.PtInHeaderDragBorder(a,i);if(d)u={Cursor:"col-resize",Name:"DragHeaderWidth"},Xn.Chart.Log("[JSReportChartContainer::UIOnMouseMove] drag column width ",d);else{var D=c.GetButtonData(a,i),m=null;D&&(u={Cursor:"pointer",Name:"Botton"},1!=D.Type&&0!=D.Type&&2!=D.Type||(m={Index:D.Index,ColumnIndex:D.ColumnIndex})),!r&&m||r&&!m?f=!0:r&&m&&(r.Index==m.Index&&r.ColumnIndex==m.ColumnIndex||(f=!0));var p=c.GetTooltipData(a,i);p&&(this.LastMouseStatus.TooltipStatus={X:t.clientX,Y:t.clientY,Data:p},n=!0)}var v=c.VScrollbar;if(v.Enable){var g=c.PtInClient(a,i);this.IsShowVScrollbar=g,this.DragYScroll||(g&&!v.LastStatus.Draw?f=!0:!g&&v.LastStatus.Draw&&(f=!0))}}u&&(this.UIElement.style.cursor=u.Cursor),f||s?this.Draw():n&&this.DrawTooltip(this.LastMouseStatus.TooltipStatus)}},this.UIOnMounseOut=function(t){var e=!1,a=this.GetTabChart();a&&a.MoveOnTabIndex>=0&&(a.MoveOnTabIndex=-1,e=!0,this.Draw());var i=this.GetVScrollbarChart();i.Enable&&(this.IsShowVScrollbar=!1,this.DragYScroll||i.LastStatus.Draw&&(e=!0)),e&&this.Draw()},this.UIOnMouseleave=function(t){var e=this.GetTabChart();e&&e.MoveOnTabIndex>=0&&(e.MoveOnTabIndex=-1,this.Draw())},this.DocOnMouseMove=function(t){if(this.DragMove.PreMove.X=this.DragMove.Move.X,this.DragMove.PreMove.Y=this.DragMove.Move.Y,this.DragMove.Move.X=t.clientX,this.DragMove.Move.Y=t.clientX,this.DragMove.Move.X==this.DragMove.PreMove.X&&this.DragMove.Move.Y==this.DragMove.PreMove.Y||this.StopAutoDragScrollTimer(),!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=C(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e;if(this.DragRow){var r=this.DragRow,n=r.LastMove.Y-t.clientY;if(Math.abs(n)<2)return;var o=this.GetReportChart();if(r.LastMove.X=t.clientX,r.LastMove.Y=t.clientY,r.Inside={X:a,Y:i},o){var s=o.OnDrawgRow(a,i,t);if(s)if(2==s.Type)s.Data.DataIndex!=r.Data.Row.DataIndex&&(r.MoveRow=s);else if(7==s.Type){var l=o.GetCurrentPageStatus();l.IsEnd||(this.MoveYOffset(1,!1),r.MoveRow=null,this.EnablePageScroll=!0,this.AutoScrollPage(2))}else 5==s.Type&&this.Data.YOffset>0&&(this.MoveYOffset(-1,!1),r.MoveRow=null,this.EnablePageScroll=!0,this.AutoScrollPage(-2));o.DragRow=r}this.Draw()}else if(this.DragXScroll){var h=this.ChartPaint[0];if(!h||!h.Tab)return;this.DragXScroll.LastMove.X=a,this.DragXScroll.LastMove.Y=i;var u=h.Tab.GetScrollPostionByPoint(a,i);this.SetXOffset(u)&&this.Draw()}else if(this.DragYScroll){var h=this.ChartPaint[0];if(!h||!h.VScrollbar)return;this.DragYScroll.LastMove.X=a,this.DragYScroll.LastMove.Y=i;var u=h.VScrollbar.GetScrollPostionByPoint(a,i);this.SetYOffset(u)&&(this.Draw(),this.DelayUpdateStockData())}else if(this.DragHeader&&this.DragHeader.ClickData){if(this.DragHeader.ClickData.Header.IsFixed)return;if(!this.EnableDragHeader)return;var c=t.clientX-this.DragHeader.Click.X,f=t.clientY-this.DragHeader.Click.Y;if(Math.abs(f)<=1&&Math.abs(c)<=1)return;this.DragHeader.LastMove.X=t.clientX,this.DragHeader.LastMove.Y=t.clientY,this.DragHeader.MovePoint?(this.DragHeader.MovePoint.X=a,this.DragHeader.MovePoint.Y=i):this.DragHeader.MovePoint={X:a,Y:i},this.OnMoveDragHeader(a,i,t),this.ShowDragHeaderTooltip(a,i,t)}else if(this.DragColumnWidth&&this.DragColumnWidth.ClickData){var c=a-this.DragColumnWidth.ClickPoint.X;if(Math.abs(c)<1)return;var d=this.DragColumnWidth.ColumnWidth+c;if(d<=10)return;var D=this.DragColumnWidth.ClickData.Index,m=this.GetEventCallback(Kn.ON_REPORT_DRAG_COLUMN_WIDTH);if(m&&m.Callback){var p={Index:D,Width:d,PreventDefault:!1};if(this.DragColumnWidth&&this.DragColumnWidth.ClickData&&(p.Column=this.DragColumnWidth.ClickData.Column),m.Callback(m,p,this),p.PreventDefault)return}this.SetColumnFixedWidth(D,d),this.DragColumnWidth.LastPoint.X=a,this.DragColumnWidth.LastPoint.Y=i}}},this.SetColumnFixedWidth=function(t,e){var a=this.ChartPaint[0];if(a){var i=a.Column[t];i&&(i.FixedWidth=e,this.SetSizeChange(!0),this.Draw())}},this.OnMoveDragHeader=function(t,e,a){var i=this.ChartPaint[0];if(i){var r=this.DragHeader.ClickData;if(this.DragHeader.MoveToData=null,!r.Header.IsFixed){var n=this.DragHeader.ClickPoint.Y,o=i.OnMouseDown(t,n,a);if(!o||!o.Header)return;if(o.Header.IsFixed)return;if(o.Header.Index==r.Header.Index)return;this.DragHeader.MoveToData=o,console.log("[JSReportChartContainer::OnMoveDragHeader] Click[Index="+r.Header.Index+", Title="+r.Header.Column.Title+"] => Move[Index="+o.Header.Index+", Title="+o.Header.Column.Title+"]")}}},this.ShowDragHeaderTooltip=function(t,e,a){if(this.DragHeader){var i=this.DragHeader;if(i.ClickData&&i.MovePoint){var r=this.GetEventCallback(Kn.ON_REPORT_DRAG_HEADER_TOOLTIP);if(r){var n={PreventDefault:!1,e:a,X:t,Y:e,DragHeader:this.DragHeader,Tooltip:this.Tooltip};if(r.Callback(r,n,this),n.PreventDefault)return}var o=i.ClickData.Header.Column.Title;this.Tooltip.className="jchart-chartdrawsvg-tooltip",this.Tooltip.style.position="absolute",this.Tooltip.style.left=a.clientX+"px",this.Tooltip.style.top=a.clientY+"px",this.Tooltip.style.width="100px",this.Tooltip.style.height=null,this.Tooltip.innerHTML=o,this.Tooltip.style.display="block"}}},this.HideTooltip=function(){"none"!=this.Tooltip.style.display&&(this.Tooltip.style.display="none")},this.DocOnMouseUp=function(t){document.onmousemove=null,document.onmouseup=null,this.StopAutoDragScrollTimer(),this.HideTooltip();var e=this.GetReportChart(),a={Cursor:"default",Name:"Default"},i=!1;this.DragRow&&(e&&(this.OnDragRow(),e.DragRow=null),i=!0);var r=this.DragHeader;if(this.DragHeader=null,this.DragXScroll=null,this.DragYScroll&&(i=!0,this.DragYScroll=null),this.DragRow=null,this.DragMove=null,this.DragColumnWidth=null,i&&this.Draw(),r){var n=r.ClickData,o=r.MoveToData;n&&o?this.SwapColumn(n.Header.Index,o.Header.Index,{Redraw:!0}):this.OnClickHeader(n,t)}a&&(this.UIElement.style.cursor=a.Cursor)},this.OnDragRow=function(){if(this.SourceData&&we.IsNonEmptyArray(this.SourceData.Data)&&this.DragRow&&this.DragRow.MoveRow){var t=this.DragRow,e=t.Data.Row.DataIndex,a=t.MoveRow.Data.DataIndex;if(!(e==a||e<0||a<0)){var i=this.SourceData.Data;if(!(e>=i.length||a>=i.length)){var r=this.GetEventCallback(Kn.ON_REPORT_DRAG_ROW);if(r){var n={Symbol:this.Symbol,Src:{Index:e,Symbol:i[e]},To:{Index:a,Symbol:i[a]},PreventDefault:!1};if(r.Callback(r,n,this),n.PreventDefault)return}if(1==this.DragRowType){var o=i[e];i[e]=i[a],i[a]=o,this.Data.Data=i.slice(0)}else{var s=i[e];i.splice(e,1),i.splice(a,0,s),this.Data.Data=i.slice(0)}var l=this.GetReportChart();l&&(0==l.SelectedModel?l.SelectedRow=t.MoveRow.Data.Index:l.SelectedRow=t.MoveRow.Data.DataIndex)}}}},this.IsPhoneDragging=function(t){var e=t.changedTouches.length,a=t.touches.length;return 1==e&&1==a},this.GetTouchData=function(t){for(var e=[],a=C(),i=0;i<t.touches.length;++i){var r=t.touches[i],n={clientX:r.clientX*a,clientY:r.clientY*a,pageX:r.pageX*a,pageY:r.pageY*a,InsideX:(r.clientX-this.UIElement.getBoundingClientRect().left)*a,InsideY:(r.clientY-this.UIElement.getBoundingClientRect().top)*a};e.push(n)}return e},this.GetMoveAngle=function(t,e){var a=Math.abs(t.X-e.X),i=Math.abs(t.Y-e.Y);return 180*Math.atan(a/i)/Math.PI},this.PreventTouchEvent=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()},this.OnTouchStart=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){this.IsOnTouch=!0;var e=this.GetReportChart();if(e&&this.IsPhoneDragging(t)){var a={Click:{},LastMove:{},InsideClick:{}},i=this.GetTouchData(t);a.Click.X=i[0].clientX,a.Click.Y=i[0].clientY,a.InsideClick.X=i[0].InsideX,a.InsideClick.Y=i[0].InsideY,a.LastMove.X=i[0].clientX,a.LastMove.Y=i[0].clientY,a.IsXMove=!1,a.IsYMove=!1,e.IsPtInBody(a.InsideClick.X,a.InsideClick.Y)&&(this.TouchDrag=a),this.TouchInfo={InsideClick:{X:i[0].InsideX,Y:i[0].InsideY},Click:{X:i[0].clientX,Y:i[0].clientY}},this.PreventTouchEvent(t)}}},this.OnDragYOffset=function(t,e,a,i){if(a<5)return!1;var r=!0;t.LastMove.Y<e[0].clientY&&(r=!1);var n=this.YStepPixel;n<=0&&(n=5);var o=parseInt(a/n);return!(o<=0)&&(0==r&&(o*=-1),this.MoveYOffset(o,this.DragPageCycle)&&(t.IsYMove=!0,this.Draw(),this.DelayUpdateStockData()),!0)},this.OnDragXOffset=function(t,e,a,i){if(a<5)return!1;var r=!0;t.LastMove.X<e[0].clientX&&(r=!1);var n=this.XStepPixel;n<=0&&(n=5);var o=parseInt(a/n);return!(o<=0)&&(r||(o*=-1),this.MoveXOffset(o)&&(t.IsXMove=!0,this.Draw()),!0)},this.OnTouchMove=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){if(this.GetReportChart()){var e=this.GetTouchData(t);if(this.IsPhoneDragging(t)){var a=this.TouchDrag;if(this.TouchInfo.Move={X:e[0].clientX,Y:e[0].clientY},a){this.PreventTouchEvent(t);var i=this.GetMoveAngle(a.LastMove,{X:e[0].clientX,Y:e[0].clientY}),r=Math.abs(a.LastMove.X-e[0].clientX),n=Math.abs(a.LastMove.Y-e[0].clientY);if(1==a.IsYMove){if(this.ShowPageInfo(!0),!this.OnDragYOffset(a,e,n,t))return}else if(1==a.IsXMove){if(!this.OnDragXOffset(a,e,r,t))return}else if(n>0&&i<this.TouchMoveMinAngle){if(this.ShowPageInfo(!0),!this.OnDragYOffset(a,e,n,t))return}else{if(!(r>0&&i>=this.TouchMoveMinAngle))return;if(!this.OnDragXOffset(a,e,r,t))return}a.LastMove.X=e[0].clientX,a.LastMove.Y=e[0].clientY}}}}},this.OnTouchEnd=function(t){Xn.Chart.Log("[JSReportChartContainer:OnTouchEnd]",t),this.ChartSplashPaint&&1==this.ChartSplashPaint.IsEnableSplash||(this.ShowPageInfo(!1),this.OnTouchClick(this.TouchInfo,t),this.IsOnTouch=!1,this.TouchDrag=null,this.TouchInfo=null)},this.OnTouchClick=function(t,e){if(!t||!t.Click)return!1;if(t.Move)return!1;var a=t.InsideClick,i=this.GetReportChart();if(!i)return!1;var r=i.OnMouseDown(a.X,a.Y,e);if(!r)return!1;2==r.Type||4==r.Type?1==r.Redraw&&this.Draw():3==r.Type&&this.OnClickHeader(r,e),Xn.Chart.Log("[JSReportChartContainer:OnTouchClick] clickData",r)},this.GetTabChart=function(){var t=this.ChartPaint[0];return t?t.Tab:null},this.GetVScrollbarChart=function(){var t=this.ChartPaint[0];return t?t.VScrollbar:null},this.GetReportChart=function(){return this.ChartPaint[0]},this.GotoNextItem=function(t){if(0==t)return!1;if(!this.Data||!we.IsNonEmptyArray(this.Data.Data))return!1;var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetPageSize();if(a>this.Data.Data.length)return!1;var i=0;if(t>0)for(var r=0;r<t&&!(this.Data.YOffset+a>=this.Data.Data.length);++r)++this.Data.YOffset,++i;else if(t<0){t=Math.abs(t);for(var r=0;r<t&&!(this.Data.YOffset<=0);++r)--this.Data.YOffset,++i}return i>0},this.GotoNextPage=function(t){if(!this.Data||!we.IsNonEmptyArray(this.Data.Data))return!1;var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetPageSize(),i=e.GetAllRowCount();if(a>i)return!1;if(this.Data.YOffset+a>=i)return!0===t&&(this.Data.YOffset=0,!0);this.Data.YOffset+=a;var r=i-this.Data.YOffset;return 0==e.SelectedModel&&e.SelectedRow>r-1&&(e.SelectedRow=r-1),!0},this.GotoPreviousPage=function(t){if(!this.Data||!we.IsNonEmptyArray(this.Data.Data))return!1;var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetPageSize(),i=e.GetAllRowCount();if(a>i)return!1;if(this.Data.YOffset<=0)return!0===t&&(this.Data.YOffset=i-a,!0);var r=this.Data.YOffset;return r-=a,r<0&&(r=0),this.Data.YOffset=r,!0},this.MoveYOffset=function(t,e){if(!this.Data||!we.IsNonEmptyArray(this.Data.Data))return!1;var a=this.ChartPaint[0];if(!a)return!1;var i=a.GetCurrentPageStatus();if(i.IsSinglePage)return!1;if(t>0){var r=this.Data.Data.length,n=i.PageSize,o=this.Data.YOffset;if(e)for(var s=0;s<t;++s)++o+n>r&&(o=0);else{if(o+n>=r)return!1;for(var s=0;s<t&&!(o+n+1>r);++s)++o}return this.Data.YOffset=o,!0}if(t<0){t=Math.abs(t);var o=this.Data.YOffset;if(e)for(var n=i.PageSize,s=0;s<t;++s)--o<0&&(o=this.Data.Data.length-n);else{if(this.Data.YOffset<=0)return!1;for(var s=0;s<t&&!(o-1<0);++s)--o}return this.Data.YOffset=o,!0}return!1},this.MoveSelectedRow=function(t){var e=this.ChartPaint[0];if(!e)return null;if(!we.IsNonEmptyArray(this.Data.Data))return null;var a={Redraw:!1,Update:!1};if(1==e.MultiSelectModel){var i=e.GetCurrentPageStatus();if(we.IsNonEmptyArray(i.MultiSelectedRow)){var r=i.MultiSelectedRow[0];if(t>0){if(r==this.Data.Data.length-1)return a;if(r<0||r<i.Start||r>i.End)return e.MultiSelectedRow=[i.Start],a.Redraw=!0,a;for(var n=this.Data.YOffset,o=0;o<t;++o)++r,r>i.End&&++n,r>=this.Data.Data.length&&(r=0,n=0);return a.Redraw=!0,a.Update=n!=this.Data.YOffset,e.MultiSelectedRow=[r],this.Data.YOffset=n,a}if(t<0){if(0==r)return a;if(r<0||r<i.Start||r>i.End)return e.MultiSelectedRow=[i.End],a.Redraw=!0,a;t=Math.abs(t);for(var n=this.Data.YOffset,o=0;o<t;++o)--r,r<i.Start&&--n,r<0&&(r=this.Data.Data.length-1,(n=this.Data.Data.length-s)<0&&(n=0));return a.Redraw=!0,a.Update=n!=this.Data.YOffset,e.MultiSelectedRow=[r],this.Data.YOffset=n,a}return null}var r=-1;if(t>0)r=i.Start;else{if(!(t<0))return null;r=i.End}return e.MultiSelectedRow=[r],a.Redraw=!0,a}if(0==e.SelectedModel){var i=e.GetCurrentPageStatus(),s=i.End-i.Start+1,r=i.SelectedRow;if(t>0)return r+=t,r%=s,e.SelectedRow=r,e.SelectedFixedRow=-1,a.Redraw=!0,a;if(t<0)return r+=t,r<0&&(r%=s,r=s+r),e.SelectedRow=r,e.SelectedFixedRow=-1,a.Redraw=!0,a}else if(1==e.SelectedModel){var i=e.GetCurrentPageStatus(),s=i.PageSize,r=i.SelectedRow;if(t>0){if(r<0||r<i.Start||r>i.End)return e.SelectedRow=i.Start,a.Redraw=!0,a;for(var n=this.Data.YOffset,o=0;o<t;++o)++r,r>i.End&&++n,r>=this.Data.Data.length&&(r=0,n=0);return a.Redraw=!0,a.Update=n!=this.Data.YOffset,e.SelectedRow=r,this.Data.YOffset=n,a}if(t<0){if(r<0||r<i.Start||r>i.End)return e.SelectedRow=i.End,a.Redraw=!0,a;t=Math.abs(t);for(var n=this.Data.YOffset,o=0;o<t;++o)--r,r<i.Start&&--n,r<0&&(r=this.Data.Data.length-1,(n=this.Data.Data.length-s)<0&&(n=0));return a.Redraw=!0,a.Update=n!=this.Data.YOffset,e.SelectedRow=r,this.Data.YOffset=n,a}}return null},this.MoveXOffset=function(t){var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetXScrollRange();if(a<=0)return!1;if(t>0){if(this.Data.XOffset>=a)return!1;for(var i=0;i<t&&!(this.Data.XOffset>=a);++i)++this.Data.XOffset;return!0}if(t<0){if(this.Data.XOffset<=0)return!1;t=Math.abs(t);for(var i=0;i<t&&!(this.Data.XOffset-1<0);++i)--this.Data.XOffset;return!0}return!1},this.SetXOffset=function(t){if(!we.IsNumber(t))return!1;var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetXScrollRange();return t<0&&(t=0),t>a&&(t=a),this.Data.XOffset=t,!0},this.SetYOffset=function(t){if(!we.IsNumber(t))return!1;var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetYScrollRange();return t<0&&(t=0),t>a&&(t=a),this.Data.YOffset=t,!0},this.GotoLastPage=function(){var t=this.ChartPaint[0];if(t){var e=t.GetPageSize(!0),a=this.Data.Data.length-e;a<0&&(a=0),this.Data.DataOffset=a}},this.SetColumn=function(t,e){var a=this.ChartPaint[0];a&&(a.SetColumn(t),a.SizeChange=!0,e&&e.Redraw&&this.Draw())},this.SetTab=function(t,e){var a=this.ChartPaint[0];if(a){var i=a.Tab;i&&(i.SetTabList(t),e&&e.Redraw&&this.Draw())}},this.SetVScrollbar=function(t){var e=this.GetReportChart();if(e){var a=e.VScrollbar;a&&a.SetOption(t)}},this.SetSelectedTab=function(t,e){var a=this.ChartPaint[0];if(a){var i=a.Tab;i&&(i.SelectedTabIndex=t)}},this.ReloadResource=function(t){this.Frame.ReloadResource(t);for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.ReloadResource&&a.ReloadResource(t)}t&&t.Redraw&&(this.SetSizeChange(!0),this.Draw())},this.SortColumn=function(t,e){var a=this;if(t<0)return!1;var i=this.GetReportChart();if(!i)return!1;var r=i.Column[t];if(!r)return!1;if(1!=r.Sort&&2!=r.Sort)return!1;var n={Field:t,Sort:e};if(this.Data.Virtual&&this.Data.Virtual.Enable)return this.SortInfo.Field=n.Field,this.SortInfo.Sort=n.Sort,this.Data.YOffset=0,this.ResetReportSelectStatus(),this.RequestVirtualStockData(),!0;if(0==n.Sort)this.Data.Data=[],we.IsNonEmptyArray(this.SourceData.Data)&&(this.Data.Data=this.SourceData.Data.slice());else if(1==n.Sort||2==n.Sort)if(1==r.Sort){var o=this.GetEventCallback(Kn.ON_REPORT_LOCAL_SORT);if(o&&o.Callback){var s={Column:r,SortInfo:n,SymbolList:this.Data.Data,Result:null};o.Callback(o,s,this),Array.isArray(s.Result)&&(this.Data.Data=s.Result)}else this.Data.Data.sort(function(t,e){return a.LocalSort(t,e,r,n.Sort)})}else if(2==r.Sort){if(!we.IsNonEmptyArray(this.Data.Data))return;return this.SortInfo.Field=n.Field,this.SortInfo.Sort=n.Sort,this.Data.YOffset=0,this.ResetReportSelectStatus(),this.RequestStockSortData(r,n.Field,n.Sort),!0}return this.Data.YOffset=0,this.ResetReportSelectStatus(),this.SortInfo.Field=n.Field,this.SortInfo.Sort=n.Sort,this.Draw(),this.DelayUpdateStockData(),!0},this.OnClickHeader=function(t,e){var a=this,i=t.Header;if(i.Column&&i.Column.EnablePopupHeaderMenu)return void this.PopupHeaderMenu(t,e);if(i.Column&&(1==i.Column.Sort||2==i.Column.Sort)){var r=i.Index,n={Field:this.SortInfo.Field,Sort:this.SortInfo.Sort},o=i.Column.SortType;if(n.Field!=r)n.Field=r,n.Sort=o[0];else if(1==o.length)n.Sort=o[0];else for(var s=0;s<o.length;++s)if(n.Sort==o[s]){n.Sort=o[(s+1)%o.length];break}if(1==i.Column.Sort||2==i.Column.Sort){if(0==n.Sort){this.Data.Data=[];for(var s=0;s<this.SourceData.Data.length;++s)this.Data.Data.push(this.SourceData.Data[s])}else if(1==i.Column.Sort){var l=this.GetEventCallback(Kn.ON_REPORT_LOCAL_SORT);if(l&&l.Callback){var h={Column:i.Column,SortInfo:n,SymbolList:this.Data.Data,Result:null};l.Callback(l,h,this),Array.isArray(h.Result)&&(this.Data.Data=h.Result)}else this.Data.Data.sort(function(t,e){return a.LocalSort(t,e,i.Column,n.Sort)})}else if(2==i.Column.Sort){if(!we.IsNonEmptyArray(this.Data.Data))return;return this.SortInfo.Field=n.Field,this.SortInfo.Sort=n.Sort,this.Data.YOffset=0,this.ResetReportSelectStatus(),void this.RequestStockSortData(i.Column,n.Field,n.Sort)}this.Data.YOffset=0,this.ResetReportSelectStatus(),this.SortInfo.Field=n.Field,this.SortInfo.Sort=n.Sort,this.Draw(),this.DelayUpdateStockData()}}},this.PopupHeaderMenu=function(t,e){var a=this;if(this.JSPopMenu&&this.GetEventCallback){var i=this.GetEventCallback(Kn.ON_CREATE_REPORT_HEADER_MENU);if(i&&i.Callback){var r=t.Header,n=r.Column,o={Menu:null,Position:on.POSITION_ID.DROPDOWN_MENU_ID};o.ClickCallback=function(t){a.OnClickHeaderMenu(n,t)};var s={MenuData:o,Column:n,Index:r.Index,PreventDefault:!1,e:e};i.Callback(i,s,this),1!=s.PreventDefault&&o.Menu&&this.PopupMenuByDrapdown(o,r.Rect)}}},this.PopupMenuByDrapdown=function(t,e){if(this.JSPopMenu){var a=C(),i={Left:e.Left/a,Right:e.Right/a,Bottom:e.Bottom/a,Top:e.Top/a};i.Width=i.Right-i.Left,i.Height=i.Bottom-i.Top;var r=this.UIElement.getBoundingClientRect(),n=m(),o=r.left+n.Left,s=r.top+n.Top;i.Left+=o,i.Right+=o,i.Top+=s,i.Bottom+=s,this.JSPopMenu.CreatePopMenu(t),this.JSPopMenu.PopupMenuByDrapdown(i)}},this.GetTabPopMenu=function(t){var e=[];if(we.IsNonEmptyArray(t.ArySubMenu))for(var a=0;a<t.ArySubMenu.length;++a){var i=t.ArySubMenu[a],r={Name:i.Title,Data:{ID:i.CommandID,Args:[i.ID]}};i.Text&&(r.Text=i.Text),e.push(r)}return e},this.PopupTabMenu=function(t,e,a){if(this.JSPopMenu){var i=e.Rect,r=C(),n={Left:i.Left/r,Right:i.Right/r,Bottom:i.Bottom/r,Top:i.Top/r};n.Width=n.Right-n.Left,n.Height=n.Bottom-n.Top;var o=this.UIElement.getBoundingClientRect(),s=m(),l=o.left+s.Left,h=o.top+s.Top;n.Left+=l,n.Right+=l,n.Top+=h,n.Bottom+=h,this.JSPopMenu.CreatePopMenu(t),this.JSPopMenu.PopupMenuByTab(n),a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation()}},this.OnClickTab=function(t,e){var a=this;if(t.Tab){var i=!1,r=C(),n=(e.clientX-this.UIElement.getBoundingClientRect().left)*r,o=(e.clientY,this.UIElement.getBoundingClientRect().top,{Left:this.UIElement.getBoundingClientRect().left,Top:this.UIElement.getBoundingClientRect().top});if(t.Tab.IsMenu){var s={Menu:this.GetTabPopMenu(t.Tab),Position:on.POSITION_ID.TAB_MENU_ID};s.ClickCallback=function(e){a.OnClickTabPopMenu(t,e)};var l=this.GetEventCallback(Kn.ON_CLICK_REPORT_TABMENU);if(l&&l.Callback){var h={MenuData:s,Tab:t,PreventDefault:!1,e:e};if(l.Callback(l,h,this),1==h.PreventDefault)return}this.PopupTabMenu(s,t.Tab,e)}else{var l=this.GetEventCallback(Kn.ON_CLICK_REPORT_TAB);if(l&&l.Callback){var h={Data:t,IsSide:{X:n,Y:n},UIElement:o,e:e,Redraw:i,PreventDefault:!1};if(l.Callback(l,h,this),we.IsBool(h.Redraw)&&(i=h.Redraw),1==h.PreventDefault)return}t.Tab.CommandID==Qn.CMD_REPORT_CHANGE_BLOCK_ID&&(this.ExecuteMenuCommand(t.Tab.CommandID,[t.Tab.ID]),this.SetSelectedTab(t.Index),i=!0)}i&&this.Draw()}},this.OnClickTabPopMenu=function(t,e){Xn.Chart.Log("[JSReportChartContainer::OnClickTabPopMenu] ",t,e);var a=e.Data.ID,i=e.Data.Args,r=this.GetEventCallback(Kn.ON_MENU_COMMAND);if(r&&r.Callback){var e={PreventDefault:!1,CommandID:a,Args:i,SrcData:e,TabData:t};if(r.Callback(r,e,this),e.PreventDefault)return}this.ExecuteMenuCommand(a,i),this.SetSelectedTab(t.Index),this.Draw()},this.OnClickHeaderMenu=function(t,e){Xn.Chart.Log("[JSReportChartContainer::OnClickHeaderMenu] ",t,e);var a=e.Data.ID,i=e.Data.Args,r=this.GetEventCallback(Kn.ON_MENU_COMMAND);if(r&&r.Callback){var e={PreventDefault:!1,CommandID:a,Args:i,SrcData:e,MenuData:t};if(r.Callback(r,e,this),e.PreventDefault)return}this.ExecuteMenuCommand(a,i)},this.ExecuteMenuCommand=function(t,e){Xn.Chart.Log("[JSReportChartContainer::ExecuteMenuCommand] cmdID=, aryArgs=",t,e);var a=null,i=null;switch(we.IsNonEmptyArray(e)&&(i=e[0],we.IsNumber(e[0])&&(a=e[0])),t){case Qn.CMD_REPORT_CHANGE_BLOCK_ID:i&&this.ChangeSymbol(i);break;case Qn.CMD_REPORT_COLUMN_SORT_ID:we.IsNumber(a)&&we.IsNumber(e[1])&&this.SortColumn(a,e[1]);break;case Qn.CMD_REPORT_COLUMN_MOVE_ID:if(we.IsNumber(a)&&we.IsNumber(e[1])){var r=a,n=a+e[1];this.SwapColumn(r,n,{Redraw:!0})}break;case Qn.CMD_REPORT_COLUMN_DEL_ID:we.IsNumber(a)&&this.DeleteColumn(a,{Redraw:!0})}},this.SwapColumn=function(t,e,a){var i=this.GetReportChart();i&&i.SwapColumn(t,e)&&a&&a.Redraw&&(this.SetSizeChange(!0),this.Draw())},this.DeleteColumn=function(t,e){var a=this.GetReportChart();a&&a.DeleteColumn(t)&&e&&e.Redraw&&(this.SetSizeChange(!0),this.Draw())},this.LocalSort=function(t,e,a,i){switch(a.Type){case $o.SYMBOL_ID:case $o.NAME_ID:return this.LocalStringSort(t,e,a,i);case $o.NAME_EX_ID:return this.LocalNameExSort(t,e,a,i);case $o.PRICE_ID:case $o.VOL_ID:case $o.INCREASE_ID:case $o.UPDOWN_ID:case $o.BUY_PRICE_ID:case $o.SELL_PRICE_ID:case $o.AMOUNT_ID:case $o.BUY_VOL_ID:case $o.SELL_VOL_ID:case $o.YCLOSE_ID:case $o.OPEN_ID:case $o.HIGH_ID:case $o.LOW_ID:case $o.AVERAGE_PRICE_ID:case $o.OUTSTANDING_SHARES_ID:case $o.TOTAL_SHARES_ID:case $o.CIRC_MARKET_VALUE_ID:case $o.MARKET_VALUE_ID:case $o.EXCHANGE_RATE_ID:case $o.AMPLITUDE_ID:case $o.LIMIT_HIGH_ID:case $o.LIMIT_LOW_ID:case $o.FUTURES_POSITION_ID:case $o.FUTURES_CLOSE_ID:case $o.FUTURES_YCLOSE_ID:case $o.FUTURES_OPEN_POSITION_ID:case $o.FUTURES_CLOSE_POSITION_ID:case $o.VOL_IN_ID:case $o.VOL_OUT_ID:case $o.DATE_ID:case es.RESERVE_NUMBER1_ID:case es.RESERVE_NUMBER2_ID:case es.RESERVE_NUMBER3_ID:case es.RESERVE_NUMBER4_ID:case es.RESERVE_NUMBER5_ID:case es.RESERVE_NUMBER6_ID:case es.RESERVE_NUMBER7_ID:case es.RESERVE_NUMBER8_ID:case es.RESERVE_NUMBER9_ID:case es.RESERVE_NUMBER10_ID:return this.LocalNumberSort(t,e,a,i);case $o.CUSTOM_NUMBER_TEXT_ID:return this.LoacCustomNumberSort(t,e,a,i);case $o.CUSTOM_STRING_TEXT_ID:return this.LoacCustomStringSort(t,e,a,i);case $o.CUSTOM_DATETIME_TEXT_ID:return this.LoacCustomDateTimeSort(t,e,a,i);default:return 0}},this.GetStockExtendData=function(t,e){if(we.IsNumber(e.DataIndex)){if(e.DataIndex<0)return null;var a=this.GetStockData(t);return a&&a.ExtendData?a.ExtendData[e.DataIndex]:null}if(we.IsNumber(e.BlockIndex)){if(e.BlockIndex<0)return null;var a=this.GetBlockData(t);return a?a[e.BlockIndex]:null}return null},this.LocalNameExSort=function(t,e,a,i){var r=this.GetStockData(t),n=this.GetStockData(e),o="",s="";return 2==i&&(o="ååååå",s="ååååå"),r&&r.Name&&(o=r.Name),n&&n.Name&&(s=n.Name),1==i?s<o?-1:s<o?1:0:o<s?-1:o>s?1:0},this.LocalStringSort=function(t,e,a,i){var r=this.GetStockData(t),n=this.GetStockData(e),o="",s="";2==i&&(o="ååååå",s="ååååå");var l=ts.get(a.Type);return r&&r[l]&&(o=r[l]),n&&n[l]&&(s=n[l]),1==i?s<o?-1:s<o?1:0:o<s?-1:o>s?1:0},this.LocalNumberSort=function(t,e,a,i){var r=this.GetStockData(t),n=this.GetStockData(e),o=-99999999999999,s=-99999999999999;2==i&&(o=s=99999999999999);var l=ts.get(a.Type);return r&&we.IsNumber(r[l])&&(o=r[l]),n&&we.IsNumber(n[l])&&(s=n[l]),1==i?s<o?-1:s<o?1:0:o<s?-1:o>s?1:0},this.LoacCustomNumberSort=function(t,e,a,i){var r=-99999999999999,n=-99999999999999;2==i&&(r=n=99999999999999);var o=this.GetStockExtendData(t,a);we.IsNumber(o)&&(r=o);var o=this.GetStockExtendData(e,a);return we.IsNumber(o)&&(n=o),1==i?n<r?-1:n<r?1:0:r<n?-1:r>n?1:0},this.LoacCustomDateTimeSort=function(t,e,a,i){var r=-99999999999999,n=-99999999999999;2==i&&(r=n=99999999999999);var o=this.GetStockExtendData(t,a);we.IsNumber(o)&&(r=o);var o=this.GetStockExtendData(e,a);return we.IsNumber(o)&&(n=o),1==i?n<r?-1:n<r?1:0:r<n?-1:r>n?1:0},this.LoacCustomStringSort=function(t,e,a,i){var r="",n="";2==i&&(n=r="ååååå");var o=this.GetStockExtendData(t,a);we.IsString(o)&&(r=o);var o=this.GetStockExtendData(e,a);return we.IsString(o)&&(n=o),1==i?n<r?-1:n<r?1:0:r<n?-1:r>n?1:0},this.RequestStockSortData=function(t,e,a){var i=this.ChartPaint[0];if(i){var r=this,n=this.Data.YOffset,o=i.GetPageSize(),s=n+o;if(s>=this.Data.Data.length&&(s=this.Data.Data.length-1),this.NetworkFilter){var l={Name:"JSDealChartContainer::RequestStockSortData",Explain:"æ¥ä»·åè¡¨è¡ç¥¨æåºæ°æ®",Request:{Data:{range:{start:n,end:s,count:this.Data.Data.length},column:{name:t.Title,type:t.Type,index:e,ID:t.ID},sort:a,symbol:this.Symbol,name:this.Name,pageSize:o}},Self:this,PreventDefault:!1};if(i.FixedRowCount>0&&1==i.FixedRowData.Type){for(var h=[],u=0;u<i.FixedRowData.Symbol.length;++u){var C=i.FixedRowData.Symbol[u];C&&h.push(C)}l.Request.FixedSymbol=h}if(this.NetworkFilter(l,function(t){r.RecvStockSortData(t),r.AutoUpdate()}),1==l.PreventDefault)return}}},this.RecvStockSortData=function(t){var e=[];if(we.IsNonEmptyArray(t.data))for(var a=0;a<t.data.length;++a){var i=t.data[a],r=i[0];if(r){var n=null;this.MapStockData.has(r)?n=this.MapStockData.get(r):(n=new Br,n.OriginalSymbol=r,n.Symbol=this.GetSymbolNoSuffix(r),this.MapStockData.set(r,n)),this.ReadStockJsonData(n,i),e.push(r)}}if(we.IsNonEmptyArray(t.index))for(var a=0;a<t.index.length;++a){var o=t.index[a],s=e[a],l=this.Data.Data[o];s!=l&&(this.Data.Data[o]=s)}if(t.Virtual){var i=t.Virtual;we.IsNumber(i.Count)&&(this.Data.Virtual.Count=i.Count)}this.ChartPaint[0]&&this.Draw()},this.RequestVirtualStockData=function(){var t=this.ChartPaint[0];if(t){var e=this,a=this.Data.YOffset,i=t.GetPageSize(),r=a+i,n=t.GetAllRowCount();if(r>=n&&(r=n-1),this.NetworkFilter){var o={range:{start:a,end:r,count:t.GetAllRowCount()},column:null,sort:0,symbol:this.Symbol,name:this.Name,pageSize:i};if(this.SortInfo&&this.SortInfo.Field>=0&&this.SortInfo.Sort>0){var s=t.Column[this.SortInfo.Field];o.column={name:s.Title,type:s.Type,index:this.SortInfo.Field,ID:s.ID},o.sort=this.SortInfo.Sort}var l={Name:"JSDealChartContainer::RequestVirtualStockData",Explain:"æ¥ä»·åè¡¨è¡ç¥¨æ°æ®(èæè¡¨æ ¼)",Request:{Data:o},Self:this,PreventDefault:!1};if(t.FixedRowCount>0&&1==t.FixedRowData.Type){for(var h=[],u=0;u<t.FixedRowData.Symbol.length;++u){var C=t.FixedRowData.Symbol[u];C&&h.push(C)}l.Request.FixedSymbol=h}this.NetworkFilter(l,function(t){e.RecvStockSortData(t),e.AutoUpdate()}),l.PreventDefault}}},this.ShowPageInfo=function(t){var e=this.ChartPaint[1];return!!e&&(e.IsShow=t,!0)},this.DrawTooltip=function(t){if(this.GetExtraCanvas){if(!this.TooltipCanvas){var e=this.GetExtraCanvas(Pr.TooltipCursorCanvasKey);if(!e)return;this.TooltipCanvas=e.Canvas}this.TooltipCanvas&&(this.ClearCanvas(this.TooltipCanvas),this.ChartTooltip&&t&&t.Data&&(this.ChartTooltip.Canvas=this.TooltipCanvas,this.ChartTooltip.Point={X:t.X,Y:t.Y},this.ChartTooltip.Data=t.Data.Data,this.ChartTooltip.Draw()))}}}function Gr(){this.ChartBorder,this.Canvas,this.BorderLine=null,this.BorderColor=So.Report.BorderColor,this.LogoTextColor=So.FrameLogo.TextColor,this.LogoTextFont=So.FrameLogo.Font,this.ReloadResource=function(t){this.BorderColor=So.Report.BorderColor,this.LogoTextColor=So.FrameLogo.TextColor,this.LogoTextFont=So.FrameLogo.Font},this.Draw=function(){var t=p(this.ChartBorder.GetLeft()),e=p(this.ChartBorder.GetTop()),a=p(this.ChartBorder.GetRight()),i=p(this.ChartBorder.GetBottom()),r=a-t,n=i-e;we.IsNumber(this.BorderLine)?(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),(1&this.BorderLine)>0&&(this.Canvas.moveTo(t,e),this.Canvas.lineTo(a,e)),(2&this.BorderLine)>0&&(this.Canvas.moveTo(t,i),this.Canvas.lineTo(a,i)),(4&this.BorderLine)>0&&(this.Canvas.moveTo(t,e),this.Canvas.lineTo(t,i)),(8&this.BorderLine)>0&&(this.Canvas.moveTo(a,e),this.Canvas.lineTo(a,i)),this.Canvas.stroke()):(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(t,e,r,n))},this.DrawLogo=function(){var t=So.FrameLogo.Text;if(we.IsString(t)){this.Canvas.fillStyle=this.LogoTextColor,this.Canvas.font=this.LogoTextFont,this.Canvas.textAlign="right",this.Canvas.textBaseline="bottom";var e=this.ChartBorder.GetRight()-30,a=this.ChartBorder.GetBottom()-5;this.Canvas.fillText(t,e,a)}}}function kr(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ChartReport",this.UIElement,this.IsDrawFirst=!1,this.GetEventCallback,this.GetStockDataCallback,this.GetFlashBGDataCallback,this.GetBlockDataCallback,this.Data,this.FixedRowData,this.SortInfo,this.FixedColumn=2,this.FixedRowCount=0,this.IsShowHeader=!0,this.SizeChange=!0,this.SelectedModel=0,this.SelectedRow=-1,this.SelectedFixedRow=-1,this.IsDrawBorder=1,this.MultiSelectModel=0,this.MultiSelectedRow=[],this.ShowSymbol=[],this.DragRow,this.Tab,this.VScrollbar,this.GlobalOption,this.TextOverflowStyle=0,this.UpColor=So.Report.UpTextColor,this.DownColor=So.Report.DownTextColor,this.UnchagneColor=So.Report.UnchagneTextColor,this.BorderColor=So.Report.BorderColor,this.SelectedColor=So.Report.SelectedColor,this.HeaderFontConfig={Size:So.Report.Header.Font.Size,Name:So.Report.Header.Font.Name},this.HeaderColor=So.Report.Header.Color,this.HeaderMergin={Left:So.Report.Header.Mergin.Left,Right:So.Report.Header.Mergin.Right,Top:So.Report.Header.Mergin.Top,Bottom:So.Report.Header.Mergin.Bottom},this.SortConfig={Size:So.Report.SortIcon.Size,Family:So.Report.SortIcon.Family,Arrow:So.Report.SortIcon.Arrow.slice(),Color:So.Report.SortIcon.Color.slice(),Margin:{Left:So.Report.SortIcon.Margin.Left,Bottom:So.Report.SortIcon.Margin.Bottom}},this.ItemFontConfig={Size:So.Report.Item.Font.Size,Name:So.Report.Item.Font.Name},this.ItemFixedFontConfg={Size:So.Report.FixedItem.Font.Size,Name:So.Report.FixedItem.Font.Name},this.ItemMergin={Left:So.Report.Item.Mergin.Left,Right:So.Report.Item.Mergin.Right,Top:So.Report.Item.Mergin.Top,Bottom:So.Report.Item.Mergin.Bottom},this.BarMergin={Top:So.Report.Item.BarMergin.Top,Left:So.Report.Item.BarMergin.Left,Right:So.Report.Item.BarMergin.Right,Bottom:So.Report.Item.BarMergin.Bottom},this.LimitDrawType=0,this.LimitBorderColor=So.Report.LimitBorder.Color,this.LimitUpBGColor=So.Report.LimitColor.UpColor,this.LimitDownBGColor=So.Report.LimitColor.DownColor,this.LimitTextColor=So.Report.LimitColor.TextColor,this.LimitMergin={Top:So.Report.LimitBorder.Mergin.Top,Left:So.Report.LimitBorder.Mergin.Left,Right:So.Report.LimitBorder.Mergin.Right,Bottom:So.Report.LimitBorder.Mergin.Bottom},this.DragRowColor=So.Report.DragRow.Color,this.DragRowTextColor=So.Report.DragRow.TextColor,this.DragMoveRowColor=So.Report.DragRow.MoveRowColor,this.DragSrcRowColor=So.Report.DragRow.SrcRowColor,this.CloseLineConfig={CloseColor:So.Report.CloseLine.CloseColor,YCloseColor:So.Report.CloseLine.YCloseColor,AreaColor:So.Report.CloseLine.AreaColor},this.KLineConfig={UpColor:So.Report.KLine.UpColor,DownColor:So.Report.KLine.DownColor,UnchagneColor:So.Report.KLine.UnchagneColor,DataWidth:So.Report.KLine.DataWidth,DistanceWidth:So.Report.KLine.DistanceWidth},this.CheckBoxConfig=I(So.Report.CheckBox),this.LinkConfig=I(So.Report.Link),this.ProgressBarConfig=I(So.Report.ProgressBar),this.ButtonConfig=I(So.Report.Button),this.ItemSymbolFontConfig={Size:So.Report.Item.SymbolFont.Size,Name:So.Report.Item.SymbolFont.Name},this.ItemNameFontConfg={Size:So.Report.Item.NameFont.Size,Name:So.Report.Item.NameFont.Name},this.NameSymbolV2Config=I(So.Report.NameSymbolV2),this.HeaderFont=12*C()+"px å¾®è½¯éé»",this.SortFont=null,this.ItemFont=15*C()+"px å¾®è½¯éé»",this.ItemFontHeight=0,this.ItemFixedFont=15*C()+"px å¾®è½¯éé»",this.ItemSymbolFont=12*C()+"px å¾®è½¯éé»",this.ItemNameFont=15*C()+"px å¾®è½¯éé»",this.ItemNameHeight=0,this.ItemSymbolHeight=0,this.NameSymbolFont={Symbol:null,Name:null},this.RowCount=0,this.HeaderHeight=0,this.FixedRowHeight=0,this.RowHeight=0,this.ItemTextLines=1,this.BottomToolbarHeight=0,this.IsShowAllColumn=!1,this.DevicePixelRatio=C(),this.Column=[{Type:$o.INDEX_ID,Title:"åºå·",TextAlign:"center",Width:null,TextColor:So.Report.FieldColor.Index,MaxText:"8888"},{Type:$o.SYMBOL_ID,Title:"ä»£ç ",TextAlign:"left",Width:null,TextColor:So.Report.FieldColor.Symbol,MaxText:"888888"},{Type:$o.NAME_ID,Title:"åç§°",TextAlign:"left",Width:null,TextColor:So.Report.FieldColor.Name,MaxText:"ææææ"},{Type:$o.INCREASE_ID,Title:"æ¶¨å¹%",TextAlign:"right",Width:null,MaxText:"-888.88"}],this.RectClient={},this.TooltipRect=[],this.ButtonRect=[],this.LastMouseStatus,this.ReloadResource=function(t){this.DevicePixelRatio=C(),this.UpColor=So.Report.UpTextColor,this.DownColor=So.Report.DownTextColor,this.UnchagneColor=So.Report.UnchagneTextColor,this.BorderColor=So.Report.BorderColor,this.SelectedColor=So.Report.SelectedColor,this.HeaderFontConfig={Size:So.Report.Header.Font.Size,Name:So.Report.Header.Font.Name},this.HeaderColor=So.Report.Header.Color,this.HeaderMergin={Left:So.Report.Header.Mergin.Left,Right:So.Report.Header.Mergin.Right,Top:So.Report.Header.Mergin.Top,Bottom:So.Report.Header.Mergin.Bottom},this.ItemFontConfig={Size:So.Report.Item.Font.Size,Name:So.Report.Item.Font.Name},this.ItemMergin={Left:So.Report.Item.Mergin.Left,Right:So.Report.Item.Mergin.Right,Top:So.Report.Item.Mergin.Top,Bottom:So.Report.Item.Mergin.Bottom},this.BarMergin={Top:So.Report.Item.BarMergin.Top,Left:So.Report.Item.BarMergin.Left,Right:So.Report.Item.BarMergin.Right,Bottom:So.Report.Item.BarMergin.Bottom},this.LimitBorderColor=So.Report.LimitBorder.Color,this.LimitMergin={Top:So.Report.LimitBorder.Mergin.Top,Left:So.Report.LimitBorder.Mergin.Left,Right:So.Report.LimitBorder.Mergin.Right,Bottom:So.Report.LimitBorder.Mergin.Bottom},this.SortConfig={Size:So.Report.SortIcon.Size,Family:So.Report.SortIcon.Family,Arrow:So.Report.SortIcon.Arrow.slice(),Color:So.Report.SortIcon.Color.slice(),Margin:{Left:So.Report.SortIcon.Margin.Left,Bottom:So.Report.SortIcon.Margin.Bottom}};for(var e=0;e<this.Column.length;++e){var a=this.Column[e];a.Type==$o.INDEX_ID?a.TextColor=So.Report.FieldColor.Index:a.Type==$o.SYMBOL_ID?a.TextColor=So.Report.FieldColor.Symbol:a.Type==$o.NAME_ID?a.TextColor=So.Report.FieldColor.Name:a.Type==$o.VOL_ID?a.TextColor=So.Report.FieldColor.Vol:a.Type==$o.BUY_VOL_ID?a.TextColor=So.Report.FieldColor.Vol:a.Type==$o.SELL_VOL_ID?a.TextColor=So.Report.FieldColor.Vol:a.Type==$o.AMOUNT_ID?a.TextColor=So.Report.FieldColor.Amount:a.Type==$o.VOL_IN_ID?a.TextColor=So.Report.DownTextColor:a.Type==$o.VOL_OUT_ID?a.TextColor=So.Report.UpTextColor:a.TextColor=So.Report.FieldColor.Text}this.Tab&&this.Tab.ReloadResource(t),this.VScrollbar&&this.VScrollbar.ReloadResource(t),this.CheckBoxConfig=I(So.Report.CheckBox),this.LinkConfig=I(So.Report.Link),this.ProgressBarConfig=I(So.Report.ProgressBar)},this.SetColumn=function(t){if(we.IsNonEmptyArray(t)){this.Column=[];for(var e=0;e<t.length;++e){var a=t[e],i=this.GetDefaultColunm(a.Type);if(i){if(a.Title&&(i.Title=a.Title),a.TextAlign&&(i.TextAlign=a.TextAlign),a.TextColor&&(i.TextColor=a.TextColor),a.HeaderColor&&(i.HeaderColor=a.HeaderColor),a.MaxText&&(i.MaxText=a.MaxText),a.MaxText2&&(i.MaxText=a.MaxText2),we.IsNumber(a.Space)&&(i.Space=a.Space),a.ID&&(i.ID=a.ID),a.FullColBGColor&&(i.FullColBGColor=a.FullColBGColor),a.HeaderBGColor&&(i.HeaderBGColor=a.HeaderBGColor),we.IsNumber(a.Sort)&&(i.Sort=a.Sort),we.IsNumber(a.FixedWidth)&&(i.FixedWidth=a.FixedWidth),we.IsBool(a.EnableDragWidth)&&(i.EnableDragWidth=a.EnableDragWidth),we.IsBool(a.IsDrawCallback)&&(i.IsDrawCallback=a.IsDrawCallback),we.IsNumber(a.FloatPrecision)&&(i.FloatPrecision=a.FloatPrecision),we.IsNumber(a.ColorType)?i.ColorType=a.ColorType:i.IsDrawCallback=!1,a.Icon&&(i.Icon=a.Icon),we.IsBool(a.EnablePopupHeaderMenu)&&(i.EnablePopupHeaderMenu=a.EnablePopupHeaderMenu),1!=a.Sort&&2!=a.Sort||(i.SortType=[1,2],we.IsNonEmptyArray(a.SortType)&&(i.SortType=a.SortType.slice())),a.Type==$o.CUSTOM_STRING_TEXT_ID){if(!we.IsNumber(a.DataIndex)&&!we.IsNumber(a.BlockIndex))continue;i.FormatType=0,we.IsNumber(a.DataIndex)&&(i.DataIndex=a.DataIndex),we.IsNumber(a.BlockIndex)&&(i.BlockIndex=a.BlockIndex),we.IsNumber(a.FormatType)&&(i.FormatType=a.FormatType)}else if(a.Type==$o.CUSTOM_NUMBER_TEXT_ID){if(!we.IsNumber(a.DataIndex)&&!we.IsNumber(a.BlockIndex))continue;we.IsNumber(a.DataIndex)&&(i.DataIndex=a.DataIndex),we.IsNumber(a.BlockIndex)&&(i.BlockIndex=a.BlockIndex),i.Decimal=2,i.FormatType=0,i.ColorType=0,we.IsNumber(a.Decimal)&&(i.Decimal=a.Decimal),we.IsNumber(a.FormatType)&&(i.FormatType=a.FormatType),we.IsNumber(a.ColorType)&&(i.ColorType=a.ColorType)}else if(a.Type==$o.CUSTOM_DATETIME_TEXT_ID){if(!we.IsNumber(a.DataIndex)&&!we.IsNumber(a.BlockIndex))continue;we.IsNumber(a.DataIndex)&&(i.DataIndex=a.DataIndex),we.IsNumber(a.BlockIndex)&&(i.BlockIndex=a.BlockIndex),i.FormatType=0,i.ValueType=0,we.IsNumber(a.FormatType)&&(i.FormatType=a.FormatType),we.IsNumber(a.ValueType)&&(i.FormatType=a.ValueType)}else if(a.Type==$o.CUSTOM_CHECKBOX_ID){if(!we.IsNumber(a.DataIndex)&&!we.IsNumber(a.BlockIndex))continue;we.IsNumber(a.DataIndex)&&(i.DataIndex=a.DataIndex),we.IsNumber(a.BlockIndex)&&(i.BlockIndex=a.BlockIndex),a.CheckBox?i.CheckBox=I(a.CheckBox):i.CheckBox=this.CheckBoxConfig}else if(a.Type==$o.CUSTOM_BUTTON_ID){if(!we.IsNumber(a.DataIndex)&&!we.IsNumber(a.BlockIndex))continue;we.IsNumber(a.DataIndex)&&(i.DataIndex=a.DataIndex),we.IsNumber(a.BlockIndex)&&(i.BlockIndex=a.BlockIndex),a.Button?i.Button=I(a.Button):i.Button=this.ButtonConfig}else if(a.Type==$o.CUSTOM_PROGRESS_ID){if(!we.IsNumber(a.DataIndex)&&!we.IsNumber(a.BlockIndex))continue;we.IsNumber(a.DataIndex)&&(i.DataIndex=a.DataIndex),we.IsNumber(a.BlockIndex)&&(i.BlockIndex=a.BlockIndex),a.ProgressBar?i.ProgressBar=I(a.ProgressBar):i.ProgressBar=this.ProgressBarConfig}else if(this.IsReserveProgressBarColumn(a.Type))a.ProgressBar?i.ProgressBar=I(a.ProgressBar):i.ProgressBar=this.ProgressBarConfig;else if(a.Type==$o.CUSTOM_LINK_ID){if(!we.IsNumber(a.DataIndex)&&!we.IsNumber(a.BlockIndex))continue;we.IsNumber(a.DataIndex)&&(i.DataIndex=a.DataIndex),we.IsNumber(a.BlockIndex)&&(i.BlockIndex=a.BlockIndex),a.Link?i.Link=I(a.Link):i.Link=this.LinkConfig}else a.Type==$o.CUSTOM_ICON_ID||(a.Type==$o.CLOSE_LINE_ID?we.IsBool(a.IsDrawArea)&&(i.IsDrawArea=a.IsDrawArea):a.Type==$o.TIME_ID?we.IsNumber(a.ValueType)&&(i.ValueType=a.ValueType):a.Type==$o.DATE_ID&&we.IsNumber(a.FormatType)&&(i.FormatType=a.FormatType));this.Column.push(i)}}}},this.SwapColumn=function(t,e){if(!we.IsNumber(t)||!we.IsNumber(e))return!1;var a=this.Column.length;if(t<0||t>=a)return!1;if(e<0||e>=a)return!1;if(t!=e){var i=this.Column[t];return this.Column[t]=this.Column[e],this.Column[e]=i,!0}},this.DeleteColumn=function(t){return!!we.IsNonEmptyArray(this.Column)&&(!(t<0||t>=this.Column.length)&&(this.Column.splice(t,1),!0))},this.GetXScrollPos=function(){return this.Data.XOffset},this.GetXScrollRange=function(){var t=this.Column.length-this.FixedColumn-3;return t<0?0:t},this.GetYScrollRange=function(){return we.IsNonEmptyArray(this.Data.Data)?this.GetAllRowCount()-this.RowCount:0},this.GetDefaultColunm=function(t){for(var e=[{Type:$o.INDEX_ID,Title:"åºå·",TextAlign:"center",Width:null,TextColor:So.Report.FieldColor.Index,MaxText:"8888"},{Type:$o.SYMBOL_ID,Title:"ä»£ç ",TextAlign:"left",Width:null,TextColor:So.Report.FieldColor.Symbol,MaxText:"888888"},{Type:$o.NAME_ID,Title:"åç§°",TextAlign:"left",Width:null,TextColor:So.Report.FieldColor.Name,MaxText:"ææææ0"},{Type:$o.NAME_EX_ID,Title:"åç§°",TextAlign:"left",Width:null,TextColor:So.Report.FieldColor.Name,MaxText:"ææææææ"},{Type:$o.SYMBOL_NAME_ID,Title:"è¡ç¥¨åç§°",TextAlign:"left",Width:null,TextColor:So.Report.FieldColor.Name,MaxText:"ææææ0"},{Type:$o.SYMBOL_NAME_V2_ID,Title:"åç§°/ä»£ç ",TextAlign:"left",Width:null,TextColor:So.Report.NameSymbolV2.Name.Color,MaxText:"ææææ*",MaxText2:"999999",Space:5,TextColor2:So.Report.NameSymbolV2.Symbol.Color},{Type:$o.INCREASE_ID,Title:"æ¶¨å¹%",TextAlign:"right",Width:null,MaxText:"-888.88"},{Type:$o.PRICE_ID,Title:"ç°ä»·",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:$o.UPDOWN_ID,Title:"æ¶¨è·",TextAlign:"right",Width:null,MaxText:"-888.88"},{Type:$o.AMPLITUDE_ID,Title:"æ¯å¹%",TextAlign:"right",Width:null,MaxText:"888.88"},{Type:$o.BUY_PRICE_ID,Title:"ä¹°ä»·",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:$o.SELL_PRICE_ID,Title:"åä»·",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:$o.AVERAGE_PRICE_ID,Title:"åä»·",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:$o.OPEN_ID,Title:"ä»å¼",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:$o.HIGH_ID,Title:"æé«",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:$o.LOW_ID,Title:"æä½",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:$o.YCLOSE_ID,Title:"æ¨æ¶",TextAlign:"right",Width:null,MaxText:"88888.88"},{Type:$o.VOL_ID,Title:"æ»é",TextAlign:"right",TextColor:So.Report.FieldColor.Vol,Width:null,MaxText:"8888.8æ"},{Type:$o.AMOUNT_ID,Title:"æ»éé¢",TextAlign:"right",TextColor:So.Report.FieldColor.Amount,Width:null,MaxText:"8888.8æ"},{Type:$o.EXCHANGE_RATE_ID,Title:"æ¢æ%",TextAlign:"right",TextColor:So.Report.FieldColor.Text,Width:null,MaxText:"88.88æ"},{Type:$o.OUTSTANDING_SHARES_ID,Title:"æµéè¡æ¬",TextAlign:"right",TextColor:So.Report.FieldColor.Text,Width:null,MaxText:"8888.8æ"},{Type:$o.TOTAL_SHARES_ID,Title:"æ»è¡æ¬",TextAlign:"right",TextColor:So.Report.FieldColor.Text,Width:null,MaxText:"8888.8æ"},{Type:$o.CIRC_MARKET_VALUE_ID,Title:"æµéå¸å¼",TextAlign:"right",TextColor:So.Report.FieldColor.Text,Width:null,MaxText:"8888.8æ"},{Type:$o.MARKET_VALUE_ID,Title:"æ»å¸å¼",TextAlign:"right",TextColor:So.Report.FieldColor.Text,Width:null,MaxText:"8888.8æ"},{Type:$o.VOL_IN_ID,Title:"åç",TextAlign:"right",TextColor:So.Report.DownTextColor,Width:null,MaxText:"8888.8æ"},{Type:$o.VOL_OUT_ID,Title:"å¤ç",TextAlign:"right",TextColor:So.Report.UpTextColor,Width:null,MaxText:"8888.8æ"},{Type:$o.CLOSE_LINE_ID,Title:"èµ°å¿",TextAlign:"center",TextColor:So.Report.CloseLineColor,Width:null,MaxText:"88888.88888"},{Type:$o.BUY_VOL_ID,Title:"ä¹°é",TextAlign:"right",TextColor:So.Report.FieldColor.Vol,Width:null,MaxText:"8888.8æ"},{Type:$o.SELL_VOL_ID,Title:"åé",TextAlign:"right",TextColor:So.Report.FieldColor.Vol,Width:null,MaxText:"8888.8æ"},{Type:$o.CUSTOM_STRING_TEXT_ID,Title:"èªå®ä¹",TextAlign:"center",Width:null,TextColor:So.Report.FieldColor.Text,MaxText:"æææææ"},{Type:$o.CUSTOM_NUMBER_TEXT_ID,Title:"èªå®ä¹",TextAlign:"center",Width:null,TextColor:So.Report.FieldColor.Text,MaxText:"æææææ"},{Type:$o.CUSTOM_DATETIME_TEXT_ID,Title:"èªå®ä¹",TextAlign:"center",Width:null,TextColor:So.Report.FieldColor.Text,MaxText:"9999-99-99"},{Type:$o.CUSTOM_ICON_ID,Title:"  ",TextAlign:"left",FixedWidth:20,TextColor:So.Report.FieldColor.Text},{Type:$o.KLINE_ID,Title:"Kçº¿",TextAlign:"left",FixedWidth:50,TextColor:So.Report.FieldColor.Text},{Type:$o.TIME_ID,Title:"æ¶é´",TextAlign:"left",ValueType:0,TextColor:So.Report.FieldColor.Text,MaxText:"99:99:99.999"},{Type:$o.DATE_ID,Title:"æ¥æ",TextAlign:"left",FormatType:0,TextColor:So.Report.FieldColor.Text,MaxText:"9999-99-99"},{Type:$o.CHECKBOX_ID,Title:"",TextAlign:"center",FixedWidth:20*C()},{Type:$o.CUSTOM_CHECKBOX_ID,Title:"",TextAlign:"center",FixedWidth:20*C()},{Type:$o.CUSTOM_BUTTON_ID,Title:"",TextAlign:"center",FixedWidth:50*C()},{Type:$o.CUSTOM_PROGRESS_ID,Title:"è¿åº¦æ¡",TextAlign:"center",FixedWidth:100*C()},{Type:$o.CUSTOM_LINK_ID,Title:"é¾æ¥å°å",TextAlign:"center",MaxText:"æææææ"},{Type:$o.FUTURES_POSITION_ID,Title:"æä»é",TextAlign:"right",TextColor:So.Report.FieldColor.Vol,Width:null,MaxText:"8888888"},{Type:$o.FUTURES_CLOSE_ID,Title:"ç»ç®ä»·",TextAlign:"right",Width:null,MaxText:"8888888"},{Type:$o.FUTURES_YCLOSE_ID,Title:"æ¨ç»ç®ä»·",TextAlign:"right",Width:null,MaxText:"8888888"},{Type:$o.FUTURES_OPEN_POSITION_ID,Title:"å¼ä»é",TextAlign:"right",TextColor:So.Report.FieldColor.Text,Width:null,MaxText:"8888888"},{Type:$o.FUTURES_CLOSE_POSITION_ID,Title:"å¹³ä»é",TextAlign:"right",TextColor:So.Report.FieldColor.Text,Width:null,MaxText:"8888888"},{Type:$o.RISING_SPEED_1M_ID,Title:"æ¶¨é%",TextAlign:"right",Width:null,MaxText:"-888.88"},{Type:$o.RISING_SPEED_3M_ID,Title:"3åæ¶¨é%",TextAlign:"right",Width:null,MaxText:"-888.88"},{Type:$o.RISING_SPEED_5M_ID,Title:"5åæ¶¨é%",TextAlign:"right",Width:null,MaxText:"-888.88"},{Type:$o.RISING_SPEED_10M_ID,Title:"10åæ¶¨é%",TextAlign:"right",Width:null,MaxText:"-888.88"},{Type:$o.RISING_SPEED_15M_ID,Title:"15åæ¶¨é%",TextAlign:"right",Width:null,MaxText:"-888.88"},{Type:$o.RESERVE_NUMBER1_ID,Title:"æ°å¼1",TextAlign:"right",TextColor:So.Report.FieldColor.Text,MaxText:"9999.99",FloatPrecision:2},{Type:$o.RESERVE_NUMBER2_ID,Title:"æ°å¼2",TextAlign:"right",TextColor:So.Report.FieldColor.Text,MaxText:"9999.99",FloatPrecision:2},{Type:$o.RESERVE_NUMBER3_ID,Title:"æ°å¼3",TextAlign:"right",TextColor:So.Report.FieldColor.Text,MaxText:"9999.99",FloatPrecision:2},{Type:$o.RESERVE_NUMBER4_ID,Title:"æ°å¼4",TextAlign:"right",TextColor:So.Report.FieldColor.Text,MaxText:"9999.99",FloatPrecision:2},{Type:$o.RESERVE_NUMBER5_ID,Title:"æ°å¼5",TextAlign:"right",TextColor:So.Report.FieldColor.Text,MaxText:"9999.99",FloatPrecision:2},{Type:$o.RESERVE_NUMBER6_ID,Title:"æ°å¼6",TextAlign:"right",TextColor:So.Report.FieldColor.Text,MaxText:"9999.99",FloatPrecision:2},{Type:$o.RESERVE_NUMBER7_ID,Title:"æ°å¼7",TextAlign:"right",TextColor:So.Report.FieldColor.Text,MaxText:"9999.99",FloatPrecision:2},{Type:$o.RESERVE_NUMBER8_ID,Title:"æ°å¼8",TextAlign:"right",TextColor:So.Report.FieldColor.Text,MaxText:"9999.99",FloatPrecision:2},{Type:$o.RESERVE_NUMBER9_ID,Title:"æ°å¼9",TextAlign:"right",TextColor:So.Report.FieldColor.Text,MaxText:"9999.99",FloatPrecision:2},{Type:$o.RESERVE_NUMBER10_ID,Title:"æ°å¼10",TextAlign:"right",TextColor:So.Report.FieldColor.Text,MaxText:"9999.99",FloatPrecision:2},{Type:$o.RESERVE_STRING1_ID,Title:"æå­1",TextAlign:"right",TextColor:So.Report.FieldColor.Text,MaxText:"ææææææ"},{Type:$o.RESERVE_STRING2_ID,Title:"æå­2",TextAlign:"right",TextColor:So.Report.FieldColor.Text,MaxText:"ææææææ"},{Type:$o.RESERVE_STRING3_ID,Title:"æå­3",TextAlign:"right",TextColor:So.Report.FieldColor.Text,MaxText:"ææææææ"},{Type:$o.RESERVE_STRING4_ID,Title:"æå­4",TextAlign:"right",TextColor:So.Report.FieldColor.Text,MaxText:"ææææææ"},{Type:$o.RESERVE_STRING5_ID,Title:"æå­5",TextAlign:"right",TextColor:So.Report.FieldColor.Text,MaxText:"ææææææ"},{Type:$o.RESERVE_STRING6_ID,Title:"æå­6",TextAlign:"right",TextColor:So.Report.FieldColor.Text,MaxText:"ææææææ"},{Type:$o.RESERVE_STRING7_ID,Title:"æå­7",TextAlign:"right",TextColor:So.Report.FieldColor.Text,MaxText:"ææææææ"},{Type:$o.RESERVE_STRING8_ID,Title:"æå­8",TextAlign:"right",TextColor:So.Report.FieldColor.Text,MaxText:"ææææææ"},{Type:$o.RESERVE_STRING9_ID,Title:"æå­9",TextAlign:"right",TextColor:So.Report.FieldColor.Text,MaxText:"ææææææ"},{Type:$o.RESERVE_STRING10_ID,Title:"æå­10",TextAlign:"right",TextColor:So.Report.FieldColor.Text,MaxText:"ææææææ"},{Type:$o.RESERVE_PROGRESS_BAR1_ID,Title:"è¿åº¦æ¡1",TextAlign:"center",FixedWidth:100*C()},{Type:$o.RESERVE_PROGRESS_BAR2_ID,Title:"è¿åº¦æ¡2",TextAlign:"center",FixedWidth:100*C()},{Type:$o.RESERVE_PROGRESS_BAR3_ID,Title:"è¿åº¦æ¡3",TextAlign:"center",FixedWidth:100*C()},{Type:$o.RESERVE_PROGRESS_BAR4_ID,Title:"è¿åº¦æ¡4",TextAlign:"center",FixedWidth:100*C()},{Type:$o.RESERVE_PROGRESS_BAR5_ID,Title:"è¿åº¦æ¡5",TextAlign:"center",FixedWidth:100*C()},{Type:$o.RESERVE_PROGRESS_BAR6_ID,Title:"è¿åº¦æ¡6",TextAlign:"center",FixedWidth:100*C()},{Type:$o.RESERVE_PROGRESS_BAR7_ID,Title:"è¿åº¦æ¡7",TextAlign:"center",FixedWidth:100*C()},{Type:$o.RESERVE_PROGRESS_BAR8_ID,Title:"è¿åº¦æ¡8",TextAlign:"center",FixedWidth:100*C()},{Type:$o.RESERVE_PROGRESS_BAR9_ID,Title:"è¿åº¦æ¡9",TextAlign:"center",FixedWidth:100*C()},{Type:$o.RESERVE_PROGRESS_BAR10_ID,Title:"è¿åº¦æ¡10",TextAlign:"center",FixedWidth:100*C()}],a=0;a<e.length;++a){var i=e[a];if(i.Type==t)return i}return null},this.ClipClient=function(){this.Canvas.save(),this.Canvas.beginPath(),this.Canvas.rect(this.RectClient.Left,this.RectClient.Top,this.RectClient.Right-this.RectClient.Left,this.RectClient.Bottom-this.RectClient.Top),this.Canvas.clip()},this.Draw=function(t){if(this.ShowSymbol=[],this.TooltipRect=[],this.ButtonRect=[],this.DevicePixelRatio=C(),this.LastMouseStatus=t,this.GlobalOption&&(this.GlobalOption.FlashBGCount=0),this.SizeChange?this.CalculateSize():this.UpdateCacheData(),this.ClipClient(),this.DrawHeader(),this.DrawBody(),this.Canvas.restore(),this.Tab&&this.BottomToolbarHeight>0){var e=this.ChartBorder.GetBottom();this.Tab.DrawTab(this.RectClient.Left,e-this.BottomToolbarHeight,this.RectClient.Right,e),this.Tab.DrawScrollbar(this.RectClient.Left,e-this.BottomToolbarHeight,this.RectClient.Right,e)}if(this.ClipClient(),this.DrawBorder(),this.Canvas.restore(),this.DrawDragRow(),this.VScrollbar){var e=this.ChartBorder.GetBottom();this.VScrollbar.DrawScrollbar(this.RectClient.Left,this.RectClient.Top+this.HeaderHeight,this.RectClient.Right,e-this.BottomToolbarHeight-4)}this.LastMouseStatus=null,this.SizeChange=!1},this.UpdateCacheData=function(){this.RectClient.Left=this.ChartBorder.GetLeft(),this.RectClient.Right=this.ChartBorder.GetRight(),this.RectClient.Top=this.ChartBorder.GetTop(),this.RectClient.Bottom=this.ChartBorder.GetBottom()-this.BottomToolbarHeight},this.GetPageSize=function(t){return t&&this.CalculateSize(),this.RowCount},this.GetCurrentPageStatus=function(){var t={Start:this.Data.YOffset,PageSize:this.RowCount,IsEnd:!1,SelectedRow:this.SelectedRow,IsSinglePage:!1,DataCount:0,MultiSelectModel:this.MultiSelectModel};return 1==this.MultiSelectModel&&(t.SelectedRow=-1,t.MultiSelectedRow=this.MultiSelectedRow.slice(),t.MultiSelectedRow.sort(function(t,e){return t>e})),we.IsNonEmptyArray(this.Data.Data)?(t.End=this.Data.YOffset+this.RowCount-1,t.IsSinglePage=this.Data.Data.length<=this.RowCount,t.DataCount=this.Data.Data.length,t.End>=this.Data.Data.length-1&&(t.IsEnd=!0),t.End>=this.Data.Data.length&&(t.End=this.Data.Data.length-1)):(t.Start=0,t.End=0,t.IsEnd=!0,t.IsSinglePage=!0),t},this.CalculateSize=function(){this.Tab&&this.Tab.IsShow?(this.Tab.CalculateSize(),this.BottomToolbarHeight=this.Tab.Height):this.BottomToolbarHeight=0,this.VScrollbar&&this.VScrollbar.Enable&&this.VScrollbar.CalculateSize(),this.UpdateCacheData();var t=C();this.HeaderFont=this.HeaderFontConfig.Size*t+"px "+this.HeaderFontConfig.Name,this.ItemFont=this.ItemFontConfig.Size*t+"px "+this.ItemFontConfig.Name,this.ItemFixedFont=this.ItemFixedFontConfg.Size*t+"px "+this.ItemFixedFontConfg.Name,this.ItemSymbolFont=this.ItemSymbolFontConfig.Size*t+"px "+this.ItemSymbolFontConfig.Name,this.ItemNameFont=this.ItemNameFontConfg.Size*t+"px "+this.ItemNameFontConfg.Name,this.NameSymbolFont.Symbol=this.NameSymbolV2Config.Symbol.Size*t+"px "+this.NameSymbolV2Config.Symbol.Name,this.NameSymbolFont.Name=this.ItemSymbolFontConfig.Name.Size*t+"px "+this.NameSymbolV2Config.Name.Name,this.ItemFontHeight=this.GetFontHeight(this.ItemFont,"æ"),this.RowHeight=this.ItemFontHeight+this.ItemMergin.Top+this.ItemMergin.Bottom,this.ItemTextLines=1,this.FixedRowHeight=this.GetFontHeight(this.ItemFixedFont,"æ")+this.ItemMergin.Top+this.ItemMergin.Bottom,this.SortFont=this.SortConfig.Size*t+"px "+this.SortConfig.Family,this.Canvas.font=this.ItemFont;for(var e=0,a=0;a<this.Column.length;++a){var i=this.Column[a];if(i.Type==$o.SYMBOL_NAME_ID){this.Canvas.font=this.ItemNameFont;var r=this.Canvas.measureText(i.MaxText).width,n=this.GetFontHeight(this.ItemNameFont,"æ");this.ItemNameHeight=n,this.Canvas.font=this.ItemSymbolFont;var o=this.Canvas.measureText(i.MaxText).width,s=this.GetFontHeight(this.ItemSymbolFont,"æ");this.ItemSymbolHeight=s,this.Canvas.font=this.ItemFont,e=Math.max(r,o),i.Width=e+4+this.ItemMergin.Left+this.ItemMergin.Right;var l=n+s+this.ItemMergin.Top+this.ItemMergin.Bottom;this.ItemTextLines=2,l>this.RowHeight&&(this.RowHeight=l),l>this.FixedRowHeight&&(this.FixedRowHeight=l)}else if(i.Type==$o.SYMBOL_NAME_V2_ID){this.Canvas.font,this.NameSymbolFont.Name;var r=this.Canvas.measureText(i.MaxText).width,n=this.GetFontHeight(this.ItemNameFont,"æ");this.Canvas.font,this.NameSymbolFont.Symbol;var o=this.Canvas.measureText(i.MaxText2).width,s=this.GetFontHeight(this.ItemSymbolFont,"æ");this.ItemNameHeight=Math.abs(n,s);var h=2;we.IsNumber(i.Space)&&(h=i.Space),e=r+o+h,i.Width=e+4+this.ItemMergin.Left+this.ItemMergin.Right}else e=we.IsNumber(i.FixedWidth)?i.FixedWidth:this.Canvas.measureText(i.MaxText).width,i.Width=e+4+this.ItemMergin.Left+this.ItemMergin.Right;if(i.Icon&&i.Icon.Symbol&&(i.Width+=i.Icon.Size,i.Icon.Margin)){var u=i.Icon.Margin;we.IsNumber(u.Left)&&(i.Width+=u.Left),we.IsNumber(u.Right)&&(i.Width+=u.Right)}}this.Canvas.font=this.HeaderFont;for(var a=0;a<this.Column.length;++a){var i=this.Column[a];if(i.Title&&!(i.Title.length<=0)){var c=i.Title;e=this.Canvas.measureText(c).width,i.Sort>0&&this.SortConfig.Size,e+=4+this.HeaderMergin.Left+this.HeaderMergin.Right,i.Width<e&&(i.Width=e)}}this.HeaderHeight=this.GetFontHeight(this.HeaderFont,"æ")+this.HeaderMergin.Top+this.HeaderMergin.Bottom,this.IsShowHeader||(this.HeaderHeight=0),this.FixedRowCount<=0&&(this.FixedRowHeight=0),this.RowCount=parseInt((this.RectClient.Bottom-this.RectClient.Top-this.HeaderHeight-this.FixedRowHeight*this.FixedRowCount)/this.RowHeight);for(var f=0,d=this.RectClient.Right-this.RectClient.Left,a=0;a<this.Column.length;++a){var i=this.Column[a];f+=i.Width}this.IsShowAllColumn=f<d},this.DrawHeader=function(){if(this.IsShowHeader){var t=this.RectClient.Left,e=this.RectClient.Top,a=(this.HeaderMergin.Top,this.HeaderHeight,this.HeaderMergin.Top,this.HeaderMergin.Bottom,e+this.HeaderHeight);this.Canvas.font=this.HeaderFont;for(var i=t,r=0;r<this.FixedColumn&&r<this.Column.length;++r){var n=this.Column[r],o=n.Width,s=o-this.HeaderMergin.Left-this.HeaderMergin.Right,l=i+this.HeaderMergin.Left;if(n.HeaderBGColor){var h={Left:i,Top:e,Width:o,Height:this.HeaderHeight};h.Right=h.Left+h.Width,h.Bottom=h.Top+h.Height,this.DrawItemBG({Rect:h,BGColor:n.HeaderBGColor})}var u=0;if(n.Icon&&n.Icon.Symbol){var u=n.Icon.Size;if(n.Icon.Margin){var C=n.Icon.Margin;we.IsNumber(C.Left)&&(u+=C.Left),we.IsNumber(C.Right)&&(u+=C.Right)}}s-=u,n.HeaderColor?this.Canvas.fillStyle=n.HeaderColor:this.Canvas.fillStyle=this.HeaderColor;var c={};this.SortInfo&&this.SortInfo.Field==r&&this.SortInfo.Sort>0?this.DrawSortHeader(n.Title,n.TextAlign,l,a,s,this.SortInfo.Sort,c):this.DrawText(n.Title,n.TextAlign,l,a,s,c),u>0&&(this.DrawHeaderIcon(n.Icon,c.Right,a,r,n),this.Canvas.font=this.HeaderFont),this.Canvas.fillStyle=this.HeaderColor,i+=n.Width}for(var r=this.FixedColumn+this.Data.XOffset;r<this.Column.length;++r){var n=this.Column[r],o=n.Width,s=o-this.HeaderMergin.Left-this.HeaderMergin.Right,l=i+this.HeaderMergin.Left;if(n.HeaderBGColor){var h={Left:i,Top:e,Width:o,Height:this.HeaderHeight};h.Right=h.Left+h.Width,h.Bottom=h.Top+h.Height,this.DrawItemBG({Rect:h,BGColor:n.HeaderBGColor})}var u=0;if(n.Icon&&n.Icon.Symbol){var u=n.Icon.Size;if(n.Icon.Margin){var C=n.Icon.Margin;we.IsNumber(C.Left)&&(u+=C.Left),we.IsNumber(C.Right)&&(u+=C.Right)}}s-=u,n.HeaderColor?this.Canvas.fillStyle=n.HeaderColor:this.Canvas.fillStyle=this.HeaderColor;var c={};this.SortInfo&&this.SortInfo.Field==r&&this.SortInfo.Sort>0?this.DrawSortHeader(n.Title,n.TextAlign,l,a,s,this.SortInfo.Sort,c):this.DrawText(n.Title,n.TextAlign,l,a,s,c),u>0&&(this.DrawHeaderIcon(n.Icon,c.Right,a,r,n),this.Canvas.font=this.HeaderFont),i+=n.Width}}},this.DrawText=function(t,e,a,i,r,n){var o=this.Canvas.measureText(t).width;"center"==e?a+=(r-o)/2:"right"==e&&(a=a+r-o),this.Canvas.textAlign="left",this.Canvas.textBaseline="bottom",this.Canvas.fillText(t,a,i-this.HeaderMergin.Bottom),n&&(n.Right=a+o,n.Width=o)},this.DrawHeaderIcon=function(t,e,a,i,r){var n=t.Size+"px "+t.Family;this.Canvas.font=n,this.Canvas.textAlign="left",t.Color&&(this.Canvas.fillStyle=t.Color);var o=e,s=a;if(t.Margin&&we.IsNumber(t.Margin.Left)&&(o+=t.Margin.Left),t.Margin&&we.IsNumber(t.Margin.Bottom)&&(s-=t.Margin.Bottom),this.Canvas.fillText(t.Symbol,o,s),t.Tooltip){var l={Left:o,Bottom:s,Width:t.Size,Height:t.Size};l.Right=l.Left+l.Width,l.Top=l.Bottom-l.Height;var h={Rect:l,Type:2,Column:r,Index:i,Data:t.Tooltip.Data};this.TooltipRect.push(h)}},this.DrawSortHeader=function(t,e,a,i,r,n,o){var s=C(),l=this.SortConfig.Arrow[n];this.Canvas.font=this.HeaderFont;var h=this.Canvas.measureText(t).width,u=this.SortConfig.Size*s+this.SortConfig.Margin.Left;"center"==e?a=a+r/2-(u+h)/2:"right"==e&&(a=a+r-u-h),this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left";var c=a;this.Canvas.font=this.HeaderFont,this.Canvas.fillStyle=this.HeaderColor,this.Canvas.fillText(t,c,i-this.HeaderMergin.Bottom),c+=h+this.SortConfig.Margin.Left,this.Canvas.font=this.SortFont,this.Canvas.fillStyle=this.SortConfig.Color[n],this.Canvas.fillText(l,c,i-this.SortConfig.Margin.Bottom),this.Canvas.font=this.HeaderFont,this.Canvas.fillStyle=this.HeaderColor,o&&(o.Right=a+h+u,o.Width=h+u)},this.DrawBorder=function(){if(this.IsDrawBorder){var t=this.RectClient.Left,e=this.RectClient.Right,a=this.RectClient.Top;this.RectClient.Bottom;this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),this.Canvas.moveTo(t,p(a+this.HeaderHeight)),this.Canvas.lineTo(e,p(a+this.HeaderHeight));for(var i=a+this.HeaderHeight+this.RowHeight,r=i,n=0;n<this.FixedRowCount;++n){var o=p(i);this.Canvas.moveTo(t,o),this.Canvas.lineTo(e,o),r=i,i+=this.FixedRowHeight}for(var i=a+this.HeaderHeight+this.RowHeight+this.FixedRowHeight*this.FixedRowCount,r=i,n=0;n<this.RowCount;++n){var o=p(i);this.Canvas.moveTo(t,o),this.Canvas.lineTo(e,o),r=i,i+=this.RowHeight}for(var s=t,n=0;n<this.FixedColumn&&n<this.Column.length;++n){var l=this.Column[n],h=p(s+l.Width);this.Canvas.moveTo(h,a),this.Canvas.lineTo(h,r),s+=l.Width}for(var n=this.FixedColumn+this.Data.XOffset;n<this.Column.length;++n){var l=this.Column[n],h=p(s+l.Width);this.Canvas.moveTo(h,a),this.Canvas.lineTo(h,r),s+=l.Width}this.Canvas.stroke()}},this.GetAllRowCount=function(){var t=this.Data.Data.length;return this.Data.Virtual&&this.Data.Virtual.Enable&&(t=this.Data.Virtual.Count),t},this.DrawBody=function(){if(this.Data&&(we.IsNonEmptyArray(this.Data.Data)||this.Data.Virtual.Enable)){this.Canvas.font=this.ItemFont;var t=this.RectClient.Top+this.HeaderHeight,e=this.RectClient.Left,a=this.RectClient.Right-this.RectClient.Left,i=t;this.Canvas.font=this.ItemFixedFont;for(var r=0;r<this.FixedRowCount;++r)this.SelectedFixedRow==r&&(this.Canvas.fillStyle=this.SelectedColor,this.Canvas.fillRect(e,i,a,this.FixedRowHeight)),1==this.FixedRowData.Type?this.DrawFixedSymbolRow(i,r):this.DrawFixedRow(i,r),i+=this.FixedRowHeight;i=t+this.FixedRowHeight*this.FixedRowCount,this.Canvas.font=this.ItemFont;var n,o=this.GetEventCallback(Kn.ON_DRAW_REPORT_ROW_BG),s=this.GetSelectedSymbol();1==this.MultiSelectModel&&(n=new Rn.default(this.MultiSelectedRow));for(var l=this.GetAllRowCount(),r=this.Data.YOffset,h=0;r<l&&h<this.RowCount;++r,++h){var u=this.Data.Data[r],C=!1;if(1==this.MultiSelectModel?n.has(r)&&(C=!0):0==this.SelectedModel?h==this.SelectedRow&&(C=!0):r==this.SelectedRow&&(C=!0),this.DragRow){if(this.DragRow.Data){var c=this.DragRow.Data.Row.DataIndex;c==r&&(this.Canvas.fillStyle=this.DragSrcRowColor,this.Canvas.fillRect(e,i,a,this.RowHeight))}if(this.DragRow.MoveRow){var c=this.DragRow.MoveRow.Data.DataIndex;c==r&&(this.Canvas.fillStyle=this.DragMoveRowColor,this.Canvas.fillRect(e,i,a,this.RowHeight))}C=!1}if(o&&o.Callback){var f={RowIndex:r,Symbol:u,Out:null,Selected:s,MultiSelectModel:this.MultiSelectModel};o.Callback(o,f,this),f.Out&&f.Out.BGColor&&(this.Canvas.fillStyle=f.Out.BGColor,this.Canvas.fillRect(e,i,a,this.RowHeight))}C&&(this.Canvas.fillStyle=this.SelectedColor,this.Canvas.fillRect(e,i,a,this.RowHeight)),this.DrawRow(u,i,r),this.ShowSymbol.push({Index:r,Symbol:u}),i+=this.RowHeight}}},this.GetSelectedSymbol=function(){if(1==this.MultiSelectModel){if(!we.IsNonEmptyArray(this.MultiSelectedRow))return null;for(var t=[],e=0;e<this.MultiSelectedRow.length;++e){var a=this.Data.Data[this.MultiSelectedRow[e]];a&&t.push(a)}return t}if(this.SelectedRow<0)return null;var i=this.SelectedRow;return 0==this.SelectedModel&&(i=this.Data.YOffset+this.SelectedRow),[this.Data.Data[i]]},this.DrawFixedSymbolRow=function(t,e){this.RectClient.Left,this.RectClient.Right;if(this.FixedRowData&&we.IsNonEmptyArray(this.FixedRowData.Symbol)){var a=this.FixedRowData.Symbol[e];a&&(this.DrawRow(a,t,e,1),this.ShowSymbol.push({Index:e,Symbol:a,RowType:1}))}},this.DrawFixedRow=function(t,e){for(var a=this.RectClient.Left,i=this.RectClient.Right,r=0;r<this.FixedColumn&&r<this.Column.length;++r){var n=this.Column[r];if(this.DrawFixedItem(e,r,n,a,t),(a+=n.Width)>=i)break}for(var r=this.FixedColumn+this.Data.XOffset;r<this.Column.length;++r){var n=this.Column[r];if(this.DrawFixedItem(e,r,n,a,t),(a+=n.Width)>=i)break}},this.DrawFixedItem=function(t,e,a,i,r){var n=i+this.ItemMergin.Left,o=a.Width-this.ItemMergin.Left-this.ItemMergin.Right,s={Text:null,TextColor:a.TextColor,TextAlign:a.TextAlign};if(this.GetFixedRowTextDrawInfo(t,e,a,s))return void this.DrawItemText(s.Text,s.TextColor,s.TextAlign,n,r,o);if(this.FixedRowData&&we.IsNonEmptyArray(this.FixedRowData.Data)){var l=this.FixedRowData.Data,h=l[t];if(we.IsNonEmptyArray(h)){var u=h[e];u&&u.Text&&(s.Text=u.Text,u.Color&&(s.TextColor=u.Color),u.TextAlign&&(s.TextAlign=u.TextAlign),this.DrawItemText(s.Text,s.TextColor,s.TextAlign,n,r,o))}}},this.DrawRow=function(t,e,a,i){var r=this.RectClient.Left,n=this.RectClient.Right,o={Symbol:t,Stock:null,Block:null};this.GetStockDataCallback&&(o.Stock=this.GetStockDataCallback(t)),this.GetBlockDataCallback&&(o.Block=this.GetBlockDataCallback(t)),this.GetFlashBGDataCallback&&(o.FlashBG=this.GetFlashBGDataCallback(t,Date.now())),o.Decimal=sr(t);for(var s=0;s<this.FixedColumn&&s<this.Column.length;++s){var l=this.Column[s];if(this.DrawItem(a,o,l,r,e,i,s),(r+=l.Width)>=n)break}for(var s=this.FixedColumn+this.Data.XOffset;s<this.Column.length;++s){var l=this.Column[s];if(this.DrawItem(a,o,l,r,e,i,s),(r+=l.Width)>=n)break}},this.DrawItem=function(t,e,a,i,r,n,o){var s=a.Width,l=i+this.ItemMergin.Left,h=a.Width-this.ItemMergin.Left-this.ItemMergin.Right,u=e.Stock,C={Text:null,TextColor:a.TextColor,TextAlign:a.TextAlign,Tooltip:null,Index:t,ColumnIndex:o},c={Left:i,Top:r,Width:a.Width,Height:this.RowHeight};if(c.Right=c.Left+c.Width,c.Bottom=c.Top+c.Height,C.Rect=c,a.FullColBGColor&&this.DrawItemBG({Rect:c,BGColor:a.FullColBGColor}),a.Type==$o.INDEX_ID){if(1==n)return;C.Text=(t+1).toString()}else if(a.Type==$o.SYMBOL_ID)u&&u.Symbol?C.Text=u.Symbol:C.Text=e.Symbol,this.FormatDrawInfo(a,u,C,e);else if(a.Type==$o.SYMBOL_NAME_ID)this.DrawSymbolName(e,a,i,r,n),this.FormatDrawInfo(a,u,C,e);else if(a.Type==$o.SYMBOL_NAME_V2_ID)this.DrawSymbolNameV2(e,a,i,r,n),this.FormatDrawInfo(a,u,C,e);else if(a.Type==$o.NAME_ID)u&&u.Name&&we.IsString(u.Name)&&(C.Text=this.TextEllipsis(u.Name,h,a.MaxText),C.TextColor=this.GetNameColor(a,e.Symbol,n)),this.FormatDrawInfo(a,u,C,e);else if(a.Type==$o.NAME_EX_ID){if(u&&u.NameEx){var f=u.NameEx;C.Text=this.TextEllipsis(f.Text,h,a.MaxText),C.TextColor=this.GetNameColor(a,e.Symbol,n),f.Symbol&&(C.Symbol=f.Symbol)}}else if(a.Type==$o.PRICE_ID)u&&this.GetPriceDrawInfo(u.Price,u,e,C,{LimitBG:!0}),this.FormatDrawInfo(a,u,C,e);else if(a.Type==$o.OPEN_ID)u&&(this.DrawLimitPriceBorder(u.Open,u,i,r,a.Width),this.GetPriceDrawInfo(u.Open,u,e,C,{LimitBG:!0})),this.FormatDrawInfo(a,u,C,e);else if(a.Type==$o.HIGH_ID)u&&(this.DrawLimitPriceBorder(u.High,u,i,r,a.Width),this.GetPriceDrawInfo(u.High,u,e,C,{LimitBG:!0})),this.FormatDrawInfo(a,u,C,e);else if(a.Type==$o.LOW_ID)u&&(this.DrawLimitPriceBorder(u.Low,u,i,r,a.Width),this.GetPriceDrawInfo(u.Low,u,e,C,{LimitBG:!0})),this.FormatDrawInfo(a,u,C,e);else if(a.Type==$o.YCLOSE_ID)u&&this.GetPriceDrawInfo(u.YClose,u,e,C),this.FormatDrawInfo(a,u,C,e);else if(a.Type==$o.BUY_PRICE_ID)u&&this.GetPriceDrawInfo(u.BuyPrice,u,e,C),this.FormatDrawInfo(a,u,C,e);else if(a.Type==$o.FUTURES_CLOSE_ID||a.Type==$o.FUTURES_YCLOSE_ID){var d=ts.get(a.Type);if(u&&we.IsNumber(u[d])){var D=u[d];this.GetPriceDrawInfo(D,u,e,C)}this.FormatDrawInfo(a,u,C,e)}else if(a.Type==$o.SELL_PRICE_ID)u&&this.GetPriceDrawInfo(u.SellPrice,u,e,C),this.FormatDrawInfo(a,u,C,e);else if(a.Type==$o.AVERAGE_PRICE_ID)u&&this.GetPriceDrawInfo(u.AvPrice,u,e,C),this.FormatDrawInfo(a,u,C,e);else if(a.Type==$o.EXCHANGE_RATE_ID)u&&we.IsNumber(u.Exchange)&&(C.Text=u.Exchange.toFixed(2)),this.FormatDrawInfo(a,u,C,e);else if(a.Type==$o.BUY_VOL_ID)u&&we.IsNumber(u.BuyVol)&&(C.Text=this.FormatVolString(u.BuyVol)),this.FormatDrawInfo(a,u,C,e);else if(a.Type==$o.SELL_VOL_ID)u&&we.IsNumber(u.SellVol)&&(C.Text=this.FormatVolString(u.SellVol)),this.FormatDrawInfo(a,u,C,e);else if(a.Type==$o.VOL_ID)u&&we.IsNumber(u.Vol)&&(C.Text=this.FormatVolString(u.Vol)),this.FormatDrawInfo(a,u,C,e);else if(a.Type==$o.VOL_IN_ID)u&&we.IsNumber(u.VolIn)&&(C.Text=this.FormatVolString(u.VolIn)),this.FormatDrawInfo(a,u,C,e);else if(a.Type==$o.VOL_OUT_ID)u&&we.IsNumber(u.VolOut)&&(C.Text=this.FormatVolString(u.VolOut)),this.FormatDrawInfo(a,u,C,e);else if(a.Type==$o.TOTAL_SHARES_ID)u&&we.IsNumber(u.TotalShares)&&(C.Text=this.FormatVolString(u.TotalShares)),this.FormatDrawInfo(a,u,C,e);else if(a.Type==$o.OUTSTANDING_SHARES_ID)u&&we.IsNumber(u.OutShares)&&(C.Text=this.FormatVolString(u.OutShares)),this.FormatDrawInfo(a,u,C,e);else if(a.Type==$o.CIRC_MARKET_VALUE_ID||a.Type==$o.MARKET_VALUE_ID||a.Type==$o.AMOUNT_ID){var d=ts.get(a.Type);u&&we.IsNumber(u[d])&&(C.Text=this.FormatVolString(u[d])),this.FormatDrawInfo(a,u,C,e)}else if(a.Type==$o.INCREASE_ID||a.Type==$o.AMPLITUDE_ID||a.Type==$o.UPDOWN_ID||a.Type==$o.RISING_SPEED_1M_ID||a.Type==$o.RISING_SPEED_3M_ID||a.Type==$o.RISING_SPEED_5M_ID||a.Type==$o.RISING_SPEED_10M_ID||a.Type==$o.RISING_SPEED_15M_ID){var d=ts.get(a.Type);if(u&&we.IsNumber(u[d])){var D=u[d];C.Text=D.toFixed(2),C.TextColor=this.GetUpDownColor(D,0)}this.FormatDrawInfo(a,u,C,e)}else if(a.Type==$o.FUTURES_POSITION_ID||a.Type==$o.FUTURES_OPEN_POSITION_ID||a.Type==$o.FUTURES_CLOSE_POSITION_ID){var d=ts.get(a.Type);if(u&&we.IsNumber(u[d])){var D=u[d];C.Text=D.toFixed(0)}this.FormatDrawInfo(a,u,C,e)}else if(a.Type==$o.CUSTOM_STRING_TEXT_ID)this.GetCustomStringDrawInfo(e,a,C);else if(a.Type==$o.CUSTOM_NUMBER_TEXT_ID)this.GetCustomNumberDrawInfo(e,a,C);else if(a.Type==$o.CUSTOM_DATETIME_TEXT_ID)this.GetCustomDateTimeDrawInfo(e,a,C);else if(a.Type==$o.CUSTOM_ICON_ID)this.GetCustomIconDrawInfo(e,a,C);else if(a.Type==$o.CLOSE_LINE_ID){var c={Left:i,Top:r,Width:a.Width,Height:this.RowHeight};c.Right=c.Left+c.Width,c.Bottom=c.Top+c.Height,u&&this.DrawLine(u.CloseLine,a,c)}else if(a.Type==$o.KLINE_ID){var c={Left:i,Top:r,Width:a.Width,Height:this.RowHeight};c.Right=c.Left+c.Width,c.Bottom=c.Top+c.Height,this.DrawKLine(u.KLine,a,c,e)}else a.Type==$o.TIME_ID?this.FormaTimeDrawInfo(a,u,C,e):a.Type==$o.DATE_ID?this.FormaDateDrawInfo(a,u,C,e):a.Type==$o.CHECKBOX_ID?(c={Left:i,Top:r,Width:a.Width,Height:this.RowHeight},c.Right=c.Left+c.Width,c.Bottom=c.Top+c.Height,C.Rect=c,C.Checked=!1,C.Enable=!0,C.CheckBox=this.CheckBoxConfig,C.Data=u,u&&we.IsBool(u.Checked)&&(C.Checked=u.Checked)):a.Type==$o.CUSTOM_CHECKBOX_ID?(c={Left:i,Top:r,Width:a.Width,Height:this.RowHeight},c.Right=c.Left+c.Width,c.Bottom=c.Top+c.Height,C.Rect=c,this.GetCustomCheckBoxDrawInfo(e,a,C)):a.Type==$o.CUSTOM_BUTTON_ID?(c={Left:i,Top:r,Width:a.Width,Height:this.RowHeight},c.Right=c.Left+c.Width,c.Bottom=c.Top+c.Height,C.Rect=c,this.GetCustomButtonDrawInfo(e,a,C)):a.Type==$o.CUSTOM_PROGRESS_ID?(c={Left:i,Top:r,Width:a.Width,Height:this.RowHeight},c.Right=c.Left+c.Width,c.Bottom=c.Top+c.Height,C.Rect=c,this.GetCustomProgressBarDrawInfo(e,a,C)):a.Type==$o.CUSTOM_LINK_ID?this.GetCustomLinkDrawInfo(e,a,C):[$o.RESERVE_NUMBER1_ID,$o.RESERVE_NUMBER2_ID,$o.RESERVE_NUMBER3_ID,$o.RESERVE_NUMBER4_ID,$o.RESERVE_NUMBER5_ID,$o.RESERVE_NUMBER6_ID,$o.RESERVE_NUMBER7_ID,$o.RESERVE_NUMBER8_ID,$o.RESERVE_NUMBER9_ID,$o.RESERVE_NUMBER10_ID].includes(a.Type)?this.FormatReserveNumber(a,u,C):[$o.RESERVE_STRING1_ID,$o.RESERVE_STRING2_ID,$o.RESERVE_STRING3_ID,$o.RESERVE_STRING4_ID,$o.RESERVE_STRING5_ID,$o.RESERVE_STRING6_ID,$o.RESERVE_STRING7_ID,$o.RESERVE_STRING8_ID,$o.RESERVE_STRING9_ID,$o.RESERVE_STRING10_ID].includes(a.Type)?this.FormatReserveString(a,u,C):this.IsReserveProgressBarColumn(a.Type)&&this.FormatReserveProgressBar(a,u,C);if(3==n&&(C.TextColor=this.DragRowTextColor),C.Symbol)this.DrawItemTextEx(C,l,r,h);else if(a.Type==$o.CUSTOM_ICON_ID)this.DrawIconItem(C,l,r,h);else if(a.Type==$o.CHECKBOX_ID||a.Type==$o.CUSTOM_CHECKBOX_ID)this.DrawCheckbox(C,i,r,s);else if(a.Type==$o.CUSTOM_BUTTON_ID)this.DrawButton(C,i,r,s);else if(a.Type==$o.CUSTOM_PROGRESS_ID||this.IsReserveProgressBarColumn(a.Type))this.DrawProgressBar(C,i,r,s);else if(a.Type==$o.CUSTOM_LINK_ID)this.DrawLinkText(C,l,r,h);else{if(e.FlashBG&&e.FlashBG.Data&&void 0!=a.ID&&e.FlashBG.Data.has(a.ID)){var m=e.FlashBG.Data.get(a.ID),p={Rect:C.Rect,BGColor:m.Color};--m.Count,this.DrawItemBG(p),this.GlobalOption&&++this.GlobalOption.FlashBGCount}this.DrawItemBG(C),a.Type==$o.CUSTOM_STRING_TEXT_ID?this.DrawCustomText(C,a,l,r,h):this.DrawItemText(C.Text,C.TextColor,C.TextAlign,l,r,h,C.BGColor)}if(C.Tooltip){var v={Rect:c,Stock:u,Index:t,Column:a,RowType:n,Type:C.Tooltip.Type,Data:C.Tooltip.Data};this.TooltipRect.push(v)}if(C.Botton){var g={Stock:u,Index:t,ColumnIndex:o,Column:a,Rect:C.Botton.Rect,Type:C.Botton.Type,Data:C.Data};this.ButtonRect.push(g)}},this.IsReserveProgressBarColumn=function(t){return[$o.RESERVE_PROGRESS_BAR1_ID,$o.RESERVE_PROGRESS_BAR2_ID,$o.RESERVE_PROGRESS_BAR3_ID,$o.RESERVE_PROGRESS_BAR4_ID,$o.RESERVE_PROGRESS_BAR5_ID,$o.RESERVE_PROGRESS_BAR6_ID,$o.RESERVE_PROGRESS_BAR7_ID,$o.RESERVE_PROGRESS_BAR8_ID,$o.RESERVE_PROGRESS_BAR9_ID,$o.RESERVE_PROGRESS_BAR10_ID].includes(t)},this.DrawCustomText=function(t,e,a,i,r){if(t.Text){var n=t.Text,o=a;"center"==t.TextAlign?(o=a+r/2,this.Canvas.textAlign="center"):"right"==t.TextAlign?(o=a+r-2,this.Canvas.textAlign="right"):(o+=2,this.Canvas.textAlign="left");var s=this.Canvas.measureText(n).width+1,l=!1;if(s>=r){if(2==e.FormatType){var h=n.length+5;n="";for(var u=0;u<h;++u)n+="#"}else 1==e.FormatType&&(n=this.TextEllipsis(n,r,e.MaxText));this.Canvas.save(),l=!0;var C={Left:a,Top:i+this.ItemMergin.Top,Width:r,Height:this.RowHeight};this.Canvas.beginPath(),this.Canvas.rect(C.Left,C.Top,C.Width,C.Height),this.Canvas.clip(),t.Tooltip={Type:1,Data:{AryText:[{Text:t.Text}]}}}this.Canvas.textBaseline="bottom",this.Canvas.fillStyle=t.TextColor,this.Canvas.fillText(n,o,i+this.RowHeight-this.ItemMergin.Bottom),l&&this.Canvas.restore()}},this.DrawSymbolName=function(t,e,a,i,r){var n,o=t.Stock,s=t.Symbol;if(o&&(s=o.Symbol,n=o.Name),s||n){var l=i+this.ItemMergin.Top+this.ItemNameHeight,h=a+this.ItemMergin.Left,u=h,C=e.Width-this.ItemMergin.Left-this.ItemMergin.Right,c=e.TextAlign;"center"==c?(u=h+C/2,this.Canvas.textAlign="center"):"right"==c?(u=h+C-2,this.Canvas.textAlign="right"):(u+=2,this.Canvas.textAlign="left");var f=this.GetNameColor(e,s,r),d=n;d&&(this.Canvas.textBaseline="bottom",this.Canvas.fillStyle=f,this.Canvas.font=this.ItemNameFont,(d=this.TextEllipsis(d,C,e.MaxText))&&this.Canvas.fillText(d,u,l)),d=s,d&&(this.Canvas.textBaseline="bottom",this.Canvas.font=this.ItemSymbolFont,this.Canvas.fillStyle=f,this.Canvas.fillText(d,u,l+this.ItemSymbolHeight)),this.Canvas.font=this.ItemFont}},this.DrawSymbolNameV2=function(t,e,a,i,r){var n,o=t.Stock,s=t.Symbol;if(o&&(s=o.Symbol,n=o.Name),s||n){var l=i+this.ItemMergin.Top+this.ItemNameHeight,h=a+this.ItemMergin.Left,u=h,C=e.Width-this.ItemMergin.Left-this.ItemMergin.Right,c=e.TextAlign;"center"==c?(u=h+C/2,this.Canvas.textAlign="center"):"right"==c?(u=h+C-2,this.Canvas.textAlign="right"):(u+=2,this.Canvas.textAlign="left"),this.Canvas.textBaseline="bottom";var f=e.TextColor,d=n;if(d&&(this.Canvas.fillStyle=f,this.Canvas.font=this.NameSymbolFont.Name,d=this.TextEllipsis(d,C,e.MaxText))){this.Canvas.fillText(d,u,l);var D=this.Canvas.measureText(d).width,m=2;we.IsNumber(e.Space)&&(m=e.Space),u+=D+m}var f=e.TextColor2;d=s,d&&(this.Canvas.font=this.NameSymbolFont.Symbol,this.Canvas.fillStyle=f,this.Canvas.fillText(d,u,l)),this.Canvas.font=this.ItemFont}},this.DrawLimitPriceBorder=function(t,e,a,i,r){if(we.IsNumber(t)&&e){var n=!1;if(we.IsNumber(e.LimitHigh)&&t>=e.LimitHigh&&(n=!0),we.IsNumber(e.LimitLow)&&t<=e.LimitLow&&(n=!0),n){var o=a+this.ItemMergin.Left+this.LimitMergin.Left,s=r-this.ItemMergin.Left-this.ItemMergin.Right-this.LimitMergin.Left-this.LimitMergin.Right,l=i+this.ItemMergin.Top+this.LimitMergin.Top,h=this.RowHeight-this.ItemMergin.Top-this.ItemMergin.Bottom-this.LimitMergin.Top-this.LimitMergin.Bottom;this.Canvas.strokeStyle=this.LimitBorderColor,this.Canvas.strokeRect(p(o),p(l),g(s),g(h))}}},this.GetExtendData=function(t,e){if(we.IsNumber(e.DataIndex)){if(!t.Stock||!t.Stock.ExtendData)return null;if(e.DataIndex<0)return;return t.Stock.ExtendData[e.DataIndex]}if(we.IsNumber(e.BlockIndex)){if(!t.Block)return;if(e.BlockIndex<0)return;return t.Block[e.BlockIndex]}return null},this.GetCustomStringDrawInfo=function(t,e,a){var i=this.GetExtendData(t,e);if(e.IsDrawCallback)return void this.GetCustomTextDrawInfo(e,t.Symbol,i,a,t);we.IsString(i)&&(a.Text=i)},this.GetCustomNumberDrawInfo=function(t,e,a){var i=this.GetExtendData(t,e);if(e.IsDrawCallback)return void this.GetCustomTextDrawInfo(e,t.Symbol,i,a,t);if(we.IsNumber(i)){switch(e.FormatType){case 1:a.Text=i.toFixed(e.Decimal);break;case 2:a.Text=we.FormatValueThousandsString(i,e.Decimal);break;case 3:a.Text=this.FormatVolString(i);break;default:a.Text=we.FormatValueString(i,e.Decimal)}switch(e.ColorType){case 1:a.TextColor=this.GetUpDownColor(i,0);break;case 2:we.IsNumber(t.Stock.YClose)?a.TextColor=this.GetUpDownColor(i,t.Stock.YClose):a.TextColor=this.UnchagneColor}}},this.GetCustomDateTimeDrawInfo=function(t,e,a){var i=this.GetExtendData(t,e);if(we.IsNumber(i))return e.IsDrawCallback?void this.GetCustomTextDrawInfo(e,t.Symbol,i,a,t):void(0==e.ValueType&&(1==e.FormatType?a.Text=we.FormatDateString(i,"YYYY/MM/DD"):a.Text=we.FormatDateString(i)))},this.GetCustomIconDrawInfo=function(t,e,a){if(e.IsDrawCallback)return void this.GetCustomIconData(e,t.Symbol,a,t)},this.GetCustomCheckBoxDrawInfo=function(t,e,a){var i=this.GetExtendData(t,e);i&&we.IsBool(i.Checked)&&(a.Checked=i.Checked,a.Enable=!0,a.Data=i,we.IsBool(i.DisableCheckBox)&&(a.Enable=!i.DisableCheckBox),a.CheckBox=e.CheckBox)},this.GetCustomButtonDrawInfo=function(t,e,a){var i=this.GetExtendData(t,e);i&&(a.Text=i.Title,a.Button=e.Button,a.Font=e.Button.Font,a.Enable=!0,a.Data=i,we.IsBool(i.Enable)&&(a.Enable=i.Enable))},this.GetCustomProgressBarDrawInfo=function(t,e,a){var i=this.GetExtendData(t,e);i&&(a.Text=i.Title,a.ProgressBar=e.ProgressBar,a.Enable=!0,a.Value=i.Value,a.Data=i,we.IsBool(i.Enable)&&(a.Enable=i.Enable),i.TextColor&&(a.TextColor=i.TextColor),i.BarColor&&(a.BarColor=i.BarColor),i.BGColor&&(a.BGColor=i.BGColor))},this.GetCustomLinkDrawInfo=function(t,e,a){var i=this.GetExtendData(t,e);i&&(a.Text=i.Title,a.Link=e.Link,a.Enable=!0,a.Data=i,a.MaxText=e.MaxText,we.IsBool(i.Enable)&&(a.Enable=i.Enable),i.TextColor&&(a.TextColor=i.TextColor))},this.FormatReserveNumber=function(t,e,a){t.DefaultText&&(a.Text=t.DefaultText);var i=ts.get(t.Type);if(e&&i){var r=e[i];we.IsNumber(r)&&(we.IsNumber(t.ColorType)&&(1==t.ColorType?a.TextColor=this.GetUpDownColor(r,0):2==t.ColorType&&(a.TextColor=this.GetUpDownColorV2(r,0))),a.Text=r.toFixed(t.FloatPrecision))}},this.FormatReserveString=function(t,e,a){t.DefaultText&&(a.Text=t.DefaultText);var i=ts.get(t.Type);if(e&&i){var r=e[i];we.IsObject(r)?(r.Text&&(a.Text=r.Text),r.TextColor&&(a.TextColor=r.TextColor),r.BGColor&&(a.BGColor=r.BGColor)):we.IsString(r)&&(a.Text=r)}},this.FormatReserveProgressBar=function(t,e,a){var i=ts.get(t.Type);if(e&&i){var r=e[i];we.IsNumber(r)?(a.ProgressBar=t.ProgressBar,a.Enable=!0,a.Value=r,a.Data={Value:r}):we.IsObject(r)&&(r.Title&&(a.Text=r.Title),a.ProgressBar=t.ProgressBar,a.Enable=!0,a.Value=r.Value,a.Data=r,we.IsBool(r.Enable)&&(a.Enable=r.Enable),r.TextColor&&(a.TextColor=r.TextColor),r.BarColor&&(a.BarColor=r.BarColor),r.BGColor&&(a.BGColor=r.BGColor))}},this.FormaTimeDrawInfo=function(t,e,a,i){we.IsNumber(e.Time)&&(0==t.ValueType?a.Text=we.FormatTimeString(e.Time,"HH:MM"):1==t.ValueType?a.Text=we.FormatTimeString(e.Time,"HH:MM:SS"):2==t.ValueType&&(a.Text=we.FormatTimeString(e.Time,"HH:MM:SS.fff")))},this.FormaDateDrawInfo=function(t,e,a,i){we.IsNumber(e.Date)&&(0==t.FormatType?a.Text=we.FormatDateString(e.Date,"YYYY-MM-DD"):1==t.FormatType?a.Text=we.FormatDateString(e.Date,"YYYY/MM/DD"):2==t.FormatType?a.Text=we.FormatDateString(e.Date,"YYYY/MM/DD/W"):3==t.FormatType?a.Text=we.FormatDateString(e.Date,"YYYY-MM"):4==t.FormatType?a.Text=we.FormatDateString(e.Date,"MM/DD"):4==t.FormatType&&(a.Text=we.FormatDateString(e.Date,"MM-DD")))},this.GetCustomIconData=function(t,e,a,i){var r=this.GetEventCallback(Kn.ON_REPORT_DRAW_CUSTOM_ICON);if(!r||!r.Callback)return!1;var n={Symbol:e,Column:t,Data:i,Out:{Text:null,TextColor:null,TextAlign:null,Font:null}};return r.Callback(r,n,this),n.Out.Text&&(a.Text=n.Out.Text),n.Out.TextColor&&(a.TextColor=n.Out.TextColor),n.Out.TextAlign&&(a.TextAlign=n.Out.TextAlign),n.Out.BGColor&&(a.BGColor=n.Out.BGColor),n.Out.Font&&(a.Font=n.Out.Font),!0},this.GetPriceDrawInfo=function(t,e,a,i,r){if(!we.IsNumber(t))return!1;i.Text=t.toFixed(a.Decimal);var n=null;1===e.PriceColorType?we.IsNumber(e.YFClose)&&(n=e.YFClose):we.IsNumber(e.YClose)&&(n=e.YClose),we.IsNumber(n)?i.TextColor=this.GetUpDownColor(t,n):i.TextColor=this.UnchagneColor,r&&r.LimitBG&&(we.IsNumber(e.LimitHigh)&&t>=e.LimitHigh&&(i.BGColor=this.LimitUpBGColor,i.TextColor=this.LimitTextColor),we.IsNumber(e.LimitLow)&&t<=e.LimitLow&&(i.BGColor=this.LimitDownBGColor,i.TextColor=this.LimitTextColor))},this.GetUpDownColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchagneColor},this.GetUpDownColorV2=function(t,e){return t>=e?this.UpColor:this.DownColor},this.FormatVolString=function(t,e){return we.FormatVolString(t,e)},this.DrawItemBG=function(t){if(t.BGColor&&t.Rect){var e=t.Rect;this.Canvas.fillStyle=t.BGColor,this.Canvas.fillRect(e.Left,e.Top,e.Width,e.Height)}},this.DrawItemText=function(t,e,a,i,r,n,o){if(t){var s=i;"center"==a?(s=i+n/2,this.Canvas.textAlign="center"):"right"==a?(s=i+n-2,this.Canvas.textAlign="right"):(s+=2,this.Canvas.textAlign="left");var l=this.Canvas.measureText(t).width+1,h=!1;if(l>=n){this.Canvas.save(),h=!0;var u={Left:i,Top:r+this.ItemMergin.Top,Width:n,Height:this.RowHeight};if(this.Canvas.beginPath(),this.Canvas.rect(u.Left,u.Top,u.Width,u.Height),this.Canvas.clip(),1==this.TextOverflowStyle){var C=t.length+5;t="";for(var c=0;c<C;++c)t+="#"}}if(this.Canvas.textBaseline="bottom",this.Canvas.fillStyle=e,this.ItemTextLines>1){var f=(this.RowHeight-this.ItemMergin.Bottom-this.ItemMergin.Top-this.ItemFontHeight)/2,d=r+this.RowHeight-this.ItemMergin.Bottom-f;this.Canvas.fillText(t,s,d)}else this.Canvas.fillText(t,s,r+this.RowHeight-this.ItemMergin.Bottom);h&&this.Canvas.restore()}},this.DrawItemTextEx=function(t,e,a,i){var r=t.Text,n=t.TextColor,o=t.Symbol,s=t.TextAlign,l=this.Canvas.measureText(r).width+1,h=l,u=o.Size*C()+"px "+o.Family;this.Canvas.font=u;for(var c=[],f=0;f<o.Data.length;++f){var d=o.Data[f],D=this.Canvas.measureText(d.Text).width+1;if(h+D>i)break;h+=D,c[f]=D}var m=e,p=a+this.ItemMergin.Top+this.RowHeight/2;"center"==s?m=e+(i-h)/2:"right"==s?m=e+(i-h):m+=2,this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.font=this.ItemFont,this.Canvas.fillStyle=n,this.Canvas.fillText(r,m,p),m+=l,this.Canvas.font=u;for(var f=0;f<c.length;++f){var d=o.Data[f];this.Canvas.fillStyle=d.Color,this.Canvas.fillText(d.Text,m,p),m+=c[f]}this.Canvas.font=this.ItemFont},this.DrawIconItem=function(t,e,a,i){if(t&&t.Font&&t.Text){var r=t.Text,n=t.TextColor,o=t.TextAlign;this.Canvas.font=t.Font;var s=this.Canvas.measureText(r).width+1,l=e,h=a+this.ItemMergin.Top+this.RowHeight/2;"center"==o?l=e+(i-s)/2:"right"==o?l=e+(i-s):l+=2,this.Canvas.textBaseline="middle",this.Canvas.textAlign="left",this.Canvas.fillStyle=n,this.Canvas.fillText(r,l,h),this.Canvas.font=this.ItemFont}},this.DrawCheckbox=function(t,e,a,i){if(we.IsBool(t.Checked)&&t.CheckBox){var r=t.CheckBox;t.Font=r.Size*this.DevicePixelRatio+"px "+r.Family;var n=t.TextAlign,o=t.CheckBox.Size*this.DevicePixelRatio,s=e+t.CheckBox.Margin.Left,l=a+this.RowHeight-t.CheckBox.Margin.Bottom;"center"==n?s=e+i/2-o/2:"right"==n&&(s=e+i-r.Margin.Right);var h={Left:s,Bottom:l,Width:o,Height:o};h.Right=h.Left+h.Width,h.Top=h.Bottom-h.Height;var u=!1;if(t.Enable&&this.LastMouseStatus&&this.LastMouseStatus.OnMouseMove){var C=this.LastMouseStatus.OnMouseMove.X,c=this.LastMouseStatus.OnMouseMove.Y;C>h.Left&&C<h.Right&&c>h.Top&&c<h.Bottom&&(u=!0,this.LastMouseStatus.MouseOnStatus={Index:t.Index,ColumnIndex:t.ColumnIndex,Type:0})}if(this.Canvas.font=t.Font,this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",!0===t.Checked){var f=r.Checked.Color;!1===t.Enable?f=r.Checked.DisableColor:u&&(f=r.Checked.MouseOnColor),this.Canvas.fillStyle=f,this.Canvas.fillText(r.Checked.Symbol,s,l)}else if(!1===t.Checked){var f=r.Unchecked.Color;!1===t.Enable?f=r.Unchecked.DisableColor:u&&(f=r.Unchecked.MouseOnColor),this.Canvas.fillStyle=f,this.Canvas.fillText(r.Unchecked.Symbol,s,l)}t.Enable&&(t.Botton={Rect:h,Type:0})}},this.DrawButton=function(t,e,a,i){if(t.Button){var r=t.Button,n={Left:e+t.Button.Margin.Left,Top:a+t.Button.Margin.Top,Height:this.RowHeight-t.Button.Margin.Top-t.Button.Margin.Bottom,Width:i-t.Button.Margin.Left-t.Button.Margin.Right};n.Right=n.Left+n.Width,n.Bottom=n.Top+n.Height;var o=r.BGColor,s=r.TextColor;if(!1===t.Enable)o=r.Disable.BGColor,s=r.Disable.TextColor;else if(this.LastMouseStatus&&this.LastMouseStatus.OnMouseMove&&r.MouseOn){var l=this.LastMouseStatus.OnMouseMove.X,h=this.LastMouseStatus.OnMouseMove.Y;l>n.Left&&l<n.Right&&h>n.Top&&h<n.Bottom&&(o=r.MouseOn.BGColor,s=r.MouseOn.TextColor,this.LastMouseStatus.MouseOnStatus={Index:t.Index,ColumnIndex:t.ColumnIndex,Type:1})}this.Canvas.fillStyle=o,this.Canvas.fillRect(n.Left,n.Top,n.Width,n.Height),this.Canvas.font=t.Font,this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=s;var u=this.Canvas.measureText(t.Text).width,l=n.Left;u<n.Width&&(l+=(n.Width-u)/2);var h=n.Bottom-t.Button.TextMargin.Bottom;this.Canvas.fillText(t.Text,l,h),t.Enable&&(t.Botton={Rect:n,Type:1})}},this.DrawProgressBar=function(t,e,a,i){if(t.ProgressBar){var r=t.ProgressBar,n={Left:e+r.Margin.Left,Top:a+r.Margin.Top,Height:this.RowHeight-r.Margin.Top-r.Margin.Bottom,Width:i-r.Margin.Left-r.Margin.Right};n.Right=n.Left+n.Width,n.Bottom=n.Top+n.Height;var o=r.BGColor,s=r.BarColor,l=r.TextColor;!1===t.Enable&&(o=r.Disable.BGColor,s=r.Disable.BarColor,l=r.Disable.TextColor),t.BGColor&&(o=t.BGColor),t.TextColor&&(l=t.TextColor),t.BarColor&&(s=t.BarColor),o&&(this.Canvas.fillStyle=o,this.Canvas.fillRect(n.Left,n.Top,n.Width,n.Height));var h=n.Width-r.BarMargin.Left-r.BarMargin.Right,u=t.Value,C={Left:n.Left+r.BarMargin.Left,Top:n.Top+r.BarMargin.Top,Bottom:n.Bottom-r.BarMargin.Bottom,Width:0};if(u>0&&(u>1&&(u=1),C.Width=h*u,C.Height=C.Bottom-C.Top,C.Width<1&&(n.Width=1),this.Canvas.fillStyle=s,this.Canvas.fillRect(C.Left,C.Top,C.Width,C.Height)),l&&t.Text){this.Canvas.font=r.Font,this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=l;var c=C.Left+r.TextMargin.Left,f=C.Bottom-r.TextMargin.Bottom;this.Canvas.fillText(t.Text,c,f)}}},this.DrawLinkText=function(t,e,a,i){if(t.Link&&t.Text){var r=t.Link,n=t.Text,o=t.TextAlign,s=r.Font,l=r.TextColor;this.Canvas.font=s;var h=this.Canvas.measureText(n).width,u=this.Canvas.measureText("æ").width,C=e;i>=h?"center"==o?C=e+(i-h)/2:"right"==o&&(C=e+i-h):(n=this.TextEllipsis(n,i,t.MaxText),h=this.Canvas.measureText(n).width,t.Tooltip={Type:2,Data:{AryText:[{Text:t.Text}]}});var c={Left:C,Bottom:a+this.RowHeight-this.ItemMergin.Bottom,Height:u,Width:h};c.Right=c.Left+c.Width,c.Top=c.Bottom-c.Height;var f=!1;if(!1===t.Enable)l=r.Disable.TextColor;else if(this.LastMouseStatus&&this.LastMouseStatus.OnMouseMove&&r.MouseOn){var C=this.LastMouseStatus.OnMouseMove.X,d=this.LastMouseStatus.OnMouseMove.Y;C>c.Left&&C<c.Right&&d>c.Top&&d<c.Bottom&&(l=r.MouseOn.TextColor,f=!0,this.LastMouseStatus.MouseOnStatus={Index:t.Index,ColumnIndex:t.ColumnIndex,Type:2})}this.Canvas.textBaseline="bottom",this.Canvas.textAlign="left",this.Canvas.fillStyle=l,this.Canvas.fillText(n,c.Left,c.Bottom),f&&(this.Canvas.strokeStyle=l,this.Canvas.beginPath(),this.Canvas.moveTo(c.Left,c.Bottom),this.Canvas.lineTo(c.Right,c.Bottom),this.Canvas.stroke()),t.Enable&&(t.Botton={Rect:c,Type:2})}},this.TextEllipsis=function(t,e,a){if(!t)return null;if(t.length<a.length)return t;var i=a.length-3;if(i<0)return null;for(var r=t.slice(0,i),n=i;n<t.length;++n){var o=r+t[n]+"...";if(this.Canvas.measureText(o).width>e){r+="...";break}r+=t[n]}return r},this.DrawMultiBar=function(t,e,a){if(!e.Source||!we.IsNonEmptyArray(e.Source))return!1;var i=e.Source[t.DataIndex];if(!i)return!1;if(!we.IsNonEmptyArray(i.Value))return!1;for(var r=a.Width-this.BarMergin.Left-this.BarMergin.Right,n=a.Left+this.BarMergin.Left,o=a.Top+this.RowMergin.Top+this.BarMergin.Top,s=a.Height-this.RowMergin.Top-this.RowMergin.Bottom-this.BarMergin.Top-this.BarMergin.Bottom,l=n+r,h=0;h<i.Value.length;++h){var u=i.Value[h];if(!(u<=0)){if(n>=l)break;var C=r*u;C<1&&(C=1),n+C>l&&(C=l-n);var c=h;we.IsNonEmptyArray(i.Color)&&h<i.Color.length&&(c=i.Color[h]),this.Canvas.fillStyle=So.DealList.FieldColor.Bar[c],this.Canvas.fillRect(n,o,C,s),n+=C}}return!0},this.DrawCenterBar=function(t,e,a){if(!e.Source||!we.IsNonEmptyArray(e.Source))return!1;var i=e.Source[t.DataIndex];if(!i)return!1;if(!we.IsNonEmptyArray(i.Value))return!1;for(var r=(a.Width-this.BarMergin.Left-this.BarMergin.Right)/2,n=a.Left+this.BarMergin.Left,o=n+r,s=a.Top+this.RowMergin.Top+this.BarMergin.Top,l=a.Height-this.RowMergin.Top-this.RowMergin.Bottom-this.BarMergin.Top-this.BarMergin.Bottom,h=0;h<i.Value.length&&h<2;++h){var u=i.Value[h];if(!(u<=0)){u>1&&(u=1);var C=r*u;C<1&&(C=1);var c=h;we.IsNonEmptyArray(i.Color)&&h<i.Color.length&&(c=i.Color[h]),this.Canvas.fillStyle=So.DealList.FieldColor.Bar[c],0==h?this.Canvas.fillRect(o,s,-C,l):this.Canvas.fillRect(o,s,C,l)}}},this.DrawLine=function(t,e,a){if(!t)return!1;if(!we.IsNonEmptyArray(t.Data))return!1;var i=a.Width-this.ItemMergin.Left-this.ItemMergin.Right,r=a.Left+this.ItemMergin.Left,n=a.Top+this.ItemMergin.Top,o=a.Height-this.ItemMergin.Top-this.ItemMergin.Bottom,s=r+i,l=n+o,h=t.Max,u=t.Min;if(we.IsNumber(t.YClose))if(t.YClose==h&&t.YClose==u)h=t.YClose+.1*t.YClose,u=t.YClose-.1*t.YClose;else{var C=Math.max(Math.abs(t.YClose-h),Math.abs(t.YClose-u));h=t.YClose+C,u=t.YClose-C}var c=function(t){if(t<=u)return l;if(t>=h)return n;var t=o*(t-u)/(h-u);return l-t};this.Canvas.save();var f=null;if(we.IsNumber(t.YClose)){var d=c(t.YClose);d=p(d),f=d,this.Canvas.setLineDash([2,2]),this.Canvas.strokeStyle=this.CloseLineConfig.YCloseColor,this.Canvas.beginPath(),this.Canvas.moveTo(r,d),this.Canvas.lineTo(s,d),this.Canvas.stroke(),this.Canvas.setLineDash([])}t.Color?this.Canvas.strokeStyle=t.Color:this.Canvas.strokeStyle=this.CloseLineConfig.CloseColor;for(var D,d,m=!0,v={},g=0,T=0;T<t.Data.length;++T){var I=t.Data[T];we.IsNumber(I)&&(D=function(e){var a=t.Count;return 1==a?0==e?r:s:a<=0?r:e>=a?s:r+i*e/a}(T),d=c(I),m?(this.Canvas.beginPath(),this.Canvas.moveTo(D,d),m=!1,v={X:D,Y:d}):this.Canvas.lineTo(D,d),++g)}g>0&&(this.Canvas.stroke(),e.IsDrawArea&&we.IsNumber(f)&&(this.Canvas.lineTo(D,f),this.Canvas.lineTo(v.X,f),this.Canvas.closePath(),this.SetFillStyle(this.CloseLineConfig.AreaColor,r,n,r,l),this.Canvas.fill())),this.Canvas.restore()},this.DrawKLine=function(t,e,a,i){if(e.IsDrawCallback){var r=this.GetEventCallback(Kn.ON_REPORT_DRAW_KLINE);if(r||r.Callback){var n={Column:e,Data:i,KLineData:t,Rect:a,PreventDefault:!1};if(r.Callback(r,n,this),n.PreventDefault)return}}if(t&&we.IsNonEmptyArray(t.Data)){var o=t.Data[1],s=t.Data[2],l=[{Open:t.Data[0],High:o,Low:s,Close:t.Data[3]}];this.DrawKLineBar(l,o,s,a)}},this.DrawKLineBar=function(t,e,a,i){for(var r,n,o=i.Left+this.ItemMergin.Left,s=i.Width-this.ItemMergin.Left-this.ItemMergin.Right,o=i.Left+this.ItemMergin.Left,l=i.Top+this.ItemMergin.Top+4,h=i.Height-this.ItemMergin.Top-this.ItemMergin.Bottom-8,u=o+s,C=l+h,c=function(t){if(t<=a)return C;if(t>=e)return l;var t=h*(t-a)/(e-a);return C-t},f=this.KLineConfig.DataWidth,d=this.KLineConfig.DistanceWidth,D=o,m=0;m<t.length;++m,D+=f+d){var p=t[m];if(r=D,n=D+f,r+(n-r)/2,n>u)break;var v=c(p.Low),g=c(p.High),T=c(p.Open),I=c(p.Close);p.Open<p.Close?this.DrawKBarItem(p,f,this.KLineConfig.UpColor,1,r,n,v,g,T,I):p.Open>p.Close?this.DrawKBarItem(p,f,this.KLineConfig.DownColor,0,r,n,v,g,T,I):this.DrawKBarItem(p,f,this.KLineConfig.UnchagneColor,0,r,n,v,g,T,I)}},this.DrawKBarItem=function(t,e,a,i,r,n,o,s,l,h){var u=!1;1==i&&(u=!0);var C=Math.min(l,h),c=Math.max(l,h),f=Math.max(t.Open,t.Close),d=Math.min(t.Open,t.Close);this.Canvas.fillStyle=a,this.Canvas.strokeStyle=a;var D=r+(n-r)/2;if(u&&e%2!=0&&(e-=1),e>=4){if(t.High>f){this.Canvas.beginPath();var m=D;u&&(m=r+e/2),this.Canvas.moveTo(p(m),p(C)),this.Canvas.lineTo(p(m),p(s)),this.Canvas.stroke()}if(Math.abs(c-C)<1?this.Canvas.fillRect(g(r),g(C),g(e),1):u?(this.Canvas.beginPath(),this.Canvas.rect(p(r),p(C),g(e),g(c-C)),this.Canvas.stroke()):this.Canvas.fillRect(g(r),g(C),g(e),g(c-C)),t.Low<d){this.Canvas.beginPath();var m=D;u&&(m=r+e/2),this.Canvas.moveTo(p(m),p(c)),this.Canvas.lineTo(p(m),p(o)),this.Canvas.stroke()}}},this.SetFillStyle=function(t,e,a,i,r){if(Array.isArray(t)){var n=this.Canvas.createLinearGradient(e,a,i,r),o=1/t.length;for(var s in t)n.addColorStop(s*o,t[s]);this.Canvas.fillStyle=n}else this.Canvas.fillStyle=t},this.GetCustomTextDrawInfo=function(t,e,a,i,r){var n=this.GetEventCallback(Kn.ON_DRAW_CUSTOM_TEXT);if(!n||!n.Callback)return!1;var o={Symbol:e,Column:t,Value:a,Data:r,Out:{Text:null,TextColor:null,TextAlign:null}};return n.Callback(n,o,this),o.Out.Text&&(i.Text=o.Out.Text),o.Out.TextColor&&(i.TextColor=o.Out.TextColor),o.Out.TextAlign&&(i.TextAlign=o.Out.TextAlign),o.Out.BGColor&&(i.BGColor=o.Out.BGColor),!0},this.FormatDrawInfo=function(t,e,a,i){if(!t.IsDrawCallback)return!1;var r=this.GetEventCallback(Kn.ON_REPORT_FORMAT_DRAW_INFO);if(!r||!r.Callback)return!1;var n={Stock:e,Column:t,Data:i,DrawInfo:a};r.Callback(r,n,this)},this.GetFixedRowTextDrawInfo=function(t,e,a,i){var r=this.GetEventCallback(Kn.ON_DRAW_REPORT_FIXEDROW_TEXT);if(!r||!r.Callback)return!1;var n={RowIndex:t,ColIndex:e,Column:a,Data:this.FixedRowData,Out:{Text:null,TextColor:null,TextAlign:null}};return r.Callback(r,n,this),n.Out.Text&&(i.Text=n.Out.Text),n.Out.TextColor&&(i.TextColor=n.Out.TextColor),n.Out.TextAlign&&(i.TextAlign=n.Out.TextAlign),!0},this.GetVolColor=function(t,e){var a=this.GetEventCallback(Kn.ON_DRAW_DEAL_VOL_COLOR);if(a&&a.Callback){var i={Data:e,TextColor:null};if(a.Callback(a,i,this),i.TextColor)return i.TextColor}return t.TextColor},this.GetNameColor=function(t,e,a){var i=this.GetEventCallback(Kn.ON_DRAW_REPORT_NAME_COLOR);if(i&&i.Callback){var r={Symbol:e,TextColor:null,RowType:a};if(i.Callback(i,r,this),r.TextColor)return r.TextColor}return t.TextColor},this.GetFontHeight=function(t,e){return c(this.Canvas,t,e)},this.OnMouseDown=function(t,e,a){if(!this.Data)return null;if(this.Tab){var i=this.Tab.OnMouseDown(t,e,a);if(i)return{Type:1,Tab:i}}if(this.VScrollbar){var r=this.VScrollbar.OnMouseDown(t,e,a);if(r)return{Type:5,VScrollbar:r}}var n=C(),o={X:t/n,Y:e/n};if(this.UIElement)var s={Left:this.UIElement.getBoundingClientRect().left,Top:this.UIElement.getBoundingClientRect().top};else var s={Left:null,Top:null};var l=this.PtInFixedBody(t,e);if(l){var h=!0,u=Kn.ON_CLICK_REPORT_FIXEDROW;return 2==a.button&&(u=Kn.ON_RCLICK_REPORT_FIXEDROW),this.SendClickEvent(u,{Data:l,X:t,Y:e,e:a,Inside:o,UIElement:s}),this.SelectedFixedRow=l.Index,this.SelectedRow=-1,this.MultiSelectedRow=[],{Type:4,Redraw:h,Row:l}}var l=this.PtInBody(t,e);if(l){var c={Redraw:!1};this.OnClickButton(t,e,a,c);var h=!0;if(1==this.MultiSelectModel){if(a&&a.ctrlKey){var f=this.MultiSelectedRow.indexOf(l.DataIndex);f>=0?this.MultiSelectedRow.splice(f,1):this.MultiSelectedRow.push(l.DataIndex)}else a&&a.shiftKey?this.OnShiftClickRow(l):1==this.MultiSelectedRow.length&&this.MultiSelectedRow[0]==l.DataIndex?h=!1:this.MultiSelectedRow=[l.DataIndex];this.SelectedFixedRow=-1}else 0==this.SelectedModel?(this.SelectedRow==l.Index&&(h=!1),this.SelectedRow=l.Index,this.SelectedFixedRow=-1):(this.SelectedRow==l.DataIndex&&(h=!1),this.SelectedRow=l.DataIndex,this.SelectedFixedRow=-1);var u=Kn.ON_CLICK_REPORT_ROW;return 2==a.button&&(u=Kn.ON_RCLICK_REPORT_ROW),this.SendClickEvent(u,{Data:l,X:t,Y:e,e:a,Inside:o,UIElement:s}),{Type:2,Redraw:h||c.Redraw,Row:l}}var d=this.PtInHeader(t,e);if(d){var u=Kn.ON_CLICK_REPORT_HEADER;return 2==a.button?u=Kn.ON_RCLICK_REPORT_HEADER:0==a.button&&(u=Kn.ON_CLICK_REPORT_HEADER),this.SendClickEvent(u,{Data:l,X:t,Y:e,e:a,Inside:o,UIElement:s}),{Type:3,Redraw:h,Header:d}}return null},this.OnShiftClickRow=function(t){if(this.MultiSelectedRow.length<=0)return void this.MultiSelectedRow.push(t.DataIndex);for(var e=null,a=null,i=0;i<this.MultiSelectedRow.length;++i){var r=this.MultiSelectedRow[i];if((null==e||e<r)&&(e=r),(null==a||a>r)&&(a=r),r==t.DataIndex)return void this.MultiSelectedRow.splice(i,1)}if(e==a){var n=t.DataIndex,o=e;n>o&&(n=e,o=t.DataIndex),this.MultiSelectedRow=[];for(var i=n;i<=o;++i)this.MultiSelectedRow.push(i)}else if(t.DataIndex<=e&&t.DataIndex>=a)this.MultiSelectedRow.push(t.DataIndex);else{var n=Math.min(t.DataIndex,a),o=Math.max(t.DataIndex,e);this.MultiSelectedRow=[];for(var i=n;i<=o;++i)this.MultiSelectedRow.push(i)}},this.OnDrawgRow=function(t,e,a){if(!this.Data)return null;if(!we.IsNonEmptyArray(this.Data.Data))return null;var i=this.RowHeight/2,r=this.RectClient.Top+this.HeaderHeight,n=this.ChartBorder.GetChartWidth(),o=r+this.FixedRowHeight*this.FixedRowCount;if(e<o+i)return{Type:5};for(var s=this.Data.YOffset,l=0;s<this.Data.Data.length&&l<this.RowCount;++s,++l){var h=this.Data.Data[s],u={Left:0,Top:o,Right:n,Bottom:o+this.RowHeight};if(u.Top+=i,u.Bottom+=i,t>=u.Left&&t<=u.Right&&e>=u.Top&&e<=u.Bottom){var C={DataIndex:s,Index:l,Symbol:h,Pos:0};return 0==l?C.Pos=1:l==this.RowCount-1&&(C.Pos=2),{Type:2,Data:C}}o+=this.RowHeight}return l<this.RowCount?{Type:6}:{Type:7}},this.OnClickButton=function(t,e,a,i){if(0!=a.button)return!1;var r=this.GetButtonData(t,e);if(!r)return!0;if(0===r.Type){var n={Column:r.Column,Index:r.Index,Stock:r.Stock,ColumnIndex:r.ColumnIndex,Data:r.Data,Value:!0,PreventDefault:!1};return we.IsBool(r.Data.Checked)&&(n.Value=!r.Data.Checked),this.SendClickEvent(Kn.ON_CLICK_REPORT_CHECKBOX,n),n.PreventDefault||(we.IsBool(r.Data.Checked)?r.Data.Checked=!r.Data.Checked:r.Data.Checked=!0),i.Redraw=!0,!0}if(1===r.Type){var n={Column:r.Column,Index:r.Index,Stock:r.Stock,ColumnIndex:r.ColumnIndex,Data:r.Data};return this.SendClickEvent(Kn.ON_CLICK_REPORT_BUTTON,n),i.Redraw=!0,!0}if(2===r.Type){var n={Column:r.Column,Index:r.Index,Stock:r.Stock,ColumnIndex:r.ColumnIndex,Data:r.Data};return this.SendClickEvent(Kn.ON_CLICK_REPORT_LINK,n),i.Redraw=!0,!0}return!1},this.OnDblClick=function(t,e,a){if(!this.Data)return!1;var i=this.PtInHeaderDragBorder(t,e);if(i)return this.SendClickEvent(Kn.ON_DBCLICK_REPORT_DRAG_COLUMN_WIDTH,{Data:i,X:t,Y:e}),!0;var r=this.PtInBody(t,e);return!!r&&(this.SendClickEvent(Kn.ON_DBCLICK_REPORT_ROW,{Data:r,X:t,Y:e}),!0)},this.PtInClient=function(t,e){return t>this.RectClient.Left&&t<this.RectClient.Right&&e>this.RectClient.Top&&e<this.RectClient.Bottom},this.PtInBody=function(t,e){if(!this.Data)return null;if(!we.IsNonEmptyArray(this.Data.Data))return null;for(var a=this.RectClient.Top+this.HeaderHeight,i=this.RectClient.Left,r=this.RectClient.Right,n=(this.RectClient.Right,this.RectClient.Left,a+this.FixedRowHeight*this.FixedRowCount),o=this.Data.YOffset,s=0;o<this.Data.Data.length&&s<this.RowCount;++o,++s){var l=this.Data.Data[o],h={Left:i,Top:n,Right:r,Bottom:n+this.RowHeight};if(t>=h.Left&&t<=h.Right&&e>=h.Top&&e<=h.Bottom){var u={Rect:h,DataIndex:o,Index:s,Symbol:l};return u.Item=this.PtInItem(t,e,h.Top,h.Bottom),u}n+=this.RowHeight}return null},this.PtInFixedBody=function(t,e){if(this.FixedRowCount<=0)return null;for(var a=this.RectClient.Top+this.HeaderHeight,i=this.RectClient.Left,r=this.RectClient.Right,n=(this.RectClient.Right,this.RectClient.Left,a),o=0;o<this.FixedRowCount;++o){var s={Left:i,Top:n,Right:r,Bottom:n+this.FixedRowHeight};if(t>=s.Left&&t<=s.Right&&e>=s.Top&&e<=s.Bottom){var l={Rect:s,Index:o};return l.Item=this.PtInItem(t,e,s.Top,s.Bottom),l}n+=this.FixedRowHeight}return null},this.PtInItem=function(t,e,a,i){for(var r=this.RectClient.Left,n=this.RectClient.Right,o=r,s=0;s<this.FixedColumn&&s<this.Column.length;++s){var l=this.Column[s],h={Left:o,Right:o+l.Width,Top:a,Bottom:i};if(t>=h.Left&&t<=h.Right&&e>=h.Top&&e<=h.Bottom)return{Rect:h,Column:l,Index:s,IsFixed:!0};o+=l.Width}for(var s=this.FixedColumn+this.Data.XOffset;s<this.Column.length;++s){var l=this.Column[s];if(o>=n)break;var h={Left:o,Right:o+l.Width,Top:a,Bottom:i};if(t>=h.Left&&t<=h.Right&&e>=h.Top&&e<=h.Bottom)return{Rect:h,Column:l,Index:s,IsFixed:!1};o+=l.Width}return null},this.PtInHeader=function(t,e){if(!this.IsShowHeader)return null;var a=this.RectClient.Left,i=this.RectClient.Right,r=this.RectClient.Top,n=r+this.HeaderHeight;return t>=a&&t<=i&&e>=r&&e<=n?this.PtInItem(t,e,r,n):null},this.IsPtInBody=function(t,e){var a=this.RectClient.Top+this.HeaderHeight,i=this.RectClient.Left,r=this.RectClient.Right,n=this.RectClient.Bottom;return t>=i&&t<=r&&e>=a&&e<=n},this.IsPtInHeader=function(t,e){if(!this.IsShowHeader)return!1;var a=this.RectClient.Left,i=this.RectClient.Right,r=this.RectClient.Top,n=r+this.HeaderHeight;return t>=a&&t<=i&&e>=r&&e<=n},this.SendClickEvent=function(t,e){var a=this.GetEventCallback(t);a&&a.Callback&&a.Callback(a,e,this)},this.DrawDragRow=function(){if(this.DragRow){var t=this.DragRow;if(t.Data&&t.Inside&&t.Data.Row){var e=t.Data.Row.DataIndex;if(we.IsNumber(e)&&!(e<0)){var a=t.Inside.Y-this.RowHeight/2,i=a,r=this.RectClient.Left,n=this.RectClient.Right-this.RectClient.Left;this.Canvas.fillStyle=this.DragRowColor,this.Canvas.fillRect(r,a,n,this.RowHeight);var o=this.Data.Data[e],s={Symbol:o,Stock:null,Block:null};this.GetStockDataCallback&&(s.Stock=this.GetStockDataCallback(o)),this.GetBlockDataCallback&&(s.Block=this.GetBlockDataCallback(o)),s.Decimal=sr(o);var l=this.RectClient.Right;this.Canvas.font=this.ItemFont;for(var h=0;h<this.FixedColumn&&h<this.Column.length;++h){var u=this.Column[h];if(this.DrawItem(e,s,u,r,i,3),(r+=u.Width)>=l)break}for(var h=this.FixedColumn+this.Data.XOffset;h<this.Column.length;++h){var u=this.Column[h];if(this.DrawItem(e,s,u,r,i,3),(r+=u.Width)>=l)break}}}}},this.GetTooltipData=function(t,e){if(!we.IsNonEmptyArray(this.TooltipRect))return null;for(var a=0;a<this.TooltipRect.length;++a){var i=this.TooltipRect[a],r=i.Rect;if(r&&(t>=r.Left&&t<=r.Right&&e>=r.Top&&e<=r.Bottom))return{Rect:i.Rect,Stock:i.Stock,Column:i.Column,Index:i.Index,Type:i.Type,Data:i.Data}}return null},this.GetButtonData=function(t,e){if(!we.IsNonEmptyArray(this.ButtonRect))return null;for(var a=0;a<this.ButtonRect.length;++a){var i=this.ButtonRect[a],r=i.Rect;if(r&&(t>=r.Left&&t<=r.Right&&e>=r.Top&&e<=r.Bottom))return{Rect:i.Rect,Stock:i.Stock,Column:i.Column,Index:i.Index,Type:i.Type,Data:i.Data,ColumnIndex:i.ColumnIndex}}},this.PtInHeaderDragBorder=function(t,e){if(!this.IsShowHeader)return null;var a=this.RectClient.Left,i=this.RectClient.Right,r=this.RectClient.Top,n=r+this.HeaderHeight;if(!(t>=a&&t<=i&&e>=r&&e<=n))return null;for(var o=a,s=5*C(),l=0;l<this.FixedColumn&&l<this.Column.length;++l){var h=this.Column[l];if(!0===h.EnableDragWidth){var u={Right:o+h.Width,Top:r,Bottom:n};if(u.Left=u.Right-s,t>=u.Left&&t<=u.Right&&e>=u.Top&&e<=u.Bottom)return{Rect:u,Column:h,Index:l,IsFixed:!0}}o+=h.Width}for(var l=this.FixedColumn+this.Data.XOffset;l<this.Column.length;++l){var h=this.Column[l];if(o>=i)break;if(!0===h.EnableDragWidth){var u={Right:o+h.Width,Top:r,Bottom:n};if(u.Left=u.Right-s,t>=u.Left&&t<=u.Right&&e>=u.Top&&e<=u.Bottom)return{Rect:u,Column:h,Index:l,IsFixed:!1}}o+=h.Width}return null},this.SetSelectedRow=function(t){if(!t)return!1;if(0===this.SelectedModel)return!1;if(t.Symbol){for(var e=t.Symbol,a=!1,i=0;i<this.Data.Data.length;++i){if(e==this.Data.Data[i]){this.SelectedRow=i,a=!0;break}}return!!a&&(!0===t.AutoYScroll&&this.UpdatePageYOffset({SelectedRow:this.SelectedRow}),a)}return!1},this.UpdatePageYOffset=function(t){if(t){var e=t.SelectedRow;if(!(e<0)){var a=this.GetCurrentPageStatus();a.IsSinglePage||e>=a.Start&&e<=a.End||(this.Data.YOffset=e)}}}}function Vr(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ChartReportTab",this.IsDrawFirst=!1,this.GetEventCallback,this.Report,this.IsShow=!0,this.TabList=[],this.SelectedTabIndex=-1,this.MoveOnTabIndex=-1,this.MaxPos=15,this.CurrentPos=15,this.Step=1,this.ScrollBarWidth=So.Report.Tab.ScrollBarWidth,this.ButtonColor=So.Report.Tab.ButtonColor,this.BarColor=So.Report.Tab.BarColor,this.BorderColor=So.Report.Tab.BorderColor,this.Mergin={Left:2,Right:2,Top:2,Bottom:2},this.TabFontConfig={Size:So.Report.Tab.Font.Size,Name:So.Report.Tab.Font.Name},this.TabFont,this.TabTitleColor=So.Report.Tab.TabTitleColor,this.TabSelectedTitleColor=So.Report.Tab.TabSelectedTitleColor,this.TabSelectedBGColor=So.Report.Tab.TabSelectedBGColor,this.TabMoveOnTitleColor=So.Report.Tab.TabMoveOnTitleColor,this.TabBGColor=So.Report.Tab.TabBGColor,this.TabMergin={Top:So.Report.Tab.Mergin.Top,Left:So.Report.Tab.Mergin.Left,Right:So.Report.Tab.Mergin.Right,Bottom:So.Report.Tab.Mergin.Bottom},this.Height,this.ButtonSize=25,this.TabWidth=0,this.RectScroll={Left:null,Right:null,Bar:null,Client:null},this.ReloadResource=function(t){this.ScrollBarWidth=So.Report.Tab.ScrollBarWidth,this.ButtonColor=So.Report.Tab.ButtonColor,this.BarColor=So.Report.Tab.BarColor,this.BorderColor=So.Report.Tab.BorderColor,this.TabFontConfig={Size:So.Report.Tab.Font.Size,Name:So.Report.Tab.Font.Name},this.TabTitleColor=So.Report.Tab.TabTitleColor,this.TabSelectedTitleColor=So.Report.Tab.TabSelectedTitleColor,this.TabSelectedBGColor=So.Report.Tab.TabSelectedBGColor,this.TabMoveOnTitleColor=So.Report.Tab.TabMoveOnTitleColor,this.TabBGColor=So.Report.Tab.TabBGColor,this.TabMergin={Top:So.Report.Tab.Mergin.Top,Left:So.Report.Tab.Mergin.Left,Right:So.Report.Tab.Mergin.Right,Bottom:So.Report.Tab.Mergin.Bottom}},this.SetTabList=function(t){this.TabList=[];for(var e=0;e<t.length;++e){var a=t[e];if(a.Title){var i={Title:a.Title,IsMenu:!1,FixedSymbol:[],FixedRowCount:0};if(a.ID&&(i.ID=a.ID),a.CommandID&&(i.CommandID=a.CommandID),we.IsBool(a.IsMenu)&&(i.IsMenu=a.IsMenu),we.IsNonEmptyArray(a.FixedSymbol))for(var r=0;r<a.FixedSymbol.length;++r){var n=a.FixedSymbol[r];n&&n.Symbol&&(i.FixedSymbol.push(n),++i.FixedRowCount)}we.IsNonEmptyArray(a.ArySubMenu)&&(i.ArySubMenu=a.ArySubMenu.slice()),this.TabList.push(i)}}},this.CalculateSize=function(){var t=C();this.TabFont=this.TabFontConfig.Size*t+"px "+this.TabFontConfig.Name,this.Height=this.GetFontHeight(this.TabFont,"8")+this.Mergin.Top+this.Mergin.Bottom;var e=Math.min(25,this.Height-this.Mergin.Top-this.Mergin.Bottom);this.ButtonSize=e},this.DrawScrollbar=function(t,e,a,i){this.RectScroll={Left:null,Right:null,Bar:null,Client:null};var r=this.Report.GetXScrollPos(),n=this.Report.GetXScrollRange();if(!(n<=0||this.Report.IsShowAllColumn)){var t=t+this.TabWidth;if(!(t+2*this.ScrollBarWidth>a)){this.MaxPos=n,this.CurrentPos=r;var o=this.ButtonSize,s={Left:t+this.Mergin.Left,Top:i-o-this.Mergin.Bottom,Width:o,Height:o};s.Right=s.Left+o,s.Bottom=s.Top+o;var l={Left:a-o-this.Mergin.Right,Top:s.Top,Width:o,Height:o};l.Right=l.Left+o,l.Bottom=l.Top+o,this.Canvas.fillStyle=this.ButtonColor,this.Canvas.fillRect(s.Left,s.Top,s.Width,s.Height),this.Canvas.fillRect(l.Left,l.Top,l.Width,l.Height),this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(s.Left,s.Top,s.Width,s.Height),this.Canvas.strokeRect(l.Left,l.Top,l.Width,l.Height);var h=l.Left-2-(s.Right+2),u=h-this.ScrollBarWidth,C=u*this.CurrentPos/this.MaxPos,c=s.Right+2+C,f={Left:c,Top:s.Top,Width:this.ScrollBarWidth,Height:s.Height};f.Right=f.Left+this.ScrollBarWidth,f.Bottom=s.Bottom,this.Canvas.fillStyle=this.BarColor,this.Canvas.fillRect(f.Left,f.Top,f.Width,f.Height),this.RectScroll.Left=s,this.RectScroll.Right=l,this.RectScroll.Bar=f,this.RectScroll.Client={Left:s.Right,Right:l.Left,Top:s.Top,Bottom:s.Bottom}}}},this.DrawTab=function(t,e,a,i){this.TabWidth=0,this.Canvas.font=this.TabFont,this.Canvas.textBaseline="bottom";var r,n=i-e,o=t+1,s=i-this.TabMergin.Bottom,l=0,h=0,u=0;for(u=0;u<this.TabList.length;++u){var C=this.TabList[u];r=C.Title,C.IsMenu&&(r+="â²"),l=o+this.TabMergin.Left,h=this.Canvas.measureText(r).width;var c={Left:o,Top:e,Width:h+this.TabMergin.Left+this.TabMergin.Right,Height:n};if(c.Right=c.Left+c.Width,c.Bottom=c.Top+c.Height,c.Right>a)break;var f=this.TabBGColor;u==this.SelectedTabIndex&&(f=this.TabSelectedBGColor),this.Canvas.fillStyle=f,this.Canvas.fillRect(c.Left,c.Top,c.Width,c.Height),this.Canvas.textAlign="left";var d=this.TabTitleColor;u==this.MoveOnTabIndex&&(d=this.TabMoveOnTitleColor),u==this.SelectedTabIndex&&(d=this.TabSelectedTitleColor),this.Canvas.fillStyle=d,this.Canvas.fillText(r,l,s),C.Rect=c,o+=c.Width+1,this.TabWidth+=c.Width+1}for(;u<this.TabList.length;++u){var C=this.TabList[u];C.Rect=null}},this.OnMouseDown=function(t,e,a){var i=this.PtInTab(t,e);return i||this.PtInScroll(t,e)},this.PtInScroll=function(t,e){if(!this.RectScroll)return null;if(this.RectScroll.Left){var a=this.RectScroll.Left;if(t>=a.Left&&t<=a.Right&&e>=a.Top&&e<=a.Bottom)return{Type:1,Rect:a}}if(this.RectScroll.Right){var a=this.RectScroll.Right;if(t>=a.Left&&t<=a.Right&&e>=a.Top&&e<=a.Bottom)return{Type:2,Rect:a}}if(this.RectScroll.Bar){var a=this.RectScroll.Bar;if(t>=a.Left&&t<=a.Right&&e>=a.Top&&e<=a.Bottom)return{Type:3,Rect:a}}if(this.RectScroll.Client){var a=this.RectScroll.Client;if(t>=a.Left&&t<=a.Right&&e>=a.Top&&e<=a.Bottom)return{Type:4,Rect:a,Pos:this.GetScrollPostionByPoint(t,e)}}return null},this.PtInTab=function(t,e){for(var a=0;a<this.TabList.length;++a){var i=this.TabList[a];if(i.Rect){var r=i.Rect;if(t>=r.Left&&t<=r.Right&&e>=r.Top&&e<=r.Bottom){var n={Type:5,Rect:r,Tab:i,Index:a};return i.IsMenu,n}}}return null},this.GetFontHeight=function(t,e){return c(this.Canvas,t,e)},this.GetScrollPostionByPoint=function(t,e){var a=this.RectScroll.Client,i=a.Right-a.Left-this.ScrollBarWidth;return parseInt(this.MaxPos*(t-a.Left)/i)}}function Hr(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ChartPageInfo",this.IsDrawFirst=!1,this.IsShow=!1,this.SizeChange=!0,this.Report,this.FontConfig={Size:So.Report.PageInfo.Font.Size,Name:So.Report.PageInfo.Font.Name},this.TextColor=So.Report.PageInfo.TextColor,this.BGColor=So.Report.PageInfo.BGColor,this.Mergin={Top:So.Report.PageInfo.Mergin.Top,Left:So.Report.PageInfo.Mergin.Left,Right:So.Report.PageInfo.Mergin.Right,Bottom:So.Report.PageInfo.Mergin.Bottom},this.Font,this.TextHeight=0,this.ReloadResource=function(t){this.FontConfig={Size:So.Report.PageInfo.Font.Size,Name:So.Report.PageInfo.Font.Name},this.TextColor=So.Report.PageInfo.TextColor,this.BGColor=So.Report.PageInfo.BGColor,this.Mergin={Top:So.Report.PageInfo.Mergin.Top,Left:So.Report.PageInfo.Mergin.Left,Right:So.Report.PageInfo.Mergin.Right,Bottom:So.Report.PageInfo.Mergin.Bottom}},this.Draw=function(){if(this.IsShow&&this.Report){var t=this.Report.GetCurrentPageStatus();if(!t.IsSinglePage){if(this.SizeChange){var e=C();this.Font=this.FontConfig.Size*e+"px "+this.FontConfig.Name,this.TextHeight=c(this.Canvas,this.Font,"æ")+this.Mergin.Top+this.Mergin.Bottom}var a=this.ChartBorder.GetLeft(),i=this.ChartBorder.GetRight(),r=this.ChartBorder.GetBottom()-2,n=a+(i-a)/2,o=t.DataCount+"/"+t.DataCount;this.Canvas.font=this.Font;var s=this.Canvas.measureText(o).width+4,l=n-s/2-this.Mergin.Left,h=r-this.TextHeight;this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(l,h,s+(this.Mergin.Left+this.Mergin.Right),this.TextHeight),o=t.Start+1+"/"+t.DataCount,this.Canvas.textAlign="center",this.Canvas.textBaseline="bottom",this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(o,n,r-this.Mergin.Bottom),this.SizeChange=!1}}}}function Yr(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ChartVScrollbar",this.IsDrawFirst=!1,this.GetEventCallback,this.Report,this.MaxPos=15,this.CurrentPos=15,this.Step=1,this.ButtonSize=25,this.Enable=!1,this.LastStatus={Draw:!1},this.GlobalOption,this.Style=0,this.ScrollBarHeight=So.Report.VScrollbar.ScrollBarHeight,this.ButtonColor=So.Report.VScrollbar.ButtonColor,this.BarColor=So.Report.VScrollbar.BarColor,this.BorderColor=So.Report.VScrollbar.BorderColor,this.BGColor=So.Report.VScrollbar.BGColor,this.Margin={Left:2,Right:2,Top:2,Bottom:2},this.BarWithConfig={Size:So.Report.VScrollbar.BarWidth.Size},this.RectScroll={Top:null,Bottom:null,Bar:null,Client:null},this.SetOption=function(t){if(t&&(we.IsBool(t.Enable)&&(this.Enable=t.Enable),we.IsNumber(t.Style)&&(this.Style=t.Style),we.IsNumber(t.BarWidth)&&(this.BarWithConfig.Size=t.BarWidth),t.Margin)){var e=t.Margin;we.IsNumber(e.Top)&&(this.Margin.Top=e.Top),we.IsNumber(e.Bottom)&&(this.Margin.Bottom=e.Bottom),we.IsNumber(e.Left)&&(this.Margin.Left=e.Left),we.IsNumber(e.Right)&&(this.Margin.Right=e.Right)}},this.ReloadResource=function(t){this.ScrollBarHeight=So.Report.VScrollbar.ScrollBarHeight,this.ButtonColor=So.Report.VScrollbar.ButtonColor,this.BarColor=So.Report.VScrollbar.BarColor,this.BorderColor=So.Report.VScrollbar.BorderColor,this.BGColor=So.Report.VScrollbar.BGColor,this.BarWithConfig={Size:So.Report.VScrollbar.BarWidth.Size}},this.CalculateSize=function(){var t=C(),e=this.BarWithConfig.Size*t+this.Margin.Left+this.Margin.Right;this.ButtonSize=Math.min(25,e)},this.DrawScrollbarStyle2=function(t,e,a,i){if(this.LastStatus.Draw=!1,this.RectScroll={Left:null,Right:null,Bar:null,Client:null},this.Enable){if(this.IsShowCallback()){var r=this.Report.GetCurrentPageStatus();if(!r.IsSinglePage){var n=r.Start,o=r.DataCount-r.PageSize,s=this.ButtonSize;this.MaxPos=o,this.CurrentPos=n;var l=e+this.Margin.Top+2,h=i-this.Margin.Bottom-2,u=h-l,C=u-this.ScrollBarHeight,c=C*this.CurrentPos/this.MaxPos,f=l+2+c,d={Right:a-this.Margin.Right,Top:f,Width:s,Height:this.ScrollBarHeight};d.Left=d.Right-s,d.Bottom=d.Top+d.Height,d.Bottom>h-2&&(d.Bottom=h-2,d.Top=d.Bottom-d.Height),this.RectScroll.Bar=d,this.RectScroll.Client={Left:d.Left,Right:d.Right,Top:l,Bottom:h};var D={Right:a,Top:e,Bottom:i,Width:s+this.Margin.Right+this.Margin.Left};D.Left=D.Right-D.Width,D.Height=D.Bottom-D.Top,this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(D.Left,D.Top,D.Width,D.Height),this.Canvas.fillStyle=this.BarColor,this.Canvas.fillRect(d.Left,d.Top,d.Width,d.Height),this.LastStatus.Draw=!0}}}},this.DrawScrollbarStyle=function(t,e,a,i){if(this.LastStatus.Draw=!1,this.RectScroll={Left:null,Right:null,Bar:null,Client:null},this.Enable){if(this.IsShowCallback()){var r=this.Report.GetCurrentPageStatus();if(!r.IsSinglePage){var n=r.Start,o=r.DataCount-r.PageSize,s=this.ButtonSize;this.MaxPos=o,this.CurrentPos=n;var l={Right:a-this.Margin.Right,Top:e+this.Margin.Top,Width:s,Height:s};l.Left=l.Right-s,l.Bottom=l.Top+s;var h={Right:a-this.Margin.Right,Bottom:i-this.Margin.Bottom,Width:s,Height:s};h.Left=h.Right-s,h.Top=h.Bottom-s;var u=h.Top-2-(l.Bottom+2),C=u-this.ScrollBarHeight,c=C*this.CurrentPos/this.MaxPos,f=l.Bottom+2+c,d={Right:a-this.Margin.Right,Top:f,Width:s,Height:this.ScrollBarHeight};d.Left=d.Right-s,d.Bottom=d.Top+d.Height,d.Bottom>h.Top-2&&(d.Bottom=h.Top-2,d.Top=d.Bottom-d.Height),this.RectScroll.Top=l,this.RectScroll.Bottom=h,this.RectScroll.Bar=d,this.RectScroll.Client={Left:l.Left,Right:l.Right,Top:l.Bottom,Bottom:h.Top};var D={Right:a,Top:e,Bottom:i,Width:s+this.Margin.Right+this.Margin.Left};D.Left=D.Right-D.Width,D.Height=D.Bottom-D.Top,this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(D.Left,D.Top,D.Width,D.Height),this.Canvas.fillStyle=this.ButtonColor,this.Canvas.fillRect(l.Left,l.Top,l.Width,l.Height),this.Canvas.fillRect(h.Left,h.Top,h.Width,h.Height),this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(l.Left,l.Top,l.Width,l.Height),this.Canvas.strokeRect(h.Left,h.Top,h.Width,h.Height),this.Canvas.fillStyle=this.BarColor,this.Canvas.fillRect(d.Left,d.Top,d.Width,d.Height),this.LastStatus.Draw=!0}}}},this.DrawScrollbar=function(t,e,a,i){1==this.Style?this.DrawScrollbarStyle2(t,e,a,i):this.DrawScrollbarStyle(t,e,a,i)},this.OnMouseDown=function(t,e,a){return this.PtInScroll(t,e)},this.PtInScroll=function(t,e){if(!this.RectScroll)return null;if(this.RectScroll.Top){var a=this.RectScroll.Top;if(t>=a.Left&&t<=a.Right&&e>=a.Top&&e<=a.Bottom)return{Type:1,Rect:a}}if(this.RectScroll.Bottom){var a=this.RectScroll.Bottom;if(t>=a.Left&&t<=a.Right&&e>=a.Top&&e<=a.Bottom)return{Type:2,Rect:a}}if(this.RectScroll.Bar){var a=this.RectScroll.Bar;if(t>=a.Left&&t<=a.Right&&e>=a.Top&&e<=a.Bottom)return{Type:3,Rect:a}}if(this.RectScroll.Client){var a=this.RectScroll.Client;if(t>=a.Left&&t<=a.Right&&e>=a.Top&&e<=a.Bottom)return{Type:4,Rect:a,Pos:this.GetScrollPostionByPoint(t,e)}}return null},this.GetScrollPostionByPoint=function(t,e){var a=this.RectScroll.Client,i=a.Bottom-a.Top-this.ScrollBarHeight;return parseInt(this.MaxPos*(e-a.Top)/i)}}function Xr(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ChartCellTooltip",this.BGColor="rgba(255,255,225, 0.9)",this.BorderColor="rgb(0,0,0)",this.Margin={Left:5,Right:5,Top:4,Bottom:5},this.Font=13*C()+"px å¾®è½¯éé»",this.TextColor="rgb(0,0,0)",this.YOffset=20,this.XOffset=5,this.Point,this.Data,this.Draw=function(){if(this.Canvas&&this.Data&&we.IsNonEmptyArray(this.Data.AryText)&&this.Point){var t={Width:0,Height:0,Text:[]};this.CalculateTextSize(this.Data.AryText,t),we.IsNonEmptyArray(t.Text)&&this.DrawTooltip(this.Data.AryText,t)}},this.CalculateTextSize=function(t,e){for(var a=0,i=0,r=0;r<t.length;++r){var n=t[r],o=0,s=0;if(n.Title||n.Text){n.Title&&(n.TitleFont?this.Canvas.font=n.TitleFont:this.Canvas.font=this.Font,s=this.Canvas.measureText(n.Title).width,o=this.Canvas.measureText("æ").width);var l=0,h=0;n.Text&&(n.Font?this.Canvas.font=n.Font:this.Canvas.font=this.Font,l=this.Canvas.measureText(n.Text).width,h=this.Canvas.measureText("æ").width);var u=s+l,C=Math.max(h,o);if(we.IsNumber(n.Space)&&(u+=n.Space),n.Margin){var c=n.Margin;we.IsNumber(c.Left)&&(u+=c.Left),we.IsNumber(c.Right)&&(u+=c.Right),we.IsNumber(c.Top)&&(C+=c.Top),we.IsNumber(c.Bottom)&&(C+=c.Bottom)}a<u&&(a=u),i+=C,e.Text[r]={Width:u,Height:C,TitleWidth:s,TextWidth:l}}}if(this.Margin){var c=this.Margin;we.IsNumber(c.Left)&&(a+=c.Left),we.IsNumber(c.Right)&&(a+=c.Right),we.IsNumber(c.Top)&&(i+=c.Top),we.IsNumber(c.Bottom)&&(i+=c.Bottom)}e.Width=a,e.Height=i},this.DrawTooltip=function(t,e){var a={Left:this.Point.X+this.XOffset,Top:this.Point.Y+this.YOffset,Width:e.Width,Height:e.Height};a.Right=a.Left+a.Width,a.Bottom=a.Top+a.Height;var i=this.ChartBorder.GetBorder();a.Bottom>i.ChartHeight&&(a.Bottom=this.Point.Y,a.Top=a.Bottom-a.Height),a.Right>i.ChartWidth&&(a.Right=this.Point.X,a.Left=a.Right-a.Width),this.BGColor&&(this.Canvas.fillStyle=this.BGColor,this.Canvas.fillRect(p(a.Left),p(a.Top),g(a.Width),g(a.Height))),this.BorderColor&&(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(p(a.Left),p(a.Top),g(a.Width),g(a.Height)));var r=a.Left,n=a.Top;this.Margin&&we.IsNumber(this.Margin.Left)&&(r+=this.Margin.Left),this.Margin&&we.IsNumber(this.Margin.Top)&&(n+=this.Margin.Top);for(var o,s=n,l=0;l<t.length;++l){var h=t[l];if(h.Title||h.Text){var u=e.Text[l];o=r,s+=u.Height,h.Margin&&we.IsNumber(h.Margin.Left)&&(o+=h.Margin.Left),h.Margin&&we.IsNumber(h.Margin.Bottom)&&(s-=h.Margin.Bottom),h.Title&&(h.TitleColor?this.Canvas.fillStyle=h.TitleColor:this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(h.Title,o,s,u.TitleWidth),o+=u.TitleWidth,we.IsNumber(h.Space)&&(o+=h.Space)),h.Text&&(h.Color?this.Canvas.fillStyle=h.Color:this.Canvas.fillStyle=this.TextColor,this.Canvas.fillText(h.Text,o,s,u.TextWidth))}}}}function Wr(t){this.DivElement=t,this.JSChartContainer,this.ResizeListener,this.CanvasElement=document.createElement("canvas"),this.CanvasElement.className="jstreport-drawing",this.CanvasElement.id=D(),this.CanvasElement.setAttribute("tabindex",0),this.CanvasElement.style&&(this.CanvasElement.style.outline="none"),t.hasChildNodes()&&Xn.Chart.Log("[JSTReportChart::JSReportChart] divElement hasChildNodes",t.childNodes),t.appendChild(this.CanvasElement),this.OnSize=function(){var t=this.DivElement.offsetHeight,e=this.DivElement.offsetWidth;this.DivElement.style.height&&this.DivElement.style.width&&(this.DivElement.style.height.includes("px")&&(t=parseInt(this.DivElement.style.height.replace("px",""))),this.DivElement.style.width.includes("px")&&(e=parseInt(this.DivElement.style.width.replace("px","")))),this.CanvasElement.height=t,this.CanvasElement.width=e,this.CanvasElement.style.width=this.CanvasElement.width+"px",this.CanvasElement.style.height=this.CanvasElement.height+"px";var a=C();this.CanvasElement.height*=a,this.CanvasElement.width*=a,Xn.Chart.Log("[JSTReportChart::OnSize] devicePixelRatio="+window.devicePixelRatio+", height="+this.CanvasElement.height+", width="+this.CanvasElement.width),this.JSChartContainer&&this.JSChartContainer.OnSize&&this.JSChartContainer.OnSize()},this.SetOption=function(t){var e=this.CreateJSTReportChartContainer(t);if(!e)return!1;if(t.OnCreatedCallback&&t.OnCreatedCallback(e),this.JSChartContainer=e,this.DivElement.JSChart=this,1==t.EnableResize&&this.CreateResizeListener(),t.Symbol){e.Draw();var a=t.Symbol;t.Name&&(a=t.Name),e.ChangeSymbol(t.Symbol,{Name:a})}},this.CreateJSTReportChartContainer=function(t){var e=new Kr(this.CanvasElement);if(e.Create(t),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter),we.IsNonEmptyArray(t.Column)&&e.SetColumn(t.Column),we.IsNonEmptyArray(t.Tab)&&e.SetTab(t.Tab),we.IsNumber(t.TabSelected)&&e.SetSelectedTab(t.TabSelected),we.IsBool(t.EnableDragRow)&&(e.EnableDragRow=t.EnableDragRow),we.IsNumber(t.DragRowType)&&(e.DragRowType=t.DragRowType),we.IsBool(t.EnableDragHeader)&&(e.EnableDragHeader=t.EnableDragHeader),we.IsBool(t.EnablePageCycle)&&(e.EnablePageCycle=t.EnablePageCycle),we.IsNumber(t.FixedRowCount)&&e.SetFixedRowCount(t.FixedRowCount),t.SortInfo){var a=t.SortInfo;we.IsNumber(a.Field)&&(e.SortInfo.Field=a.Field),we.IsNumber(a.Sort)&&(e.SortInfo.Sort=a.Sort)}if(this.SetChartBorder(e,t),null!=t.IsAutoUpdate&&(e.IsAutoUpdate=t.IsAutoUpdate),t.AutoUpdateFrequency>0&&(e.AutoUpdateFrequency=t.AutoUpdateFrequency),we.IsBool(t.EnableFilter)&&(e.EnableFilter=t.EnableFilter),t.EventCallback)for(var i=0;i<t.EventCallback.length;++i){var a=t.EventCallback[i];e.AddEventCallback(a)}return e},this.SetChartBorder=function(t,e){if(e.Border){e.Border;we.IsNumber(e.Border.Left)&&(t.Frame.ChartBorder.Left=e.Border.Left),we.IsNumber(e.Border.Right)&&(t.Frame.ChartBorder.Right=e.Border.Right),we.IsNumber(e.Border.Top)&&(t.Frame.ChartBorder.Top=e.Border.Top),we.IsNumber(e.Border.Bottom)&&(t.Frame.ChartBorder.Bottom=e.Border.Bottom);var a=C();t.Frame.ChartBorder.Left*=a,t.Frame.ChartBorder.Right*=a,t.Frame.ChartBorder.Top*=a,t.Frame.ChartBorder.Bottom*=a}},this.CreateResizeListener=function(){var t=this;this.ResizeListener=new ResizeObserver(function(e){t.OnDivResize(e)}),this.ResizeListener.observe(this.DivElement)},this.OnDivResize=function(t){Xn.Chart.Log("[JSTReportChart::OnDivResize] entries=",t),this.OnSize()},this.ChangeSymbol=function(t,e){this.JSChartContainer&&this.JSChartContainer.ChangeSymbol(t,e)},this.SetColumn=function(t,e){this.JSChartContainer&&this.JSChartContainer.SetColumn(t,e)},this.AddEventCallback=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddEventCallback&&(Xn.Chart.Log("[JSTReportChart:AddEventCallback] obj=",t),this.JSChartContainer.AddEventCallback(t))},this.ReloadResource=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ReloadResource&&(Xn.Chart.Log("[JSTReportChart:ReloadResource] "),this.JSChartContainer.ReloadResource(t))},this.ChartDestory=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChartDestory&&this.JSChartContainer.ChartDestory()},this.Draw=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Draw&&(Xn.Chart.Log("[JSTReportChart:Draw] "),this.JSChartContainer.Draw())}}function Ur(){this.Symbol,this.Name,this.YClose,this.Open,this.Price,this.High,this.Low,this.Amount,this.Vol,this.Positon,this.Increase,this.UpDown,this.Exchange,this.Amplitude,this.BuyPrice,this.BuyVol,this.SellPrice,this.SellVol,this.AvPrice,this.LimitHigh,this.LimitLow,this.CloseLine,this.ExtendData}function Kr(t){this.ClassName="JSTReportChartContainer",this.Frame,this.ChartPaint=[],this.ChartSplashPaint=null,this.LoadDataSplashTitle="æ°æ®å è½½ä¸­",this.SplashTitle={StockList:"ä¸è½½ç è¡¨ä¸­....."},this.Canvas=t.getContext("2d"),this.Tooltip=document.createElement("div"),this.Tooltip.className="jstreport-tooltip",this.Tooltip.style.background=So.TooltipBGColor,this.Tooltip.style.opacity=So.TooltipAlpha,this.Tooltip.style["pointer-events"]="none",this.Tooltip.id=D(),t.parentNode.appendChild(this.Tooltip),this.Symbol,this.Name,this.NetworkFilter,this.Data={XOffset:0,YOffset:0,Data:[],Price:null},this.BorderData={MapData:null},this.SourceData={Data:[]},this.FixedRowData={Data:[]},this.DelayUpdateTimer=null,this.DelayUpdateFrequency=500,this.MapStockData,this.MapExePriceData,this.FlashBG=new Vn.default,this.FlashBGTimer=null,this.GlobalOption={FlashBGCount:0},this.SortInfo={Field:-1,Sort:0},this.mapEvent=new Vn.default,this.AutoUpdateTimer=null,this.AutoUpdateFrequency=15e3,this.UIElement=t,this.LastPoint=new E,this.IsOnTouch=!1,this.TouchDrag,this.TouchMoveMinAngle=70,this.YStepPixel=5*C(),this.XStepPixel=10*C(),this.DragXScroll=null,this.EnablePageCycle=!1,this.IsDestroy=!1,this.ChartDestory=function(){this.IsDestroy=!0,this.StopAutoUpdate()},this.ClearFixedRowData=function(){this.FixedRowData.Data=[]},this.SetFixedRowCount=function(t){var e=this.ChartPaint[0];e&&(e.FixedRowCount=t)},this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new _e,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.IsEnableSplash=!0,this.Frame=new zr,this.Frame.ChartBorder=new M,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartSplashPaint.Frame=this.Frame;var a=new Jr;a.Frame=this.Frame,a.ChartBorder=this.Frame.ChartBorder,a.Canvas=this.Canvas,a.UIElement=this.UIElement,a.GetEventCallback=function(t){return e.GetEventCallback(t)},a.GetExePriceDataCallback=function(t){return e.GetExePriceData(t)},a.GetFlashBGDataCallback=function(t,a){return e.GetFlashBGData(t,a)},a.Data=this.Data,a.BorderData=this.BorderData,a.GlobalOption=this.GlobalOption,a.FixedRowData=this.FixedRowData,a.SortInfo=this.SortInfo,this.ChartPaint[0]=a,t&&(we.IsBool(t.IsShowHeader)&&(a.IsShowHeader=t.IsShowHeader),we.IsNumber(t.FixedColumn)&&(a.FixedColumn=t.FixedColumn),we.IsNumber(t.BorderLine)&&(this.Frame.BorderLine=t.BorderLine),we.IsBool(t.ItemBorder)&&(a.IsDrawBorder=t.ItemBorder),we.IsNumber(t.SelectedModel)&&(a.SelectedModel=t.SelectedModel));var i=!0,r=!0;t&&(!1===t.KeyDown&&(i=!1,Xn.Chart.Log("[JSTReportChartContainer::Create] not register keydown event.")),!1===t.Wheel&&(r=!1,Xn.Chart.Log("[JSTReportChartContainer::Create] not register wheel event."))),i&&this.UIElement.addEventListener("keydown",function(t){e.OnKeyDown(t)},!0),r&&this.UIElement.addEventListener("wheel",function(t){e.OnWheel(t)},!0),this.UIElement.ondblclick=function(t){e.UIOnDblClick(t)},this.UIElement.onmousedown=function(t){e.UIOnMouseDown(t)}},this.Draw=function(){if(!(this.UIElement.width<=0||this.UIElement.height<=0)){this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height);var t=C();if(this.Canvas.lineWidth=t,this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash)return this.Frame.Draw({IsEnableSplash:this.ChartSplashPaint.IsEnableSplash}),void this.ChartSplashPaint.Draw();this.Frame.Draw(),this.Frame.DrawLogo();for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.IsDrawFirst&&a.Draw()}for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.IsDrawFirst||a.Draw()}this.GlobalOption.FlashBGCount>0&&this.DelayDraw(500)}},this.DelayDraw=function(t){var e=this;"number"==typeof this.FlashBGTimer&&(clearTimeout(this.FlashBGTimer),this.FlashBGTimer=null),this.FlashBGTimer=setTimeout(function(){e.Draw()},t)},this.ClearData=function(){this.SourceData.Data=[],this.Data.Data=[],this.Data.Price=null,this.Data.XOffset=0,this.Data.YOffset=0,this.MapStockData=new Vn.default,this.MapExePriceData=null,this.BorderData.MapData=null},this.StopAutoUpdate=function(){this.CancelAutoUpdate(),this.AutoUpdateEvent(!1,"JSTReportChartContainer::StopAutoUpdate"),this.IsAutoUpdate&&(this.IsAutoUpdate=!1)},this.AddEventCallback=function(t){if(t&&t.event&&t.callback){var e={Callback:t.callback,Source:t};this.mapEvent.set(t.event,e)}},this.RemoveEventCallback=function(t){this.mapEvent.has(t)&&this.mapEvent.delete(t)},this.GetEventCallback=function(t){return this.mapEvent.has(t)?this.mapEvent.get(t):null},this.OnSize=function(){this.Frame&&(this.SetSizeChange(!0),this.Draw(),this.DelayUpdateStockData())},this.SetSizeChange=function(t){for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a&&(a.SizeChange=t)}},this.ChangeSymbol=function(t,e){this.CancelAutoUpdate(),this.ClearData(),this.Symbol=t,this.Name=t,e&&e.Name&&(this.Name=e.Name),this.RequestStockListData()},this.CancelAutoUpdate=function(){"number"==typeof this.AutoUpdateTimer&&(clearTimeout(this.AutoUpdateTimer),this.AutoUpdateTimer=null)},this.SetColumn=function(t,e){var a=this.ChartPaint[0];a&&(a.SetColumn(t),a.SizeChange=!0,e&&e.Redraw&&this.Draw())},this.RequestStockListData=function(){this.ChartSplashPaint.SetTitle(this.SplashTitle.StockList),this.ChartSplashPaint.EnableSplash(!0),this.Draw();var t=this;if(this.NetworkFilter){var e={Name:"JSTReportChartContainer::RequestStockListData",Explain:"Tåæ¥ä»·åè¡¨æ°æ®",Self:this,PreventDefault:!1};if(this.NetworkFilter(e,function(e){e&&e.symbol==t.Symbol&&(t.ChartSplashPaint.EnableSplash(!1),t.RecvStockListData(e))}),1==e.PreventDefault)return}throw{Name:"JSTReportChartContainer::RequestStockListData",Error:"(Tåæ¥ä»·åè¡¨æ°æ®)ä¸æä¾åç½®æµè¯æ°æ®"}},this.RecvStockListData=function(t){if(this.MapExePriceData=new Vn.default,this.MapStockData=new Vn.default,we.IsNonEmptyArray(t.data))for(var e=0;e<t.data.length;++e){var a=t.data[e],i=a[0],r=new Ur;r.Symbol=r.Name=a[1],a[3]&&(r.Name=a[3]);var n=new Ur;n.Symbol=n.Name=a[2],a[4]&&(n.Name=a[4]),this.MapStockData.set(r.Symbol,r),this.MapStockData.set(n.Symbol,n);var o={ExePrice:i,LeftData:r,RightData:n};this.MapExePriceData.set(o.ExePrice,o),this.SourceData.Data.push(i),this.Data.Data.push(i)}if(we.IsNumber(t.price)&&(this.Data.Price=t.price),we.IsNumber(t.Decimal)){var s=this.ChartPaint[0];s&&(s.DefaultDecimal=t.Decimal)}this.Draw(),this.UpdateStockData()},this.GetExePriceData=function(t){return this.MapExePriceData&&this.MapExePriceData.has(t)?this.MapExePriceData.get(t):null},this.UpdateStockData=function(){if(we.IsNonEmptyArray(this.Data.Data)&&!(this.MapStockData.size<=0)){var t=[],e=!0,a=!1,i=void 0;try{for(var r,n=(0,Gn.default)(this.MapStockData);!(e=(r=n.next()).done);e=!0){var o=r.value;t.push(o[0])}}catch(t){a=!0,i=t}finally{try{!e&&n.return&&n.return()}finally{if(a)throw i}}we.IsNonEmptyArray(t)&&this.RequestStockData(t)}},this.RequestStockData=function(t){var e=this;if(this.NetworkFilter){var a=this.ChartPaint[0],i={Name:"JSTReportChartContainer::RequestStockData",Explain:"Tåæ¥ä»·åè¡¨æææ°æ®",Request:{Data:{stocks:t,symbol:this.Symbol,fixedRowCount:a.FixedRowCount}},Self:this,PreventDefault:!1};if(this.NetworkFilter(i,function(t){e.RecvStockData(t),e.AutoUpdate()}),1==i.PreventDefault)return}throw{Name:"JSTReportChartContainer::RequestStockData",Error:"(Tåæ¥ä»·åè¡¨æææ°æ®)ä¸æä¾åç½®æµè¯æ°æ®"}},this.RecvStockData=function(t){var e=this,a=new Rn.default;if(we.IsNonEmptyArray(t.data))for(var i=0;i<t.data.length;++i){var r=t.data[i],n=r[0];if(n){var o=null;this.MapStockData.has(n)?o=this.MapStockData.get(n):(o=new Ur,o.Symbol=n,this.MapStockData.set(n,o)),this.ReadStockJsonData(o,r),a.has(n)||a.add(n)}}if(we.IsNumber(t.price)&&(this.Data.Price=t.price),we.IsNonEmptyArray(t.fixedRowData))for(var i=0;i<t.fixedRowData.length;++i){var r=t.fixedRowData[i];r&&r.TData&&(this.FixedRowData.Data[i]=r)}var s=this.ChartPaint[0];if(s&&(1==this.SortInfo.Sort||2==this.SortInfo.Sort)&&we.IsNumber(this.SortInfo.Field)&&this.SortInfo.Field>=0){var l=s.Column[this.SortInfo.Field],h=this.GetEventCallback(Kn.ON_TREPORT_LOCAL_SORT);if(h&&h.Callback){var u={Column:l,SortInfo:this.SortInfo,SymbolList:this.Data.Data,Result:null};h.Callback(h,u,this),Array.isArray(u.Result)&&(this.Data.Data=u.Result)}else this.Data.Data.sort(function(t,a){return e.LocalSort(t,a,l,e.SortInfo.Sort,e.SortInfo.CellType)})}this.CalculateData(),this.Draw()},this.CalculateData=function(){if(this.MapExePriceData&&!(this.MapExePriceData.size<=0)){var t={Max:null,ExePrice:null,CellType:1},e={Max:null,ExePrice:null,CellType:2};this.BorderData.MapData=new Vn.default;var a=!0,i=!1,r=void 0;try{for(var n,o=(0,Gn.default)(this.MapExePriceData);!(a=(n=o.next()).done);a=!0){var s=n.value,l=s[1],h=l.LeftData,u=l.RightData;h&&we.IsNumber(h.Position)&&(null==t.Max||t.Max<h.Position)&&(t.Max=h.Position,t.ExePrice=s[0]),u&&we.IsNumber(u.Position)&&(null==e.Max||e.Max<u.Position)&&(e.Max=u.Position,e.ExePrice=s[0])}}catch(t){i=!0,r=t}finally{try{!a&&o.return&&o.return()}finally{if(i)throw r}}var C=[null,null,null];t.ExePrice&&(C[1]=t),e.ExePrice&&(C[2]=e),this.BorderData.MapData.set(es.POSITION_ID,{Data:C})}},this.ReadStockJsonData=function(t,e){we.IsString(e[1])&&(t.Name=e[1]),we.IsNumber(e[2])&&(t.YClose=e[2]),we.IsNumber(e[3])&&(t.Open=e[3]),we.IsNumber(e[4])&&(t.High=e[4]),we.IsNumber(e[5])&&(t.Low=e[5]),we.IsNumber(e[6])&&(t.Price=e[6]),we.IsNumber(e[7])&&(t.Vol=e[7]),we.IsNumber(e[8])&&(t.Amount=e[8]),we.IsNumber(e[9])&&(t.BuyPrice=e[9]),we.IsNumber(e[10])&&(t.BuyVol=e[10]),we.IsNumber(e[11])&&(t.SellPrice=e[11]),we.IsNumber(e[12])&&(t.SellVol=e[12]),we.IsNumber(e[13])&&(t.AvPrice=e[13]),we.IsNumber(e[14])&&(t.Position=e[14]),we.IsNumber(e[16])&&(t.LimitHigh=e[16]),we.IsNumber(e[17])&&(t.LimitLow=e[17]),we.IsNumber(e[21])&&(t.Increase=e[21]),we.IsNumber(e[22])&&(t.UpDown=e[22]),we.IsNumber(e[24])&&(t.Amplitude=e[24]),e[27]&&(t.NameEx=e[27]),we.IsNumber(e[21])||we.IsNumber(t.Price)&&we.IsNumber(t.YClose)&&0!=t.YClose&&(t.Increase=(t.Price-t.YClose)/t.YClose*100),we.IsNumber(e[22])||we.IsNumber(t.Price)&&we.IsNumber(t.YClose)&&(t.UpDown=t.Price-t.YClose),we.IsNumber(e[24])||we.IsNumber(t.High)&&we.IsNumber(t.Low)&&we.IsNumber(t.YClose)&&0!=t.YClose&&(t.Amplitude=(t.High-t.Low)/t.YClose*100),e[30]&&(t.ExtendData=e[30]),e[32]&&(t.CloseLine=e[32]),e[33]&&(t.KLine=e[33]),we.IsNumber(e[101])&&(t.ReserveNumber1=e[101]),we.IsNumber(e[102])&&(t.ReserveNumber2=e[102]),we.IsNumber(e[103])&&(t.ReserveNumber3=e[103]),we.IsNumber(e[104])&&(t.ReserveNumber4=e[104]),we.IsNumber(e[105])&&(t.ReserveNumber5=e[105]),we.IsNumber(e[106])&&(t.ReserveNumber6=e[106]),we.IsNumber(e[107])&&(t.ReserveNumber7=e[107]),we.IsNumber(e[108])&&(t.ReserveNumber8=e[108]),we.IsNumber(e[109])&&(t.ReserveNumber9=e[109]),we.IsNumber(e[110])&&(t.ReserveNumber10=e[110]),(we.IsString(e[201])||we.IsObject(e[201]))&&(t.ReserveString1=e[201]),(we.IsString(e[202])||we.IsObject(e[202]))&&(t.ReserveString2=e[202]),(we.IsString(e[203])||we.IsObject(e[203]))&&(t.ReserveString3=e[203]),(we.IsString(e[204])||we.IsObject(e[204]))&&(t.ReserveString4=e[204]),(we.IsString(e[205])||we.IsObject(e[205]))&&(t.ReserveString5=e[205]),(we.IsString(e[206])||we.IsObject(e[206]))&&(t.ReserveString6=e[206]),(we.IsString(e[207])||we.IsObject(e[207]))&&(t.ReserveString7=e[207]),(we.IsString(e[208])||we.IsObject(e[208]))&&(t.ReserveString8=e[208]),(we.IsString(e[209])||we.IsObject(e[209]))&&(t.ReserveString9=e[209]),(we.IsString(e[210])||we.IsObject(e[210]))&&(t.ReserveString10=e[210])},this.AutoUpdate=function(t){if(this.CancelAutoUpdate(),this.IsAutoUpdate){var e=this,a=2,i=this.GetEventCallback(Kn.ON_TREPORT_MARKET_STATUS);if(i&&i.Callback){var r={MarketStatus:2};i.Callback(i,r,this),we.IsNumber(r.MarketStatus)&&(a=r.MarketStatus)}if(0!=a&&3!=a){var n=this.AutoUpdateFrequency;1==a?this.AutoUpdateTimer=setTimeout(function(){e.AutoUpdate()},n):2==a&&(this.AutoUpdateTimer=setTimeout(function(){e.UpdateStockData()},n))}}},this.DelayUpdateStockData=function(){var t=this;null!=this.DelayUpdateTimer&&(clearTimeout(this.DelayUpdateTimer),this.DelayUpdateTimer=null);var e=this.DelayUpdateFrequency;this.DelayUpdateTimer=setTimeout(function(){t.UpdateStockData()},e)},this.UIOnDblClick=function(t){var e=C(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e,r=this.GetTReportChart();r&&r.OnDblClick(a,i,t)},this.UIOnMouseDown=function(t){var e=C(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e,r=this.ChartPaint[0];if(r){var n=r.OnMouseDown(a,i,t);n&&(2!=n.Type||0!=t.button&&2!=t.button?3==n.Type&&0==t.button&&this.OnClickHeader(n,t):1==n.Redraw&&this.Draw())}},this.OnClickHeader=function(t,e){var a=t.Header;if(a.Column&&1==a.Column.Sort){var i={CellType:a.CellType,ColumnIndex:a.ColumnIndex};this.SortHeader(a.Column,i)}},this.SortHeader=function(t,e){var a=this,i={Field:this.SortInfo.Field,Sort:this.SortInfo.Sort,CellType:this.SortInfo.CellType},r=t.SortType;if(i.Field!=e.ColumnIndex||i.CellType!=e.CellType)i.Field=e.ColumnIndex,i.CellType=e.CellType,i.Sort=r[0];else if(1==r.length)i.Sort=r[0];else for(var n=0;n<r.length;++n)if(i.Sort==r[n]){i.Sort=r[(n+1)%r.length];break}if(0==i.Sort){this.Data.Data=[];for(var n=0;n<this.SourceData.Data.length;++n)this.Data.Data.push(this.SourceData.Data[n])}else{var o=this.GetEventCallback(Kn.ON_TREPORT_LOCAL_SORT);if(o&&o.Callback){var s={Column:t,SortInfo:i,SymbolList:this.Data.Data,Result:null};o.Callback(o,s,this),Array.isArray(s.Result)&&(this.Data.Data=s.Result)}else this.Data.Data.sort(function(e,r){return a.LocalSort(e,r,t,i.Sort,i.CellType)})}this.Data.YOffset=0,this.SortInfo.Field=i.Field,this.SortInfo.Sort=i.Sort,this.SortInfo.CellType=i.CellType,this.Draw(),this.DelayUpdateStockData()},this.LocalSort=function(t,e,a,i,r){switch(a.Type){case es.SYMBOL_ID:case es.NAME_ID:return this.LocalStringSort(t,e,a,i,r);case es.PRICE_ID:case es.VOL_ID:case es.UPDOWN_ID:case es.BUY_PRICE_ID:case es.SELL_PRICE_ID:case es.AMOUNT_ID:case es.BUY_VOL_ID:case es.SELL_VOL_ID:case es.YCLOSE_ID:case es.OPEN_ID:case es.HIGH_ID:case es.LOW_ID:case es.AVERAGE_PRICE_ID:case es.EXE_PRICE_ID:case es.POSITION_ID:case es.AMPLITUDE_ID:case es.INCREASE_ID:case es.RESERVE_NUMBER1_ID:case es.RESERVE_NUMBER2_ID:case es.RESERVE_NUMBER3_ID:case es.RESERVE_NUMBER4_ID:case es.RESERVE_NUMBER5_ID:case es.RESERVE_NUMBER6_ID:case es.RESERVE_NUMBER7_ID:case es.RESERVE_NUMBER8_ID:case es.RESERVE_NUMBER9_ID:case es.RESERVE_NUMBER10_ID:return this.LocalNumberSort(t,e,a,i,r);default:return 0}},this.LocalNumberSort=function(t,e,a,i,r){var n=this.GetExePriceData(t),o=this.GetExePriceData(e),s=-99999999999999,l=-99999999999999;2==i&&(s=l=99999999999999);var h=as.get(a.Type);if(0==r)n&&we.IsNumber(n.ExePrice)&&(s=n.ExePrice),o&&we.IsNumber(o.ExePrice)&&(l=o.ExePrice);else if(1==r){if(n&&n.LeftData){var u=n.LeftData[h];we.IsNumber(u)&&(s=u)}if(o&&o.LeftData){var u=o.LeftData[h];we.IsNumber(u)&&(l=u)}}else if(2==r){if(n&&n.RightData){var u=n.RightData[h];we.IsNumber(u)&&(s=u)}if(o&&o.RightData){var u=o.RightData[h];we.IsNumber(u)&&(l=u)}}return 1==i?l<s?-1:l<s?1:0:s<l?-1:s>l?1:0},this.GetTReportChart=function(){return this.ChartPaint[0]},this.OnWheel=function(t){if(Xn.Chart.Log("[JSTReportChartContainer::OnWheel]",t),(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash)&&this.Data&&we.IsNonEmptyArray(this.Data.Data)){var e=t.clientX-this.UIElement.getBoundingClientRect().left,a=t.clientY-this.UIElement.getBoundingClientRect().top;if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),this.Canvas.isPointInPath(e,a)){if(this.GetTReportChart()){var i=t.wheelDelta;if(we.IsObjectExist(t.wheelDelta)||(i=-.01*t.deltaY),i<0){var r=this.MoveSelectedRow(1,{EnablePageCycle:this.EnablePageCycle});r&&(r.Redraw&&this.Draw(),r.Update&&this.DelayUpdateStockData())}else if(i>0){var r=this.MoveSelectedRow(-1,{EnablePageCycle:this.EnablePageCycle});r&&(r.Redraw&&this.Draw(),r.Update&&this.DelayUpdateStockData())}t.preventDefault?t.preventDefault():t.returnValue=!1}}}},this.OnKeyDown=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){if(this.GetTReportChart()){var e=t.keyCode?t.keyCode:t.which;if(116!=e){switch(e){case 38:var a=this.MoveSelectedRow(-1,{EnablePageCycle:this.EnablePageCycle});a&&(a.Redraw&&this.Draw(),a.Update&&this.DelayUpdateStockData());break;case 40:var a=this.MoveSelectedRow(1,{EnablePageCycle:this.EnablePageCycle});a&&(a.Redraw&&this.Draw(),a.Update&&this.DelayUpdateStockData())}t.preventDefault?t.preventDefault():t.returnValue=!1}}}},this.MoveSelectedRowEvent=function(t,e){var a=this.ChartPaint[0];if(!a)return null;var i=this.GetEventCallback(Kn.ON_MOVE_SELECTED_TREPORT_ROW);if(i&&i.Callback&&(!t||!e||t.ExePrice!=e.ExePrice||t.CellType!=e.CellType)){t&&(a.GetExePriceDataCallback&&(t.TData=a.GetExePriceDataCallback(t.ExePrice)),t.TData&&(1==t.CellType?t.Item=t.TData.LeftData:2==t.CellType&&(t.Item=t.TData.RightData))),e&&(a.GetExePriceDataCallback&&(e.TData=a.GetExePriceDataCallback(e.ExePrice)),e.TData&&(1==e.CellType?e.Item=e.TData.LeftData:2==e.CellType&&(e.Item=e.TData.RightData)));var r={Old:t,Now:e,Symbol:this.Symbol};i.Callback(i,r,this)}},this.MoveSelectedRow=function(t,e){var a=this.ChartPaint[0];if(!a)return null;if(!we.IsNonEmptyArray(this.Data.Data))return null;var i=!1;e&&we.IsBool(e.EnablePageCycle)&&(i=e.EnablePageCycle);var r={Redraw:!1,Update:!1},n=a.GetCurrentPageStatus(),o=n.PageSize,s=n.Start,l=1;if(n.SelectedRow){l=n.SelectedRow.CellType;for(var h=0;h<this.Data.Data.length;++h)if(n.SelectedRow.ExePrice==this.Data.Data[h]){s=h;break}}var u=null,C=null;if(a.SelectedRow&&(u=I(a.SelectedRow)),t>0){if(s<0||s<n.Start||s>n.End)return a.SelectedRow={ExePrice:this.Data.Data[n.Start],CellType:l},r.Redraw=!0,C=I(a.SelectedRow),this.MoveSelectedRowEvent(u,C),r;for(var c=this.Data.YOffset,h=0;h<t&&(!(s+1>=this.Data.Data.length)||i);++h)++s,s>n.End&&++c,s>=this.Data.Data.length&&(s=0,c=0);return r.Redraw=!0,r.Update=c!=this.Data.YOffset,a.SelectedRow={ExePrice:this.Data.Data[s],CellType:l},this.Data.YOffset=c,C=I(a.SelectedRow),this.MoveSelectedRowEvent(u,C),r}if(t<0){if(s<0||s<n.Start||s>n.End)return a.SelectedRow={ExePrice:this.Data.Data[n.End],CellType:l},r.Redraw=!0,C=I(a.SelectedRow),this.MoveSelectedRowEvent(u,C),r;t=Math.abs(t);for(var c=this.Data.YOffset,h=0;h<t&&(!(s<=0)||i);++h)--s,s<n.Start&&--c,s<0&&(s=this.Data.Data.length-1,(c=this.Data.Data.length-o)<0&&(c=0));return r.Redraw=!0,r.Update=c!=this.Data.YOffset,a.SelectedRow={ExePrice:this.Data.Data[s],CellType:l},this.Data.YOffset=c,C=I(a.SelectedRow),this.MoveSelectedRowEvent(u,C),r}return null},this.SetFlashBGItem=function(t,e){var a={ID:e.ID,Color:e.Color,Count:1};if(we.IsNumber(e.Count)&&(a.Count=e.Count),we.IsNumber(e.Time)?a.Time=e.Time:a.Time=Date.now(),this.FlashBG.has(t)){var i=this.FlashBG.get(t);i.LastTime=a.Time,i.Data.set(a.ID,a)}else{var i={LastTime:a.Time,Data:new Vn.default([[a.ID,a]])};this.FlashBG.set(t,i)}},this.GetFlashBGData=function(t,e){if(!this.FlashBG)return null;if(!this.FlashBG.has(t))return null;var a=this.FlashBG.get(t);if(e-a.LastTime>=3e3)return this.FlashBG.delete(t),null;if(!a.Data||a.Data.size<=0)return this.FlashBG.delete(t),null;var i=[],r=!0,n=!1,o=void 0;try{for(var s,l=(0,Gn.default)(a.Data);!(r=(s=l.next()).done);r=!0){var h=s.value,u=h[1];(e-u.Time>=3e3||u.Count<=0)&&i.push(u.ID)}}catch(t){n=!0,o=t}finally{try{!r&&l.return&&l.return()}finally{if(n)throw o}}if(we.IsNonEmptyArray(i)){for(var C=0;C<i.length;++C)a.Data.delete(i[C]);if(a.Data.size<=0)return this.FlashBG.delete(t),null}return a}}function zr(){this.ChartBorder,this.Canvas,this.BorderLine=null,this.ClassName="JSTReportFrame",this.BorderColor=So.TReport.BorderColor,this.LogoTextColor=So.FrameLogo.TextColor,this.LogoTextFont=So.FrameLogo.Font,this.ReloadResource=function(t){this.BorderColor=So.TReport.BorderColor,this.LogoTextColor=So.FrameLogo.TextColor,this.LogoTextFont=So.FrameLogo.Font},this.Draw=function(){var t=p(this.ChartBorder.GetLeft()),e=p(this.ChartBorder.GetTop()),a=p(this.ChartBorder.GetRight()),i=p(this.ChartBorder.GetBottom()),r=a-t,n=i-e;we.IsNumber(this.BorderLine)?(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),(1&this.BorderLine)>0&&(this.Canvas.moveTo(t,e),this.Canvas.lineTo(a,e)),(2&this.BorderLine)>0&&(this.Canvas.moveTo(t,i),this.Canvas.lineTo(a,i)),(4&this.BorderLine)>0&&(this.Canvas.moveTo(t,e),this.Canvas.lineTo(t,i)),(8&this.BorderLine)>0&&(this.Canvas.moveTo(a,e),this.Canvas.lineTo(a,i)),this.Canvas.stroke()):(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(t,e,r,n))},this.DrawLogo=function(){var t=So.FrameLogo.Text;if(we.IsString(t)){this.Canvas.fillStyle=this.LogoTextColor,this.Canvas.font=this.LogoTextFont,this.Canvas.textAlign="right",this.Canvas.textBaseline="bottom";var e=this.ChartBorder.GetRight()-30,a=this.ChartBorder.GetBottom()-5;this.Canvas.fillText(t,e,a)}}}function Jr(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ChartTReport",this.UIElement,this.IsDrawFirst=!1,this.GetEventCallback,this.GetExePriceDataCallback,this.GetFlashBGDataCallback,this.GetBlockDataCallback,this.Data,this.BorderData,this.FixedRowData,this.SortInfo,this.FixedColumn=2,this.FixedRowCount=0,this.IsShowHeader=!0,this.SizeChange=!0,this.SelectedRow,this.RectSelectedRow,this.IsDrawBorder=1,this.ShowSymbol=[],this.GlobalOption,this.DefaultDecimal=2,this.UpColor=So.TReport.UpTextColor,this.DownColor=So.TReport.DownTextColor,this.UnchangeColor=So.TReport.UnchangeTextColor,this.BorderColor=So.TReport.BorderColor,this.SelectedColor=So.TReport.SelectedColor,this.UpBGColor=So.TReport.UpBGColor,this.DownBGColor=So.TReport.DownBGColor,this.HeaderFontConfig={Size:So.TReport.Header.Font.Size,Name:So.TReport.Header.Font.Name},this.HeaderColor=So.TReport.Header.Color,this.SortColor=So.TReport.Header.SortColor,this.HeaderMergin={Left:So.TReport.Header.Mergin.Left,Right:So.TReport.Header.Mergin.Right,Top:So.TReport.Header.Mergin.Top,Bottom:So.TReport.Header.Mergin.Bottom},this.MarkBorderConfig={MaxPositionColor:So.TReport.MarkBorder.MaxPositionColor},this.ItemFontConfig={Size:So.TReport.Item.Font.Size,Name:So.TReport.Item.Font.Name},this.ItemFixedFontConfg={Size:So.TReport.FixedItem.Font.Size,Name:So.TReport.FixedItem.Font.Name},this.ItemMergin={Left:So.TReport.Item.Mergin.Left,Right:So.TReport.Item.Mergin.Right,Top:So.TReport.Item.Mergin.Top,Bottom:So.TReport.Item.Mergin.Bottom},this.CenterItemConfig={TextColor:So.TReport.CenterItem.TextColor,BaseTextColor:So.TReport.CenterItem.BaseTextColor,BGColor:So.TReport.CenterItem.BGColor},this.HeaderFont=12*C()+"px å¾®è½¯éé»",this.ItemFont=15*C()+"px å¾®è½¯éé»",this.ItemFixedFont=15*C()+"px å¾®è½¯éé»",this.ItemSymbolFont=12*C()+"px å¾®è½¯éé»",this.ItemNameFont=15*C()+"px å¾®è½¯éé»",this.ItemNameHeight=0,this.RowCount=0,this.HeaderHeight=0,this.RowHeight=0,this.IsShowAllColumn=!1,this.ItemExtraWidth=0,this.Column=[{Type:es.PRICE_ID,Title:"ç°ä»·",TextAlign:"right",Width:null,MaxText:"-888.88"},{Type:es.INCREASE_ID,Title:"æ¶¨å¹%",TextAlign:"right",Width:null,MaxText:"-888.88"},{Type:es.BUY_PRICE_ID,Title:"ä¹°ä»·",TextAlign:"right",Width:null,MaxText:"-888.88"},{Type:es.BUY_VOL_ID,Title:"ä¹°é",TextAlign:"right",Width:null,MaxText:"88888",TextColor:So.TReport.FieldColor.Vol},{Type:es.NAME_ID,Title:"åçº¦ä»£ç ",TextAlign:"right",Width:null,TextColor:So.TReport.FieldColor.Name,MaxText:"AAAAAA-A-AAAA"}],this.CenterColumn={Type:es.EXE_PRICE_ID,Title:"è´­<è¡æä»·>æ²½",TextAlign:"center",Width:null,MaxText:"99999.99",Sort:1,SortType:[1,2]},this.RectClient={},this.TooltipRect=[],this.ReloadResource=function(t){},this.SetColumn=function(t){if(we.IsNonEmptyArray(t)){this.Column=[];for(var e=0;e<t.length;++e){var a=t[e],i=this.GetDefaultColunm(a.Type);i&&(a.Title&&(i.Title=a.Title),a.TextAlign&&(i.TextAlign=a.TextAlign),a.TextColor&&(i.TextColor=a.TextColor),a.MaxText&&(i.MaxText=a.MaxText),a.ID&&(i.ID=a.ID),we.IsNumber(a.Sort)&&(i.Sort=a.Sort),we.IsBool(a.EnableTooltip)&&(i.EnableTooltip=a.EnableTooltip),we.IsNumber(a.FixedWidth)&&(i.FixedWidth=a.FixedWidth),we.IsNumber(a.FloatPrecision)&&(i.FloatPrecision=a.FloatPrecision),we.IsNumber(a.ColorType)&&(i.ColorType=a.ColorType),a.DefaultText&&(i.DefaultText=a.DefaultText),1==a.Sort&&(i.SortType=[1,2],we.IsNonEmptyArray(a.SortType)&&(i.SortType=a.SortType.slice())),this.Column.push(i))}}},this.GetDefaultColunm=function(t){for(var e=[{Type:es.INDEX_ID,Title:"åºå·",TextAlign:"center",Width:null,TextColor:So.TReport.FieldColor.Index,MaxText:"8888"},{Type:es.SYMBOL_ID,Title:"ä»£ç ",TextAlign:"right",Width:null,TextColor:So.TReport.FieldColor.Symbol,MaxText:"888888"},{Type:es.NAME_ID,Title:"åçº¦åç§°",TextAlign:"right",Width:null,TextColor:So.TReport.FieldColor.Name,MaxText:"AAAAAA-A-AAAA"},{Type:es.INCREASE_ID,Title:"æ¶¨å¹%",TextAlign:"right",Width:null,MaxText:"-888.88",Sort:1,SortType:[1,2,0]},{Type:es.PRICE_ID,Title:"ç°ä»·",TextAlign:"right",Width:null,MaxText:"88888.88",Sort:1,SortType:[1,2,0]},{Type:es.UPDOWN_ID,Title:"æ¶¨è·",TextAlign:"right",Width:null,MaxText:"-888.88",Sort:1,SortType:[1,2,0]},{Type:es.AMPLITUDE_ID,Title:"æ¯å¹%",TextAlign:"right",Width:null,MaxText:"888.88",Sort:1,SortType:[1,2,0]},{Type:es.BUY_PRICE_ID,Title:"ä¹°ä»·",TextAlign:"right",Width:null,MaxText:"88888.88",Sort:1,SortType:[1,2,0]},{Type:es.SELL_PRICE_ID,Title:"åä»·",TextAlign:"right",Width:null,MaxText:"88888.88",Sort:1,SortType:[1,2,0]},{Type:es.AVERAGE_PRICE_ID,Title:"åä»·",TextAlign:"right",Width:null,MaxText:"88888.88",Sort:1,SortType:[1,2,0]},{Type:es.OPEN_ID,Title:"ä»å¼",TextAlign:"right",Width:null,MaxText:"88888.88",Sort:1,SortType:[1,2,0]},{Type:es.HIGH_ID,Title:"æé«",TextAlign:"right",Width:null,MaxText:"88888.88",Sort:1,SortType:[1,2,0]},{Type:es.LOW_ID,Title:"æä½",TextAlign:"right",Width:null,MaxText:"88888.88",Sort:1,SortType:[1,2,0]},{Type:es.YCLOSE_ID,Title:"æ¨æ¶",TextAlign:"right",Width:null,MaxText:"88888.88",Sort:1,SortType:[1,2,0]},{Type:es.POSITION_ID,Title:"æä»é",TextAlign:"right",Width:null,MaxText:"88888",Sort:1,SortType:[1,2,0],TextColor:So.TReport.FieldColor.Position},{Type:es.VOL_ID,Title:"æ»é",TextAlign:"right",TextColor:So.TReport.FieldColor.Vol,Width:null,MaxText:"88888",Sort:1,SortType:[1,2,0]},{Type:es.AMOUNT_ID,Title:"æ»éé¢",TextAlign:"right",TextColor:So.TReport.FieldColor.Amount,Width:null,MaxText:"8888.8æ",Sort:1,SortType:[1,2,0]},{Type:es.BUY_VOL_ID,Title:"ä¹°é",TextAlign:"right",TextColor:So.TReport.FieldColor.Vol,Width:null,MaxText:"88888",Sort:1,SortType:[1,2,0]},{Type:es.SELL_VOL_ID,Title:"åé",TextAlign:"right",TextColor:So.TReport.FieldColor.Vol,Width:null,MaxText:"88888",Sort:1,SortType:[1,2,0]},{Type:es.RESERVE_NUMBER1_ID,Title:"æ°å¼1",TextAlign:"right",TextColor:So.TReport.FieldColor.Text,MaxText:"9999.99",FloatPrecision:2},{Type:es.RESERVE_NUMBER2_ID,Title:"æ°å¼2",TextAlign:"right",TextColor:So.TReport.FieldColor.Text,MaxText:"9999.99",FloatPrecision:2},{Type:es.RESERVE_NUMBER3_ID,Title:"æ°å¼3",TextAlign:"right",TextColor:So.TReport.FieldColor.Text,MaxText:"9999.99",FloatPrecision:2},{Type:es.RESERVE_NUMBER4_ID,Title:"æ°å¼4",TextAlign:"right",TextColor:So.TReport.FieldColor.Text,MaxText:"9999.99",FloatPrecision:2},{Type:es.RESERVE_NUMBER5_ID,Title:"æ°å¼5",TextAlign:"right",TextColor:So.TReport.FieldColor.Text,MaxText:"9999.99",FloatPrecision:2},{Type:es.RESERVE_NUMBER6_ID,Title:"æ°å¼6",TextAlign:"right",TextColor:So.TReport.FieldColor.Text,MaxText:"9999.99",FloatPrecision:2},{Type:es.RESERVE_NUMBER7_ID,Title:"æ°å¼7",TextAlign:"right",TextColor:So.TReport.FieldColor.Text,MaxText:"9999.99",FloatPrecision:2},{Type:es.RESERVE_NUMBER8_ID,Title:"æ°å¼8",TextAlign:"right",TextColor:So.TReport.FieldColor.Text,MaxText:"9999.99",FloatPrecision:2},{Type:es.RESERVE_NUMBER9_ID,Title:"æ°å¼9",TextAlign:"right",TextColor:So.TReport.FieldColor.Text,MaxText:"9999.99",FloatPrecision:2},{Type:es.RESERVE_NUMBER10_ID,Title:"æ°å¼10",TextAlign:"right",TextColor:So.TReport.FieldColor.Text,MaxText:"9999.99",FloatPrecision:2},{Type:es.RESERVE_STRING1_ID,Title:"æå­1",TextAlign:"right",TextColor:So.TReport.FieldColor.Text,MaxText:"ææææææ"},{Type:es.RESERVE_STRING2_ID,Title:"æå­2",TextAlign:"right",TextColor:So.TReport.FieldColor.Text,MaxText:"ææææææ"},{Type:es.RESERVE_STRING3_ID,Title:"æå­3",TextAlign:"right",TextColor:So.TReport.FieldColor.Text,MaxText:"ææææææ"},{Type:es.RESERVE_STRING4_ID,Title:"æå­4",TextAlign:"right",TextColor:So.TReport.FieldColor.Text,MaxText:"ææææææ"},{Type:es.RESERVE_STRING5_ID,Title:"æå­5",TextAlign:"right",TextColor:So.TReport.FieldColor.Text,MaxText:"ææææææ"},{Type:es.RESERVE_STRING6_ID,Title:"æå­6",TextAlign:"right",TextColor:So.TReport.FieldColor.Text,MaxText:"ææææææ"},{Type:es.RESERVE_STRING7_ID,Title:"æå­7",TextAlign:"right",TextColor:So.TReport.FieldColor.Text,MaxText:"ææææææ"},{Type:es.RESERVE_STRING8_ID,Title:"æå­8",TextAlign:"right",TextColor:So.TReport.FieldColor.Text,MaxText:"ææææææ"},{Type:es.RESERVE_STRING9_ID,Title:"æå­9",TextAlign:"right",TextColor:So.TReport.FieldColor.Text,MaxText:"ææææææ"},{Type:es.RESERVE_STRING10_ID,Title:"æå­10",TextAlign:"right",TextColor:So.TReport.FieldColor.Text,MaxText:"ææææææ"}],a=0;a<e.length;++a){var i=e[a];if(i.Type==t)return i}return null},this.Draw=function(){this.ShowSymbol=[],this.TooltipRect=[],this.RectSelectedRow=null,this.GlobalOption&&(this.GlobalOption.FlashBGCount=0),this.SizeChange?this.CalculateSize():this.UpdateCacheData(),this.Canvas.save(),this.Canvas.beginPath(),this.Canvas.rect(this.RectClient.Left,this.RectClient.Top,this.RectClient.Right-this.RectClient.Left,this.RectClient.Bottom-this.RectClient.Top),this.Canvas.clip(),this.DrawHeader(),this.DrawBody(),this.Canvas.restore(),this.SizeChange=!1},this.UpdateCacheData=function(){this.RectClient.Left=this.ChartBorder.GetLeft(),this.RectClient.Right=this.ChartBorder.GetRight(),this.RectClient.Top=this.ChartBorder.GetTop(),this.RectClient.Bottom=this.ChartBorder.GetBottom()},this.CalculateSize=function(){this.UpdateCacheData();var t=C();this.HeaderFont=this.HeaderFontConfig.Size*t+"px "+this.HeaderFontConfig.Name,this.ItemFont=this.ItemFontConfig.Size*t+"px "+this.ItemFontConfig.Name,this.ItemFixedFont=this.ItemFixedFontConfg.Size*t+"px "+this.ItemFixedFontConfg.Name,this.RowHeight=this.GetFontHeight(this.ItemFont,"æ")+this.ItemMergin.Top+this.ItemMergin.Bottom,this.FixedRowHeight=this.GetFontHeight(this.ItemFixedFont,"æ")+this.ItemMergin.Top+this.ItemMergin.Bottom,this.Canvas.font=this.ItemFont;for(var e=0,a=0;a<this.Column.length;++a){var i=this.Column[a];e=we.IsNumber(i.FixedWidth)?i.FixedWidth:this.Canvas.measureText(i.MaxText).width,i.Width=e+4+this.ItemMergin.Left+this.ItemMergin.Right}var i=this.CenterColumn;e=we.IsNumber(i.FixedWidth)?i.FixedWidth:this.Canvas.measureText(i.MaxText).width,i.Width=e+4+this.ItemMergin.Left+this.ItemMergin.Right,this.Canvas.font=this.HeaderFont;for(var a=0;a<this.Column.length;++a){var i=this.Column[a];if(i.Title&&!(i.Title.length<=0)){var r=i.Title;i.Sort>0&&(r+="â"),e=this.Canvas.measureText(r).width,e+=4+this.HeaderMergin.Left+this.HeaderMergin.Right,i.Width<e&&(i.Width=e)}}var i=this.CenterColumn;if(!i.Title||i.Title.length>0){var r=i.Title;i.Sort>0&&(r+="â"),e=this.Canvas.measureText(r).width,e+=4+this.HeaderMergin.Left+this.HeaderMergin.Right,i.Width<e&&(i.Width=e)}this.HeaderHeight=this.GetFontHeight(this.HeaderFont,"æ")+this.HeaderMergin.Top+this.HeaderMergin.Bottom,this.IsShowHeader||(this.HeaderHeight=0),this.FixedRowCount<=0&&(this.FixedRowHeight=0),this.RowCount=parseInt((this.RectClient.Bottom-this.RectClient.Top-this.HeaderHeight-this.FixedRowHeight*this.FixedRowCount)/this.RowHeight);for(var n=this.CenterColumn.Width,o=this.RectClient.Right-this.RectClient.Left,a=0;a<this.Column.length;++a){var i=this.Column[a];n+=2*i.Width}n<o?(this.IsShowAllColumn=!0,this.ItemExtraWidth=0,o-n-4>0&&(this.ItemExtraWidth=(o-n-4)/(2*this.Column.length+1))):(this.IsShowAllColumn=!1,this.ItemExtraWidth=0)},this.DrawHeader=function(){if(this.IsShowHeader){var t=(this.RectClient.Left,this.RectClient.Top),e=t+this.HeaderMergin.Top+(this.HeaderHeight-this.HeaderMergin.Top-this.HeaderMergin.Bottom)/2;this.RectClient.Right,this.RectClient.Left,this.RectClient.Left;this.Canvas.font=this.HeaderFont,this.Canvas.fillStyle=this.HeaderColor;var a=this.RectClient.Left,i=(this.RectClient.Right,this.CenterColumn),r=this.GetCenterItemRect();this.SortInfo&&this.SortInfo.Sort>0&&0==this.SortInfo.CellType?this.DrawSortHeader(i.Title,i.TextAlign,r.Left,e,r.TextWidth,this.SortInfo.Sort):this.DrawText(i.Title,i.TextAlign,r.Left,e,r.TextWidth);for(var n=r.Left,o=r.Right,s=this.Data.XOffset;s<this.Column.length;++s){var i=this.Column[s],l=i.Width+this.ItemExtraWidth,h=l-this.HeaderMergin.Left-this.HeaderMergin.Right,u=n-l+this.HeaderMergin.Left;if(n-l<a)break;var C=this.SortInfo&&this.SortInfo.Field==s&&this.SortInfo.Sort>0;C&&1==this.SortInfo.CellType?this.DrawSortHeader(i.Title,i.TextAlign,u,e,h,this.SortInfo.Sort):this.DrawText(i.Title,i.TextAlign,u,e,h),n-=l;var u=o+this.HeaderMergin.Left;C&&2==this.SortInfo.CellType?this.DrawSortHeader(i.Title,i.TextAlign,u,e,h,this.SortInfo.Sort):this.DrawText(i.Title,i.TextAlign,u,e,h),o+=l}}},this.DrawSortHeader=function(t,e,a,i,r,n){var o=1==n?"â":"â",s=this.Canvas.measureText(o).width,l=this.Canvas.measureText(t).width+2;this.Canvas.textBaseline="middle",this.Canvas.textAlign="left","center"==e?a=a+r/2-(s+l)/2:"right"==e&&(a=a+r-s-l),this.Canvas.fillText(t,a,i),this.Canvas.fillStyle=this.SortColor,this.Canvas.fillText(o,a+l,i),this.Canvas.fillStyle=this.HeaderColor},this.DrawText=function(t,e,a,i,r){"center"==e?(a+=r/2,this.Canvas.textAlign="center"):"right"==e?(a+=r,this.Canvas.textAlign="right"):this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(t,a,i)},this.GetFontHeight=function(t,e){return c(this.Canvas,t,e)},this.DrawBody=function(){if(this.Data&&we.IsNonEmptyArray(this.Data.Data)){this.Canvas.font=this.ItemFont;var t=this.RectClient.Top+this.HeaderHeight,e=(this.RectClient.Left,this.RectClient.Right,this.RectClient.Left,t);this.Canvas.font=this.ItemFixedFont;for(var a=0;a<this.FixedRowCount;++a)this.DrawFixedRow(e,a),e+=this.FixedRowHeight;e=t+this.FixedRowHeight*this.FixedRowCount,this.Canvas.font=this.ItemFont;for(var a=this.Data.YOffset,i=0;a<this.Data.Data.length&&i<this.RowCount;++a,++i){var r=this.Data.Data[a];this.DrawRow(r,e,a),this.ShowSymbol.push({Index:a,ExePrice:r}),e+=this.RowHeight}if(this.RectSelectedRow){this.Canvas.fillStyle=this.SelectedColor;this.Canvas.fillRect(this.RectSelectedRow.Left,this.RectSelectedRow.Bottom-2,this.RectSelectedRow.Right-this.RectSelectedRow.Left,2)}}},this.GetCenterItemRect=function(){var t=(this.RectClient.Right-this.RectClient.Left)/2+this.RectClient.Left,e=this.CenterColumn,a=e.Width+this.ItemExtraWidth;return{Left:t-a/2,Right:t+a/2,TextWidth:a-this.HeaderMergin.Left-this.HeaderMergin.Right,Width:a}},this.DrawFixedRow=function(t,e){if(this.FixedRowData&&we.IsNonEmptyArray(this.FixedRowData.Data))for(var a=this.GetCenterItemRect(),i=a.Left,r=a.Right,n=this.RectClient.Left,o=(this.RectClient.Right,this.Data.XOffset);o<this.Column.length;++o){var s=this.Column[o],l=s.Width+this.ItemExtraWidth;if((i-=l)<n)break;var h=this.FixedRowData.Data[e];if(h&&h.TData){var u=null,C=null;h.TData&&h.TData.LeftData&&(u=h.TData.LeftData),h.TData&&h.TData.RightData&&(C=h.TData.RightData);var c={Left:i,Right:i+l,Top:t,Height:this.FixedRowHeight,Width:l};c.Bottom=c.Top+c.Height,this.DrawFixedItem(e,o,h,u,s,c,1),c={Left:r,Right:r+l,Top:t,Height:this.RowHeight,Width:l},c.Bottom=c.Top+c.Height,this.DrawFixedItem(e,o,h,C,s,c,2),r+=l}}},this.DrawFixedItem=function(t,e,a,i,r,n,o){if(we.IsNonEmptyArray(i)){var s={Left:n.Left+this.ItemMergin.Left,Right:n.Right-this.ItemMergin.Right,Top:n.Top+this.ItemMergin.Top,Bottom:n.Bottom-this.ItemMergin.Bottom};s.Width=s.Right-s.Left,s.Height=s.Bottom-s.Top;var l=i[e];if(l){var h={Text:null,TextColor:r.TextColor,TextAlign:r.TextAlign,Rect:n,RectText:s};h.Text=l.Text,l.Color&&(h.TextColor=l.Color),l.TextAlign&&(h.TextAlign=l.TextAlign),this.DrawCell(h)}}},this.DrawRow=function(t,e,a){var i=this.GetCenterItemRect(),r=i.Left,n=i.Right,o=this.RectClient.Left,s=this.RectClient.Right,l={ExePrice:t,TData:null,Decimal:this.DefaultDecimal};if(this.GetExePriceDataCallback&&(l.TData=this.GetExePriceDataCallback(t)),this.GetFlashBGDataCallback&&l.TData){if(l.TData.LeftData){var h=l.TData.LeftData;l.TData.LeftFlashBG=this.GetFlashBGDataCallback(h.Symbol,Date.now()),h.Symbol&&(l.Decimal=Wr.GetfloatPrecision(h.Symbol))}if(l.TData.RightData){var h=l.TData.RightData;l.TData.RightFlashBG=this.GetFlashBGDataCallback(h.Symbol,Date.now()),h.Symbol&&(l.Decimal=Wr.GetfloatPrecision(h.Symbol))}}var u=!1;this.SelectedRow&&this.SelectedRow.ExePrice==t&&(u=!0);var C={Left:r,Right:n,Top:e,Height:this.RowHeight};if(C.Bottom=C.Top+C.Height,C.Width=C.Right-C.Left,this.DrawCenterItem(a,l,this.CenterColumn,C,0),u&&0==this.SelectedRow.CellType&&(this.RectSelectedRow=C),we.IsNumber(this.Data.Price)){var c=null,f=null;if(t>this.Data.Price?(c=this.UpBGColor,f=this.DownBGColor):(c=this.DownBGColor,f=this.UpBGColor),c){var d={Left:o+1,Right:i.Left,Top:e,Height:this.RowHeight};d.Bottom=d.Top+d.Height,d.Width=d.Right-d.Left,this.Canvas.fillStyle=c,this.Canvas.fillRect(d.Left,d.Top,d.Width,d.Height)}if(f){var d={Left:i.Right,Right:s,Top:e,Height:this.RowHeight};d.Bottom=d.Top+d.Height,d.Width=d.Right-d.Left,this.Canvas.fillStyle=f,this.Canvas.fillRect(d.Left,d.Top,d.Width,d.Height)}}for(var D=this.Data.XOffset;D<this.Column.length;++D){var h=this.Column[D],m=h.Width+this.ItemExtraWidth;if((r-=m)<o)break;var p=null,v=null;l.TData&&(p=l.TData.LeftData),l.TData&&(v=l.TData.RightData),C={Left:r,Right:r+m,Top:e,Height:this.RowHeight,Width:m},C.Bottom=C.Top+C.Height,this.DrawItem(a,l,p,h,C,1),u&&1==this.SelectedRow.CellType&&(this.RectSelectedRow?this.RectSelectedRow.Left=C.Left:this.RectSelectedRow=C),C={Left:n,Right:n+m,Top:e,Height:this.RowHeight,Width:m},C.Bottom=C.Top+C.Height,this.DrawItem(a,l,v,h,C,2),n+=m,u&&2==this.SelectedRow.CellType&&(this.RectSelectedRow?this.RectSelectedRow.Right=C.Right:this.RectSelectedRow=C)}},this.DrawCenterItem=function(t,e,a,i,r){!0===a.EnableTooltip&&this.TooltipRect.push({Rect:i,data:e,Index:t,Column:a,CellType:r});var n={Left:i.Left+this.ItemMergin.Left,Right:i.Right-this.ItemMergin.Right,Top:i.Top+this.ItemMergin.Top,Bottom:i.Bottom-this.ItemMergin.Bottom};n.Width=n.Right-n.Left,n.Height=n.Bottom-n.Top;var o={Text:null,TextColor:this.CenterItemConfig.TextColor,BGColor:this.CenterItemConfig.BGColor,TextAlign:a.TextAlign,Rect:i,RectText:n};o.Text=""+e.ExePrice.toFixed(e.Decimal),this.DrawCell(o)},this.DrawItem=function(t,e,a,i,r,n){!0===i.EnableTooltip&&this.TooltipRect.push({Rect:r,data:a,Index:t,Column:i,CellType:n});var o={Left:r.Left+this.ItemMergin.Left,Right:r.Right-this.ItemMergin.Right,Top:r.Top+this.ItemMergin.Top,Bottom:r.Bottom-this.ItemMergin.Bottom};o.Width=o.Right-o.Left,o.Height=o.Bottom-o.Top;var s={Text:null,TextColor:i.TextColor,TextAlign:i.TextAlign,Rect:r,RectText:o};if(a){switch(i.Type){case es.SYMBOL_ID:case es.NAME_ID:var l=as.get(i.Type);l&&(s.Text=a[l]);break;case es.PRICE_ID:case es.BUY_PRICE_ID:case es.SELL_PRICE_ID:var l=as.get(i.Type);l&&this.GetPriceDrawInfo(a[l],a,e,s);break;case es.SELL_VOL_ID:case es.BUY_VOL_ID:case es.POSITION_ID:case es.VOL_ID:case es.AMOUNT_ID:var l=as.get(i.Type);l&&(s.Text=this.FormatVolString(a[l]));break;case es.INCREASE_ID:case es.UPDOWN_ID:case es.AMPLITUDE_ID:var l=as.get(i.Type);if(l){var h=a[l];we.IsNumber(h)?(s.Text=h.toFixed(2),s.TextColor=this.GetUpDownColor(h,0)):this.GetNullDrawInfo(s)}break;case es.RESERVE_NUMBER1_ID:case es.RESERVE_NUMBER2_ID:case es.RESERVE_NUMBER3_ID:case es.RESERVE_NUMBER4_ID:case es.RESERVE_NUMBER5_ID:case es.RESERVE_NUMBER6_ID:case es.RESERVE_NUMBER7_ID:case es.RESERVE_NUMBER8_ID:case es.RESERVE_NUMBER9_ID:case es.RESERVE_NUMBER10_ID:this.FormatReserveNumber(i,a,s);break;case es.RESERVE_STRING1_ID:case es.RESERVE_STRING2_ID:case es.RESERVE_STRING3_ID:case es.RESERVE_STRING4_ID:case es.RESERVE_STRING5_ID:case es.RESERVE_STRING6_ID:case es.RESERVE_STRING7_ID:case es.RESERVE_STRING8_ID:case es.RESERVE_STRING9_ID:case es.RESERVE_STRING10_ID:this.FormatReserveString(i,a,s);break;default:s.Text="-----"}this.GetMarkBorderData(s,e.ExePrice,i.Type,n),this.GetFlashBGData(s,e,i.Type,n)}this.DrawCell(s,e,i.Type,n)},this.FormatReserveNumber=function(t,e,a){t.DefaultText&&(a.Text=t.DefaultText);var i=as.get(t.Type);if(e&&i){var r=e[i];we.IsNumber(r)&&(we.IsNumber(t.ColorType)&&(1==t.ColorType?a.TextColor=this.GetUpDownColor(r,0):2==t.ColorType&&(a.TextColor=this.GetUpDownColorV2(r,0))),a.Text=r.toFixed(t.FloatPrecision))}},this.FormatReserveString=function(t,e,a){t.DefaultText&&(a.Text=t.DefaultText);var i=as.get(t.Type);if(e&&i){var r=e[i];we.IsObject(r)?(r.Text&&(a.Text=r.Text),r.TextColor&&(a.TextColor=r.TextColor),r.BGColor&&(a.BGColor=r.BGColor)):we.IsString(r)&&(a.Text=r)}},this.GetFlashBGData=function(t,e,a,i){if(e.TData){var r=null;if(1==i?r=e.TData.LeftFlashBG:2==i&&(r=e.TData.RightFlashBG),r&&r.Data&&r.Data.has(a)){var n=r.Data.get(a);t.FlashBGColor=n.Color,--n.Count,this.GlobalOption&&++this.GlobalOption.FlashBGCount}}},this.GetMarkBorderData=function(t,e,a,i){if(this.BorderData&&this.BorderData.MapData&&this.BorderData.MapData.has(a)){var r=this.BorderData.MapData.get(a);if(we.IsNonEmptyArray(r.Data))if(1==i){var n=r.Data[1];if(!n)return;n.ExePrice==e&&(t.BorderColor=this.MarkBorderConfig.MaxPositionColor)}else if(2==i){var o=r.Data[2];if(!o)return;o.ExePrice==e&&(t.BorderColor=this.MarkBorderConfig.MaxPositionColor)}}},this.GetNullDrawInfo=function(t){t.Text="--",t.TextColor=this.UnchangeColor},this.GetPriceDrawInfo=function(t,e,a,i){if(!we.IsNumber(t))return void this.GetNullDrawInfo(i);i.Text=t.toFixed(a.Decimal),we.IsNumber(e.YClose)?i.TextColor=this.GetUpDownColor(t,e.YClose):i.TextColor=this.UnchangeColor},this.FormatVolString=function(t,e){return we.IsNumber(t)?we.FormatVolString(t,e):null},this.GetUpDownColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchangeColor},this.GetUpDownColorV2=function(t,e){return t>=e?this.UpColor:this.DownColor},this.DrawCell=function(t){var e=t.RectText,a=e.Top+e.Height/2;if(t.BGColor){var i=t.Rect;this.Canvas.fillStyle=t.BGColor,this.Canvas.fillRect(i.Left,i.Top,i.Width,i.Height)}if(t.FlashBGColor){var i=t.Rect;this.Canvas.fillStyle=t.FlashBGColor,this.Canvas.fillRect(i.Left,i.Top,i.Width,i.Height)}if(t.BorderColor){var i=t.Rect;this.Canvas.strokeStyle=t.BorderColor,this.Canvas.strokeRect(p(i.Left),p(i.Top+1),g(i.Width),g(i.Height-3))}t.Text&&(t.TextColor&&(this.Canvas.fillStyle=t.TextColor),this.DrawText(t.Text,t.TextAlign,e.Left,a,e.Width))},this.OnMouseDown=function(t,e,a){if(!this.Data)return null;var i=C(),r={X:t/i,Y:e/i};if(this.UIElement)var n={Left:this.UIElement.getBoundingClientRect().left,Top:this.UIElement.getBoundingClientRect().top};else var n={Left:null,Top:null};var o=this.PtInBody(t,e);if(o){var s=!1;this.SelectedRow?this.SelectedRow.ExePrice==o.ExePrice&&this.SelectedRow.CellType==o.CellType||(this.SelectedRow.ExePrice=o.ExePrice,this.SelectedRow.CellType=o.CellType,s=!0):(this.SelectedRow={ExePrice:o.ExePrice,CellType:o.CellType},s=!0);var l=Kn.ON_CLICK_TREPORT_ROW;return 2==a.button&&(l=Kn.ON_RCLICK_TREPORT_ROW),this.SendClickEvent(l,{Data:o,X:t,Y:e,e:a,Inside:r,UIElement:n}),{Type:2,Redraw:s,Row:o}}var h=this.PtInHeader(t,e);if(h){var l=Kn.ON_CLICK_TREPORT_HEADER;return 2==a.button?l=Kn.ON_RCLICK_TREPORT_HEADER:0==a.button&&(l=Kn.ON_CLICK_TREPORT_HEADER),this.SendClickEvent(l,{Data:h,X:t,Y:e,e:a,Inside:r,UIElement:n}),{Type:3,Redraw:s,Header:h}}return null},this.PtInBody=function(t,e){if(!this.Data)return null;if(!we.IsNonEmptyArray(this.Data.Data))return null;for(var a=this.RectClient.Top+this.HeaderHeight,i=this.RectClient.Left,r=this.RectClient.Right,n=a+this.FixedRowHeight*this.FixedRowCount,o=this.Data.YOffset,s=0;o<this.Data.Data.length&&s<this.RowCount;++o,++s){var l=this.Data.Data[o],h={Left:i,Top:n,Right:r,Bottom:n+this.RowHeight};if(h.Height=h.Bottom-h.Top,h.Width=h.Right-h.Left,t>=h.Left&&t<=h.Right&&e>=h.Top&&e<=h.Bottom){var u={RectRow:h,DataIndex:o,Index:s,ExePrice:l};return this.PtInItem(t,e,u)}n+=this.RowHeight}return null},this.PtInItem=function(t,e,a,i){var r=this.GetCenterItemRect(),n=a.RectRow,o={Left:r.Left,Right:r.Right,Top:n.Top,Height:n.Height,Bottom:n.Bottom};if(t>=o.Left&&t<=o.Right&&e>=o.Top&&e<=o.Bottom){var s={Rect:o,DataIndex:a.DataIndex,Index:a.Index,ExePrice:a.ExePrice,CellType:0,Column:this.CenterColumn};return s.Item=this.GetExePriceDataCallback(a.ExePrice),s}for(var l=r.Left,h=r.Right,u=this.RectClient.Left,C=(this.RectClient.Right,this.Data.XOffset);C<this.Column.length;++C){var c=this.Column[C],f=c.Width+this.ItemExtraWidth;if((l-=f)<u)break;var d={Left:l,Right:l+f,Top:n.Top,Height:n.Height,Bottom:n.Bottom,Width:f};if(t>=d.Left&&t<=d.Right&&e>=d.Top&&e<=d.Bottom){var s={Rect:o,DataIndex:a.DataIndex,Index:a.Index,ExePrice:a.ExePrice,CellType:1,ColumnIndex:C,Column:c};return s.Item=this.GetExePriceDataCallback(a.ExePrice),s}if(d={Left:h,Right:h+f,Top:n.Top,Height:n.Height,Bottom:n.Bottom,Width:f},t>=d.Left&&t<=d.Right&&e>=d.Top&&e<=d.Bottom){var s={Rect:o,DataIndex:a.DataIndex,Index:a.Index,ExePrice:a.ExePrice,CellType:2,ColumnIndex:C,Column:c};return s.Item=this.GetExePriceDataCallback(a.ExePrice),s}h+=f}return null},this.PtInHeader=function(t,e){if(!this.IsShowHeader)return null;var a=this.RectClient.Left,i=this.RectClient.Right,r=this.RectClient.Top,n=r+this.HeaderHeight;if(!(t>=a&&t<=i&&e>=r&&e<=n))return null;var o={Left:a,Right:i,Top:r,Bottom:n};o.Width=o.Right-o.Left,o.Height=o.Bottom-o.Top;var s={RectRow:o,DataIndex:-1,Index:-1,ExePrice:null};return this.PtInItem(t,e,s)},this.SendClickEvent=function(t,e){var a=this.GetEventCallback(t);a&&a.Callback&&a.Callback(a,e,this)},this.GetCurrentPageStatus=function(){var t={Start:this.Data.YOffset,PageSize:this.RowCount,IsEnd:!1,SelectedRow:this.SelectedRow,IsSinglePage:!1,DataCount:0};return we.IsNonEmptyArray(this.Data.Data)?(t.End=this.Data.YOffset+this.RowCount-1,t.IsSinglePage=this.Data.Data.length<=this.RowCount,t.DataCount=this.Data.Data.length,t.End>=this.Data.Data.length-1&&(t.IsEnd=!0),t.End>=this.Data.Data.length&&(t.End=this.Data.Data.length-1)):(t.Start=0,t.End=0,t.IsEnd=!0,t.IsSinglePage=!0),t},this.OnDblClick=function(t,e,a){if(!this.Data)return!1;var i=this.PtInBody(t,e);return!!i&&(this.SendClickEvent(Kn.ON_DBCLICK_TREPORT_ROW,{Data:i,X:t,Y:e}),!0)}}function qr(t){this.DivElement=t,this.JSChartContainer,this.ResizeListener,this.CanvasElement=document.createElement("canvas"),this.CanvasElement.className="jskeyboard-drawing",this.CanvasElement.id=D(),this.CanvasElement.setAttribute("tabindex",0),this.CanvasElement.style&&(this.CanvasElement.style.outline="none"),t.hasChildNodes()&&Xn.Chart.Log("[JSKeyboardChart::JSRepoJSKeyboardChartrtChart] divElement hasChildNodes",t.childNodes),t.appendChild(this.CanvasElement),this.OnSize=function(){var t=this.DivElement.offsetHeight,e=this.DivElement.offsetWidth;this.DivElement.style.height&&this.DivElement.style.width&&(this.DivElement.style.height.includes("px")&&(t=parseInt(this.DivElement.style.height.replace("px",""))),this.DivElement.style.width.includes("px")&&(e=parseInt(this.DivElement.style.width.replace("px","")))),this.CanvasElement.height=t,this.CanvasElement.width=e,this.CanvasElement.style.width=this.CanvasElement.width+"px",this.CanvasElement.style.height=this.CanvasElement.height+"px";var a=C();this.CanvasElement.height*=a,this.CanvasElement.width*=a,Xn.Chart.Log("[JSKeyboardChart::OnSize] devicePixelRatio="+window.devicePixelRatio+", height="+this.CanvasElement.height+", width="+this.CanvasElement.width),this.JSChartContainer&&this.JSChartContainer.OnSize&&this.JSChartContainer.OnSize()},this.SetOption=function(t){var e=this.CreateJSKeyboardChartContainer(t);if(!e)return!1;if(t.OnCreatedCallback&&t.OnCreatedCallback(e),this.JSChartContainer=e,this.DivElement.JSChart=this,t.EventCallback)for(var a=0;a<t.EventCallback.length;++a){var i=t.EventCallback[a];e.AddEventCallback(i)}1==t.EnableResize&&this.CreateResizeListener(),e.Draw()},this.CreateJSKeyboardChartContainer=function(t){var e=new Zr(this.CanvasElement);if(e.Create(t),t.NetworkFilter&&(e.NetworkFilter=t.NetworkFilter),we.IsNonEmptyArray(t.Column)&&e.SetColumn(t.Column),we.IsNumber(t.BorderLine)&&(e.Frame.BorderLine=t.BorderLine),this.SetChartBorder(e,t),t.EventCallback)for(var a=0;a<t.EventCallback.length;++a){var i=t.EventCallback[a];e.AddEventCallback(i)}return e},this.SetChartBorder=function(t,e){if(e.Border){e.Border;we.IsNumber(e.Border.Left)&&(t.Frame.ChartBorder.Left=e.Border.Left),we.IsNumber(e.Border.Right)&&(t.Frame.ChartBorder.Right=e.Border.Right),we.IsNumber(e.Border.Top)&&(t.Frame.ChartBorder.Top=e.Border.Top),we.IsNumber(e.Border.Bottom)&&(t.Frame.ChartBorder.Bottom=e.Border.Bottom);var a=C();t.Frame.ChartBorder.Left*=a,t.Frame.ChartBorder.Right*=a,t.Frame.ChartBorder.Top*=a,t.Frame.ChartBorder.Bottom*=a}},this.CreateResizeListener=function(){var t=this;this.ResizeListener=new ResizeObserver(function(e){t.OnDivResize(e)}),this.ResizeListener.observe(this.DivElement)},this.OnDivResize=function(t){Xn.Chart.Log("[JSKeyboardChart::OnDivResize] entries=",t),this.OnSize()},this.SetColumn=function(t,e){this.JSChartContainer&&this.JSChartContainer.SetColumn(t,e)},this.AddEventCallback=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddEventCallback&&(Xn.Chart.Log("[JSKeyboardChart:AddEventCallback] obj=",t),this.JSChartContainer.AddEventCallback(t))},this.ReloadResource=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ReloadResource&&(Xn.Chart.Log("[JSKeyboardChart:ReloadResource] "),this.JSChartContainer.ReloadResource(t))},this.ChartDestory=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChartDestory&&this.JSChartContainer.ChartDestory()},this.Draw=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Draw&&(Xn.Chart.Log("[JSKeyboardChart:Draw] "),this.JSChartContainer.Draw())},this.SetSymbolData=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Draw&&(Xn.Chart.Log("[JSKeyboardChart:SetSymbolData] ",t),this.JSChartContainer.SetSymbolData(t))},this.Search=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Search&&(Xn.Chart.Log("[JSKeyboardChart:Search] ",t),this.JSChartContainer.Search(t))},this.OnKeyDown=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.OnKeyDown&&(Xn.Chart.Log("[JSKeyboardChart:OnKeyDown] ",t),this.JSChartContainer.OnKeyDown(t))},this.ClearSearch=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ClearSearch&&(Xn.Chart.Log("[JSKeyboardChart:ClearSearch] ",t),this.JSChartContainer.ClearSearch(t))}}function Zr(t){this.ClassName="JSKeyboardChartContainer",this.Frame,this.ChartPaint=[],this.Canvas=t.getContext("2d"),this.ShowCanvas=null,this.NetworkFilter,this.Data={XOffset:0,YOffset:0,Data:[]},this.MapSymbol=new Vn.default,this.SourceData={Data:[]},this.FunctionKeyData=[],this.mapEvent=new Vn.default,this.UIElement=t,this.LastPoint=new E,this.DragYScroll=null,this.IsDestroy=!1,this.ChartDestory=function(){this.IsDestroy=!0},this.ClearSearch=function(t){this.Data.Data=[],this.Data.XOffset=0,this.Data.YOffset=0,t&&1==t.Redraw&&this.Draw()},this.SearchFunctionKeyData=function(t){if(t.length<=0)return null;if(!we.IsNonEmptyArray(this.FunctionKeyData))return null;for(var e=[],a=0;a<this.FunctionKeyData.length;++a){var i=this.FunctionKeyData[a];if(i&&we.IsNonEmptyArray(i.Data)){for(var r=[],n=[],o=[],s=0;s<i.Data.length;++s){var l=i.Data[s];this.SearchSymbol(l,t,r,n,o)}we.IsNonEmptyArray(o)&&e.push.apply(e,o),we.IsNonEmptyArray(r)&&e.push.apply(e,r),we.IsNonEmptyArray(n)&&e.push.apply(e,n)}}return e.length>0?e:null},this.Search=function(t){var e,a,i,r,n=[],o=[],s=[],l=null;this.MapSymbol.clear(),this.Data.Data=[],this.Data.XOffset=0,this.Data.YOffset=0;var h=t.trim();if(h.length>0){l=this.SearchFunctionKeyData(h);for(var u=0;u<this.SourceData.Data.length;++u){var C=this.SourceData.Data[u];this.SearchSymbol(C,h,n,o,s)||this.SearchSpell(C,h,n,o)}}we.IsNonEmptyArray(l)&&(e=this.Data.Data).push.apply(e,(0,gn.default)(l)),we.IsNonEmptyArray(s)&&(a=this.Data.Data).push.apply(a,s),we.IsNonEmptyArray(n)&&(i=this.Data.Data).push.apply(i,n),we.IsNonEmptyArray(o)&&(r=this.Data.Data).push.apply(r,o),this.ChartPaint[0].SelectedRow=0,this.ChartPaint[0].SizeChange=!0,Xn.Chart.Log("[JSKeyboardChart:Search] search="+h+", source="+this.SourceData.Data.length+" match="+this.Data.Data.length),this.Draw()},this.SearchSymbol=function(t,e,a,i,r){var n=t.Symbol.indexOf(e);return!(n<0)&&(t.Symbol==e?r.push(t.Symbol):0==n?a.push(t.Symbol):i.push(t.Symbol),this.MapSymbol.set(t.Symbol,t),!0)},this.SearchSpell=function(t,e,a,i){return!!we.IsString(t.Spell)&&(0==t.Spell.indexOf(e)&&(a.push(t.Symbol),this.MapSymbol.set(t.Symbol,t),!0))},this.SetSymbolData=function(t){this.SourceData.Data=[];for(var e=0;e<t.length;++e){var a=t[e];we.IsNumber(a.Priority)?(this.FunctionKeyData[a.Priority]||(this.FunctionKeyData[a.Priority]={Priority:a.Priority,Data:[]}),this.FunctionKeyData[a.Priority].Data.push(a)):this.SourceData.Data.push(a)}},this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.Frame=new jr,this.Frame.ChartBorder=new M,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas;var a=new Qr;a.Frame=this.Frame,a.ChartBorder=this.Frame.ChartBorder,a.Canvas=this.Canvas,a.UIElement=this.UIElement,a.GetEventCallback=function(t){return e.GetEventCallback(t)},a.GetStockDataCallback=function(t){return e.GetStockData(t)},a.Data=this.Data,this.ChartPaint[0]=a,a.VScrollbar=new $r,a.VScrollbar.Frame=this.Frame,a.VScrollbar.Canvas=this.Canvas,a.VScrollbar.ChartBorder=this.Frame.ChartBorder,a.VScrollbar.Report=a;var i=!0,r=!0;t&&(!1===t.KeyDown&&(i=!1,Xn.Chart.Log("[JSKeyboardChartContainer::Create] not register keydown event.")),!1===t.Wheel&&(r=!1,Xn.Chart.Log("[JSKeyboardChartContainer::Create] not register wheel event."))),i&&this.UIElement.addEventListener("keydown",function(t){e.OnKeyDown(t)},!0),r&&this.UIElement.addEventListener("wheel",function(t){e.OnWheel(t)},!0),this.UIElement.ondblclick=function(t){e.UIOnDblClick(t)},this.UIElement.onmousedown=function(t){e.UIOnMouseDown(t)},this.UIElement.oncontextmenu=function(t){e.UIOnContextMenu(t)},this.UIElement.onmousemove=function(t){e.UIOnMouseMove(t)},this.UIElement.onmouseout=function(t){e.UIOnMounseOut(t)},this.UIElement.onmouseleave=function(t){e.UIOnMouseleave(t)}},this.Draw=function(){if(!(this.UIElement.width<=0||this.UIElement.height<=0)){this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height);var t=C();this.Canvas.lineWidth=t,this.Frame.Draw(),this.Frame.DrawLogo();for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.IsDrawFirst&&a.Draw()}for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.IsDrawFirst||a.Draw()}}},this.GetStockData=function(t){return this.MapSymbol.has(t)?this.MapSymbol.get(t):null},this.ResetStatus=function(){this.Data.XOffset=0,this.Data.YOffset=0},this.ResetSelectStatus=function(){var t=this.GetReportChart();t&&(t.SelectedRow=-1,t.SelectedFixedRow=-1)},this.AddEventCallback=function(t){if(t&&t.event&&t.callback){var e={Callback:t.callback,Source:t};this.mapEvent.set(t.event,e)}},this.RemoveEventCallback=function(t){this.mapEvent.has(t)&&this.mapEvent.delete(t)},this.GetEventCallback=function(t){return this.mapEvent.has(t)?this.mapEvent.get(t):null},this.OnSize=function(){this.Frame&&(this.SetSizeChange(!0),this.Draw())},this.SetSizeChange=function(t){for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a&&(a.SizeChange=t)}},this.OnWheel=function(t){if(Xn.Chart.Log("[JSKeyboardChartContainer::OnWheel]",t),(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash)&&this.Data&&we.IsNonEmptyArray(this.Data.Data)){var e=t.clientX-this.UIElement.getBoundingClientRect().left,a=t.clientY-this.UIElement.getBoundingClientRect().top;if(this.Canvas.beginPath(),this.Canvas.rect(this.Frame.ChartBorder.GetLeft(),this.Frame.ChartBorder.GetTop(),this.Frame.ChartBorder.GetWidth(),this.Frame.ChartBorder.GetHeight()),this.Canvas.isPointInPath(e,a)){if(this.ChartPaint[0]){var i=t.wheelDelta;we.IsObjectExist(t.wheelDelta)||(i=-.01*t.deltaY),i<0?this.GotoNextPage(this.PageUpDownCycle)&&this.Draw():i>0&&this.GotoPreviousPage(this.PageUpDownCycle)&&this.Draw(),t.preventDefault?t.preventDefault():t.returnValue=!1}}}},this.OnKeyDown=function(t){if(!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){if(this.GetReportChart()){switch(t.keyCode?t.keyCode:t.which){case 33:this.GotoPreviousPage(this.PageUpDownCycle)&&this.Draw();break;case 34:this.GotoNextPage(this.PageUpDownCycle)&&this.Draw();break;case 38:var e=this.MoveSelectedRow(-1);e&&e.Redraw&&this.Draw();break;case 40:var e=this.MoveSelectedRow(1);e&&e.Redraw&&this.Draw();break;case 37:this.MoveXOffset(-1)&&this.Draw();break;case 39:this.MoveXOffset(1)&&this.Draw();break;case 13:this.OnSelectedSymbol()}t.preventDefault?t.preventDefault():t.returnValue=!1}}},this.OnSelectedSymbol=function(){if(!this.Data||!we.IsNonEmptyArray(this.Data.Data))return!1;var t=this.ChartPaint[0];if(!t)return!1;var e=t.GetSelectedSymbol(),a=this.MapSymbol.get(e.Symbol);if(!a)return!1;var i=this.GetEventCallback(Kn.ON_KEYBOARD_SELECTED);i&&i.Callback&&i.Callback(i,{Data:e,RowData:a},this)},this.UIOnDblClick=function(t){var e=C(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e,r=this.ChartPaint[0];r&&r.OnDblClick(a,i,t)&&this.OnSelectedSymbol()},this.UIOnMouseDown=function(t){var e=this;this.DragYScroll=null,this.DragMove={Click:{X:t.clientX,Y:t.clientY},Move:{X:t.clientX,Y:t.clientY},PreMove:{X:t.clientX,Y:t.clientY}};var a=C(),i=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,r=(t.clientY-this.UIElement.getBoundingClientRect().top)*a,n=this.ChartPaint[0];if(n){var o=n.OnMouseDown(i,r,t);if(!o)return;if(2!=o.Type||0!=t.button&&2!=t.button){if(5==o.Type&&0==t.button){var s=o.VScrollbar;1==s.Type?this.MoveYOffset(-1)&&this.Draw():2==s.Type?this.MoveYOffset(1)&&this.Draw():3==s.Type?this.DragYScroll={Click:{X:i,Y:r},LastMove:{X:i,Y:r}}:4==s.Type&&this.SetYOffset(s.Pos)&&this.Draw()}}else 1==o.Redraw&&this.Draw()}document.onmousemove=function(t){e.DocOnMouseMove(t)},document.onmouseup=function(t){e.DocOnMouseUp(t)}},this.UIOnContextMenu=function(t){t.preventDefault()},this.UIOnMouseMove=function(t){var e=C();t.clientX,this.UIElement.getBoundingClientRect().left,t.clientY,this.UIElement.getBoundingClientRect().top},this.UIOnMounseOut=function(t){},this.UIOnMouseleave=function(t){},this.DocOnMouseMove=function(t){if(this.DragMove.PreMove.X=this.DragMove.Move.X,this.DragMove.PreMove.Y=this.DragMove.Move.Y,this.DragMove.Move.X=t.clientX,this.DragMove.Move.Y=t.clientX,!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var e=C(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e;if(this.DragYScroll){var r=this.ChartPaint[0];if(!r||!r.VScrollbar)return;this.DragYScroll.LastMove.X=a,this.DragYScroll.LastMove.Y=i;var n=r.VScrollbar.GetScrollPostionByPoint(a,i);this.SetYOffset(n)&&this.Draw()}}},this.DocOnMouseUp=function(t){document.onmousemove=null,document.onmouseup=null,this.DragYScroll=null;var e=this.GetEventCallback(Kn.ON_KEYBOARD_MOUSEUP);e&&e.Callback&&e.Callback(e,{},this)},this.GetMoveAngle=function(t,e){var a=Math.abs(t.X-e.X),i=Math.abs(t.Y-e.Y);return 180*Math.atan(a/i)/Math.PI},this.PreventTouchEvent=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()},this.OnDragYOffset=function(t,e,a,i){if(a<5)return!1;var r=!0;t.LastMove.Y<e[0].clientY&&(r=!1);var n=this.YStepPixel;n<=0&&(n=5);var o=parseInt(a/n);return!(o<=0)&&(0==r&&(o*=-1),this.MoveYOffset(o,this.DragPageCycle)&&(t.IsYMove=!0,this.Draw(),this.DelayUpdateStockData()),!0)},this.OnDragXOffset=function(t,e,a,i){if(a<5)return!1;var r=!0;t.LastMove.X<e[0].clientX&&(r=!1);var n=this.XStepPixel;n<=0&&(n=5);var o=parseInt(a/n);return!(o<=0)&&(r||(o*=-1),this.MoveXOffset(o)&&(t.IsXMove=!0,this.Draw()),!0)},this.GetReportChart=function(){return this.ChartPaint[0]},this.GotoNextPage=function(t){if(!this.Data||!we.IsNonEmptyArray(this.Data.Data))return!1;var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetPageSize();if(a>this.Data.Data.length)return!1;if(this.Data.YOffset+a>=this.Data.Data.length)return!0===t&&(this.Data.YOffset=0,!0);this.Data.YOffset+=a;this.Data.Data.length,this.Data.YOffset;return e.SelectedRow=this.Data.YOffset,!0},this.GotoPreviousPage=function(t){if(!this.Data||!we.IsNonEmptyArray(this.Data.Data))return!1;var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetPageSize();if(a>this.Data.Data.length)return!1;if(this.Data.YOffset<=0)return!0===t&&(this.Data.YOffset=this.Data.Data.length-a,!0);var i=this.Data.YOffset;return i-=a,i<0&&(i=0),this.Data.YOffset=i,e.SelectedRow=this.Data.YOffset,!0},this.MoveYOffset=function(t,e){if(!this.Data||!we.IsNonEmptyArray(this.Data.Data))return!1;var a=this.ChartPaint[0];if(!a)return!1;var i=a.GetCurrentPageStatus();if(i.IsSinglePage)return!1;if(t>0){var r=this.Data.Data.length,n=i.PageSize,o=this.Data.YOffset;if(e)for(var s=0;s<t;++s)++o+n>r&&(o=0);else{if(o+n>=r)return!1;for(var s=0;s<t&&!(o+n+1>r);++s)++o}return this.Data.YOffset=o,!0}if(t<0){t=Math.abs(t);var o=this.Data.YOffset;if(e)for(var n=i.PageSize,s=0;s<t;++s)--o<0&&(o=this.Data.Data.length-n);else{if(this.Data.YOffset<=0)return!1;for(var s=0;s<t&&!(o-1<0);++s)--o}return this.Data.YOffset=o,!0}return!1},this.GotoLastPage=function(){var t=this.ChartPaint[0];if(t){var e=t.GetPageSize(!0),a=this.Data.Data.length-e;a<0&&(a=0),this.Data.DataOffset=a}},this.SetColumn=function(t,e){var a=this.ChartPaint[0];a&&(a.SetColumn(t),a.SizeChange=!0,e&&e.Redraw&&this.Draw())},this.ReloadResource=function(t){this.Frame.ReloadResource(t);for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.ReloadResource&&a.ReloadResource(t)}t&&t.Redraw&&(this.SetSizeChange(!0),this.Draw())},this.MoveSelectedRow=function(t){var e=this.ChartPaint[0];if(!e)return null;if(!we.IsNonEmptyArray(this.Data.Data))return null;var a={Redraw:!1},i=e.GetCurrentPageStatus(),r=(i.PageSize,i.SelectedRow);if(t>0){if(r<0||r<i.Start||r>i.End)return e.SelectedRow=i.Start,a.Redraw=!0,a;for(var n=this.Data.YOffset,o=0;o<t&&(++r,r>i.End&&++n,!(r>=this.Data.Data.length));++o)a.Redraw=!0,e.SelectedRow=r,this.Data.YOffset=n;return a}if(t<0){if(r<0||r<i.Start||r>i.End)return e.SelectedRow=i.End,a.Redraw=!0,a;t=Math.abs(t);for(var n=this.Data.YOffset,o=0;o<t&&(--r,r<i.Start&&--n,!(r<0));++o)a.Redraw=!0,e.SelectedRow=r,this.Data.YOffset=n;return a}},this.SetYOffset=function(t){if(!we.IsNumber(t))return!1;var e=this.ChartPaint[0];if(!e)return!1;var a=e.GetYScrollRange();return t<0&&(t=0),t>a&&(t=a),this.Data.YOffset=t,!0}}function jr(){this.ChartBorder,this.Canvas,this.BorderLine=null,this.BorderColor=So.Keyboard.BorderColor,this.LogoTextColor=So.FrameLogo.TextColor,this.LogoTextFont=So.FrameLogo.Font,this.ReloadResource=function(t){this.BorderColor=So.Keyboard.BorderColor,this.LogoTextColor=So.FrameLogo.TextColor,this.LogoTextFont=So.FrameLogo.Font},this.Draw=function(){var t=p(this.ChartBorder.GetLeft()),e=p(this.ChartBorder.GetTop()),a=p(this.ChartBorder.GetRight()),i=p(this.ChartBorder.GetBottom()),r=a-t,n=i-e;we.IsNumber(this.BorderLine)?(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),(1&this.BorderLine)>0&&(this.Canvas.moveTo(t,e),this.Canvas.lineTo(a,e)),(2&this.BorderLine)>0&&(this.Canvas.moveTo(t,i),this.Canvas.lineTo(a,i)),(4&this.BorderLine)>0&&(this.Canvas.moveTo(t,e),this.Canvas.lineTo(t,i)),(8&this.BorderLine)>0&&(this.Canvas.moveTo(a,e),this.Canvas.lineTo(a,i)),this.Canvas.stroke()):(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(t,e,r,n))},this.DrawLogo=function(){var t=So.FrameLogo.Text;if(we.IsString(t)){this.Canvas.fillStyle=this.LogoTextColor,this.Canvas.font=this.LogoTextFont,this.Canvas.textAlign="right",this.Canvas.textBaseline="bottom";var e=this.ChartBorder.GetRight()-30,a=this.ChartBorder.GetBottom()-5;this.Canvas.fillText(t,e,a)}}}function Qr(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ChartSymbolList",this.UIElement,this.IsDrawFirst=!1,this.GetEventCallback,this.Data,this.SizeChange=!0,this.SelectedRow=-1,this.IsDrawBorder=!1,this.ShowSymbol=[],this.VScrollbar,this.BorderColor=So.Keyboard.BorderColor,this.SelectedColor=So.Keyboard.SelectedColor,this.TextColor=So.Keyboard.TextColor,this.ItemFontConfig={Size:So.Keyboard.Item.Font.Size,Name:So.Keyboard.Item.Font.Name},this.ItemMergin={Left:So.Keyboard.Item.Mergin.Left,Right:So.Keyboard.Item.Mergin.Right,Top:So.Keyboard.Item.Mergin.Top,Bottom:So.Keyboard.Item.Mergin.Bottom},this.ItemFont=15*C()+"px å¾®è½¯éé»",this.ItemSymbolFont=12*C()+"px å¾®è½¯éé»",this.ItemNameFont=15*C()+"px å¾®è½¯éé»",this.ItemNameHeight=0,this.RowCount=0,this.RowHeight=0,this.Column=[{Type:is.SHORT_SYMBOL_ID,Title:"ä»£ç ",TextAlign:"left",Width:null,MaxText:"888888"},{Type:is.NAME_ID,Title:"åç§°",TextAlign:"left",Width:null,MaxText:"ææææææ"},{Type:is.TYPE_NAME_ID,Title:"ç±»å",TextAlign:"right",Width:null,MaxText:"ææææ"}],this.RectClient={},this.ReloadResource=function(t){this.BorderColor=So.Keyboard.BorderColor,this.SelectedColor=So.Keyboard.SelectedColor,this.TextColor=So.Keyboard.TextColor,this.VScrollbar&&this.VScrollbar.ReloadResource(t)},this.SetColumn=function(t){if(we.IsNonEmptyArray(t)){this.Column=[];for(var e=0;e<t.length;++e){var a=t[e],i=this.GetDefaultColunm(a.Type);i&&(a.Title&&(i.Title=a.Title),a.TextAlign&&(i.TextAlign=a.TextAlign),a.MaxText&&(i.MaxText=a.MaxText),this.Column.push(i))}}},this.GetDefaultColunm=function(t){for(var e=[{Type:is.SHORT_SYMBOL_ID,Title:"ä»£ç ",TextAlign:"left",Width:null,MaxText:"888888"},{Type:is.NAME_ID,Title:"åç§°",TextAlign:"left",Width:null,MaxText:"ææææææ"},{Type:is.TYPE_NAME_ID,Title:"ç±»å",TextAlign:"right",Width:null,MaxText:"ææææ"}],a=0;a<e.length;++a){var i=e[a];if(i.Type==t)return i}return null},this.Draw=function(){this.ShowSymbol=[],this.SizeChange?this.CalculateSize():this.UpdateCacheData();var t=this.IsShowVScrollbar();if(this.Canvas.save(),this.Canvas.beginPath(),this.Canvas.rect(this.RectClient.Left,this.RectClient.Top+1,this.RectClient.Right-this.RectClient.Left,this.RectClient.Bottom-(this.RectClient.Top+1)),this.Canvas.clip(),this.DrawBody(),this.Canvas.restore(),this.DrawBorder(),this.VScrollbar&&t){var e=this.ChartBorder.GetBottom();this.VScrollbar.DrawScrollbar(this.RectClient.Left,this.RectClient.Top+2,this.RectClient.Right+this.VScrollbar.ButtonSize+2,e-2)}this.SizeChange=!1},this.UpdateCacheData=function(){this.RectClient.Left=this.ChartBorder.GetLeft(),this.RectClient.Right=this.ChartBorder.GetRight(),this.RectClient.Top=this.ChartBorder.GetTop(),this.RectClient.Bottom=this.ChartBorder.GetBottom(),this.IsShowVScrollbar()&&this.VScrollbar&&this.VScrollbar.Enable&&(this.RectClient.Right-=this.VScrollbar.ButtonSize+2)},this.GetPageSize=function(t){return t&&this.CalculateSize(),this.RowCount},this.GetCurrentPageStatus=function(){var t={Start:this.Data.YOffset,PageSize:this.RowCount,IsEnd:!1,SelectedRow:this.SelectedRow,IsSinglePage:!1,DataCount:0};return we.IsNonEmptyArray(this.Data.Data)?(t.End=this.Data.YOffset+this.RowCount-1,t.IsSinglePage=this.Data.Data.length<=this.RowCount,t.DataCount=this.Data.Data.length,t.End>=this.Data.Data.length-1&&(t.IsEnd=!0),t.End>=this.Data.Data.length&&(t.End=this.Data.Data.length-1)):(t.Star=0,t.End=0,t.IsEnd=!0,t.IsSinglePage=!0),t},this.CalculateSize=function(){this.VScrollbar&&this.VScrollbar.Enable&&this.VScrollbar.CalculateSize(),this.UpdateCacheData();var t=C();this.ItemFont=this.ItemFontConfig.Size*t+"px "+this.ItemFontConfig.Name,this.RowHeight=this.GetFontHeight(this.ItemFont,"æ")+this.ItemMergin.Top+this.ItemMergin.Bottom;var e=this.RectClient.Left,a=this.RectClient.Right;this.Canvas.font=this.ItemFont;for(var i=0,r=0;r<this.Column.length;++r){var n=this.Column[r];i=this.Canvas.measureText(n.MaxText).width,n.Width=i+4+this.ItemMergin.Left+this.ItemMergin.Right,r==this.Column.length-1&&e+n.Width<a&&(n.Width=a-e),e+=n.Width}this.RowCount=parseInt((this.RectClient.Bottom-this.RectClient.Top)/this.RowHeight)},this.DrawText=function(t,e,a,i,r){"center"==e?(a+=r/2,this.Canvas.textAlign="center"):"right"==e?(a+=r,this.Canvas.textAlign="right"):this.Canvas.textAlign="left",this.Canvas.textBaseline="middle",this.Canvas.fillText(t,a,i)},this.DrawBorder=function(){if(this.IsDrawBorder){var t=this.RectClient.Left,e=this.RectClient.Right,a=this.RectClient.Top;this.RectClient.Bottom;this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),this.Canvas.moveTo(t,p(a)),this.Canvas.lineTo(e,p(a));for(var i=a+this.RowHeight,r=i,n=0;n<this.RowCount;++n){var o=p(i);this.Canvas.moveTo(t,o),this.Canvas.lineTo(e,o),r=i,i+=this.RowHeight}for(var s=t,n=this.Data.XOffset;n<this.Column.length;++n){var l=this.Column[n],h=p(s+l.Width);this.Canvas.moveTo(h,a),this.Canvas.lineTo(h,r),s+=l.Width}this.Canvas.stroke()}},this.GetSelectedSymbol=function(){return this.SelectedRow<0||this.SelectedRow>=this.Data.Data.length?null:{Symbol:this.Data.Data[this.SelectedRow],RowID:this.SelectedRow}},this.DrawBody=function(){if(this.Data&&we.IsNonEmptyArray(this.Data.Data)){this.Canvas.font=this.ItemFont;var t=this.RectClient.Top,e=this.RectClient.Left,a=this.RectClient.Right-this.RectClient.Left,i=t;this.Canvas.font=this.ItemFont;for(var r=this.Data.YOffset,n=0;r<this.Data.Data.length&&n<this.RowCount;++r,++n){var o=this.Data.Data[r],s=!1;r==this.SelectedRow&&(s=!0),s&&(this.Canvas.fillStyle=this.SelectedColor,this.Canvas.fillRect(e+1,i,a,this.RowHeight)),this.DrawRow(o,i,r),this.ShowSymbol.push({Index:r,Symbol:o}),i+=this.RowHeight}}},this.DrawRow=function(t,e,a,i){var r=this.RectClient.Left,n=this.RectClient.Right,o={Symbol:t,Stock:null,Block:null};this.GetStockDataCallback&&(o.Stock=this.GetStockDataCallback(t));for(var s=this.Data.XOffset;s<this.Column.length;++s){var l=this.Column[s];if(this.DrawItem(a,o,l,r,e,i),(r+=l.Width)>=n)break}},this.DrawItem=function(t,e,a,i,r,n){var o=(a.Width,i+this.ItemMergin.Left),s=a.Width-this.ItemMergin.Left-this.ItemMergin.Right,l=e.Stock,h={Text:null,TextColor:this.TextColor,TextAlign:a.TextAlign};a.Type==is.SHORT_SYMBOL_ID?(l&&l.ShortSymbol?h.Text=l.ShortSymbol:h.Text=e.Symbol,l.Color&&(h.TextColor=l.Color)):a.Type==is.NAME_ID?l&&l.Name&&(h.Text=this.TextEllipsis(l.Name,s,a.MaxText),l.Color&&(h.TextColor=l.Color)):a.Type==is.TYPE_NAME_ID&&l&&l.TypeName&&(h.Text=this.TextEllipsis(l.TypeName,s,a.MaxText),l.Color&&(h.TextColor=l.Color)),this.DrawItemText(h.Text,h.TextColor,h.TextAlign,o,r,s)},this.DrawItemText=function(t,e,a,i,r,n){if(t){var o=i;"center"==a?(o=i+n/2,this.Canvas.textAlign="center"):"right"==a?(o=i+n-2,i+n-2>this.RectClient.Right&&(o=this.RectClient.Right-2),this.Canvas.textAlign="right"):(o+=2,this.Canvas.textAlign="left"),this.Canvas.textBaseline="middle",this.Canvas.fillStyle=e,this.Canvas.fillText(t,o,r+this.ItemMergin.Top+this.RowHeight/2)}},this.TextEllipsis=function(t,e,a){if(!t)return null;if(t.length<a.length)return t;var i=a.length-3;if(i<0)return null;for(var r=t.slice(0,i),n=i;n<t.length;++n){var o=r+t[n]+"...";if(this.Canvas.measureText(o).width>e){r+="...";break}r+=t[n]}return r},this.GetFontHeight=function(t,e){return c(this.Canvas,t,e)},this.OnMouseDown=function(t,e,a){if(!this.Data)return null;var i=C(),r={X:t/i,Y:e/i};if(this.UIElement)var n={Left:this.UIElement.getBoundingClientRect().left,Top:this.UIElement.getBoundingClientRect().top};else var n={Left:null,Top:null};if(this.VScrollbar){var o=this.VScrollbar.OnMouseDown(t,e,a);if(o)return{Type:5,VScrollbar:o}}var s=this.PtInBody(t,e);if(s){var l=!0;0==this.SelectedModel?(this.SelectedRow==s.Index&&(l=!1),this.SelectedRow=s.Index,this.SelectedFixedRow=-1):(this.SelectedRow==s.DataIndex&&(l=!1),this.SelectedRow=s.DataIndex,this.SelectedFixedRow=-1);var h=Kn.ON_CLICK_REPORT_ROW;return 2==a.button&&(h=Kn.ON_RCLICK_REPORT_ROW),this.SendClickEvent(h,{Data:s,X:t,Y:e,e:a,Inside:r,UIElement:n}),{Type:2,Redraw:l,Row:s}}return null},this.OnDrawgRow=function(t,e,a){if(!this.Data)return null;if(!we.IsNonEmptyArray(this.Data.Data))return null;var i=this.RowHeight/2,r=this.RectClient.Top+this.HeaderHeight,n=this.ChartBorder.GetChartWidth(),o=r;if(e<o+i)return{Type:5};for(var s=this.Data.YOffset,l=0;s<this.Data.Data.length&&l<this.RowCount;++s,++l){var h=this.Data.Data[s],u={Left:0,Top:o,Right:n,Bottom:o+this.RowHeight};if(u.Top+=i,u.Bottom+=i,t>=u.Left&&t<=u.Right&&e>=u.Top&&e<=u.Bottom){var C={DataIndex:s,Index:l,Symbol:h,Pos:0};return 0==l?C.Pos=1:l==this.RowCount-1&&(C.Pos=2),{Type:2,Data:C}}o+=this.RowHeight}return l<this.RowCount?{Type:6}:{Type:7}},this.OnDblClick=function(t,e,a){return!!this.Data&&!!this.PtInBody(t,e)},this.PtInBody=function(t,e){if(!this.Data)return null;if(!we.IsNonEmptyArray(this.Data.Data))return null;for(var a=this.RectClient.Top,i=this.RectClient.Left,r=this.RectClient.Right,n=(this.RectClient.Right,this.RectClient.Left,a),o=this.Data.YOffset,s=0;o<this.Data.Data.length&&s<this.RowCount;++o,++s){var l=this.Data.Data[o],h={Left:i,Top:n,Right:r,Bottom:n+this.RowHeight};if(t>=h.Left&&t<=h.Right&&e>=h.Top&&e<=h.Bottom){var u={Rect:h,DataIndex:o,Index:s,Symbol:l};return u.Item=this.PtInItem(t,e,h.Top,h.Bottom),u}n+=this.RowHeight}return null},this.PtInItem=function(t,e,a,i){for(var r=this.RectClient.Left,n=this.RectClient.Right,o=r,s=0;s<this.FixedColumn&&s<this.Column.length;++s){var l=this.Column[s],h={Left:o,Right:o+l.Width,Top:a,Bottom:i};if(t>=h.Left&&t<=h.Right&&e>=h.Top&&e<=h.Bottom)return{Rect:h,Column:l,Index:s};o+=l.Width}for(var s=this.FixedColumn+this.Data.XOffset;s<this.Column.length;++s){var l=this.Column[s];if(o>=n)break;var h={Left:o,Right:o+l.Width,Top:a,Bottom:i};if(t>=h.Left&&t<=h.Right&&e>=h.Top&&e<=h.Bottom)return{Rect:h,Column:l,Index:s};o+=l.Width}return null},this.IsPtInBody=function(t,e){var a=this.RectClient.Top,i=this.RectClient.Left,r=this.RectClient.Right,n=this.RectClient.Bottom;return t>=i&&t<=r&&e>=a&&e<=n},this.SendClickEvent=function(t,e){var a=this.GetEventCallback(t);a&&a.Callback&&a.Callback(a,e,this)},this.GetYScrollRange=function(){return we.IsNonEmptyArray(this.Data.Data)?this.Data.Data.length-this.RowCount:0},this.IsShowVScrollbar=function(){return!!we.IsNonEmptyArray(this.Data.Data)&&this.Data.Data.length>this.RowCount}}function $r(){this.newMethod=Yr,this.newMethod(),delete this.newMethod,this.ClassName="ChartKeyboardVScrollbar",this.Enable=!0,this.ScrollBarHeight=So.Keyboard.VScrollbar.ScrollBarHeight,this.ButtonColor=So.Keyboard.VScrollbar.ButtonColor,this.BarColor=So.Keyboard.VScrollbar.BarColor,this.BorderColor=So.Keyboard.VScrollbar.BorderColor,this.BGColor=So.Keyboard.VScrollbar.BGColor,this.Mergin={Left:2,Right:2,Top:2,Bottom:2},this.BarWithConfig={Size:So.Keyboard.VScrollbar.BarWidth.Size},this.ReloadResource=function(t){this.ScrollBarHeight=So.Keyboard.VScrollbar.ScrollBarHeight,this.ButtonColor=So.Keyboard.VScrollbar.ButtonColor,this.BarColor=So.Keyboard.VScrollbar.BarColor,this.BorderColor=So.Keyboard.VScrollbar.BorderColor,this.BGColor=So.Keyboard.VScrollbar.BGColor,this.BarWithConfig={Size:So.Keyboard.VScrollbar.BarWidth.Size}},this.IsShowCallback=function(){return!0}}function tn(t){this.DivElement=t,this.JSChartContainer,this.ResizeListener,this.CanvasElement=document.createElement("canvas"),this.CanvasElement.className="jsscrollbar-drawing",this.CanvasElement.id=D(),this.CanvasElement.setAttribute("tabindex",0),this.CanvasElement.style&&(this.CanvasElement.style.outline="none"),t.hasChildNodes()&&Xn.Chart.Log("[JSScrollBarChart::JSScrollBarChart] divElement hasChildNodes",t.childNodes),t.appendChild(this.CanvasElement),this.OnSize=function(){var t=this.DivElement.offsetHeight,e=this.DivElement.offsetWidth;this.DivElement.style.height&&this.DivElement.style.width&&(this.DivElement.style.height.includes("px")&&(t=parseInt(this.DivElement.style.height.replace("px",""))),this.DivElement.style.width.includes("px")&&(e=parseInt(this.DivElement.style.width.replace("px","")))),this.CanvasElement.height=t,this.CanvasElement.width=e,this.CanvasElement.style.width=this.CanvasElement.width+"px",this.CanvasElement.style.height=this.CanvasElement.height+"px";var a=C();this.CanvasElement.height*=a,this.CanvasElement.width*=a,Xn.Chart.Log("[JSScrollBarChart::OnSize] devicePixelRatio="+window.devicePixelRatio+", height="+this.CanvasElement.height+", width="+this.CanvasElement.width),this.JSChartContainer&&this.JSChartContainer.OnSize&&this.JSChartContainer.OnSize()},this.SetOption=function(t){var e=this.CreateJSScrollBarChartContainer(t);if(!e)return!1;this.JSChartContainer=e,this.DivElement.JSChart=this,1==t.EnableResize&&this.CreateResizeListener(),t.OnCreatedCallback&&t.OnCreatedCallback(e),e.Draw()},this.CreateJSScrollBarChartContainer=function(t){var e=new en(this.CanvasElement);if(e.Create(t),we.IsNumber(t.DelayDragFrequency)&&(e.DelayDragFrequency=t.DelayDragFrequency),this.SetChartBorder(e,t),t.EventCallback)for(var a=0;a<t.EventCallback.length;++a){var i=t.EventCallback[a];e.AddEventCallback(i)}return e},this.SetChartBorder=function(t,e){if(e.Border){var a=e.Border;we.IsNumber(e.Border.Left)&&(t.Frame.ChartBorder.Left=e.Border.Left),we.IsNumber(e.Border.Right)&&(t.Frame.ChartBorder.Right=e.Border.Right),we.IsNumber(e.Border.Top)&&(t.Frame.ChartBorder.Top=e.Border.Top),we.IsNumber(e.Border.Bottom)&&(t.Frame.ChartBorder.Bottom=e.Border.Bottom);var i=C();t.Frame.ChartBorder.Left*=i,t.Frame.ChartBorder.Right*=i,t.Frame.ChartBorder.Top*=i,t.Frame.ChartBorder.Bottom*=i,we.IsBool(a.AutoLeft)&&(t.AutoMargin.Left=a.AutoLeft),we.IsBool(a.AutoRight)&&(t.AutoMargin.Right=a.AutoRight)}},this.CreateResizeListener=function(){var t=this;this.ResizeListener=new ResizeObserver(function(e){t.OnDivResize(e)}),this.ResizeListener.observe(this.DivElement)},this.OnDivResize=function(t){Xn.Chart.Log("[JSScrollBarChart::OnDivResize] entries=",t),this.OnSize()},this.AddEventCallback=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.AddEventCallback&&(Xn.Chart.Log("[JSScrollBarChart:AddEventCallback] obj=",t),this.JSChartContainer.AddEventCallback(t))},this.ReloadResource=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ReloadResource&&(Xn.Chart.Log("[JSScrollBarChart:ReloadResource] "),this.JSChartContainer.ReloadResource(t))},this.ChartDestory=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ChartDestory&&this.JSChartContainer.ChartDestory()},this.Draw=function(){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Draw&&(Xn.Chart.Log("[JSScrollBarChart:Draw] "),this.JSChartContainer.Draw())},this.RecvData=function(t,e){this.JSChartContainer&&"function"==typeof this.JSChartContainer.RecvData&&(Xn.Chart.Log("[JSScrollBarChart:RecvData] "),this.JSChartContainer.RecvData(t,e))},this.UpdateSlider=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.UpdateSlider&&(Xn.Chart.Log("[JSScrollBarChart:UpdateSlider] "),this.JSChartContainer.UpdateSlider(t))},this.Reset=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.Reset&&(Xn.Chart.Log("[JSScrollBarChart:Reset] "),this.JSChartContainer.Reset(t))},this.ReloadResource=function(t){this.JSChartContainer&&"function"==typeof this.JSChartContainer.ReloadResource&&(Xn.Chart.Log("[JSScrollBarChart:ReloadResource] "),this.JSChartContainer.ReloadResource(t))}}function en(t){this.ClassName="JSScrollBarChartContainer",this.Frame,this.ChartPaint=[],this.ChartSplashPaint=null,this.LoadDataSplashTitle="æ æ°æ®",this.Canvas=t.getContext("2d"),this.ShowCanvas=null,this.XOffsetData={Start:-1,End:-1,Count:0},this.SourceData,this.SliderChart,this.DragMove,this.DragSlider,this.DragTimer,this.DelayDragFrequency=150,this.AutoMargin={Left:!1,Right:!1},this.mapEvent=new Vn.default,this.UIElement=t,this.LastPoint=new E,this.IsDestroy=!1,this.HQChart=null,this.ChartDestory=function(){this.IsDestroy=!0},this.GetHQChart=function(){return this.HQChart},this.AddEventCallback=function(t){if(t&&t.event&&t.callback){var e={Callback:t.callback,Source:t};this.mapEvent.set(t.event,e)}},this.RemoveEventCallback=function(t){this.mapEvent.has(t)&&this.mapEvent.delete(t)},this.GetEventCallback=function(t){return this.mapEvent.has(t)?this.mapEvent.get(t):null},this.Create=function(t){var e=this;this.UIElement.JSChartContainer=this,this.ChartSplashPaint=new _e,this.ChartSplashPaint.Canvas=this.Canvas,this.ChartSplashPaint.SetTitle(this.LoadDataSplashTitle),this.ChartSplashPaint.IsEnableSplash=!0,this.Frame=new an,this.Frame.ChartBorder=new M,this.Frame.ChartBorder.UIElement=this.UIElement,this.Frame.ChartBorder.Top=30,this.Frame.ChartBorder.Left=5,this.Frame.ChartBorder.Bottom=20,this.Frame.Canvas=this.Canvas,this.ChartSplashPaint.Frame=this.Frame;var a=new nn;a.ChartFrame=this.Frame,a.ChartBorder=this.Frame.ChartBorder,a.Canvas=this.Canvas,a.GetEventCallback=function(t){return e.GetEventCallback(t)},this.ChartPaint.push(a);var a=new rn;a.ChartFrame=this.Frame,a.ChartBorder=this.Frame.ChartBorder,a.Canvas=this.Canvas,a.OffsetData=this.XOffsetData,a.GetEventCallback=function(t){return e.GetEventCallback(t)},this.SliderChart=a,this.ChartPaint.push(a),this.UIElement.onmousedown=function(t){e.UIOnMouseDown(t)},this.UIElement.oncontextmenu=function(t){e.UIOnContextMenu(t)},this.UIElement.onmousemove=function(t){e.UIOnMouseMove(t)},this.UIElement.onmouseout=function(t){e.UIOnMounseOut(t)},this.UIElement.onmouseleave=function(t){e.UIOnMouseleave(t)}},this.CreateChartPaint=function(t){var e=this,a=uo.Create(t);return a?(a.ChartFrame=this.Frame,a.ChartBorder=this.Frame.ChartBorder,a.Canvas=this.Canvas,a.Data=this.Frame.Data,a.GetEventCallback=function(t){return e.GetEventCallback(t)},a.GetHQChartCallback=function(){return e.GetHQChart()},a):null},this.GetChartPaintByClassName=function(t){for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];if(a.ClassName==t)return{Chart:a,Index:e}}return null},this.Draw=function(){if(!(this.UIElement.width<=0||this.UIElement.height<=0)){this.Canvas.clearRect(0,0,this.UIElement.width,this.UIElement.height);var t=C();if(this.Canvas.lineWidth=t,this.ChartSplashPaint&&this.ChartSplashPaint.IsEnableSplash)return this.Frame.Draw({IsEnableSplash:this.ChartSplashPaint.IsEnableSplash}),void this.ChartSplashPaint.Draw();this.Frame.Draw(),this.Frame.DrawLogo();for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.IsDrawFirst&&a.Draw()}for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.IsDrawFirst||a.Draw()}}},this.OnSize=function(){this.Frame&&(this.SetSizeChange(!0),this.Draw())},this.SetSizeChange=function(t){for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a&&(a.SizeChange=t)}},this.UpdateFrameMaxMin=function(){for(var t=null,e=null,a=0;a<this.ChartPaint.length;++a){var i=this.ChartPaint[a];if(i.GetMaxMin){var r=i.GetMaxMin();null!=r&&null!=r.Max&&null!=r.Min&&((null==t||t<r.Max)&&(t=r.Max),(null==e||e>r.Min)&&(e=r.Min))}}we.IsNumber(t)&&we.IsNumber(e)&&(this.Frame.HorizontalMax=t,this.Frame.HorizontalMin=e)},this.UIOnDblClick=function(t){},this.CancelDragTimer=function(){this.DragTimer&&(clearTimeout(this.DragTimer),this.DragTimer=null)},this.UIOnMouseDown=function(t){var e=this;this.CancelDragTimer(),this.DragSlider=null,this.DragMove={Click:{X:t.clientX,Y:t.clientY},Move:{X:t.clientX,Y:t.clientY},PreMove:{X:t.clientX,Y:t.clientY}};var a=C(),i=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,r=(t.clientY-this.UIElement.getBoundingClientRect().top)*a;if(this.SliderChart){var n=this.SliderChart.PtInChart(i,r);if(!n){if(!this.Frame.PtInClient(i,r))return;var o=this.Frame.GetXData(i);o=Math.round(o);var s=this.GetPageRange(),l=s.ShowCount,h=o-parseInt(l/2);h<0&&(h=0);var u=h+l;u>=this.Frame.XPointCount&&(u=this.Frame.XPointCount-1,h=u-l);var c={UpdateData:{StartIndex:h,EndIndex:u,Type:3}};return void this.DragUpdate(c)}this.DragSlider={Click:{X:t.clientX,Y:t.clientY},LastMove:{X:t.clientX,Y:t.clientY},Data:n},this.DragSlider.DrawCount=0}document.onmousemove=function(t){e.DocOnMouseMove(t)},document.onmouseup=function(t){e.DocOnMouseUp(t)}},this.UIOnContextMenu=function(t){t.preventDefault()},this.UIOnMouseMove=function(t){var e=C(),a=(t.clientX-this.UIElement.getBoundingClientRect().left)*e,i=(t.clientY-this.UIElement.getBoundingClientRect().top)*e;if(!this.DragSlider){var r=r={Cursor:"default"},n=this.SliderChart.PtInChart(a,i);if(n)switch(n.Data.Type){case 0:r={Cursor:"grab",Name:"SliderChart"};break;case 1:case 2:r={Cursor:"col-resize",Name:"SliderChart"}}r&&(this.UIElement.style.cursor=r.Cursor)}},this.UIOnMounseOut=function(t){},this.UIOnMouseleave=function(t){},this.DocOnMouseMove=function(t){var e=this;if(this.DragMove.PreMove.X=this.DragMove.Move.X,this.DragMove.PreMove.Y=this.DragMove.Move.Y,this.DragMove.Move.X=t.clientX,this.DragMove.Move.Y=t.clientX,!this.ChartSplashPaint||1!=this.ChartSplashPaint.IsEnableSplash){var a=C(),i=(t.clientX-this.UIElement.getBoundingClientRect().left)*a,r=(t.clientY-this.UIElement.getBoundingClientRect().top)*a;if(Xn.Chart.Log("[JSScrollBarChartContainer::DocOnMouseMove] x="+i+", y="+r),this.DragSlider){var n=this.DragSlider,o=(t.clientX-n.LastMove.X)*a;if(Math.abs(o)<1)return;var s=this.GetPageRange(),l=this.Frame.ChartBorder.GetLeft(),h=this.Frame.ChartBorder.GetRight();this.SliderChart.DragMode=!0;var u=n.Data.Data.Type,c=this.SliderChart.XStart+o,f=this.SliderChart.XEnd+o;0==u?(c<l?(c=s.First.XStart,f=s.First.XEnd):f>=h&&(c=s.Last.XStart,f=s.Last.XEnd),this.SliderChart.XStart=c,this.SliderChart.XEnd=f):1==u?(c<=l?c=s.First.XStart:c>=h&&(c=s.Last.XEnd),this.SliderChart.XStart=c):2==u&&(f>=h?f=s.Last.XEnd:f<=l&&(f=s.First.XStart),this.SliderChart.XEnd=f),n.UpdateData={XStart:c,XEnd:f,Type:u},n.LastMove.X=t.clientX,n.LastMove.Y=t.clientY,0==n.DrawCount?this.DragUpdate(n):this.DragTimer=setTimeout(function(){e.DragUpdate(e.DragSlider)},this.DelayDragFrequency)}}},this.DocOnMouseUp=function(t){document.onmousemove=null,document.onmouseup=null,this.CancelDragTimer();var e=this.DragSlider;this.DragMove=null,this.DragSlider=null,this.SliderChart.DragMode=!1,this.DragUpdate(e)},this.DragUpdate=function(t){t&&t.UpdateData&&(this.UpdateXDataOffset(t.UpdateData),this.Draw(),++t.DrawCount)},this.Reset=function(t){this.SourceData=null,this.XOffsetData.Start=-1,this.XOffsetData.End=-1,this.XOffsetData.Count=0,this.Frame.Data=null;for(var e=0;e<this.ChartPaint.length;++e){this.ChartPaint[e].Data=null}this.ChartSplashPaint&&(this.ChartSplashPaint.IsEnableSplash=!0),t.Draw&&this.Draw()},this.UpdateSlider=function(t){if(!this.SliderChart.DragMode){var e=!1;(this.AutoMargin.Left||this.AutoMargin.Right)&&t.Border&&(this.AutoMargin.Left&&this.Frame.ChartBorder.Left!=t.Border.Left&&(e=!0),this.AutoMargin.Right&&this.Frame.ChartBorder.Right!=t.Border.Right&&(e=!0));var a=t.Data;if(this.XOffsetData.Start!=t.Start||this.XOffsetData.End!=t.End||this.SourceData!=a||e){this.SourceData=a;var i=a.Data.length;we.IsNumber(t.RightSpaceCount)&&(i+=t.RightSpaceCount),this.Frame.XPointCount=i,this.Frame.Data=a,this.XOffsetData.Count=i,this.XOffsetData.Start=t.Start,this.XOffsetData.End=t.End;for(var r=0;r<this.ChartPaint.length;++r){this.ChartPaint[r].Data=a}this.AutoMargin.Left&&t.Border&&we.IsNumber(t.Border.Left)&&(this.Frame.ChartBorder.Left=t.Border.Left),this.AutoMargin.Right&&t.Border&&we.IsNumber(t.Border.Right)&&(this.Frame.ChartBorder.Right=t.Border.Right),this.UpdateFrameMaxMin(),this.ChartSplashPaint&&(this.ChartSplashPaint.IsEnableSplash=!1),t.Draw&&this.Draw()}}},this.UpdateXDataOffset=function(t){if(t){var e=t.Type;if(0==t.Type){var a=this.Frame.GetXData(t.XStart);a=parseInt(a+.5);var i=a-this.XOffsetData.Start;this.XOffsetData.Start=a,this.XOffsetData.End+=i}else if(1==t.Type){var a=this.Frame.GetXData(t.XStart);a=parseInt(a),this.XOffsetData.Start=a}else if(2==t.Type){var r=this.Frame.GetXData(t.XEnd);r=parseInt(r),this.XOffsetData.End=r}else 3==t.Type&&(this.XOffsetData.End=t.EndIndex,this.XOffsetData.Start=t.StartIndex,e=0);var n=this.SourceData.Data[this.XOffsetData.End],o=this.SourceData.Data[this.XOffsetData.Start],s={Type:e,Count:this.XOffsetData.Count};if(this.XOffsetData.End>this.XOffsetData.Start?(s.Start={Index:this.XOffsetData.Start,Item:o},s.End={Index:this.XOffsetData.End,Item:n}):(s.Start={Index:this.XOffsetData.End,Item:n},s.End={Index:this.XOffsetData.Start,Item:o}),this.HQChart&&this.HQChart.JSChartContainer){var l=this.HQChart.JSChartContainer;if(l.ChartOperator){var t={ID:zn.OP_SCROOLBAR_SLIDER_CHANGED,Start:s.Start,End:s.End,Type:s.Type};l.ChartOperator(t)}}var h=this.GetEventCallback(Kn.ON_SCROLLBAR_SLIDER_CHANGED);h&&h.Callback(h,s,this)}},this.ReloadResource=function(t){this.Frame.ReloadResource(t);for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.ReloadResource&&a.ReloadResource(t)}t&&t.Redraw&&(this.SetSizeChange(!0),this.Draw())},this.GetPageRange=function(){var t={},e=Math.abs(this.XOffsetData.Start-this.XOffsetData.End);t.ShowCount=e;var a=this.Frame.GetXFromIndex(0),i=this.Frame.GetXFromIndex(e);t.First={XStart:a,XEnd:i};var r=this.Frame.XPointCount-1,i=this.Frame.GetXFromIndex(r),a=this.Frame.GetXFromIndex(r-e);return t.Last={XStart:a,XEnd:i},t},this.ReloadResource=function(t){this.Frame.ReloadResource(t);for(var e=0;e<this.ChartPaint.length;++e){var a=this.ChartPaint[e];a.ReloadResource&&a.ReloadResource(t)}1==t.Draw&&this.Draw()}}function an(){this.ChartBorder,this.Canvas,this.BorderLine=null,this.Data,this.Count=0,this.ClassName="JSScrollBarFrame",this.HorizontalMax=10,this.HorizontalMin=5,this.XPointCount=0,this.XSplitTextFont=So.ScrollBar.XSplitTextFont,this.XSplitTextColor=So.ScrollBar.XSplitTextColor,this.XSplitLineColor=So.ScrollBar.XSplitLineColor,this.BorderColor=So.ScrollBar.BorderColor,this.LogoTextColor=So.FrameLogo.TextColor,this.LogoTextFont=So.FrameLogo.Font,this.ReloadResource=function(t){this.BorderColor=So.ScrollBar.BorderColor,this.LogoTextColor=So.FrameLogo.TextColor,this.LogoTextFont=So.FrameLogo.Font},this.Draw=function(){this.DrawBorder(),this.DrawLogo(),this.DrawVertical()},this.DrawLogo=function(){var t=So.FrameLogo.Text;if(we.IsString(t)){this.Canvas.fillStyle=this.LogoTextColor,this.Canvas.font=this.LogoTextFont,this.Canvas.textAlign="left",this.Canvas.textBaseline="top";var e=this.ChartBorder.GetLeft()+2,a=this.ChartBorder.GetTop()+2;this.Canvas.fillText(t,e,a)}},this.DrawBorder=function(){var t=p(this.ChartBorder.GetLeft()),e=p(this.ChartBorder.GetTop()),a=p(this.ChartBorder.GetRight()),i=p(this.ChartBorder.GetBottom()),r=a-t,n=i-e;we.IsNumber(this.BorderLine)?(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.beginPath(),(1&this.BorderLine)>0&&(this.Canvas.moveTo(t,e),this.Canvas.lineTo(a,e)),(2&this.BorderLine)>0&&(this.Canvas.moveTo(t,i),this.Canvas.lineTo(a,i)),(4&this.BorderLine)>0&&(this.Canvas.moveTo(t,e),this.Canvas.lineTo(t,i)),(8&this.BorderLine)>0&&(this.Canvas.moveTo(a,e),this.Canvas.lineTo(a,i)),this.Canvas.stroke()):(this.Canvas.strokeStyle=this.BorderColor,this.Canvas.strokeRect(t,e,r,n))},this.GetXFromIndex=function(t){var e=this.XPointCount;return 1==e?0==t?this.ChartBorder.GetLeft():this.ChartBorder.GetRight():e<=0?this.ChartBorder.GetLeft():t>=e?this.ChartBorder.GetRight():this.ChartBorder.GetLeft()+this.ChartBorder.GetWidth()*t/e},this.GetYFromData=function(t){if(t<=this.HorizontalMin)return this.ChartBorder.GetBottomEx();if(t>=this.HorizontalMax)return this.ChartBorder.GetTopEx();var e=this.ChartBorder.GetHeightEx()*(t-this.HorizontalMin)/(this.HorizontalMax-this.HorizontalMin);return this.ChartBorder.GetBottomEx()-e},this.GetXData=function(t){return t<=this.ChartBorder.GetLeft()?0:t>=this.ChartBorder.GetRight()?this.XPointCount:(t-this.ChartBorder.GetLeft())*(1*this.XPointCount/this.ChartBorder.GetWidth())},this.GetPreSetpWidth=function(){return 1*this.XPointCount/this.ChartBorder.GetWidth()},this.DrawVertical=function(){if(!(this.ChartBorder.Bottom<=5)&&this.Data&&we.IsNonEmptyArray(this.Data.Data)){var t=this.Data.Data[0],e=parseInt(t.Date/1e4),a=t.Date%1e4;this.Canvas.font=this.XSplitTextFont,this.Canvas.fillStyle=this.XSplitTextColor,this.Canvas.textBaseline="top";var i=this.ChartBorder.GetBottom()+2,r=this.ChartBorder.GetTop(),n=this.ChartBorder.GetBottom(),o=0;if(tt.IsMilliSecondPeriod(this.Data.Period))for(var s=null,l=0;l<this.Data.Data.length;++l){var t=this.Data.Data[l],h=t.Date%1e4,u=parseInt(t.Time/1e3),C=parseInt(u/1e4);if(0!=l){if(C!=s){var c=we.FormatTimeString(t.Time,"HH:MM:SS.fff"),f=this.GetXFromIndex(l),d=this.Canvas.measureText(c).width+2;f-d/2>o&&(this.Canvas.textAlign="center",this.Canvas.fillText(c,f,i),o=f+d/2),f=p(f),this.Canvas.strokeStyle=this.XSplitLineColor,this.Canvas.beginPath(),this.Canvas.moveTo(f,r),this.Canvas.lineTo(f,n),this.Canvas.stroke(),s=C}}else{var c=we.FormatDateString(t.Date,"MM-DD"),f=this.ChartBorder.GetLeft();this.Canvas.textAlign="left",this.Canvas.fillText(c,f,i);var d=this.Canvas.measureText(c).width+2;o=f+d,a=h,s=C}}else if(tt.IsMinutePeriod(this.Data.Period,!0))for(var l=0;l<this.Data.Data.length;++l){var t=this.Data.Data[l],h=t.Date%1e4;if(0!=l){if(h!=a){var c=we.FormatDateString(t.Date,"MM-DD"),f=this.GetXFromIndex(l),d=this.Canvas.measureText(c).width+2;f-d/2>o&&(this.Canvas.textAlign="center",this.Canvas.fillText(c,f,i),o=f+d/2),f=p(f),this.Canvas.strokeStyle=this.XSplitLineColor,this.Canvas.beginPath(),this.Canvas.moveTo(f,r),this.Canvas.lineTo(f,n),this.Canvas.stroke(),a=h}}else{var c=we.FormatDateString(t.Date,"MM-DD"),f=this.ChartBorder.GetLeft();this.Canvas.textAlign="left",this.Canvas.fillText(c,f,i);var d=this.Canvas.measureText(c).width+2;o=f+d,a=h}}else for(var l=0;l<this.Data.Data.length;++l){var t=this.Data.Data[l],D=parseInt(t.Date/1e4);if(0!=l){if(D!=e){var c=""+D,f=this.GetXFromIndex(l),d=this.Canvas.measureText(c).width+2;f-d/2>o&&(this.Canvas.textAlign="center",this.Canvas.fillText(c,f,i),o=f+d/2),f=p(f),this.Canvas.strokeStyle=this.XSplitLineColor,this.Canvas.beginPath(),this.Canvas.moveTo(f,r),this.Canvas.lineTo(f,n),this.Canvas.stroke(),e=D}}else{var c=""+D,f=this.ChartBorder.GetLeft(),d=this.Canvas.measureText(c).width+2;this.Canvas.textAlign="left",this.Canvas.fillText(c,f,i),o=f+d,e=D}}}},this.PtInClient=function(t,e){var a=p(this.ChartBorder.GetLeft()),i=p(this.ChartBorder.GetTop()),r=p(this.ChartBorder.GetRight()),n=p(this.ChartBorder.GetBottom());return t>=a&&t<=r&&e>=i&&e<=n}}function rn(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="SliderChart",this.OffsetData,this.Color=So.ScrollBar.Slider.BarAreaColor,this.BarColor=So.ScrollBar.Slider.BarColor,this.BarWidth=So.ScrollBar.Slider.BarWidth,this.BarPadding=So.ScrollBar.Slider.BarPadding,this.MinCenterWidth=So.ScrollBar.Slider.MinCenterWidth,this.DateFont=So.ScrollBar.Slider.DateFont,this.DateColor=So.ScrollBar.Slider.DateColor,this.AryRect=[],this.XStart,this.XEnd,this.SizeChange=!0,this.DragMode=!1,this.ReloadResource=function(t){this.Color=So.ScrollBar.Slider.BarAreaColor,this.BarColor=So.ScrollBar.Slider.BarColor,this.DateFont=So.ScrollBar.Slider.DateFont,this.DateColor=So.ScrollBar.Slider.DateColor},this.Draw=function(){if(this.AryRect=[],this.OffsetData&&we.IsPlusNumber(this.OffsetData.Count)&&we.IsNumber(this.OffsetData.Start)&&we.IsNumber(this.OffsetData.End)){var t,e,a=this.ChartBorder.GetTop(),i=this.ChartBorder.GetBottom();if(this.DragMode){var r=this.XStart,n=this.XEnd,o=this.ChartFrame.GetXData(r),s=this.ChartFrame.GetXData(n);o=parseInt(o),s=parseInt(s),t={Data:this.Data.Data[this.OffsetData.Start],X:r,Type:o<s?0:1},e={Data:this.Data.Data[this.OffsetData.End],X:n,Type:s>o?1:0}}else{var l=this.OffsetData.Start,h=this.OffsetData.End,r=this.ChartFrame.GetXFromIndex(l),n=this.ChartFrame.GetXFromIndex(h);this.XStart=r,this.XEnd=n,t={Data:this.Data.Data[this.OffsetData.Start],X:r,Type:r<n?0:1},e={Data:this.Data.Data[this.OffsetData.End],X:n,Type:n>r?1:0}}this.Canvas.fillStyle=this.Color;var u={Left:Math.min(r,n),Top:a,Width:Math.abs(n-r),Height:i-a};u.Right=u.Left+u.Width,u.Bottom=u.Top+u.Height,u.Width<this.MinCenterWidth&&(u.Left-=(this.MinCenterWidth-u.Width)/2,u.Width=this.MinCenterWidth,u.Right=u.Left+u.Width),this.Canvas.fillRect(u.Left,u.Top,u.Width,u.Height),this.AryRect.push({Rect:u,Type:0});var c=C(),f=this.BarWidth*c,d=i-a-2*this.BarPadding*c,D=r-this.BarWidth/2,m=a+this.BarPadding*c;this.Canvas.fillStyle=this.BarColor;var u={Left:D,Top:m,Width:f,Height:d};u.Right=u.Left+u.Width,u.Bottom=u.Top+u.Height,this.Canvas.fillRect(u.Left,u.Top,u.Width,u.Height),this.AryRect.push({Rect:u,Type:1});var D=n-this.BarWidth/2,u={Left:D,Top:m,Width:f,Height:d};if(u.Right=u.Left+u.Width,u.Bottom=u.Top+u.Height,this.Canvas.fillRect(u.Left,u.Top,u.Width,u.Height),this.AryRect.push({Rect:u,Type:2}),1==e.Type){this.OffsetData.End>=this.Data.Data.length&&(e.Data=this.Data.Data[this.Data.Data.length-1])}this.DrawDateTime(t),this.DrawDateTime(e)}},this.DrawDateTime=function(t){if(t&&t.Data){var e=we.FormatDateString(t.Data.Date),a=this.ChartBorder.GetTop(),i=this.ChartBorder.GetBottom(),r=null;if(tt.IsMilliSecondPeriod(this.Data.Period)){var n=parseInt(t.Data.Time/1e3);e=we.FormatTimeString(n,"HH:MM:SS")}else tt.IsSecondPeriod(this.Data.Period)?e=we.FormatTimeString(n,"HH:MM:SS"):tt.IsMinutePeriod(this.Data.Period,!0)&&(r=we.FormatTimeString(t.Data.Time,"HH:MM"));if(0==t.Type){this.Canvas.textAlign="right";var o=t.X-this.BarWidth/2}else if(1==t.Type){this.Canvas.textAlign="left";var o=t.X+this.BarWidth/2}this.Canvas.font=this.DateFont;var s=this.Canvas.measureText("æ").width;this.Canvas.textBaseline="middle",this.Canvas.fillStyle=this.DateColor;var l=a+(i-a)/2;this.Canvas.fillText(e,o,l),r&&(l+=s,this.Canvas.fillText(r,o,l))}},this.PtInChart=function(t,e){if(!we.IsNonEmptyArray(this.AryRect))return null;for(var a=this.AryRect.length-1;a>=0;--a){var i=this.AryRect[a],r=i.Rect;if(t>=r.Left&&t<=r.Right&&e>=r.Top&&e<=r.Bottom)return{Data:i}}return null}}function nn(){this.Canvas,this.ChartBorder,this.ChartFrame,this.Name,this.ClassName="ScrollBarBGChart",this.SizeChange=!0,this.Data,this.Color=So.ScrollBar.BGChart.Color,this.LineWidth=So.ScrollBar.BGChart.LineWidth,this.AreaColor=So.ScrollBar.BGChart.AreaColor,this.ReloadResource=function(t){this.Color=So.ScrollBar.BGChart.Color,this.LineWidth=So.ScrollBar.BGChart.LineWidth,this.AreaColor=So.ScrollBar.BGChart.AreaColor},this.Draw=function(){if(this.Data&&we.IsNonEmptyArray(this.Data.Data)){this.Canvas.save(),this.LineWidth>0&&(this.Canvas.lineWidth=this.LineWidth*C());var t=this.ChartBorder.GetBottom();this.Canvas.strokeStyle=this.Color;for(var e,a,i=!0,r=0,n={},o=0;o<this.Data.Data.length;++o){var s=this.Data.Data[o],l=s.Close;we.IsNumber(l)&&(e=this.ChartFrame.GetXFromIndex(o),a=this.ChartFrame.GetYFromData(l),i?(this.Canvas.beginPath(),this.Canvas.moveTo(e,a),i=!1,n={X:e,Y:a}):this.Canvas.lineTo(e,a),++r)}r>0&&(this.Canvas.stroke(),this.Canvas.lineTo(e,t),this.Canvas.lineTo(n.X,t),this.Canvas.closePath(),this.Canvas.fillStyle=this.AreaColor,this.Canvas.fill()),this.Canvas.restore()}},this.GetMaxMin=function(){var t={Max:null,Min:null};if(!this.Data||!we.IsNonEmptyArray(this.Data.Data))return t;for(var e=0;e<this.Data.Data.length;++e){var a=this.Data.Data[e],i=a.Close;we.IsNumber(i)&&((null==t.Max||t.Max<i)&&(t.Max=i),(null==t.Min||t.Min>i)&&(t.Min=i))}return t}}function on(){this.Data={Menu:[],Position:0},this.RootDOM=null,this.TBodyDOM=null,this.ArySubRootDOM=[],this.ClickCallback=null,this.CheckedClassName="UMyChart_MenuItem_Span_Checked  iconfont icon-checked",this.RightArrowClassName="UMyChart_MenuItem_Span_Arrow  iconfont icon-menu_arraw_right",this.SelectedClassName="UMyChart_MenuItem_Tr_Selected",this.AryTDClassName=["UMyChart_MenuItem_Td_Status","UMyChart_MenuItem_Td_Content","UMyChart_MenuItem_Td_Shortcut","UMyChart_MenuItem_Td_Arrow"],this.Inital=function(){var t=this;window.addEventListener("mousedown",function(e){t.OnWindowMouseDown(e)})},this.CreatePopMenu=function(t){if(this.Clear(),we.IsNonEmptyArray(t.Menu)){var e=document.createElement("div");e.className="UMyChart_PopMenu";var a=document.createElement("table");a.className="UMyChart_PopMenu_Table",e.appendChild(a);var i=document.createElement("tbody");i.className="UMyChart_PopMenu_Tbody",a.appendChild(i);var r={Root:e,TBody:i,Table:a};e.JSMenuData=r;for(var n=0;n<t.Menu.length;++n){var o=t.Menu[n];if(o.Name!=on.SEPARATOR_LINE_NAME){var s=this.CreateMenu(r,o);i.appendChild(s)}else{var l=this.CreateSeparatorTr();l&&i.appendChild(l)}}document.body.appendChild(e),this.RootDOM=e,this.TBodyDOM=i,we.IsNumber(t.Position)&&(this.Data.Position=t.Position),t.ClickCallback&&(this.ClickCallback=t.ClickCallback)}},this.Clear=function(){if(this.Data.Menu=[],this.Data.Position=on.POSITION_ID.RIGHT_MENU_ID,this.ClickCallback=null,this.RootDOM){document.body.removeChild(this.RootDOM),this.RootDOM=null,this.TBodyDOM=null;for(var t=0;t<this.ArySubRootDOM.length;++t)document.body.removeChild(this.ArySubRootDOM[t]);this.ArySubRootDOM=[]}},this.CreateMenu=function(t,e){var a=this,i=document.createElement("tr");i.className="UMyChart_MenuItem_Tr",!0===e.Disable&&i.classList.add("UMyChart_DrawTool_Disable_Tr");for(var r=0;r<this.AryTDClassName.length;++r){var n=document.createElement("td");if(n.className=this.AryTDClassName[r],0==r){if(e.Checked){var o=document.createElement("span");o.className=this.CheckedClassName,o.style["font-size"]="10px",n.appendChild(o)}}else if(1==r)n.innerText=e.Name;else if(2==r)e.Text&&(n.innerText=e.Text);else if(3==r&&we.IsNonEmptyArray(e.SubMenu)){var o=document.createElement("span");o.className=this.RightArrowClassName,o.style["font-size"]="10px",n.appendChild(o)}i.appendChild(n)}if(we.IsNonEmptyArray(e.SubMenu)){var s=document.createElement("div");s.className="UMyChart_PopSubMenu";var l=document.createElement("table");l.className="UMyChart_PopMenu_Table",s.appendChild(l);var h=document.createElement("tbody");h.className="UMyChart_PopMenu_TBody",l.appendChild(h);var u={Root:s,TBody:h,Table:l};s.JSMenuData=u;for(var r=0;r<e.SubMenu.length;++r){var C=e.SubMenu[r];if(C.Name!=on.SEPARATOR_LINE_NAME){var c=this.CreateMenu(u,C);c,h.appendChild(c)}else{var f=this.CreateSeparatorTr();f&&h.appendChild(f)}}i.onmouseover=function(e){a.OnMouseOver(e,t,i,s)},document.body.appendChild(s),this.ArySubRootDOM.push(s)}else!0===e.Disable||(i.onmousedown=function(t){a.OnClickMenu(t,e,!1)},i.onmouseover=function(e){a.OnMouseOver(e,t)});return i},this.CreateSeparatorTr=function(){var t=document.createElement("tr");t.className="UMyChart_MenuItem_Tr_Separator";var e=document.createElement("td");e.className="UMyChart_MenuItem_Td_Status_Separator",t.appendChild(e);var e=document.createElement("td");e.className="UMyChart_MenuItem_Td_Separator",t.appendChild(e);var e=document.createElement("td");e.className="UMyChart_MenuItem_Td_Separator",t.appendChild(e);var e=document.createElement("td");return e.className="UMyChart_MenuItem_Td_Separator",t.appendChild(e),t},this.PopupMenuByTab=function(t){if(this.RootDOM&&t){var e=t.Left,a=t.Top-this.RootDOM.offsetHeight;this.RootDOM.style.visibility="visible",this.RootDOM.style.top=a+"px",this.RootDOM.style.left=e+"px"}},this.PopupMenuByRight=function(t,e){if(this.RootDOM&&we.IsNumber(t)&&we.IsNumber(e)){var a=this.RootDOM.offsetHeight,i=e+a,r=window.innerHeight-15;i>r&&(e=r-a);var n=this.RootDOM.offsetWidth,o=t+n,s=window.innerWidth-15;o>s&&(t=s-n),this.RootDOM.style.visibility="visible",this.RootDOM.style.top=e+"px",this.RootDOM.style.left=t+"px"}},this.PopupMenuByDrapdown=function(t){if(this.RootDOM&&t){var e=t.Left,a=t.Bottom,i=this.RootDOM.offsetHeight;if(a+i>window.innerHeight-15&&(a=t.Top-i),this.Data.Position==on.POSITION_ID.DROPDOWN_RIGHT_MENU_ID){var r=this.RootDOM.offsetWidth;e=t.Right-r}this.RootDOM.style.visibility="visible",this.RootDOM.style.top=a+"px",this.RootDOM.style.left=e+"px"}},this.OnClickMenu=function(t,e,a){console.log("[JSPopMenu::OnClickMenu] e=, item=, bSubMenu",t,e,a),this.ClickCallback&&this.ClickCallback(e)},this.OnMouseOver=function(t,e,a,i){if(e&&e.PopMenu&&e.PopMenu!=i){e.PopMenu.style.visibility="hidden",e.PopRow&&e.PopRow.classList.remove(this.SelectedClassName);for(var r=e.PopMenu.JSMenuData,n=0;n<50&&r&&r.PopMenu;++n)r.PopMenu.style.visibility="hidden",r=r.PopMenu;e.PopMenu=null,e.PopRow=null}if(i){if("visible"==i.style.visibility);else{var o=a.getBoundingClientRect(),s=o.right,l=o.top,h=window.innerHeight-15,u=window.innerWidth-15,C=i.offsetHeight,c=i.offsetWidth,f=l+C,d=s+c;f>h&&(l=h-C),d>u&&(s=o.left-c),i.style.left=s+"px",i.style.top=l+"px",a.classList.add(this.SelectedClassName),i.style.visibility="visible"}e.PopMenu=i,e.PopRow=a}},this.OnWindowMouseDown=function(t){this.RootDOM&&(console.log("[JSPopMenu::OnWindowMouseDown] e=",t),this.Clear())}}function sn(){this.AryChartGroup=[{Title:"çº¿æ®µ",AryChart:[{Title:"çº¿æ®µ",ClassName:"hqchart_drawtool icon-draw_line",Type:0,Data:{ID:"çº¿æ®µ"}},{Title:"çº¿æ®µä¿¡æ¯",ClassName:"hqchart_drawtool icon-infoline",Type:0,Data:{ID:"InfoLine"}},{Title:"å°çº¿",ClassName:"hqchart_drawtool icon-draw_rays",Type:0,Data:{ID:"å°çº¿"}},{Title:"è¶å¿çº¿è§åº¦",ClassName:"hqchart_drawtool icon-qushixianjiaodu",Type:0,Data:{ID:"TrendAngle"}},{Title:"æ ä»·çº¿",ClassName:"hqchart_drawtool icon-price_line",Type:0,Data:{ID:"æ ä»·çº¿"}},{Title:"åç´çº¿",ClassName:"hqchart_drawtool icon-vertical_line",Type:0,Data:{ID:"åç´çº¿"}},{Title:"åå­çº¿",ClassName:"hqchart_drawtool icon-tubiao_shizixian",Type:0,Data:{ID:"åå­çº¿"}},{Title:"ç®­å¤´",ClassName:"hqchart_drawtool icon-bottom-arrow-solid",Type:0,Data:{ID:"ç®­å¤´"}},{Title:"å¤§ç®­å¤´",ClassName:"hqchart_drawtool icon-big_arrow",Type:0,Data:{ID:"ArrowMarker"}},{Title:"è¶å¿çº¿",ClassName:"hqchart_drawtool icon-draw_trendline",Type:0,Data:{ID:"è¶å¿çº¿"}},{Title:"æ°´å¹³çº¿",ClassName:"hqchart_drawtool icon-draw_hline",Type:0,Data:{ID:"æ°´å¹³çº¿"}},{Title:"æ°´å¹³å°çº¿",ClassName:"hqchart_drawtool icon-tubiao_shuipingshexian",Type:0,Data:{ID:"æ°´å¹³å°çº¿"}},{Title:"æ¶é¸¦çº¿æ®µ",ClassName:"hqchart_drawtool icon-draw_line",Type:0,Data:{ID:"æ¶é¸¦çº¿æ®µ"}},{Title:"é»éçº¿",ClassName:"hqchart_drawtool icon-draw_resline",Type:0,Data:{ID:"é»éçº¿"}},{Title:"éè¾¾ä¿¡é»éçº¿",ClassName:"hqchart_drawtool icon-draw_resline",Type:0,Data:{ID:"é»éçº¿2"}},{Title:"æ±æ©è§åº¦çº¿",ClassName:"hqchart_drawtool icon-jiangenjiaoduxian",Type:0,Data:{ID:"æ±æ©è§åº¦çº¿"}},{Title:"éè¾¾ä¿¡æ±æ©è§åº¦çº¿",ClassName:"hqchart_drawtool icon-jiangenjiaoduxian",Type:0,Data:{ID:"æ±æ©è§åº¦çº¿2"}}]},{Title:"éé",AryChart:[{Title:"å¹³è¡çº¿",ClassName:"hqchart_drawtool icon-draw_parallel_lines",Type:0,Data:{ID:"å¹³è¡çº¿"}},{Title:"æ°´å¹³çº¿æ®µ",ClassName:"hqchart_drawtool icon-draw_hlinesegment",Type:0,Data:{ID:"æ°´å¹³çº¿æ®µ"}},{Title:"å¹³è¡å°çº¿",ClassName:"hqchart_drawtool icon-draw_p_rays_lines",Type:0,Data:{ID:"å¹³è¡å°çº¿"}},{Title:"å¹³è¡éé",ClassName:"hqchart_drawtool icon-draw_parallelchannel",Type:0,Data:{ID:"å¹³è¡éé"}},{Title:"ä»·æ ¼ééçº¿",ClassName:"hqchart_drawtool icon-draw_pricechannel",Type:0,Data:{ID:"ä»·æ ¼ééçº¿"}},{Title:"ç®±åçº¿",ClassName:"hqchart_drawtool icon-draw_box",Type:0,Data:{ID:"ç®±åçº¿"}},{Title:"ä¸ç¸äº¤éé",ClassName:"hqchart_drawtool icon-buxiangjiaojiao",Type:0,Data:{ID:"DisjointChannel"}},{Title:"å¹³æ»é¡¶/åº",ClassName:"hqchart_drawtool icon-tubiao_buxiangjiaotongdao",Type:0,Data:{ID:"FlatTop"}},{Title:"æ³¢æ®µçº¿",ClassName:"hqchart_drawtool icon-draw_waveband",Type:0,Data:{ID:"æ³¢æ®µçº¿"}},{Title:"ç¾åæ¯çº¿",ClassName:"hqchart_drawtool icon-PercentageLine",Type:0,Data:{ID:"ç¾åæ¯çº¿"}},{Title:"é»éåå²",ClassName:"hqchart_drawtool icon-GoldenSection",Type:0,Data:{ID:"é»éåå²"}},{Title:"çº¿å½¢åå½çº¿",ClassName:"hqchart_drawtool icon-linear_3",Type:0,Data:{ID:"çº¿å½¢åå½çº¿"}},{Title:"çº¿å½¢åå½å¸¦",ClassName:"hqchart_drawtool icon-linear_1",Type:0,Data:{ID:"çº¿å½¢åå½å¸¦"}},{Title:"å»¶é¿çº¿å½¢åå½å¸¦",ClassName:"hqchart_drawtool icon-linear_2",Type:0,Data:{ID:"å»¶é¿çº¿å½¢åå½å¸¦"}}]},{Title:"å½¢ç¶",AryChart:[{Title:"åå¼§çº¿",ClassName:"hqchart_drawtool icon-draw_arc",Type:0,Data:{ID:"åå¼§çº¿"}},{Title:"ç©å½¢",ClassName:"hqchart_drawtool icon-rectangle",Type:0,Data:{ID:"ç©å½¢"}},{Title:"å¹³è¡åè¾¹å½¢",ClassName:"hqchart_drawtool icon-draw_quadrangle",Type:0,Data:{ID:"å¹³è¡åè¾¹å½¢"}},{Title:"ä¸è§å½¢",ClassName:"hqchart_drawtool icon-draw_triangle",Type:0,Data:{ID:"ä¸è§å½¢"}},{Title:"å",ClassName:"hqchart_drawtool icon-draw_circle",Type:0,Data:{ID:"å"}},{Title:"å¯¹ç§°è§åº¦",ClassName:"hqchart_drawtool icon-draw_symangle",Type:0,Data:{ID:"å¯¹ç§°è§åº¦"}}]},{Title:"æ³¢æµªçº¿",AryChart:[{Title:"Må¤´Wåº",ClassName:"hqchart_drawtool icon-draw_wavemw",Type:0,Data:{ID:"Må¤´Wåº"}},{Title:"å¤´è©å",ClassName:"hqchart_drawtool icon-draw_head_shoulders_bt",Type:0,Data:{ID:"å¤´è©å"}},{Title:"æ³¢æµªå°º",ClassName:"hqchart_drawtool icon-waveruler",Type:0,Data:{ID:"æ³¢æµªå°º"}},{Title:"ABæ³¢æµªå°º",ClassName:"hqchart_drawtool icon-waveruler",Type:0,Data:{ID:"ABæ³¢æµªå°º"}}]},{Title:"ææ³¢é£å¥",AryChart:[{Title:"ææ³¢é£å¥å¨æçº¿",ClassName:"hqchart_drawtool icon-feibonaqizhouqixian",Type:0,Data:{ID:"ææ³¢é£å¥å¨æçº¿"}},{Title:"ææ³¢é£å¥æ¥å½¢",ClassName:"hqchart_drawtool icon-feibonaqiqixing",Type:0,Data:{ID:"FibWedge"}},{Title:"ææ³¢é£å¥åæ¤",ClassName:"hqchart_drawtool icon-feibonaqihuiche",Type:0,Data:{ID:"FibRetracement"}},{Title:"ææ³¢é£å¥éåº¦é»åæ",ClassName:"hqchart_drawtool icon-feibonaqisuduzulishan",Type:0,Data:{ID:"FibSpeedResistanceFan"}}]},{Title:"æµéå·¥å·",AryChart:[{Title:"ä»·æ ¼èå´",ClassName:"hqchart_drawtool icon-shijianfanwei",Type:0,Data:{ID:"PriceRange"}},{Title:"æ¶é´èå´",ClassName:"hqchart_drawtool icon-jiagefanwei",Type:0,Data:{ID:"DateRange"}},{Title:"ä»·æ ¼åæ¶é´èå´",ClassName:"hqchart_drawtool icon-jiagefanwei",Type:0,Data:{ID:"DatePriceRange"}},{Title:"çæµçº¿",ClassName:"hqchart_drawtool icon-jiance",Type:0,Data:{ID:"MonitorLine"}}]},{Title:"æå­",AryChart:[{Title:"æå­",ClassName:"hqchart_drawtool icon-draw_text",Type:0,Data:{ID:"ææ¬"}},{Title:"éç¹æå­",ClassName:"hqchart_drawtool icon-maodianwenzi",Type:0,Data:{ID:"AnchoredText"}},{Title:"æ³¨é",ClassName:"hqchart_drawtool icon-maodian ",Type:0,Data:{ID:"Note"}},{Title:"ä»·æ ¼æ ç­¾",ClassName:"hqchart_drawtool icon-Tooltip",Type:0,Data:{ID:"PriceLabel"}},{Title:"ä»·æ ¼æ³¨é",ClassName:"hqchart_drawtool icon-tooltiptext",Type:0,Data:{ID:"PriceNote"}},{Title:"åä¸ç®­å¤´",ClassName:"iconfont icon-arrow_up",Type:0,Data:{ID:"icon-arrow_up"}},{Title:"åä¸ç®­å¤´",ClassName:"iconfont icon-arrow_down",Type:0,Data:{ID:"icon-arrow_down"}},{Title:"åå·¦ç®­å¤´",ClassName:"iconfont icon-arrow_left",Type:0,Data:{ID:"icon-arrow_left"}},{Title:"åå³ç®­å¤´",ClassName:"iconfont icon-arrow_right",Type:0,Data:{ID:"icon-arrow_right"}}]}],this.ToolConfig={Title:"å·¥å·",AryTool:[{Title:"éä¸­",ClassName:"hqchart_drawtool icon-arrow",Type:1,Data:{ID:rs.CMD_SELECTED_ID}},{Title:"å°ºå­",ClassName:"hqchart_drawtool icon-ruler",Type:0,Data:{ID:"å°ºå­"}},{Title:"ç£é",ClassName:"hqchart_drawtool icon-xifu",Type:2,Data:{ID:rs.CMD_ENABLE_MAGNET_ID}},{Title:"ç¹å»åæ¢é¢è²",ClassName:"hqchart_drawtool icon-fangkuai",Type:2,Data:{ID:rs.CMD_CHANGE_LINE_COLOR_ID}},{Title:"æ¦é¤ç»çº¿",ClassName:"hqchart_drawtool icon-a-xiangpicachuxiangpica",Type:2,Data:{ID:rs.CMD_ERASE_DRAW_CHART_ID}},{Title:"å é¤ææç»çº¿",ClassName:"hqchart_drawtool icon-recycle_bin",Type:2,Data:{ID:rs.CMD_DELETE_ALL_DRAW_CHART_ID}}]},this.DivDialog=null,this.AryDivChart=[],this.HQChart=null,this.LineColor="rgb(255,140,0)",this.LineColorIndex=0,this.RandomLineColor=["rgb(255,69,0)","rgb(0,191,255)","rgb(255,0,255)","rgb(255,105,180)"],this.LineWidth=1*C(),this.ColumnCount=5,this.DragTitle=null,this.Inital=function(t){this.LineColor=So.DrawPicture.LineColor[0],this.RandomLineColor.splice(0,0,this.LineColor),this.HQChart=t},this.Create=function(){var t=this,e=document.createElement("div");e.className="UMyChart_DrawTool_Dialog_Div";var a=document.createElement("div");a.className="UMyChart_DrawTool_Title_Div",a.innerText="ç»å¾å·¥å·",a.onmousedown=function(e){t.OnMouseDownTitle(e)};var i=document.createElement("div");i.className="UMyChart_DrawTool_Close_Div",i.innerText="x",i.onmousedown=function(e){t.Close(e)},a.appendChild(i),e.appendChild(a);var r=document.createElement("table");r.className="UMyChart_DrawTool_Table",e.appendChild(r);var n=document.createElement("tbody");n.className="UMyChart_DrawTool_Tbody",r.appendChild(n);for(var o=0;o<this.AryChartGroup.length;++o){var s=this.AryChartGroup[o];if(we.IsNonEmptyArray(s.AryChart)){this.CreateChartGroupItem(s,n);var l=document.createElement("tr");l.className="UMyChart_DrawTool_Group_End_Tr",n.appendChild(l)}}this.CreateToolGroup(n),this.DivDialog=e,document.body.appendChild(e)},this.Destroy=function(){this.AryDivChart=[],this.DivDialog&&document.body.removeChild(this.DivDialog),this.DivDialog=null},this.CreateChartGroupItem=function(t,e){var a=document.createElement("tr");a.className="UMyChart_DrawTool_Group_Tr",e.appendChild(a);var i=document.createElement("td");i.className="UMyChart_DrawTool_Group_Td",i.innerText=t.Title,i.colSpan=this.ColumnCount,a.appendChild(i);for(var r=t.AryChart.length,n=0,o=0;n<r;){var a=document.createElement("tr");for(a.className="UMyChart_DrawTool_Tr",o=0;o<this.ColumnCount&&n<r;++o,++n){var s=t.AryChart[n];this.CreateChartItem(s,a)}e.appendChild(a)}},this.CreateChartItem=function(t,e){var a=this,i=document.createElement("td");i.className="UMyChart_DrawTool_Td",i.title=t.Title,e.appendChild(i);var r=document.createElement("span");r.className=t.ClassName,r.classList.add("UMyChart_DrawTool_Span"),i.appendChild(r);var n={Item:t,TD:i,Span:r};i.onmousedown=function(t){a.OnClickItem(t,n)},this.AryDivChart.push(n)},this.OnClickItem=function(t,e){if(console.log("[JSDialogDrawTool::OnClickChartItem] ",e),e.Item&&e.Item.Data){var a=e.Item.Type,i=e.Item.Data.ID;2==a&&i==rs.CMD_CHANGE_LINE_COLOR_ID?this.OnChangeLineColor(e):2==a&&i==rs.CMD_DELETE_ALL_DRAW_CHART_ID?this.DeleteAllChart():2==a&&i==rs.CMD_ERASE_DRAW_CHART_ID?(this.ClearAllSelectedChart(),this.ClearCurrnetDrawPicture(),this.EnableEraseChart(!0)):1==a&&i==rs.CMD_SELECTED_ID?(this.ClearAllSelectedChart(),this.ClearCurrnetDrawPicture(),this.EnableEraseChart(!1)):2==a&&i==rs.CMD_ENABLE_MAGNET_ID?this.ChangeMagnet(e):0==a&&(this.ClearAllSelectedChart(),this.EnableEraseChart(!1),e.Span.classList.remove("UMyChart_DrawTool_Span"),e.Span.classList.add("UMyChart_DrawTool_Span_Selected"),this.CreateDrawPicture(e))}},this.ClearAllSelectedChart=function(){for(var t=0;t<this.AryDivChart.length;++t){var e=this.AryDivChart[t];2!=e.Item.Type&&(e.Span.classList.remove("UMyChart_DrawTool_Span_Selected"),e.Span.classList.add("UMyChart_DrawTool_Span"))}},this.CreateToolGroup=function(t){var e=document.createElement("tr");e.className="UMyChart_DrawTool_Group_Tr",t.appendChild(e);var a=document.createElement("td");a.className="UMyChart_DrawTool_Group_Td",a.innerText=this.ToolConfig.Title,a.colSpan=this.ColumnCount,e.appendChild(a);for(var i=this.ToolConfig.AryTool.length,r=0,n=0;r<i;){var e=document.createElement("tr");for(e.className="UMyChart_DrawTool_Tr",n=0;n<this.ColumnCount&&r<i;++n,++r){var o=this.ToolConfig.AryTool[r];this.CreateToolItem(o,e)}t.appendChild(e)}},this.CreateToolItem=function(t,e){var a=this,i=document.createElement("td");i.className="UMyChart_DrawTool_Td",i.title=t.Title,e.appendChild(i);var r=document.createElement("span");r.className=t.ClassName,r.classList.add("UMyChart_DrawTool_Span"),i.appendChild(r);var n={Item:t,TD:i,Span:r};2==t.Type&&t.Data.ID==rs.CMD_CHANGE_LINE_COLOR_ID&&(r.style.color=this.LineColor),i.onmousedown=function(t){a.OnClickItem(t,n)},this.AryDivChart.push(n)},this.OnChangeLineColor=function(t){++this.LineColorIndex;var e=this.LineColorIndex%this.RandomLineColor.length;this.LineColor=this.RandomLineColor[e],t.Span.style.color=this.LineColor},this.DeleteAllChart=function(){this.HQChart&&this.HQChart.ClearChartDrawPicture()},this.SetEraseChartButtonStatus=function(t){for(var e=0;e<this.AryDivChart.length;++e){var a=this.AryDivChart[e];if(2==a.Item.Type&&a.Item.Data&&a.Item.Data.ID==rs.CMD_ERASE_DRAW_CHART_ID){t?a.Span.classList.contains("UMyChart_DrawTool_Span")&&a.Span.classList.replace("UMyChart_DrawTool_Span","UMyChart_DrawTool_Span_Selected"):a.Span.classList.contains("UMyChart_DrawTool_Span_Selected")&&a.Span.classList.replace("UMyChart_DrawTool_Span_Selected","UMyChart_DrawTool_Span");break}}},this.EnableEraseChart=function(t){this.HQChart&&this.HQChart.EnableEraseChartDrawPicture!=t&&(this.HQChart.EnableEraseChartDrawPicture=t,this.SetEraseChartButtonStatus(t))},this.ChangeMagnet=function(t){if(this.HQChart){var e=!0;if(this.HQChart.ChartDrawOption.Magnet)var a=this.HQChart.ChartDrawOption.Magnet,e=!a.Enable;e?(this.HQChart.SetChartDrawOption({Magnet:{Enable:e,Type:0}}),t.Span.classList.remove("UMyChart_DrawTool_Span"),t.Span.classList.add("UMyChart_DrawTool_Span_Selected")):(this.HQChart.SetChartDrawOption({Magnet:{Enable:!1}}),t.Span.classList.remove("UMyChart_DrawTool_Span_Selected"),t.Span.classList.add("UMyChart_DrawTool_Span"))}},this.CreateDrawPicture=function(t){var e=this;if(!this.HQChart)return null;var a={LineColor:this.LineColor,LineWidth:this.LineWidth,PointColor:this.LineColor},i=t.Item.Data.ID;["icon-arrow_up","icon-arrow_down","icon-arrow_left","icon-arrow_right"].includes(i)?a=null:"InfoLine"==i?a.FormatLabelTextCallback=function(t){e.ChartInfoLine_FormatLabelText(t)}:"MonitorLine"==i&&(a.FormatLabelTextCallback=function(t){e.ChartDrawMonitorLine_FormatLabelText(t)}),this.HQChart.CreateChartDrawPicture(i,a,function(a){e.OnFinishDrawPicture(a,t)})},this.ClearCurrnetDrawPicture=function(){this.HQChart&&this.HQChart.ClearCurrnetDrawPicture()},this.OnFinishDrawPicture=function(t,e){e.Span.classList.remove("UMyChart_DrawTool_Span_Selected"),e.Span.classList.add("UMyChart_DrawTool_Span")},this.Show=function(t,e){this.DivDialog&&(this.DivDialog.style.visibility="visible",this.DivDialog.style.top=e+"px",this.DivDialog.style.left=t+"px")},this.Close=function(t){this.DivDialog&&(this.DivDialog.style.visibility="hidden")},this.IsShow=function(){return!!this.DivDialog&&"visible"===this.DivDialog.style.visibility},this.OnMouseDownTitle=function(t){var e=this;if(this.DivDialog){var a={X:t.clientX,Y:t.clientY};a.YOffset=t.clientX-this.DivDialog.offsetLeft,a.XOffset=t.clientY-this.DivDialog.offsetTop,this.DragTitle=a,document.onmousemove=function(t){e.DocOnMouseMoveTitle(t)},document.onmouseup=function(t){e.DocOnMouseUpTitle(t)}}},this.DocOnMouseMoveTitle=function(t){if(this.DragTitle){var e=t.clientX-this.DragTitle.YOffset,a=t.clientY-this.DragTitle.XOffset,i=e+this.DivDialog.offsetWidth,r=a+this.DivDialog.offsetHeight;i+5>=window.innerWidth&&(e=window.innerWidth-this.DivDialog.offsetWidth-5),r+5>=window.innerHeight&&(a=window.innerHeight-this.DivDialog.offsetHeight-5),this.DivDialog.style.left=e+"px",this.DivDialog.style.top=a+"px",t.preventDefault&&t.preventDefault()}},this.DocOnMouseUpTitle=function(t){this.DragTitle=null,this.onmousemove=null,this.onmouseup=null},this.ChartInfoLine_FormatLabelText=function(t){if(we.IsNonEmptyArray(t.AryValue)&&t.Data&&we.IsNonEmptyArray(t.Data.Data)){for(var e=0;e<t.AryValue.length;++e){var a=t.AryValue[e];if(!we.IsNumber(a.XValue)||a.XValue<0)return}var i=t.AryValue[0].XValue,r=t.AryValue[1].XValue,n=t.Data.Data[i],o=t.Data.Data[r];if(n&&o){var s=tt.IsMinutePeriod(t.Data.Period,!0);t.AryText=[],t.AryText.push({Name:"èµ·å§æ¥æ: ",Text:we.FormatDateString(n.Date),NameColor:"rgb(0,0,0)",TextColor:"rgb(30,10,30)"}),s&&t.AryText.push({Name:"èµ·å§æ¶é´: ",Text:we.FormatTimeString(n.Time,"HH:MM"),NameColor:"rgb(0,0,0)",TextColor:"rgb(30,10,30)"}),t.AryText.push({Name:"ç»ææ¥æ: ",Text:we.FormatDateString(o.Date),NameColor:"rgb(0,0,0)",TextColor:"rgb(30,10,30)"}),s&&t.AryText.push({Name:"ç»ææ¶é´: ",Text:we.FormatTimeString(o.Time,"HH:MM"),NameColor:"rgb(0,0,0)",TextColor:"rgb(30,10,30)"});var l=t.AryPoint[1].X-t.AryPoint[0].X,h=t.AryPoint[1].Y-t.AryPoint[0].Y,u="--";0!=l&&(u=""+(h/l).toFixed(4)),t.AryText.push({Name:"æç: ",Text:u,NameColor:"rgb(0,0,0)",TextColor:"rgb(238, 0, 238)"}),t.AryText.push({Name:"å¶ä»: ",Text:"......",NameColor:"rgb(0,0,0)",TextColor:"rgb(156, 156, 156)"})}}},this.ChartDrawMonitorLine_FormatLabelText=function(t){if(t.Data&&we.IsNonEmptyArray(t.Data.Data)&&we.IsNumber(t.StartIndex)&&!(t.StartIndex<0)){var e=t.Data.Data[t.StartIndex],a=t.Data.Data[t.Data.Data.length-1];t.YValue=a.Close;var i=tt.IsMinutePeriod(t.Data.Period,!0);t.AryText=[],t.AryText.push({Name:"èµ·å§: ",Text:we.FormatDateString(e.Date,"MM-DD"),NameColor:"rgb(0,0,0)",TextColor:"rgb(30,10,30)"}),i&&t.AryText.push({Name:"èµ·å§: ",Text:we.FormatTimeString(e.Time,"HH:MM"),NameColor:"rgb(0,0,0)",TextColor:"rgb(30,10,30)"}),t.AryText.push({Name:"ææ°: ",Text:we.FormatDateString(a.Date,"MM-DD"),NameColor:"rgb(0,0,0)",TextColor:"rgb(30,10,30)"}),i&&t.AryText.push({Name:"ææ°: ",Text:we.FormatTimeString(a.Time,"HH:MM"),NameColor:"rgb(0,0,0)",TextColor:"rgb(30,10,30)"}),t.AryText.push({Name:"É: ",Text:"--.--",NameColor:"rgb(0, 0 ,255)",TextColor:"rgb(255, 165, 0)"}),t.AryText.push({Name:"Î²: ",Text:"--.--",NameColor:"rgb(0 ,0 ,255)",TextColor:"rgb(238 ,121, 66)"})}}}function ln(){this.DivDialog=null,this.HQChart,this.ChartPicture,this.ColorButton=null,this.BGColorButton=null,this.FontColorButton=null,this.BorderColorButton=null,this.LockButton=null,this.RandomLineColor=["rgb(255,69,0)","rgb(173,255,47)","rgb(238,154,73)","rgb(255,105,180)"],this.RandomBGColor=["rgba(210,251,209ï¼0.8)","rgb(217,217,253)","rgb(255,208,204)","rgb(252,249,206)"],this.RandomFontColor=["rgb(0,0,0)","rgb(255, 0, 0)","rgb(20, 255, 0)","rgb(255, 0, 255)"],this.RandomBorderColor=["rgb(0,0,0)","rgb(5, 246, 143)","rgb(139, 137, 137)","rgb(255, 20, 147)"],this.AryButton=[{Title:"ä¿®æ¹çº¿æ®µé¢è²",ClassName:"hqchart_drawtool icon-huabi",Type:2,Data:{ID:rs.CMD_CHANGE_LINE_COLOR_ID}},{Title:"ä¿®æ¹å­ä½é¢è²",ClassName:"hqchart_drawtool icon-zitiyanse",Type:2,Data:{ID:rs.CMD_CHANGE_FONT_COLOR_ID}},{Title:"ä¿®æ¹èæ¯é¢è²",ClassName:"hqchart_drawtool icon-zitibeijingse",Type:2,Data:{ID:rs.CMD_CHANGE_BG_COLOR_ID}},{Title:"ä¿®æ¹è¾¹æ¡é¢è²",ClassName:"hqchart_drawtool icon-biankuang",Type:2,Data:{ID:rs.CMD_CHANGE_BORDER_COLOR_ID}},{Title:"ä¸é",ClassName:"hqchart_drawtool icon-lock",Type:2,Data:{ID:rs.CMD_LOCK_DRAW_CHART_ID}},{Title:"å é¤å¾å½¢",ClassName:"hqchart_drawtool icon-recycle_bin",Type:2,Data:{ID:rs.CMD_DELETE_DRAW_CHART_ID}}],this.Inital=function(t){this.HQChart=t},this.Destroy=function(){this.ChartPicture=null,this.ColorButton=null,this.DivDialog&&(document.body.remove(this.DivDialog),this.DivDialog=null)},this.Create=function(){var t=this,e=document.createElement("div");e.className="UMyChart_Draw_Modify_Dialog_Div";var a=document.createElement("div");a.className="UMyChart_Draw_Modify_Dialog_Drag_Div",a.onmousedown=function(e){t.OnMouseDownTitle(e)},e.appendChild(a);var i=document.createElement("span");i.className="hqchart_drawtool icon-tuodong",i.classList.add("UMyChart_DrawTool_Span"),a.appendChild(i);for(var r=0;r<this.AryButton.length;++r){var n=this.AryButton[r];this.CreateButtonItem(n,e)}this.DivDialog=e,document.body.appendChild(e)},this.CreateButtonItem=function(t,e){var a=this,i=document.createElement("div");i.className="UMyChart_Draw_Modify_Dialog_Button_Div";var r=document.createElement("span");r.className="UMyChart_Draw_Modify_Tooltip",r.innerText=t.Title,i.appendChild(r);var n=document.createElement("span");n.className=t.ClassName,n.classList.add("UMyChart_DrawTool_Span"),i.appendChild(n);var o={Div:i,Span:n,Parent:e,Item:t,Tooltip:r};switch(i.onmousedown=function(t){a.OnClickButton(t,o)},i.onmouseover=function(t){a.OnHoverButton(t,o)},i.onmouseout=function(t){a.OnLeaveButton(t,o)},t.Data.ID){case rs.CMD_CHANGE_LINE_COLOR_ID:this.ColorButton=o;break;case rs.CMD_CHANGE_BG_COLOR_ID:this.BGColorButton=o,i.style.display="none";break;case rs.CMD_CHANGE_FONT_COLOR_ID:this.FontColorButton=o,i.style.display="none";break;case rs.CMD_CHANGE_BORDER_COLOR_ID:this.BorderColorButton=o,i.style.display="none";break;case rs.CMD_LOCK_DRAW_CHART_ID:this.LockButton=o,this.LockButton.Span.style.color="rgb(220,220,220)"}e.appendChild(i)},this.OnClickButton=function(t,e){if(console.log("[JSDialogModifyDraw::OnClickButton] ",e),e.Item&&e.Item.Data){switch(e.Item.Data.ID){case rs.CMD_CHANGE_LINE_COLOR_ID:this.ModifyLineColor();break;case rs.CMD_DELETE_DRAW_CHART_ID:this.DeleteDrawPicture();break;case rs.CMD_CHANGE_BG_COLOR_ID:this.ModifyBGColor();break;case rs.CMD_CHANGE_FONT_COLOR_ID:this.ModifyFontColor();break;case rs.CMD_CHANGE_BORDER_COLOR_ID:this.ModifyBorderColor();break;case rs.CMD_LOCK_DRAW_CHART_ID:this.ModifyLockChart()}}},this.OnHoverButton=function(t,e){e.Tooltip.style.display="inline"},this.OnLeaveButton=function(t,e){e.Tooltip.style.display="none"},this.Close=function(t){this.DivDialog&&(this.ChartPicture=null,this.DivDialog.style.visibility="hidden")},this.IsShow=function(){return!!this.DivDialog&&"visible"===this.DivDialog.style.visibility},this.DeleteDrawPicture=function(){this.ChartPicture&&this.HQChart&&this.HQChart.ClearChartDrawPicture(this.ChartPicture),this.Close()},this.ShowButton=function(t,e){t.style.display!=e&&(t.style.display=e)},this.GetRandomColor=function(t,e){for(var a=0,i=0;i<e.length;++i)if(t==e[i]){a=i+1;break}return a%=e.length,e[a]},this.ModifyLineColor=function(){if(this.ChartPicture&&this.HQChart){var t=this.GetRandomColor(this.ChartPicture.LineColor,this.RandomLineColor);this.ChartPicture.LineColor=t,this.ChartPicture.PointColor=t,this.ColorButton&&(this.ColorButton.Span.style.color=t),this.HQChart.ChartDrawStorage&&this.HQChart.ChartDrawStorage.SaveDrawData(this.ChartPicture),this.HQChart.Draw()}},this.ModifyFontColor=function(){if(this.ChartPicture&&this.HQChart){if("ChartDrawNote"==this.ChartPicture.ClassName){var t=this.GetRandomColor(this.ChartPicture.NoteTextColor,this.RandomFontColor);this.ChartPicture.NoteTextColor=t}else{var t=this.GetRandomColor(this.ChartPicture.TextColor,this.RandomFontColor);this.ChartPicture.TextColor=t}this.FontColorButton&&(this.FontColorButton.Span.style.color=t),this.HQChart.ChartDrawStorage&&this.HQChart.ChartDrawStorage.SaveDrawData(this.ChartPicture),this.HQChart.Draw()}},this.ModifyBGColor=function(){if(this.ChartPicture&&this.HQChart){if("ChartDrawNote"==this.ChartPicture.ClassName){var t=this.GetRandomColor(this.ChartPicture.NoteBGColor,this.RandomBGColor);this.ChartPicture.NoteBGColor=t}else{var t=this.GetRandomColor(this.ChartPicture.BGColor,this.RandomBGColor);this.ChartPicture.BGColor=t}this.BGColorButton&&(this.BGColorButton.Span.style.color=t),this.HQChart.ChartDrawStorage&&this.HQChart.ChartDrawStorage.SaveDrawData(this.ChartPicture),this.HQChart.Draw()}},this.ModifyLockChart=function(){this.ChartPicture&&this.HQChart&&(this.ChartPicture.EnableMove=!this.ChartPicture.EnableMove,this.LockButton&&(this.LockButton.Span.style.color=this.ChartPicture.EnableMove?"rgb(220,220,220)":"rgb(0,0,0)"))},this.ModifyBorderColor=function(){if(this.ChartPicture&&this.HQChart){if("ChartDrawNote"==this.ChartPicture.ClassName){var t=this.GetRandomColor(this.ChartPicture.NoteBorderColor,this.RandomBorderColor);this.ChartPicture.NoteBorderColor=t}else{var t=this.GetRandomColor(this.ChartPicture.BorderColor,this.RandomBorderColor);this.ChartPicture.BorderColor=t}this.BorderColorButton&&(this.BorderColorButton.Span.style.color=t),this.HQChart.ChartDrawStorage&&this.HQChart.ChartDrawStorage.SaveDrawData(this.ChartPicture),this.HQChart.Draw()}},this.Show=function(t,e){this.DivDialog||this.Create(),this.DivDialog.style.visibility="visible",this.DivDialog.style.top=e+"px",this.DivDialog.style.left=t+"px"},this.SetChartPicture=function(t){this.ChartPicture=t;var e=!1,a=!1,i=!1,r=null,n=null,o=null;if(["ChartDrawPriceLabel","ChartDrawAnchoredText","ChartDrawPriceNote"].includes(t.ClassName)?(e=!0,a=!0,i=!0,r=t.BGColor,n=t.TextColor,o=t.BorderColor):"ChartDrawNote"==t.ClassName&&(e=!0,a=!0,i=!0,r=t.NoteBGColor,n=t.NoteTextColor,o=t.NoteBorderColor),this.ColorButton){var s=this.ColorButton;this.ShowButton(s.Div,"inline"),s.Span.style.color=t.LineColor}if(this.BGColorButton){var s=this.BGColorButton;this.ShowButton(s.Div,e?"inline":"none"),e&&(s.Span.style.color=r)}if(this.FontColorButton){var s=this.FontColorButton;this.ShowButton(s.Div,a?"inline":"none"),a&&(s.Span.style.color=n)}if(this.BorderColorButton){var s=this.BorderColorButton;this.ShowButton(s.Div,i?"inline":"none"),i&&(s.Span.style.color=o)}if(this.LockButton){var s=this.LockButton;s.Span.style.color=this.ChartPicture.EnableMove?"rgb(220,220,220)":"rgb(0,0,0)"}},this.OnMouseDownTitle=function(t){var e=this;if(this.DivDialog){var a={X:t.clientX,Y:t.clientY};a.YOffset=t.clientX-this.DivDialog.offsetLeft,a.XOffset=t.clientY-this.DivDialog.offsetTop,this.DragTitle=a,document.onmousemove=function(t){e.DocOnMouseMoveTitle(t)},document.onmouseup=function(t){e.DocOnMouseUpTitle(t)}}},this.DocOnMouseMoveTitle=function(t){if(this.DragTitle){var e=t.clientX-this.DragTitle.YOffset,a=t.clientY-this.DragTitle.XOffset,i=e+this.DivDialog.offsetWidth,r=a+this.DivDialog.offsetHeight;i+5>=window.innerWidth&&(e=window.innerWidth-this.DivDialog.offsetWidth-5),r+5>=window.innerHeight&&(a=window.innerHeight-this.DivDialog.offsetHeight-5),this.DivDialog.style.left=e+"px",this.DivDialog.style.top=a+"px",t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()}},this.DocOnMouseUpTitle=function(t){this.DragTitle=null,this.onmousemove=null,this.onmouseup=null}}function hn(){this.DivDialog=null,this.DivInfoText=null,this.HQChart=null,this.DragTitle=null,this.Date=null,this.ID=D(),this.Minute={Option:hn.GetMinuteOption(),JSChart:null,Date:null},this.Inital=function(t){this.HQChart=t},this.Create=function(){var t=this,e=document.createElement("div");e.className="jchart_pop_minute_dailog",e.id=this.ID,e.style["background-color"]=So.PopMinuteChart.BGColor,e.style["border-color"]=So.PopMinuteChart.BorderColor;var a=document.createElement("div");a.className="jschart_pop_minute_chart_Title_Div",a.onmousedown=function(e){t.OnMouseDownTitle(e)},e.appendChild(a);var i=document.createElement("div");i.className="jschart_pop_minute_chart_Title",i.innerText="åæ¶å¾",this.DivInfoText=i,a.appendChild(i);var r=document.createElement("div");r.className="jschart_pop_minute_chart_Close_Div",r.innerText="x",r.onmousedown=function(e){t.Close(e)},a.appendChild(r);var n=document.createElement("div");n.className="jschart_pop_minute_chart",e.appendChild(n),this.DivDialog=e;var o=l.Init(n);this.Minute.JSChart=o,this.HQChart&&(this.Minute.Option.Language=bo.GetLanguageName(this.HQChart.LanguageID)),this.Minute.Option.OnCreatedCallback=function(e){t.OnCreateHQChart(e)},this.Minute.Option.NetworkFilter=function(e,a){t.NetworkFilter(e,a)},o.SetOption(this.Minute.Option),document.body.appendChild(e)},this.NetworkFilter=function(t,e){this.HQChart&&this.HQChart.NetworkFilter&&(t&&(t.PopMinuteData={Date:this.Date}),"MinuteChartContainer::RequestMinuteData"==t.Name&&(t.Request.Data.date=this.Date,t.Name="MinuteChartContainer::RequestPopMinuteData",t.Explain="æå®æ¥æåæ¶æ°æ®"),this.HQChart.NetworkFilter(t,e))},this.OnCreateHQChart=function(t){},this.Destroy=function(){this.DivDialog&&document.body.removeChild(this.DivDialog),this.DivDialog=null,this.DivInfoText=null,this.Minute.JSChart=null},this.IsShow=function(){return!!this.DivDialog&&"visible"===this.DivDialog.style.visibility},this.Show=function(t,e,a){if(this.DivDialog||this.Create(),t.Symbol&&we.IsPlusNumber(t.Date)){this.Date=t.Date;var i=t.Symbol;t.Name&&(i=t.Name);var r=i+" "+we.FormatDateString(t.Date)+" åæ¶å¾";this.DivInfoText.innerText=r,this.Minute.JSChart&&this.Minute.JSChart.ChangeSymbol(t.Symbol);var n=this.DivDialog.offsetHeight,o=this.DivDialog.offsetWidth,s=window.innerWidth-5,l=window.innerHeight-5;e+o>s&&(e=s-o),a+n>l&&(a=l-n),this.DivDialog.style.visibility="visible",this.DivDialog.style.top=a+"px",this.DivDialog.style.left=e+"px"}},this.Close=function(t){this.DivDialog&&(this.DivDialog.style.visibility="hidden")},this.OnMouseDownTitle=function(t){var e=this;if(this.DivDialog){var a={X:t.clientX,Y:t.clientY};a.YOffset=t.clientX-this.DivDialog.offsetLeft,a.XOffset=t.clientY-this.DivDialog.offsetTop,this.DragTitle=a,document.onmousemove=function(t){e.DocOnMouseMoveTitle(t)},document.onmouseup=function(t){e.DocOnMouseUpTitle(t)}}},this.DocOnMouseMoveTitle=function(t){if(this.DragTitle){var e=t.clientX-this.DragTitle.YOffset,a=t.clientY-this.DragTitle.XOffset,i=e+this.DivDialog.offsetWidth,r=a+this.DivDialog.offsetHeight;i+5>=window.innerWidth&&(e=window.innerWidth-this.DivDialog.offsetWidth-5),r+5>=window.innerHeight&&(a=window.innerHeight-this.DivDialog.offsetHeight-5),this.DivDialog.style.left=e+"px",this.DivDialog.style.top=a+"px",t.preventDefault&&t.preventDefault()}},this.DocOnMouseUpTitle=function(t){this.DragTitle=null,this.onmousemove=null,this.onmouseup=null},this.ReloadResource=function(t){this.DivDialog&&(this.DivDialog.style["background-color"]=So.PopMinuteChart.BGColor,this.DivDialog.style["border-color"]=So.PopMinuteChart.BorderColor,this.Minute.JSChart&&this.Minute.JSChart.ReloadResource(t))},this.SetLanguage=function(t){this.DivDialog&&this.Minute.JSChart&&this.Minute.JSChart.SetLanguage(t)}}function un(){this.DivDialog=null,this.DragTitle=null,this.TitleBox=null,this.InputDOM=null,this.Title="HQChart é®çç²¾çµ",this.ID=D(),this.ActiveDOM=null,this.InputStatus=0,this.BGColor=So.DialogPopKeyboard.BGColor,this.TitleColor=So.DialogPopKeyboard.TitleColor,this.TitleBGColor=So.DialogPopKeyboard.TitleBGColor,this.BorderColor=So.DialogPopKeyboard.BorderColor,this.InputBGColor=So.DialogPopKeyboard.Input.BGColor,this.InputTextColor=So.DialogPopKeyboard.Input.TextColor,this.Keyboard={Option:un.GetOption(),JSChart:null},this.Inital=function(){var t=this;window.addEventListener("mousedown",function(e){t.OnWindowMouseDown(e)})},this.OnWindowMouseDown=function(t){this.DivDialog&&(console.log("[JSPopKeyboard::OnWindowMouseDown] e=",t),this.DivDialog.contains(t.target)||this.Hide())},this.Create=function(){var t=this,e=document.createElement("div");e.className="jchart_pop_keyboard_dailog",e.id=this.ID;var a=document.createElement("div");a.className="jschart_keyboard_Title_Div",a.onmousedown=function(e){t.OnMouseDownTitle(e)},e.appendChild(a);var i=document.createElement("div");i.className="jschart_keyboard_Title",i.innerText=this.Title,this.DivInfoText=i,a.appendChild(i);var r=document.createElement("div");r.className="jschart_keyboard_Close_Div",r.innerText="x",r.onmousedown=function(e){t.Hide()},a.appendChild(r),this.TitleBox={DivTitle:a,DivName:i,DivClose:r};var n=document.createElement("div");n.className="jschart_keyboard_Input_Div",e.appendChild(n);var o=document.createElement("input");o.className="jschart_keyboard_input",o.addEventListener("keydown",function(e){t.OnKeydown(e)}),o.addEventListener("keyup",function(e){t.OnKeyup(e)}),o.addEventListener("compositionstart",function(e){t.OnCompositionStart(e)}),o.addEventListener("compositionupdate",function(e){t.OnCompositionUpdate(e)}),o.addEventListener("compositionend",function(e){t.OnCompositionEnd(e)}),n.appendChild(o);var s=document.createElement("div");s.className="jschart_keyboard_Chart_Div",e.appendChild(s),this.DivDialog=e,this.InputDOM=o;var l=qr.Init(s);this.Keyboard.JSChart=l,this.Keyboard.Option.OnCreatedCallback=function(e){t.OnCreateHQChart(e)},l.SetOption(this.Keyboard.Option),l.AddEventCallback({event:Kn.ON_KEYBOARD_MOUSEUP,callback:function(e,a,i){t.OnChartMouseUp(e,a,i)}}),this.UpdateStyle(),document.body.appendChild(e)},this.OnCreateHQChart=function(t){},this.OnCompositionStart=function(t){this.InputStatus=1},this.OnCompositionUpdate=function(t){},this.OnCompositionEnd=function(t){this.InputStatus=0},this.OnKeydown=function(t){if(0==this.InputStatus){new Rn.default([40,38,13,33,34]).has(t.keyCode)&&this.Keyboard.JSChart.OnKeyDown(t),27==t.keyCode&&this.Hide()}},this.OnKeyup=function(t){if(0==this.InputStatus){var e=t.keyCode;if(8==e){var a=this.InputDOM.value;if(0==a.length)return void this.Hide()}if(e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122||8==e){var a=this.InputDOM.value;a=a.toUpperCase(),this.Keyboard.JSChart.Search(a)}}},this.OnMouseDownTitle=function(t){var e=this;if(this.DivDialog){var a={X:t.clientX,Y:t.clientY};a.YOffset=t.clientX-this.DivDialog.offsetLeft,a.XOffset=t.clientY-this.DivDialog.offsetTop,this.DragTitle=a,document.onmousemove=function(t){e.DocOnMouseMoveTitle(t)},document.onmouseup=function(t){e.DocOnMouseUpTitle(t)}}},this.DocOnMouseMoveTitle=function(t){if(this.DragTitle){var e=t.clientX-this.DragTitle.YOffset,a=t.clientY-this.DragTitle.XOffset,i=e+this.DivDialog.offsetWidth,r=a+this.DivDialog.offsetHeight;i+5>=window.innerWidth&&(e=window.innerWidth-this.DivDialog.offsetWidth-5),r+5>=window.innerHeight&&(a=window.innerHeight-this.DivDialog.offsetHeight-5),this.DivDialog.style.left=e+"px",this.DivDialog.style.top=a+"px",t.preventDefault&&t.preventDefault()}},this.DocOnMouseUpTitle=function(t){this.DragTitle=null,this.onmousemove=null,this.onmouseup=null},this.SetSymbolData=function(t){if(!this.Keyboard.JSChart)return!1;this.Keyboard.JSChart.SetSymbolData(t)},this.Show=function(){if(this.DivDialog){var t=this.DivDialog.offsetHeight,e=this.DivDialog.offsetWidth,a=window.innerWidth-5,i=window.innerHeight-5,r=a-e,n=i-t;this.DivDialog.style.visibility="visible",this.DivDialog.style.top=n+"px",this.DivDialog.style.left=r+"px"}},this.Hide=function(){this.DivDialog&&(this.DivDialog.style.visibility="hidden",this.InputDOM.value="",this.Keyboard.JSChart.ClearSearch(),this.ActiveDOM&&(this.ActiveDOM.focus&&this.ActiveDOM.focus(),this.ActiveDOM=null))},this.IsShow=function(){return!!this.DivDialog&&"visible"===this.DivDialog.style.visibility},this.OnGlobalKeydown=function(t){if(this.DivDialog){var e=t.keyCode;116!=e&&(!this.IsShow()&&e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122?(this.Show(),this.InputDOM.focus(),""==this.InputDOM.value&&(this.InputDOM.value=t.key,t.preventDefault()),t.target&&(this.ActiveDOM=t.target)):27==e&&this.IsShow()&&this.Hide())}},this.OnGlobalMouseDown=function(t){this.DivDialog&&"none"!=this.DivDialog.style.display&&(this.DivDialog.contains(t.target)||this.Hide())},this.OnChartMouseUp=function(t,e,a){this.InputDOM.focus()},this.UpdateStyle=function(){this.DivDialog&&(this.BGColor&&(this.DivDialog.style["background-color"]=this.BGColor),this.BorderColor&&(this.DivDialog.style["border-color"]=this.BorderColor),this.InputBGColor&&(this.InputDOM.style["background-color"]=this.InputBGColor),this.InputTextColor&&(this.InputDOM.style.color=this.InputTextColor),this.TitleBGColor&&(this.TitleBox.DivTitle.style["background-color"]=this.TitleBGColor),this.TitleColor&&(this.TitleBox.DivName.style.color=this.TitleColor,this.TitleBox.DivClose.style.color=this.TitleColor))},this.ReloadResource=function(t){this.BGColor=So.DialogPopKeyboard.BGColor,this.TitleColor=So.DialogPopKeyboard.TitleColor,this.TitleBGColor=So.DialogPopKeyboard.TitleBGColor,this.BorderColor=So.DialogPopKeyboard.BorderColor,this.InputBGColor=So.DialogPopKeyboard.Input.BGColor,this.InputTextColor=So.DialogPopKeyboard.Input.TextColor,this.Keyboard.JSChart&&(this.Keyboard.JSChart.ReloadResource(),this.Keyboard.JSChart.Draw()),this.DivDialog&&this.UpdateStyle()}}function Cn(){this.DivDialog=null,this.DragTitle=null,this.TitleBox=null,this.Style=0,this.HQChart=null,this.UpColor=So.UpTextColor,this.DownColor=So.DownTextColor,this.UnchangeColor=So.UnchagneTextColor,this.TitleColor=So.DialogTooltip.TitleColor,this.TitleBGColor=So.DialogTooltip.TitleBGColor,this.BGColor=So.DialogTooltip.BGColor,this.BorderColor=So.DialogTooltip.BorderColor,this.TextColor=So.DialogTooltip.TextColor,this.ValueColor=So.DialogTooltip.ValueColor,this.VolColor=So.DialogTooltip.VolColor,this.AmountColor=So.DialogTooltip.AmountColor,this.TurnoverRateColor=So.DialogTooltip.TurnoverRateColor,this.PositionColor=So.DialogTooltip.PositionColor,this.DateTimeColor=So.DialogTooltip.DateTimeColor,this.LanguageID=xo.LANGUAGE_CHINESE_ID,this.MaxRowCount=25,this.AryData=[],this.AryText=[],this.KItemCache=null,this.KItemCacheID=null,this.LastValueCache=null,this.LastValueCacheID=null,this.DataID=null,this.Inital=function(t,e){this.HQChart=t,e&&we.IsNumber(e.Style)&&(this.Style=e.Style)},this.Destroy=function(){this.AryData=[],this.AryText=[],this.KItemCache=null,this.KItemCacheID=null,this.DivDialog&&(document.body.removeChild(this.DivDialog),this.DivDialog=null)},this.OnClickColseButton=function(t){if(this.Close(t),this.HQChart&&this.HQChart.ChartCorssCursor){var e=this.HQChart.ChartCorssCursor;if(!e.IsShowCorss)return;e.IsShowCorss=!1,this.HQChart.Draw(),this.HQChart.SetFocus()}},this.IsEqualDataID=function(t){return!!this.DataID&&(!!t&&(this.DataID.Symbol==t.Symbol&&(this.DataID.Date==t.Date&&(!we.IsNumber(this.DataID.Time)||this.DataID.Time==t.Time))))},this.Create=function(){var t=this,e=document.createElement("div");e.className="UMyChart_Tooltip_Dialog_Div";var a=document.createElement("div");a.className="UMyChart_Tooltip_Title_Div",a.onmousedown=function(e){t.OnMouseDownTitle(e)};var i=document.createElement("div");i.className="UMyChart_Tooltip_Name_Div",i.innerText="----",a.appendChild(i);var r=document.createElement("div");r.className="UMyChart_Tooltip_Close_Div",r.innerText="x",r.onmousedown=function(e){t.OnClickColseButton(e)},a.appendChild(r),e.appendChild(a);var n=document.createElement("table");n.className="UMyChart_Tooltip_Table",e.appendChild(n);var o=document.createElement("tbody");if(o.className="UMyChart_Tooltip_Tbody",n.appendChild(o),this.AryData=[],1==this.Style)for(var s=0;s<this.MaxRowCount;++s){var l={Tr:null,TitleSpan:null,TextSpan:null,Tr2:null},h=document.createElement("tr");h.className="UMyChart_Tooltip_Group_Tr",o.appendChild(h),l.Tr=h;var u=document.createElement("td");u.className="UMyChart_Tooltip_Text_Sinlge_Td",h.appendChild(u);var C=document.createElement("span");C.className="UMyChart_Tooltip_Title_Left_Span",C.innerText="æ é¢",u.appendChild(C),l.TitleSpan=C;var h=document.createElement("tr");h.className="UMyChart_Tooltip_Group_Tr",o.appendChild(h),l.Tr2=h;var u=document.createElement("td");u.className="UMyChart_Tooltip_Text_Sinlge_Td",h.appendChild(u);var C=document.createElement("span");C.className="UMyChart_Tooltip_Text_Span",C.innerText="æ°å¼",u.appendChild(C),l.TextSpan=C,this.AryData.push(l)}else for(var s=0;s<this.MaxRowCount;++s){var l={Tr:null,TitleSpan:null,TextSpan:null},h=document.createElement("tr");h.className="UMyChart_Tooltip_Group_Tr",o.appendChild(h),l.Tr=h;var u=document.createElement("td");u.className="UMyChart_Tooltip_Title_Td",h.appendChild(u);var C=document.createElement("span");C.className="UMyChart_Tooltip_Title_Span",C.innerText="æ é¢",u.appendChild(C),l.TitleSpan=C;var u=document.createElement("td");u.className="UMyChart_Tooltip_Text_Td",h.appendChild(u);var C=document.createElement("span");C.className="UMyChart_Tooltip_Text_Span",C.innerText="æ°å¼",u.appendChild(C),l.TextSpan=C,this.AryData.push(l)}document.body.appendChild(e),this.DivName=i,this.DivDialog=e,this.TitleBox={DivTitle:a,DivName:i,DivColor:r},this.UpdateStyle()},this.UpdateKLineData=function(t){if(t.KItem&&t.IsShowCorss&&(this.LanguageID=this.HQChart.LanguageID,"KLineChartContainer"==this.HQChart.ClassName)){var e=(0,Bn.default)(t.KItem),a=!1;this.KItemCacheID!=e&&(this.KItemCache=JSON.parse(e),this.KItemCacheID=e,a=!0),a&&this.UpdateTableDOM()}},this.UpdateMinuteData=function(t){if(t.MinItem&&t.IsShowCorss){var e=(0,Bn.default)(t.MinItem),a=!1;this.KItemCacheID!=e&&(this.KItemCache=JSON.parse(e),this.KItemCacheID=e,a=!0),a&&this.UpdateTableDOM()}},this.Update=function(t){if(this.DivDialog&&this.TitleBox){if(1==t.DataType)return void this.UpdateKLineData(t);if(2==t.DataType)return void this.UpdateMinuteData(t);if((t.KItem||t.MinItem)&&t.IsShowCorss&&!(t.ClientPos<0)){if(this.LanguageID=this.HQChart.LanguageID,"KLineChartContainer"==this.HQChart.ClassName){var e=(0,Bn.default)(t.KItem),a=(0,Bn.default)(t.LastValue),i=!1;this.KItemCacheID!=e&&(this.KItemCache=JSON.parse(e),this.KItemCacheID=e,i=!0),t.LastValue&&t.LastValue.Y&&we.IsNumber(t.LastValue.Y.Value)&&this.LastValueCacheID!=a&&(this.LastValueCache=JSON.parse(a),this.LastValueCacheID=a,i=!0),i&&(this.UpdateDataID(t),this.UpdateTableDOM())}else{if("MinuteChartContainer"!=this.HQChart.ClassName)return;var e=(0,Bn.default)(t.MinItem),a=(0,Bn.default)(t.LastValue),i=!1;this.KItemCacheID!=e&&(this.KItemCache=JSON.parse(e),this.KItemCacheID=e,i=!0),t.LastValue&&t.LastValue.Y&&we.IsNumber(t.LastValue.Y.Value)&&this.LastValueCacheID!=a&&(this.LastValueCache=JSON.parse(a),this.LastValueCacheID=a,i=!0),i&&(this.UpdateDataID(t),this.UpdateTableDOM())}this.TitleBox.DivName.innerText=t.Name,this.IsShow()||this.Show()}}},this.UpdateTableDOM=function(){if(this.KItemCache){if("KLineChartContainer"==this.HQChart.ClassName)this.AryText=this.GetFormatKLineTooltipText(this.KItemCache);else{if("MinuteChartContainer"!=this.HQChart.ClassName)return;this.AryText=this.GetFormatMinuteTooltipText(this.KItemCache)}var t=0;for(t=0;t<this.AryText.length&&t<this.MaxRowCount;++t){var e=this.AryText[t],a=this.AryData[t];a.TitleSpan.innerText=e.Title,a.TitleSpan.style.color=this.TextColor,a.TextSpan.innerText=e.Text,a.TextSpan.style.color=e.Color,a.Tr.style.display="",a.Tr2&&(a.Tr2.style.display="")}for(;t<this.MaxRowCount;++t){var a=this.AryData[t];a.Tr.style.display="none",a.Tr2&&(a.Tr2.style.display="none")}}},this.UpdateDataID=function(t){if("KLineChartContainer"==this.HQChart.ClassName){var e=t.KItem;this.DataID={Symbol:t.Symbol,Date:e.Date,Time:null},we.IsNumber(e.Time)&&(this.DataID.Time=e.Time)}else if("MinuteChartContainer"==this.HQChart.ClassName){var a=t.MinItem;if(0==a.Type){var i=a.Data;i&&(this.DataID={Symbol:t.Symbol,Date:i.Date,Time:i.Time})}else if(1==a.Type){var i=a.Data.Data;i&&(this.DataID={Symbol:t.Symbol,Date:i.Date,Time:i.Time})}}},this.Close=function(t){this.DivDialog&&(this.DivDialog.style.visibility="hidden")},this.OnMouseDownTitle=function(t){var e=this;if(this.DivDialog){var a={X:t.clientX,Y:t.clientY};a.YOffset=t.clientX-this.DivDialog.offsetLeft,a.XOffset=t.clientY-this.DivDialog.offsetTop,this.DragTitle=a,document.onmousemove=function(t){e.DocOnMouseMoveTitle(t)},document.onmouseup=function(t){e.DocOnMouseUpTitle(t)}}},this.DocOnMouseMoveTitle=function(t){if(this.DragTitle){var e=t.clientX-this.DragTitle.YOffset,a=t.clientY-this.DragTitle.XOffset,i=e+this.DivDialog.offsetWidth,r=a+this.DivDialog.offsetHeight;i+5>=window.innerWidth&&(e=window.innerWidth-this.DivDialog.offsetWidth-5),r+5>=window.innerHeight&&(a=window.innerHeight-this.DivDialog.offsetHeight-5),this.DivDialog.style.left=e+"px",this.DivDialog.style.top=a+"px",t.preventDefault&&t.preventDefault()}},this.DocOnMouseUpTitle=function(t){this.DragTitle=null,this.onmousemove=null,this.onmouseup=null},this.Show=function(t,e){if(!this.IsShow()&&this.DivDialog&&this.HQChart){var a=this.HQChart.Frame.ChartBorder.GetTop(),i=this.HQChart.Frame.ChartBorder.GetLeft(),r=this.HQChart.UIElement.getBoundingClientRect(),t=i+r.left+5,e=a+r.top+10;this.DivDialog.style.top=e+"px",this.DivDialog.style.left=t+"px",this.DivDialog.style.visibility="visible"}},this.IsShow=function(){return!!this.DivDialog&&"visible"===this.DivDialog.style.visibility},this.GetFormatKLineTooltipText=function(t){var e=sr(this.HQChart.Symbol),a=this.HQChart.Symbol.toUpperCase(),i=0;1==this.Style&&(i=1);var r=this.ForamtDate(t.Date,"YYYY/MM/DD/W","DialogTooltip-Date"),n=null;we.IsNumber(t.Time)&&(n=this.FormatTime(t.Time,this.HQChart.Period,null,"DialogTooltip-Time"));var o=t.YClose,s=[this.ForamtPrice(t.Open,o,e,"DialogTooltip-Open",i),this.ForamtPrice(t.High,o,e,"DialogTooltip-High",i),this.ForamtPrice(t.Low,o,e,"DialogTooltip-Low",i),this.ForamtPrice(t.Close,o,e,"DialogTooltip-Close",i),this.FormatVol(t.Vol,"DialogTooltip-Vol"),this.FormatAmount(t.Amount,"DialogTooltip-Amount"),this.FormatIncrease(t.Close,o,e,"DialogTooltip-Increase",i),this.FormatAmplitude(t.High,t.Low,o,e,"DialogTooltip-Amplitude",i)];if(this.LastValueCache&&this.LastValueCache.Y){var l=this.LastValueCache.Y,h=null;h=0==l.Extend.FrameID?this.ForamtPrice(l.Value,null,e,"DialogTooltip-Value",2):this.ForamtValue(l.Value,2,"DialogTooltip-Value"),h&&s.unshift(h)}if(1==this.Style){n&&s.unshift(n);var r=this.ForamtDate(t.Date,"YYYY/MM/DD","DialogTooltip-Date");s.unshift(r)}else n&&s.unshift(n),s.unshift(r);wo.IsSHSZStockA(a)&&t.FlowCapital>0&&s.push(this.FormatExchange(t.Vol,t.FlowCapital,"DialogTooltip-Exchange")),wo.IsFutures(a)&&(s.push(this.FormatPosition(t.Position,"DialogTooltip-Position")),s.push(this.ForamtFClose(t.FClose,e,"DialogTooltip-FClose")));var u=this.HQChart.GetEventCallback(Kn.ON_FORMAT_DIALOG_TOOLTIP);if(u&&u.Callback){var C={AryText:s,Data:t,Symbol:this.HQChart.Symbol,HQChart:this.HQChart,IsKLine:!0};u.Callback(u,C,this)}return s},this.GetFormatMinuteTooltipText=function(t){var e=sr(this.HQChart.Symbol),a=[];if(0==t.Type){var i=t.Data;if(i||(i={}),a=[this.ForamtDate(i.Date,1==this.Style?"MM/DD/W":"YYYY/MM/DD/W","DialogTooltip-Date"),this.FormatTime(i.Time,null,"HH:MM","DialogTooltip-Time"),this.ForamtPrice(i.Close,i.YClose,e,"DialogTooltip-Price",1),this.ForamtPrice(i.AvPrice,i.YClose,e,"DialogTooltip-AvPrice",1),this.FormatRisefall(i.Close,i.YClose,e,"DialogTooltip-Risefall"),this.FormatIncrease(i.Close,i.YClose,e,"DialogTooltip-Increase",1),this.FormatVol(i.Vol,"DialogTooltip-Vol"),this.FormatAmount(i.Amount,"DialogTooltip-Amount")],this.LastValueCache&&this.LastValueCache.Y){var i=this.LastValueCache.Y,r=null;r=0==i.Extend.FrameID?this.ForamtPrice(i.Value,null,e,"DialogTooltip-Value",2):this.ForamtValue(i.Value,2,"DialogTooltip-Value"),r&&a.splice(2,0,r)}}else if(1==t.Type){var i=t.Data.Data;i||(i={Vol:[]});var n="HH:MM:SS";1===i.Ver&&(n="HH:MM"),a=[this.ForamtDate(i.Date,1==this.Style?"MM/DD/W":"YYYY/MM/DD/W","DialogTooltip-Date"),this.FormatTime(i.Time,null,n,"DialogTooltip-Time"),this.ForamtPrice(i.Price,i.YClose,e,"DialogTooltip-AC-Price",1),this.FormatIncrease(i.Price,i.YClose,e,"DialogTooltip-AC-Increase",1),this.FormatVol(i.Vol[0],"DialogTooltip-AC-Vol")]}var o=this.HQChart.GetEventCallback(Kn.ON_FORMAT_DIALOG_TOOLTIP);if(o&&o.Callback){var s={AryText:a,Data:t,Symbol:this.HQChart.Symbol,HQChart:this.HQChart,IsMinute:!0};o.Callback(o,s,this)}return a},this.GetColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchangeColor},this.GetPriceColor=function(t,e){return this.GetColor(t,e)},this.ReloadResource=function(t){this.UpColor=So.UpTextColor,this.DownColor=So.DownTextColor,this.UnchangeColor=So.UnchagneTextColor,this.TitleColor=So.DialogTooltip.TitleColor,this.TitleBGColor=So.DialogTooltip.TitleBGColor,this.BGColor=So.DialogTooltip.BGColor,this.BorderColor=So.DialogTooltip.BorderColor,this.VolColor=So.DialogTooltip.VolColor,this.AmountColor=So.DialogTooltip.AmountColor,this.TurnoverRateColor=So.DialogTooltip.TurnoverRateColor,this.PositionColor=So.DialogTooltip.PositionColor,this.DateTimeColor=So.DialogTooltip.DateTimeColor,this.TextColor=So.DialogTooltip.TextColor,this.ValueColor=So.DialogTooltip.ValueColor,this.DivDialog&&this.UpdateStyle()},this.UpdateStyle=function(){this.DivDialog&&(this.BGColor&&(this.DivDialog.style["background-color"]=this.BGColor),this.BorderColor&&(this.DivDialog.style["border-color"]=this.BorderColor),this.TitleBGColor&&(this.TitleBox.DivTitle.style["background-color"]=this.TitleBGColor),this.TitleColor&&(this.TitleBox.DivName.style.color=this.TitleColor),this.UpdateTableDOM())},this.ForamtPrice=function(t,e,a,i,r){var n={Title:bo.GetText(i,this.LanguageID),Text:"--.--",Color:this.ValueColor};if(!we.IsNumber(t))return n;if(2==r)return n.Text=t.toFixed(a),n.Color=this.ValueColor,n;if(we.IsNumber(e)&&1!=r){var o=(t-e)/e*100;n.Text=t.toFixed(a)+"("+o.toFixed(2)+"%)"}else n.Text=t.toFixed(a);return n.Color=this.GetColor(t,e),n},this.ForamtValue=function(t,e,a){var i={Title:bo.GetText(a,this.LanguageID),Text:"--",Color:this.ValueColor};return we.IsNumber(t)?(i.Text=we.FormatValueStringV2(t,e,2,this.LanguageID),i):i},this.FormatVol=function(t,e){var a={Title:bo.GetText(e,this.LanguageID),Text:"--",Color:this.VolColor};return we.IsNumber(t)?(a.Text=we.FormatValueStringV2(t,0,2,this.LanguageID),a):a},this.FormatAmount=function(t,e){var a={Title:bo.GetText(e,this.LanguageID),Text:"--",Color:this.AmountColor};return we.IsNumber(t)?(a.Text=we.FormatValueString(t,2,this.LanguageID),a):a},this.FormatIncrease=function(t,e,a,i,r){var n={Title:bo.GetText(i,this.LanguageID),Text:"--.--",Color:this.ValueColor};if(!we.IsNumber(t)||!we.IsNumber(e))return n;var o=t-e,s=(t-e)/e;return n.Text=1==r?(100*s).toFixed(2)+"%":o.toFixed(a)+"("+(100*s).toFixed(2)+"%)",n.Color=this.GetColor(s,0),n},this.FormatRisefall=function(t,e,a,i){var r={Title:bo.GetText(i,this.LanguageID),Text:"--.--",Color:this.ValueColor};if(!we.IsNumber(t)||!we.IsNumber(e))return r;var n=t-e;return r.Text=""+n.toFixed(a),r.Color=this.GetColor(n,0),r},this.FormatAmplitude=function(t,e,a,i,r,n){var o={Title:bo.GetText(r,this.LanguageID),Text:"--.--",Color:this.ValueColor};if(!we.IsNumber(t)||!we.IsNumber(e)||!we.IsNumber(a))return o;var s=t-e,l=(t-e)/a;return o.Text=1==n?(100*l).toFixed(2)+"%":s.toFixed(i)+"("+(100*l).toFixed(2)+"%)",o.Color=this.GetColor(l,0),o},this.ForamtDate=function(t,e,a){var i={Title:bo.GetText("DialogTooltip-Date",this.LanguageID),Text:"----/--/--",Color:this.DateTimeColor};return we.IsNumber(t)?(i.Text=we.FormatDateString(t,e),i):i},this.FormatTime=function(t,e,a,i){var r={Title:bo.GetText(i,this.LanguageID),Text:"--:--",Color:this.DateTimeColor};return we.IsNumber(t)?(a||(a="HH:MM",tt.IsMinutePeriod(e,!0)?a="HH:MM":tt.IsSecondPeriod(e)?a="HH:MM:SS":tt.IsMilliSecondPeriod(e)&&(a="HH:MM:SS.fff")),r.Text=we.FormatTimeString(t,a),r):r},this.FormatExchange=function(t,e,a){var i={Title:bo.GetText(a,this.LanguageID),Text:"--.--",Color:this.DateTimeColor};if(!we.IsNumber(t)||!we.IsNumber(e)||0==e)return i;var r=t/e*100;return i.Text=r.toFixed(2)+"%",i},this.FormatPosition=function(t,e){var a={Title:bo.GetText(e,this.LanguageID),Text:"--.--",Color:this.PositionColor};return we.IsNumber(t)?(a.Text=t.toFixed(0),a):a},this.ForamtFClose=function(t,e,a){var i={Title:bo.GetText(a,this.LanguageID),Text:"--.--",Color:this.DateTimeColor};return we.IsNumber(t)?(i.Text=t.toFixed(e),i):i}}function cn(){this.DivDialog=null,this.Style=0,this.HQChart=null,this.MaxRowCount=25,this.UpColor=So.UpTextColor,this.DownColor=So.DownTextColor,this.UnchangeColor=So.UnchagneTextColor,this.BGColor=So.FloatTooltip.BGColor,this.BorderColor=So.FloatTooltip.BorderColor,this.TextColor=So.FloatTooltip.TextColor,this.ValueColor=So.FloatTooltip.ValueColor,this.VolColor=So.FloatTooltip.VolColor,this.AmountColor=So.FloatTooltip.AmountColor,this.TurnoverRateColor=So.FloatTooltip.TurnoverRateColor,this.PositionColor=So.FloatTooltip.PositionColor,this.DateTimeColor=So.FloatTooltip.DateTimeColor,this.LanguageID=xo.LANGUAGE_CHINESE_ID,this.ValueAlign={Left:"UMyChart_Tooltip_Float_Text2_Span",MarginLeft:"UMyChart_Tooltip_Float_Text3_Span",Right:"UMyChart_Tooltip_Float_Text_Span"},this.AryData=[],this.AryText=[],this.KItemCache=null,this.KItemCacheID=null,this.Inital=function(t,e){this.HQChart=t,e&&(we.IsNumber(e.Style)&&(this.Style=e.Style),we.IsNumber(e.MaxRowCount)&&(this.MaxRowCount=e.MaxRowCount))},this.Destroy=function(){this.AryData=[],this.AryText=[],this.KItemCache=null,this.KItemCacheID=null,this.DivDialog&&(document.body.removeChild(this.DivDialog),this.DivDialog=null)},this.Show=function(t,e){if(this.DivDialog&&this.HQChart){var a=this.HQChart.UIElement.getBoundingClientRect(),i=t+a.left,r=e+a.top,n=i+this.DivDialog.offsetWidth,o=r+this.DivDialog.offsetHeight;n+5>=window.innerWidth&&(i-=this.DivDialog.offsetWidth),o+5>=window.innerHeight&&(r=0),this.DivDialog.style.top=r+"px",this.DivDialog.style.left=i+"px","visible"!=this.DivDialog.style.visibility&&(this.DivDialog.style.visibility="visible")}},this.Hide=function(){this.DivDialog&&(this.KItemCache=null,this.KItemCacheID=null,"hidden"!=this.DivDialog.style.visibility&&(this.DivDialog.style.visibility="hidden"))},this.Create=function(){var t=document.createElement("div");t.className="UMyChart_Tooltip_Float_Div";var e=document.createElement("table");e.className="UMyChart_Tooltip_Float_Table",t.appendChild(e);var a=document.createElement("tbody");a.className="UMyChart_Tooltip_Float_Tbody",e.appendChild(a),this.AryData=[];for(var i=0;i<this.MaxRowCount;++i){var r={Tr:null,TitleSpan:null,TextSpan:null,TitleTd:null,TextTd:null},n=document.createElement("tr");n.className="UMyChart_Tooltip_Float_Group_Tr",a.appendChild(n),r.Tr=n;var o=document.createElement("td");o.className="UMyChart_Tooltip_Float_Title_Td",n.appendChild(o),r.TitleTd=o;var s=document.createElement("span");s.className="UMyChart_Tooltip_Float_Title_Span",s.innerText="æ é¢",o.appendChild(s),r.TitleSpan=s;var o=document.createElement("td");o.className="UMyChart_Tooltip_Float_Text_Td",n.appendChild(o),r.TextTd=o;var s=document.createElement("span");s.className="UMyChart_Tooltip_Float_Text_Span",s.innerText="æ°å¼",o.appendChild(s),r.TextSpan=s,this.AryData.push(r)}document.body.appendChild(t),this.DivDialog=t,this.UpdateStyle()},this.IsShow=function(){return!!this.DivDialog&&"visible"===this.DivDialog.style.visibility},this.IsEqualHQID=function(t){if(!this.KItemCache)return!1;if(!t)return!1;if(!this.KItemCache.Item)return!1;var e=this.KItemCache.Item;return this.KItemCache.Symbol==t.Symbol&&(e.Date==t.Date&&(!we.IsNumber(e.Time)||e.Time==t.Time))},this.UpdateStyle=function(){this.DivDialog&&(this.BGColor&&(this.DivDialog.style["background-color"]=this.BGColor),this.BorderColor&&(this.DivDialog.style["border-color"]=this.BorderColor))},this.Update=function(t){if(this.DivDialog)if(this.LanguageID=this.HQChart.LanguageID,1==t.DataType){var e=t.Tooltip;if(!e)return;0==e.Type?this.UpdateKLineToolitp(t):1==e.Type?this.UpdateKLineInfoTooltip(t):2==e.Type?this.UpdateTradeIndexTooltip(t):3==e.Type?this.UpdateMinuteInfoTooltip(t):4==e.Type?this.UpdatMultiSVGIconV2Tooltip(t):5==e.Type?this.UpdatChartOXTooltip(t):6==e.Type?this.UpdatChartScatterPlotTooltip(t):7==e.Type?this.UpdateChartDrawSVGTooltip(t):8==e.Type&&this.UpdateChartDrawSVGV2Tooltip(t)}else 2==t.DataType&&this.UpdateRealtimeHQTooltip(t)},this.UpdateRealtimeHQTooltip=function(t){if(this.KItemCache){var e={Symbol:t.Symbol,Name:this.KItemCache.Name,Item:t.Data,IsOverlay:this.KItemCache.IsOverlay},a=(0,Bn.default)(e),i=!1;this.KItemCacheID!=a&&(this.KItemCache=e,this.KItemCacheID=a,this.AryText=this.GetFormatKLineTooltipText(this.KItemCache),i=!0),i&&this.UpdateTableDOM()}},this.UpdateKLineToolitp=function(t){var e=t.Tooltip,a=t.Symbol,i=t.Name,r=!1;"Overlay-KLine"==e.ChartPaint.Name&&(a=e.ChartPaint.Symbol,i=e.ChartPaint.Title,r=!0);var n={Symbol:a,Name:i,Item:I(e.Data),IsOverlay:r},o=(0,Bn.default)(n),s=!1;if(this.KItemCacheID!=o&&(this.KItemCache=n,this.KItemCacheID=o,this.AryText=this.GetFormatKLineTooltipText(this.KItemCache),s=!0),s&&this.UpdateTableDOM(),t.Point){var l=t.Point.X,h=t.Point.Y+t.Point.YMove;this.Show(l,h)}},this.UpdateChartDrawSVGTooltip=function(t){var e=t.Tooltip;if(e.Data&&e.Data.Item&&e.Data.Item.Tooltip){var a=e.Data.Item.Tooltip,i=[],r={Text:"",HTMLTitle:a.Text,Color:this.ValueColor,IsMergeCell:!0};if(i.push(r),this.AryText=i,this.UpdateTableDOM(),t.Point){var n=t.Point.X,o=t.Point.Y+t.Point.YMove;this.Show(n,o)}}},this.UpdateChartDrawSVGV2Tooltip=function(t){var e=t.Tooltip;if(e.Data&&e.Data.Item&&e.Data.Item.Tooltip){var a=e.Data.Item.Tooltip.AryText;if(we.IsNonEmptyArray(a)){for(var i=[],r=0;r<a.length;++r){var n=a[r],o={Title:"",Text:"",Color:this.ValueColor,ClassName:this.ValueAlign.MarginLeft};n.TextColor&&(o.Color=n.TextColor),n.Title&&(o.Title=n.Title),n.Text&&(o.Text=n.Text),i.push(o)}if(this.AryText=i,this.UpdateTableDOM(),t.Point){var s=t.Point.X,l=t.Point.Y+t.Point.YMove;this.Show(s,l)}}}},this.UpdateTradeIndexTooltip=function(t){var e=t.Tooltip;if(e.Data&&e.Data.Data){var a=e.Data.Data,i=a.KData,r=[],n={Title:"æ¥æ",Text:we.FormatDateString(i.Date,"YYYY-MM-DD"),Color:this.ValueColor};if(r.push(n),we.IsNumber(i.Time)){var n={Title:"æ¶é´",Text:we.FormatTimeString(i.Time,"HH:MM"),Color:this.ValueColor};r.push(n)}var n={Title:"ææ åç§°:",Text:""+a.Name+a.Param,Color:this.ValueColor};r.push(n);var n={Title:"ä¹°åæ¹å:",Text:1==a.Type?"ä¹°å¥":"ååº",Color:1==a.Type?this.UpColor:this.DownColor};r.push(n);var n={};if(this.AryText=r,this.UpdateTableDOM(),t.Point){var o=t.Point.X,s=t.Point.Y+t.Point.YMove;this.Show(o,s)}}},this.UpdateMinuteInfoTooltip=function(t){var e=t.Tooltip;if(e.Data&&e.Data.Data&&e.Data.Data.Item){var a=e.Data.Data.Item,i=[],r={Title:"æ¥æ",Text:we.FormatDateString(a.Date,"YYYY-MM-DD"),Color:this.ValueColor};i.push(r);var r={Title:"æ¶é´",Text:we.FormatTimeString(a.Time,"HH:MM"),Color:this.ValueColor};i.push(r);var r={Title:"å¼å¨",Text:a.Title,Color:this.ValueColor};if(i.push(r),this.AryText=i,this.UpdateTableDOM(),t.Point){var n=t.Point.X,o=t.Point.Y+t.Point.YMove;this.Show(n,o)}}},this.UpdatMultiSVGIconV2Tooltip=function(t){var e=t.Tooltip;if(e.Data&&e.Data.Item){var a=e.Data.Item,i=[],r={Text:"",HTMLTitle:a.Text,Color:this.ValueColor,IsMergeCell:!0};if(i.push(r),this.AryText=i,this.UpdateTableDOM(),t.Point){var n=t.Point.X,o=t.Point.Y+t.Point.YMove;this.Show(n,o)}}},this.UpdatChartOXTooltip=function(t){var e=t.Tooltip;if(e.Data&&e.Data.Data){var a=e.Data.Data,i=this.HQChart.Period,r=[];if(tt.IsDayPeriod(i,!0)){var n=we.FormatDateString(a.Start.Date,"YYYY-MM-DD"),o=we.FormatDateString(a.End.Date,"YYYY-MM-DD");r.push({Title:"èµ·å§æ¶é´",Text:n,Color:this.ValueColor}),r.push({Title:"ç»ææ¶é´",Text:o,Color:this.ValueColor})}else if(tt.IsMinutePeriod(i,!0)){var n=we.FormatDateString(a.Start.Date),s=we.FormatTimeString(a.Start.Time,"HH:MM"),o=we.FormatDateString(a.End.Date),l=we.FormatTimeString(a.End.Time,"HH:MM");r.push({Title:"èµ·å§æ¶é´",Text:n+" "+s,Color:this.ValueColor}),r.push({Title:"ç»ææ¶é´",Text:o+" "+l,Color:this.ValueColor})}if(this.AryText=r,this.UpdateTableDOM(),t.Point){var h=t.Point.X,u=t.Point.Y+t.Point.YMove;this.Show(h,u)}}},this.UpdateTableDOM=function(){var t=0;for(t=0;t<this.AryText.length&&t<this.MaxRowCount;++t){var e=this.AryText[t],a=this.AryData[t];e.HTMLTitle?a.TitleSpan.innerHTML=e.HTMLTitle:a.TitleSpan.innerText=e.Title,a.TitleSpan.style.color=this.TextColor,e.HTMLText?a.TextSpan.innerHTML=e.HTMLText:a.TextSpan.innerText=e.Text,a.TextSpan.style.color=e.Color,a.TextTd.style.color=e.Color,e.ClassName?a.TextSpan.className=e.ClassName:a.TextSpan.className!=this.ValueAlign.Right&&(a.TextSpan.className=this.ValueAlign.Right),e.IsMergeCell?(a.TitleTd.colspan=2,a.TextTd.style.display="none"):(1!=a.TitleTd.colspan&&(a.TitleTd.colspan=1),a.TextTd.style.display=""),a.Tr.style.display="",a.Tr2&&(a.Tr2.style.display="none")}for(;t<this.MaxRowCount;++t){var a=this.AryData[t];a.Tr.style.display="none",a.Tr2&&(a.Tr2.style.display="none")}},this.GetFormatKLineTooltipText=function(t){var e=t.Item,a=t.Symbol,i=a.toUpperCase(),r=sr(a),n=this.ForamtDate(e.Date,"YYYY/MM/DD/W","FloatTooltip-Date"),o=null;we.IsNumber(e.Time)&&(o=this.FormatTime(e.Time,this.HQChart.Period,null,"FloatTooltip-Time"));var s=null;t.IsOverlay&&(s={Title:"",Text:t.Name,Color:this.TextColor,ClassName:this.ValueAlign.Left});var l=e.YClose,h=[this.ForamtPrice(e.Open,l,r,"FloatTooltip-Open"),this.ForamtPrice(e.High,l,r,"FloatTooltip-High"),this.ForamtPrice(e.Low,l,r,"FloatTooltip-Low"),this.ForamtPrice(e.Close,l,r,"FloatTooltip-Close"),this.ForamtPrice(e.YClose,e.YClose,r,"FloatTooltip-YClose"),this.FormatVol(e.Vol,"FloatTooltip-Vol"),this.FormatAmount(e.Amount,"FloatTooltip-Amount"),this.FormatIncrease(e.Close,l,r,"FloatTooltip-Increase"),this.FormatAmplitude(e.High,e.Low,l,r,"FloatTooltip-Amplitude")];o&&h.unshift(o),h.unshift(n),s&&h.unshift(s),wo.IsSHSZStockA(i)&&e.FlowCapital>0&&h.push(this.FormatExchange(e.Vol,e.FlowCapital,"FloatTooltip-Exchange")),wo.IsFutures(i)&&(h.push(this.FormatPosition(e.Position,"FloatTooltip-Position")),h.push(this.ForamtFClose(e.FClose,r,"FloatTooltip-FClose")),h.push(this.ForamtFClose(e.YFClose,r,"FloatTooltip-YSettlePrice")));var u=this.HQChart.GetEventCallback(Kn.ON_FORMAT_KLINE_FLOAT_TOOLTIP);if(u&&u.Callback){var C={AryText:h,Data:t,HQChart:this.HQChart};u.Callback(u,C,this)}return h},this.UpdateKLineInfoTooltip=function(t){for(var e=t.Tooltip,a=t.Symbol,i=sr(a),r=e.Data.Data,n=[],o=0;o<r.length;++o){var s=r[o];switch(s.InfoType){case to.BLOCKTRADING:this.FormatBlockTradingText(s,i,n);break;case to.TRADEDETAIL:this.FormatTradeDetailText(s,i,n);break;case to.RESEARCH:this.FormatResearchText(s,n);break;case to.PFORECAST:this.FormatPerformanceForecastText(s,n);break;default:this.FormatDefaultKLineInfoText(s,n)}}var l=this.HQChart.GetEventCallback(Kn.ON_FORMAT_KLINE_INFO_FLOAT_TOOLTIP);if(l&&l.Callback){var h={AryText:n,Data:t,HQChart:this.HQChart};l.Callback(l,h,this)}if(this.AryText=n,this.UpdateTableDOM(),t.Point){var u=t.Point.X,C=t.Point.Y+t.Point.YMove;this.Show(u,C)}},this.UpdatChartScatterPlotTooltip=function(t){var e=t.Tooltip;if(e.Data&&e.Data.Data&&e.Data.Data.Tooltip){for(var a=e.Data.Data.Tooltip,i=[],r=0;r<a.length;++r){var n=a[r];if(n.Text||n.Title){var o={Title:"",Text:"",Color:this.ValueColor};n.Title&&(o.Title=n.Title),n.Text&&(o.Text=n.Text),n.TextColor&&(o.Color=n.TextColor),i.push(o)}}if(this.AryText=i,this.UpdateTableDOM(),t.Point){var s=t.Point.X,l=t.Point.Y+t.Point.YMove;this.Show(s,l)}}},this.FormatDefaultKLineInfoText=function(t,e){var a,i=we.FormatDateString(t.Date,"YYYY-MM-DD");if(we.IsNumber(t.Time)){a=i+" "+we.FormatTimeString(t.Time)}else a=i;var t={Title:a,Text:t.Title,Color:this.ValueColor,ClassName:this.ValueAlign.MarginLeft};e.push(t)},this.FormatBlockTradingText=function(t,e,a){var i={Title:"",Text:"å¤§å®äº¤æ",Color:this.TextColor,ClassName:this.ValueAlign.Left};a.push(i);var i={Title:"æ¥æ",Text:we.FormatDateString(t.Date,"YYYY-MM-DD"),Color:this.ValueColor};a.push(i);var r=t.ExtendData,i={Title:"æäº¤ä»·:",Text:r.Price.toFixed(e),Color:this.ValueColor};a.push(i);var i={Title:"æ¶çä»·:",Text:r.ClosePrice.toFixed(e),Color:this.ValueColor};a.push(i);var i={Title:"æº¢æä»·ç:",Text:r.Premium.toFixed(2),Color:this.GetColor(r.Premium,0)};a.push(i);var i={Title:"æäº¤é:",Text:we.FormatValueStringV2(r.Vol,0,2,this.LanguageID),Color:this.VolColor};a.push(i)},this.FormatTradeDetailText=function(t,e,a){if(t.ExtendData){var i=t.ExtendData;if(we.IsNonEmptyArray(i.Detail)){var r={Title:"æ¥æ",Text:we.FormatDateString(t.Date,"YYYY-MM-DD"),Color:this.ValueColor,ClassName:this.ValueAlign.MarginLeft};a.push(r);for(var n=0;n<i.Detail.length;++n){var o=i.Detail[n];if(0==n)var r={Title:"ä¸æ¦åå :",Text:o.TypeExplain,Color:this.ValueColor,ClassName:this.ValueAlign.MarginLeft};else var r={Title:"",Text:o.TypeExplain,Color:this.ValueColor,ClassName:this.ValueAlign.MarginLeft};a.push(r)}if(i.FWeek){var s=i.FWeek.Week1;if(we.IsNumber(s)){var r={Title:"ä¸å¨åæ¶¨å¹:",Text:s.toFixed(2)+"%",Color:this.GetColor(s,0),ClassName:this.ValueAlign.MarginLeft};a.push(r)}var s=i.FWeek.Week4;if(we.IsNumber(s)){var r={Title:"åå¨åæ¶¨å¹:",Text:s.toFixed(2)+"%",Color:this.GetColor(s,0),ClassName:this.ValueAlign.MarginLeft};a.push(r)}}}}},this.FormatResearchText=function(t,e){if(t.ExtendData){var a=t.ExtendData,i={Title:"æ¥æ",Text:we.FormatDateString(t.Date,"YYYY-MM-DD"),Color:this.ValueColor,ClassName:this.ValueAlign.MarginLeft};if(e.push(i),we.IsNonEmptyArray(a.Level)){for(var r="",n=0;n<a.Level.length;++n){var o=a.Level[n];r.length>0&&(r+=","),0==o?r+="è¯å¸ä»£è¡¨":1==o?r+="è£ç§":2==o?r+="æ»ç»ç":3==o&&(r+="è£äºé¿")}var i={Title:"æ¥å¾äººå:",Text:r,Color:this.ValueColor,ClassName:this.ValueAlign.MarginLeft};e.push(i)}else{var i={Title:"æ¥å¾äººå",Text:"----",Color:this.ValueColor,ClassName:this.ValueAlign.MarginLeft};e.push(i)}if(a.Type){var i={Title:"",Text:a.Type,Color:this.ValueColor,ClassName:this.ValueAlign.MarginLeft};e.push(i)}}},this.FormatPerformanceForecastText=function(t,e){if(t.ExtendData){var a=t.ExtendData,i=a.ReportDate;if(i){var r=parseInt(i/1e4),n=i%1e4,o="----";1231==n?o="å¹´æ¥":331==n?o="ä¸å­£åº¦æ¥":630==n?o="åå¹´åº¦æ¥":930==n&&(o="ä¸å­£åº¦æ¥");var s={Title:"ä¸ç»©é¢å:",Text:t.Title,Color:this.ValueColor,ClassName:this.ValueAlign.MarginLeft};e.push(s);var s={Title:"å¹´ä»½:",Text:""+r,Color:this.ValueColor,ClassName:this.ValueAlign.MarginLeft};e.push(s);var s={Title:"ç±»å:",Text:o,Color:this.ValueColor,ClassName:this.ValueAlign.MarginLeft};e.push(s)}}},this.ForamtPrice=function(t,e,a,i){var r={Title:bo.GetText(i,this.LanguageID),Text:"--.--",Color:this.ValueColor};return we.IsNumber(t)?(r.Text=t.toFixed(a),r.Color=this.GetColor(t,e),r):r},this.ForamtValue=function(t,e,a){var i={Title:bo.GetText(a,this.LanguageID),Text:"--",Color:this.ValueColor};return we.IsNumber(t)?(i.Text=we.FormatValueStringV2(t,e,2,this.LanguageID),i):i},this.FormatVol=function(t,e){var a={Title:bo.GetText(e,this.LanguageID),Text:"--",Color:this.VolColor};return we.IsNumber(t)?(a.Text=we.FormatValueStringV2(t,0,2,this.LanguageID),a):a},this.FormatAmount=function(t,e){var a={Title:bo.GetText(e,this.LanguageID),Text:"--",Color:this.AmountColor};return we.IsNumber(t)?(a.Text=we.FormatValueString(t,2,this.LanguageID),a):a},this.FormatIncrease=function(t,e,a,i){var r={Title:bo.GetText(i,this.LanguageID),Text:"--.--",Color:this.ValueColor};if(!we.IsNumber(t)||!we.IsNumber(e))return r;var n=(t-e)/e;return r.Text=(100*n).toFixed(2)+"%",r.Color=this.GetColor(n,0),r},this.FormatRisefall=function(t,e,a,i){var r={Title:bo.GetText(i,this.LanguageID),Text:"--.--",Color:this.ValueColor};if(!we.IsNumber(t)||!we.IsNumber(e))return r;var n=t-e;return r.Text=""+n.toFixed(a),r.Color=this.GetColor(n,0),r},this.FormatAmplitude=function(t,e,a,i,r){var n={Title:bo.GetText(r,this.LanguageID),Text:"--.--",Color:this.ValueColor};if(!we.IsNumber(t)||!we.IsNumber(e)||!we.IsNumber(a))return n;var o=t-e,s=o/a;return n.Text=(100*s).toFixed(2)+"%",n.Color=this.GetColor(s,0),n},this.ForamtDate=function(t,e,a){var i={Title:bo.GetText("DialogTooltip-Date",this.LanguageID),Text:"----/--/--",Color:this.DateTimeColor};return we.IsNumber(t)?(i.Text=we.FormatDateString(t,e),i):i},this.FormatTime=function(t,e,a,i){var r={Title:bo.GetText(i,this.LanguageID),Text:"--:--",Color:this.DateTimeColor};return we.IsNumber(t)?(a||(a="HH:MM",tt.IsMinutePeriod(e,!0)?a="HH:MM":tt.IsSecondPeriod(e)?a="HH:MM:SS":tt.IsMilliSecondPeriod(e)&&(a="HH:MM:SS.fff")),r.Text=we.FormatTimeString(t,a),r):r},this.FormatExchange=function(t,e,a){var i={Title:bo.GetText(a,this.LanguageID),Text:"--.--",Color:this.DateTimeColor};if(!we.IsNumber(t)||!we.IsNumber(e)||0==e)return i;var r=t/e*100;return i.Text=r.toFixed(2)+"%",i},this.FormatPosition=function(t,e){var a={Title:bo.GetText(e,this.LanguageID),Text:"--.--",Color:this.PositionColor};return we.IsNumber(t)?(a.Text=t.toFixed(0),a):a},this.ForamtFClose=function(t,e,a){var i={Title:bo.GetText(a,this.LanguageID),Text:"--.--",Color:this.DateTimeColor};return we.IsNumber(t)?(i.Text=t.toFixed(e),i):i},this.GetColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchangeColor},this.ReloadResource=function(t){this.UpColor=So.UpTextColor,this.DownColor=So.DownTextColor,this.UnchangeColor=So.UnchagneTextColor,this.BGColor=So.FloatTooltip.BGColor,this.BorderColor=So.FloatTooltip.BorderColor,this.TextColor=So.FloatTooltip.TextColor,this.ValueColor=So.FloatTooltip.ValueColor,this.VolColor=So.FloatTooltip.VolColor,this.AmountColor=So.FloatTooltip.AmountColor,this.TurnoverRateColor=So.FloatTooltip.TurnoverRateColor,this.PositionColor=So.FloatTooltip.PositionColor,this.DateTimeColor=So.FloatTooltip.DateTimeColor,this.DivDialog&&this.UpdateStyle()}}function fn(){this.DivDialog=null,this.DragTitle=null,this.HQChart=null,this.UpColor=So.UpTextColor,this.DownColor=So.DownTextColor,this.UnchangeColor=So.UnchagneTextColor,this.TitleColor=So.DialogSelectRect.TitleColor,this.TitleBGColor=So.DialogSelectRect.TitleBGColor,this.BGColor=So.DialogSelectRect.BGColor,this.BorderColor=So.DialogSelectRect.BorderColor,this.TextColor=So.DialogSelectRect.TextColor,this.ValueColor=So.DialogSelectRect.ValueColor,this.VolColor=So.DialogSelectRect.VolColor,this.AmountColor=So.DialogSelectRect.AmountColor,this.TurnoverRateColor=So.DialogSelectRect.TurnoverRateColor,this.PositionColor=So.DialogSelectRect.PositionColor,this.MaxRowCount=10,this.AryData=[],this.DateTimeBox={Start:{SpanText:null,SpanValue:null},End:{SpanText:null,SpanValue:null}},this.ShowData,this.SelectData,this.Inital=function(t,e){this.HQChart=t},this.Destroy=function(){this.AryData=[],this.ShowData=null,this.DateTimeBox={Start:{SpanText:null,SpanValue:null},End:{SpanText:null,SpanValue:null}},this.DivDialog&&(document.body.removeChild(this.DivDialog),this.DivDialog=null)},this.Create=function(){var t=this,e=document.createElement("div");e.className="UMyChart_SelectRect_Dialog_Div";var a=document.createElement("div");a.className="UMyChart_SelectRect_Title_Div",a.onmousedown=function(e){t.OnMouseDownTitle(e)};var i=document.createElement("div");i.className="UMyChart_SelectRect_Name_Div",i.innerText="åºé´ç»è®¡",a.appendChild(i);var r=document.createElement("div");r.className="UMyChart_SelectRect_Close_Div",r.innerText="x",r.onmousedown=function(e){t.Close(e)},a.appendChild(r),e.appendChild(a);var n=document.createElement("div");n.className="UMyChart_SelectRect_DateTime_Div";var o=document.createElement("div");n.append(o);var s=document.createElement("span");s.className="UMyChart_SelectRect_DateTitle_Span",s.innerText="å¼å§:",o.appendChild(s),this.DateTimeBox.Start.SpanText=s;var l=document.createElement("span");l.className="UMyChart_SelectRect_DateValue_Span",l.innerText="--/--",o.appendChild(l),this.DateTimeBox.Start.SpanValue=l;var h=document.createElement("span");h.className="UMyChart_SelectRect_ArrowButton_Span",h.innerText="<",h.onmousedown=function(e){t.MoveStartDate(-1)},o.appendChild(h);var h=document.createElement("span");h.className="UMyChart_SelectRect_ArrowButton_Span",h.innerText=">",h.onmousedown=function(e){t.MoveStartDate(1)},o.appendChild(h);var u=document.createElement("div");n.append(u);var s=document.createElement("span");s.className="UMyChart_SelectRect_DateTitle_Span",s.innerText="ç»æ:",u.appendChild(s),this.DateTimeBox.End.SpanText=s;var l=document.createElement("span");l.className="UMyChart_SelectRect_DateValue_Span",l.innerText="--/--",u.appendChild(l),this.DateTimeBox.SpanEnd=l,this.DateTimeBox.End.SpanValue=l;var h=document.createElement("span");h.className="UMyChart_SelectRect_ArrowButton_Span",h.innerText="<",h.onmousedown=function(e){t.MoveEndDate(-1)},u.appendChild(h);var h=document.createElement("span");h.className="UMyChart_SelectRect_ArrowButton_Span",h.innerText=">",h.onmousedown=function(e){t.MoveEndDate(1)},u.appendChild(h),e.appendChild(n);var C=document.createElement("table");C.className="UMyChart_SelectRect_Table",e.appendChild(C);var c=document.createElement("tbody");c.className="UMyChart_SelectRect_Tbody",C.appendChild(c);for(var f=0;f<this.MaxRowCount;++f){var d={Tr:null,AryItem:[]},D=document.createElement("tr");D.className="UMyChart_SelectRect_Tr",c.appendChild(D),d.Tr=D;for(var m=0;m<3;++m){var p={Td:null,LeftSpan:null,RightSpan:null},v=document.createElement("td");v.className="UMyChart_SelectRect_Td",p.Td=v,D.appendChild(v);var g=document.createElement("span");g.className="UMyChart_SelectRect_Item_Left_Span",g.innerText="æ°å¼",p.LeftSpan=g,v.appendChild(g);var g=document.createElement("span");g.className="UMyChart_SelectRect_Item_Right_Span",g.innerText="--",p.RightSpan=g,v.appendChild(g),d.AryItem.push(p)}this.AryData.push(d)}document.body.appendChild(e),this.DivDialog=e,this.UpdateStyle()},this.Close=function(t){this.DivDialog&&(this.DivDialog.style.visibility="hidden",this.ShowData=null,this.SelectData=null)},this.MoveStartDate=function(t){if(this.DivDialog&&this.HQChart&&0!=t&&this.SelectData){var e=this.SelectData,a=!1;if(t>0){var i=e.Start,r=e.End;for(n=0;n<t&&i<r;++n)++i;e.Start!=i&&(e.Start=i,a=!0)}else{t=Math.abs(t);for(var i=e.Start,r=e.End,n=0;n<t&&i>0;++n)--i;e.Start!=i&&(e.Start=i,a=!0)}a&&this.UpdateSelectRect(e)}},this.MoveEndDate=function(t){if(this.DivDialog&&0!=t&&this.SelectData){var e=this.SelectData,a=!1;if(t>0){var i=e.End,r=e.Start;for(n=0;n<t&&i<this.ShowData.DataCount;++n)++i;e.End!=i&&(e.End=i,a=!0)}else{t=Math.abs(t);for(var i=e.End,r=e.Start,n=0;n<t&&i>r;++n)--i;e.End!=i&&(e.End=i,a=!0)}a&&this.UpdateSelectRect(e)}},this.Show=function(t,e){if(this.DivDialog&&this.HQChart){var a=this.HQChart.Frame.ChartBorder.GetTop(),i=this.HQChart.Frame.ChartBorder.GetLeft(),r=this.HQChart.UIElement.getBoundingClientRect();i=i+r.left+5,a=a+r.top+10,we.IsNumber(t)&&we.IsNumber(e)&&(i=t,a=e);var n=t+this.DivDialog.offsetWidth,o=e+this.DivDialog.offsetHeight;n+5>=window.innerWidth&&(i=window.innerWidth-this.DivDialog.offsetWidth-5),o+5>=window.innerHeight&&(a=window.innerHeight-this.DivDialog.offsetHeight-5),this.DivDialog.style.top=a+"px",this.DivDialog.style.left=i+"px",this.DivDialog.style.visibility="visible"}},this.IsShow=function(){return!!this.DivDialog&&"visible"===this.DivDialog.style.visibility},this.OnMouseDownTitle=function(t){var e=this;if(this.DivDialog){var a={X:t.clientX,Y:t.clientY};a.YOffset=t.clientX-this.DivDialog.offsetLeft,a.XOffset=t.clientY-this.DivDialog.offsetTop,this.DragTitle=a,document.onmousemove=function(t){e.DocOnMouseMoveTitle(t)},document.onmouseup=function(t){e.DocOnMouseUpTitle(t)}}},this.DocOnMouseMoveTitle=function(t){if(this.DragTitle){var e=t.clientX-this.DragTitle.YOffset,a=t.clientY-this.DragTitle.XOffset,i=e+this.DivDialog.offsetWidth,r=a+this.DivDialog.offsetHeight;i+5>=window.innerWidth&&(e=window.innerWidth-this.DivDialog.offsetWidth-5),r+5>=window.innerHeight&&(a=window.innerHeight-this.DivDialog.offsetHeight-5),this.DivDialog.style.left=e+"px",this.DivDialog.style.top=a+"px",t.preventDefault&&t.preventDefault()}},this.DocOnMouseUpTitle=function(t){this.DragTitle=null,this.onmousemove=null,this.onmouseup=null},this.ReloadResource=function(t){if(this.UpColor=So.UpTextColor,this.DownColor=So.DownTextColor,this.UnchangeColor=So.UnchagneTextColor,this.TitleColor=So.DialogSelectRect.TitleColor,this.TitleBGColor=So.DialogSelectRect.TitleBGColor,this.BGColor=So.DialogSelectRect.BGColor,this.BorderColor=So.DialogSelectRect.BorderColor,this.TextColor=So.DialogSelectRect.TextColor,this.ValueColor=So.DialogSelectRect.ValueColor,this.VolColor=So.DialogSelectRect.VolColor,this.AmountColor=So.DialogSelectRect.AmountColor,this.TurnoverRateColor=So.DialogSelectRect.TurnoverRateColor,this.PositionColor=So.DialogSelectRect.PositionColor,this.DivDialog&&(this.UpdateStyle(),this.SelectData)){var e=this.SelectData;this.HQChart.UpdateSelectRect(e.Start,e.End);var a=this.CalculateKLineData({SelectData:e});this.FormatKLineText(a),this.ShowData=a,this.UpdateTableDOM(a)}},this.UpdateStyle=function(){if(this.DivDialog){if(this.BGColor&&(this.DivDialog.style["background-color"]=this.BGColor),this.BorderColor&&(this.DivDialog.style["border-color"]=this.BorderColor),this.DateTimeBox.Start){var t=this.DateTimeBox.Start;t.SpanText.style.color=this.TextColor,t.SpanValue.style.color=this.ValueColor}if(this.DateTimeBox.End){var t=this.DateTimeBox.End;t.SpanText.style.color=this.TextColor,t.SpanValue.style.color=this.ValueColor}}},this.UpdateTableDOM=function(t){for(var e=0,e=0,a=0,i=0;e<this.AryData.length&&i<t.AryText.length;++e){var r=this.AryData[e];for(a=0;a<r.AryItem.length&&!(i>=t.AryText.length);++a,++i){var n=r.AryItem[a],o=t.AryText[i];n.LeftSpan.innerText=o.Title,n.LeftSpan.style.color=this.TextColor,n.RightSpan.innerText=o.Text,n.RightSpan.style.color=o.Color}r.Tr.style.display=""}for(;e<this.AryData.length;++e){var r=this.AryData[e];r.Tr.style.display="none"}this.DateTimeBox.Start.SpanValue&&(this.DateTimeBox.Start.SpanValue.innerText=t.Date.Start.Text),this.DateTimeBox.End.SpanValue&&(this.DateTimeBox.End.SpanValue.innerText=t.Date.End.Text)},this.UpdateSelectRect=function(t){this.HQChart.UpdateSelectRect(t.Start,t.End);var e=null;"KLineChartContainer"==this.HQChart.ClassName?(e=this.CalculateKLineData({SelectData:t}),this.FormatKLineText(e)):"MinuteChartContainer"==this.HQChart.ClassName&&(e=this.CalculateMinuteData({SelectData:t}),this.FormatMinuteText(e)),e&&(this.ShowData=e,this.UpdateTableDOM(e))},this.Update=function(t){if(this.DivDialog){var e;"KLineChartContainer"==this.HQChart.ClassName?(e=this.CalculateKLineData(t),this.FormatKLineText(e)):"MinuteChartContainer"==this.HQChart.ClassName&&(e=this.CalculateMinuteData(t),this.FormatMinuteText(e)),e&&(this.ShowData=e,this.SelectData=t.SelectData,this.UpdateTableDOM(e),this.IsShow()||this.Show(t.X,t.Y))}},this.CreateEmptyShowData=function(){return{Open:null,Close:null,High:null,Low:null,YClose:null,Vol:0,Amount:0,Date:{Start:{Time:null,Date:null,Text:""},End:{Time:null,Date:null,Text:""}},Count:0,KLine:{Up:0,Down:0,Unchanged:0},AryText:[],DataCount:0}},this.CalculateKLineData=function(t){var e=t.SelectData,a=e.Data,i=e.Start,r=e.End,n=this.CreateEmptyShowData();n.DataCount=a.Data.length;for(var o=i;o<a.Data.length&&o<=r;++o){var s=a.Data[o];++n.Count,!we.IsNumber(n.Open)&&we.IsNumber(s.Open)&&(n.Open=s.Open),we.IsNumber(s.Close)&&(n.Close=s.Close),we.IsNumber(s.Vol)&&(n.Vol+=s.Vol),we.IsNumber(s.Amount)&&(n.Amount+=s.Amount),we.IsNumber(s.High)&&(!we.IsNumber(n.High)||n.High<s.High)&&(n.High=s.High),we.IsNumber(s.Low)&&(!we.IsNumber(n.Low)||n.Low>s.Low)&&(n.Low=s.Low),we.IsNumber(s.Open)&&we.IsNumber(s.Close)&&(s.Close>s.Open?++n.KLine.Up:s.Close<s.Open?++n.KLine.Down:++n.KLine.Unchanged),we.IsNumber(s.Date)&&(n.Date.End.Date=s.Date,we.IsNumber(n.Date.Start.Date)||(n.Date.Start.Date=s.Date)),we.IsNumber(s.Time)&&(n.Date.End.Time=s.Time,we.IsNumber(n.Date.Start.Time)||(n.Date.Start.Time=s.Time))}return n},this.FormatKLineText=function(t){if(t){var e=sr(this.HQChart.Symbol);tt.IsMinutePeriod(this.HQChart.Period,!0)?(t.Date.Start.Text=we.FormatDateString(t.Date.Start.Date)+" "+we.FormatTimeString(t.Date.Start.Time,"HH:MM"),t.Date.End.Text=we.FormatDateString(t.Date.End.Date)+" "+we.FormatTimeString(t.Date.End.Time,"HH:MM")):tt.IsSecondPeriod(this.HQChart.Period)||tt.IsTickPeriod(this.HQChart.Period)?(t.Date.Start.Text=we.FormatDateString(t.Date.Start.Date)+" "+we.FormatTimeString(t.Date.Start.Time,"HH:MM:SS"),t.Date.End.Text=we.FormatDateString(t.Date.End.Date)+" "+we.FormatTimeString(t.Date.End.Time,"HH:MM:SS")):(t.Date.Start.Text=we.FormatDateString(t.Date.Start.Date),t.Date.End.Text=we.FormatDateString(t.Date.End.Date)),t.AryText.push(this.ForamtPrice(t.Open,t.Open,e,"DialogSelectRect-StartPrice")),t.AryText.push(this.ForamtPrice(t.Close,t.Open,e,"DialogSelectRect-EndPrice")),t.AryText.push(this.FormatIncrease(t.Close,t.Open,"DialogSelectRect-Increase")),t.AryText.push(this.ForamtPrice(t.High,t.Open,e,"DialogSelectRect-High")),t.AryText.push(this.ForamtPrice(t.Low,t.Open,e,"DialogSelectRect-Low")),t.AryText.push(this.FormatAmplitude(t.High,t.Low,t.Open,"DialogSelectRect-Amplitude")),t.AryText.push(this.FormatVol(t.Vol,"DialogSelectRect-Vol")),t.AryText.push(this.FormatAmount(t.Amount,"DialogSelectRect-Amount")),t.AryText.push(this.FormatNumber(t.Count,null,0,"DialogSelectRect-DataCount")),t.AryText.push(this.FormatNumber(t.KLine.Up,this.UpColor,0,"DialogSelectRect-Up")),t.AryText.push(this.FormatNumber(t.KLine.Down,this.DownColor,0,"DialogSelectRect-Down")),t.AryText.push(this.FormatNumber(t.KLine.Unchanged,this.UnchangeColor,0,"DialogSelectRect-Unchanged"))}},this.CalculateMinuteData=function(t){var e=t.SelectData,a=e.Data,i=e.Start,r=e.End,n=this.CreateEmptyShowData();n.DataCount=a.Data.length;for(var o=i;o<a.Data.length&&o<=r;++o){var s=a.Data[o];++n.Count,!we.IsNumber(n.Open)&&we.IsNumber(s.Open)&&(n.Open=s.Open),we.IsNumber(s.Close)&&(n.Close=s.Close),we.IsNumber(s.Vol)&&(n.Vol+=s.Vol),we.IsNumber(s.Amount)&&(n.Amount+=s.Amount),we.IsNumber(s.High)&&(!we.IsNumber(n.High)||n.High<s.High)&&(n.High=s.High),we.IsNumber(s.Low)&&(!we.IsNumber(n.Low)||n.Low>s.Low)&&(n.Low=s.Low),we.IsNumber(s.Open)&&we.IsNumber(s.Close)&&(s.Close>s.Open?++n.KLine.Up:s.Close<s.Open?++n.KLine.Down:++n.KLine.Unchanged),we.IsNumber(s.Date)&&(n.Date.End.Date=s.Date,we.IsNumber(n.Date.Start.Date)||(n.Date.Start.Date=s.Date)),we.IsNumber(s.Time)&&(n.Date.End.Time=s.Time,we.IsNumber(n.Date.Start.Time)||(n.Date.Start.Time=s.Time))}return n},this.FormatMinuteText=function(t){if(t){var e=sr(this.HQChart.Symbol);t.Date.Start.Text=we.FormatDateString(t.Date.Start.Date)+" "+we.FormatTimeString(t.Date.Start.Time,"HH:MM"),t.Date.End.Text=we.FormatDateString(t.Date.End.Date)+" "+we.FormatTimeString(t.Date.End.Time,"HH:MM"),t.AryText.push(this.ForamtPrice(t.Open,t.Open,e,"DialogSelectRect-StartPrice")),t.AryText.push(this.ForamtPrice(t.Close,t.Open,e,"DialogSelectRect-EndPrice")),t.AryText.push(this.FormatIncrease(t.Close,t.Open,"DialogSelectRect-Increase")),t.AryText.push(this.ForamtPrice(t.High,t.Open,e,"DialogSelectRect-High")),t.AryText.push(this.ForamtPrice(t.Low,t.Open,e,"DialogSelectRect-Low")),t.AryText.push(this.FormatAmplitude(t.High,t.Low,t.Open,"DialogSelectRect-Amplitude")),t.AryText.push(this.FormatVol(t.Vol,"DialogSelectRect-Vol")),t.AryText.push(this.FormatAmount(t.Amount,"DialogSelectRect-Amount")),t.AryText.push(this.FormatNumber(t.Count,null,0,"DialogSelectRect-DataCount"))}},this.GetColor=function(t,e){return t>e?this.UpColor:t<e?this.DownColor:this.UnchangeColor},this.GetPriceColor=function(t,e){return this.GetColor(t,e)},this.FormatEmpty=function(){return{Title:"",Text:"",Color:this.ValueColor}},this.FormatNumber=function(t,e,a,i,r){var n={Title:bo.GetText(i,this.LanguageID),Text:"----",Color:this.ValueColor};return we.IsNumber(t)?(n.Text=t.toFixed(a),e&&(n.Color=e),n):n},this.ForamtPrice=function(t,e,a,i){var r={Title:bo.GetText(i,this.LanguageID),Text:"--.--",Color:this.ValueColor};return we.IsNumber(t)?(r.Text=t.toFixed(a),r.Color=this.GetColor(t,e),r):r},this.FormatIncrease=function(t,e,a){var i={Title:bo.GetText(a,this.LanguageID),Text:"--.--",Color:this.ValueColor};if(!we.IsNumber(t)||!we.IsNumber(e))return i;var r=t-e,n=r/e;return i.Text=(100*n).toFixed(2)+"%",i.Color=this.GetColor(n,0),i},this.FormatAmplitude=function(t,e,a,i){var r={Title:bo.GetText(i,this.LanguageID),Text:"--.--",Color:this.ValueColor};if(!we.IsNumber(t)||!we.IsNumber(e)||!we.IsNumber(a))return r;var n=t-e,o=n/a;return r.Text=(100*o).toFixed(2)+"%",r.Color=this.GetColor(o,0),r},this.FormatVol=function(t,e){var a={Title:bo.GetText(e,this.LanguageID),Text:"--",Color:this.VolColor};return we.IsNumber(t)?(a.Text=we.FormatValueStringV2(t,0,2,this.LanguageID),a):a},this.FormatAmount=function(t,e){var a={Title:bo.GetText(e,this.LanguageID),Text:"--",Color:this.AmountColor};return we.IsNumber(t)?(a.Text=we.FormatValueString(t,2,this.LanguageID),a):a}}function dn(){this.DivDialog=null,this.DragTitle=null,this.TitleBox=null,this.InputDom=null,this.Style=0,this.HQChart=null,this.OpData=null,this.TitleColor=So.DialogSearchIndex.TitleColor,this.TitleBGColor=So.DialogSearchIndex.TitleBGColor,this.BGColor=So.DialogSearchIndex.BGColor,this.BorderColor=So.DialogSearchIndex.BorderColor,this.IndexNameColor=So.DialogSearchIndex.IndexNameColor,this.GroupNameColor=So.DialogSearchIndex.GroupNameColor,this.InputTextColor=So.DialogSearchIndex.InputTextColor,this.MaxRowCount=30,this.ColCount=3,this.MaxGroupCount=10,this.AryData=[],this.AryGroup=[],this.IndexData=dn.GetDefaultIndexData(),this.Inital=function(t,e){this.HQChart=t,e&&(we.IsNumber(e.Style)&&(this.Style=e.Style),e.IndexData&&(this.IndexData=e.IndexData),we.IsNumber(e.MaxRowCount)&&(this.MaxRowCount=e.MaxRowCount))},this.Destroy=function(){this.AryData=[],this.AryGroup=[],this.IndexData=null,this.InputDom=null,this.HQChart=null,this.DivDialog&&(document.body.removeChild(this.DivDialog),this.DivDialog=null)},this.OnClickColseButton=function(t){this.Close(t)},this.SetOpData=function(t){this.OpData=t},this.Close=function(t){this.OpData=null,this.DivDialog&&(this.DivDialog.style.visibility="hidden")},this.OnMouseDownTitle=function(t){var e=this;if(this.DivDialog){var a={X:t.clientX,Y:t.clientY};a.YOffset=t.clientX-this.DivDialog.offsetLeft,a.XOffset=t.clientY-this.DivDialog.offsetTop,this.DragTitle=a,document.onmousemove=function(t){e.DocOnMouseMoveTitle(t)},document.onmouseup=function(t){e.DocOnMouseUpTitle(t)}}},this.DocOnMouseMoveTitle=function(t){if(this.DragTitle){var e=t.clientX-this.DragTitle.YOffset,a=t.clientY-this.DragTitle.XOffset,i=e+this.DivDialog.offsetWidth,r=a+this.DivDialog.offsetHeight;i+5>=window.innerWidth&&(e=window.innerWidth-this.DivDialog.offsetWidth-5),r+5>=window.innerHeight&&(a=window.innerHeight-this.DivDialog.offsetHeight-5),this.DivDialog.style.left=e+"px",this.DivDialog.style.top=a+"px",t.preventDefault&&t.preventDefault()}},this.DocOnMouseUpTitle=function(t){this.DragTitle=null,this.onmousemove=null,this.onmouseup=null},this.Show=function(t,e,a){if(this.DivDialog){if(a||(a=this.IndexData.Data[0].Group.ID),this.UpdateGroupData(),this.ChangeGroup(a),this.OpData&&this.OpData.Title&&(this.TitleBox.DivName.innerText=this.OpData.Title),!we.IsNumber(t)||!we.IsNumber(e)){var i=this.HQChart.UIElement.getBoundingClientRect();t=i.left+(i.right-i.left-this.DivDialog.offsetWidth)/2,e=i.top+(i.bottom-i.top-this.DivDialog.offsetHeight)/2}this.InputDom.value="",this.DivDialog.style.visibility="visible",this.DivDialog.style.top=e+"px",this.DivDialog.style.left=t+"px"}},this.Create=function(){var t=this,e=document.createElement("div");e.className="UMyChart_SearchIndex_Dialog_Div";var a=document.createElement("div");a.className="UMyChart_SearchIndex_Title_Div",a.onmousedown=function(e){t.OnMouseDownTitle(e)},e.appendChild(a);var i=document.createElement("div");i.className="UMyChart_SearchIndex_Name_Div",i.innerText="ææ æç´¢",a.appendChild(i);var r=document.createElement("div");r.className="UMyChart_SearchIndex_Close_Div",r.innerText="x",r.onmousedown=function(e){t.OnClickColseButton(e)},a.appendChild(r);var n=document.createElement("div");n.className="UMyChart_SearchIndex_Frome_Div",e.appendChild(n);var o=document.createElement("div");o.className="UMyChart_SearchIndex_Input_Div",n.appendChild(o);var s=document.createElement("input");s.className="UMyChart_SearchIndex_Input",s.type="text",s.placeholder="è¾å¥ææ åç§°",s.addEventListener("input",function(e){t.OnInputSearch(e)}),o.appendChild(s),this.InputDom=s;var l=document.createElement("div");l.className="UMyChart_SearchIndex_Container_Div",e.appendChild(l);var h=document.createElement("div");h.className="UMyChart_SearchIndex_GroupList_Div",l.appendChild(h);for(var u=0,C=0;u<this.MaxGroupCount;++u){var c={Div:null,Span:null},f=document.createElement("div");f.className="UMyChart_SearchIndex_Group_Div",h.appendChild(f),c.Div=f;var d=document.createElement("span");d.className="UMyChart_SearchIndex_Group_Span",d.innerText="åç±»åç§°",f.appendChild(d),c.Span=d,d.onmousedown=function(e){t.OnClickGroup(e)},this.AryGroup.push(c)}var D=document.createElement("div");D.className="UMyChart_SearchIndex_Table_Div",l.appendChild(D);var m=document.createElement("table");m.className="UMyChart_SearchIndex_Table",D.appendChild(m);var p=document.createElement("tbody");p.className="UMyChart_SearchIndex_Tbody",m.appendChild(p),this.AryData=[];for(var u=0,C=0;u<this.MaxRowCount;++u){var v={Tr:null,AryCell:[]},g=document.createElement("tr");for(g.className="UMyChart_SearchIndex_Group_Tr",p.appendChild(g),v.Tr=g,C=0;C<this.ColCount;++C){var T=this.CreateCellDOM(u,C,g);v.AryCell.push(T)}this.AryData.push(v)}document.body.appendChild(e),this.DivName=i,this.DivDialog=e,this.TitleBox={DivTitle:a,DivName:i,DivColor:r},this.UpdateStyle()},this.CreateCellDOM=function(t,e,a){var i=this,r={Td:null,Span:null,RowID:t,ColID:e,IndexItem:null},n=document.createElement("td");n.className="UMyChart_SearchIndex_Text_Td",a.appendChild(n),r.Td=n;var o=document.createElement("span");return o.className="UMyChart_SearchIndex_Text_Span",o.innerText="ææ åç§°",o.onmousedown=function(t){i.OnClickIndex(t,r)},n.appendChild(o),r.Span=o,r},this.OnClickIndex=function(t,e){if(this.OpData&&e&&e.IndexItem)if(1==this.OpData.OpType){if(!we.IsNumber(this.OpData.WindowIndex))return;var a=e.IndexItem;if(0==a.Type)this.HQChart.ChangeIndex(this.OpData.WindowIndex,a.ID);else if(1==a.Type){var i={ID:a.ID,Name:a.Name,Script:a.Script,Args:a.Args};this.HQChart.ChangeScriptIndex(this.OpData.WindowIndex,i)}else if(2==a.Type){var r={API:{ID:a.ID,Name:a.Name,Args:a.Args,Url:"local"}};this.HQChart.ChangeAPIIndex(this.OpData.WindowIndex,r)}}else if(2==this.OpData.OpType){if(!we.IsNumber(this.OpData.WindowIndex))return;var a=e.IndexItem;if(0==a.Type){var n={WindowIndex:this.OpData.WindowIndex,IndexName:a.ID};this.HQChart.AddOverlayIndex(n)}else if(1==a.Type){var n={WindowIndex:this.OpData.WindowIndex,IndexName:a.ID,Name:a.Name,Script:a.Script,Args:a.Args};this.HQChart.AddOverlayIndex(n)}else if(2==a.Type){var n={WindowIndex:this.OpData.WindowIndex,API:{ID:a.ID,Name:a.Name,Args:a.Args,Url:"local"}};this.HQChart.AddOverlayIndex(n)}}else if(3==this.OpData.OpType){var a=e.IndexItem;if(0==a.Type)this.HQChart.AddIndexWindow(a.ID,this.OpData);else if(1==a.Type){var i={ID:a.ID,Name:a.Name,Script:a.Script,Args:a.Args};this.HQChart.AddScriptIndexWindow(i,this.OpData)}else if(2==a.Type){var i={API:{ID:a.ID,Name:a.Name,Args:a.Args,Url:"local"}};this.HQChart.AddAPIIndexWindow(i,this.OpData)}}},this.OnClickGroup=function(t){if(!t.target)return!1;var e=t.target.dataset.groupid;if(!e)return!1;this.ChangeGroup(e)},this.UpdateStyle=function(){this.DivDialog&&(this.BGColor&&(this.DivDialog.style["background-color"]=this.BGColor),this.BorderColor&&(this.DivDialog.style["border-color"]=this.BorderColor),this.TitleBGColor&&(this.TitleBox.DivTitle.style["background-color"]=this.TitleBGColor),this.TitleColor&&(this.TitleBox.DivName.style.color=this.TitleColor),this.InputTextColor&&(this.InputDom.style.color=this.InputTextColor))},this.ChangeGroup=function(t){if(this.IndexData&&we.IsNonEmptyArray(this.IndexData.Data)){for(var e=null,a=0;a<this.IndexData.Data.length;++a){var i=this.IndexData.Data[a];if(i.Group.ID==t){e=i;break}}e&&this.UpdateTableData(e)}},this.UpdateGroupData=function(){var t=0;for(t=0;t<this.IndexData.Data.length&&t<this.AryGroup.length;++t){var e=this.IndexData.Data[t],a=this.AryGroup[t];a.Span.innerText=e.Group.Name,a.Span.dataset.groupid=e.Group.ID,a.Span.dataset.groupname=e.Group.Name,a.Span.style.color=this.GroupNameColor,"none"==a.Div.style.display&&(a.Div.style.display="")}for(;t<this.AryGroup.length;++t){var a=this.AryGroup[t];a.Div.style.display="none"}},this.UpdateTableData=function(t){for(var e=0,a=0,i=0;e<this.AryData.length&&i<t.AryIndex.length;++e){var r=this.AryData[e],n=0;for(a=0;a<r.AryCell.length;++a){var o=r.AryCell[a];if(i<t.AryIndex.length){var s=t.AryIndex[i];o.Span.innerText=s.Name,o.Span.style.color=this.IndexNameColor,"none"==o.Td.style.display&&(o.Td.style.display=""),o.IndexItem=s,++i,++n}else o.Td.style.display="none"}n>0?"none"==r.Tr.style.display&&(r.Tr.style.display=""):r.Tr.style.display}for(;e<this.AryData.length;++e){var r=this.AryData[e];r.Tr.style.display="none"}},this.OnInputSearch=function(t){for(var e=t.target.value,a=[],i=this.SeachIndex(e),r=new Rn.default,n=0;n<i.length;++n){var o=i[n],l=o.ID+"-"+o.Type;r.add(l),a.push(o)}var h=new s,u=h.Search(e);if(we.IsNonEmptyArray(u))for(var n=0;n<u.length;++n){var C=u[n],l=C+"-0";if(!r.has(l)){var o={Name:C,ID:C,Type:0};a.push(o)}}this.UpdateTableData({AryIndex:a})},this.SeachIndex=function(t){if(!this.IndexData||!we.IsNonEmptyArray(this.IndexData.Data))return[];for(var e=[],a=t.toUpperCase(),i=0,r=0;i<this.IndexData.Data.length;++i){var n=this.IndexData.Data[i];for(r=0;r<n.AryIndex.length;++r){var o=n.AryIndex[r];(o.Name.indexOf(t)>=0||o.Name.indexOf(a)>=0)&&e.push(o)}}return e},this.ReloadResource=function(t){this.TitleColor=So.DialogSearchIndex.TitleColor,this.TitleBGColor=So.DialogSearchIndex.TitleBGColor,this.BGColor=So.DialogSearchIndex.BGColor,this.BorderColor=So.DialogSearchIndex.BorderColor,this.IndexNameColor=So.DialogSearchIndex.IndexNameColor,this.GroupNameColor=So.DialogSearchIndex.GroupNameColor,this.InputTextColor=So.DialogSearchIndex.InputTextColor,this.DivDialog&&this.UpdateStyle()}}function Dn(){this.DivDialog=null,this.DragTitle=null,this.TitleBox=null,this.Style=0,this.TitleColor=So.DialogModifyIndexParam.TitleColor,this.TitleBGColor=So.DialogModifyIndexParam.TitleBGColor,this.BGColor=So.DialogModifyIndexParam.BGColor,this.BorderColor=So.DialogModifyIndexParam.BorderColor,this.ParamNameColor=So.DialogModifyIndexParam.ParamNameColor,this.InputTextColor=So.DialogModifyIndexParam.InputTextColor,this.MaxRowCount=30,this.HQChart=null,this.AryData=[],this.IndexData=null,this.Arguments=[],this.Inital=function(t,e){this.HQChart=t,e&&(we.IsNumber(e.Style)&&(this.Style=e.Style),we.IsNumber(e.MaxRowCount)&&(this.MaxRowCount=e.MaxRowCount))},this.Destroy=function(){this.AryData=[],this.HQChart=null,this.DivDialog&&(document.body.removeChild(this.DivDialog),this.DivDialog=null)},this.Show=function(t,e){if(this.DivDialog){if(this.UpdateParam(),this.IndexData&&this.IndexData.Title&&(this.TitleBox.DivName.innerText=this.IndexData.Title),!we.IsNumber(t)||!we.IsNumber(e)){var a=this.HQChart.UIElement.getBoundingClientRect();t=a.left+(a.right-a.left-this.DivDialog.offsetWidth)/2,e=a.top+(a.bottom-a.top-this.DivDialog.offsetHeight)/2}this.DivDialog.style.visibility="visible",this.DivDialog.style.top=e+"px",this.DivDialog.style.left=t+"px"}},this.OnClickColseButton=function(t){this.RestoreParam(),this.Close(t)},this.OnClickRestoreButton=function(t){var e=this.Arguments;e||(e=[]),this.UpdateParamTable(e),this.RestoreParam()},this.OnClickOkButton=function(t){this.Close(t)},this.Close=function(t){this.IndexData=null,this.Arguments=[],this.DivDialog&&(this.DivDialog.style.visibility="hidden")},this.SetIndexData=function(t){this.IndexData=t,this.BackupParam()},this.OnMouseDownTitle=function(t){var e=this;if(this.DivDialog){var a={X:t.clientX,Y:t.clientY};a.YOffset=t.clientX-this.DivDialog.offsetLeft,a.XOffset=t.clientY-this.DivDialog.offsetTop,this.DragTitle=a,document.onmousemove=function(t){e.DocOnMouseMoveTitle(t)},document.onmouseup=function(t){e.DocOnMouseUpTitle(t)}}},this.DocOnMouseMoveTitle=function(t){if(this.DragTitle){var e=t.clientX-this.DragTitle.YOffset,a=t.clientY-this.DragTitle.XOffset,i=e+this.DivDialog.offsetWidth,r=a+this.DivDialog.offsetHeight;i+5>=window.innerWidth&&(e=window.innerWidth-this.DivDialog.offsetWidth-5),r+5>=window.innerHeight&&(a=window.innerHeight-this.DivDialog.offsetHeight-5),this.DivDialog.style.left=e+"px",this.DivDialog.style.top=a+"px",t.preventDefault&&t.preventDefault()}},this.DocOnMouseUpTitle=function(t){this.DragTitle=null,this.onmousemove=null,this.onmouseup=null},this.Create=function(){var t=this,e=document.createElement("div");e.className="UMyChart_ModifyIndexParam_Dialog_Div";var a=document.createElement("div");a.className="UMyChart_ModifyIndexParam_Title_Div",a.onmousedown=function(e){t.OnMouseDownTitle(e)},e.appendChild(a);var i=document.createElement("div");i.className="UMyChart_ModifyIndexParam_Name_Div",i.innerText="ææ åæ°ä¿®æ¹",a.appendChild(i);var r=document.createElement("div");r.className="UMyChart_ModifyIndexParam_Close_Div",r.innerText="x",r.onmousedown=function(e){t.OnClickColseButton(e)},a.appendChild(r);var n=document.createElement("div");n.className="UMyChart_ModifyIndexParam_Frome_Div",e.appendChild(n);var o=document.createElement("div");o.className="UMyChart_ModifyIndexParam_Table_Div",n.appendChild(o);var s=document.createElement("table");s.className="UMyChart_ModifyIndexParam_Table",o.appendChild(s);var l=document.createElement("tbody");l.className="UMyChart_ModifyIndexParam_Tbody",s.appendChild(l),this.AryData=[];for(var h=0;h<this.MaxRowCount;++h){var u=this.CreateRowDOM(h,l);this.AryData.push(u)}var C=document.createElement("div");C.className="UMyChart_ModifyIndexParam_Button_Div",n.appendChild(C);var c=document.createElement("button");c.innerText="æ¢å¤é»è®¤",c.addEventListener("mousedown",function(e){t.OnClickRestoreButton(e)}),C.appendChild(c);var f=document.createElement("button");f.innerText="ç¡®è®¤",f.addEventListener("mousedown",function(e){t.OnClickOkButton(e)}),C.appendChild(f),document.body.appendChild(e),this.DivName=i,this.DivDialog=e,this.TitleBox={DivTitle:a,DivName:i,DivColor:r},this.UpdateStyle()},this.CreateRowDOM=function(t,e){var a=this,i={Tr:null,TdName:null,SpanName:null,TdValue:null,Input:null,ParamItem:null},r=document.createElement("tr");r.className="UMyChart_ModifyIndexParam_Tr",e.appendChild(r),i.Tr=r;var n=document.createElement("td");n.className="UMyChart_ModifyIndexParam_Name_Td",r.appendChild(n),i.TdName=n;var o=document.createElement("span");o.className="UMyChart_ModifyIndexParam_Name_Span",o.innerText="åæ°",n.appendChild(o),i.SpanName=o;var n=document.createElement("td");n.className="UMyChart_ModifyIndexParam_Value_Td",r.appendChild(n),i.TdValue=n;var s=document.createElement("input");return s.className="UMyChart_ModifyIndexParam_Input",s.type="number",s.step=1,s.addEventListener("mouseup",function(t){a.OnParamMouseUp(t)}),s.addEventListener("keyup",function(t){a.OnParamKeyUp(t)}),n.appendChild(s),i.Input=s,i},this.UpdateStyle=function(){this.DivDialog&&(this.BGColor&&(this.DivDialog.style["background-color"]=this.BGColor),this.BorderColor&&(this.DivDialog.style["border-color"]=this.BorderColor),this.TitleBGColor&&(this.TitleBox.DivTitle.style["background-color"]=this.TitleBGColor),this.TitleColor&&(this.TitleBox.DivName.style.color=this.TitleColor))},this.UpdateParamTable=function(t){var e=0;for(e=0;e<t.length&&e<this.AryData.length;++e){var a=t[e],i=this.AryData[e];i.SpanName.innerText=a.Name+": ",i.SpanName.style.color=this.ParamNameColor,i.Input.value=a.Value,i.Input.style.color=this.InputTextColor,i.Input.dataset.paramid=a.Index,"none"==i.Tr.style.display&&(i.Tr.style.display="")}for(;e<this.AryData.length;++e){var i=this.AryData[e];i.Tr.style.display="none",i.Input.dataset.paramid=-1}},this.UpdateParam=function(){var t=[],e=this.IndexData.IndexScript;if(e&&we.IsNonEmptyArray(e.Arguments))for(var a=0;a<e.Arguments.length;++a){var i=e.Arguments[a];t.push({Name:i.Name,Value:i.Value,Index:a})}this.UpdateParamTable(t)},this.RestoreParam=function(){if(this.IndexData&&this.IndexData.IndexScript){var t=this.IndexData.IndexScript;if(we.IsNonEmptyArray(t.Arguments)&&we.IsNonEmptyArray(this.Arguments)){for(var e=!1,a=0;a<this.Arguments.length;++a){var i=this.Arguments[a],r=t.Arguments[a];i.Value!=r.Value&&(r.Value=i.Value,e=!0)}e&&(1==this.IndexData.Type?this.HQChart.UpdateWindowIndex(this.IndexData.WindowIndex):2==this.IndexData.Type&&this.HQChart.UpdateOverlayIndex(this.IndexData.Identify))}}},this.BackupParam=function(){if(this.Arguments=[],this.IndexData&&this.IndexData.IndexScript){var t=this.IndexData.IndexScript;if(we.IsNonEmptyArray(t.Arguments))for(var e=0;e<t.Arguments.length;++e){var a=t.Arguments[e];this.Arguments.push({Name:a.Name,Value:a.Value,Index:e})}}},this.OnParamMouseUp=function(t){var e=t.target,a=e.value,i=e.dataset.paramid;this.ModifyParam(i,parseInt(a))},this.OnParamKeyUp=function(t){var e=t.target,a=e.value,i=e.dataset.paramid;this.ModifyParam(i,parseInt(a))},this.ModifyParam=function(t,e){if(this.IndexData&&this.IndexData.IndexScript){var a=this.IndexData.IndexScript,i=a.Arguments[t];i&&i.Value!=e&&(i.Value=e,1==this.IndexData.Type?this.HQChart.UpdateWindowIndex(this.IndexData.WindowIndex):2==this.IndexData.Type&&this.HQChart.UpdateOverlayIndex(this.IndexData.Identify))}}}function mn(){this.Status=0,this.Create=function(){var t=this;addEventListener("message",function(e){t.OnRecvMessage(e)})},this.NetworkFilter=function(t,e,a){Xn.Complier.Log("[HQChartScriptWorker::NetworkFilter] ["+t.Name+"]["+t.Explain+"] data=",t)},this.ExecuteScript=function(t,e){var a=this,i={};if(t.Script)i.Name=t.Name,i.ID=t.Index,i.Script=t.Script;else{if(!t.Index)return!1;var r=new s,n=r.Get(t.Index);if(!n)return!1;i.ID=t.Index,i.Name=n.Name,i.Script=n.Script,i.Args=n.Args}t.Args&&(i.Args=t.Args),we.IsBool(e.IsApiPeriod)&&(i.IsApiPeriod=e.IsApiPeriod);var o={Name:i.Name,ID:i.ID,Script:i.Script,Args:i.Args,Guid:e.Guid};i.ErrorCallback=function(t){a.OnExecuteError(t,o,e)},i.FinishCallback=function(t,i){a.OnExecuteFinish(t,o,i,e)},i.NetworkFilter=function(t,i){a.NetworkFilter(t,i,o,e)},Xn.Complier.Log("[HQChartScriptWorker::ExecuteScript] scriptObj=",i);var l=new Er(i),h=null;e&&e.Data&&(h=new tt,h.Data=e.Data,h.Right=e.Right,h.Period=e.Period,h.DataType=e.DataType,h.Symbol=e.symbol);var u={HQDataType:Jo.KLINE_ID,Stock:{Symbol:e.Symbol},Request:{MaxDataCount:500,MaxMinuteDayCount:5},Period:e.Period,Right:e.Right,Data:h};we.IsNumber(e.HQDataType)&&(u.HQDataType=e.HQDataType),l.ExecuteScript(u)},this.OnRecvMessage=function(t){var e=t.data;if(e&&e.ID==jn.EXECUTE_SCRIPT){if(!we.IsNonEmptyArray(e.AryIndex))return;for(var a=0;a<e.AryIndex.length;++a){var i=e.AryIndex[a];this.Status=1,this.ExecuteScript(i,e)}this.Status=0}},this.OnExecuteFinish=function(t,e,a,i){var r={Data:t,IndexInfo:e,ID:jn.FINISH_EXECUTE_SCRIPT,JobInfo:i};postMessage(r)},this.OnExecuteError=function(t,e,a){var i={IndexInfo:e,ID:jn.ERROR_EXECUTE_SCRIPT,Error:t};postMessage(i)}}Object.defineProperty(e,"__esModule",{value:!0});var pn,vn=a(156),gn=r(vn),Tn=a(153),In=(r(Tn),a(148)),Sn=r(In),xn=a(151),bn=r(xn),yn=a(150),En=r(yn),wn=a(79),Fn=r(wn),Mn=a(21),Ln=r(Mn),Nn=a(80),Rn=r(Nn),An=a(46),On=r(An),Pn=a(147),Bn=r(Pn),_n=a(45),Gn=r(_n),kn=a(32),Vn=r(kn),Hn=a(75),Yn=r(Hn),Xn={Chart:{Log:console.log,Warn:console.warn},Complier:{Log:console.log,Warn:console.warn},JSTable:{Log:console.log,Warn:console.warn}};n.HttpRequest=function(t){Yn.default.ajax({url:t.url,data:t.data,type:t.type,dataType:t.dataType,async:t.async,success:t.success,error:t.error})};var Wn={MINUTE_ID:101,MULTIDAY_MINUTE_ID:102,HISTORY_MINUTE_ID:103,KLINE_DAY_ID:0,KLINE_WEEK_ID:1,KLINE_TWOWEEK_ID:21,KLINE_MONTH_ID:2,KLINE_QUARTER_ID:9,KLINE_YEAR_ID:3,KLINE_MINUTE_ID:4,KLINE_5_MINUTE_ID:5,KLINE_15_MINUTE_ID:6,KLINE_30_MINUTE_ID:7,KLINE_60_MINUTE_ID:8},Un=new o;if(s.AddIndex=function(t){for(var e in t)Un.Add(t[e])},s.ModifyAttribute=function(t,e){if(e&&(e.Args&&(t.Args=e.Args),we.IsNumber(e.FloatPrecision)&&(t.FloatPrecision=e.FloatPrecision),we.IsNumber(e.StringFormat)&&(t.StringFormat=e.StringFormat),we.IsBool(e.IsSync)&&(t.IsSync=e.IsSync),we.IsBool(e.IsShortTitle)&&(t.IsShortTitle=e.IsShortTitle),e.TitleFont&&(t.TitleFont=e.TitleFont),e.Lock&&(t.Lock=e.Lock),we.IsNumber(e.YSplitType)&&(t.YSplitType=e.YSplitType),we.IsBool(e.IsShowIndexTitle)&&(t.IsShowIndexTitle=e.IsShowIndexTitle),we.IsNumber(e.KLineType)&&(t.KLineType=e.KLineType),e.YAxis)){var a=e.YAxis;t.YAxis||(t.YAxis={}),we.IsNumber(a.FloatPrecision)&&(t.YAxis.FloatPrecision=a.FloatPrecision),we.IsNumber(a.StringFormat)&&(t.YAxis.StringFormat=a.StringFormat),we.IsBool(a.EnableRemoveZero)&&(t.YAxis.EnableRemoveZero=a.EnableRemoveZero),we.IsBool(a.ExcludeValue)&&(t.YAxis.ExcludeValue=a.ExcludeValue)}},s.prototype.Get=function(t){var e=Un.Get(t);if(e)return e;var a=this.DataMap.get(t);if(a){var e=a();return e.ID=t,e}return null},s.prototype.Search=function(t){var e=[],a=new RegExp(t,"i");return this.DataMap.forEach(function(t,i){0!=i.indexOf("äº¤æç³»ç»-")&&0!=i.indexOf("äºå½©Kçº¿-")&&i.search(a)>=0&&e.push(i)}),e},s.prototype.MA=function(){return{Name:"MA",Description:"åçº¿",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);"}},s.prototype.MA4=function(){return{Name:"MA",Description:"åçº¿",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);\nMA4:MA(CLOSE,M4);"}},s.prototype.MA5=function(){return{Name:"MA",Description:"åçº¿",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);\nMA4:MA(CLOSE,M4);\nMA5:MA(CLOSE,M5);"}},s.prototype.MA6=function(){return{Name:"MA",Description:"åçº¿",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0},{Name:"M6",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"},{Name:"MA6",DynamicName:"MA{M6}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);\nMA4:MA(CLOSE,M4);\nMA5:MA(CLOSE,M5);\nMA6:MA(CLOSE,M6);"}},s.prototype.MA7=function(){return{Name:"MA",Description:"åçº¿",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0},{Name:"M6",Value:0},{Name:"M7",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"},{Name:"MA6",DynamicName:"MA{M6}"},{Name:"MA7",DynamicName:"MA{M7}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);\nMA4:MA(CLOSE,M4);\nMA5:MA(CLOSE,M5);\nMA6:MA(CLOSE,M6);\nMA7:MA(CLOSE,M7);"}},s.prototype.MA8=function(){return{Name:"MA",Description:"åçº¿",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0},{Name:"M6",Value:0},{Name:"M7",Value:0},{Name:"M8",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"},{Name:"MA6",DynamicName:"MA{M6}"},{Name:"MA7",DynamicName:"MA{M7}"},{Name:"MA8",DynamicName:"MA{M8}"}],Script:"MA1:MA(CLOSE,M1);\nMA2:MA(CLOSE,M2);\nMA3:MA(CLOSE,M3);\nMA4:MA(CLOSE,M4);\nMA5:MA(CLOSE,M5);\nMA6:MA(CLOSE,M6);\nMA7:MA(CLOSE,M7);\nMA8:MA(CLOSE,M8);"}},s.prototype.EMA3=function(){return{Name:"EMA",Description:"ææ°ç§»å¨å¹³åå¼",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"}],Script:"MA1:EMA(CLOSE,M1);\nMA2:EMA(CLOSE,M2);\nMA3:EMA(CLOSE,M3);"}},s.prototype.EMA4=function(){return{Name:"EMA",Description:"ææ°ç§»å¨å¹³åå¼",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"}],Script:"MA1:EMA(CLOSE,M1);\nMA2:EMA(CLOSE,M2);\nMA3:EMA(CLOSE,M3);\nMA4:EMA(CLOSE,M4);"}},s.prototype.EMA5=function(){return{Name:"EMA",Description:"ææ°ç§»å¨å¹³åå¼",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"}],Script:"MA1:EMA(CLOSE,M1);\nMA2:EMA(CLOSE,M2);\nMA3:EMA(CLOSE,M3);\nMA4:EMA(CLOSE,M4);\nMA5:EMA(CLOSE,M5);"}},s.prototype.EMA6=function(){return{Name:"EMA",Description:"ææ°ç§»å¨å¹³åå¼",IsMainIndex:!0,StringFormat:2,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20},{Name:"M4",Value:60},{Name:"M5",Value:0},{Name:"M6",Value:0}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"},{Name:"MA3",DynamicName:"MA{M3}"},{Name:"MA4",DynamicName:"MA{M4}"},{Name:"MA5",DynamicName:"MA{M5}"},{Name:"MA6",DynamicName:"MA{M6}"}],Script:"MA1:EMA(CLOSE,M1);\nMA2:EMA(CLOSE,M2);\nMA3:EMA(CLOSE,M3);\nMA4:EMA(CLOSE,M4);\nMA5:EMA(CLOSE,M5);\nMA6:EMA(CLOSE,M6);"}},s.prototype.BOLL=function(){return{Name:"BOLL",Description:"å¸æçº¿",IsMainIndex:!0,Args:[{Name:"M",Value:20}],Script:"BOLL:MA(CLOSE,M);\nUB:BOLL+2*STD(CLOSE,M);\nLB:BOLL-2*STD(CLOSE,M);"}},s.prototype.BOLL2=function(){return{Name:"BOLL2",Description:"å¸æçº¿",IsMainIndex:!1,KLineType:0,Args:[{Name:"M",Value:20}],Script:"BOLL:MA(CLOSE,M);\nUB:BOLL+2*STD(CLOSE,M);\nLB:BOLL-2*STD(CLOSE,M);"}},s.prototype.BBI=function(){return{Name:"BBI",Description:"å¤ç©ºåçº¿",IsMainIndex:!0,Args:[{Name:"M1",Value:3},{Name:"M2",Value:6},{Name:"M3",Value:12},{Name:"M4",Value:24}],Script:"BBI:(MA(CLOSE,M1)+MA(CLOSE,M2)+MA(CLOSE,M3)+MA(CLOSE,M4))/4;"}},s.prototype.DKX=function(){return{Name:"DKX",Description:"å¤ç©ºçº¿",IsMainIndex:!1,Args:[{Name:"M",Value:10}],Script:"MID:=(3*CLOSE+LOW+OPEN+HIGH)/6;\nDKX:(20*MID+19*REF(MID,1)+18*REF(MID,2)+17*REF(MID,3)+\n16*REF(MID,4)+15*REF(MID,5)+14*REF(MID,6)+\n13*REF(MID,7)+12*REF(MID,8)+11*REF(MID,9)+\n10*REF(MID,10)+9*REF(MID,11)+8*REF(MID,12)+\n7*REF(MID,13)+6*REF(MID,14)+5*REF(MID,15)+\n4*REF(MID,16)+3*REF(MID,17)+2*REF(MID,18)+REF(MID,20))/210;\nMADKX:MA(DKX,M);"}},s.prototype.MIKE=function(){return{Name:"MIKE",Description:"éº¦åæ¯æåå",IsMainIndex:!0,Args:[{Name:"N",Value:10}],Script:"HLC:=REF(MA((HIGH+LOW+CLOSE)/3,N),1);\nHV:=EMA(HHV(HIGH,N),3);\nLV:=EMA(LLV(LOW,N),3);\nSTOR:EMA(2*HV-LV,3);\nMIDR:EMA(HLC+HV-LV,3);\nWEKR:EMA(HLC*2-LV,3);\nWEKS:EMA(HLC*2-HV,3);\nMIDS:EMA(HLC-HV+LV,3);\nSTOS:EMA(2*LV-HV,3);"}},s.prototype.PBX=function(){return{Name:"PBX",Description:"çå¸çº¿",IsMainIndex:!0,Args:[{Name:"M1",Value:4},{Name:"M2",Value:6},{Name:"M3",Value:9},{Name:"M4",Value:13},{Name:"M5",Value:18},{Name:"M6",Value:24}],Script:"PBX1:(EMA(CLOSE,M1)+MA(CLOSE,M1*2)+MA(CLOSE,M1*4))/3;\nPBX2:(EMA(CLOSE,M2)+MA(CLOSE,M2*2)+MA(CLOSE,M2*4))/3;\nPBX3:(EMA(CLOSE,M3)+MA(CLOSE,M3*2)+MA(CLOSE,M3*4))/3;\nPBX4:(EMA(CLOSE,M4)+MA(CLOSE,M4*2)+MA(CLOSE,M4*4))/3;\nPBX5:(EMA(CLOSE,M5)+MA(CLOSE,M5*2)+MA(CLOSE,M5*4))/3;\nPBX6:(EMA(CLOSE,M6)+MA(CLOSE,M6*2)+MA(CLOSE,M6*4))/3;"}},s.prototype.ENE=function(){return{Name:"ENE",Description:"è½¨éçº¿",IsMainIndex:!0,Args:[{Name:"N",Value:25},{Name:"M1",Value:6},{Name:"M2",Value:6}],Script:"UPPER:(1+M1/100)*MA(CLOSE,N);\nLOWER:(1-M2/100)*MA(CLOSE,N);\nENE:(UPPER+LOWER)/2;"}},s.prototype.MACD=function(){return{Name:"MACD",Description:"å¹³æ»å¼åå¹³å",IsMainIndex:!1,Args:[{Name:"SHORT",Value:12},{Name:"LONG",Value:26},{Name:"MID",Value:9}],Script:"DIF:EMA(CLOSE,SHORT)-EMA(CLOSE,LONG);\nDEA:EMA(DIF,MID);\nMACD:(DIF-DEA)*2,COLORSTICK;"}},s.prototype.MACD2=function(){return{Name:"MACD",Description:"å¹³æ»å¼åå¹³å",IsMainIndex:!1,Args:[{Name:"SHORT",Value:12},{Name:"LONG",Value:26},{Name:"MID",Value:9}],Script:"DIF2:=EMA(CLOSE,SHORT)-EMA(CLOSE,LONG);\nDEA2:=EMA(DIF2,MID);\nMACD:(DIF2-DEA2)*2,COLORSTICK,LINETHICK50;\nDIF:DIF2;\nDEA:DEA2;"}},s.prototype.KDJ=function(){return{Name:"KDJ",Description:"éæºææ ",IsMainIndex:!1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3},{Name:"M2",Value:3}],Script:"RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nK:SMA(RSV,M1,1);\nD:SMA(K,M2,1);\nJ:3*K-2*D;"}},s.prototype.VOL=function(){return{Name:"VOL",Description:"æäº¤é",IsMainIndex:!1,FloatPrecision:0,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"}],Script:"VOL:VOL,VOLSTICK;\nMA1:MA(VOL,M1);\nMA2:MA(VOL,M2);"}},s.prototype.VOL2=function(){return{Name:"VOL",Description:"æäº¤é",IsMainIndex:!1,FloatPrecision:0,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10}],OutName:[{Name:"MA1",DynamicName:"MA{M1}"},{Name:"MA2",DynamicName:"MA{M2}"}],Script:"VOL:VOL,VOLSTICK,STICKTYPE(1);\nMA1:MA(VOL,M1);\nMA2:MA(VOL,M2);"}},s.prototype.VOL_OVERLAY=function(){return{Name:"VOL",Description:"æäº¤é",IsMainIndex:!1,FloatPrecision:0,Script:"VOL:VOL,VOLSTICK,UPCOLOR(RGBA(255,0,0,0.3)),DOWNCOLOR(RGBA(0,255,0,0.3));"}},s.prototype.VOL_TDX=function(){return{Name:"VOL-TDX",Description:"æäº¤é(èæ)",IsMainIndex:!1,FloatPrecision:0,Args:[{Name:"M1",Value:5},{Name:"M2",Value:10}],Script:"TOTAL:=IF(PERIOD=1,5,IF(PERIOD=2,15,IF(PERIOD=3,30,IF(PERIOD=4,60,IF(PERIOD=5,TOTALFZNUM,1)))));\nMTIME:=MOD(FROMOPEN,TOTAL);\nCTIME:=IF(MTIME<0.5,TOTAL,MTIME);\nVVOL:IF((CURRBARSCOUNT=1 AND DYNAINFO(8)>1),VOL*(TOTAL+3)/(CTIME+3),DRAWNULL),NODRAW;\nSTICKLINE((CURRBARSCOUNT=1 AND DYNAINFO(8)>1),VVOL,0,-1,-1),COLORYELLOW;\nVOLUME:VOL,VOLSTICK;\nMAVOL1:MA(VOLUME,M1);\nMAVOL2:MA(VOLUME,M2);"}},s.prototype.RSI=function(){return{Name:"RSI",Description:"ç¸å¯¹å¼ºå¼±ææ ",IsMainIndex:!1,Args:[{Name:"N1",Value:6},{Name:"N2",Value:12},{Name:"N3",Value:24}],Script:"LC:=REF(CLOSE,1);\nRSI1:SMA(MAX(CLOSE-LC,0),N1,1)/SMA(ABS(CLOSE-LC),N1,1)*100;\nRSI2:SMA(MAX(CLOSE-LC,0),N2,1)/SMA(ABS(CLOSE-LC),N2,1)*100;\nRSI3:SMA(MAX(CLOSE-LC,0),N3,1)/SMA(ABS(CLOSE-LC),N3,1)*100;"}},s.prototype.BRAR=function(){return{Name:"BRAR",Description:"æç»ªææ ",IsMainIndex:!1,Args:[{Name:"N",Value:26}],Script:"BR:SUM(MAX(0,HIGH-REF(CLOSE,1)),N)/SUM(MAX(0,REF(CLOSE,1)-LOW),N)*100;\nAR:SUM(HIGH-OPEN,N)/SUM(OPEN-LOW,N)*100;"}},s.prototype.WR=function(){return{Name:"WR",Description:"å¨å»ææ ",IsMainIndex:!1,Args:[{Name:"N",Value:10},{Name:"N1",Value:6}],Script:"WR1:100*(HHV(HIGH,N)-CLOSE)/(HHV(HIGH,N)-LLV(LOW,N));\nWR2:100*(HHV(HIGH,N1)-CLOSE)/(HHV(HIGH,N1)-LLV(LOW,N1));"}},s.prototype.BIAS=function(){return{Name:"BIAS",Description:"ä¹ç¦»ç",IsMainIndex:!1,Args:[{Name:"N1",Value:6},{Name:"N2",Value:12},{Name:"N3",Value:24}],Script:"BIAS1 :(CLOSE-MA(CLOSE,N1))/MA(CLOSE,N1)*100;\nBIAS2 :(CLOSE-MA(CLOSE,N2))/MA(CLOSE,N2)*100;\nBIAS3 :(CLOSE-MA(CLOSE,N3))/MA(CLOSE,N3)*100;"}},s.prototype.OBV=function(){return{Name:"OBV",Description:"ç´¯ç§¯è½éçº¿",IsMainIndex:!1,Args:[{Name:"M",Value:30}],Script:"VA:=IF(CLOSE>REF(CLOSE,1),VOL,-VOL);\nOBV:SUM(IF(CLOSE==REF(CLOSE,1),0,VA),0);\nMAOBV:MA(OBV,M);"}},s.prototype.DMI=function(){return{Name:"DMI",Description:"è¶åææ ",IsMainIndex:!1,Args:[{Name:"N",Value:14},{Name:"MM",Value:6}],Script:"MTR:=EXPMEMA(MAX(MAX(HIGH-LOW,ABS(HIGH-REF(CLOSE,1))),ABS(REF(CLOSE,1)-LOW)),N);\nHD :=HIGH-REF(HIGH,1);\nLD :=REF(LOW,1)-LOW;\nDMP:=EXPMEMA(IF(HD>0&&HD>LD,HD,0),N);\nDMM:=EXPMEMA(IF(LD>0&&LD>HD,LD,0),N);\nPDI: DMP*100/MTR;\nMDI: DMM*100/MTR;\nADX: EXPMEMA(ABS(MDI-PDI)/(MDI+PDI)*100,MM);\nADXR:EXPMEMA(ADX,MM);"}},s.prototype.CR=function(){return{Name:"CR",Description:"å¸¦ç¶è½éçº¿",IsMainIndex:!1,Args:[{Name:"N",Value:26},{Name:"M1",Value:10},{Name:"M2",Value:20},{Name:"M3",Value:40},{Name:"M4",Value:62}],Script:"MID:=REF(HIGH+LOW,1)/2;\nCR:SUM(MAX(0,HIGH-MID),N)/SUM(MAX(0,MID-LOW),N)*100;\nMA1:REF(MA(CR,M1),M1/2.5+1);\nMA2:REF(MA(CR,M2),M2/2.5+1);\nMA3:REF(MA(CR,M3),M3/2.5+1);\nMA4:REF(MA(CR,M4),M4/2.5+1);"}},s.prototype.PSY=function(){return{Name:"PSY",Description:"å¿ççº¿",IsMainIndex:!1,Args:[{Name:"N",Value:12},{Name:"M",Value:6}],Script:"PSY:COUNT(CLOSE>REF(CLOSE,1),N)/N*100;\rPSYMA:MA(PSY,M);"}},s.prototype.CCI=function(){return{Name:"CCI",Description:"ååè·¯å¾ææ ",IsMainIndex:!1,Args:[{Name:"N",Value:14}],Script:"TYP:=(HIGH+LOW+CLOSE)/3;\nCCI:(TYP-MA(TYP,N))/(0.015*AVEDEV(TYP,N));"}},s.prototype.DMA=function(){return{Name:"DMA",Description:"å¹³åå·®",IsMainIndex:!1,Args:[{Name:"N1",Value:10},{Name:"N2",Value:50},{Name:"M",Value:10}],Script:"DIF:MA(CLOSE,N1)-MA(CLOSE,N2);\nDIFMA:MA(DIF,M);"}},s.prototype.TRIX=function(){return{Name:"TRIX",Description:"ä¸éææ°å¹³åçº¿",IsMainIndex:!1,Args:[{Name:"N",Value:12},{Name:"M",Value:9}],Script:"MTR:=EMA(EMA(EMA(CLOSE,N),N),N);\nTRIX:(MTR-REF(MTR,1))/REF(MTR,1)*100;\nMATRIX:MA(TRIX,M) ;"}},s.prototype.VR=function(){return{Name:"VR",Description:"æäº¤éåå¼ç",IsMainIndex:!1,Args:[{Name:"N",Value:26},{Name:"M",Value:6}],Script:"TH:=SUM(IF(CLOSE>REF(CLOSE,1),VOL,0),N);\nTL:=SUM(IF(CLOSE<REF(CLOSE,1),VOL,0),N);\nTQ:=SUM(IF(CLOSE==REF(CLOSE,1),VOL,0),N);\nVR:100*(TH*2+TQ)/(TL*2+TQ);\nMAVR:MA(VR,M);"}},s.prototype.EMV=function(){return{Name:"EMV",Description:"ç®ææ³¢å¨ææ ",IsMainIndex:!1,Args:[{Name:"N",Value:14},{Name:"M",Value:9}],Script:"VOLUME:=MA(VOL,N)/VOL;\nMID:=100*(HIGH+LOW-REF(HIGH+LOW,1))/(HIGH+LOW);\nEMV:MA(MID*VOLUME*(HIGH-LOW)/MA(HIGH-LOW,N),N);\nMAEMV:MA(EMV,M);"}},s.prototype.ROC=function(){return{Name:"ROC",Description:"åå¨çææ ",IsMainIndex:!1,Args:[{Name:"N",Value:12},{Name:"M",Value:6}],Script:"ROC:100*(CLOSE-REF(CLOSE,N))/REF(CLOSE,N);\nMAROC:MA(ROC,M);"}},s.prototype.MTM=function(){return{Name:"MTM",Description:"å¨éçº¿",IsMainIndex:!1,Args:[{Name:"N",Value:12},{Name:"M",Value:6}],Script:"MTM:CLOSE-REF(CLOSE,N);\nMAMTM:MA(MTM,M);"}},s.prototype.FSL=function(){return{Name:"FSL",Description:"åæ°´å²­",IsMainIndex:!1,Args:[],Script:"SWL:(EMA(CLOSE,5)*7+EMA(CLOSE,10)*3)/10;\nSWS:DMA(EMA(CLOSE,12),MAX(1,100*(SUM(VOL,5)/(3*CAPITAL))));"}},s.prototype.CYR=function(){return{Name:"CYR",Description:"å¸åºå¼ºå¼±",IsMainIndex:!1,Args:[{Name:"N",Value:13},{Name:"M",Value:5}],Script:"DIVE:=0.01*EMA(AMOUNT,N)/EMA(VOL,N);\nCYR:(DIVE/REF(DIVE,1)-1)*100;\nMACYR:MA(CYR,M);"}},s.prototype.MASS=function(){return{Name:"MASS",Description:"å¸åºå¼ºå¼±",IsMainIndex:!1,Args:[{Name:"N1",Value:9},{Name:"N2",Value:25},{Name:"M",Value:6}],Script:"MASS:SUM(MA(HIGH-LOW,N1)/MA(MA(HIGH-LOW,N1),N1),N2);\nMAMASS:MA(MASS,M);"}},s.prototype.WAD=function(){return{Name:"WAD",Description:"å¨å»å¤ç©ºååº¦çº¿",IsMainIndex:!1,Args:[{Name:"M",Value:30}],Script:"MIDA:=CLOSE-MIN(REF(CLOSE,1),LOW);\nMIDB:=IF(CLOSE<REF(CLOSE,1),CLOSE-MAX(REF(CLOSE,1),HIGH),0);\nWAD:SUM(IF(CLOSE>REF(CLOSE,1),MIDA,MIDB),0);\nMAWAD:MA(WAD,M);"}},s.prototype.CHO=function(){return{Name:"CHO",Description:"ä½³åºææ ",IsMainIndex:!1,Args:[{Name:"N1",Value:10},{Name:"N2",Value:20},{Name:"M",Value:6}],Script:"MID:=SUM(VOL*(2*CLOSE-HIGH-LOW)/(HIGH+LOW),0);\nCHO:MA(MID,N1)-MA(MID,N2);\nMACHO:MA(CHO,M);"}},s.prototype.ADTM=function(){return{Name:"ADTM",Description:"å¨æä¹°åæ°ææ ",IsMainIndex:!1,Args:[{Name:"N",Value:23},{Name:"M",Value:8}],Script:"DTM:=IF(OPEN<=REF(OPEN,1),0,MAX((HIGH-OPEN),(OPEN-REF(OPEN,1))));\nDBM:=IF(OPEN>=REF(OPEN,1),0,MAX((OPEN-LOW),(OPEN-REF(OPEN,1))));\nSTM:=SUM(DTM,N);\nSBM:=SUM(DBM,N);\nADTM:IF(STM>SBM,(STM-SBM)/STM,IF(STM==SBM,0,(STM-SBM)/SBM));\nMAADTM:MA(ADTM,M);"}},s.prototype.HSL=function(){return{Name:"HSL",Description:"æ¢æçº¿",IsMainIndex:!1,Args:[{Name:"N",Value:5}],Script:"HSL:IF((SETCODE==0||SETCODE==1),100*VOL,VOL)/(FINANCE(7)/100);\nMAHSL:MA(HSL,N);"}},s.prototype.BIAS36=function(){return{Name:"BIAS36",Description:"ä¸å­ä¹ç¦»",IsMainIndex:!1,Args:[{Name:"M",Value:6}],Script:"BIAS36:MA(CLOSE,3)-MA(CLOSE,6);\nBIAS612:MA(CLOSE,6)-MA(CLOSE,12);\nMABIAS:MA(BIAS36,M);"}},s.prototype.BIAS_QL=function(){return{Name:"BIAS_QL",Description:"ä¹ç¦»ç-ä¼ ç»ç",IsMainIndex:!1,Args:[{Name:"N",Value:6},{Name:"M",Value:6}],Script:"BIAS :(CLOSE-MA(CLOSE,N))/MA(CLOSE,N)*100;\nBIASMA :MA(BIAS,M);"}},s.prototype.DPO=function(){return{Name:"DPO",Description:"åºé´éè¡çº¿",IsMainIndex:!1,Args:[{Name:"N",Value:20},{Name:"M",Value:6}],Script:"DPO:CLOSE-REF(MA(CLOSE,N),N/2+1);\nMADPO:MA(DPO,M);"}},s.prototype.OSC=function(){return{Name:"OSC",Description:"åå¨éççº¿",IsMainIndex:!1,Args:[{Name:"N",Value:20},{Name:"M",Value:6}],Script:"OSC:100*(CLOSE-MA(CLOSE,N));\nMAOSC:EXPMEMA(OSC,M);"}},s.prototype.ATR=function(){return{Name:"ATR",Description:"çå®æ³¢å¹",IsMainIndex:!1,Args:[{Name:"N",Value:14}],Script:"MTR:MAX(MAX((HIGH-LOW),ABS(REF(CLOSE,1)-HIGH)),ABS(REF(CLOSE,1)-LOW));\nATR:MA(MTR,N);"}},s.prototype.NVI=function(){return{Name:"ATR",Description:"è´æäº¤é",IsMainIndex:!1,Args:[{Name:"N",Value:72}],Script:"NVI:100*MULAR(IF(V<REF(V,1),C/REF(C,1),1),0);\nMANVI:MA(NVI,N);"}},s.prototype.PVI=function(){return{Name:"PVI",Description:"æ­£æäº¤é",IsMainIndex:!1,Args:[{Name:"N",Value:72}],Script:"NVI:100*MULAR(IF(V>REF(V,1),C/REF(C,1),1),0);\nMANVI:MA(NVI,N);"}},s.prototype.UOS=function(){return{Name:"UOS",Description:"ç»æææ ",IsMainIndex:!1,Args:[{Name:"N1",Value:7},{Name:"N2",Value:14},{Name:"N3",Value:28},{Name:"M",Value:6}],Script:"TH:=MAX(HIGH,REF(CLOSE,1));\nTL:=MIN(LOW,REF(CLOSE,1));\nACC1:=SUM(CLOSE-TL,N1)/SUM(TH-TL,N1);\nACC2:=SUM(CLOSE-TL,N2)/SUM(TH-TL,N2);\nACC3:=SUM(CLOSE-TL,N3)/SUM(TH-TL,N3);\nUOS:(ACC1*N2*N3+ACC2*N1*N3+ACC3*N1*N2)*100/(N1*N2+N1*N3+N2*N3);\nMAUOS:EXPMEMA(UOS,M);"}},s.prototype.CYW=function(){return{Name:"CYW",Description:"ä¸»åæ§ç",IsMainIndex:!1,Args:[],Script:"VAR1:=CLOSE-LOW;\nVAR2:=HIGH-LOW;\nVAR3:=CLOSE-HIGH;\nVAR4:=IF(HIGH>LOW,(VAR1/VAR2+VAR3/VAR2)*VOL,0);\nCYW: SUM(VAR4,10)/10000, COLORSTICK;"}},s.prototype.LON=function(){return{Name:"LON",Description:"é¾ç³»é¿çº¿",IsMainIndex:!1,Args:[{Name:"N",Value:10}],Script:"LC := REF(CLOSE,1);\nVID := SUM(VOL,2)/(((HHV(HIGH,2)-LLV(LOW,2)))*100);\nRC := (CLOSE-LC)*VID;\nLONG := SUM(RC,0);\nDIFF := SMA(LONG,10,1);\nDEA := SMA(LONG,20,1);\nLON : DIFF-DEA;\nLONMA : MA(LON,10);\nLONT : LON, COLORSTICK;"}},s.prototype.NDB=function(){return{Name:"NDB",Description:"èçµæ³¢",IsMainIndex:!1,Args:[{Name:"P1",Value:5},{Name:"P2",Value:10}],Script:"HH:=IF(C/REF(C,1)>1.098 AND L>REF(H,1),2*C-REF(C,1)-H,2*C-H-L);\nV1:= BARSCOUNT(C) - 1;\nV2:= 2 * REF(C, V1) - REF(H, V1) - REF(L, V1);\nDK: SUM(HH, 0) + V2;\nMDK5: MA(DK, P1);\nMDK10: MA(DK, P2);"}},s.prototype.SKDJ=function(){return{Name:"SKDJ",Description:"æ¢ééæºææ ",IsMainIndex:!1,Args:[{Name:"N",Value:9},{Name:"M",Value:3}],Script:"LOWV:=LLV(LOW,N);\nHIGHV:=HHV(HIGH,N);\nRSV:=EMA((CLOSE-LOWV)/(HIGHV-LOWV)*100,M);\nK:EMA(RSV,M);\nD:MA(K,M);"}},s.prototype.KD=function(){return{Name:"KD",Description:"éæºææ KD",IsMainIndex:!1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3},{Name:"M2",Value:3}],Script:"RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nK:SMA(RSV,M1,1);\nD:SMA(K,M2,1);"}},s.prototype.FKX=function(){return{Name:"FKX",Description:"åKçº¿",IsMainIndex:!0,Args:[],Script:"DRAWKLINE(-LOW, -OPEN, -HIGH, -CLOSE);"}},s.prototype.DKCOL=function(){return{Name:"DKCOL",Description:"å¤ç©ºè½éæ±(éç¨äºåæ¶ä¸»å¾)",IsMainIndex:!0,Args:[{Name:"N",Value:5}],Script:"FF:=(C-REF(C,N))/REF(C,N);\nSTICKLINE(FF>0,DYNAINFO(3),DYNAINFO(3)*(1+FF),0.5,0),COLORRED;\nSTICKLINE(FF<0,DYNAINFO(3),DYNAINFO(3)*(1+FF),0.5,0),COLORGREEN;"}},s.prototype.UDL=function(){return{Name:"UDL",Description:"å¼åçº¿",IsMainIndex:!1,Args:[{Name:"N1",Value:3},{Name:"N2",Value:5},{Name:"N3",Value:10},{Name:"N4",Value:20},{Name:"M",Value:6}],Script:"UDL:(MA(CLOSE,N1)+MA(CLOSE,N2)+MA(CLOSE,N3)+MA(CLOSE,N4))/4;\nMAUDL:MA(UDL,M);"}},s.prototype.MFI=function(){return{Name:"MFI",Description:"èµéæµéææ ",IsMainIndex:!1,Args:[{Name:"N",Value:14},{Name:"N2",Value:6}],Script:"TYP := (HIGH + LOW + CLOSE)/3;\nV1:=SUM(IF(TYP>REF(TYP,1),TYP*VOL,0),N)/SUM(IF(TYP<REF(TYP,1),TYP*VOL,0),N);\nMFI:100-(100/(1+V1));"}},s.prototype.LWR=function(){return{Name:"LWR",Description:"LWRå¨å»ææ ",IsMainIndex:!1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3},{Name:"M2",Value:3}],Script:"RSV:= (HHV(HIGH,N)-CLOSE)/(HHV(HIGH,N)-LLV(LOW,N))*100;\nLWR1:SMA(RSV,M1,1);\nLWR2:SMA(LWR1,M2,1);"}},s.prototype.MARSI=function(){return{Name:"MARSI",Description:"ç¸å¯¹å¼ºå¼±å¹³åçº¿",IsMainIndex:!1,Args:[{Name:"M1",Value:10},{Name:"M2",Value:6}],Script:"DIF:=CLOSE-REF(CLOSE,1);\nVU:=IF(DIF>=0,DIF,0);\nVD:=IF(DIF<0,-DIF,0);\nMAU1:=MEMA(VU,M1);\nMAD1:=MEMA(VD,M1);\nMAU2:=MEMA(VU,M2);\nMAD2:=MEMA(VD,M2);\nRSI10:MA(100*MAU1/(MAU1+MAD1),M1);\nRSI6:MA(100*MAU2/(MAU2+MAD2),M2);"}},s.prototype.CYD=function(){return{Name:"CYD",Description:"æ¿æ¥å å­",IsMainIndex:!1,Args:[{Name:"N",Value:21}],Script:"CYDS:WINNER(CLOSE)/(VOL/CAPITAL);\nCYDN:WINNER(CLOSE)/MA(VOL/CAPITAL,N);"}},s.prototype.CYF=function(){return{Name:"CYF",Description:"å¸åºè½é",IsMainIndex:!1,Args:[{Name:"N",Value:21}],Script:"CYF:100-100/(1+EMA(HSL,N));"}},s.prototype.TAPI=function(){return{Name:"TAPI",Description:"å æææ°æäº¤å¼",IsMainIndex:!1,Args:[{Name:"M",Value:6}],Script:"TAPI:AMOUNT/INDEXC;\nMATAIP:MA(TAPI,M);"}},s.prototype.VMACD=function(){return{Name:"VMACD",Description:"éå¹³æ»å¼åå¹³å",IsMainIndex:!1,Args:[{Name:"SHORT",Value:12},{Name:"LONG",Value:26},{Name:"MID",Value:9}],Script:"DIF:EMA(VOL,SHORT)-EMA(VOL,LONG);\nDEA:EMA(DIF,MID);\nMACD:DIF-DEA,COLORSTICK;"}},s.prototype.QACD=function(){return{Name:"QACD",Description:"å¿«éå¼åå¹³å",IsMainIndex:!1,Args:[{Name:"N1",Value:12},{Name:"N2",Value:26},{Name:"M",Value:9}],Script:"DIF:EMA(CLOSE,N1)-EMA(CLOSE,N2);\nMACD:EMA(DIF,M);\nDDIF:DIF-MACD;"}},s.prototype.VPT=function(){return{Name:"VPT",Description:"éä»·æ²çº¿",IsMainIndex:!1,Args:[{Name:"N",Value:51},{Name:"M",Value:6}],Script:"VPT:SUM(VOL*(CLOSE-REF(CLOSE,1))/REF(CLOSE,1),N);\nMAVPT:MA(VPT,M);"}},s.prototype.WVAD=function(){return{Name:"WVAD",Description:"å¨å»åå¼ç¦»æ£é",IsMainIndex:!1,Args:[{Name:"N",Value:24},{Name:"M",Value:6}],Script:"WVAD:SUM((CLOSE-OPEN)/(HIGH-LOW)*VOL,N)/10000;\nMAWVAD:MA(WVAD,M);"}},s.prototype.DBQR=function(){return{Name:"WVAD",Description:"å¯¹æ¯å¼ºå¼±",IsMainIndex:!1,Args:[{Name:"N",Value:5},{Name:"M1",Value:10},{Name:"M2",Value:20},{Name:"M3",Value:60}],Script:"ZS:(INDEXC-REF(INDEXC,N))/REF(INDEXC,N);\nGG:(CLOSE-REF(CLOSE,N))/REF(CLOSE,N);\nMADBQR1:MA(GG,M1);\nMADBQR2:MA(GG,M2);\nMADBQR3:MA(GG,M3);"}},s.prototype.JS=function(){return{Name:"JS",Description:"å éçº¿",IsMainIndex:!1,Args:[{Name:"N",Value:5},{Name:"M1",Value:5},{Name:"M2",Value:10},{Name:"M3",Value:20}],Script:"JS:100*(CLOSE-REF(CLOSE,N))/(N*REF(CLOSE,N));\nMAJS1:MA(JS,M1);\nMAJS2:MA(JS,M2);\nMAJS3:MA(JS,M3);"}},s.prototype.CYE=function(){return{Name:"CYE",Description:"å¸åºè¶å¿",IsMainIndex:!1,Args:[],Script:"MAL:=MA(CLOSE,5);\nMAS:=MA(MA(CLOSE,20),5);\nCYEL:(MAL-REF(MAL,1))/REF(MAL,1)*100;\nCYES:(MAS-REF(MAS,1))/REF(MAS,1)*100;"}},s.prototype.QR=function(){return{Name:"QR",Description:"å¼ºå¼±ææ ",IsMainIndex:!1,Args:[{Name:"N",Value:21}],Script:"ä¸ªè¡: (CLOSE-REF(CLOSE,N))/REF(CLOSE,N)*100; \nå¤§ç: (INDEXC-REF(INDEXC,N))/REF(INDEXC,N)*100; \nå¼ºå¼±å¼:EMA(ä¸ªè¡-å¤§ç,2),COLORSTICK;"}},s.prototype.GDX=function(){return{Name:"GDX",Description:"è½¨éçº¿",IsMainIndex:!1,Args:[{Name:"N",Value:30},{Name:"M",Value:9}],Script:"AA:=ABS((2*CLOSE+HIGH+LOW)/4-MA(CLOSE,N))/MA(CLOSE,N); \nè½¨é:DMA(CLOSE,AA);\nååçº¿:(1+M/100)*è½¨é; \næ¯æçº¿:(1-M/100)*è½¨é;"}},s.prototype.JLHB=function(){return{Name:"JLHB",Description:"ç»è·¯èªæ ",IsMainIndex:!1,Args:[{Name:"N",Value:7},{Name:"M",Value:5}],Script:"VAR1:=(CLOSE-LLV(LOW,60))/(HHV(HIGH,60)-LLV(LOW,60))*80; \nB:SMA(VAR1,N,1); \nVAR2:SMA(B,M,1); \nç»è·¯èªæ :IF(CROSS(B,VAR2) AND B<40,50,0);"}},s.prototype.PCNT=function(){return{Name:"PCNT",Description:"å¹åº¦æ¯",IsMainIndex:!1,Args:[{Name:"M",Value:5}],Script:"PCNT:(CLOSE-REF(CLOSE,1))/CLOSE*100;\nMAPCNT:EXPMEMA(PCNT,M);"}},s.prototype.BTX=function(){return{Name:"BTX",Description:"å®å¡çº¿",IsMainIndex:!1,Args:[],Script:"B1:=REF(C,1);\nB2:= REF(C, 2);\nSS:= IF(C > REF(C, 1) AND REF(C, 1) >= REF(C, 2), 1, IF(C < REF(C, 1) AND REF(C, 1) <= REF(C, 2), -1, IF(C > REF(C, 2) AND REF(C, 2) > REF(C, 1), 2, IF(C < REF(C, 2) AND REF(C, 2) < REF(C, 1), -2, 0))));\nSM:= IF(REF(SS, 1) <> 0, REF(SS, 1), IF(REF(SS, 2) <> 0, REF(SS, 2), IF(REF(SS, 3) <> 0, REF(SS, 3), IF(REF(SS, 5) <> 0, REF(SS, 5), IF(REF(SS, 6) <> 0, REF(SS, 6), IF(REF(SS, 7) <> 0, REF(SS, 7), 0))))));\nMC:= IF(REF(SS, 1) <> 0, B2, IF(SM > 0, MIN(B1, B2), MAX(B1, B2)));\nTOW1:= IF(C > REF(C, 1), C, REF(C, 1));\nTOW2:= IF((SS == -1 OR SS == -2) AND SM > 0, B2, TOW1);\nTOWER:= IF(TOW1 > TOW2, TOW1, TOW2);\nSTICKLINE(SS == 1 OR SM >= 1 AND SS == 0, B1, C, 10, 1), COLORRED;\nSTICKLINE(SS == -1 OR SM <= -1 AND SS == 0, B1, C, 10, 0), COLORCYAN;\nSTICKLINE(SS == 2, B2, C, 10, 1), COLORRED;\nSTICKLINE(SS == -2, B2, C, 10, 0), COLORCYAN;\nSTICKLINE((SS == -1 OR SS == -2) AND SM > 0, B2, B1, 10, 1), COLORRED;\nSTICKLINE((SS == 1 OR SS == 2) AND SM < 0, B2, B1, 10, 0), COLORCYAN;"}},s.prototype.AMO=function(){return{Name:"AMO",Description:"æäº¤éé¢",IsMainIndex:!1,StringFormat:2,YAxis:{FloatPrecision:0,StringFormat:2},Args:[{Name:"M1",Value:5},{Name:"M2",Value:10}],Script:"AMOW:AMOUNT/10000.0,VOLSTICK;\nAMO1:MA(AMOW,M1);\nAMO2:MA(AMOW,M2);"}},s.prototype.VRSI=function(){return{Name:"VRSI",Description:"ç¸å¯¹å¼ºå¼±é",IsMainIndex:!1,Args:[{Name:"N1",Value:6},{Name:"N2",Value:12},{Name:"N3",Value:24}],Script:"LC:=REF(VOL,1);\nRSI1:SMA(MAX(VOL-LC,0),N1,1)/SMA(ABS(VOL-LC),N1,1)*100;\nRSI2:SMA(MAX(VOL-LC,0),N2,1)/SMA(ABS(VOL-LC),N2,1)*100;\nRSI3:SMA(MAX(VOL-LC,0),N3,1)/SMA(ABS(VOL-LC),N3,1)*100;"}},s.prototype.HSCOL=function(){return{Name:"HSCOL",Description:"æ¢ææ±",IsMainIndex:!1,Args:[{Name:"N",Value:5}],Script:"HSCOL:IF((SETCODE==0||SETCODE==1),100*VOL,VOL)/(FINANCE(7)/100),VOLSTICK;\nMAHSL:MA(HSCOL,N);"}},s.prototype.DBQRV=function(){return{Name:"DBQRV",Description:"å¯¹æ¯å¼ºå¼±é(éä¸è½½æ¥çº¿)",IsMainIndex:!1,Args:[{Name:"N",Value:5}],Script:"ZS:(INDEXV-REF(INDEXV,N))/REF(INDEXV,N);\nGG:(VOL-REF(VOL,N))/REF(VOL,N);"}},s.prototype.DBLB=function(){return{Name:"DBLB",Description:"å¯¹æ¯éæ¯(éä¸è½½æ¥çº¿)",IsMainIndex:!1,Args:[{Name:"N",Value:5},{Name:"M",Value:5}],Script:"GG:=VOL/SUM(REF(VOL,1),N);\nZS:=INDEXV/SUM(REF(INDEXV,1),N);\nDBLB:GG/ZS;\nMADBLB:MA(DBLB,M);"}},s.prototype.ACD=function(){return{Name:"ACD",Description:"åéçº¿",IsMainIndex:!1,Args:[{Name:"M",Value:20}],Script:"LC:=REF(CLOSE,1);\nDIF:=CLOSE-IF(CLOSE>LC,MIN(LOW,LC),MAX(HIGH,LC));\nACD:SUM(IF(CLOSE==LC,0,DIF),0);\nMAACD:EXPMEMA(ACD,M);"}},s.prototype.EXPMA=function(){return{Name:"EXPMA",Description:"ææ°å¹³åçº¿",IsMainIndex:!0,Args:[{Name:"M1",Value:12},{Name:"M2",Value:50}],Script:"EXP1:EMA(CLOSE,M1);\nEXP2:EMA(CLOSE,M2);"}},s.prototype.EXPMA_S=function(){return{Name:"EXPMA_S",Description:"ææ°å¹³åçº¿-å¯å¾",IsMainIndex:!1,Args:[{Name:"M1",Value:12},{Name:"M2",Value:50}],Script:"EXP1:EMA(CLOSE,M1);\nEXP2:EMA(CLOSE,M2);"}},s.prototype.HMA=function(){return{Name:"HMA",Description:"é«ä»·å¹³åçº¿",IsMainIndex:!0,Args:[{Name:"M1",Value:6},{Name:"M2",Value:12},{Name:"M3",Value:30},{Name:"M4",Value:72},{Name:"M5",Value:144}],Script:"HMA1:MA(HIGH,M1);\nHMA2:MA(HIGH,M2);\nHMA3:MA(HIGH,M3);\nHMA4:MA(HIGH,M4);\nHMA5:MA(HIGH,M5);"}},s.prototype.LMA=function(){return{Name:"LMA",Description:"ä½ä»·å¹³åçº¿",IsMainIndex:!0,Args:[{Name:"M1",Value:6},{Name:"M2",Value:12},{Name:"M3",Value:30},{Name:"M4",Value:72},{Name:"M5",Value:144}],Script:"LMA1:MA(LOW,M1);\nLMA2:MA(LOW,M2);\nLMA3:MA(LOW,M3);\nLMA4:MA(LOW,M4);\nLMA5:MA(LOW,M5);"}},s.prototype.VMA=function(){return{Name:"VMA",Description:"åå¼å¹³åçº¿",IsMainIndex:!0,Args:[{Name:"M1",Value:6},{Name:"M2",Value:12},{Name:"M3",Value:30},{Name:"M4",Value:72},{Name:"M5",Value:144}],Script:"VV:=(HIGH+OPEN+LOW+CLOSE)/4;\nVMA1:MA(VV,M1);\nVMA2:MA(VV,M2);\nVMA3:MA(VV,M3);\nVMA4:MA(VV,M4);\nVMA5:MA(VV,M5);"}},s.prototype.AMV=function(){return{Name:"AMV",Description:"ææ¬ä»·åçº¿",IsMainIndex:!1,Args:[{Name:"M1",Value:6},{Name:"M2",Value:12},{Name:"M3",Value:30},{Name:"M4",Value:72},{Name:"M5",Value:144}],Script:"AMOV:=VOL*(OPEN+CLOSE)/2;\nAMV1:SUM(AMOV,M1)/SUM(VOL,M1);\nAMV2:SUM(AMOV,M2)/SUM(VOL,M2);\nAMV3:SUM(AMOV,M3)/SUM(VOL,M3);\nAMV4:SUM(AMOV,M4)/SUM(VOL,M4);"}},s.prototype.BBIBOLL=function(){return{Name:"BBIBOLL",Description:"å¤ç©ºå¸æçº¿",IsMainIndex:!0,Args:[{Name:"N",Value:11},{Name:"M",Value:6}],Script:"CV:=CLOSE;\nBBIBOLL:(MA(CV,3)+MA(CV,6)+MA(CV,12)+MA(CV,24))/4;\nUPR:BBIBOLL+M*STD(BBIBOLL,N);\nDWN:BBIBOLL-M*STD(BBIBOLL,N);"}},s.prototype.ALLIGAT=function(){return{Name:"ALLIGAT",Description:"é³é±¼çº¿",IsMainIndex:!0,Args:[],Script:"NN:=(H+L)/2;\nä¸å:REF(MA(NN,5),3),COLOR40FF40;\nçé½¿:REF(MA(NN,8),5),COLOR0000C0;\nä¸é¢:REF(MA(NN,13),8),COLORFF4040;"}},s.prototype.ZX=function(){return{Name:"ZX",Description:"éå¿çº¿",IsMainIndex:!1,Args:[],Script:"AV:0.01*AMOUNT/VOL;"}},s.prototype.XS=function(){return{Name:"XS",Description:"èæ¯éé",IsMainIndex:!0,Args:[{Name:"N",Value:13}],Script:"VAR2:=CLOSE*VOL;\nVAR3:=EMA((EMA(VAR2,3)/EMA(VOL,3)+EMA(VAR2,6)/EMA(VOL,6)+EMA(VAR2,12)/EMA(VOL,12)+EMA(VAR2,24)/EMA(VOL,24))/4,N);\nSUP:1.06*VAR3;\nSDN:VAR3*0.94;\nVAR4:=EMA(CLOSE,9);\nLUP:EMA(VAR4*1.14,5);\nLDN:EMA(VAR4*0.86,5);"}},s.prototype.XS2=function(){return{Name:"XS2",Description:"èæ¯ééII",IsMainIndex:!0,Args:[{Name:"N",Value:102},{Name:"M",Value:7}],Script:"AA:=MA((2*CLOSE+HIGH+LOW)/4,5); \néé1:AA*N/100; \néé2:AA*(200-N)/100; \nCC:=ABS((2*CLOSE+HIGH+LOW)/4-MA(CLOSE,20))/MA(CLOSE,20); \nDD:=DMA(CLOSE,CC); \néé3:(1+M/100)*DD; \néé4:(1-M/100)*DD;"}},s.prototype.SG_XDT=function(){return{Name:"SG-XDT",Description:"å¿çµå¾(éä¸è½½æ¥çº¿)",IsMainIndex:!1,Args:[{Name:"P1",Value:5},{Name:"P2",Value:10}],Script:"QR:CLOSE/INDEXC*1000;\nMQR1:MA(QR,5);\nMQR2:MA(QR,10);"}},s.prototype.SG_SMX=function(){return{Name:"SG-SMX",Description:"çå½çº¿(éä¸è½½æ¥çº¿)",IsMainIndex:!1,Args:[{Name:"N",Value:50}],Script:"H1:=HHV(HIGH,N);\nL1:=LLV(LOW,N);\nH2:=HHV(INDEXH,N);\nL2:=LLV(INDEXL,N);\nZY:=CLOSE/INDEXC*2000;\nZY1:EMA(ZY,3);\nZY2:EMA(ZY,17);\nZY3:EMA(ZY,34);"}},s.prototype.SG_LB=function(){return{Name:"SG-LB",Description:"éæ¯(éä¸è½½æ¥çº¿)",IsMainIndex:!1,Args:[],Script:"ZY2:=VOL/INDEXV*1000;\néæ¯:ZY2;\nMA5:MA(ZY2,5);\nMA10:MA(ZY2,10);"}},s.prototype.SG_PF=function(){return{Name:"SG-PF",Description:"å¼ºå¿è¡è¯å(éä¸è½½æ¥çº¿)",IsMainIndex:!1,Args:[],Script:"ZY1:=CLOSE/INDEXC*1000;\nA1:=IF(ZY1>HHV(ZY1,3),10,0);\nA2:=IF(ZY1>HHV(ZY1,5),15,0);\nA3:=IF(ZY1>HHV(ZY1,10),20,0);\nA4:=IF(ZY1>HHV(ZY1,2),10,0);\nA5:=COUNT(ZY1>REF(ZY1,1) ,9)*5;\nå¼ºå¿è¡è¯å:A1+A2+A3+A4+A5;"}},s.prototype.RAD=function(){return{Name:"RAD",Description:"å¨åé·è¾¾(éä¸è½½æ¥çº¿)",IsMainIndex:!1,Args:[{Name:"D",Value:3},{Name:"S",Value:30},{Name:"M",Value:30}],Script:"SM:=(OPEN+HIGH+CLOSE+LOW)/4;\nSMID:=MA(SM,D);\nIM:=(INDEXO+INDEXH+INDEXL+INDEXC)/4;\nIMID:=MA(IM,D);\nSI1:=(SMID-REF(SMID,1))/SMID;\nII:=(IMID-REF(IMID,1))/IMID;\nRADER1:SUM((SI1-II)*2,S)*1000;\nRADERMA:SMA(RADER1,M,1);"}},s.prototype.SHT=function(){return{Name:"SHT",Description:"é¾ç³»ç­çº¿",IsMainIndex:!1,Args:[{Name:"N",Value:5}],Script:"VAR1:=MA((VOL-REF(VOL,1))/REF(VOL,1),5);\nVAR2:=(CLOSE-MA(CLOSE,24))/MA(CLOSE,24)*100;\nMY: VAR2*(1+VAR1);\nSHT: MY, COLORSTICK;\nSHTMA: MA(SHT,N);"}},s.prototype.ZLJC=function(){return{Name:"ZLJC",Description:"ä¸»åè¿åº",IsMainIndex:!1,Args:[],Script:"VAR1:=(CLOSE+LOW+HIGH)/3; \nVAR2:=SUM(((VAR1-REF(LOW,1))-(HIGH-VAR1))*VOL/100000/(HIGH-LOW),0); \nVAR3:=EMA(VAR2,1); \nJCS:VAR3; \nJCM:MA(VAR3,12); \nJCL:MA(VAR3,26);"}},s.prototype.ZLMM=function(){return{Name:"ZLMM",Description:"ä¸»åä¹°å",IsMainIndex:!1,Args:[],Script:"LC :=REF(CLOSE,1);\nRSI2:=SMA(MAX(CLOSE-LC,0),12,1)/SMA(ABS(CLOSE-LC),12,1)*100;\nRSI3:=SMA(MAX(CLOSE-LC,0),18,1)/SMA(ABS(CLOSE-LC),18,1)*100;\nMMS:MA(3*RSI2-2*SMA(MAX(CLOSE-LC,0),16,1)/SMA(ABS(CLOSE-LC),16,1)*100,3);\nMMM:EMA(MMS,8);\nMML:MA(3*RSI3-2*SMA(MAX(CLOSE-LC,0),12,1)/SMA(ABS(CLOSE-LC),12,1)*100,5);"}},s.prototype.SLZT=function(){return{Name:"SLZT",Description:"ç¥é¾å¨å¤©",IsMainIndex:!1,Args:[],Script:"ç½é¾: MA(CLOSE,125);\né»é¾: ç½é¾+2*STD(CLOSE,170);\nç´«é¾: ç½é¾-2*STD(CLOSE,145);\néé¾: SAR(125,1,7), LINESTICK;\nVAR2:=HHV(HIGH,70);\nVAR3:=HHV(HIGH,20);\nçº¢é¾: VAR2*0.83;\nèé¾: VAR3*0.91;"}},s.prototype.ADVOL=function(){return{Name:"ADVOL",Description:"é¾ç³»ç¦»æ£é",IsMainIndex:!1,Args:[],Script:"A:=SUM(((CLOSE-LOW)-(HIGH-CLOSE))*VOL/10000/(HIGH-LOW),0);\nADVOL:A;\nMA1:MA(A,30);\nMA2:MA(MA1,100);"}},s.prototype.CYC=function(){return{Name:"CYC",Description:"ææ¬åçº¿",IsMainIndex:!0,Args:[{Name:"P1",Value:5},{Name:"P2",Value:13},{Name:"P3",Value:34}],Script:"JJJ:=IF(DYNAINFO(8)>0.01,0.01*DYNAINFO(10)/DYNAINFO(8),DYNAINFO(3));\nDDD:=(DYNAINFO(5)<0.01 || DYNAINFO(6)<0.01);\nJJJT:=IF(DDD,1,(JJJ<(DYNAINFO(5)+0.01) && JJJ>(DYNAINFO(6)-0.01)));\nCYC1:IF(JJJT,0.01*EMA(AMOUNT,P1)/EMA(VOL,P1),EMA((HIGH+LOW+CLOSE)/3,P1));\nCYC2:IF(JJJT,0.01*EMA(AMOUNT,P2)/EMA(VOL,P2),EMA((HIGH+LOW+CLOSE)/3,P2));\nCYC3:IF(JJJT,0.01*EMA(AMOUNT,P3)/EMA(VOL,P3),EMA((HIGH+LOW+CLOSE)/3,P3));\nCYC4:IF(JJJT,DMA(AMOUNT/(100*VOL),100*VOL/FINANCE(7)),EMA((HIGH+LOW+CLOSE)/3,120));"}},s.prototype.CYS=function(){return{Name:"CYS",Description:"å¸åºçäº",IsMainIndex:!1,Args:[],Script:"CYC13:EMA(AMOUNT,13)/EMA(VOL,13);\nCYS:(CLOSE-CYC13)/CYC13*100;"}},s.prototype.CYQKL=function(){return{Name:"CYQKL",Description:"åå¼Kçº¿é¿åº¦",IsMainIndex:!1,Args:[],Script:"KL:100*(WINNER(CLOSE)-WINNER(OPEN));"}},s.prototype.SCR=function(){return{Name:"SCR",Description:"ç­¹ç éä¸­åº¦",IsMainIndex:!1,Args:[{Name:"P1",Value:90}],Script:"A:=P1+(100-P1)/2;\nB:=(100-P1)/2;\nCC:=COST(A);\nDD:=COST(B);\nSCR:(CC-DD)/(CC+DD)*100/2;"}},s.prototype.ASR=function(){return{Name:"ASR",Description:"æµ®ç­¹æ¯ä¾",IsMainIndex:!1,Args:[],Script:"ASR:(WINNER(C*1.1)-WINNER(C*0.9))/WINNER(HHV(H,0))*100;"}},s.prototype.SAR=function(){return{Name:"SAR",Description:"æç©è½¬å",IsMainIndex:!0,Args:[{Name:"P",Value:10},{Name:"STEP",Value:2},{Name:"MAXP",Value:20}],Script:"S:SAR(P,STEP,MAXP),UPDOWNDOT;"}},s.prototype.TJCJL=function(){return{Name:"å¤ªææäº¤é",Description:"å¤ªææäº¤é",IsMainIndex:!0,Args:[],Script:'æ»æ:VOL,NODRAW;\nDRAWTEXT_FIX(ISLASTBAR,0,0,0,"è¯´æ: çº¢è²æ±ä¸ºå¸è´§é,ç»¿è²ä¸ºåºè´§é,é»è²ä¸ºå¤©é,èè²ä¸ºå°é"),COLORGRAY;\nZZ:=IF(REF(C,1)>REF(O,1) AND O>REF(C,1)*1.014 AND C<O*1.02,1,3);\nV5:=MA(V,5);\nV12:=MA(V,12);\nV34:=MA(V,34);\nC6:=MA(C,6);\nSTICKLINE(VOL,0,VOL,3,0),COLORLIGRAY;\nSTICKLINE(CROSS(C,C6) AND V>V5*1.2 AND V>V12*1.2 AND ZZ>2 AND C>H*0.975,0,VOL,3,0),COLORRED;\nSTICKLINE(CROSS(C6,C) AND V>V5*1.2 AND V>V12*1.2,0,VOL,3,0),COLORGREEN;\nSTICKLINE(VOL>MA(VOL,5)*2 AND V>V34*3 AND C<REF(C,1)*1.05,0,VOL,3,0),COLORYELLOW;\nSTICKLINE(VOL<MA(VOL,5)/2 AND V<V12/2,0,VOL,3,0),COLORBLUE;\nSTICKLINE(VOL>MA(VOL,5)*2 AND V>V34*3 AND C<REF(C,1)*1.05 AND CROSS(C,C6) AND V>V5*1.2 AND V>V12*1.2 AND ZZ>2 AND C>H*0.975,VOL*0.5,0,3,0),COLORRED;\nSTICKLINE(VOL>MA(VOL,5)*2 AND V>V34*3 AND C<REF(C,1)*1.05 AND CROSS(C6,C) AND V>V5*1.2 AND V>V12*1.2,VOL*0.5,0,3,0),COLORRED;'}},s.prototype.Dragon4_Main=function(){return{Name:"é£é¾åå¼",Description:"é£é¾åå¼",IsMainIndex:!0,Args:[{Name:"N1",Value:5},{Name:"N2",Value:10},{Name:"N3",Value:50},{Name:"N4",Value:60}],Script:"è»èç¹æ°´:=EMA(CLOSE,N1),COLORGRAY;\né­ç:=EMA(CLOSE,N2),COLORGREEN;\næ°´:=EMA(CLOSE,N3),COLORRED;\nDRAWKLINE(HIGH,OPEN,LOW,CLOSE);\nçå½çº¿:MA(CLOSE,N4),COLORBLUE,LINETHICK2;\nDRAWBAND(é­ç,'RGB(186,225,250)',æ°´,'RGB(253,194,124)');\nDRAWBAND(è»èç¹æ°´,'RGB(128,138,135)',é­ç,'RGB(0,0,255)');"}},s.prototype.Dragon4_Fig=function(){return{Name:"é£é¾åå¼",Description:"é£é¾åå¼",IsMainIndex:!1,Args:[],Script:"å:VOL>=REF(V,1)*1.90 AND C>REF(C,1),COLORYELLOW;\nä½:VOL<REF(LLV(VOL,13),1),COLORGREEN;\nå°:VOL<REF(LLV(VOL,100),1),COLORMAGENTA; \nå¹³:=ABS(VOL-HHV(REF(VOL,1),5))/HHV(REF(VOL,1),5)<=0.03 OR ABS(VOL-REF(VOL,1))/REF(VOL,1)<=0.03,NODRAW,COLORWHITE;\nåç¼©:VOL<=REF(V,1)*0.5,COLORFF8000;\næ¢¯é:COUNT(V>REF(V,1),3)==3 AND COUNT(C>O,3)==3,COLORBROWN;\nç¼©éæ¶¨:COUNT(C>REF(C,1),2)==2 AND COUNT(V<REF(V,1),2)==2,COLORBLUE;\nSTICKLINE(C>=REF(C,1),V,0,2,0),COLORRED;\nSTICKLINE(C<REF(C,1),V,0,2,0),COLORGREEN;\nSTICKLINE(å,0,V,2,0),COLORYELLOW;\nSTICKLINE(ä½,0,V,2,0),COLORGREEN;\nSTICKLINE(å°,0,V,2,0),COLORLIMAGENTA;\nSTICKLINE(å¹³,0,V,2,0),COLORGRAY;\nSTICKLINE(åç¼©,0,V,2,0),COLORFF8000;\nSTICKLINE(æ¢¯é,0,V,2,0),COLORBROWN;\nSTICKLINE(ç¼©éæ¶¨,0,V,2,0),COLORBLUE;"}},s.prototype.FundsAnalysis=function(){return{Name:"èµéåæ",Description:"èµéåæ",IsMainIndex:!1,Args:[{Name:"M",Value:55},{Name:"N",Value:34}],Script:"LC:=REF(CLOSE,1);\nRSI:=((SMA(MAX((CLOSE - LC),0),3,1) / SMA(ABS((CLOSE - LC)),3,1)) * 100);\nFF:=EMA(CLOSE,3);\nMA15:=EMA(CLOSE,21); DRAWTEXT(CROSS(85,RSI),75,'â¼'),COLORGREEN;\nVAR1:=IF(YEAR>=2038 AND MONTH>=1,0,1);\nVAR2:=REF(LOW,1)*VAR1;\nVAR3:=SMA(ABS(LOW-VAR2),3,1)/SMA(MAX(LOW-VAR2,0),3,1)*100*VAR1;\nVAR4:=EMA(IF(CLOSE*1.3,VAR3*10,VAR3/10),3)*VAR1;\nVAR5:=LLV(LOW,30)*VAR1;\nVAR6:=HHV(VAR4,30)*VAR1;\nVAR7:=IF(MA(CLOSE,58),1,0)*VAR1;\nVAR8:=EMA(IF(LOW<=VAR5,(VAR4+VAR6*2)/2,0),3)/618*VAR7*VAR1;\nå¸ç­¹A:IF(VAR8>100,100,VAR8)*VAR1,COLORFB2F3B;\n{å¸ç­¹B}STICKLINE(å¸ç­¹A>-150,0,å¸ç­¹A,8,0),COLORFB2F3B;\n\næ£æ·çº¿: 100*(HHV(HIGH,M)-CLOSE)/(HHV(HIGH,M)-LLV(LOW,M)),COLORAA89BD,LINETHICK2;\nRSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nK:=SMA(RSV,3,1);\nD:=SMA(K,3,1);\nJ:=3*K-2*D;\nä¸»åçº¿:EMA(J,5),COLORF39800,LINETHICK2;\nDRAWICON(CROSS(ä¸»åçº¿,æ£æ·çº¿),ä¸»åçº¿,1);\nDRAWICON(CROSS(æ£æ·çº¿,ä¸»åçº¿),ä¸»åçº¿,2);"}},s.prototype.MarginProportion=function(){return{Name:"èèµå æ¯(%)",Description:"èèµå æ¯",IsMainIndex:!1,Condition:{Period:[Wn.KLINE_DAY_ID]},Args:[],Script:"å æ¯:MARGIN(2);"}},s.prototype.Margin2=function(){return{Name:"ä¸¤èä½é¢",Description:"èèµèå¸ä½é¢",IsMainIndex:!1,Condition:{Period:[Wn.KLINE_DAY_ID]},Args:[{Name:"N",Value:5}],Script:"T1:MARGIN(1);\n        T2:MA(MARGIN(1),N);"}},s.prototype.Margin3=function(){return{Name:"ä¸¤èä½é¢",Description:"èèµèå¸ä½é¢",IsMainIndex:!1,Condition:{Period:[Wn.KLINE_DAY_ID]},Args:[{Name:"N",Value:5}],Script:"T1:=MARGIN(1);\n        T2:=MA(MARGIN(1),N);\n        STICKLINE(T1-T2>=0,0,T1-T2,50,T1>T2),COLORRED;\n        STICKLINE(T1-T2<0,T1-T2,0,50,T1>T2),COLORGREEN;"}},s.prototype.FXG_BSPoint=function(){return{Name:"æçBSç¹",Description:"æçBSç¹",IsMainIndex:!0,Args:[],Script:"MA5:MA(CLOSE,5);\n        MA13:MA(CLOSE,13);\n        MA21:MA(CLOSE,21);\n        MA34:MA(CLOSE,34);\n        {MA55:MA(CLOSE,55),COLOR0000FF;}\n        {MA120:=MA(CLOSE,120),COLORFFFF00;}\n        å¤©ä½¿:=EMA(C,2),COLOR000000;\n        é­é¬¼:=EMA(SLOPE(C,21)*20+C,42),COLOR000000;\n        ä¹°:=CROSS(å¤©ä½¿,é­é¬¼);\n        å:=CROSS(é­é¬¼,å¤©ä½¿);\n        DRAWICON(ä¹°,L*0.97,13);\n        DRAWICON(å,H*1.03,14);\n        DRAWKLINE_IF(å¤©ä½¿>=é­é¬¼,HIGH,CLOSE,LOW,OPEN),COLORRED;\n        DRAWKLINE_IF(å¤©ä½¿<é­é¬¼,HIGH,CLOSE,LOW,OPEN),COLORBLUE;\n        DRAWKLINE_IF(CROSS(å¤©ä½¿,é­é¬¼),HIGH,CLOSE,LOW,OPEN),COLORYELLOW;\n        DRAWKLINE_IF(CROSS(é­é¬¼,å¤©ä½¿),HIGH,CLOSE,LOW,OPEN),COLORBLACK;"}},s.prototype.FXG_INDEX=function(){return{Name:"æ¶¨åå¤ç©ºçº¿",Description:"æ¶¨åå¤ç©ºçº¿",IsMainIndex:!1,Args:[],Script:"åå¤è½éçº¿: SMA((CLOSE-LLV(LOW,9))/(HHV(HIGH,9)-LLV(LOW,9))*100,5,1)-8,COLORRED,LINETHICK3;\nåç©ºè½éçº¿: SMA((HHV(HIGH,36)-CLOSE)/(HHV(HIGH,36)-LLV(LOW,36))*100,2,1),COLORGREEN,LINETHICK3;\n20,POINTDOT,COLORF00FF0;\n50,POINTDOT,COLORGREEN;\n80,POINTDOT,COLORLIBLUE;"}},s.prototype.FXG_INDEX2=function(){return{Name:"æ¶¨åå¸ç­¹åº",Description:"æ¶¨åå¸ç­¹åº",IsMainIndex:!1,Args:[],Script:"VAR0:=EMA(HHV(HIGH,500),21); \nVAR1:=EMA(HHV(HIGH,250),21);\nVAR2:=EMA(HHV(HIGH,90),21); \nVAR3:=EMA(LLV(LOW,500),21); \nVAR4:=EMA(LLV(LOW,250),21); \nVAR5:=EMA(LLV(LOW,90),21);\n\nVAR6:=EMA((VAR3*0.96+VAR4*0.96+VAR5*0.96+VAR0*0.558+VAR1*0.558+VAR2*0.558)/6,21); \nVAR7:=EMA((VAR3*1.25+VAR4*1.23+VAR5*1.2+VAR0*0.55+VAR1*0.55+VAR2*0.65)/6,21); \nVAR8:=EMA((VAR3*1.3+VAR4*1.3+VAR5*1.3+VAR0*0.68+VAR1*0.68+VAR2*0.68)/6,21); \nVAR9:=EMA((VAR6*3+VAR7*2+VAR8)/6*1.738,21); \nVAR10:=REF(LOW,1); \nVAR11:=SMA(ABS(LOW-VAR10),3,1)/SMA(MAX(LOW-VAR10,0),3,1)*100; \nVAR12:=EMA(IFF(CLOSE*1.35<=VAR9,VAR11*10,VAR11/10),3); \nVAR13:=LLV(LOW,30); \nVAR14:=HHV(VAR12,30); \nVAR15:=IFF(MA(CLOSE,58),1,0); \nVAR16:=EMA(IFF(LOW<=VAR13,(VAR12+VAR14*2)/2,0),3)/618*VAR15;\n\nèµéå¥åº:IFF(VAR16>0,VAR16,0),LINETHICK,LINETHICK2, COLORFF0000; \n\nA1:IFF(èµéå¥åº>0,èµéå¥åº*1.2,0),STICK,LINETHICK5, COLORFF0000;\nA2:IFF(èµéå¥åº>0,èµéå¥åº*0.8,0),STICK,LINETHICK5, COLORFF6600;\nA3:IFF(èµéå¥åº>0,èµéå¥åº*0.6,0),STICK,LINETHICK5, COLORFF9900;\nA4:IFF(èµéå¥åº>0,èµéå¥åº*0.4,0) ,STICK,LINETHICK5,COLORFFCC00;\nA5:IFF(èµéå¥åº>0,èµéå¥åº*0.2,0) ,STICK,LINETHICK5,COLORFFFF00;"}},s.prototype.FXG_INDEX3=function(){return{Name:"éè½é»éç¹",Description:"éè½é»éç¹",IsMainIndex:!1,FloatPrecision:0,Args:[],Script:"A:=IFF((CLOSE>126.32),VOL,VOL); \nä¸»å:=MA(A,4),COLORRED;\næ¸¸èµ:=MA(A,8),COLORYELLOW;\nå¤§æ·:=MA(A,16),COLORF0F000;\næ£æ·:=MA(A,32),COLOR00FF00;\nä¸»æ¯:=ABS(((ä¸»å)/(ä¸»å + æ¸¸èµ + å¤§æ· + æ£æ·))*(100)),LINESTICK,COLORRED;\næ¸¸æ¯:=ABS(((æ¸¸èµ)/(ä¸»å + æ¸¸èµ + å¤§æ· + æ£æ·))*(100)),LINESTICK,COLORYELLOW;\nå¤§æ¯:=ABS(((å¤§æ·)/(ä¸»å + æ¸¸èµ + å¤§æ· + æ£æ·))*(100)),LINESTICK,COLORF0F000;\næ£æ¯:=ABS(((æ£æ·)/(ä¸»å + æ¸¸èµ + å¤§æ· + æ£æ·))*(100)),LINESTICK,COLOR00FF00;\nè­¦æçº¿:MA(A,180),COLORFF66FF;\nSTICKLINE((ä¸»å > 0),0,ä¸»å,2.5,0),COLOR1020BB;\nSTICKLINE((ä¸»å > 0),0,ä¸»å,0.7,0),COLORRED;\nSTICKLINE((æ¸¸èµ > 0),0,æ¸¸èµ,2.5,0),COLOR009CFF;\nSTICKLINE((æ¸¸èµ > 0),0,æ¸¸èµ,0.7,0),COLORYELLOW;\nSTICKLINE((å¤§æ· > 0),0,å¤§æ·,2.5,0),COLORFF8800;\nSTICKLINE((å¤§æ· > 0),0,å¤§æ·,0.7,0),COLORLIBLUE;\nSTICKLINE((æ£æ· > 0),0,æ£æ·,2.5,0),COLOR00CA00;\nSTICKLINE((æ£æ· > 0),0,æ£æ·,0.7,0),COLORGREEN;"}},s.prototype.NewsNegative=function(){return{Name:"è´é¢æ°é»",Description:"è´é¢æ°é»ç»è®¡",IsMainIndex:!1,FloatPrecision:0,Args:[{Name:"N",Value:5},{Name:"N2",Value:10}],Script:"è´é¢:NEWS(1);\nMA1:MA(è´é¢,N);\nMA2:MA(è´é¢,N2);"}},s.prototype.UpDownAnalyze=function(){return{Name:"æ¶¨è·è¶å¿",Description:"æ¶¨è·è¶å¿",IsMainIndex:!1,FloatPrecision:0,Condition:{Period:[Wn.MINUTE_ID,Wn.MULTIDAY_MINUTE_ID,Wn.KLINE_DAY_ID]},Args:[],Script:"ä¸æ¶¨å®¶æ°:UPCOUNT('CNA.CI'),COLORRED;\nä¸è·å®¶æ°:DOWNCOUNT('CNA.CI'),COLORGREEN;"}},s.prototype.HK2SHSZ=function(){return{Name:"åä¸èµé",Description:"åä¸èµé",IsMainIndex:!1,FloatPrecision:0,Condition:{Period:[Wn.MINUTE_ID,Wn.MULTIDAY_MINUTE_ID,Wn.KLINE_DAY_ID]},Args:[],Script:"åæµå¥:HK2SHSZ(1),COLORSTICK;"}},s.prototype.ShareHolder=function(){return{Name:"è¡ä¸äººæ°",Description:"è¡ä¸äººæ°",IsMainIndex:!1,FloatPrecision:0,Condition:{Period:[Wn.KLINE_DAY_ID,Wn.KLINE_MONTH_ID,Wn.KLINE_WEEK_ID,Wn.KLINE_YEAR_ID]},Args:[],Script:"äººæ°:FINANCE(100);"}},s.prototype.VOLRate=function(){return{Name:"éæ¯",Description:"éæ¯",IsMainIndex:!1,Condition:{Period:[Wn.MINUTE_ID,Wn.MULTIDAY_MINUTE_ID]},Args:[],Script:"LIANGBI:VOLR;"}},s.prototype.COLOR_KSTAR1=function(){return{Name:"åå­æ",Description:"åå­æ",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:CLOSE==OPEN&&HIGH>LOW;"}},s.prototype.COLOR_KSTAR2=function(){return{Name:"æ©æ¨ä¹æ",Description:"æ©æ¨ä¹æ",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:(REF(CLOSE,2)/REF(OPEN,2)<0.95) && (REF(OPEN,1) < REF(CLOSE,2)) && (ABS(REF(OPEN,1)-REF(CLOSE,1))/REF(CLOSE,1)<0.03) && CLOSE/OPEN>1.05 && CLOSE>REF(CLOSE,2);"}},s.prototype.COLOR_KSTAR3=function(){return{Name:"é»æä¹æ",Description:"é»æä¹æ",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:REF(CLOSE,2)/REF(OPEN,2)>1.05 && REF(OPEN,1)>REF(CLOSE,2) && ABS(REF(OPEN,1)-REF(CLOSE,1))/REF(CLOSE,1)<0.03 && CLOSE/OPEN<0.95 && CLOSE<REF(CLOSE,2);"}},s.prototype.COLOR_SHI1=function(){return{Name:"é¿åå­",Description:"é¿åå­",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:CLOSE==OPEN&&HIGH/LOW>1.03;"}},s.prototype.COLOR_K220=function(){return{Name:"èº«æå­ç²",Description:"èº«æå­ç²",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:ABS(REF(CLOSE,1)-REF(OPEN,1))/REF(CLOSE,1)>0.04&&\n            ABS(CLOSE-OPEN)/CLOSE<0.005&&\n            MAX(CLOSE,OPEN)<MAX(REF(CLOSE,1),REF(OPEN,1))&&\n            MIN(CLOSE,OPEN)>MIN(REF(CLOSE,1),REF(OPEN,1));"}},s.prototype.COLOR_K300=function(){return{Name:"ä¸ä¸ªç½æ­¦å£«",Description:"ä¸ä¸ªç½æ­¦å£«",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:UPNDAY(CLOSE,3)&&NDAY(CLOSE,OPEN,3);"}},s.prototype.COLOR_K310=function(){return{Name:"ä¸åªä¹é¸¦",Description:"ä¸åªä¹é¸¦",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:DOWNNDAY(CLOSE,3)&&NDAY(OPEN,CLOSE,3);"}},s.prototype.COLOR_K380=function(){return{Name:"åå¤´é³çº¿",Description:"åå¤´é³çº¿",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:HIGH==CLOSE&&HIGH>LOW;"}},s.prototype.COLOR_K390=function(){return{Name:"åèé´çº¿",Description:"åèé´çº¿",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:LOW==CLOSE&&HIGH>LOW;"}},s.prototype.COLOR_K134=function(){return{Name:"åæ­»åå­",Description:"åæ­»åå­",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:CLOSE==OPEN&&CLOSE==LOW&&CLOSE<HIGH;"}},s.prototype.COLOR_K140=function(){return{Name:"æ©æ¨åå­æ",Description:"æ©æ¨åå­æ",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:REF(CLOSE,2)/REF(OPEN,2)<0.95&&\nREF(OPEN,1)<REF(CLOSE,2)&&\nREF(OPEN,1)==REF(CLOSE,1)&&\nCLOSE/OPEN>1.05&&CLOSE>REF(CLOSE,2);"}},s.prototype.COLOR_K150=function(){return{Name:"é»æåå­æ",Description:"é»æåå­æ",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:REF(CLOSE,2)/REF(OPEN,2)>1.05&&\nREF(OPEN,1)>REF(CLOSE,2)&&\nREF(OPEN,1)=REF(CLOSE,1)&&\nCLOSE/OPEN<0.95&&CLOSE<REF(CLOSE,2);"}},s.prototype.COLOR_K160=function(){return{Name:"å°å»ä¹æ",Description:"å°å»ä¹æ",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:MIN(OPEN,CLOSE)==LOW&&\nHIGH-LOW>3*(MAX(OPEN,CLOSE)-LOW)&&\nCLOSE>MA(CLOSE,5);"}},s.prototype.COLOR_K165=function(){return{Name:"åè½¬é¤å¤´",Description:"åè½¬é¤å¤´",IsMainIndex:!0,InstructionType:2,Script:"KSTAR:MIN(OPEN,CLOSE)==LOW&&\nHIGH-LOW>3*(MAX(OPEN,CLOSE)-LOW)&&\nCLOSE<MA(CLOSE,5);"}},s.prototype.COLOR_K170=function(){return{Name:"é¤å¤´",Description:"é¤å¤´",IsMainIndex:!0,InstructionType:2,Script:"OUT:HIGH==MAX(OPEN,CLOSE)&&\nHIGH-LOW>3*(HIGH-MIN(OPEN,CLOSE))&&\nCLOSE<MA(CLOSE,5);"}},s.prototype.COLOR_K180=function(){return{Name:"åé¢",Description:"åé¢",IsMainIndex:!0,InstructionType:2,Script:"OUT:HIGH==MAX(OPEN,CLOSE)&&\nHIGH-LOW>3*(HIGH-MIN(OPEN,CLOSE))&&\nCLOSE>MA(CLOSE,5);"}},s.prototype.COLOR_K190=function(){return{Name:"ç©¿å¤´ç ´è",Description:"ç©¿å¤´ç ´è",IsMainIndex:!0,InstructionType:2,Script:"OUT:(REF(CLOSE,1)/REF(OPEN,1)>1.03&&\nCLOSE/OPEN<0.96&&\nCLOSE<REF(OPEN,1)&&OPEN>REF(CLOSE,1))||\n(REF(CLOSE,1)/REF(OPEN,1)<0.97&&\nCLOSE/OPEN>1.04&&\nCLOSE>REF(OPEN,1)&&OPEN<REF(CLOSE,1));"}},s.prototype.COLOR_SWORD=function(){return{Name:"å",Description:"å",IsMainIndex:!0,InstructionType:2,Script:"AA:=VOL>REF(VOL,1)||VOL>(CAPITAL*0.1);\nBB:=OPEN>=(REF(HIGH,1))&&REF(HIGH,1)>(REF(HIGH,2)*1.06);\nCC:=CLOSE>(REF(CLOSE,1))-(REF(CLOSE,1)*0.01);\nDD:=CLOSE<(HIGH*0.965) && HIGH>(OPEN*1.05);\nEE:=LOW<OPEN && LOW<CLOSE&&HIGH>(REF(CLOSE,1)*1.06);\nFF:=(HIGH-(MAX(OPEN,CLOSE)))/2>(MIN(OPEN,CLOSE))-LOW;\nGG:=(ABS(OPEN-CLOSE))/2<(MIN(OPEN,CLOSE)-LOW);\nSWORDO:AA&&BB&&CC&&DD&&EE&&FF&&GG;"}},s.prototype.COLOR_CSFR=function(){return{Name:"åºæ°´èè",Description:"åºæ°´èè",IsMainIndex:!0,InstructionType:2,Script:"A:=CLOSE>OPEN;\nB:=A&&CLOSE>MA(CLOSE,S)&&CLOSE>MA(CLOSE,M)&&CLOSE>MA(CLOSE,LL);\nCC:=B&&OPEN<MA(CLOSE,M)&&OPEN<MA(CLOSE,LL);\nCSFRO:CC&&(CLOSE-OPEN)>0.0618*CLOSE;"}},s.prototype.COLOR_WYGD=function(){return{Name:"ä¹äºçé¡¶",Description:"ä¹äºçé¡¶",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( \nREF(CLOSE,1)/REF(OPEN,1)>1.03 AND \nCLOSE/OPEN<0.97 AND \nOPEN>REF(CLOSE,1) AND CLOSE<REF(CLOSE,1), 3);"}},s.prototype.COLOR_SGCJ=function(){return{Name:"æååç°",Description:"æååç°",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( \nREF(CLOSE,1)/REF(OPEN,1)<0.97 AND \nCLOSE/OPEN>1.03 AND \nOPEN<REF(CLOSE,1) AND CLOSE>REF(CLOSE,1), 3);"}},s.prototype.COLOR_SZTAI=function(){return{Name:"åå­è",Description:"åå­è",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( ABS(REF(CLOSE,1)-REF(OPEN,1))/REF(CLOSE,1) > 0.04 AND \nCLOSE==OPEN AND CLOSE < MAX(REF(CLOSE,1),REF(OPEN,1)) AND \nCLOSE > MIN(REF(CLOSE,1),REF(OPEN,1)), 2);"}},s.prototype.COLOR_PINGDING=function(){return{Name:"å¹³é¡¶",Description:"å¹³é¡¶",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET(ABS(HIGH-REF(HIGH,1))/HIGH<0.001,2);"}},s.prototype.COLOR_PINGDI=function(){return{Name:"å¹³åº",Description:"å¹³åº",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET((ABS(LOW-REF(LOW,1))/LOW<0.001 AND \nABS(REF(LOW,1)-REF(LOW,2))/REF(LOW,1)<=0.001),2);"}},s.prototype.COLOR_DAYANZHU=function(){return{Name:"å¤§é³ç",Description:"å¤§é³ç",IsMainIndex:!0,InstructionType:2,Script:"VAR1:CLOSE/OPEN>1.05 AND HIGH/LOW < CLOSE/OPEN+0.018;"}},s.prototype.COLOR_DAYINGZHU=function(){return{Name:"å¤§é´ç",Description:"å¤§é´ç",IsMainIndex:!0,InstructionType:2,Script:"VAR1:OPEN/CLOSE > 1.05 AND HIGH/LOW < OPEN/CLOSE+0.018;"}},s.prototype.COLOR_HYFG=function(){return{Name:"å¥½ååæ»",Description:"å¥½ååæ»",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( (REF(CLOSE,1)<REF(OPEN,1) AND \nCLOSE>OPEN AND ABS(CLOSE-REF(CLOSE,1))/CLOSE<0.002),2);"}},s.prototype.COLOR_TKQK=function(){return{Name:"è·³ç©ºç¼ºå£",Description:"è·³ç©ºç¼ºå£",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( HIGH<REF(LOW,1) OR LOW>REF(HIGH,1),2);"}},s.prototype.COLOR_SFWY=function(){return{Name:"åé£ä¹é¸¦",Description:"åé£ä¹é¸¦",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( REF(CLOSE,1)<REF(OPEN,1) AND CLOSE<OPEN AND CLOSE/OPEN<0.98,1);"}},s.prototype.COLOR_SSSBQ=function(){return{Name:"ä¸åä¸é¨æ²",Description:"ä¸åä¸é¨æ²",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( \nREF(CLOSE,4)/REF(OPEN,4)>1.03 AND \nREF(CLOSE,3)<REF(OPEN,3) AND \nREF(CLOSE,2)<REF(OPEN,2) AND \nREF(CLOSE,1)<REF(OPEN,1) AND \nREF(LOW,4)<REF(LOW,3) AND \nREF(LOW,4)<REF(LOW,2) AND \nREF(LOW,4)<REF(LOW,1) AND \nREF(HIGH,4)>REF(HIGH,3) AND \nREF(HIGH,4)>REF(HIGH,2) AND \nREF(HIGH,4)>REF(HIGH,1) AND \nCLOSE/OPEN>1.03 AND \nCLOSE>REF(CLOSE,4), 5);"}},s.prototype.COLOR_XDSBQ=function(){return{Name:"ä¸è·ä¸é¨æ²",Description:"ä¸è·ä¸é¨æ²",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( \nREF(CLOSE,4)/REF(OPEN,4)<0.97 AND \nREF(CLOSE,3)>REF(OPEN,3) AND \nREF(CLOSE,2)>REF(OPEN,2) AND \nREF(CLOSE,1)>REF(OPEN,1) AND \nREF(LOW,4)<REF(LOW,3) AND \nREF(LOW,4)<REF(LOW,2) AND \nREF(LOW,4)<REF(LOW,1) AND \nREF(HIGH,4)>REF(HIGH,3) AND \nREF(HIGH,4)>REF(HIGH,2) AND \nREF(HIGH,4)>REF(HIGH,1) AND \nCLOSE/OPEN<0.97 AND \nCLOSE<REF(CLOSE,4), 5);"}},s.prototype.COLOR_CHXY=function(){return{Name:"é¿ä¸å½±",Description:"é¿ä¸å½±",IsMainIndex:!0,InstructionType:2,Script:"VAR2:(MIN(CLOSE,OPEN)-LOW)/(HIGH-LOW)>0.667;"}},s.prototype.COLOR_CHSY=function(){return{Name:"é¿ä¸å½±",Description:"é¿ä¸å½±",IsMainIndex:!0,InstructionType:2,Script:"VAR2:(HIGH-MAX(CLOSE,OPEN))/(HIGH-LOW)>0.667,COLORBLUE;"}},s.prototype.COLOR_FENLI=function(){return{Name:"åç¦»",Description:"åç¦»",IsMainIndex:!0,InstructionType:2,Script:"VAR1:BACKSET( OPEN==REF(OPEN,1) AND (CLOSE-OPEN)*(REF(CLOSE,1)-REF(OPEN,1))<0,2);"}},s.prototype.TRADE_BIAS=function(){return{Name:"BIAS",Description:"ä¹ç¦»çä¸å®¶ç³»ç»",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:12},{Name:"LL",Value:6},{Name:"LH",Value:6}],Script:"BIAS:=(CLOSE-MA(CLOSE,N))/MA(CLOSE,N)*100;\nENTERLONG:CROSS(-LL,BIAS);\nEXITLONG:CROSS(BIAS,LH);"}},s.prototype.TRADE_CCI=function(){return{Name:"CCI",Description:"CCIä¸å®¶ç³»ç»",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:14}],Script:"TYP:=(HIGH+LOW+CLOSE)/3;\nCCI:=(TYP-MA(TYP,N))/(0.015*AVEDEV(TYP,N));\nINDEX:=CCI;\nENTERLONG:CROSS(INDEX,-100);\nEXITLONG:CROSS(100,INDEX);"}},s.prototype.TRADE_DMI=function(){return{Name:"DMI",Description:"è¶åä¸å®¶ç³»ç»",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:14}],Script:"MTR:=SUM(MAX(MAX(HIGH-LOW,ABS(HIGH-REF(CLOSE,1))),ABS(LOW-REF(CLOSE,1))),N);\nHD :=HIGH-REF(HIGH,1);\nLD :=REF(LOW,1)-LOW;\nPDM:=SUM(IF(HD>0&&HD>LD,HD,0),N);\nMDM:=SUM(IF(LD>0&&LD>HD,LD,0),N);\nPDI:=PDM*100/MTR;\nMDI:=MDM*100/MTR;\nENTERLONG:CROSS(PDI,MDI);\nEXITLONG:CROSS(MDI,PDI);"}},s.prototype.TRADE_KD=function(){return{Name:"KD",Description:"KDææ ä¸å®¶ç³»ç»",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3},{Name:"M2",Value:3}],Script:"WRSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nWK:=SMA(WRSV,M1,1);\nD:=SMA(WK,M2,1);\nENTERLONG:CROSS(WK,D)&&WK<20;\nEXITLONG:CROSS(D,WK)&&WK>80;"}},s.prototype.TRADE_BOLL=function(){return{Name:"BOLL",Description:"å¸æå¸¦ä¸å®¶ç³»ç»",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:20}],Script:"MID :=MA(CLOSE,N);\nUPPER:=MID+2*STD(CLOSE,N);\nLOWER:=MID-2*STD(CLOSE,N);\nENTERLONG:CROSS(CLOSE,LOWER);\nEXITLONG:CROSS(CLOSE,UPPER);"}},s.prototype.TRADE_KDJ=function(){return{Name:"KDJ",Description:"KDJä¸å®¶ç³»ç»",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:9},{Name:"M1",Value:3}],Script:"RSV:=(CLOSE-LLV(LOW,N))/(HHV(HIGH,N)-LLV(LOW,N))*100;\nK:=SMA(RSV,M1,1);\nD:=SMA(K,M1,1);\nJ:=3*K-2*D;\nENTERLONG:CROSS(J,0);\nEXITLONG:CROSS(100,J);"}},s.prototype.TRADE_MA=function(){return{Name:"MA",Description:"åçº¿ä¸å®¶ç³»ç»",IsMainIndex:!0,InstructionType:1,Args:[{Name:"SHORT",Value:5},{Name:"LONG",Value:20}],Script:"ENTERLONG:CROSS(MA(CLOSE,SHORT),MA(CLOSE,LONG));\nEXITLONG:CROSS(MA(CLOSE,LONG),MA(CLOSE,SHORT));"}},s.prototype.TRADE_MACD=function(){return{Name:"MACD",Description:"MACDä¸å®¶ç³»ç»",IsMainIndex:!0,InstructionType:1,Args:[{Name:"LONG",Value:26},{Name:"SHORT",Value:12},{Name:"M",Value:9}],Script:"DIFF:=EMA(CLOSE,SHORT) - EMA(CLOSE,LONG);\nDEA  := EMA(DIFF,M);\nMACD := 2*(DIFF-DEA);\nENTERLONG:CROSS(MACD,0);\nEXITLONG:CROSS(0,MACD);"}},s.prototype.TRADE_MTM=function(){return{Name:"MTM",Description:"å¨åææ ä¸å®¶ç³»ç»",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:6}],Script:"WMTM:=C-REF(C,N);\nENTERLONG:CROSS(WMTM,0);\nEXITLONG:CROSS(0,WMTM);"}},s.prototype.TRADE_PSY=function(){return{Name:"PSY",Description:"PSYå¿ççº¿ä¸å®¶ç³»ç»",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:12},{Name:"LL",Value:10},{Name:"LH",Value:85}],Script:"MYPSY:=COUNT(CLOSE>REF(CLOSE,1),N)/N*100;\nENTERLONG:CROSS(LL,MYPSY);\nEXITLONG:CROSS(MYPSY,LH);"}},s.prototype.TRADE_ROC=function(){return{Name:"ROC",Description:"åå¨éçä¸å®¶ç³»ç»",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:12},{Name:"M",Value:6}],Script:"WROC:=MA(100*(CLOSE-REF(CLOSE,N))/REF(CLOSE,N),M);\nENTERLONG:CROSS(WROC,0);\nEXITLONG:CROSS(0,WROC);"}},s.prototype.TRADE_RSI=function(){return{Name:"RSI",Description:"ç¸å¯¹å¼ºå¼±ä¸å®¶ç³»ç»",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:6},{Name:"LL",Value:20},{Name:"LH",Value:80}],Script:"LC:=REF(CLOSE,1);\nWRSI:=SMA(MAX(CLOSE-LC,0),N,1)/SMA(ABS(CLOSE-LC),N,1)*100;\nENTERLONG:CROSS(WRSI,LL);\nEXITLONG:CROSS(LH,WRSI);"}},s.prototype.TRADE_VR=function(){return{Name:"VR",Description:"VRå®¹éæ¯çä¸å®¶ç³»ç»",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N",Value:26},{Name:"LL",Value:70},{Name:"LH",Value:250}],Script:"WVR := SUM((IF(CLOSE>OPEN,VOL,0)+IF(CLOSE=OPEN,VOL/2,0)),N)/SUM((IF(CLOSE<OPEN,VOL,0)+IF(CLOSE=OPEN,VOL/2,0)),N)*100;\nENTERLONG:CROSS(LL,WVR);\nEXITLONG:CROSS(WVR,LH);"}},s.prototype.TRADE_DPSJ=function(){return{Name:"DPSJ",Description:"å¤§çéæºä¸å®¶ç³»ç»",IsMainIndex:!0,InstructionType:1,Args:[{Name:"N1",Value:18},{Name:"N2",Value:12}],Script:"RSV:=(INDEXC-LLV(INDEXL,N1))/(HHV(INDEXH,N1)-LLV(INDEXL,N1))*100;\nK:=SMA(RSV,N2,1);\nHSL:VOL/100/(FINANCE(7));\nENTERLONG: CROSS(K,20);\nEXITLONG: (CROSS(HSL,5) OR CROSS(K,80));"}},s.prototype.HeikinAshi=function(){return{Name:"å¹³åKçº¿",Description:"Heikin-Ashi å¹³åKçº¿",IsMainIndex:!0,KLineType:-1,Args:[],Script:"HCLOSE:(OPEN+HIGH+LOW+CLOSE)/4, NODRAW;\nHOPEN:(REF(OPEN,1)+REF(CLOSE,1))/2,NODRAW;\nHHIGH:MAX(HIGH,MAX(HOPEN,HCLOSE)),NODRAW;\nHLOW:MIN(LOW,MIN(HOPEN,HCLOSE)),NODRAW;\nDRAWKLINE(HHIGH,HOPEN,HLOW,HCLOSE);"}},s.prototype.ADL=function(){return{Name:"è¾è½ææ ",Description:"è¾è½ææ ",IsMainIndex:!1,StringFormat:2,Condition:{Period:[Wn.KLINE_DAY_ID,Wn.KLINE_WEEK_ID,Wn.KLINE_TWOWEEK_ID,Wn.KLINE_MONTH_ID,Wn.KLINE_QUARTER_ID,Wn.KLINE_YEAR_ID],Include:["000001.SH","000003.SH","000016.SH","000300.SH","000905.SH","399001.SZ"," 399005.SZ","399006.SZ"]},Args:[{Name:"M",Value:7}],Script:"ADL:SUM(ADVANCE-DECLINE,0);\nMAADL:MA(ADL,M);"}},s.prototype.EMPTY=function(){return{Name:"",Description:"ç©ºææ ",IsMainIndex:!0,Args:[],Script:"VAR2:=C;"}},s.prototype.CJL=function(){return{Name:"CJL",Description:"æè´§æä»é",IsMainIndex:!1,Args:[],Script:"æäº¤é:VOL,VOLSTICK;\næä»é:VOLINSTK,LINEOVERLAY;"}},s.prototype.VOL_POSITION=function(){return{Name:"æä»é",Description:"æä»é",IsMainIndex:!1,Args:[],Script:"æäº¤é:VOL,VOLSTICK;\næä»é:VOLINSTK,SINGLELINE;"}},s.prototype.ASI=function(){return{Name:"ASI",Description:"æ¯å¨åéææ ",IsMainIndex:!1,Args:[{Name:"N1",Value:6}],Script:"X_1:=REF(CLOSE,1);\nX_2:=ABS(HIGH-X_1);\nX_3:=ABS(LOW-X_1);\nX_4:=ABS(HIGH-REF(LOW,1));\nX_5:=ABS(X_1-REF(OPEN,1));\nX_6:=IF(X_2>X_3 AND X_2>X_4,X_2+X_3/2+X_5/4,IF(X_3>X_4 AND X_3>X_2,X_3+X_2/2+X_5/4,X_4+X_5/4));\nX_7:=CLOSE-X_1+(CLOSE-OPEN)/2+X_1-REF(OPEN,1);\nX_8:=8*X_7/X_6*MAX(X_2,X_3);\nASI:SUM(X_8,0),LINETHICK2;\nMASI:MA(ASI,N1),LINETHICK2;"}},s.prototype.DC=function(){return{Name:"DC",Description:"åå¥å®éé",IsMainIndex:!0,Args:[{Name:"N1",Value:20}],Script:"UPPER:HHV(H,N1),COLORBLUE,LINETHICK2;\nLOWER:LLV(L,N1),COLORBLUE,LINETHICK2;\nMIDDLE:(UPPER+LOWER)/2,COLORRED,LINETHICK3;"}},s.prototype.DEMA=function(){return{Name:"DEMA",Description:"åéææ°ç§»å¨åçº¿",IsMainIndex:!0,Args:[{Name:"N1",Value:10}],Script:"ERR:=C-EMA(C,N1);\nDEMA:EMA(C,10)+EMA(ERR,N1);"}},s.prototype.VWAP=function(){return{Name:"VWAP",Description:"æäº¤éå æå¹³åä»·",IsMainIndex:!0,Args:[{Name:"N1",Value:10}],Script:"PRICE:=(H+L+C)/3;\nT2:=VOL*PRICE;\nVWAP:SUM(T2,0)/SUM(VOL,0);"}},s.prototype.SQJZ=function(){return{Name:"SQJZ",Description:"ç¥å¥ä¹è½¬",IsMainIndex:!0,Script:"B:=C<REF(C,4);\nN:=CURRBARSCOUNT;\nB1:=(N=6 AND REFXV(COUNT(B,6),5)=6) OR (N=7 AND REFXV(COUNT(B,7),6)=7) OR (N=8 AND REFXV(COUNT(B,8),7)=8) OR (N>=9 AND REFXV(COUNT(B,9),8)=9);\nDRAWNUMBER(B1 AND REF(B,1)=0,L,1),COLORMAGENTA;\nB2:=(N=5 AND REFXV(COUNT(B,6),4)=6) OR (N=6 AND REFXV(COUNT(B,7),5)=7) OR (N=7 AND REFXV(COUNT(B,8),6)=8) OR (N>=8 AND REFXV(COUNT(B,9),7)=9);\nDRAWNUMBER(B2 AND REF(B,2)=0,L,2),COLORMAGENTA;\nB8:=(N=1 AND COUNT(B,8)=8) OR (N>=2 AND REFXV(COUNT(B,9),1)=9);\nDRAWNUMBER(B8 AND REF(B,8)=0,L,8),COLORMAGENTA;\nB9:=(N>=1 AND COUNT(B,9)=9);\nDRAWNUMBER(B9 AND REF(B,9)=0,L,9),COLORBROWN;\nS:=C>REF(C,4);\nS1:=(N=6 AND REFXV(COUNT(S,6),5)=6) OR (N=7 AND REFXV(COUNT(S,7),6)=7) OR (N=8 AND REFXV(COUNT(S,8),7)=8) OR (N>=9 AND REFXV(COUNT(S,9),8)=9);\nDRAWNUMBER(S1 AND REF(S,1)=0,H,1),COLORMAGENTA,DRAWABOVE;\nS2:=(N=5 AND REFXV(COUNT(S,6),4)=6) OR (N=6 AND REFXV(COUNT(S,7),5)=7) OR (N=7 AND REFXV(COUNT(S,8),6)=8) OR (N>=8 AND REFXV(COUNT(S,9),7)=9);\nDRAWNUMBER(S2 AND REF(S,2)=0,H,2),COLORMAGENTA,DRAWABOVE;\nS8:=(N=1 AND COUNT(S,8)=8) OR (N>=2 AND REFXV(COUNT(S,9),1)=9);\nDRAWNUMBER(S8 AND REF(S,8)=0,H,8),COLORMAGENTA,DRAWABOVE;\nS9:=(N>=1 AND COUNT(S,9)=9);\nDRAWNUMBER(S9 AND REF(S,9)=0,H,9),COLORGREEN,DRAWABOVE;"}},s.prototype.XT=function(){return{Name:"XT",Description:"ç®±ä½",IsMainIndex:!0,Args:[{Name:"N",Value:10}],Script:"ãç®±é¡¶ã:PEAK(CLOSE,N,1)*0.98;\nãç®±åºã:TROUGH(CLOSE,N,1)*1.02;\nãç®±é«ã:100*(ãç®±é¡¶ã-ãç®±åºã)/ãç®±åºã,NODRAW;"}},s.prototype.CFJT=function(){return{Name:"CFJT",Description:"è´¢å¯é¶æ¢¯",IsMainIndex:!0,Script:"çªç ´:=REF(EMA(C,14),1);\nA1X:=(EMA(C,10)-çªç ´)/çªç ´*100;\nå¤æ¹:=IF(A1X>=0,REF(EMA(C,10),BARSLAST(CROSS(A1X,0))+1),DRAWNULL);\nç©ºæ¹:=IF(A1X<0,REF(EMA(C,10),BARSLAST(CROSS(0,A1X))+1),DRAWNULL);\nSTICKLINE(A1X>=0,å¤æ¹,çªç ´,110,0),COLORRED;\nSTICKLINE(A1X<0,ç©ºæ¹,çªç ´,110,0),COLORGREEN;"}},s.prototype.CYX=function(){return{Name:"CYX",Description:"æåçº¿",IsMainIndex:!0,Args:[{Name:"N",Value:7}],Script:"Z1:=STRCAT(HYBLOCK,' ');\nZ2:=STRCAT(Z1,DYBLOCK);\nZ3:=STRCAT(Z2,' ');\nDRAWTEXT_FIX(ISLASTBAR,0,0,0,STRCAT(Z3,GNBLOCK)),COLOR00C0C0;\nA1:=REF(H,N)=HHV(H,2*N+1);\nB1:=FILTER(A1,N);\nC1:=BACKSET(B1,N+1);\nD1:=FILTER(C1,N);\nA2:=REF(L,N)=LLV(L,2*N+1);\nB2:=FILTER(A2,N);\nC2:=BACKSET(B2,N+1);\nD2:=FILTER(C2,N);\nE1:=(REF(LLV(L,2*N),1)+REF(HHV(H,2*N),1))/2;\nE2:=(H+L)/2;\nH1:=(D1 AND NOT(D2 AND E1>=E2)) OR ISLASTBAR OR BARSCOUNT(C)=1;\nL1:=(D2 AND NOT(D1 AND E1<E2));\nH2:=D1 AND NOT(D2 AND E1>=E2);\nX1:=REF(BARSLAST(H1),1)+1;\nF1:=BACKSET(H1 AND COUNT(L1,X1)>0,LLVBARS(IF(L1,L,10000),X1));\nG1:=F1>REF(F1,1);\nI1:=BACKSET(G1,2);\nLD:=I1>REF(I1,1);\nL2:=LD OR ISLASTBAR OR BARSCOUNT(C)=1;\nX2:=REF(BARSLAST(L2),1)+1;\nF2:=BACKSET(L2 AND COUNT(H2,X2)>0,HHVBARS(IF(H2,H,0),X2));\nG2:=F2>REF(F2,1);\nI2:=BACKSET(G2,2);\nHD:=I2>REF(I2,1);\nR1:=BACKSET(ISLASTBAR,BARSLAST(HD)+1);\nS1:=R1>REF(R1,1);\nT1:=BACKSET(ISLASTBAR,BARSLAST(LD)+1);\nU1:=T1>REF(T1,1);\nR2:=BACKSET(S1,REF(BARSLAST(HD),1)+2);\nS2:=R2>REF(R2,1);\nT2:=BACKSET(U1,REF(BARSLAST(LD),1)+2);\nU2:=T2>REF(T2,1);\nDRAWLINE(S2,H,S1,H,1),LINETHICK2,COLORRED;\nDRAWLINE(U2,L,U1,L,1),LINETHICK2,COLORGREEN;"}},s.prototype.WAVE=function(){return{Name:"WAVE",Description:"æ³¢æµªåæ",IsMainIndex:!0,Args:[{Name:"N",Value:5}],Script:"ZIG(3,N);"}},s.prototype.ShareholderCount=function(){return{Name:"æ£æ·çº¿",Description:"æ£æ·çº¿",IsMainIndex:!1,Script:"GPJYVALUE(1,1,1);"}},s.prototype.NXTS=function(){return{Name:"NXTS",Description:"ççå¤©æ°",IsMainIndex:!1,Args:[{Name:"N",Value:20}],Script:"Z:=ZIG(C,N);\né«ç¹:=Z>REF(Z,1) AND Z>REFX(Z,1);\nä½ç¹:=Z<REF(Z,1) AND Z<REFX(Z,1);\nNG:=BARSLAST(é«ç¹);\nND:=BARSLAST(ä½ç¹);\nD0:=DATETODAY(DATE)-DATETODAY(REF(DATE,BARSSINCE(C)));\nDG:=DATETODAY(DATE)-DATETODAY(REF(DATE,NG));\nDD:=DATETODAY(DATE)-DATETODAY(REF(DATE,ND));\nN1:=(NG>ND OR COUNT(é«ç¹,0)=0) AND ND>0 AND (HHV(C,ND)-REF(C,ND))/REF(C,ND)>(N/100);\nN2:=NG<ND AND NG>0 AND (LLV(C,NG)-REF(C,NG))/REF(C,NG)>=-(N/100);\nN3:=NG<ND AND NG=0;\nN4:=COUNT(ä½ç¹ OR é«ç¹,0)=0 AND (HHV(C,0)-REF(C,BARSSINCE(C)))/REF(C,BARSSINCE(C))>(N/100);\nN5:=COUNT(ä½ç¹,0)=0 AND NG>0 AND (LLV(C,NG)-REF(C,NG))/REF(C,NG)>=-(N/100);\nN6:=COUNT(ä½ç¹,0)=0 AND NG=0;\nX1:=(NG<ND OR COUNT(ä½ç¹,0)=0) AND NG>0 AND (LLV(C,NG)-REF(C,NG))/REF(C,NG)<-(N/100);\nX2:=NG>ND AND ND>0 AND (HHV(C,ND)-REF(C,ND))/REF(C,ND)<=(N/100);\nX3:=NG>ND AND ND=0;\nX4:=COUNT(é«ç¹ OR ä½ç¹,0)=0 AND (LLV(C,0)-REF(C,BARSSINCE(C)))/REF(C,BARSSINCE(C))<-(N/100);\nX5:=COUNT(é«ç¹,0)=0 AND ND>0 AND (HHV(C,ND)-REF(C,ND))/REF(C,ND)<=(N/100);\nX6:=COUNT(é«ç¹,0)=0 AND ND=0;\nçå¸å¤©æ°:IF(N4 OR N5 OR N6,D0,IF(N1 OR N2 OR N3,DD,0)),COLORRED;\nçå¸å¤©æ°:IF(X4 OR X5 OR X6,D0,IF(X1 OR X2 OR X3,DG,0)),COLORGREEN;"}},s.prototype.FKX=function(){return{Name:"FKX",Description:"åKçº¿",IsMainIndex:!1,Script:"DRAWKLINE(-LOW, -OPEN, -HIGH, -CLOSE);"}},s.prototype.Margin4=function(){return{Name:"ä¸¤èèµé",Description:"ä¸¤èèµé",IsMainIndex:!1,Script:"TMPV:=IF(FINANCE(3)==0,REF(SCJYVALUE(1,1,1),1),REF(GPJYVALUE(3,1,1),1));\nTMPV1:=IF(FINANCE(3)==0,SCJYVALUE(1,1,0),GPJYVALUE(3,1,0));\nä¸¤è:IF(TMPV==0 OR TMPV1==0,DRAWNULL,IF(FINANCE(3)==0,(SCJYVALUE(1,1,1)-REF(SCJYVALUE(1,1,1),1))/10000-(SCJYVALUE(1,2,1)-REF(SCJYVALUE(1,2,1),1))/10000,((GPJYVALUE(3,1,1)-REF(GPJYVALUE(3,1,1),1))-((GPJYVALUE(3,2,1)*C/10000-(REF(GPJYVALUE(3,2,1),1)*REF(C,1)/10000)))))),NODRAW;\nSTICKLINE(ä¸¤è>0,0,ä¸¤è,2,0),COLORRED;\nSTICKLINE(ä¸¤è<0,0,ä¸¤è,2,0),COLORCYAN;"}},s.prototype.ZSDB=function(){return{Name:"ZSDB",Description:"ææ°å¯¹æ¯(å¯å¾,éä¸è½½æ¥çº¿)",IsMainIndex:!1,Script:"A:=REF(INDEXC,1);\nææ°æ¶¨å¹:IF(A>0,(INDEXC-A)*100/A,0),NODRAW;\nDRAWKLINE(INDEXH,INDEXO,INDEXL,INDEXC);"}},s.prototype.NineTurns=function(){return{Name:"ç¥å¥ä¹è½¬",Description:"ä¹è½¬ææ ",IsMainIndex:!0,Script:"A1:=C>REF(C,4);\nA2:=C<REF(C,4);\nT1:=A2 AND REF(A1,1);\nT2:=A2 AND REF(T1,1);\nT3:=A2 AND REF(T2,1);\nT4:=A2 AND REF(T3,1);\nT5:=A2 AND REF(T4,1);\nT6:=A2 AND REF(T5,1);\nT7:=A2 AND REF(T6,1);\nT8:=A2 AND REF(T7,1);\nT9:=A2 AND REF(T8,1);\nT10:=A2 AND REF(T9,1);\nT11:=A2 AND REF(T10,1);\nT12:=A2 AND REF(T11,1);\nT13:=A2 AND REF(T12,1);\nT14:=A2 AND REF(T13,1);\nDRAWTEXT(T1,L*0.98,'1'),COLORGREEN;\nDRAWTEXT(T2,L*0.98,'2'),COLORGREEN;\nDRAWTEXT(T3,L*0.98,'3'),COLORGREEN;\nDRAWTEXT(T4,L*0.98,'4'),COLORGREEN;\nDRAWTEXT(T5,L*0.98,'5'),COLORGREEN;\nDRAWTEXT(T6,L*0.98,'6'),COLORGREEN;\nDRAWTEXT(T7,L*0.98,'7'),COLORGREEN;\nDRAWTEXT(T8,L*0.98,'8'),COLORGREEN;\nDRAWTEXT(T9,L*0.98,'9'),COLORBLUE;\nB1:=C<REF(C,4);\nB2:=C>REF(C,4);\nD1:=B2 AND REF(B1,1);\nD2:=B2 AND REF(D1,1);\nD3:=B2 AND REF(D2,1);\nD4:=B2 AND REF(D3,1);\nD5:=B2 AND REF(D4,1);\nD6:=B2 AND REF(D5,1);\nD7:=B2 AND REF(D6,1);\nD8:=B2 AND REF(D7,1);\nD9:=B2 AND REF(D8,1);\nD10:=B2 AND REF(D9,1);\nD11:=B2 AND REF(D10,1);\nD12:=B2 AND REF(D11,1);\nD13:=B2 AND REF(D12,1);\nD14:=B2 AND REF(D13,1);\nDRAWTEXT(D1,H*1.010,'1'),COLORBLUE;\nDRAWTEXT(D2,H*1.010,'2'),COLORBLUE;\nDRAWTEXT(D3,H*1.010,'3'),COLORBLUE;\nDRAWTEXT(D4,H*1.010,'4'),COLORBLUE;\nDRAWTEXT(D5,H*1.010,'5'),COLORBLUE;\nDRAWTEXT(D6,H*1.010,'6'),COLORBLUE;\nDRAWTEXT(D7,H*1.010,'7'),COLORBLUE;\nDRAWTEXT(D8,H*1.010,'8'),COLORBLUE;\nDRAWTEXT(D9,H*1.010,'9'),COLORGREEN;"}},s.prototype.ICHIMOKU=function(){return{Name:"ICHIMOKU",Description:"ä¸ç®åè¡¡å¾",IsMainIndex:!0,Args:[{Name:"SHORT",Value:7},{Name:"MID",Value:22},{Name:"LONG",Value:44}],Script:"è½¬æ¢çº¿:(HHV(H,SHORT)+LLV(L,SHORT))/2,COLORRED,LINETHICK2;\nåºåçº¿:(HHV(H,MID)+LLV(L,MID))/2,COLORFF8040,LINETHICK2;\nè¿è¡å¸¦:REFXV(C,MID),COLORGRAY,LINETHICK2;\nA:=REF((è½¬æ¢çº¿+åºåçº¿)/2,MID);\nB:=REF((HHV(H,LONG)+LLV(L,LONG))/2,MID);\nSTICKLINE(A<B,A,B,2,1),COLOR339933;\nSTICKLINE(A>=B,A,B,2,1),COLOR0033CC;\nåè¡å¸¦A:PLOYLINE(1,A),COLORBROWN;\nåè¡å¸¦B:PLOYLINE(1,B),COLORLIGREEN;"}},s.prototype.CDP_STD=function(){return{Name:"CDP-STD",Description:"éå¿æä½",IsMainIndex:!0,Script:"CH:=REF(H,1);\nCL:=REF(L,1);\nCC:=REF(C,1);\nCDP:(CH+CL+CC)/3;\nAH:2*CDP+CH-2*CL;\nNH:CDP+CDP-CL;\nNL:CDP+CDP-CH;\nAL:2*CDP-2*CH+CL;"}},s.prototype.TBP_STD=function(){return{Name:"TBP-STD",Description:"è¶å¿å¹³è¡¡ç¹",IsMainIndex:!0,Script:"APX:=(H+L+C)/3;\nTR0:=MAX(H-L,MAX(ABS(H-REF(C,1)),ABS(L-REF(C,1))));\nMF0:=C-REF(C,2);\nMF1:=REF(MF0,1);\nMF2:=REF(MF0,2);\nDIRECT1:=BARSLAST(MF0>MF1 AND MF0>MF2);\nDIRECT2:=BARSLAST(MF0<MF1 AND MF0<MF2);\nDIRECT0:=IF(DIRECT1<DIRECT2,100,-100);\nTBP:REF(REF(C,1)+IF(DIRECT0>50,MIN(MF0,MF1),MAX(MF0,MF1)),1);\nå¤å¤´è·å©:REF(IF(DIRECT0>50,APX*2-L,DRAWNULL),1),NODRAW;\nå¤å¤´åæ:REF(IF(DIRECT0>50,APX-TR0,DRAWNULL),1),NODRAW;\nç©ºå¤´åè¡¥:REF(IF(DIRECT0<-50,APX*2-H,DRAWNULL),1),NODRAW;\nç©ºå¤´åæ:REF(IF(DIRECT0<-50,APX+TR0,DRAWNULL),1),NODRAW;"}},s.prototype.ADX=function(){return{Name:"ADX",Description:"åè¶åææ ",IsMainIndex:!1,Args:[{Name:"N",Value:14}],Script:"TR1:=SMA(MAX(MAX(HIGH-LOW,ABS(HIGH-REF(CLOSE,1))),ABS(LOW-REF(CLOSE,1))),N,1);\nHD:=HIGH-REF(HIGH,1);\nLD:=REF(LOW,1)-LOW;\nDMP:=SMA(IF(HD>0 AND HD>LD,HD,0),N,1);\nDMM:=SMA(IF(LD>0 AND LD>HD,LD,0),N,1);\nPDI:DMP*100/TR1,COLORRED,DOTLINE;\nMDI:DMM*100/TR1,COLORGREEN,DOTLINE;\nADX:SMA(ABS(MDI-PDI)/(MDI+PDI)*100,N,1),COLORYELLOW,LINETHICK2;\n20;\n40;"}},s.prototype.ZNZ_CBAND=function(){return{Name:"ZNZ_CBAND",Description:"ä¼åææ¬å¸æå¸¦å®½",IsMainIndex:!1,Args:[{Name:"N",Value:20}],Script:"A:=AMOUNT/(100*VOL);\nBBI1:=MA(A,N);\nUPR0:=BBI1+STD(A,N);\nDWN0:=BBI1-STD(A,N);\nUPR1:=BBI1+1.7*STD(A,N);\nDWN1:=BBI1-1.7*STD(A,N);\nä¼åææ¬å¸æå¸¦å®½:100*1.7*STD(A,N);"}},s.prototype.ZNZ_RPY2=function(){return{Name:"ZNZ_RPY2",Description:"ä¸¤å¹´ç¸å¯¹ä»·ä½",IsMainIndex:!1,Script:"A:=REF(HHV(CLOSE,480),1);\nB:=REF(LLV(CLOSE,480),1);\n100*(CLOSE-B)/(A-B);"}},s.prototype.ZNZ_RPY1=function(){return{Name:"ZNZ_RPY1",Description:"å¹´ç¸å¯¹ä»·ä½",IsMainIndex:!1,Args:[{Name:"N",Value:240}],Script:"A:=REF(HHV(CLOSE,N),1);\nB:=REF(LLV(CLOSE,N),1);\n100*(CLOSE-B)/(A-B);"}},s.prototype.TEST=function(){return{Name:"TEST",Description:"æµè¯èæ¬",IsMainIndex:!1,Args:[{Name:"N",Value:10}],Script:"DRAWCHANNEL(OPEN>C,H,L, 'RGB(255,94,102)', 2 ,'5,5','RGBA(58,20,62,0.3)' );"}},!Xn)var Xn={Chart:{Log:console.log,Warn:console.warn},Complier:{Log:console.log,Warn:console.warn}};l.LastVersion=null,l.EnableCanvasWillReadFrequently=!1,l.CorssCursorCanvasKey="hqchart_corsscursor",l.TooltipCursorCanvasKey="hqchart_tooltip",l.RectDragCanvasKey="hqchart_drag_rect",l.Init=function(t,e,a){var i=new l(t,e,a);return i.OnSize(),i},l.SetDomain=function(t,e){t&&(So.Domain=t),e&&(So.CacheDomain=e)},l.SetPyIndexDomain=function(t){t&&(So.PyIndexDomain=t)},l.SetStyle=function(t){t&&So.SetStyle(t)},l.SetTextResource=function(t,e){bo.SetTextResource(t,e)},l.GetLocalization=function(){return bo},l.GetDevicePixelRatio=function(){return C()},l.CreateGuid=function(){return D()},l.GetResource=function(){return So},l.GetMinuteTimeStringData=function(){return Fo},l.GetMinuteCoordinateData=function(){return Mo},l.GetKLineZoom=function(){return Co},l.SetKLineZoom=function(t){Co=t},l.GetDivTooltipDataFormat=function(){return go},l.GetKLineCustomCalulate=function(){return yo},l.SetUSATimeType=function(t){No.TimeType=t,Ro.TimeType=t,Ao.TimeType=t,Oo.TimeType=t},l.GetChinaFuturesTimeData=function(){return Lo},l.AddPeriodCallback=function(t){eo.AddPeriodCallback(t)},l.RemovePeriodCallback=function(t){eo.RemovePeriodCallback(t)},l.RegisterDrawPicture=function(t){return aa.RegisterDrawPicture(t)},l.RegisterDrawPictureIonFont=function(t){return aa.RegisterIonFont(t)},l.GetInternalTimeData=function(t){switch(t){case"NYMEXTimeData":return No;case"COMEXTimeData":return Ro;case"NYBOTTimeData":return Ao;case"CBOTTimeData":return Oo;case"LMETimeData":return Po;case"FuturesTimeData":return Lo;case"TOCOMTimeData":return Bo;case"IPETimeData":return _o;default:return null}},l.RegisterExtendChartClass=function(t,e){return fo.Add(t,e)},l.AddExtendCallbackDraw=function(t){return fo.AddCallbackDrawClassName(t)},l.RegisterChartPaintClass=function(t,e){return uo.Add(t,e)},l.RegisterScriptIndexChart=function(t,e){return Zo.Add(t,e)},l.RegisterDialogClass=function(t,e){return Eo.Add(t,e)},l.RegisterChartFrameClass=function(t,e){return $n.Add(t,e)},l.ToFixedPoint=function(t){return p(t)},l.ToFixedPoint2=function(t,e){return v(t,e)},l.ToFixedRect=function(t){return g(t)},l.GetScrollPosition=function(){return m()},l.GetfloatPrecision=function(t){return sr(t)};var Kn={RECV_INDEX_DATA:2,RECV_HISTROY_DATA:3,RECV_TRAIN_MOVE_STEP:4,CHART_STATUS:5,BARRAGE_PLAY_END:6,RECV_OVERLAY_INDEX_DATA:7,DBCLICK_KLINE:8,RECV_START_AUTOUPDATE:9,RECV_STOP_AUTOUPDATE:10,ON_CONTEXT_MENU:11,ON_TITLE_DRAW:12,ON_SELECT_RECT:13,RECV_MINUTE_DATA:14,ON_CLICK_INDEXTITLE:15,RECV_KLINE_UPDATE_DATA:16,ON_CLICK_DRAWPICTURE:17,ON_FINISH_DRAWPICTURE:18,ON_INDEXTITLE_DRAW:19,ON_CUSTOM_VERTICAL_DRAW:20,RECV_KLINE_MANUAL_UPDATE_DATA:21,ON_ENABLE_SPLASH_DRAW:22,ON_CLICK_CHART_PAINT:23,ON_DRAW_MINUTE_LAST_POINT:24,ON_DRAW_DEPTH_TOOLTIP:25,ON_CLICK:26,ON_PHONE_TOUCH:27,ON_CLICKUP_CHART_PAINT:28,ON_SPLIT_YCOORDINATE:29,ON_DBCLICK:30,ON_SPLIT_XCOORDINATE:31,ON_KEYDOWN_SELECT_RECT:32,ON_DRAG_SELECT_RECT:33,ON_DRAG_SELECT_RECT_MOUSEUP:34,ON_DRAW_KLINE_LAST_POINT:35,ON_CLICK_CROSSCURSOR_RIGHT:36,ON_PLAY_SOUND:37,ON_CALCULATE_INDEX_OX:38,ON_LOAD_DRAWPICTURE:39,ON_DRAW_COUNTDOWN:41,ON_BIND_DRAWICON:42,ON_DRAW_DEAL_VOL_COLOR:43,ON_DRAW_DEAL_TEXT:44,ON_FILTER_DEAL_DATA:45,ON_FILTER_REPORT_DATA:46,ON_CLICK_REPORT_ROW:47,ON_REPORT_MARKET_STATUS:48,ON_DBCLICK_REPORT_ROW:49,ON_RCLICK_REPORT_ROW:50,ON_CLICK_REPORT_HEADER:51,ON_RCLICK_REPORT_HEADER:52,ON_REPORT_LOCAL_SORT:53,ON_DRAW_REPORT_NAME_COLOR:54,ON_DRAW_CUSTOM_TEXT:55,ON_CLICK_REPORT_TAB:56,ON_CLICK_REPORT_TABMENU:57,ON_DRAW_REPORT_FIXEDROW_TEXT:58,ON_CLICK_REPORT_FIXEDROW:59,ON_RCLICK_REPORT_FIXEDROW:60,ON_KEYDOWN_SELECT_RECT_FIRST:61,ON_CLICK_FRAME_TOOLBAR:62,ON_REPORT_DRAG_ROW:63,ON_MOUSE_MOVE:64,ON_MINUTE_PAGE_CHANGED:65,ON_DRAG_SUB_SELECT_RECT:66,ON_DRAG_SUB_SELECT_RECT_MOUSEUP:67,ON_KEYBOARD_SELECTED:68,ON_KEYBOARD_MOUSEUP:69,ON_CLICK_DRAWPICTURE_BUTTON:70,ON_FINISH_MOVE_DRAWPICTURE:71,ON_CLICK_EXTENDCHART_BUTTON:72,ON_SCROLLBAR_SLIDER_CHANGED:73,ON_DISPLAY_LATEST:74,ON_FORMAT_CORSSCURSOR_Y_TEXT:75,ON_FORMAT_INDEX_OUT_TEXT:76,ON_FORMAT_CORSSCURSOR_X_TEXT:77,ON_REPORT_MOUSE_MOVE:78,ON_REPORT_DRAG_HEADER_TOOLTIP:88,ON_REPORT_DRAW_CUSTOM_ICON:89,ON_REPORT_DRAW_KLINE:90,ON_DBCLICK_REPORT_DRAG_COLUMN_WIDTH:91,ON_REPORT_FORMAT_DRAW_INFO:92,ON_FORMAT_INDEX_Y_LABEL:93,ON_FORMAT_OVERLAY_INDEX_Y_LABEL:94,ON_CUSTOM_UNCHANGE_KLINE_COLOR:95,ON_CLICK_TITLE_BUTTON:96,ON_CUSTOM_LEFT_TOOLBAR:97,ON_CUSTOM_RIGHT_TOOLBAR:98,ON_REPORT_DRAG_COLUMN_WIDTH:99,ON_CUSTOM_UNCHANGE_KLINE_TITLE_COLOR:100,ON_CHANGE_KLINE_PERIOD:101,ON_MINUTE_TOUCH_ZOOM:102,ON_RELOAD_INDEX_CHART_RESOURCE:103,ON_RELOAD_OVERLAY_INDEX_CHART_RESOURCE:104,ON_CREATE_FRAME:105,ON_DELETE_FRAME:106,ON_SIZE_FRAME:107,ON_TOUCH_SCROLL_UP_DOWN:108,ON_RECV_REALTIME_DATA:109,ON_CUSTOM_OVERLAY_TOOLBAR:110,ON_BEFORE_DRAW:111,ON_BEFORE_DRAW_DYNAMIC_INFO:112,ON_CUSTOM_DRAG_MOUSE_DOWN:113,ON_CUSTOM_DRAG_DOC_MOUSE_MOVE:114,ON_CUSTOM_DRAG_DOC_MOUSE_UP:115,ON_CUSTOM_DRAG_MOUSE_MOVE:116,ON_KEYDOWN:117,ON_CREATE_OVERLAY_FRAME:118,ON_CREATE_CUSTOM_Y_COORDINATE:119,ON_BEFORE_DRAW_SPLASH_SCREEN:120,ON_TREPORT_MARKET_STATUS:121,ON_DBCLICK_TREPORT_ROW:122,ON_RCLICK_TREPORT_ROW:123,ON_CLICK_TREPORT_HEADER:124,ON_RCLICK_TREPORT_HEADER:125,ON_TREPORT_LOCAL_SORT:126,ON_CLICK_TREPORT_ROW:127,ON_MOVE_SELECTED_TREPORT_ROW:128,ON_DRAW_REPORT_ROW_BG:140,ON_CLICK_REPORT_CHECKBOX:141,ON_CLICK_REPORT_BUTTON:142,ON_CLICK_REPORT_LINK:143,ON_CREATE_REPORT_HEADER_MENU:144,ON_CHANGE_INDEX:150,ON_MENU_COMMAND:151,ON_CREATE_RIGHT_MENU:152,ON_FORMAT_CALL_AUCTION_INDEX_TITLE:153,ON_FORMAT_KLINE_HIGH_LOW_TITLE:154,ON_CUSTOM_CORSSCURSOR_POSITION:155,ON_CUSTOM_MINUTE_NIGHT_DAY_X_INDEX:156,ON_CUSTOM_MINUTE_BG:157,ON_CLICK_HORIZONTAL_LABEL:158,ON_FORMAT_DIALOG_TOOLTIP:159,ON_CHANGE_KLINE_RIGHT:160,ON_FORMAT_KLINE_FLOAT_TOOLTIP:161,ON_FORMAT_KLINE_INFO_FLOAT_TOOLTIP:162},zn={OP_SCROLL_LEFT:1,OP_SCROLL_RIGHT:2,OP_ZOOM_OUT:3,OP_ZOOM_IN:4,OP_GOTO_HOME:5,OP_GOTO_END:6,OP_LEFT_ZOOM_OUT:7,OP_LEFT_ZOOM_IN:8,OP_RIGHT_ZOOM_OUT:9,OP_RIGHT_ZOOM_IN:10,OP_SCROLL_GOTO:11,OP_SET_SELECTRECT:12,OP_SET_SUB_SELECTRECT:13,OP_CORSSCURSOR_GOTO:14,OP_SCROOLBAR_SLIDER_CHANGED:15,OP_GOTO:16,OP_GOTO_BY_DATAINDEX:17},Jn={DISABLE_DRAG_ID:0,CLICK_TOUCH_MODE_ID:3},qn={CLOSE_BEFOREOPEN_ID:1,CLOSE_OVERLAY_INDEX:2,MODIFY_INDEX_PARAM:3,CHANGE_INDEX:4,CLOSE_INDEX_WINDOW:5,OVERLAY_INDEX:6,MODIFY_OVERLAY_INDEX_PARAM:7,CHIP_DEFULT:8,CHIP_LONG:9,CHIP_RECENT:10,MAX_MIN_WINDOW:11,TITLE_WINDOW:12,DRAW_PICTURE_DELETE:13,DRAW_PICTURE_SETTING:14,EXTEND_CHART_BUTTON_ID:15,EXPORT_DATA:16,DRAW_PICTURE_BUTTON_1:17,DRAW_PICTURE_BUTTON_2:18,DRAW_PICTURE_BUTTON_3:19,DRAW_PICTURE_BUTTON_4:20,DRAW_PICTURE_BUTTON_5:21,DRAW_PICTURE_BUTTON_6:22,DRAW_PICTURE_BUTTON_7:23,DRAW_PICTURE_BUTTON_8:24,DRAW_PICTURE_BUTTON_9:25,DRAW_PICTURE_BUTTON_10:26,DRAW_PICTURE_BUTTON_11:27,DRAW_PICTURE_BUTTON_12:28,DRAW_PICTURE_BUTTON_13:29,DRAW_PICTURE_BUTTON_14:30,DRAW_PICTURE_BUTTON_15:31,DRAW_PICTURE_BUTTON_16:32,DRAW_PICTURE_BUTTON_17:33,DRAW_PICTURE_BUTTON_18:34,POP_MENU_1:40,POP_MENU_2:41,POP_MENU_3:42,INDEX_NAME_BUTTON:43},Zn={KLINE_ORDERFLOW:99,MINUTE_MULTI_DAY_EXTENDDATA:21,MINUTE_DAY_EXTENDDATA:21,MINUTE_BEFOREOPEN_EXTENDDATA:21,MINUTE_AFTERCLOSE_EXTENDDATA:21,KLINE_COLOR_DATA:66,KLINE_DAY_EXTENDDATA:25,KLINE_MINUTE_EXTENDDATA:25,KLINE_HEATMAP:67},jn={EXECUTE_SCRIPT:1,FINISH_EXECUTE_SCRIPT:2,ERROR_EXECUTE_SCRIPT:3},Qn={CMD_CHANGE_PERIOD_ID:1,CMD_CHANGE_WINDOW_COUNT_ID:2,CMD_CHANGE_RIGHT_ID:3,CMD_CHANGE_INDEX_ID:4,CMD_CHANGE_COLOR_INDEX_ID:5,CMD_CHANGE_TRADE_INDEX_ID:6,CMD_DELETE_COLOR_INDEX_ID:7,CMD_DELETE_TRADE_INDEX_ID:8,CMD_CHANGE_KLINE_TYPE_ID:9,CMD_CHANGE_PRICE_GAP_ID:10,CMD_OVERLAY_SYMBOL_ID:11,CMD_DELETE_ALL_OVERLAY_SYMBOL_ID:12,CMD_CHANGE_COORDINATETYPE_ID:13,CMD_CHANGE_KLINE_INFO_ID:14,CMD_DELETE_ALL_KLINE_INFO_ID:15,CMD_CHANGE_DRAG_MODE_ID:16,CMD_CHANGE_BG_SPLIT_ID:17,CMD_SHOW_DRAWTOOL_ID:18,CMD_HIDE_DRAWTOOL_ID:19,CMD_SHOW_STOCKCHIP_ID:20,CMD_HIDE_STOCKCHIP_ID:21,CMD_ENABLE_SELECT_RECT_ID:22,CMD_CHANGE_DAY_COUNT_ID:23,CMD_SHOW_BEFORE_DATA_ID:24,CMD_SELECTED_ZOOM_ID:25,CMD_SELECTED_SUMMARY_ID:26,CMD_SHOW_INDEX_ID:27,CMD_SHOW_OVERLAY_INDEX_ID:28,CMD_DELETE_OVERLAY_INDEX_ID:29,CMD_SHOW_OVERLAY_Y_AXIS_ID:30,CMD_ENABLE_OVERLAY_SHARE_Y_ID:31,CMD_CHANGE_DEFAULTCURSOR_ID:32,CMD_CHANGE_API_INDEX_ID:33,CMD_CHANGE_SCRIPT_INDEX_ID:34,CMD_CHANGE_BASELINE_ID:35,CMD_ADD_OVERLAY_INDEX_ID:36,CMD_CHANGE_LANGUAGE_ID:37,CMD_CHANGE_DRAG_RECT_SHOW_MODE_ID:38,CMD_SHOW_CORSS_LINE_ID:39,CMD_ENABLE_POP_MINUTE_CHART_ID:40,CMD_CHANGE_INFO_POSITION_ID:41,CMD_REPORT_CHANGE_BLOCK_ID:60,CMD_REPORT_COLUMN_SORT_ID:61,CMD_REPORT_COLUMN_DEL_ID:62,CMD_REPORT_COLUMN_MOVE_ID:63,CMD_REPORT_COLUMN_FILTER_ID:64,CMD_DIALOG_TOOLTIP_ATTRIBUTE:65,CMD_KLINE_TOOLTIP_ATTRIBUTE:66,CMD_MODIFY_INDEX_PARAM:67,CMD_MODIFY_OVERLAY_INDEX_PARAM:68};Number.prototype.toFixed2=Number.prototype.toFixed,Number.prototype.toFixed=function(t){return d(this,t)},b.LT=function(t,e){return!(we.IsNumberV2(t,e)&&Math.abs(t-e)<1e-7)&&t<e},b.GT=function(t,e){return!(we.IsNumberV2(t,e)&&Math.abs(t-e)<1e-7)&&t>e};var $n=new L;K.Copy=function(t){var e=new K;return e.Date=t.Date,we.IsNumber(t.Time)&&(e.Time=t.Time),e.YClose=t.YClose,e.Open=t.Open,e.Close=t.Close,e.High=t.High,e.Low=t.Low,e.Vol=t.Vol,e.Amount=t.Amount,we.IsNumber(t.FlowCapital)&&(e.FlowCapital=t.FlowCapital),we.IsNumber(t.Position)&&(e.Position=t.Position),we.IsNumber(t.YFClose)&&(e.YFClose=t.YFClose),we.IsNumber(t.FClose)&&(e.FClose=t.FClose),we.IsNumber(t.Stop)&&(e.Stop=t.Stop),we.IsNumber(t.Up)&&(e.Up=t.Up),we.IsNumber(t.Down)&&(e.Down=t.Down),we.IsNumber(t.Unchanged)&&(e.Unchanged=t.Unchanged),we.IsNumber(t.BFactor)&&(e.BFactor=t.BFactor),we.IsNumber(t.AFactor)&&(e.AFactor=t.AFactor),we.IsBool(t.IsVirtual)&&(e.IsVirtual=t.IsVirtual),we.IsBool(t.IsNonTrade)&&(e.IsNonTrade=t.IsNonTrade),t.OrderFlow&&(e.OrderFlow=t.OrderFlow),t.ColorData&&(e.ColorData=t.ColorData),t.ExtendData&&(e.ExtendData=t.ExtendData),t.HeatMap&&(e.HeatMap=t.HeatMap),e},K.CopyTo=function(t,e){t.Date=e.Date,we.IsNumber(e.Time)&&(t.Time=e.Time),t.YClose=e.YClose,t.Open=e.Open,t.Close=e.Close,t.High=e.High,t.Low=e.Low,t.Vol=e.Vol,t.Amount=e.Amount,we.IsNumber(e.FlowCapital)&&(t.FlowCapital=e.FlowCapital),we.IsNumber(e.Position)&&(t.Position=e.Position),we.IsNumber(e.YFClose)&&(t.YFClose=e.YFClose),we.IsNumber(e.FClose)&&(t.FClose=e.FClose),we.IsNumber(e.Stop)&&(t.Stop=e.Stop),we.IsNumber(e.Up)&&(t.Up=e.Up),we.IsNumber(e.Down)&&(t.Down=e.Down),we.IsNumber(e.Unchanged)&&(t.Unchanged=e.Unchanged),we.IsNumber(e.BFactor)&&(t.BFactor=e.BFactor),we.IsNumber(e.AFactor)&&(t.AFactor=e.AFactor),we.IsBool(e.IsVirtual)&&(t.IsVirtual=e.IsVirtual),we.IsBool(e.IsNonTrade)&&(t.IsNonTrade=e.IsNonTrade),e.OrderFlow&&(t.OrderFlow=e.OrderFlow),e.ColorData&&(t.ColorData=e.ColorData),e.HeatMap&&(t.HeatMap=e.HeatMap),e.ExtendData&&(t.ExtendData=e.ExtendData)},K.CopyRight=function(t,e){var a=new K;return a.Date=t.Date,we.IsNumber(t.Time)&&(a.Time=t.Time),a.YClose=t.YClose*e,a.Open=t.Open*e,a.Close=t.Close*e,a.High=t.High*e,a.Low=t.Low*e,a.Vol=t.Vol,a.Amount=t.Amount,a.FlowCapital=t.FlowCapital,a.Position=t.Position,a.YFClose=t.YFClose,a.FClose=t.FClose,t.ColorData&&(a.ColorData=t.ColorData),t.ExtendData&&(a.ExtendData=t.ExtendData),a};var to={INVESTOR:1,ANNOUNCEMENT:2,PFORECAST:3,ANNOUNCEMENT_QUARTER_1:4,ANNOUNCEMENT_QUARTER_2:5,ANNOUNCEMENT_QUARTER_3:6,ANNOUNCEMENT_QUARTER_4:7,RESEARCH:8,BLOCKTRADING:9,TRADEDETAIL:10,ANNOUNCEMENT_EX_START:100,ANNOUNCEMENT_EX_END:200},eo=new $;tt.DateTimeToNumber=function(t){return 1e4*t.Date+t.Time},tt.GetKLineDataTime=function(t){var e={Date:t.Date,Time:0};return we.IsNumber(t.Time)&&(e.Time=t.Time),e},tt.GetFirday=function(t){var e=new Date(parseInt(t/1e4),t/100%100-1,t%100),a=e.getDay();if(5==a)return t;var i=e.getTime();if(a<5){var r=864e5*(5-a);i+=r}else{var r=864e5*(a-5);i-=r}e.setTime(i);var n=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();e.getDay();return n},tt.GetSunday=function(t){var e=new Date(parseInt(t/1e4),t/100%100-1,t%100),a=e.getDay();if(0==a)return t;var i=e.getTime();if(a>0){i+=864e5*(7-a)}e.setTime(i);var r=1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate();e.getDay();return r},tt.GetQuarter=function(t){var e=parseInt(t%1e4/100);return 1==e||2==e||3==e?1:4==e||5==e||6==e?2:7==e||8==e||9==e?3:10==e||11==e||12==e?4:0},tt.GetHalfYear=function(t){var e=parseInt(t/1e4);return t%1e4<=630?1e4*e+630:1e4*e+1231};var ao=4e4,io=49999;tt.IsDayPeriod=function(t,e){return 1==t||2==t||3==t||9==t||21==t||22==t||(t>ao&&t<=io||0==t&&1==e)};var ro=2e4,no=29999;tt.IsMinutePeriod=function(t,e){return 5==t||6==t||7==t||8==t||11==t||12==t||(t>ro&&t<=no||4==t&&1==e)};var oo=3e4,so=32e3;tt.IsSecondPeriod=function(t){return t>oo&&t<=so};var lo=5e4,ho=6e4;tt.IsMilliSecondPeriod=function(t){return t>lo&&t<=ho},tt.IsTickPeriod=function(t){return 10==t},tt.GetPeriodName=function(t){var e=new Vn.default([[0,"æ¥çº¿"],[1,"å¨çº¿"],[2,"æçº¿"],[3,"å¹´çº¿"],[9,"å­£çº¿"],[21,"åå¨"],[22,"åå¹´"],[4,"1å"],[5,"5å"],[6,"15å"],[7,"30å"],[8,"60å"],[11,"2å°æ¶"],[12,"4å°æ¶"],[10,"åç¬"]]);return e.has(t)?e.get(t):""};var uo=new it,Co=[[48,10],[44,10],[40,9],[36,9],[32,8],[28,8],[24,7],[20,7],[18,6],[16,6],[15,5],[13,5],[9,4],[7,4],[5,4],[3,3],[3,1],[2,1],[1,1],[1,0]],co={STATUS_NONE_ID:0,STATUS_REQUESTDATA_ID:1,STATUS_RECVDATA_ID:2,STATUS_FINISHED_ID:3},fo=new le,Do={MAIN_KLINE:1,OVERLAY_KLINE:2,MAIN_INDEX:3,OVERLAY_INDEX:4,OVERLAY_MINUTE:5,MAIN_MINUTE:6,MAIN_AVERAGE_MINUTE:7,MAIN_MINUTE_VOL:8},mo={LATEST_VALUE_ID:0,FIXED_VALUE_ID:1,PAGE_LAST_PRICE_ID:2,PAGE_DATA_INCREASE:3,PAGE_LAST_INDEX_VALUE_ID:4,PAGE_LAST_OVERLAY_INDEX_VALUE_ID:5};we.FormatValueThousandsString=function(t,e){if(null==t||isNaN(t)){if(e>0){for(var a="-.",i=0;i<e;++i)a+="-";return a}return"--"}var r="",n=t.toFixed(e);if(e>0){for(var o=n.split(".")[1],s=n.split(".")[0];s.length>3;)r=","+s.slice(-3)+r,s=s.slice(0,s.length-3);s&&(r=s+r+"."+o)}else{for(;n.length>3;)r=","+n.slice(-3)+r,n=n.slice(0,n.length-3);n&&(r=n+r)}return r},we.FormatValueString=function(t,e,a){return we.FormatValueStringV2(t,e,e,a)},we.FormatValueStringV2=function(t,e,a,i){if(null==t||isNaN(t)){if(e>0){for(var r="-.",n=0;n<e;++n)r+="-";return r}return"--"}if(t<1e-11&&t>-1e-11)return"0";var o=Math.abs(t);return i===xo.LANGUAGE_ENGLISH_ID?o<1e4?t.toFixed(e):o<1e6?(t/1e3).toFixed(a)+"K":o<1e9?(t/1e6).toFixed(a)+"M":o<1e12?(t/1e9).toFixed(a)+"B":(t/1e12).toFixed(a)+"T":i===xo.LANGUAGE_TRADITIONAL_CHINESE_ID?o<1e4?t.toFixed(e):o<1e8?(t/1e4).toFixed(a)+"è¬":o<1e12?(t/1e8).toFixed(a)+"å":(t/1e12).toFixed(a)+"è¬å":o<1e4?t.toFixed(e):o<1e6?(t/1e4).toFixed(a)+"ä¸":o<1e8?(t/1e4).toFixed(a)+"ä¸":o<1e12?(t/1e8).toFixed(a)+"äº¿":(t/1e12).toFixed(a)+"ä¸äº¿"},we.FormatVolString=function(t,e){var a=Math.abs(t);return a<1e5?t.toFixed(0):a<1e7?(t/1e4).toFixed(1)+"ä¸":a<1e8?(t/1e4).toFixed(0)+"ä¸":a<1e9?(t/1e8).toFixed(2)+"äº¿":a<1e12?(t/1e8).toFixed(1)+"äº¿":(t/1e12).toFixed(1)+"ä¸äº¿"},we.FromatIntegerString=function(t,e,a){return t<1e4&&we.IsInteger(t)&&(e=0),we.FormatValueString(t,e,a)},we.NumberToString=function(t){return t<10?"0"+t.toString():t.toString()},we.MillisecondToString=function(t){return t<10?"00"+t.toString():t<100?"0"+t.toString():t.toString()},we.FormatDateString=function(t,e,a){var i=parseInt(t/1e4),r=parseInt(t/100)%100,n=t%100;switch(e){case"MM-DD":return we.NumberToString(r)+"-"+we.NumberToString(n);case"MM/DD":return we.NumberToString(r)+"/"+we.NumberToString(n);case"MM/DD/W":var o=new Date(i,r-1,n),s=bo.GetText(vo[o.getDay()],a);return we.NumberToString(r)+"/"+we.NumberToString(n)+"/"+s;case"YYYY-MM":return i+"-"+we.NumberToString(r);case"YYYY/MM/DD":return i.toString()+"/"+we.NumberToString(r)+"/"+we.NumberToString(n);case"YYYY/MM/DD/W":var o=new Date(i,r-1,n),s=bo.GetText(vo[o.getDay()],a);return i.toString()+"/"+we.NumberToString(r)+"/"+we.NumberToString(n)+"/"+s.toString();case"DD/MM/YYYY":return we.NumberToString(n)+"/"+we.NumberToString(r)+"/"+i.toString();default:return i.toString()+"-"+we.NumberToString(r)+"-"+we.NumberToString(n)}},we.FormatTimeString=function(t,e){if("HH:MM:SS"==e){var a=parseInt(t/1e4),i=parseInt(t%1e4/100),r=t%100;return we.NumberToString(a)+":"+we.NumberToString(i)+":"+we.NumberToString(r)}if("hh:mm"==e){var a=parseInt(t/1e4),i=parseInt(t%1e4/100),r=t%100;return we.NumberToString(a)+":"+we.NumberToString(i)}if("HH:MM"==e){var a=parseInt(t/100),i=t%100;return we.NumberToString(a)+":"+we.NumberToString(i)}if("HH:MM:SS.fff"==e){var n=t%1e3,o=parseInt(t/1e3),a=parseInt(o/1e4),i=parseInt(o%1e4/100),r=o%100;return we.NumberToString(a)+":"+we.NumberToString(i)+":"+we.NumberToString(r)+"."+we.MillisecondToString(n)}if(t<1e4){var a=parseInt(t/100),i=t%100;return we.NumberToString(a)+":"+we.NumberToString(i)}var a=parseInt(t/1e4),i=parseInt(t%1e4/100),r=t%100;return we.NumberToString(a)+":"+we.NumberToString(i)+":"+we.NumberToString(r)},we.FormatReportDateString=function(t){var e,a=parseInt(t/1e4),i=parseInt(t/100)%100;switch(i){case 3:e="ä¸å­£åº¦æ¥";break;case 6:e="åå¹´æ¥";break;case 9:e="ä¸å­£åº¦æ¥";break;case 12:e="å¹´æ¥"}return a.toString()+e},we.FormatDateTimeString=function(t,e,a){var i=t.split(" ");if(i.length<2)return"";var r="";if(e){var n=parseInt(i[0]),o=parseInt(n/1e4),s=parseInt(n%1e4/100),l=n%100,h=o.toString()+"-"+(s<10?"0"+s.toString():s.toString())+"-"+(l<10?"0"+l.toString():l.toString());r+=h}if(a){var u=parseInt(i[1]);if(u<1e4){var C=u%100,c=parseInt(u/100),h=we.NumberToString(c)+":"+we.NumberToString(C);r.length>0&&(r+=" "),r+=h}else{var c=parseInt(u/1e4),C=parseInt(u%1e4/100),f=u%100,h=we.NumberToString(c)+":"+we.NumberToString(C)+":"+we.NumberToString(f);r.length>0&&(r+=" "),r+=h}}return r},we.FormatValueColor=function(t,e){return null!=t&&null==e?0==t?"PriceNull":t>0?"PriceUp":"PriceDown":null==t||null==e?"PriceNull":t==e?"PriceNull":t>e?"PriceUp":"PriceDown"},we.IsNumber=function(t){return null!=t&&(!isNaN(t)&&"number"==typeof t)},we.IsNumberV2=function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];if(!e)return!1;if(0==e.length)return!1;var i=!0,r=!1,n=void 0;try{for(var o,s=(0,Gn.default)(e);!(i=(o=s.next()).done);i=!0){var l=o.value;if(null==l)return!1;if(isNaN(l))return!1;if("number"!=typeof l)return!1}}catch(t){r=!0,n=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw n}}return!0},we.IsPlusNumber=function(t){return null!=t&&(!isNaN(t)&&t>0)},we.IsInteger=function(t){return"number"==typeof t&&t%1==0},we.IsObjectExist=function(t){return void 0!==t&&null!=t},we.IsBool=function(t){return!0===t||!1===t},we.IsString=function(t){return"string"==(void 0===t?"undefined":(0,Ln.default)(t))},we.IsNonEmptyArray=function(t){return!!t&&(!!Array.isArray(t)&&t.length>0)},we.IsFloat=function(t){return void 0!==t&&(null!=t&&(!isNaN(t)&&t!=parseInt(t)))},we.IsVaild=function(t){return!isNaN(t)&&(null!=t&&void 0!==t)},we.IsUndefined=function(t){return void 0===t},we.IsObject=function(t){return t instanceof Object},we.RemoveZero=function(t){for(;t.length>0;){var e=t.length-1,a=t[e];if("0"!=a){if("."==a){t=t.substr(0,e);break}break}t=t.substr(0,e)}return t};var po=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10],vo=["æ¥","ä¸","äº","ä¸","å","äº","å­"],go=new Ze,To=["ä¸å¤æ","åå¤æ","åå¤æ"],Io={DEFAULT:1,ORIGINAL:2,INTEGER:3,THOUSANDS:21};aa.ColorToRGBA=function(t,e){if(/^(rgb|RGB)/.test(t)){for(var a="#",i=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),r=0;r<i.length;r++){var n=Number(i[r]).toString(16);"0"===n&&(n+=n),a+=n}t=a}return"rgba("+parseInt("0x"+t.slice(1,3))+","+parseInt("0x"+t.slice(3,5))+","+parseInt("0x"+t.slice(5,7))+","+e+")"},aa.RGBToHex=function(t){var e=t.indexOf(",")>-1?",":" ";t=t.substr(4).split(")")[0].split(e);var a=(+t[0]).toString(16),i=(+t[1]).toString(16),r=(+t[2]).toString(16);return 1==a.length&&(a="0"+a),1==i.length&&(i="0"+i),1==r.length&&(r="0"+r),"#"+a+i+r},aa.HexToRGB=function(t){t=t.toLowerCase();var e=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(t&&e.test(t)){if(4===t.length){for(var a="#",i=1;i<4;i+=1)a+=t.slice(i,i+1).concat(t.slice(i,i+1));t=a}for(var r=[],i=1;i<7;i+=2)r.push(parseInt("0x"+t.slice(i,i+2)));return"rgb("+r.join(",")+")"}return null},aa.ArrayDrawPricture=[{Name:"çº¿æ®µ",ClassName:"ChartDrawPictureLine",Create:function(){return new ia}},{Name:"å°çº¿",ClassName:"ChartDrawPictureHaflLine",Create:function(){return new la}},{Name:"ç®­å¤´",ClassName:"ChartDrawArrowLine",Create:function(){return new oa}},{Name:"æ°´å¹³çº¿",ClassName:"ChartDrawPictureHorizontalLine",Create:function(){return new ha}},{Name:"æ°´å¹³å°çº¿",ClassName:"ChartDrawPictureHorizontalRay",Create:function(){return new ua}},{Name:"è¶å¿çº¿",ClassName:"ChartDrawPictureTrendLine",Create:function(){return new ca}},{Name:"ç©å½¢",ClassName:"ChartDrawPictureRect",Create:function(){return new fa}},{Name:"åå¼§çº¿",ClassName:"ChartDrawPictureArc",Create:function(){return new da}},{Name:"Må¤´Wåº",ClassName:"ChartDrawPictureWaveMW",Create:function(){return new Da}},{Name:"å¤´è©å",ClassName:"ChartDrawHeadShouldersBT",Create:function(){return new ma}},{Name:"å¹³è¡çº¿",ClassName:"ChartDrawPictureParallelLines",Create:function(){return new pa}},{Name:"å¹³è¡éé",ClassName:"ChartDrawPictureParallelChannel",Create:function(){return new Sa}},{Name:"ä»·æ ¼ééçº¿",ClassName:"ChartDrawPicturePriceChannel",Create:function(){return new Ia}},{Name:"ææ¬",ClassName:"ChartDrawPictureText",Create:function(){return new xa}},{Name:"æ±æ©è§åº¦çº¿",ClassName:"ChartDrawPictureGannFan",Create:function(){return new ya}},{Name:"æ±æ©è§åº¦çº¿2",ClassName:"ChartDrawPictureGannFan",Create:function(){return new Ea}},{Name:"é»éçº¿",ClassName:"ChartDrawPictureResistanceLine",Create:function(){return new wa}},{Name:"é»éçº¿2",ClassName:"ChartDrawPictureResistanceLineV2",Create:function(){return new Fa}},{Name:"é»éåå²",ClassName:"ChartDrawPictureGoldenSection",Create:function(){return new Ma}},{Name:"ç¾åæ¯çº¿",ClassName:"ChartDrawPicturePercentage",Create:function(){return new La}},{Name:"æ³¢æ®µçº¿",ClassName:"ChartDrawPictureWaveBand",Create:function(){return new Na}},{Name:"ä¸è§å½¢",ClassName:"ChartDrawPictureTriangle",Create:function(){return new Ra}},{Name:"å¯¹ç§°è§åº¦",ClassName:"ChartDrawPictureSymmetryAngle",Create:function(){return new Aa}},{Name:"å",ClassName:"ChartDrawPictureCircle",Create:function(){return new Oa}},{Name:"å¹³è¡åè¾¹å½¢",ClassName:"ChartDrawPictureQuadrangle",Create:function(){return new Pa}},{Name:"ææ³¢é£å¥å¨æçº¿",ClassName:"ChartDrawPictureFibonacci",Create:function(){return new Ba}},{Name:"çº¿å½¢åå½çº¿",ClassName:"ChartDrawLinearRegression",Create:function(){return new _a}},{Name:"çº¿å½¢åå½å¸¦",ClassName:"ChartDrawLinearRegression",Create:function(){return new _a({IsShowMaxMinLine:!0})}},{Name:"å»¶é¿çº¿å½¢åå½å¸¦",ClassName:"ChartDrawLinearRegression",Create:function(){return new _a({IsShowMaxMinLine:!0,IsShowExtendLine:!0})}},{Name:"å°ºå­",ClassName:"ChartDrawRuler",Create:function(){return new Ga}},{Name:"æ ä»·çº¿",ClassName:"ChartDrawPriceLine",Create:function(){return new ka}},{Name:"æ ä»·çº¿2",ClassName:"ChartDrawPriceLineV2",Create:function(){return new Va}},{Name:"åç´çº¿",ClassName:"ChartDrawVerticalLine",Create:function(){return new Ha}},{Name:"åå­çº¿",ClassName:"ChartDrawCrosshair",Create:function(){return new Ya}},{Name:"æ³¢æµªå°º",ClassName:"ChartDrawWaveRuler",Create:function(){return new Wa}},{Name:"ABæ³¢æµªå°º",ClassName:"ChartDrawWaveRuler2Point",Create:function(){return new Ua}},{Name:"ç®±åçº¿",ClassName:"ChartDrawBox",Create:function(){return new Ka}},{Name:"2ç¹ç»å¾ä¾å­",ClassName:"ChartDrawTwoPointDemo",Create:function(){return new za}},{Name:"3ç¹ç»å¾ä¾å­",ClassName:"ChartDrawThreePointDemo",Create:function(){return new Ja}},{Name:"æ°´å¹³çº¿æ®µ",ClassName:"ChartDrawHLineSegment",Create:function(){return new qa}},{Name:"å¹³è¡å°çº¿",ClassName:"ChartDrawParallelRaysLines",Create:function(){return new Ta}},{ClassName:"ChartDrawPictureIconFont",Create:function(){return new ba}},{Name:"æ¶é¸¦çº¿æ®µ",ClassName:"ChartDrawGraffitiLine",Create:function(){return new na}},{Name:"åºå®èå´æäº¤éåå¸å¾",ClassName:"ChartDrawVolProfile",Create:function(){return new Za}},{Name:"DisjointChannel",ClassName:"ChartDrawDisjontChannel",Create:function(){return new ga}},{Name:"FlatTop",ClassName:"ChartDrawFlatTop",Create:function(){return new va}},{Name:"æ°´å¹³çº¿2",ClassName:"ChartDrawHLine",Create:function(){return new Ca}},{Name:"MonitorLine",ClassName:"ChartDrawMonitorLine",Create:function(){return new Xa}},{Name:"Note",ClassName:"ChartDrawNote",Create:function(){return new ja}},{Name:"AnchoredText",ClassName:"ChartDrawAnchoredText",Create:function(){return new Qa}},{Name:"PriceLabel",ClassName:"ChartDrawPriceLabel",Create:function(){return new $a}},{Name:"PriceNote",ClassName:"ChartDrawPriceNote",Create:function(){return new ti}},{Name:"FibWedge",ClassName:"ChartDrawFibWedge",Create:function(){return new ei}},{Name:"FibRetracement",ClassName:"ChartFibRetracement",Create:function(){return new ai}},{Name:"FibSpeedResistanceFan",ClassName:"ChartFibSpeedResistanceFan",Create:function(){return new ii}},{Name:"PriceRange",ClassName:"ChartPriceRange",Create:function(){return new ri}},{Name:"DateRange",ClassName:"ChartDateRange",Create:function(){return new ni}},{Name:"DatePriceRange",ClassName:"ChartDatePriceRange",Create:function(){return new oi}},{Name:"InfoLine",ClassName:"ChartInfoLine",Create:function(){return new si}},{Name:"TrendAngle",ClassName:"ChartTrendAngle",Create:function(){return new ra}},{Name:"ArrowMarker",ClassName:"ChartArrowMarker",Create:function(){return new sa}},{Name:"BarsPattern",ClassName:"ChartBarsPattern",Create:function(){return new li}}],aa.MapIonFont=new Vn.default([["icon-arrow_up",{Text:"î",Color:"#318757",Family:"iconfont"}],["icon-arrow_down",{Text:"î",Color:"#db563e",Family:"iconfont"}],["icon-arrow_right",{Text:"î",Color:"#318757",Family:"iconfont"}],["icon-arrow_left",{Text:"î",Color:"#318757",Family:"iconfont"}]]),aa.GetDrawPictureByName=function(t){for(var e in aa.ArrayDrawPricture){var a=aa.ArrayDrawPricture[e];if(a.Name==t)return a}return null},aa.GetDrawPictureByClassName=function(t){for(var e in aa.ArrayDrawPricture){var a=aa.ArrayDrawPricture[e];if(a.ClassName==t)return a}return null},aa.RegisterDrawPicture=function(t){if(!t.Name||!t.ClassName||!t.Create)return!1;var e={Name:t.Name,ClassName:t.ClassName,Create:t.Create};return aa.ArrayDrawPricture.push(e),Xn.Chart.Log("[IChartDrawPicture.RegisterDrawPicture] registered new draw picture class. item=",e),!0},aa.RegisterIonFont=function(t){if(!t.Name||!t.Text||!t.Family)return!1;var e=aa.MapIonFont.has(t.Name);return aa.MapIonFont.set(t.Name,t),Xn.Chart.Log("[IChartDrawPicture.RegisterIonFont] registered new icon font, obj=, isOverwirte=",t,e),!0},aa.CreateChartDrawPicture=function(t){var e=aa.GetDrawPictureByClassName(t.ClassName);if(!e)return null;var a=e.Create();return t.Period>=0&&(a.Period=t.Period),t.Right>=0&&(a.Right=t.Right),t.Guid&&(a.Guid=t.Guid),t.Symbol&&(a.Symbol=t.Symbol),t.Value&&(a.Value=t.Value),t.Text&&(a.Text=t.Text),t.LineColor&&(a.LineColor=t.LineColor),t.AreaColor&&(a.AreaColor=t.AreaColor),t.FontOption&&(a.FontOption=t.FontOption),t.Label&&(a.Label=t.Label),t.LineWidth>0&&(a.LineWidth=t.LineWidth),!1===t.EnableMove&&(a.EnableMove=t.EnableMove),we.IsBool(t.EnableSave)&&(a.EnableSave=t.EnableSave),we.IsNumber(t.ChannelWidth)&&(a.ChannelWidth=t.ChannelWidth),we.IsBool(t.IsShowYCoordinate)&&(a.IsShowYCoordinate=t.IsShowYCoordinate),a.SetOption&&a.SetOption(t),a};var So=new ci,xo={LANGUAGE_CHINESE_ID:0,LANGUAGE_ENGLISH_ID:1,LANGUAGE_TRADITIONAL_CHINESE_ID:2},bo=new fi;di.Get=function(t){return new Vn.default([["CJL",{IsMainIndex:!1,Create:function(){return new Ri}}],["OX",{IsMainIndex:!1,Create:function(){return new Li}}],["å¯è§èå´æäº¤éåå¸å¾",{IsMainIndex:!0,Create:function(t){return new Ni(t)}}]]).get(t)};var yo=new Di;Ti.JsonDataToHistoryData=function(t){var e=[];if(!t.data)return e;var a=null;t.symbol&&(a=t.symbol.toUpperCase());a&&wo.IsFutures(a);for(var i=t.data,r=Zn.KLINE_ORDERFLOW,n=Zn.KLINE_COLOR_DATA,o=Zn.KLINE_HEATMAP,s=Zn.KLINE_DAY_EXTENDDATA,l=0;l<i.length;++l){var h=new K,u=i[l];h.Date=u[0],h.Open=u[2],h.YClose=u[1],h.Close=u[5],h.High=u[3],h.Low=u[4],h.Vol=u[6],h.Amount=u[7],we.IsNumber(u[8])&&(h.Position=u[8]),we.IsNumber(u[9])&&(h.FClose=u[9]),we.IsNumber(u[10])&&(h.YFClose=u[10]),we.IsNumber(u[15])&&(h.FlowCapital=u[15]),we.IsNumber(u[11])&&(h.BFactor=u[11]),we.IsNumber(u[12])&&(h.AFactor=u[12]),we.IsBool(u[13])&&(h.IsVirtual=u[13]),we.IsBool(u[14])&&(h.IsNonTrade=u[14]),(we.IsNumber(h.Open)||!0===h.IsVirtual)&&(u[r]&&(h.OrderFlow=u[r]),u[n]&&(h.ColorData=u[n]),u[s]&&(h.ExtendData=u[s]),u[o]&&(h.HeatMap=u[o]),e.push(h))}return e},Ti.JsonDataToRealtimeData=function(t,e){if(!t.stock)return null;var a;for(var i in t.stock){var r=t.stock[i];if(r&&r.symbol==e){a=r;break}}if(!a)return null;var n=e.toUpperCase(),o=(wo.IsSHSZ(n),new K);return o.Date=a.date,o.Open=a.open,o.YClose=a.yclose,o.High=a.high,o.Low=a.low,o.Vol=a.vol,o.Amount=a.amount,o.Close=a.price,we.IsNumber(a.position)&&(o.Position=a.position),we.IsNumber(a.yclearing)&&(o.YFClose=a.yclearing),we.IsNumber(a.clearing)&&(o.FClose=a.clearing),we.IsNumber(a.bfactor)&&(o.BFactor=a.bfactor),we.IsNumber(a.afactor)&&(o.AFactor=a.afactor),a.colordata&&(o.ColorData=a.colordata),a.extendData&&(o.ExtendData=a.extendData),a.heatmapData&&(o.HeatMap=a.heatmapData),we.IsBool(a.isvirtual)&&(o.IsVirtual=a.isvirtual),we.IsBool(a.isnontrade)&&(o.IsNonTrade=a.isnontrade),o},Ti.JsonDataToMinuteRealtimeData=function(t,e){if(!t.stock)return null;var a;for(var i in t.stock){var r=t.stock[i];if(r&&r.symbol==e){a=r;break}}if(!a)return null;var n=e.toUpperCase(),o=(wo.IsSHSZ(n),wo.IsFutures(n)),s=new Array,l=a.yclose,h=a.date;o&&a.yclearing&&(l=a.yclearing);for(var i in a.minute){var u=a.minute[i],C=new K;C.Close=u.price,C.Open=u.open,C.High=u.high,C.Low=u.low,C.Vol=u.vol,C.Amount=u.amount,u.date>0?C.Date=u.date:C.Date=h,C.Time=u.time,C.YClose=l,we.IsNumber(u.position)&&(C.Position=u.position),we.IsNumber(C.Close)||(C.Close=l,C.Open=C.High=C.Low=C.Close),we.IsNumber(C.Open)||(C.Open=null),we.IsNumber(C.Close)||(C.Close=null),we.IsNumber(C.High)||(C.High=null),we.IsNumber(C.Low)||(C.Low=null),we.IsNumber(u.price)&&(l=u.price),s[i]=C}return s},Ti.JsonDataToMinuteRealtimeDataV2=function(t,e){if(!t||!t.overlay||!e)return null;for(var a=null,i=0;i<t.overlay.length;++i){var r=t.overlay[i];if(r.symbol==e){a=r;break}}if(!a)return null;for(var n=e.toUpperCase(),o=(wo.IsSHSZ(n),wo.IsFutures(n),Zn.KLINE_ORDERFLOW),s=null,l=[],i=0;i<a.data.length;++i){var r=new K,h=a.data[i];r.Date=h[0],r.Open=h[2],r.YClose=h[1],r.Close=h[5],r.High=h[3],r.Low=h[4],r.Vol=h[6],r.Amount=h[7],r.Time=h[8],we.IsNumber(h[9])&&(r.Position=h[9]),we.IsNumber(r.YClose)||we.IsNumber(s)&&(r.YClose=s),we.IsNumber(r.Close)&&(s=r.Close),h[o]&&(r.OrderFlow=h[o]),l.push(r)}return l},Ti.JsonDataToMinuteHistoryData=function(t){var e=null;t.symbol&&(e=t.symbol.toUpperCase());e&&wo.IsSHSZ(e);e&&wo.IsFutures(e);for(var a=t.data,i=new Array,r=Zn.KLINE_ORDERFLOW,n=Zn.KLINE_COLOR_DATA,o=Zn.KLINE_HEATMAP,s=Zn.KLINE_MINUTE_EXTENDDATA,l=null,h=0;h<a.length;++h){var u=new K,C=a[h];u.Date=C[0],u.Open=C[2],u.YClose=C[1],u.Close=C[5],u.High=C[3],u.Low=C[4],u.Vol=C[6],u.Amount=C[7],u.Time=C[8],we.IsNumber(C[9])&&(u.Position=C[9]),we.IsNumber(C[10])&&(u.FClose=C[10]),we.IsNumber(C[11])&&(u.YFClose=C[11]),we.IsNumber(C[12])&&(u.BFactor=C[12]),we.IsNumber(C[13])&&(u.AFactor=C[13]),we.IsNumber(u.YClose)||we.IsNumber(l)&&(u.YClose=l),we.IsNumber(u.Close)&&(l=u.Close),C[r]&&(u.OrderFlow=C[r]),C[n]&&(u.ColorData=C[n]),C[s]&&(u.ExtendData=C[s]),C[o]&&(u.HeatMap=C[o]),i.push(u)}return i},Ti.JsonDataToTickData=function(t){var e=[];if(!t.detail)return e;var a=t.date,i=t.yclose;for(var r in t.detail){var n=new K,o=t.detail[r];o&&(n.Date=a,n.Time=o[0],n.Low=n.High=n.Close=n.Open=o[1],n.YClose=i,n.Vol=o[2],n.Amount=o[3],n.Flag=o[4],we.IsNumber(n.Open)&&e.push(n))}return e},Ti.JsonDataToTickDataV2=function(t){var e=[];if(!we.IsNonEmptyArray(t.data))return e;for(var a=0;a<t.data.length;++a){var i=new K,r=t.data[a];r&&(i.Date=r[0],i.Time=r[1],i.YClose=r[2],i.Low=i.High=i.Close=i.Open=r[3],e.push(i),r[4]&&(i.ExtendData=r[4]))}return e},Ii.JsonDataToBeforeOpenData=function(t){var e=t.stock[0].symbol,a=e.toUpperCase(),i=wo.IsSHSZ(a),r=t.stock[0].yclose,n=t.stock[0].yclose,o=t.stock[0],s=o.date,l={Data:[],TotalCount:15,Ver:1,Date:s},h=Zn.MINUTE_BEFOREOPEN_EXTENDDATA;if(o.beforeinfo&&(we.IsNumber(o.beforeinfo.totalcount)&&(l.TotalCount=o.beforeinfo.totalcount),we.IsNumber(o.beforeinfo.ver)&&(l.Ver=o.beforeinfo.ver)),1==l.Ver){if(we.IsNonEmptyArray(o.before))for(var u=0;u<o.before.length;++u){var C=new J,c=o.before[u];C.YClose=r,C.Time=c[0],C.Date=s,C.Price=c[1],C.Price?n=C.Price:C.Price=n,C.Vol[0]=i?c[2]/100:c[2],C.Amount=c[3],we.IsNumber(c[4])&&c[4]>19000101&&(C.Date=c[4]),C.DateTime=C.Date+" "+C.Time,l.Data.push(C)}}else if(2==l.Ver){var f=0;for(var u in o.before){var C=new J,c=o.before[u];C.YClose=r,C.Time=c[0],C.Date=s,C.Price=c[1],C.Vol[0]=c[2],C.Vol[1]=c[3],C.ColorID=c[4],we.IsNumber(c[6])&&(C.Date=c[6]),C.DateTime=C.Date+" "+C.Time+")";var d=C.Vol[0]+C.Vol[1];we.IsNumber(c[5])&&(d=c[5]),d>f&&(f=d),c[h]&&(C.ExtendData=c[h]),l.Data.push(C)}l.VolMax=f,l.VolMin=0}else if(3==l.Ver){var f=0;for(var u in o.before){var C=new J,c=o.before[u];C.YClose=r,C.Time=c[0],C.Date=s,C.Price=c[1],C.AvPrice=c[2],C.Vol[0]=c[3],C.ColorID=c[4],C.DateTime=s.toString()+" "+C.Time.toString();var d=C.Vol[0];we.IsNumber(c[5])&&(d=c[5]),d>f&&(f=d),c[h]&&(C.ExtendData=c[h]),l.Data.push(C)}l.VolMax=f,l.VolMin=0}return l},Ii.JsonDataToAfterCloseData=function(t){var e=t.stock[0].yclose,a=(t.stock[0].yclose,t.stock[0]),i=a.date;if(!a.afterinfo)return null;var r={Data:[],TotalCount:180,Ver:2,Date:i},n=a.afterinfo;we.IsNumber(n.totalcount)&&(r.TotalCount=n.totalcount),we.IsNumber(n.ver)&&(r.Ver=n.ver);var o=Zn.MINUTE_AFTERCLOSE_EXTENDDATA;if(1==r.Ver)for(var s=0;s<a.after.length;++s){var n=new q,l=a.after[s];n.YClose=e,n.Time=l[0],n.Date=i,n.Price=l[1],n.Vol[0]=l[2],n.Amount=l[3],we.IsNumber(l[4])&&(n.Date=l[4]),n.DateTime=n.Date+" "+n.Time,r.Data.push(n)}else if(2==r.Ver){var h=0;for(var s in a.after){var n=new q,l=a.after[s];n.YClose=e,n.Time=l[0],n.Date=i,n.Price=l[1],n.Vol[0]=l[2],n.Vol[1]=l[3],n.ColorID=l[4],n.DateTime=i.toString()+" "+n.Time.toString();var u=n.Vol[0]+n.Vol[1];we.IsNumber(l[5])&&(u=l[5]),u>h&&(h=u),l[o]&&(n.ExtendData=l[o]),r.Data.push(n)}r.VolMax=h,r.VolMin=0}else if(3==r.Ver){var h=0;for(var s in a.after){var n=new q,l=a.after[s];n.YClose=e,n.Time=l[0],n.Date=i,n.Price=l[1],n.AvPrice=l[2],n.Vol[0]=l[3],n.ColorID=l[4],n.DateTime=i.toString()+" "+n.Time.toString();var u=n.Vol[0];we.IsNumber(l[5])&&(u=l[5]),u>h&&(h=u),l[o]&&(n.ExtendData=l[o]),r.Data.push(n)}r.VolMax=h,r.VolMin=0}return r},Ii.JsonDataToMinuteData=function(t,e){var a=t.stock[0].symbol,i=a.toUpperCase(),r=wo.IsSHSZ(i),n=wo.IsFutures(i),o=wo.IsSHO(i),s=wo.IsSZO(i),l=[],h=t.stock[0].yclose,u=t.stock[0].yclose,C=t.stock[0].yclose,c=t.stock[0].yclearing;if(n&&c&&(h=u=c),!we.IsNonEmptyArray(t.stock[0].minute))return l;for(var f=t.stock[0].date,d=0;d<t.stock[0].minute.length;++d){var D=t.stock[0].minute[d],m=new z;m.YClearing=c,m.YClose=C,m.Close=D.price,m.Open=D.open,m.High=D.high,m.Low=D.low,m.Vol=r?D.vol/100:D.vol,m.Amount=D.amount,D.date>0&&(f=D.date),m.DateTime=f.toString()+" "+D.time.toString(),m.Date=f,m.Time=D.time,n||o||s?m.Position=D.position:we.IsNumber(D.position)&&(m.Position=D.position),m.Increase=D.increase,m.Risefall=D.risefall,m.AvPrice=D.avprice,we.IsNumber(D.lead)&&(m.Lead=D.lead),we.IsNumber(m.Close)||(m.Close=h,m.Open=m.High=m.Low=m.Close),m.AvPrice||(m.AvPrice=u),C&&m.Close&&(m.Increase=(m.Close-C)/C*100),n&&c&&m.Close&&(m.Increase=(m.Close-c)/c*100),we.IsNumber(D.price)&&(h=D.price),we.IsNumber(D.avprice)&&m.AvPrice===D.avprice&&(u=D.avprice),D.ExtendData&&(m.ExtendData=D.ExtendData),l[d]=m}return l},Ii.JsonDataToUpdateMinuteData=function(t){if(!t||!t.stock)return null;var e=t.stock[0];if(!we.IsNumber(e.date))return null;var a=t.stock[0].symbol,i=a.toUpperCase(),r=wo.IsSHSZ(i),n=wo.IsFutures(i),o={Date:e.date,Data:[],Symbol:a,Name:e.name},s=Zn.MINUTE_DAY_EXTENDDATA;if(we.IsNumber(e.high)&&(o.High=e.high),we.IsNumber(e.low)&&(o.Low=e.low),we.IsNumber(e.yclose)&&(o.YClose=e.yclose),we.IsNumber(e.YClearing)&&(o.YClearing=e.yclearing),we.IsNonEmptyArray(e.minute))for(var l=0;l<e.minute.length;++l){var h=e.minute[l],u=new z;u.YClearing=o.YClearing,u.YClose=o.YClose,u.Date=h[0],u.Time=h[1],u.Open=h[2],u.High=h[3],u.Low=h[4],u.Close=h[5],u.AvPrice=h[6],u.Vol=h[7],u.Amount=h[8],we.IsNumber(h[9])&&(u.Increase=h[9]),we.IsNumber(h[10])&&(u.Risefall=h[10]),we.IsNumber(h[11])&&(u.Lead=h[11]),h[s]&&(u.ExtendData=h[s]),u.DateTime=u.Date.toString()+" "+u.Time.toString(),r&&(u.Vol=u.Vol/100),we.IsNumber(o.YClose)&&u.Close&&(u.Increase=(u.Close-o.YClose)/o.YClose*100),n&&o.YClearing&&u.Close&&(u.Increase=(u.Close-o.YClearing)/o.YClearing*100),o.Data.push(u)}return o},Ii.JsonDataToMinuteLineColorData=function(t){if(!t||!t.stock[0])return null;var e=t.stock[0];if(!e.linecolor||!we.IsNonEmptyArray(e.linecolor.data))return null;var a=[];for(var i in e.linecolor.data){var r=e.linecolor.data[i];if(we.IsNumber(r.type)&&we.IsNumber(r.date)&&we.IsNumber(r.start)&&we.IsNumber(r.end)&&r.color&&!(r.start>=r.end)){var n={Type:r.type,Date:r.date,Start:r.start,End:r.end,Color:r.color};we.IsPlusNumber(r.linewidth)&&(n.LineWidth=r.linewidth),a.push(n)}}return a},Ii.JsonDataToMinuteLastUpdateTime=function(t){if(!t||!t.stock[0])return null;var e=t.stock[0];return we.IsNumber(e.date)&&we.IsNumber(e.time)?{Date:e.date,Time:e.time}:null},Ii.JsonDataToHistoryMinuteLastUpdateTime=function(t){if(!t||!t.updatetime)return null;var e=t.updatetime;return we.IsNumber(e.date)&&we.IsNumber(e.time)?{Date:e.date,Time:e.time}:null},Ii.JsonDataToMinuteDataArray=function(t){var e=t.symbol,a=e.toUpperCase(),i=wo.IsSHSZ(a),r=wo.IsSHO(a),n=wo.IsSZO(a),o=wo.IsFutures(a),s=[],l=Zn.MINUTE_MULTI_DAY_EXTENDDATA;for(var h in t.data){var u=[],C=t.data[h],c=C.date,f=C.yclearing,d=C.yclose,D=d,m=null;o&&f&&(D=m=f);for(var p in C.minute){var v=C.minute[p];v[2]&&(D=v[2]);var g=new z;g.YClearing=f,g.YClose=d,g.Close=v[2],g.Open=v[1],g.High=v[3],g.Low=v[4],g.Increase=null,g.Vol=i?v[5]/100:v[5],g.Amount=v[6],7<v.length&&v[7]>0&&(g.AvPrice=v[7]),g.DateTime=c.toString()+" "+v[0].toString(),g.Date=c,g.Time=v[0],8<v.length&&v[8]>0&&(g.Date=v[8],g.DateTime=g.Date.toString()+" "+v[0].toString()),(o||r||n)&&9<v.length&&(g.Position=v[9]),we.IsNumber(g.Close)||(g.Close=D,g.Open=g.High=g.Low=g.Close),!g.AvPrice&&m&&(g.AvPrice=m),g.Close&&d&&(g.Increase=(g.Close-d)/d*100),g.Close&&f&&o&&(g.Increase=(g.Close-f)/f*100),v.length>7&&v[7]>0&&g.AvPrice===v[7]&&(m=v[7]),v[l]&&(g.ExtendData=v[l]),u[p]=g}var T=new tt;T.Data=u,T.YClose=d,we.IsNumber(f)&&(T.YClearing=f),T.Close=C.close,T.Date=c,s.push(T)}return s},Ii.JsonDataToHistoryMinuteLineColorData=function(t){if(!t)return null;var e=[];for(var a in t.data){var i=t.data[a];if(i.linecolor)for(var r in i.linecolor.data){var n=i.linecolor.data[r];if(we.IsNumber(n.type)&&we.IsNumber(n.date)&&we.IsNumber(n.start)&&we.IsNumber(n.end)&&n.color&&!(n.start>=n.end)){var o={Type:n.type,Date:n.date,Start:n.start,End:n.end,Color:n.color};we.IsPlusNumber(n.linewidth)&&(o.LineWidth=n.linewidth),e.push(o)}}}return e.length>0?e:null},Ii.JsonDataToCallAuctionItem=function(t,e,a,i){var r=!1;if(i){var n=i.toUpperCase();r=wo.IsSHSZ(n)}var o=e.Date,s=e.YClose,l=e.YClearing,h=a?Zn.MINUTE_BEFOREOPEN_EXTENDDATA:Zn.MINUTE_AFTERCLOSE_EXTENDDATA;if(1==e.Ver){var u=null;for(var C in t){var c=a?new J:new q,f=t[C];c.YClose=s,c.YClearing=l,c.Time=f[0],c.Date=o,c.Price=f[1],c.Price?u=c.Price:c.Price=u,c.Vol[0]=r?f[2]/100:f[2],c.Amount=f[3],we.IsNumber(f[4])&&(c.Date=f[4]),c.DateTime=c.Date+" "+c.Time,e.Data.push(c)}}else if(2==e.Ver){var d=0;for(var C in t){var c=a?new J:new q,f=t[C];c.YClose=s,c.YClearing=l,c.Time=f[0],c.Date=o,c.Price=f[1],c.Vol[0]=f[2],c.Vol[1]=f[3],c.ColorID=f[4],c.DateTime=o.toString()+" "+c.Time.toString();var D=c.Vol[0]+c.Vol[1];we.IsNumber(f[5])&&(D=f[5]),D>d&&(d=D),f[h]&&(c.ExtendData=f[h]),e.Data.push(c)}e.VolMax=d,e.VolMin=0}else if(3==beforeOpenData.Ver){var d=0;for(var C in t){var c=a?new J:new q,f=t[C];c.YClose=s,c.YClearing=l,c.Time=f[0],c.Date=o,c.Price=f[1],c.AvPrice=f[2],c.Vol[0]=f[3],c.ColorID=f[4],c.DateTime=o.toString()+" "+c.Time.toString();var D=c.Vol[0];we.IsNumber(f[5])&&(D=f[5]),D>d&&(d=D),f[h]&&(c.ExtendData=f[h]),e.Data.push(c)}e.VolMax=d,e.VolMin=0}},Ii.JosnDataToBeforeOpenDataArray=function(t){if(!t||!t.data)return null;var e=[];for(var a in t.data){var i=t.data[a],r={Data:[],TotalCount:15,Ver:1,Date:i.date,YClose:i.yclose,YClearing:i.YClearing};i.beforeinfo&&(we.IsNumber(i.beforeinfo.totalcount)&&(r.TotalCount=i.beforeinfo.totalcount),we.IsNumber(i.beforeinfo.ver)&&(r.Ver=i.beforeinfo.ver)),Ii.JsonDataToCallAuctionItem(i.before,r,!0,t.symbol),e.push(r)}return e.sort(function(t,e){return t.Date-e.Date}),e},Ii.JosnDataToAfterCloseDataArray=function(t){if(!t||!t.data)return null;var e=[];for(var a in t.data){var i=t.data[a],r={Data:[],TotalCount:15,Ver:1,Date:i.date,YClose:i.yclose,YClearing:i.YClearing};i.afterinfo&&(we.IsNumber(i.afterinfo.totalcount)&&(r.TotalCount=i.afterinfo.totalcount),we.IsNumber(i.afterinfo.ver)&&(r.Ver=i.afterinfo.ver)),Ii.JsonDataToCallAuctionItem(i.after,r,!1,t.symbol),e.push(r)}return e.sort(function(t,e){return t.Date-e.Date}),e},Ai.prototype.GetDefaultColor=function(t){var e=["rgb(255,174,0)","rgb(25,199,255)","rgb(175,95,162)","rgb(236,105,65)","rgb(68,114,196)","rgb(229,0,79)","rgb(0,128,255)","rgb(252,96,154)","rgb(42,230,215)","rgb(24,71,178)"];return e[parseInt(t)%(e.length-1)]},Pi.Get=function(t){return new Vn.default([["äºå¨æ",{Create:function(){return new _i}}],["å¬å",{Create:function(){return new Gi}}],["ä¸ç»©é¢å",{Create:function(){return new ki}}],["è°ç ",{Create:function(){return new Vi}}],["å¤§å®äº¤æ",{Create:function(){return new Hi}}],["é¾èæ¦",{Create:function(){return new Yi}}]]).get(t)},Pi.GetClassInfo=function(t){return new Vn.default([["äºå¨æ",{ClassName:"InvestorInfo"}],["å¬å",{ClassName:"AnnouncementInfo"}],["ä¸ç»©é¢å",{ClassName:"PforecastInfo"}],["è°ç ",{ClassName:"ResearchInfo"}],["å¤§å®äº¤æ",{ClassName:"BlockTrading"}],["é¾èæ¦",{ClassName:"TradeDetail"}]]).get(t)},Pi.GetIconUrl=function(t){switch(t){case to.INVESTOR:return So.KLine.Info.Investor.Icon;case to.PFORECAST:return So.KLine.Info.Pforecast.Icon;case to.ANNOUNCEMENT:return So.KLine.Info.Announcement.Icon;case to.ANNOUNCEMENT_QUARTER_1:case to.ANNOUNCEMENT_QUARTER_2:case to.ANNOUNCEMENT_QUARTER_3:case to.ANNOUNCEMENT_QUARTER_4:return So.KLine.Info.Announcement.IconQuarter;case to.RESEARCH:return So.KLine.Info.Research.Icon;case to.BLOCKTRADING:return So.KLine.Info.BlockTrading.Icon;case to.TRADEDETAIL:return So.KLine.Info.TradeDetail.Icon;default:return So.KLine.Info.Announcement.Icon}},Pi.GetIconLibrary=function(t){var e=So.KLine.Info.IconLibrary;if(!e||!e.Icon)return So.KLine.Info.Announcement.IconFont;if(t>=0&&t<e.Icon.length){var a=e.Icon[t];return{Text:a.Text,HScreenText:a.HScreenText,Color:a.Color,Family:e.Family}}return So.KLine.Info.Announcement.IconFont},Pi.GetIconFont=function(t){if(t>=to.ANNOUNCEMENT_EX_START&&t<=to.ANNOUNCEMENT_EX_END){var e=t-to.ANNOUNCEMENT_EX_START;return Pi.GetIconLibrary(e)}switch(t){case to.INVESTOR:return So.KLine.Info.Investor.IconFont;case to.PFORECAST:return So.KLine.Info.Pforecast.IconFont;case to.ANNOUNCEMENT:return So.KLine.Info.Announcement.IconFont;case to.ANNOUNCEMENT_QUARTER_1:case to.ANNOUNCEMENT_QUARTER_2:case to.ANNOUNCEMENT_QUARTER_3:case to.ANNOUNCEMENT_QUARTER_4:return So.KLine.Info.Announcement.IconFont2;case to.RESEARCH:return So.KLine.Info.Research.IconFont;case to.BLOCKTRADING:return So.KLine.Info.BlockTrading.IconFont;case to.TRADEDETAIL:return So.KLine.Info.TradeDetail.IconFont;default:return So.KLine.Info.Announcement.IconFont}},Xi.InfoMap=new Vn.default([["å¤§çå¼å¨",{Create:function(){return new Ui}}]]),Xi.Get=function(t){return Xi.InfoMap.get(t)};var Eo=new Ki,wo={SH:".SH",SZ:".SZ",SHSZ_C_Index:".CI",BJ:".BJ",SHO:".SHO",SZO:".SZO",HK:".HK",FHK:".FHK",SHFE:".SHF",SHFE2:".SHFE",CFFEX:".CFE",CFFEX2:".CFFEX",CFFEX3:".CF",DCE:".DCE",CZCE:".CZC",GZFE:".GZFE",USA:".USA",FTSE:".FTSE",BIT:".BIT",BIZ:".BIZ",FOREX:".FOREX",NYMEX:".NYMEX",COMEX:".COMEX",NYBOT:".NYBOT",CBOT:".CBOT",LME:".LME",TOCOM:".TOCOM",IPE:".IPE",TW:".TW",JP:".JP",HSX:".HSX",HNX:".HNX",UPCOM:".UPCOM",ET:".ET",IsET:function(t){return!!t&&t.indexOf(this.ET)>0},IsETShowAvPrice:function(t){return!1},IsHSX:function(t){return!!t&&t.indexOf(this.HSX)>0},IsHNX:function(t){return!!t&&t.indexOf(this.HNX)>0},IsUPCOM:function(t){return!!t&&t.indexOf(this.UPCOM)>0},IsNYMEX:function(t){return!!t&&t.indexOf(this.NYMEX)>0},IsCOMEX:function(t){return!!t&&t.indexOf(this.COMEX)>0},IsNYBOT:function(t){return!!t&&t.indexOf(this.NYBOT)>0},IsCBOT:function(t){return!!t&&t.indexOf(this.CBOT)>0},IsLME:function(t){return!!t&&t.indexOf(this.LME)>0},IsTOCOM:function(t){return!!t&&t.indexOf(this.TOCOM)>0},IsIPE:function(t){return!!t&&t.indexOf(this.IPE)>0},IsForeignExchange:function(t){return!!t&&t.indexOf(this.FOREX)>0},IsFTSE:function(t){return!!t&&t.indexOf(this.FTSE)>0},IsFHK:function(t){return!!t&&t.indexOf(this.FHK)>0},IsBIT:function(t){return!!t&&(t.indexOf(this.BIT)>0||t.indexOf(this.BIZ)>0)},IsUSA:function(t){return!!t&&t.indexOf(this.USA)>0},IsSH:function(t){var e=t.length-this.SH.length;return t.indexOf(this.SH)==e},IsSZ:function(t){var e=t.length-this.SZ.length;return t.indexOf(this.SZ)==e},IsBJ:function(t){var e=t.length-this.BJ.length;return t.indexOf(this.BJ)==e},IsSHSZCustomIndex:function(t){var e=t.length-this.SHSZ_C_Index.length;return t.indexOf(this.SHSZ_C_Index)==e},IsSHO:function(t){if(this.IsSH(t)&&11==t.length&&"1"==t[0])return!0;var e=t.length-this.SHO.length;return t.indexOf(this.SHO)==e},IsSZO:function(t){if(this.IsSZ(t)&&11==t.length&&"9"==t[0])return!0;var e=t.length-this.SZO.length;return t.indexOf(this.SZO)==e},IsHK:function(t){var e=t.length-this.HK.length;return t.indexOf(this.HK)==e},IsTW:function(t){var e=t.length-this.TW.length;return t.indexOf(this.TW)==e},IsJP:function(t){var e=t.length-this.JP.length;return t.indexOf(this.JP)==e},IsSHFE:function(t){return!!t&&(t.indexOf(this.SHFE)>0||t.indexOf(this.SHFE2)>0)},IsCFFEX:function(t){if(!t)return!1;if(t.indexOf(this.CFFEX)>0)return!0;if(t.indexOf(this.CFFEX2)>0)return!0;var e=t.indexOf(this.CFFEX3);return e>0&&e+this.CFFEX3.length==t.length},IsDCE:function(t){return!!t&&t.indexOf(this.DCE)>0},IsCZCE:function(t){return!!t&&t.indexOf(this.CZCE)>0},IsGZFE:function(t){return!!t&&t.indexOf(this.GZFE)>0},IsChinaFutures:function(t){return this.IsSHO(t)||this.IsSZO(t)||this.IsGZFE(t)||this.IsCFFEX(t)||this.IsCZCE(t)||this.IsDCE(t)||this.IsSHFE(t)},IsFutures:function(t){return!!t&&(this.IsChinaFutures(t)||this.IsNYMEX(t)||this.IsCOMEX(t)||this.IsNYBOT(t)||this.IsCBOT(t)||this.IsLME(t)||this.IsTOCOM(t))},IsSHSZ:function(t){return this.IsSZ(t)||this.IsSH(t)||this.IsSHSZCustomIndex(t)},IsSHSZFund:function(t){if(!t)return!1;if(this.IsSH(t)){if("5"==t.charAt(0)&&"1"==t.charAt(1))return!0}else if(this.IsSZ(t)&&"1"==t.charAt(0)&&("5"==t.charAt(1)||"6"==t.charAt(1)||"7"==t.charAt(1)||"8"==t.charAt(1)))return!0;return!1},IsSHSZIndex:function(t){if(!t)return!1;var e=t.toUpperCase();if(this.IsSH(e)){var a=e.replace(".SH","");if("0"==e.charAt(0)&&parseInt(a)<=3e3)return!0}else if(this.IsSZ(e)){if("3"==e.charAt(0)&&"9"==e.charAt(1))return!0}else if(this.IsSHSZCustomIndex(e))return!0;return!1},IsSHSZStockA:function(t){if(!t)return!1;var e=t.toUpperCase();if(this.IsSH(e)){e.replace(".SH","");if("6"==e.charAt(0))return!0}else if(this.IsSZ(e))if("0"==e.charAt(0)){if("0"==e.charAt(1)&&"2"==e.charAt(2))return!0;if("7"!=e.charAt(1)&&"8"!=e.charAt(1))return!0}else if("3"==e.charAt(0)&&"0"==e.charAt(1)){if("0"==e.charAt(2))return!0;if("1"==e.charAt(2))return!0}return!1},IsBJStock:function(t){if(!t)return!1;var e=t.toUpperCase();if(!this.IsBJ(e))return!1;var a=e.charAt(0);return"4"==a||"8"==a},IsSHStockSTAR:function(t){if(!t)return!1;var e=t.toUpperCase();return!!this.IsSH(e)&&("6"==e.charAt(0)&&"8"==e.charAt(1)&&"8"==e.charAt(2))},IsSHGEM:function(t){if(!t)return!1;var e=t.toUpperCase();return!!this.IsSH(e)&&("3"==e.charAt(0)&&"0"==e.charAt(1))},GetMarketStatus:function(t){if(!t)return 0;var e=t.toUpperCase(),a=new Date,i=a.getDay(),r=100*a.getHours()+a.getMinutes();if(this.IsUSA(e)){var n=lr(-4),i=n.getDay(),r=100*n.getHours()+n.getMinutes();return 6==i||0==i?0:r>1730?3:r<930?1:2}return this.IsBIT(e)?2:this.IsForeignExchange(e)?2:this.IsFTSE(e)?6==i||0==i?0:r>=830&&r<=2359?2:r>=0&&r<=500?2:0:this.IsFHK(e)?6==i||0==i?0:r>=900&&r<=2359?2:r>=0&&r<=320?2:0:this.IsET(e)?this.GetETMarketStatus(t):this.IsHK(e)?6==i||0==i?0:r>1630?3:r<925?1:2:this.IsTW(e)?6==i||0==i?0:r>1410?3:r<820?1:2:this.IsJP(e)?6==i||0==i?0:r>1520?3:r<830?1:2:this.IsNYMEX(e)?this.GetNYMEXMarketStatus(e):this.IsCOMEX(e)?this.GetCOMEXMarketStatus(e):this.IsNYBOT(e)?this.GetNYBOTMarketStatus(e):this.IsCBOT(e)?this.GetCBOTMarketStatus(e):this.IsLME(e)?this.GetLMEMarketStatus(e):this.IsTOCOM(e)?this.GetTOCOMMarketStatus(e):this.IsChinaFutures(e)?6==i||0==i?0:this.IsCFFEX(e)?r>1540?3:r<910?1:2:r>=2100?2:r<=240?2:r>=830&&r<=1510?2:1:6==i||0==i?0:r>1540?3:r<910?1:2},GetLimitPriceRange:function(t,e){return this.IsSHSZStockA(t)?this.IsSHStockSTAR(t)?{Max:.2,Min:-.2}:this.IsSHGEM(t)?{Max:.2,Min:-.2}:e?e.indexOf("ST")>=0?{Max:.05,Min:-.05}:{Max:.1,Min:-.1}:null:null},GetDefaultDecimal:function(t){return 2},GetSHDecimal:function(t){return 2},GetSZDecimal:function(t){return 2},GetFHKDecimal:function(t){return 0},GetFTSEDecimal:function(t){return 0},GetBITDecimal:function(t){return 2},GetSHODecimal:function(t){return 4},GetETDecimal:function(t){return 2},GetHKDecimal:function(t){return 2},GetTWDecimal:function(t){return 2},GetJPDecimal:function(t){return 2},GetHSXDecimal:function(t){return 2},GetHNXDecimal:function(t){return 2},GetUPCOMDecimal:function(t){return 2},GetForeignExchangeDecimal:function(t){return 4},GetNYMEXDecimal:function(t){return No.GetDecimal(t)},GetCOMEXDecimal:function(t){return Ro.GetDecimal(t)},GetNYBOTDecimal:function(t){return Ao.GetDecimal(t)},GetCBOTDecimal:function(t){return Oo.GetDecimal(t)},GetLMEDecimal:function(t){return Po.GetDecimal(t)},GetTOCOMDecimal:function(t){return Bo.GetDecimal(t)},GetIPEDecimal:function(t){return _o.GetDecimal(t)},GetETMarketStatus:function(t){return 2},GetNYMEXMarketStatus:function(t){return No.GetMarketStatus(t)},GetCOMEXMarketStatus:function(t){return Ro.GetMarketStatus(t)},GetNYBOTMarketStatus:function(t){return Ao.GetMarketStatus(t)},GetCBOTMarketStatus:function(t){return Oo.GetMarketStatus(t)},GetLMEMarketStatus:function(t){return Po.GetMarketStatus(t)},GetTOCOMMarketStatus:function(t){return Bo.GetMarketStatus(t)},GetIPEMarketStatus:function(t){return _o.GetMarketStatus(t)},IsShowMinuteVolTitle:function(t){if(!t)return!1;t.toUpperCase();return!1},IsShowMinutePostionLine:function(t){return!!(wo.IsFutures(t)||wo.IsSHO(t)||wo.IsSZO(t))},IsShowMinuteColorVolBar:function(t){return!!So.Minute.VolBarColor},IsEnableRight:function(t,e,a){return!(!wo.IsSHSZStockA(e)&&!wo.IsBJStock(e))&&(!tt.IsTickPeriod(t)&&(!!we.IsPlusNumber(a)||!tt.IsMinutePeriod(t,!0)))}},Fo=new ji,Mo=new Qi,Lo=new $i,No=new tr,Ro=new er,Ao=new ar,Oo=new ir,Po=new rr,Bo=new nr,_o=new or;if(!Xn)var Xn={Chart:{Log:console.log,Warn:console.warn},Complier:{Log:console.log,Warn:console.warn}};var Go={Domain:"http://127.0.0.1:8080",CacheDomain:"http://127.0.0.1:8087",DrawIcon:{Family:"iconfont",Data:new Vn.default([[1,{Text:"î ",Color:"rgb(243,28,15)"}],[2,{Text:"î¡",Color:"rgb(87,247,41)"}],[3,{Text:"î¢",Color:"rgb(237,153,0)"}],[4,{Text:"î£",Color:"rgb(237,153,0)"}],[5,{Text:"î¤",Color:"rgb(237,153,0)"}],[6,{Text:"î¥",Color:"rgb(140,57,208)"}],[7,{Text:"î¦",Color:"rgb(246,135,37)"}],[8,{Text:"î§",Color:"rgb(85,231,56)"}],[9,{Text:"î¨",Color:"rgb(227,61,41)"}],[10,{Text:"î©",Color:"rgb(216,78,48)"}],[11,{Text:"îª",Color:"rgb(249,187,0)"}],[12,{Text:"î«",Color:"rgb(249,187,0)"}],[13,{Text:"î¬",Color:"rgb(216,42,0)"}],[14,{Text:"î­",Color:"rgb(58,90,236)"}],[15,{Text:"î®",Color:"rgb(227,149,0)"}],[16,{Text:"î¯",Color:"rgb(208,82,78)"}],[17,{Text:"î°",Color:"rgb(234,114,26)"}],[18,{Text:"î±",Color:"rgb(116,25,255)"}],[19,{Text:"î²",Color:"rgb(102,9,11)"}],[20,{Text:"î³",Color:"rgb(127,125,137)"}],[21,{Text:"î´",Color:"rgb(110,188,255)"}],[22,{Text:"îµ",Color:"rgb(238,79,51)"}],[23,{Text:"î¶",Color:"rgb(244,71,0)"}],[24,{Text:"î·",Color:"rgb(102,183,248)"}],[25,{Text:"î¸",Color:"rgb(234,88,231)"}],[26,{Text:"î¹",Color:"rgb(242,171,0)"}],[27,{Text:"îº",Color:"rgb(87,247,168)"}],[28,{Text:"î»",Color:"rgb(97,204,113)"}],[29,{Text:"î¼",Color:"rgb(84,115,193)"}],[30,{Text:"î½",Color:"rgb(141,51,255)"}],[31,{Text:"î¾",Color:"rgb(200,126,24)"}],[32,{Text:"î¿",Color:"rgb(195,41,32)"}],[33,{Text:"î",Color:"rgb(215,85,194)"}],[34,{Text:"î",Color:"rgb(250,222,105)"}],[35,{Text:"î",Color:"rgb(112,249,224)"}],[36,{Text:"î",Color:"rgb(217,107,98)"}],[37,{Text:"î",Color:"rgb(114,231,17)"}],[38,{Text:"î",Color:"rgb(238,31,25)"}],[39,{Text:"î",Color:"rgb(92,247,113)"}],[40,{Text:"î",Color:"rgb(175,175,175)"}],[41,{Text:"î",Color:"rgb(252,228,23)"}],[42,{Text:"î",Color:"rgb(88,195,235)"}],[43,{Text:"î",Color:"rgb(55,74,94)"}],[44,{Text:"î",Color:"rgb(248,175,33)"}],[45,{Text:"î",Color:"rgb(194,180,112)"}],[46,{Text:"î",Color:"rgb(50,153,28)"}],[47,{Text:"î",Color:"rgb(17,65,152)"}],[48,{Text:"î",Color:"rgb(194,55,26)"}],[49,{Text:"î",Color:"rgb(243,0,0)"}]])},CustomDrawIcon:{Data:new Vn.default},CustomFunction:{Data:new Vn.default},CustomVariant:{Data:new Vn.default},CustomDataFunction:{Data:new Vn.default([["L2_VOLNUM",{Name:"L2_VOLNUM",Description:"åæ°åæ¡£,æ: N(0--1):(è¶å¤§+å¤§)/(ä¸­+å°),M(0--1):ä¹°/åäºç±»,æ²ªæ·±äº¬åç§çèµéæµå,ä»æ¥çº¿ä»¥ä¸å¨æ,ç¨äºç¹å®çæ¬",ArgCount:2}],["L2_VOL",{Name:"L2_VOL",Description:"æäº¤éåæ¡£,æ: N(0--3):è¶å¤§/å¤§/ä¸­/å°åæ¡£å¤ç,M(0--3):ä¹°å¥/ååº/ä¸»ä¹°/ä¸»ååç±»,æ²ªæ·±äº¬åç§çèµéæµå,ä»æ¥çº¿ä»¥ä¸å¨æ,ç¨äºç¹å®çæ¬",ArgCount:2}],["L2_AMO",{Name:"L2_AMO",Description:"æäº¤é¢åæ¡£,æ: N(0--3):è¶å¤§/å¤§/ä¸­/å°åæ¡£å¤ç,M(0--3):ä¹°å¥/ååº/ä¸»ä¹°/ä¸»ååç±»,æ²ªæ·±äº¬åç§çèµéæµå,ä»æ¥çº¿ä»¥ä¸å¨æ,ç¨äºç¹å®çæ¬",ArgCount:2}]])},GetDrawIcon:function(t){if(Go.CustomDrawIcon.Data.has(t)){var e=Go.CustomDrawIcon.Data.get(t);return e.Symbol?{Symbol:e.Symbol,Color:e.Color,IconFont:!1,ID:t}:{Symbol:e.Text,Color:e.Color,Family:e.Family,IconFont:!0,ID:t}}if(Go.DrawIcon.Data.has(t)){var a=Go.DrawIcon.Data.get(t);return{Symbol:a.Text,Color:a.Color,Family:Go.DrawIcon.Family,IconFont:!0,ID:t}}return null},GetDrawTextIcon:function(t){return new Vn.default([[1,{Symbol:"â",Color:"rgb(238,44,44)"}],[2,{Symbol:"â",Color:"rgb(0,139,69)"}],[3,{Symbol:"ð§"}],[4,{Symbol:"ð¨"}],[5,{Symbol:"ð"}],[6,{Symbol:"ð±"}],[7,{Symbol:"B",Color:"rgb(238,44,44)"}],[8,{Symbol:"S",Color:"rgb(0,139,69)"}],[9,{Symbol:"ð°"}],[10,{Symbol:"ðª"}],[11,{Symbol:"ð"}],[12,{Symbol:"ð"}],[13,{Symbol:"B",Color:"rgb(178,34,34)"}],[14,{Symbol:"S",Color:"rgb(0,139,69)"}],[36,{Symbol:"Î§",Color:"rgb(238,44,44)"}],[37,{Symbol:"X",Color:"rgb(0,139,69)"}],[38,{Symbol:"â²",Color:"rgb(238,44,44)"}],[39,{Symbol:"â¼",Color:"rgb(0,139,69)"}],[40,{Symbol:"â",Color:"rgb(238,44,44)"}],[41,{Symbol:"â",Color:"rgb(238,44,44)"}],[42,{Symbol:"ð"}],[43,{Symbol:"ð"}],[44,{Symbol:"ð¥"}],[45,{Symbol:"ð¥"}],[46,{Symbol:"ð¥"}],[47,{Symbol:"ð"}]]).get(t)},IsCustomFunction:function(t){return!!Go.CustomFunction.Data.has(t)},IsCustomVariant:function(t){return!!Go.CustomVariant.Data.has(t)},IsCustomDataFunction:function(t){return!!Go.CustomDataFunction.Data.has(t)}},ko={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"},Vo={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},Ho={FromCodePoint:function(t){return t<65536?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10))+String.fromCharCode(56320+(t-65536&1023))},IsWhiteSpace:function(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0},IsLineTerminator:function(t){return 10===t||13===t||8232===t||8233===t},IsIdentifierStart:function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||12304===t||12305===t||9650===t||9660===t||t>=128&&Vo.NonAsciiIdentifierStart.test(Ho.FromCodePoint(t))},IsIdentifierPart:function(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||35===t||12304===t||12305===t||9650===t||9660===t||t>=128&&Vo.NonAsciiIdentifierPart.test(Ho.FromCodePoint(t))},IsDecimalDigit:function(t){return t>=48&&t<=57},IsHexDigit:function(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102},isOctalDigit:function(t){return t>=48&&t<=55}},Yo={};Yo[1]="Boolean",Yo[2]="<end>",Yo[3]="Identifier",Yo[4]="Keyword",Yo[5]="Null",Yo[6]="Numeric",Yo[7]="Punctuator",Yo[8]="String",Yo[9]="RegularExpression",Yo[10]="Template",hr.GetPeriodInfo=function(t){var e=[{Name:"MIN1",Period:4,Order:1},{Name:"MIN5",Period:5,Order:2},{Name:"MIN15",Period:6,Order:3},{Name:"MIN30",Period:7,Order:4},{Name:"MIN60",Period:8,Order:5},{Name:"DAY",Period:0,Order:1e3},{Name:"MULTIDAY",Period:40002,Order:1002},{Name:"DAY2",Period:40002,Order:1002},{Name:"DAY3",Period:40003,Order:1003},{Name:"DAY4",Period:40004,Order:1004},{Name:"DAY5",Period:40005,Order:1005},{Name:"WEEK",Period:1,Order:1005},{Name:"DAY6",Period:40006,Order:1006},{Name:"DAY7",Period:40007,Order:1007},{Name:"DAY8",Period:40008,Order:1008},{Name:"DAY9",Period:40009,Order:1009},{Name:"DAY10",Period:40009,Order:1010},{Name:"WEEK2",Period:21,Order:1010},{Name:"DAY11",Period:40011,Order:1011},{Name:"DAY12",Period:40012,Order:1012},{Name:"DAY13",Period:40013,Order:1013},{Name:"DAY14",Period:40014,Order:1014},{Name:"MONTH",Period:2,Order:1030},{Name:"SEASON",Period:9,Order:1090},{Name:"HALFYEAR",Period:22,Order:1180},{Name:"YEAR",Period:3,Order:1365}];if(t.Name){for(var a in e)if(t.Name&&e[a].Name==t.Name)return e[a];return null}if(we.IsNumber(t.PeriodID)){for(var a in e)if(e[a].Period==t.PeriodID)return e[a];return null}return null},hr.GetConvertValueName=function(t){var e;return"COVER_C"==t?e="CLOSE":"COVER_O"==t?e="OPEN":"COVER_H"==t?e="HIGH":"COVER_L"==t?e="LOW":"COVER_A"==t?e="AMOUNT":"COVER_V"==t&&(e="VOL"),e};var Xo={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};Dr.prototype.IsNumber=function(t){return null!=t&&!isNaN(t)},Dr.prototype.IsDivideNumber=function(t){return null!=t&&(!isNaN(t)&&0!=t)},Dr.MOD=function(t,e){if(t<0&&e<0||t>=0&&e>=0){if(parseInt(t)==t&&parseInt(e)==e)return t%e;var a=parseFloat((t-Math.floor(t/e)*e).toFixed(1));return a}var i=Math.abs(t),r=Math.abs(e),a=Math.abs(Math.abs(e)*(Math.floor(i/r)+1)-Math.abs(t));return e<0&&(a=-a),a},mr.prototype.CalculateDrawLine=function(t){t.List=[];for(var e=t.Start.ID;e<=t.End.ID;++e)t.List.push(e);var a=Math.abs(t.Start.Value-t.End.Value),i=t.List.length-1,r=[];if(r.push({ID:t.Start.ID,Value:t.Start.Value}),t.Start.Value>t.End.Value)for(var n=1;n<t.List.length-1;++n){var o=a*(t.List.length-1-n)/i+t.End.Value;r.push({ID:t.List[n],Value:o})}else for(var s=1;s<t.List.length-1;++s){var o=a*s/i+t.Start.Value;r.push({ID:t.List[s],Value:o})}return r.push({ID:t.End.ID,Value:t.End.Value}),r},mr.prototype.IsNumber=function(t){return null!=t&&!isNaN(t)},mr.prototype.IsDrawFunction=function(t){return!!new Rn.default(["STICKLINE","DRAWTEXT","SUPERDRAWTEXT","DRAWLINE","DRAWBAND","DRAWKLINE","DRAWKLINE1","DRAWKLINE_IF","DRAWCOLORKLINE","PLOYLINE","DRAWOVERLAYKLINE","POLYLINE","DRAWNUMBER","DRAWNUMBER_FIX","DRAWICON","DRAWCHANNEL","PARTLINE","DRAWTEXT_FIX","DRAWGBK","DRAWTEXT_LINE","DRAWRECTREL","DRAWTEXTABS","DRAWTEXTREL","DRAWOVERLAYLINE","FILLRGN","FILLRGN2","FILLTOPRGN","FILLBOTTOMRGN","FILLVERTICALRGN","FLOATRGN","DRAWSL","DRAWGBK2","DRAWGBK_DIV","VERTLINE","HORLINE","TIPICON","BUY","SELL","SELLSHORT","BUYSHORT"]).has(t)},mr.prototype.RemoveZero=function(t){for(;t.length>0;){var e=t.length-1,a=t[e];if("0"!=a){if("."==a){t=t.substr(0,e);break}break}t=t.substr(0,e)}return t};var Wo={YCLOSE:3,OPEN:4,HIGH:5,LOW:6,CLOSE:7,VOL:8,AMOUNT:10,AMPLITUDE:13,INCREASE:14,EXCHANGERATE:37};pr.prototype.IsNumber=function(t){return null!=t&&!isNaN(t)},pr.prototype.IsDivideNumber=function(t){return null!=t&&(!isNaN(t)&&0!=t)},pr.prototype.JsonDataToFinance=function(t){for(var e,a=1;a<=4;++a){switch(a){case 1:var i=t.finance1,r=t.announcement1;break;case 2:var i=t.finance2,r=t.announcement2;break;case 3:var i=t.finance3,r=t.announcement3;break;case 4:var i=t.finance4,r=t.announcement4}i&&r&&this.IsNumber(r.year)&&this.IsNumber(r.quarter)&&(e?e.Announcement.year<r.year&&(e={Date:t.date,Finance:i,Announcement:r}):e={Date:t.date,Finance:i,Announcement:r})}return e};var Uo=!1,Ko={JOB_DOWNLOAD_SYMBOL_DATA:1,JOB_DOWNLOAD_INDEX_DATA:2,JOB_DOWNLOAD_SYMBOL_LATEST_DATA:3,JOB_DOWNLOAD_INDEX_INCREASE_DATA:4,JOB_DOWNLOAD_VOLR_DATA:5,JOB_DOWNLOAD_LATEST_INDEX_DATA:8,JOB_DOWNLOAD_OTHER_SYMBOL_DATA:9,JOB_DOWNLOAD_SYMBOL_PERIOD_DATA:10,JOB_DOWNLOAD_FINVALUE:301,JOB_DOWNLOAD_FINONE:302,JOB_DOWNLOAD_FINANCE:303,JOB_DOWNLOAD_GPJYVALUE:304,JOB_DOWNLOAD_VARIANT:305,JOB_DOWNLOAD_SCJYVALUE:306,JOB_DOWNLOAD_GPJYONE:307,JOB_DOWNLOAD_SCJYONE:308,JOB_DOWNLOAD_BKJYVALUE:309,JOB_DOWNLOAD_BKJYONE:310,JOB_DOWNLOAD_MARGIN_BALANCE:1e3,JOB_DOWNLOAD_MARGIN_RATE:1001,JOB_DOWNLOAD_MARGIN_BUY_BALANCE:1010,JOB_DOWNLOAD_MARGIN_BUY_AMOUNT:1011,JOB_DOWNLOAD_MARGIN_BUY_REPAY:1012,JOB_DOWNLOAD_MARGIN_BUY_NET:1013,JOB_DOWNLOAD_MARGIN_SELL_BALANCE:1020,JOB_DOWNLOAD_MARGIN_SELL_VOLUME:1021,JOB_DOWNLOAD_MARGIN_SELL_REPAY:1022,JOB_DOWNLOAD_MARGIN_SELL_NET:1023,JOB_DOWNLOAD_NEWS_ANALYSIS_NEGATIVE:2e3,JOB_DOWNLOAD_NEWS_ANALYSIS_RESEARCH:2001,JOB_DOWNLOAD_NEWS_ANALYSIS_INTERACT:2002,JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE:2003,JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2:2004,JOB_DOWNLOAD_NEWS_ANALYSIS_TRUSTHOLDER:2005,JOB_DOWNLOAD_NEWS_ANALYSIS_BLOCKTRADING:2006,JOB_DOWNLOAD_NEWS_ANALYSIS_COMPANYNEWS:2007,JOB_DOWNLOAD_NEWS_ANALYSIS_TOPMANAGERS:2008,JOB_DOWNLOAD_NEWS_ANALYSIS_PLEDGE:2009,JOB_DOWNLOAD_HK_TO_SH:2050,JOB_DOWNLOAD_HK_TO_SZ:2051,JOB_DOWNLOAD_HK_TO_SH_SZ:2052,JOB_DOWNLOAD_HK_TO_SHSZ:2053,JOB_CUSTOM_FUNCTION_DATA:6e3,JOB_CUSTOM_VARIANT_DATA:6001,JOB_CUSTOM_DATA_FUNCTION:6002,JOB_DOWNLOAD_SECTION_SF:2e4,JOB_DOWNLOAD_SECTION_F_01:20001,JOB_DOWNLOAD_SECTION_F_02:20002,JOB_DOWNLOAD_SECTION_F_03:20003,JOB_DOWNLOAD_SECTION_F_04:20004,JOB_DOWNLOAD_SECTION_F_05:20005,JOB_DOWNLOAD_SECTION_F_06:20006,JOB_DOWNLOAD_SECTION_F_07:20007,JOB_DOWNLOAD_SECTION_F_08:20008,JOB_DOWNLOAD_SECTION_F_09:20009,JOB_DOWNLOAD_SECTION_F_10:20010,JOB_DOWNLOAD_SECTION_F_11:20011,JOB_DOWNLOAD_SECTION_F_12:20012,JOB_DOWNLOAD_SECTION_F_13:20013,JOB_DOWNLOAD_SECTION_F_14:20014,JOB_DOWNLOAD_SECTION_F_15:20015,JOB_DOWNLOAD_SECTION_F_16:20016,JOB_DOWNLOAD_SECTION_F_17:20017,JOB_DOWNLOAD_SECTION_F_18:20018,JOB_DOWNLOAD_SECTION_F_19:20019,JOB_DOWNLOAD_SECTION_F_20:20020,JOB_DOWNLOAD_SECTION_F_21:20021,JOB_DOWNLOAD_SECTION_F_22:20022,JOB_DOWNLOAD_SECTION_F_23:20023,JOB_DOWNLOAD_SECTION_F_24:20024,JOB_DOWNLOAD_SECTION_F_25:20025,JOB_DOWNLOAD_SECTION_F_26:20026,JOB_DOWNLOAD_SECTION_F_27:20027,JOB_DOWNLOAD_SECTION_F_28:20028,JOB_DOWNLOAD_SECTION_F_29:20029,JOB_DOWNLOAD_SECTION_F_30:20030,JOB_DOWNLOAD_SECTION_F_31:20031,JOB_DOWNLOAD_SECTION_F_32:20032,JOB_DOWNLOAD_SECTION_F_33:20033,JOB_DOWNLOAD_SECTION_F_34:20034,JOB_DOWNLOAD_SECTION_F_35:20035,JOB_DOWNLOAD_SECTION_F_36:20036,JOB_DOWNLOAD_SECTION_F_37:20037,JOB_DOWNLOAD_SECTION_F_38:20038,JOB_DOWNLOAD_SECTION_F_39:20039,JOB_DOWNLOAD_CUSTOM_API_DATA:3e4,JOB_EXECUTE_INDEX:30010,JOB_RUN_SCRIPT:1e4,GetMarginJobID:function(t){var e=new Vn.default([[1,Ko.JOB_DOWNLOAD_MARGIN_BALANCE],[2,Ko.JOB_DOWNLOAD_MARGIN_RATE],[3,Ko.JOB_DOWNLOAD_MARGIN_BUY_BALANCE],[4,Ko.JOB_DOWNLOAD_MARGIN_BUY_AMOUNT],[5,Ko.JOB_DOWNLOAD_MARGIN_BUY_REPAY],[6,Ko.JOB_DOWNLOAD_MARGIN_BUY_NET],[7,Ko.JOB_DOWNLOAD_MARGIN_SELL_BALANCE],[8,Ko.JOB_DOWNLOAD_MARGIN_SELL_VOLUME],[9,Ko.JOB_DOWNLOAD_MARGIN_SELL_REPAY],[10,Ko.JOB_DOWNLOAD_MARGIN_SELL_NET]]);return e.has(t)?e.get(t):null},GetNewsAnalysisID:function(t){var e=new Vn.default([[1,Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_NEGATIVE],[2,Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_RESEARCH],[3,Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_INTERACT],[4,Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE],[5,Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_HOLDERCHANGE2],[6,Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_TRUSTHOLDER],[7,Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_BLOCKTRADING],[8,Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_COMPANYNEWS],[9,Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_TOPMANAGERS],[10,Ko.JOB_DOWNLOAD_NEWS_ANALYSIS_PLEDGE]]);return e.has(t)?e.get(t):null},GetSectionFinanceID:function(t){var e=new Vn.default([["æµå¨èµäº§",Ko.JOB_DOWNLOAD_SECTION_F_01],["è´§å¸èµé",Ko.JOB_DOWNLOAD_SECTION_F_02],["å­è´§",Ko.JOB_DOWNLOAD_SECTION_F_03],["æµå¨è´åº",Ko.JOB_DOWNLOAD_SECTION_F_04],["éæµå¨è´åº",Ko.JOB_DOWNLOAD_SECTION_F_05],["ä¸é¡¹è´¹ç¨",Ko.JOB_DOWNLOAD_SECTION_F_06],["æèµæ¶ç",Ko.JOB_DOWNLOAD_SECTION_F_07],["å½æ¯åå©æ¶¦",Ko.JOB_DOWNLOAD_SECTION_F_08],["æ£éåå©æ¶¦",Ko.JOB_DOWNLOAD_SECTION_F_09],["æ£éæ¯è¡æ¶ç",Ko.JOB_DOWNLOAD_SECTION_F_10],["å æå¹³ååèµäº§æ¶ç",Ko.JOB_DOWNLOAD_SECTION_F_11],["å¨å»ºå·¥ç¨",Ko.JOB_DOWNLOAD_SECTION_F_12],["ç´¯è®¡ææ§",Ko.JOB_DOWNLOAD_SECTION_F_13],["å°æ°è¡ä¸å©æ¶¦",Ko.JOB_DOWNLOAD_SECTION_F_14],["æ±åæç",Ko.JOB_DOWNLOAD_SECTION_F_15],["åè´¦è®¡æ",Ko.JOB_DOWNLOAD_SECTION_F_16],["åºå®èµäº§",Ko.JOB_DOWNLOAD_SECTION_F_17],["å½æææ§",Ko.JOB_DOWNLOAD_SECTION_F_18],["è¥ä¸æ»æ¶å¥",Ko.JOB_DOWNLOAD_SECTION_F_19],["ä¸»è¥ä¸å¡å©æ¶¦",Ko.JOB_DOWNLOAD_SECTION_F_20],["è¥ä¸å©æ¶¦",Ko.JOB_DOWNLOAD_SECTION_F_21],["åå©æ¶¦",Ko.JOB_DOWNLOAD_SECTION_F_22],["åºæ¶è´¦æ¬¾",Ko.JOB_DOWNLOAD_SECTION_F_23],["è´¢å¡è´¹ç¨",Ko.JOB_DOWNLOAD_SECTION_F_24],["ç»è¥æ§ç°éæµ",Ko.JOB_DOWNLOAD_SECTION_F_25],["èµäº§æ»è®¡",Ko.JOB_DOWNLOAD_SECTION_F_26],["è´åºæ»è®¡",Ko.JOB_DOWNLOAD_SECTION_F_27],["ææèæçæ»è®¡",Ko.JOB_DOWNLOAD_SECTION_F_28],["æ¯å©ç",Ko.JOB_DOWNLOAD_SECTION_F_29],["æ¯è¡èµæ¬å¬ç§¯é",Ko.JOB_DOWNLOAD_SECTION_F_30],["æ¯è¡æªåéå©æ¶¦",Ko.JOB_DOWNLOAD_SECTION_F_31],["æ¯è¡æ¶ç",Ko.JOB_DOWNLOAD_SECTION_F_32],["æ¯è¡åèµäº§",Ko.JOB_DOWNLOAD_SECTION_F_33],["æ¯è¡ç»è¥æ§ç°éæµ",Ko.JOB_DOWNLOAD_SECTION_F_34],["æ£éåå©æ¶¦æ¶¨å¹",Ko.JOB_DOWNLOAD_SECTION_F_35],["æ£éåå©æ¶¦æ¶¨é",Ko.JOB_DOWNLOAD_SECTION_F_36],["åå©æ¶¦æ¶¨å¹",Ko.JOB_DOWNLOAD_SECTION_F_37],["èµäº§è´åºç",Ko.JOB_DOWNLOAD_SECTION_F_38],["å©æ¶¦åæ¯",Ko.JOB_DOWNLOAD_SECTION_F_39]]);return e.has(t)?e.get(t):null},GetSectionReportPeriod:function(t,e){return t>=2e3&&e>=1&&e<=4?{Year:t,Quarter:e}:null}},zo=[{Name:"GPJYVALUE",JobID:Ko.JOB_DOWNLOAD_GPJYVALUE,Explain:"è¡ç¥¨äº¤æç±»æ°æ®GPJYVALUE(ID,N,TYPE)",FuncName:"JSSymbolData::GetGPJYValue",ArgCount:3},{Name:"GPJYONE",JobID:Ko.JOB_DOWNLOAD_GPJYONE,Explain:"è¡ç¥¨äº¤æç±»æ°æ®GPJYONE(ID,N,Y,MMDD)",FuncName:"JSSymbolData::GetGPJYOne",ArgCount:4},{Name:"SCJYVALUE",JobID:Ko.JOB_DOWNLOAD_SCJYVALUE,Explain:"å¸åºäº¤æç±»æ°æ®SCJYVALUE(ID,N,TYPE)",FuncName:"JSSymbolData::GetSCJYValue",ArgCount:3},{Name:"SCJYONE",JobID:Ko.JOB_DOWNLOAD_SCJYONE,Explain:"å¸åºäº¤æç±»æ°æ®SCJYONE(ID,N,Y,MMDD)",FuncName:"JSSymbolData::GetSCJYOne",ArgCount:4},{Name:"BKJYVALUE",JobID:Ko.JOB_DOWNLOAD_BKJYVALUE,Explain:"æ¿åäº¤æç±»æ°æ®BKJYVALUE(ID,N,TYPE)",FuncName:"JSSymbolData::GetBKJYValue",ArgCount:3},{Name:"BKJYONE",JobID:Ko.JOB_DOWNLOAD_BKJYONE,Explain:"æ¿åäº¤æç±»æ°æ®BKJYONE(ID,N,Y,MMDD)",FuncName:"JSSymbolData::GetBKJYOne",ArgCount:4},{Name:"FINVALUE",JobID:Ko.JOB_DOWNLOAD_FINVALUE,Explain:"è´¢å¡æ°æ®FINVALUE(ID)",FuncName:"JSSymbolData::GetFinValue",ArgCount:1},{Name:"FINONE",JobID:Ko.JOB_DOWNLOAD_FINONE,Explain:"è´¢å¡æ°æ®FINONE(ID,Y,MMDD)",FuncName:"JSSymbolData::GetFinOne",ArgCount:3}];Tr.Tokenize=function(t){Xn.Complier.Log("[JSComplier.Tokenize]",t);var e=new cr(t),a=[];try{for(;;){var i=e.GetNextToken();if(!i)break;a.push(i)}}catch(t){}return a},Tr.Parse=function(t){Xn.Complier.Log("[JSComplier.Parse]",t);var e=new dr(t);return e.Initialize(),e.ParseScript()},Tr.Execute=function(t,e,a){!function(){try{e.Self&&(e.Self.Status=1),Xn.Complier.Log("[JSComplier.Execute]",t,e),Xn.Complier.Log("[JSComplier.Execute] parser .....");var i=new dr(t);i.Initialize();var r=i.ParseScript(),n=r;Xn.Complier.Log("[JSComplier.Execute] parser finish.",n),e.Self&&(e.Self.Status=2),Xn.Complier.Log("[JSComplier.Execute] execute .....");var o=new vr(n,e);o.ErrorCallback=a,o.JobList=i.Node.GetDataJobList(),"ScriptIndexConsole"!=e.ClassName||e.Data||o.JobList.unshift({ID:Ko.JOB_DOWNLOAD_SYMBOL_DATA}),o.JobList.push({ID:Ko.JOB_RUN_SCRIPT}),e.Self&&(e.Self.Status=3);o.Execute()}catch(t){Xn.Complier.Log(t),a&&a(t,e.CallbackParam),e.Self&&(e.Self.Status=0)}}(),Xn.Complier.Log("[JSComplier.Execute] async execute.")},Tr.Explain=function(t,e,a){!function(){try{Xn.Complier.Log("[JSComplier.Explain]",t,e),Xn.Complier.Log("[JSComplier.Explain] parser .....");var i=new dr(t);i.Initialize();var r=i.ParseScript(),n=r;Xn.Complier.Log("[JSComplier.Explain] parser finish.",n),Xn.Complier.Log("[JSComplier.Explain] explain .....");var o=new gr(n,e);o.ErrorCallback=a,o.JobList=i.Node.GetDataJobList(),o.JobList.push({ID:Ko.JOB_RUN_SCRIPT});o.Run()}catch(t){Xn.Complier.Log(t),a&&a(t,e.CallbackParam)}}(),Xn.Complier.Log("[JSComplier.Explain] async explain.")},Tr.SetDomain=function(t,e){t&&(Go.Domain=t),e&&(Go.CacheDomain=e)},Tr.AddIcon=function(t){Go.CustomDrawIcon.Data.set(t.ID,t)},Tr.AddFunction=function(t){if(t&&t.Name){var e=t.Name.toUpperCase();Go.CustomFunction.Data.set(e,t)}},Tr.AddVariant=function(t){if(t&&t.Name){var e=t.Name.toUpperCase();Go.CustomVariant.Data.set(e,t)}},Tr.ColorVarToRGB=function(t){var e=new Vn.default([["COLORBLACK","rgb(0,0,0)"],["COLORBLUE","rgb(18,95,216)"],["COLORGREEN","rgb(25,158,0)"],["COLORCYAN","rgb(0,255,198)"],["COLORRED","rgb(238,21,21)"],["COLORMAGENTA","rgb(255,0,222)"],["COLORBROWN","rgb(149,94,15)"],["COLORLIGRAY","rgb(218,218,218)"],["COLORGRAY","rgb(133,133,133)"],["COLORLIBLUE","rgb(94,204,255)"],["COLORLIGREEN","rgb(183,255,190)"],["COLORLICYAN","rgb(154,255,242)"],["COLORLIRED","rgb(255,172,172)"],["COLORLIMAGENTA","rgb(255,145,241)"],["COLORWHITE","rgb(255,255,255)"],["COLORYELLOW","rgb(255,198,0)"]]);if(e.has(t))return e.get(t);if(0==t.indexOf("COLOR")){var a=t.substr(5);if(6!=a.length)return null;var i=a.substr(0,2),r=parseInt(i,16);i=a.substr(2,2);var n=parseInt(i,16);i=a.substr(4,2);var o=parseInt(i,16);return"rgb("+o+","+n+","+r+")"}if(0==t.indexOf("RGBX")){var a=t.substr(4);if(6!=a.length)return null;var i=a.substr(0,2),o=parseInt(i,16);i=a.substr(2,2);var n=parseInt(i,16);i=a.substr(4,2);var r=parseInt(i,16);return"rgb("+o+","+n+","+r+")"}return null};var Jo={KLINE_ID:0,MINUTE_ID:2,HISTORY_MINUTE_ID:3,MULTIDAY_MINUTE_ID:4},qo={OVERLAY_BARS:"OVERLAY_BARS",KLINE_TABLE:"KLINE_TABLE",SCATTER_PLOT:"SCATTER_PLOT",CLIP_COLOR_STICK:"CLIP_COLOR_STICK"},Zo=new Ir;Er.SetDomain=function(t,e){Tr.SetDomain(t,e)},Tr.AddVariant({Name:"DHIGH",Description:"ä¸å®å¨ææé«ä»·"}),Tr.AddVariant({Name:"DOPEN",Description:"ä¸å®å¨æå¼çä»·"}),Tr.AddVariant({Name:"DLOW",Description:"ä¸å®å¨ææä½ä»·"}),Tr.AddVariant({Name:"DCLOSE",Description:"ä¸å®å¨ææ¶çä»·"}),Tr.AddVariant({Name:"DVOL",Description:"ä¸å®å¨ææäº¤éä»·"});var jo={BLACK_ID:1,WHITE_ID:0};Lr.GetStyleConfig=function(t){switch(t){case jo.BLACK_ID:return Mr();case jo.WHITE_ID:return new ci;default:return null}},Nr.Init=function(t){var e=new Nr(t);return e.OnSize(),e},Rr.JsonDataToDealData=function(t){var e=(t.symbol,[]);if(!we.IsNonEmptyArray(t.detail))return e;for(var a=0;a<t.detail.length;++a){var i=t.detail[a],r={Time:i[0],Price:i[1],Vol:i[2],BS:i[4],Amount:i[3]};r.Source=i,i[5]&&(r.StrTime=i[5]),i[6]&&(r.ID=i[6]),e.push(r)}return e};var Qo={TIME_ID:0,PRICE_ID:1,VOL_ID:2,DEAL_ID:3,BS_ID:4,UPDOWN_ID:5,STRING_TIME_ID:6,INDEX_ID:7,MULTI_BAR_ID:8,CENTER_BAR_ID:9,CUSTOM_TEXT_ID:10};Pr.TooltipCursorCanvasKey="hq_report_tooltip",Pr.Init=function(t){var e=new Pr(t);return e.OnSize(),e},Pr.SetStyle=function(t){t&&So.SetStyle(t)},Pr.GetResource=function(){return So};var $o={SYMBOL_ID:0,NAME_ID:1,PRICE_ID:2,VOL_ID:3,INCREASE_ID:4,UPDOWN_ID:5,BUY_PRICE_ID:6,SELL_PRICE_ID:7,AMOUNT_ID:8,BUY_VOL_ID:9,SELL_VOL_ID:10,YCLOSE_ID:11,OPEN_ID:12,HIGH_ID:13,LOW_ID:14,AVERAGE_PRICE_ID:15,INDEX_ID:16,OUTSTANDING_SHARES_ID:17,TOTAL_SHARES_ID:18,CIRC_MARKET_VALUE_ID:19,MARKET_VALUE_ID:20,EXCHANGE_RATE_ID:21,AMPLITUDE_ID:22,LIMIT_HIGH_ID:23,LIMIT_LOW_ID:24,VOL_IN_ID:25,VOL_OUT_ID:26,NAME_EX_ID:27,CLOSE_LINE_ID:28,KLINE_ID:29,TIME_ID:31,DATE_ID:32,CHECKBOX_ID:33,FUTURES_POSITION_ID:34,FUTURES_CLOSE_ID:35,FUTURES_YCLOSE_ID:36,FUTURES_OPEN_POSITION_ID:37,FUTURES_CLOSE_POSITION_ID:38,RISING_SPEED_1M_ID:60,RISING_SPEED_3M_ID:61,RISING_SPEED_5M_ID:62,RISING_SPEED_10M_ID:63,RISING_SPEED_15M_ID:64,SYMBOL_NAME_V2_ID:98,SYMBOL_NAME_ID:99,CUSTOM_STRING_TEXT_ID:100,CUSTOM_NUMBER_TEXT_ID:101,CUSTOM_DATETIME_TEXT_ID:102,CUSTOM_ICON_ID:103,CUSTOM_CHECKBOX_ID:104,CUSTOM_BUTTON_ID:105,CUSTOM_PROGRESS_ID:106,CUSTOM_LINK_ID:107,RESERVE_NUMBER1_ID:201,RESERVE_NUMBER2_ID:202,RESERVE_NUMBER3_ID:203,RESERVE_NUMBER4_ID:204,RESERVE_NUMBER5_ID:205,RESERVE_NUMBER6_ID:206,RESERVE_NUMBER7_ID:207,RESERVE_NUMBER8_ID:208,RESERVE_NUMBER9_ID:209,RESERVE_NUMBER10_ID:210,RESERVE_STRING1_ID:301,RESERVE_STRING2_ID:302,RESERVE_STRING3_ID:303,RESERVE_STRING4_ID:304,RESERVE_STRING5_ID:305,RESERVE_STRING6_ID:306,RESERVE_STRING7_ID:307,RESERVE_STRING8_ID:308,RESERVE_STRING9_ID:309,RESERVE_STRING10_ID:310,RESERVE_PROGRESS_BAR1_ID:401,RESERVE_PROGRESS_BAR2_ID:402,RESERVE_PROGRESS_BAR3_ID:403,RESERVE_PROGRESS_BAR4_ID:404,RESERVE_PROGRESS_BAR5_ID:405,RESERVE_PROGRESS_BAR6_ID:406,RESERVE_PROGRESS_BAR7_ID:407,RESERVE_PROGRESS_BAR8_ID:408,RESERVE_PROGRESS_BAR9_ID:409,RESERVE_PROGRESS_BAR10_ID:410},ts=new Vn.default([[$o.SYMBOL_ID,"Symbol"],[$o.NAME_ID,"Name"],[$o.PRICE_ID,"Price"],[$o.INCREASE_ID,"Increase"],[$o.UPDOWN_ID,"UpDown"],[$o.VOL_ID,"Vol"],[$o.BUY_PRICE_ID,"BuyPrice"],[$o.SELL_PRICE_ID,"SellPrice"],[$o.AMOUNT_ID,"Amount"],[$o.BUY_VOL_ID,"BuyVol"],[$o.SELL_VOL_ID,"SellVol"],[$o.YCLOSE_ID,"YClose"],[$o.OPEN_ID,"Open"],[$o.HIGH_ID,"High"],[$o.LOW_ID,"Low"],[$o.AVERAGE_PRICE_ID,"AvPrice"],[$o.OUTSTANDING_SHARES_ID,"OutShares"],[$o.TOTAL_SHARES_ID,"TotalShares"],[$o.CIRC_MARKET_VALUE_ID,"CircMarketValue"],[$o.MARKET_VALUE_ID,"MarketValue"],[$o.EXCHANGE_RATE_ID,"Exchange"],[$o.AMPLITUDE_ID,"Amplitude"],[$o.LIMIT_HIGH_ID,"LimitHigh"],[$o.LIMIT_LOW_ID,"LimitLow"],[$o.VOL_IN_ID,"VolIn"],[$o.VOL_OUT_ID,"VolOut"],[$o.NAME_EX_ID,"NameEx"],[$o.DATE_ID,"Date"],[$o.FUTURES_POSITION_ID,"Position"],[$o.FUTURES_CLOSE_ID,"FClose"],[$o.FUTURES_YCLOSE_ID,"YFClose"],[$o.FUTURES_OPEN_POSITION_ID,"OpenPosition"],[$o.FUTURES_CLOSE_POSITION_ID,"ClosePosition"],[$o.RISING_SPEED_1M_ID,"RSpeed1M"],[$o.RISING_SPEED_3M_ID,"RSpeed3M"],[$o.RISING_SPEED_5M_ID,"RSpeed5M"],[$o.RISING_SPEED_10M_ID,"RSpeed10M"],[$o.RISING_SPEED_15M_ID,"RSpeed15M"],[$o.RESERVE_NUMBER1_ID,"ReserveNumber1"],[$o.RESERVE_NUMBER2_ID,"ReserveNumber2"],[$o.RESERVE_NUMBER3_ID,"ReserveNumber3"],[$o.RESERVE_NUMBER4_ID,"ReserveNumber4"],[$o.RESERVE_NUMBER5_ID,"ReserveNumber5"],[$o.RESERVE_NUMBER6_ID,"ReserveNumber6"],[$o.RESERVE_NUMBER7_ID,"ReserveNumber7"],[$o.RESERVE_NUMBER8_ID,"ReserveNumber8"],[$o.RESERVE_NUMBER9_ID,"ReserveNumber9"],[$o.RESERVE_NUMBER10_ID,"ReserveNumber10"],[$o.RESERVE_STRING1_ID,"ReserveString1"],[$o.RESERVE_STRING2_ID,"ReserveString2"],[$o.RESERVE_STRING3_ID,"ReserveString3"],[$o.RESERVE_STRING4_ID,"ReserveString4"],[$o.RESERVE_STRING5_ID,"ReserveString5"],[$o.RESERVE_STRING6_ID,"ReserveString6"],[$o.RESERVE_STRING7_ID,"ReserveString7"],[$o.RESERVE_STRING8_ID,"ReserveString8"],[$o.RESERVE_STRING9_ID,"ReserveString9"],[$o.RESERVE_STRING10_ID,"ReserveString10"],[$o.RESERVE_PROGRESS_BAR1_ID,"ReserveProgressBar1"],[$o.RESERVE_PROGRESS_BAR2_ID,"ReserveProgressBar2"],[$o.RESERVE_PROGRESS_BAR3_ID,"ReserveProgressBar3"],[$o.RESERVE_PROGRESS_BAR4_ID,"ReserveProgressBar4"],[$o.RESERVE_PROGRESS_BAR5_ID,"ReserveProgressBar5"],[$o.RESERVE_PROGRESS_BAR6_ID,"ReserveProgressBar6"],[$o.RESERVE_PROGRESS_BAR7_ID,"ReserveProgressBar7"],[$o.RESERVE_PROGRESS_BAR8_ID,"ReserveProgressBar8"],[$o.RESERVE_PROGRESS_BAR9_ID,"ReserveProgressBar9"],[$o.RESERVE_PROGRESS_BAR10_ID,"ReserveProgressBar10"]]);Wr.Init=function(t){var e=new Wr(t);return e.OnSize(),e},Wr.SetStyle=function(t){t&&So.SetStyle(t)},Wr.GetResource=function(){return So},Wr.GetfloatPrecision=function(t){return sr(t)};var es={SYMBOL_ID:0,NAME_ID:1,PRICE_ID:2,VOL_ID:3,INCREASE_ID:4,UPDOWN_ID:5,BUY_PRICE_ID:6,SELL_PRICE_ID:7,AMOUNT_ID:8,BUY_VOL_ID:9,SELL_VOL_ID:10,YCLOSE_ID:11,OPEN_ID:12,HIGH_ID:13,LOW_ID:14,AVERAGE_PRICE_ID:15,INDEX_ID:16,EXE_PRICE_ID:17,POSITION_ID:18,AMPLITUDE_ID:22,LIMIT_HIGH_ID:23,LIMIT_LOW_ID:24,VOL_IN_ID:25,VOL_OUT_ID:26,NAME_EX_ID:27,CLOSE_LINE_ID:28,KLINE_ID:29,RESERVE_NUMBER1_ID:201,RESERVE_NUMBER2_ID:202,RESERVE_NUMBER3_ID:203,RESERVE_NUMBER4_ID:204,RESERVE_NUMBER5_ID:205,RESERVE_NUMBER6_ID:206,RESERVE_NUMBER7_ID:207,RESERVE_NUMBER8_ID:208,RESERVE_NUMBER9_ID:209,RESERVE_NUMBER10_ID:210,RESERVE_STRING1_ID:301,RESERVE_STRING2_ID:302,RESERVE_STRING3_ID:303,RESERVE_STRING4_ID:304,RESERVE_STRING5_ID:305,RESERVE_STRING6_ID:306,RESERVE_STRING7_ID:307,RESERVE_STRING8_ID:308,RESERVE_STRING9_ID:309,RESERVE_STRING10_ID:310},as=new Vn.default([[es.SYMBOL_ID,"Symbol"],[es.NAME_ID,"Name"],[es.PRICE_ID,"Price"],[es.INCREASE_ID,"Increase"],[es.UPDOWN_ID,"UpDown"],[es.VOL_ID,"Vol"],[es.BUY_PRICE_ID,"BuyPrice"],[es.SELL_PRICE_ID,"SellPrice"],[es.AMOUNT_ID,"Amount"],[es.BUY_VOL_ID,"BuyVol"],[es.SELL_VOL_ID,"SellVol"],[es.YCLOSE_ID,"YClose"],[es.OPEN_ID,"Open"],[es.HIGH_ID,"High"],[es.LOW_ID,"Low"],[es.AVERAGE_PRICE_ID,"AvPrice"],[es.POSITION_ID,"Position"],[es.AMPLITUDE_ID,"Amplitude"],[es.RESERVE_NUMBER1_ID,"ReserveNumber1"],[es.RESERVE_NUMBER2_ID,"ReserveNumber2"],[es.RESERVE_NUMBER3_ID,"ReserveNumber3"],[es.RESERVE_NUMBER4_ID,"ReserveNumber4"],[es.RESERVE_NUMBER5_ID,"ReserveNumber5"],[es.RESERVE_NUMBER6_ID,"ReserveNumber6"],[es.RESERVE_NUMBER7_ID,"ReserveNumber7"],[es.RESERVE_NUMBER8_ID,"ReserveNumber8"],[es.RESERVE_NUMBER9_ID,"ReserveNumber9"],[es.RESERVE_NUMBER10_ID,"ReserveNumber10"],[es.RESERVE_STRING1_ID,"ReserveString1"],[es.RESERVE_STRING2_ID,"ReserveString2"],[es.RESERVE_STRING3_ID,"ReserveString3"],[es.RESERVE_STRING4_ID,"ReserveString4"],[es.RESERVE_STRING5_ID,"ReserveString5"],[es.RESERVE_STRING6_ID,"ReserveString6"],[es.RESERVE_STRING7_ID,"ReserveString7"],[es.RESERVE_STRING8_ID,"ReserveString8"],[es.RESERVE_STRING9_ID,"ReserveString9"],[es.RESERVE_STRING10_ID,"ReserveString10"]]);qr.Init=function(t){var e=new qr(t);return e.OnSize(),e},qr.SetStyle=function(t){t&&So.SetStyle(t)};var is={SHORT_SYMBOL_ID:0,SYMBOL_ID:1,NAME_ID:2,TYPE_ID:3,TYPE_NAME_ID:4};tn.Init=function(t){var e=new tn(t);return e.OnSize(),e},tn.SetStyle=function(t){t&&So.SetStyle(t)},tn.GetResource=function(){return So},on.POSITION_ID={},on.POSITION_ID.RIGHT_MENU_ID=0,on.POSITION_ID.TAB_MENU_ID=1,on.POSITION_ID.DROPDOWN_MENU_ID=2,on.POSITION_ID.DROPDOWN_RIGHT_MENU_ID=3,on.SEPARATOR_LINE_NAME="MENU_SEPARATOR";var rs={CMD_SELECTED_ID:1,CMD_CHANGE_LINE_COLOR_ID:2,CMD_DELETE_ALL_DRAW_CHART_ID:3,CMD_ERASE_DRAW_CHART_ID:4,CMD_ENABLE_MAGNET_ID:5,CMD_DELETE_DRAW_CHART_ID:6,CMD_CHANGE_FONT_COLOR_ID:7,CMD_CHANGE_BG_COLOR_ID:8,CMD_CHANGE_BORDER_COLOR_ID:9,CMD_LOCK_DRAW_CHART_ID:10};hn.GetMinuteOption=function(){return{Type:"åéèµ°å¿å¾",Windows:[],Symbol:null,IsAutoUpdate:!1,AutoUpdateFrequency:1e4,DayCount:1,IsShowRightMenu:!1,EnableSelectRect:!0,EnableZoomIndexWindow:!0,EnableResize:!0,CorssCursorInfo:{Left:2,Right:1,Bottom:1},MinuteLine:{},MinuteTitle:{IsShowTime:!0,IsShowName:!1,IsShowDate:!0,IsShowVolTitle:!0,IsTitleShowLatestData:!0},MinuteVol:{BarColorType:1},Border:{Left:20,Right:20,Top:25,Bottom:25,AutoLeft:{Blank:10,MinWidth:60},AutoRight:{Blank:10,MinWidth:60}},Frame:[{SplitCount:5},{SplitCount:3},{SplitCount:3}]}},un.GetOption=function(){return{Type:"é®çç²¾çµ",Border:{Left:1,Right:1,Bottom:1,Top:1},BorderLine:15,EnableResize:!0,Column:[{Type:is.SHORT_SYMBOL_ID,Title:"ä»£ç ",TextAlign:"left",Width:null,MaxText:"888888"},{Type:is.NAME_ID,Title:"åç§°",TextAlign:"left",Width:null,MaxText:"ææææææææ"},{Type:is.TYPE_NAME_ID,Title:"ç±»å",TextAlign:"right",Width:null,MaxText:"æææææ"}]}},dn.GetDefaultIndexData=function(){return{Name:"åç½®ææ åç±»",Data:[{Group:{ID:"è¶ä¹°è¶åå",Name:"è¶ä¹°è¶åå"},AryIndex:[{Name:"ADTM å¨æä¹°åæ°ææ ",ID:"ADTM",Type:0},{Name:"BIAS ä¹ç¦»ç",ID:"BIAS",Type:0},{Name:"BIAS36 ä¸å­ä¹ç¦»",ID:"BIAS36",Type:0},{Name:"BIAS_QL ä¹ç¦»ç-ä¼ ç»ç",ID:"BIAS_QL",Type:0},{Name:"CCI ååè·¯å¾ææ ",ID:"CCI",Type:0},{Name:"FSL åæ°´å²­",ID:"FSL",Type:0},{Name:"KDJ éæºææ ",ID:"KDJ",Type:0},{Name:"MTM å¨éçº¿",ID:"MTM",Type:0},{Name:"OSC åå¨éççº¿",ID:"OSC",Type:0},{Name:"RSI ç¸å¯¹å¼ºå¼±ææ ",ID:"RSI",Type:0},{Name:"ROC åå¨çææ ",ID:"ROC",Type:0},{Name:"WR å¨å»ææ ",ID:"WR",Type:0}]},{Group:{ID:"è¶å¿å",Name:"è¶å¿å"},AryIndex:[{Name:"CHO æµåææ°",ID:"CHO",Type:0},{Name:"DMA å¹³åå·®",ID:"DMA",Type:0},{Name:"DMI è¶åææ ",ID:"DMI",Type:0},{Name:"EMV ç®ææ³¢å¨ææ ",ID:"EMV",Type:0},{Name:"MACD å¹³æ»å¼åå¹³å",ID:"MACD",Type:0},{Name:"TRIX ä¸éææ°å¹³åçº¿",ID:"TRIX",Type:0},{Name:"UOS ç»æææ ",ID:"UOS",Type:0},{Name:"TRIX ä¸éææ°å¹³åçº¿",ID:"TRIX",Type:0}]},{Group:{ID:"æäº¤éå",Name:"æäº¤éå"},AryIndex:[{Name:"HSL æ¢æç",ID:"HSL",Type:0},{Name:"OBV ç´¯ç§¯è½éçº¿",ID:"OBV",Type:0},{Name:"NVI è´æäº¤é",ID:"NVI",Type:0},{Name:"PVI æ­£æäº¤é",ID:"PVI",Type:0},{Name:"VOL æäº¤é",ID:"VOL",Type:0}]},{Group:{ID:"åçº¿å",Name:"åçº¿å"},AryIndex:[{Name:"MA åçº¿",ID:"MA",Type:0},{Name:"BBI å¤ç©ºçº¿",ID:"BBI",Type:0}]},{Group:{ID:"è·¯å¾å",Name:"è·¯å¾å"},AryIndex:[{Name:"BOLL å¸æçº¿",ID:"BOLL",Type:0},{Name:"BOLLå¯å¾ å¸æçº¿",ID:"BOLLå¯å¾",Type:0},{Name:"MIKE éº¦åæ¯æåå",ID:"MIKE",Type:0},{Name:"ENE è½¨éçº¿",ID:"ENE",Type:0}]},{Group:{ID:"è½éå",Name:"è½éå"},AryIndex:[{Name:"BRAR æç»ªææ ",ID:"BRAR",Type:0},{Name:"CYR å¸åºå¼ºå¼±",ID:"CYR",Type:0},{Name:"MASS æ¢æ¯çº¿",ID:"MASS",Type:0},{Name:"PSY å¿ççº¿",ID:"PSY",Type:0},{Name:"CR å¸¦ç¶è½éçº¿",ID:"CR",Type:0},{Name:"VR æäº¤éåå¼ç",ID:"VR",Type:0},{Name:"WAD å¨å»å¤ç©ºååº¦çº¿",ID:"WAD",Type:0}]},{Group:{ID:"èªå®ä¹",Name:"èªå®ä¹"},AryIndex:[{Name:"æ¶ççº¿(åå°ææ )",ID:"CLOSE_LINE",Type:2,Args:null},(0,On.default)({Name:"é«ä½åä»·(èªå®ä¹èæ¬)",ID:"HIGH_LOW_AV",Type:1,Args:null,Script:"åä»·:(H+L)/2;é«:H;ä½:L;"},"Args",[{Name:"N",Value:20},{Name:"M",Value:6}])]}]}};var ns="1.1.14092";!function(){var t="\n\n*************************************************************************************************************************************************************************** \n*                                                                                                                                                                                                                                                                                                                                        \n*                                                                                           :%@@-                                                                        \n*                                                                                          :@@@@-                                                                        \n*            =@@@@          :#@@@           .:+#@@@#=:                    :=*@@@@@@#+-.    *@@@@.                                                                        \n*           :@@@@@         .@@@@@         .#@@@@@@@@@@@-                +@@@@@@@@@@@@@+    @@@@@                                                     -%@@*               \n*           +@@@@%         #@@@@#        *@@@@@@@@@@@@@@%.            =@@@@@@@@@@@@@@@-    @@@@@                                                    -@@@@+               \n*           %@@@@*         @@@@@+      .%@@@@@@@@@@@@@@@@%:          #@@@@@@@@@@@@@@@%     @@@@#                                                    *@@@@=               \n*           @@@@@=         @@@@@-     .%@@@@@@@*++*%@@@@@@%        .%@@@@@@@%*+==+**=     -@@@@+                                                    #@@@@-               \n*           @@@@@.         @@@@@.     #@@@@@%=      =@@@@@@*       %@@@@@@#:              *@@@@-   :::.           .-+*###+:          :::  .+##+: -%%@@@@@%%%%            \n*          .@@@@@         .@@@@@.    +@@@@@%         .@@@@@@      *@@@@@@:                %@@@@: +@@@@@%.       :%@@@@@@@@@@:       *@@@ :@@@@@* @@@@@@@@@@@@            \n*          :@@@@@         :@@@@@     @@@@@%           :@@@@@+     @@@@@@:                 %@@@@-@@@@@@@@@.      @@@@@@@@@@@@@.     :@@@%-@@@@@@.:@@@@@@@@@@@#            \n*          -@@@@%         -@@@@@    =@@@@@.            %@@@@%    %@@@@@-                  %@@@@@@@@@@@@@@*      %@@@@@@@@@@@@+     -@@@@@@@@@@# -@@@@@@@@@@@.            \n*          +@@@@%=========#@@@@%    @@@@@#             :@@@@@   .@@@@@%                   @@@@@@@@%@@@@@@@      -%+:.  .#@@@@*     +@@@@@@@%%@. .::+@@@@#::              \n*          #@@@@@@@@@@@@@@@@@@@#   .@@@@@              .@@@@@   :@@@@@.                   @@@@@@#.  #@@@@@.             -@@@@*     #@@@@@@:        *@@@@+                \n*          %@@@@@@@@@@@@@@@@@@@+   :@@@@@              .@@@@@   -@@@@@                    @@@@@+     @@@@@.             :@@@@*     @@@@@%          #@@@@-                \n*          @@@@@@@@@@@@@@@@@@@@:   :@@@@%              :@@@@@   +@@@@%                   -@@@@+      @@@@@              -@@@@+     @@@@@.          @@@@@.                \n*         .@@@@@@@@@@@@@@@@@@@@    :@@@@%              -@@@@%   *@@@@%                   #@@@@.      @@@@@       .=*#%%%@@@@@=    :@@@@#           @@@@@.                \n*         -@@@@@:::::::::=@@@@@    :@@@@@              @@@@@*   +@@@@%                   @@@@@       @@@@%     -#@@@@@@@@@@@@:    -@@@@*           @@@@@                 \n*         =@@@@%         =@@@@%    .@@@@@             :@@@@@.   -@@@@%                   @@@@@      .@@@@*    +@@@@@@@@@@@@@@.    =@@@@+          .@@@@@                 \n*         +@@@@#         +@@@@#     @@@@@#            %@@@@%    :@@@@@                  .@@@@%      =@@@@=   -@@@@@*-:..%@@@@     +@@@@=          :@@@@#                 \n*         *@@@@*         *@@@@*     +@@@@@:          #@@@@@+    .@@@@@@                 :@@@@%      *@@@@-   @@@@@.     @@@@%     #@@@@:          =@@@@+                 \n*         %@@@@=         %@@@@+      @@@@@@-       .%@@@@@#      #@@@@@#                :@@@@%      #@@@@:   @@@@%      @@@@*     %@@@@.          #@@@@-                 \n*         @@@@@-         @@@@@=      =@@@@@@#=...-*@@@@@@@:       @@@@@@%=.    :+**.    :@@@@*      %@@@@.  .@@@@*     *@@@@=     @@@@@           %@@@@+                 \n*        .@@@@@:        .@@@@@:       *@@@@@@@@@@@@@@@@@@@#       =@@@@@@@@%%%@@@@@@    +@@@@-      @@@@@   .@@@@@:  :%@@@@@-    .@@@@%           %@@@@@*+-              \n*        :@@@@@         :@@@@@         +@@@@@@@@@@@@@@@@@@@#       =@@@@@@@@@@@@@@@@%   %@@@@       @@@@@    @@@@@@@@@@@@@@@:    -@@@@*           *@@@@@@@@-             \n*        =@@@@@         -@@@@@          :@@@@@@@@@@@@@@@@@@@#       :@@@@@@@@@@@@@@@%   @@@@@       %@@@%    #@@@@@@@@@#@@@@.    +@@@@-           .@@@@@@@@#             \n*        *@@@@#         =@@@@%            :#@@@@@@@#: :@@@@@=         =@@@@@@@@@@@+.    @@@@@       :@@@+     *@@@@@@@- %@@@     *@@@=             =@@@@@@@*             \n*        =++++-         -++++=               .:::.     .=*+:            :-=+++=:.       ****=        .=+.      .-++=:   :+++     -+=:               .-=+=:.     \n*        \n*        \n*        HQChart       \n*        Ver: "+ns+"  \n*        License: Apache License 2.0                                                                              \n*        Source: https://github.com/jones2000/HQChart\n*\n**************************************************************************************************************************************************************************                                                                                                                                                                      \n    ";console.log(t)}(),e.default=(pn={jsChartInit:l.Init,jsChartStyle:l.SetStyle,JSChart:l,ChartData:tt,SingleData:Z,HistoryData:K,MARKET_SUFFIX_NAME:wo,IFrameSplitOperator:we,FrameSplitKLinePriceY:Fe,FrameSplitKLineX:Le,JSKLineInfoMap:Pi,JSCHART_EVENT_ID:Kn,JSCHART_OPERATOR_ID:zn,JSCHART_DATA_FIELD_ID:Zn,JSCHART_CUSTOM_YCOORDINATE_ID:mo,JSAlgorithm:Dr,JSComplier:Tr,JSIndexScript:s,GetDevicePixelRatio:C},(0,On.default)(pn,"GetDevicePixelRatio",C),(0,On.default)(pn,"ScriptIndexConsole",Er),(0,On.default)(pn,"STYLE_TYPE_ID",jo),(0,On.default)(pn,"HQChartStyle",Lr),(0,On.default)(pn,"JSConsole",Xn),(0,On.default)(pn,"KLineTooltipPaint",ue),(0,On.default)(pn,"MinuteTooltipPaint",Ce),(0,On.default)(pn,"ChartDrawTwoPointDemo",za),(0,On.default)(pn,"ChartDrawThreePointDemo",Ja),(0,On.default)(pn,"CoordinateInfo",F),(0,On.default)(pn,"JSDealChart",Nr),(0,On.default)(pn,"DEAL_COLUMN_ID",Qo),(0,On.default)(pn,"JSReportChart",Pr),(0,On.default)(pn,"REPORT_COLUMN_ID",$o),(0,On.default)(pn,"JSTReportChart",Wr),(0,On.default)(pn,"TREPORT_COLUMN_ID",es),(0,On.default)(pn,"JSKeyboardChart",qr),(0,On.default)(pn,"KEYBOARD_COLUMN_ID",is),(0,On.default)(pn,"JSPopKeyboard",un),(0,On.default)(pn,"JSScrollBarChart",tn),(0,On.default)(pn,"IChartPainting",rt),(0,On.default)(pn,"IExtendChartPainting",he),(0,On.default)(pn,"IChartTitlePainting",je),(0,On.default)(pn,"IChartDrawPicture",aa),(0,On.default)(pn,"DynamicTitleData",ta),(0,On.default)(pn,"CONDITION_PERIOD",Wn),(0,On.default)(pn,"ChartMinuteVolumBar",ut),(0,On.default)(pn,"ChartKLine",nt),(0,On.default)(pn,"KLineFrame",_),(0,On.default)(pn,"JSCHART_WORKER_MESSAGE_ID",jn),(0,On.default)(pn,"JS_Frame",{KLineFrame:_,KLineHScreenFrame:k}),(0,On.default)(pn,"JS_ChangeStringFormat",{IChangeStringFormat:Ge,HQMinuteTimeStringFormat:He,HQDateStringFormat:Ve,HQPriceStringFormat:ke}),(0,On.default)(pn,"JS_ID",{JSCHART_EVENT_ID:Kn,JSCHART_OPERATOR_ID:zn,JSCHART_DRAG_ID:Jn,JSCHART_BUTTON_ID:qn,JSCHART_DATA_FIELD_ID:Zn,JSCHART_WORKER_MESSAGE_ID:jn,JSCHART_MENU_ID:Qn}),(0,On.default)(pn,"HQChartScriptWorker",mn),(0,On.default)(pn,"JSPopMenu",on),(0,On.default)(pn,"JSDialogDrawTool",sn),pn)},function(t,e){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,a,i,r){var n,o,s=8*r-i-1,l=(1<<s)-1,h=l>>1,u=-7,C=a?r-1:0,c=a?-1:1,f=t[e+C];for(C+=c,n=f&(1<<-u)-1,f>>=-u,u+=s;u>0;n=256*n+t[e+C],C+=c,u-=8);for(o=n&(1<<-u)-1,n>>=-u,u+=i;u>0;o=256*o+t[e+C],C+=c,u-=8);if(0===n)n=1-h;else{if(n===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,i),n-=h}return(f?-1:1)*o*Math.pow(2,n-i)},e.write=function(t,e,a,i,r,n){var o,s,l,h=8*n-r-1,u=(1<<h)-1,C=u>>1,c=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:n-1,d=i?1:-1,D=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),e+=o+C>=1?c/l:c*Math.pow(2,1-C),e*l>=2&&(o++,l/=2),o+C>=u?(s=0,o=u):o+C>=1?(s=(e*l-1)*Math.pow(2,r),o+=C):(s=e*Math.pow(2,C-1)*Math.pow(2,r),o=0));r>=8;t[a+f]=255&s,f+=d,s/=256,r-=8);for(o=o<<r|s,h+=r;h>0;t[a+f]=255&o,f+=d,o/=256,h-=8);t[a+f-d]|=128*D}},function(t,e,a){(function(t,i){var r;(function(){function n(t,e,a){switch(a.length){case 0:return t.call(e);case 1:return t.call(e,a[0]);case 2:return t.call(e,a[0],a[1]);case 3:return t.call(e,a[0],a[1],a[2])}return t.apply(e,a)}function o(t,e,a,i){for(var r=-1,n=null==t?0:t.length;++r<n;){var o=t[r];e(i,o,a(o),t)}return i}function s(t,e){for(var a=-1,i=null==t?0:t.length;++a<i&&!1!==e(t[a],a,t););return t}function l(t,e){for(var a=null==t?0:t.length;a--&&!1!==e(t[a],a,t););return t}function h(t,e){for(var a=-1,i=null==t?0:t.length;++a<i;)if(!e(t[a],a,t))return!1;return!0}function u(t,e){for(var a=-1,i=null==t?0:t.length,r=0,n=[];++a<i;){var o=t[a];e(o,a,t)&&(n[r++]=o)}return n}function C(t,e){return!!(null==t?0:t.length)&&S(t,e,0)>-1}function c(t,e,a){for(var i=-1,r=null==t?0:t.length;++i<r;)if(a(e,t[i]))return!0;return!1}function f(t,e){for(var a=-1,i=null==t?0:t.length,r=Array(i);++a<i;)r[a]=e(t[a],a,t);return r}function d(t,e){for(var a=-1,i=e.length,r=t.length;++a<i;)t[r+a]=e[a];return t}function D(t,e,a,i){var r=-1,n=null==t?0:t.length;for(i&&n&&(a=t[++r]);++r<n;)a=e(a,t[r],r,t);return a}function m(t,e,a,i){var r=null==t?0:t.length;for(i&&r&&(a=t[--r]);r--;)a=e(a,t[r],r,t);return a}function p(t,e){for(var a=-1,i=null==t?0:t.length;++a<i;)if(e(t[a],a,t))return!0;return!1}function v(t){return t.split("")}function g(t){return t.match(ke)||[]}function T(t,e,a){var i;return a(t,function(t,a,r){if(e(t,a,r))return i=a,!1}),i}function I(t,e,a,i){for(var r=t.length,n=a+(i?1:-1);i?n--:++n<r;)if(e(t[n],n,t))return n;return-1}function S(t,e,a){return e===e?Z(t,e,a):I(t,b,a)}function x(t,e,a,i){for(var r=a-1,n=t.length;++r<n;)if(i(t[r],e))return r;return-1}function b(t){return t!==t}function y(t,e){var a=null==t?0:t.length;return a?L(t,e)/a:Bt}function E(t){return function(e){return null==e?rt:e[t]}}function w(t){return function(e){return null==t?rt:t[e]}}function F(t,e,a,i,r){return r(t,function(t,r,n){a=i?(i=!1,t):e(a,t,r,n)}),a}function M(t,e){var a=t.length;for(t.sort(e);a--;)t[a]=t[a].value;return t}function L(t,e){for(var a,i=-1,r=t.length;++i<r;){var n=e(t[i]);n!==rt&&(a=a===rt?n:a+n)}return a}function N(t,e){for(var a=-1,i=Array(t);++a<t;)i[a]=e(a);return i}function R(t,e){return f(e,function(e){return[e,t[e]]})}function A(t){return t?t.slice(0,tt(t)+1).replace(Oe,""):t}function O(t){return function(e){return t(e)}}function P(t,e){return f(e,function(e){return t[e]})}function B(t,e){return t.has(e)}function _(t,e){for(var a=-1,i=t.length;++a<i&&S(e,t[a],0)>-1;);return a}function G(t,e){for(var a=t.length;a--&&S(e,t[a],0)>-1;);return a}function k(t,e){for(var a=t.length,i=0;a--;)t[a]===e&&++i;return i}function V(t){return"\\"+wa[t]}function H(t,e){return null==t?rt:t[e]}function Y(t){return va.test(t)}function X(t){return ga.test(t)}function W(t){for(var e,a=[];!(e=t.next()).done;)a.push(e.value);return a}function U(t){var e=-1,a=Array(t.size);return t.forEach(function(t,i){a[++e]=[i,t]}),a}function K(t,e){return function(a){return t(e(a))}}function z(t,e){for(var a=-1,i=t.length,r=0,n=[];++a<i;){var o=t[a];o!==e&&o!==Ct||(t[a]=Ct,n[r++]=a)}return n}function J(t){var e=-1,a=Array(t.size);return t.forEach(function(t){a[++e]=t}),a}function q(t){var e=-1,a=Array(t.size);return t.forEach(function(t){a[++e]=[t,t]}),a}function Z(t,e,a){for(var i=a-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function j(t,e,a){for(var i=a+1;i--;)if(t[i]===e)return i;return i}function Q(t){return Y(t)?et(t):Wa(t)}function $(t){return Y(t)?at(t):v(t)}function tt(t){for(var e=t.length;e--&&Pe.test(t.charAt(e)););return e}function et(t){for(var e=ma.lastIndex=0;ma.test(t);)++e;return e}function at(t){return t.match(ma)||[]}function it(t){return t.match(pa)||[]}var rt,nt=200,ot="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",st="Expected a function",lt="Invalid `variable` option passed into `_.template`",ht="__lodash_hash_undefined__",ut=500,Ct="__lodash_placeholder__",ct=1,ft=2,dt=4,Dt=1,mt=2,pt=1,vt=2,gt=4,Tt=8,It=16,St=32,xt=64,bt=128,yt=256,Et=512,wt=30,Ft="...",Mt=800,Lt=16,Nt=1,Rt=2,At=1/0,Ot=9007199254740991,Pt=1.7976931348623157e308,Bt=NaN,_t=4294967295,Gt=_t-1,kt=_t>>>1,Vt=[["ary",bt],["bind",pt],["bindKey",vt],["curry",Tt],["curryRight",It],["flip",Et],["partial",St],["partialRight",xt],["rearg",yt]],Ht="[object Arguments]",Yt="[object Array]",Xt="[object AsyncFunction]",Wt="[object Boolean]",Ut="[object Date]",Kt="[object DOMException]",zt="[object Error]",Jt="[object Function]",qt="[object GeneratorFunction]",Zt="[object Map]",jt="[object Number]",Qt="[object Null]",$t="[object Object]",te="[object Proxy]",ee="[object RegExp]",ae="[object Set]",ie="[object String]",re="[object Symbol]",ne="[object Undefined]",oe="[object WeakMap]",se="[object WeakSet]",le="[object ArrayBuffer]",he="[object DataView]",ue="[object Float32Array]",Ce="[object Float64Array]",ce="[object Int8Array]",fe="[object Int16Array]",de="[object Int32Array]",De="[object Uint8Array]",me="[object Uint8ClampedArray]",pe="[object Uint16Array]",ve="[object Uint32Array]",ge=/\b__p \+= '';/g,Te=/\b(__p \+=) '' \+/g,Ie=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Se=/&(?:amp|lt|gt|quot|#39);/g,xe=/[&<>"']/g,be=RegExp(Se.source),ye=RegExp(xe.source),Ee=/<%-([\s\S]+?)%>/g,we=/<%([\s\S]+?)%>/g,Fe=/<%=([\s\S]+?)%>/g,Me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Le=/^\w*$/,Ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Re=/[\\^$.*+?()[\]{}|]/g,Ae=RegExp(Re.source),Oe=/^\s+/,Pe=/\s/,Be=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_e=/\{\n\/\* \[wrapped with (.+)\] \*/,Ge=/,? & /,ke=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ve=/[()=,{}\[\]\/\s]/,He=/\\(\\)?/g,Ye=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Xe=/\w*$/,We=/^[-+]0x[0-9a-f]+$/i,Ue=/^0b[01]+$/i,Ke=/^\[object .+?Constructor\]$/,ze=/^0o[0-7]+$/i,Je=/^(?:0|[1-9]\d*)$/,qe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ze=/($^)/,je=/['\n\r\u2028\u2029\\]/g,Qe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",$e="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ta="["+$e+"]",ea="["+Qe+"]",aa="[a-z\\xdf-\\xf6\\xf8-\\xff]",ia="[^\\ud800-\\udfff"+$e+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ra="\\ud83c[\\udffb-\\udfff]",na="(?:\\ud83c[\\udde6-\\uddff]){2}",oa="[\\ud800-\\udbff][\\udc00-\\udfff]",sa="[A-Z\\xc0-\\xd6\\xd8-\\xde]",la="(?:"+aa+"|"+ia+")",ha="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",ua="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",na,oa].join("|")+")[\\ufe0e\\ufe0f]?"+ha+")*",Ca="[\\ufe0e\\ufe0f]?"+ha+ua,ca="(?:"+["[\\u2700-\\u27bf]",na,oa].join("|")+")"+Ca,fa="(?:"+["[^\\ud800-\\udfff]"+ea+"?",ea,na,oa,"[\\ud800-\\udfff]"].join("|")+")",da=RegExp("['â]","g"),Da=RegExp(ea,"g"),ma=RegExp(ra+"(?="+ra+")|"+fa+Ca,"g"),pa=RegExp([sa+"?"+aa+"+(?:['â](?:d|ll|m|re|s|t|ve))?(?="+[ta,sa,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['â](?:D|LL|M|RE|S|T|VE))?(?="+[ta,sa+la,"$"].join("|")+")",sa+"?"+la+"+(?:['â](?:d|ll|m|re|s|t|ve))?",sa+"+(?:['â](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",ca].join("|"),"g"),va=RegExp("[\\u200d\\ud800-\\udfff"+Qe+"\\ufe0e\\ufe0f]"),ga=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ta=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ia=-1,Sa={};Sa[ue]=Sa[Ce]=Sa[ce]=Sa[fe]=Sa[de]=Sa[De]=Sa[me]=Sa[pe]=Sa[ve]=!0,Sa[Ht]=Sa[Yt]=Sa[le]=Sa[Wt]=Sa[he]=Sa[Ut]=Sa[zt]=Sa[Jt]=Sa[Zt]=Sa[jt]=Sa[$t]=Sa[ee]=Sa[ae]=Sa[ie]=Sa[oe]=!1;var xa={};xa[Ht]=xa[Yt]=xa[le]=xa[he]=xa[Wt]=xa[Ut]=xa[ue]=xa[Ce]=xa[ce]=xa[fe]=xa[de]=xa[Zt]=xa[jt]=xa[$t]=xa[ee]=xa[ae]=xa[ie]=xa[re]=xa[De]=xa[me]=xa[pe]=xa[ve]=!0,xa[zt]=xa[Jt]=xa[oe]=!1;var ba={"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss","Ä":"A","Ä":"A","Ä":"A","Ä":"a","Ä":"a","Ä":"a","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"D","Ä":"D","Ä":"d","Ä":"d","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"G","Ä":"G","Ä ":"G","Ä¢":"G","Ä":"g","Ä":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å":"l","Å":"l","Å":"N","Å":"N","Å":"N","Å":"N","Å":"n","Å":"n","Å":"n","Å":"n","Å":"O","Å":"O","Å":"O","Å":"o","Å":"o","Å":"o","Å":"R","Å":"R","Å":"R","Å":"r","Å":"r","Å":"r","Å":"S","Å":"S","Å":"S","Å ":"S","Å":"s","Å":"s","Å":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å":"Oe","Å":"oe","Å":"'n","Å¿":"s"},ya={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ea={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},wa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Fa=parseFloat,Ma=parseInt,La="object"==typeof t&&t&&t.Object===Object&&t,Na="object"==typeof self&&self&&self.Object===Object&&self,Ra=La||Na||Function("return this")(),Aa="object"==typeof e&&e&&!e.nodeType&&e,Oa=Aa&&"object"==typeof i&&i&&!i.nodeType&&i,Pa=Oa&&Oa.exports===Aa,Ba=Pa&&La.process,_a=function(){try{var t=Oa&&Oa.require&&Oa.require("util").types;return t||Ba&&Ba.binding&&Ba.binding("util")}catch(t){}}(),Ga=_a&&_a.isArrayBuffer,ka=_a&&_a.isDate,Va=_a&&_a.isMap,Ha=_a&&_a.isRegExp,Ya=_a&&_a.isSet,Xa=_a&&_a.isTypedArray,Wa=E("length"),Ua=w(ba),Ka=w(ya),za=w(Ea),Ja=function t(e){function a(t){if(il(t)&&!dc(t)&&!(t instanceof v)){if(t instanceof r)return t;if(du.call(t,"__wrapped__"))return $n(t)}return new r(t)}function i(){}function r(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=rt}function v(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_t,this.__views__=[]}function w(){var t=new v(this.__wrapped__);return t.__actions__=Ar(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ar(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ar(this.__views__),t}function Z(){if(this.__filtered__){var t=new v(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function et(){var t=this.__wrapped__.value(),e=this.__dir__,a=dc(t),i=e<0,r=a?t.length:0,n=xn(0,r,this.__views__),o=n.start,s=n.end,l=s-o,h=i?s:o-1,u=this.__iteratees__,C=u.length,c=0,f=Wu(l,this.__takeCount__);if(!a||!i&&r==l&&f==l)return mr(t,this.__actions__);var d=[];t:for(;l--&&c<f;){h+=e;for(var D=-1,m=t[h];++D<C;){var p=u[D],v=p.iteratee,g=p.type,T=v(m);if(g==Rt)m=T;else if(!T){if(g==Nt)continue t;break t}}d[c++]=m}return d}function at(t){var e=-1,a=null==t?0:t.length;for(this.clear();++e<a;){var i=t[e];this.set(i[0],i[1])}}function Pe(){this.__data__=tC?tC(null):{},this.size=0}function ke(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Qe(t){var e=this.__data__;if(tC){var a=e[t];return a===ht?rt:a}return du.call(e,t)?e[t]:rt}function $e(t){var e=this.__data__;return tC?e[t]!==rt:du.call(e,t)}function ta(t,e){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=tC&&e===rt?ht:e,this}function ea(t){var e=-1,a=null==t?0:t.length;for(this.clear();++e<a;){var i=t[e];this.set(i[0],i[1])}}function aa(){this.__data__=[],this.size=0}function ia(t){var e=this.__data__,a=Wa(e,t);return!(a<0)&&(a==e.length-1?e.pop():Fu.call(e,a,1),--this.size,!0)}function ra(t){var e=this.__data__,a=Wa(e,t);return a<0?rt:e[a][1]}function na(t){return Wa(this.__data__,t)>-1}function oa(t,e){var a=this.__data__,i=Wa(a,t);return i<0?(++this.size,a.push([t,e])):a[i][1]=e,this}function sa(t){var e=-1,a=null==t?0:t.length;for(this.clear();++e<a;){var i=t[e];this.set(i[0],i[1])}}function la(){this.size=0,this.__data__={hash:new at,map:new(Zu||ea),string:new at}}function ha(t){var e=gn(this,t).delete(t);return this.size-=e?1:0,e}function ua(t){return gn(this,t).get(t)}function Ca(t){return gn(this,t).has(t)}function ca(t,e){var a=gn(this,t),i=a.size;return a.set(t,e),this.size+=a.size==i?0:1,this}function fa(t){var e=-1,a=null==t?0:t.length;for(this.__data__=new sa;++e<a;)this.add(t[e])}function ma(t){return this.__data__.set(t,ht),this}function pa(t){return this.__data__.has(t)}function va(t){var e=this.__data__=new ea(t);this.size=e.size}function ga(){this.__data__=new ea,this.size=0}function ba(t){var e=this.__data__,a=e.delete(t);return this.size=e.size,a}function ya(t){return this.__data__.get(t)}function Ea(t){return this.__data__.has(t)}function wa(t,e){var a=this.__data__;if(a instanceof ea){var i=a.__data__;if(!Zu||i.length<nt-1)return i.push([t,e]),this.size=++a.size,this;a=this.__data__=new sa(i)}return a.set(t,e),this.size=a.size,this}function La(t,e){var a=dc(t),i=!a&&fc(t),r=!a&&!i&&mc(t),n=!a&&!i&&!r&&Ic(t),o=a||i||r||n,s=o?N(t.length,su):[],l=s.length;for(var h in t)!e&&!du.call(t,h)||o&&("length"==h||r&&("offset"==h||"parent"==h)||n&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||Nn(h,l))||s.push(h);return s}function Na(t){var e=t.length;return e?t[ji(0,e-1)]:rt}function Aa(t,e){return qn(Ar(t),ti(e,0,t.length))}function Oa(t){return qn(Ar(t))}function Ba(t,e,a){(a===rt||Xs(t[e],a))&&(a!==rt||e in t)||Qa(t,e,a)}function _a(t,e,a){var i=t[e];du.call(t,e)&&Xs(i,a)&&(a!==rt||e in t)||Qa(t,e,a)}function Wa(t,e){for(var a=t.length;a--;)if(Xs(t[a][0],e))return a;return-1}function qa(t,e,a,i){return cC(t,function(t,r,n){e(i,t,a(t),n)}),i}function Za(t,e){return t&&Or(e,Gl(e),t)}function ja(t,e){return t&&Or(e,kl(e),t)}function Qa(t,e,a){"__proto__"==e&&Ru?Ru(t,e,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[e]=a}function $a(t,e){for(var a=-1,i=e.length,r=tu(i),n=null==t;++a<i;)r[a]=n?rt:Pl(t,e[a]);return r}function ti(t,e,a){return t===t&&(a!==rt&&(t=t<=a?t:a),e!==rt&&(t=t>=e?t:e)),t}function ei(t,e,a,i,r,n){var o,l=e&ct,h=e&ft,u=e&dt;if(a&&(o=r?a(t,i,r,n):a(t)),o!==rt)return o;if(!al(t))return t;var C=dc(t);if(C){if(o=En(t),!l)return Ar(t,o)}else{var c=bC(t),f=c==Jt||c==qt;if(mc(t))return xr(t,l);if(c==$t||c==Ht||f&&!r){if(o=h||f?{}:wn(t),!l)return h?Br(t,ja(o,t)):Pr(t,Za(o,t))}else{if(!xa[c])return r?t:{};o=Fn(t,c,l)}}n||(n=new va);var d=n.get(t);if(d)return d;n.set(t,o),Tc(t)?t.forEach(function(i){o.add(ei(i,e,a,i,t,n))}):vc(t)&&t.forEach(function(i,r){o.set(r,ei(i,e,a,r,t,n))});var D=u?h?Dn:dn:h?kl:Gl,m=C?rt:D(t);return s(m||t,function(i,r){m&&(r=i,i=t[r]),_a(o,r,ei(i,e,a,r,t,n))}),o}function ai(t){var e=Gl(t);return function(a){return ii(a,t,e)}}function ii(t,e,a){var i=a.length;if(null==t)return!i;for(t=nu(t);i--;){var r=a[i],n=e[r],o=t[r];if(o===rt&&!(r in t)||!n(o))return!1}return!0}function ri(t,e,a){if("function"!=typeof t)throw new lu(st);return wC(function(){t.apply(rt,a)},e)}function ni(t,e,a,i){var r=-1,n=C,o=!0,s=t.length,l=[],h=e.length;if(!s)return l;a&&(e=f(e,O(a))),i?(n=c,o=!1):e.length>=nt&&(n=B,o=!1,e=new fa(e));t:for(;++r<s;){var u=t[r],d=null==a?u:a(u);if(u=i||0!==u?u:0,o&&d===d){for(var D=h;D--;)if(e[D]===d)continue t;l.push(u)}else n(e,d,i)||l.push(u)}return l}function oi(t,e){var a=!0;return cC(t,function(t,i,r){return a=!!e(t,i,r)}),a}function si(t,e,a){for(var i=-1,r=t.length;++i<r;){var n=t[i],o=e(n);if(null!=o&&(s===rt?o===o&&!dl(o):a(o,s)))var s=o,l=n}return l}function li(t,e,a,i){var r=t.length;for(a=Tl(a),a<0&&(a=-a>r?0:r+a),i=i===rt||i>r?r:Tl(i),i<0&&(i+=r),i=a>i?0:Il(i);a<i;)t[a++]=e;return t}function hi(t,e){var a=[];return cC(t,function(t,i,r){e(t,i,r)&&a.push(t)}),a}function ui(t,e,a,i,r){var n=-1,o=t.length;for(a||(a=Ln),r||(r=[]);++n<o;){var s=t[n];e>0&&a(s)?e>1?ui(s,e-1,a,i,r):d(r,s):i||(r[r.length]=s)}return r}function Ci(t,e){return t&&dC(t,e,Gl)}function ci(t,e){return t&&DC(t,e,Gl)}function fi(t,e){return u(e,function(e){return $s(t[e])})}function di(t,e){e=Ir(e,t);for(var a=0,i=e.length;null!=t&&a<i;)t=t[Zn(e[a++])];return a&&a==i?t:rt}function Di(t,e,a){var i=e(t);return dc(t)?i:d(i,a(t))}function mi(t){return null==t?t===rt?ne:Qt:Nu&&Nu in nu(t)?Sn(t):Yn(t)}function pi(t,e){return t>e}function vi(t,e){return null!=t&&du.call(t,e)}function gi(t,e){return null!=t&&e in nu(t)}function Ti(t,e,a){return t>=Wu(e,a)&&t<Xu(e,a)}function Ii(t,e,a){for(var i=a?c:C,r=t[0].length,n=t.length,o=n,s=tu(n),l=1/0,h=[];o--;){var u=t[o];o&&e&&(u=f(u,O(e))),l=Wu(u.length,l),s[o]=!a&&(e||r>=120&&u.length>=120)?new fa(o&&u):rt}u=t[0];var d=-1,D=s[0];t:for(;++d<r&&h.length<l;){var m=u[d],p=e?e(m):m;if(m=a||0!==m?m:0,!(D?B(D,p):i(h,p,a))){for(o=n;--o;){var v=s[o];if(!(v?B(v,p):i(t[o],p,a)))continue t}D&&D.push(p),h.push(m)}}return h}function Si(t,e,a,i){return Ci(t,function(t,r,n){e(i,a(t),r,n)}),i}function xi(t,e,a){e=Ir(e,t),t=Wn(t,e);var i=null==t?t:t[Zn(go(e))];return null==i?rt:n(i,t,a)}function bi(t){return il(t)&&mi(t)==Ht}function yi(t){return il(t)&&mi(t)==le}function Ei(t){return il(t)&&mi(t)==Ut}function wi(t,e,a,i,r){return t===e||(null==t||null==e||!il(t)&&!il(e)?t!==t&&e!==e:Fi(t,e,a,i,wi,r))}function Fi(t,e,a,i,r,n){var o=dc(t),s=dc(e),l=o?Yt:bC(t),h=s?Yt:bC(e);l=l==Ht?$t:l,h=h==Ht?$t:h;var u=l==$t,C=h==$t,c=l==h;if(c&&mc(t)){if(!mc(e))return!1;o=!0,u=!1}if(c&&!u)return n||(n=new va),o||Ic(t)?un(t,e,a,i,r,n):Cn(t,e,l,a,i,r,n);if(!(a&Dt)){var f=u&&du.call(t,"__wrapped__"),d=C&&du.call(e,"__wrapped__");if(f||d){var D=f?t.value():t,m=d?e.value():e;return n||(n=new va),r(D,m,a,i,n)}}return!!c&&(n||(n=new va),cn(t,e,a,i,r,n))}function Mi(t){return il(t)&&bC(t)==Zt}function Li(t,e,a,i){var r=a.length,n=r,o=!i;if(null==t)return!n;for(t=nu(t);r--;){var s=a[r];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<n;){s=a[r];var l=s[0],h=t[l],u=s[1];if(o&&s[2]){if(h===rt&&!(l in t))return!1}else{var C=new va;if(i)var c=i(h,u,l,t,e,C);if(!(c===rt?wi(u,h,Dt|mt,i,C):c))return!1}}return!0}function Ni(t){return!(!al(t)||Bn(t))&&($s(t)?Tu:Ke).test(jn(t))}function Ri(t){return il(t)&&mi(t)==ee}function Ai(t){return il(t)&&bC(t)==ae}function Oi(t){return il(t)&&el(t.length)&&!!Sa[mi(t)]}function Pi(t){return"function"==typeof t?t:null==t?Fh:"object"==typeof t?dc(t)?Hi(t[0],t[1]):Vi(t):Bh(t)}function Bi(t){if(!_n(t))return Yu(t);var e=[];for(var a in nu(t))du.call(t,a)&&"constructor"!=a&&e.push(a);return e}function _i(t){if(!al(t))return Hn(t);var e=_n(t),a=[];for(var i in t)("constructor"!=i||!e&&du.call(t,i))&&a.push(i);return a}function Gi(t,e){return t<e}function ki(t,e){var a=-1,i=Ws(t)?tu(t.length):[];return cC(t,function(t,r,n){i[++a]=e(t,r,n)}),i}function Vi(t){var e=Tn(t);return 1==e.length&&e[0][2]?kn(e[0][0],e[0][1]):function(a){return a===t||Li(a,t,e)}}function Hi(t,e){return An(t)&&Gn(e)?kn(Zn(t),e):function(a){var i=Pl(a,t);return i===rt&&i===e?_l(a,t):wi(e,i,Dt|mt)}}function Yi(t,e,a,i,r){t!==e&&dC(e,function(n,o){if(r||(r=new va),al(n))Xi(t,e,o,a,Yi,i,r);else{var s=i?i(Kn(t,o),n,o+"",t,e,r):rt;s===rt&&(s=n),Ba(t,o,s)}},kl)}function Xi(t,e,a,i,r,n,o){var s=Kn(t,a),l=Kn(e,a),h=o.get(l);if(h)return void Ba(t,a,h);var u=n?n(s,l,a+"",t,e,o):rt,C=u===rt;if(C){var c=dc(l),f=!c&&mc(l),d=!c&&!f&&Ic(l);u=l,c||f||d?dc(s)?u=s:Us(s)?u=Ar(s):f?(C=!1,u=xr(l,!0)):d?(C=!1,u=Fr(l,!0)):u=[]:Cl(l)||fc(l)?(u=s,fc(s)?u=xl(s):al(s)&&!$s(s)||(u=wn(l))):C=!1}C&&(o.set(l,u),r(u,l,i,n,o),o.delete(l)),Ba(t,a,u)}function Wi(t,e){var a=t.length;if(a)return e+=e<0?a:0,Nn(e,a)?t[e]:rt}function Ui(t,e,a){e=e.length?f(e,function(t){return dc(t)?function(e){return di(e,1===t.length?t[0]:t)}:t}):[Fh];var i=-1;return e=f(e,O(vn())),M(ki(t,function(t,a,r){return{criteria:f(e,function(e){return e(t)}),index:++i,value:t}}),function(t,e){return Lr(t,e,a)})}function Ki(t,e){return zi(t,e,function(e,a){return _l(t,a)})}function zi(t,e,a){for(var i=-1,r=e.length,n={};++i<r;){var o=e[i],s=di(t,o);a(s,o)&&ir(n,Ir(o,t),s)}return n}function Ji(t){return function(e){return di(e,t)}}function qi(t,e,a,i){var r=i?x:S,n=-1,o=e.length,s=t;for(t===e&&(e=Ar(e)),a&&(s=f(t,O(a)));++n<o;)for(var l=0,h=e[n],u=a?a(h):h;(l=r(s,u,l,i))>-1;)s!==t&&Fu.call(s,l,1),Fu.call(t,l,1);return t}function Zi(t,e){for(var a=t?e.length:0,i=a-1;a--;){var r=e[a];if(a==i||r!==n){var n=r;Nn(r)?Fu.call(t,r,1):fr(t,r)}}return t}function ji(t,e){return t+_u(zu()*(e-t+1))}function Qi(t,e,a,i){for(var r=-1,n=Xu(Bu((e-t)/(a||1)),0),o=tu(n);n--;)o[i?n:++r]=t,t+=a;return o}function $i(t,e){var a="";if(!t||e<1||e>Ot)return a;do{e%2&&(a+=t),(e=_u(e/2))&&(t+=t)}while(e);return a}function tr(t,e){return FC(Xn(t,e,Fh),t+"")}function er(t){return Na(jl(t))}function ar(t,e){var a=jl(t);return qn(a,ti(e,0,a.length))}function ir(t,e,a,i){if(!al(t))return t;e=Ir(e,t);for(var r=-1,n=e.length,o=n-1,s=t;null!=s&&++r<n;){var l=Zn(e[r]),h=a;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(r!=o){var u=s[l];h=i?i(u,l,s):rt,h===rt&&(h=al(u)?u:Nn(e[r+1])?[]:{})}_a(s,l,h),s=s[l]}return t}function rr(t){return qn(jl(t))}function nr(t,e,a){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),a=a>r?r:a,a<0&&(a+=r),r=e>a?0:a-e>>>0,e>>>=0;for(var n=tu(r);++i<r;)n[i]=t[i+e];return n}function or(t,e){var a;return cC(t,function(t,i,r){return!(a=e(t,i,r))}),!!a}function sr(t,e,a){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e===e&&r<=kt){for(;i<r;){var n=i+r>>>1,o=t[n];null!==o&&!dl(o)&&(a?o<=e:o<e)?i=n+1:r=n}return r}return lr(t,e,Fh,a)}function lr(t,e,a,i){var r=0,n=null==t?0:t.length;if(0===n)return 0;e=a(e);for(var o=e!==e,s=null===e,l=dl(e),h=e===rt;r<n;){var u=_u((r+n)/2),C=a(t[u]),c=C!==rt,f=null===C,d=C===C,D=dl(C);if(o)var m=i||d;else m=h?d&&(i||c):s?d&&c&&(i||!f):l?d&&c&&!f&&(i||!D):!f&&!D&&(i?C<=e:C<e);m?r=u+1:n=u}return Wu(n,Gt)}function hr(t,e){for(var a=-1,i=t.length,r=0,n=[];++a<i;){var o=t[a],s=e?e(o):o;if(!a||!Xs(s,l)){var l=s;n[r++]=0===o?0:o}}return n}function ur(t){return"number"==typeof t?t:dl(t)?Bt:+t}function Cr(t){if("string"==typeof t)return t;if(dc(t))return f(t,Cr)+"";if(dl(t))return uC?uC.call(t):"";var e=t+"";return"0"==e&&1/t==-At?"-0":e}function cr(t,e,a){var i=-1,r=C,n=t.length,o=!0,s=[],l=s;if(a)o=!1,r=c;else if(n>=nt){var h=e?null:TC(t);if(h)return J(h);o=!1,r=B,l=new fa}else l=e?[]:s;t:for(;++i<n;){var u=t[i],f=e?e(u):u;if(u=a||0!==u?u:0,o&&f===f){for(var d=l.length;d--;)if(l[d]===f)continue t;e&&l.push(f),s.push(u)}else r(l,f,a)||(l!==s&&l.push(f),s.push(u))}return s}function fr(t,e){return e=Ir(e,t),null==(t=Wn(t,e))||delete t[Zn(go(e))]}function dr(t,e,a,i){return ir(t,e,a(di(t,e)),i)}function Dr(t,e,a,i){for(var r=t.length,n=i?r:-1;(i?n--:++n<r)&&e(t[n],n,t););return a?nr(t,i?0:n,i?n+1:r):nr(t,i?n+1:0,i?r:n)}function mr(t,e){var a=t;return a instanceof v&&(a=a.value()),D(e,function(t,e){return e.func.apply(e.thisArg,d([t],e.args))},a)}function pr(t,e,a){var i=t.length;if(i<2)return i?cr(t[0]):[];for(var r=-1,n=tu(i);++r<i;)for(var o=t[r],s=-1;++s<i;)s!=r&&(n[r]=ni(n[r]||o,t[s],e,a));return cr(ui(n,1),e,a)}function vr(t,e,a){for(var i=-1,r=t.length,n=e.length,o={};++i<r;){var s=i<n?e[i]:rt;a(o,t[i],s)}return o}function gr(t){return Us(t)?t:[]}function Tr(t){return"function"==typeof t?t:Fh}function Ir(t,e){return dc(t)?t:An(t,e)?[t]:MC(yl(t))}function Sr(t,e,a){var i=t.length;return a=a===rt?i:a,!e&&a>=i?t:nr(t,e,a)}function xr(t,e){if(e)return t.slice();var a=t.length,i=bu?bu(a):new t.constructor(a);return t.copy(i),i}function br(t){var e=new t.constructor(t.byteLength);return new xu(e).set(new xu(t)),e}function yr(t,e){var a=e?br(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}function Er(t){var e=new t.constructor(t.source,Xe.exec(t));return e.lastIndex=t.lastIndex,e}function wr(t){return hC?nu(hC.call(t)):{}}function Fr(t,e){var a=e?br(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}function Mr(t,e){if(t!==e){var a=t!==rt,i=null===t,r=t===t,n=dl(t),o=e!==rt,s=null===e,l=e===e,h=dl(e);if(!s&&!h&&!n&&t>e||n&&o&&l&&!s&&!h||i&&o&&l||!a&&l||!r)return 1;if(!i&&!n&&!h&&t<e||h&&a&&r&&!i&&!n||s&&a&&r||!o&&r||!l)return-1}return 0}function Lr(t,e,a){for(var i=-1,r=t.criteria,n=e.criteria,o=r.length,s=a.length;++i<o;){var l=Mr(r[i],n[i]);if(l){if(i>=s)return l;return l*("desc"==a[i]?-1:1)}}return t.index-e.index}function Nr(t,e,a,i){for(var r=-1,n=t.length,o=a.length,s=-1,l=e.length,h=Xu(n-o,0),u=tu(l+h),C=!i;++s<l;)u[s]=e[s];for(;++r<o;)(C||r<n)&&(u[a[r]]=t[r]);for(;h--;)u[s++]=t[r++];return u}function Rr(t,e,a,i){for(var r=-1,n=t.length,o=-1,s=a.length,l=-1,h=e.length,u=Xu(n-s,0),C=tu(u+h),c=!i;++r<u;)C[r]=t[r];for(var f=r;++l<h;)C[f+l]=e[l];for(;++o<s;)(c||r<n)&&(C[f+a[o]]=t[r++]);return C}function Ar(t,e){var a=-1,i=t.length;for(e||(e=tu(i));++a<i;)e[a]=t[a];return e}function Or(t,e,a,i){var r=!a;a||(a={});for(var n=-1,o=e.length;++n<o;){var s=e[n],l=i?i(a[s],t[s],s,a,t):rt;l===rt&&(l=t[s]),r?Qa(a,s,l):_a(a,s,l)}return a}function Pr(t,e){return Or(t,SC(t),e)}function Br(t,e){return Or(t,xC(t),e)}function _r(t,e){return function(a,i){var r=dc(a)?o:qa,n=e?e():{};return r(a,t,vn(i,2),n)}}function Gr(t){return tr(function(e,a){var i=-1,r=a.length,n=r>1?a[r-1]:rt,o=r>2?a[2]:rt;for(n=t.length>3&&"function"==typeof n?(r--,n):rt,o&&Rn(a[0],a[1],o)&&(n=r<3?rt:n,r=1),e=nu(e);++i<r;){var s=a[i];s&&t(e,s,i,n)}return e})}function kr(t,e){return function(a,i){if(null==a)return a;if(!Ws(a))return t(a,i);for(var r=a.length,n=e?r:-1,o=nu(a);(e?n--:++n<r)&&!1!==i(o[n],n,o););return a}}function Vr(t){return function(e,a,i){for(var r=-1,n=nu(e),o=i(e),s=o.length;s--;){var l=o[t?s:++r];if(!1===a(n[l],l,n))break}return e}}function Hr(t,e,a){function i(){return(this&&this!==Ra&&this instanceof i?n:t).apply(r?a:this,arguments)}var r=e&pt,n=Wr(t);return i}function Yr(t){return function(e){e=yl(e);var a=Y(e)?$(e):rt,i=a?a[0]:e.charAt(0),r=a?Sr(a,1).join(""):e.slice(1);return i[t]()+r}}function Xr(t){return function(e){return D(xh(ih(e).replace(da,"")),t,"")}}function Wr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var a=CC(t.prototype),i=t.apply(a,e);return al(i)?i:a}}function Ur(t,e,a){function i(){for(var o=arguments.length,s=tu(o),l=o,h=pn(i);l--;)s[l]=arguments[l];var u=o<3&&s[0]!==h&&s[o-1]!==h?[]:z(s,h);return(o-=u.length)<a?an(t,e,Jr,i.placeholder,rt,s,u,rt,rt,a-o):n(this&&this!==Ra&&this instanceof i?r:t,this,s)}var r=Wr(t);return i}function Kr(t){return function(e,a,i){var r=nu(e);if(!Ws(e)){var n=vn(a,3);e=Gl(e),a=function(t){return n(r[t],t,r)}}var o=t(e,a,i);return o>-1?r[n?e[o]:o]:rt}}function zr(t){return fn(function(e){var a=e.length,i=a,n=r.prototype.thru;for(t&&e.reverse();i--;){var o=e[i];if("function"!=typeof o)throw new lu(st);if(n&&!s&&"wrapper"==mn(o))var s=new r([],!0)}for(i=s?i:a;++i<a;){o=e[i];var l=mn(o),h="wrapper"==l?IC(o):rt;s=h&&Pn(h[0])&&h[1]==(bt|Tt|St|yt)&&!h[4].length&&1==h[9]?s[mn(h[0])].apply(s,h[3]):1==o.length&&Pn(o)?s[l]():s.thru(o)}return function(){var t=arguments,i=t[0];if(s&&1==t.length&&dc(i))return s.plant(i).value();for(var r=0,n=a?e[r].apply(this,t):i;++r<a;)n=e[r].call(this,n);return n}})}function Jr(t,e,a,i,r,n,o,s,l,h){function u(){for(var p=arguments.length,v=tu(p),g=p;g--;)v[g]=arguments[g];if(d)var T=pn(u),I=k(v,T);if(i&&(v=Nr(v,i,r,d)),n&&(v=Rr(v,n,o,d)),p-=I,d&&p<h){var S=z(v,T);return an(t,e,Jr,u.placeholder,a,v,S,s,l,h-p)}var x=c?a:this,b=f?x[t]:t;return p=v.length,s?v=Un(v,s):D&&p>1&&v.reverse(),C&&l<p&&(v.length=l),this&&this!==Ra&&this instanceof u&&(b=m||Wr(b)),b.apply(x,v)}var C=e&bt,c=e&pt,f=e&vt,d=e&(Tt|It),D=e&Et,m=f?rt:Wr(t);return u}function qr(t,e){return function(a,i){return Si(a,t,e(i),{})}}function Zr(t,e){return function(a,i){var r;if(a===rt&&i===rt)return e;if(a!==rt&&(r=a),i!==rt){if(r===rt)return i;"string"==typeof a||"string"==typeof i?(a=Cr(a),i=Cr(i)):(a=ur(a),i=ur(i)),r=t(a,i)}return r}}function jr(t){return fn(function(e){return e=f(e,O(vn())),tr(function(a){var i=this;return t(e,function(t){return n(t,i,a)})})})}function Qr(t,e){e=e===rt?" ":Cr(e);var a=e.length;if(a<2)return a?$i(e,t):e;var i=$i(e,Bu(t/Q(e)));return Y(e)?Sr($(i),0,t).join(""):i.slice(0,t)}function $r(t,e,a,i){function r(){for(var e=-1,l=arguments.length,h=-1,u=i.length,C=tu(u+l),c=this&&this!==Ra&&this instanceof r?s:t;++h<u;)C[h]=i[h];for(;l--;)C[h++]=arguments[++e];return n(c,o?a:this,C)}var o=e&pt,s=Wr(t);return r}function tn(t){return function(e,a,i){return i&&"number"!=typeof i&&Rn(e,a,i)&&(a=i=rt),e=gl(e),a===rt?(a=e,e=0):a=gl(a),i=i===rt?e<a?1:-1:gl(i),Qi(e,a,i,t)}}function en(t){return function(e,a){return"string"==typeof e&&"string"==typeof a||(e=Sl(e),a=Sl(a)),t(e,a)}}function an(t,e,a,i,r,n,o,s,l,h){var u=e&Tt,C=u?o:rt,c=u?rt:o,f=u?n:rt,d=u?rt:n;e|=u?St:xt,(e&=~(u?xt:St))&gt||(e&=~(pt|vt));var D=[t,e,r,f,C,d,c,s,l,h],m=a.apply(rt,D);return Pn(t)&&EC(m,D),m.placeholder=i,zn(m,t,e)}function rn(t){var e=ru[t];return function(t,a){if(t=Sl(t),(a=null==a?0:Wu(Tl(a),292))&&Vu(t)){var i=(yl(t)+"e").split("e");return i=(yl(e(i[0]+"e"+(+i[1]+a)))+"e").split("e"),+(i[0]+"e"+(+i[1]-a))}return e(t)}}function nn(t){return function(e){var a=bC(e);return a==Zt?U(e):a==ae?q(e):R(e,t(e))}}function on(t,e,a,i,r,n,o,s){var l=e&vt;if(!l&&"function"!=typeof t)throw new lu(st);var h=i?i.length:0;if(h||(e&=~(St|xt),i=r=rt),o=o===rt?o:Xu(Tl(o),0),s=s===rt?s:Tl(s),h-=r?r.length:0,e&xt){var u=i,C=r;i=r=rt}var c=l?rt:IC(t),f=[t,e,a,i,r,u,C,n,o,s];if(c&&Vn(f,c),t=f[0],e=f[1],a=f[2],i=f[3],r=f[4],s=f[9]=f[9]===rt?l?0:t.length:Xu(f[9]-h,0),!s&&e&(Tt|It)&&(e&=~(Tt|It)),e&&e!=pt)d=e==Tt||e==It?Ur(t,e,s):e!=St&&e!=(pt|St)||r.length?Jr.apply(rt,f):$r(t,e,a,i);else var d=Hr(t,e,a);return zn((c?mC:EC)(d,f),t,e)}function sn(t,e,a,i){return t===rt||Xs(t,Cu[a])&&!du.call(i,a)?e:t}function ln(t,e,a,i,r,n){return al(t)&&al(e)&&(n.set(e,t),Yi(t,e,rt,ln,n),n.delete(e)),t}function hn(t){return Cl(t)?rt:t}function un(t,e,a,i,r,n){var o=a&Dt,s=t.length,l=e.length;if(s!=l&&!(o&&l>s))return!1;var h=n.get(t),u=n.get(e);if(h&&u)return h==e&&u==t;var C=-1,c=!0,f=a&mt?new fa:rt;for(n.set(t,e),n.set(e,t);++C<s;){var d=t[C],D=e[C];if(i)var m=o?i(D,d,C,e,t,n):i(d,D,C,t,e,n);if(m!==rt){if(m)continue;c=!1;break}if(f){if(!p(e,function(t,e){if(!B(f,e)&&(d===t||r(d,t,a,i,n)))return f.push(e)})){c=!1;break}}else if(d!==D&&!r(d,D,a,i,n)){c=!1;break}}return n.delete(t),n.delete(e),c}function Cn(t,e,a,i,r,n,o){switch(a){case he:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case le:return!(t.byteLength!=e.byteLength||!n(new xu(t),new xu(e)));case Wt:case Ut:case jt:return Xs(+t,+e);case zt:return t.name==e.name&&t.message==e.message;case ee:case ie:return t==e+"";case Zt:var s=U;case ae:var l=i&Dt;if(s||(s=J),t.size!=e.size&&!l)return!1;var h=o.get(t);if(h)return h==e;i|=mt,o.set(t,e);var u=un(s(t),s(e),i,r,n,o);return o.delete(t),u;case re:if(hC)return hC.call(t)==hC.call(e)}return!1}function cn(t,e,a,i,r,n){var o=a&Dt,s=dn(t),l=s.length;if(l!=dn(e).length&&!o)return!1;for(var h=l;h--;){var u=s[h];if(!(o?u in e:du.call(e,u)))return!1}var C=n.get(t),c=n.get(e);if(C&&c)return C==e&&c==t;var f=!0;n.set(t,e),n.set(e,t);for(var d=o;++h<l;){u=s[h];var D=t[u],m=e[u];if(i)var p=o?i(m,D,u,e,t,n):i(D,m,u,t,e,n);if(!(p===rt?D===m||r(D,m,a,i,n):p)){f=!1;break}d||(d="constructor"==u)}if(f&&!d){var v=t.constructor,g=e.constructor;v!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof g&&g instanceof g)&&(f=!1)}return n.delete(t),n.delete(e),f}function fn(t){return FC(Xn(t,rt,uo),t+"")}function dn(t){return Di(t,Gl,SC)}function Dn(t){return Di(t,kl,xC)}function mn(t){for(var e=t.name+"",a=aC[e],i=du.call(aC,e)?a.length:0;i--;){var r=a[i],n=r.func;if(null==n||n==t)return r.name}return e}function pn(t){return(du.call(a,"placeholder")?a:t).placeholder}function vn(){var t=a.iteratee||Mh;return t=t===Mh?Pi:t,arguments.length?t(arguments[0],arguments[1]):t}function gn(t,e){var a=t.__data__;return On(e)?a["string"==typeof e?"string":"hash"]:a.map}function Tn(t){for(var e=Gl(t),a=e.length;a--;){var i=e[a],r=t[i];e[a]=[i,r,Gn(r)]}return e}function In(t,e){var a=H(t,e);return Ni(a)?a:rt}function Sn(t){var e=du.call(t,Nu),a=t[Nu];try{t[Nu]=rt;var i=!0}catch(t){}var r=pu.call(t);return i&&(e?t[Nu]=a:delete t[Nu]),r}function xn(t,e,a){for(var i=-1,r=a.length;++i<r;){var n=a[i],o=n.size;switch(n.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=Wu(e,t+o);break;case"takeRight":t=Xu(t,e-o)}}return{start:t,end:e}}function bn(t){var e=t.match(_e);return e?e[1].split(Ge):[]}function yn(t,e,a){e=Ir(e,t);for(var i=-1,r=e.length,n=!1;++i<r;){var o=Zn(e[i]);if(!(n=null!=t&&a(t,o)))break;t=t[o]}return n||++i!=r?n:!!(r=null==t?0:t.length)&&el(r)&&Nn(o,r)&&(dc(t)||fc(t))}function En(t){var e=t.length,a=new t.constructor(e);return e&&"string"==typeof t[0]&&du.call(t,"index")&&(a.index=t.index,a.input=t.input),a}function wn(t){return"function"!=typeof t.constructor||_n(t)?{}:CC(yu(t))}function Fn(t,e,a){var i=t.constructor;switch(e){case le:return br(t);case Wt:case Ut:return new i(+t);case he:return yr(t,a);case ue:case Ce:case ce:case fe:case de:case De:case me:case pe:case ve:return Fr(t,a);case Zt:return new i;case jt:case ie:return new i(t);case ee:return Er(t);case ae:return new i;case re:return wr(t)}}function Mn(t,e){var a=e.length;if(!a)return t;var i=a-1;return e[i]=(a>1?"& ":"")+e[i],e=e.join(a>2?", ":" "),t.replace(Be,"{\n/* [wrapped with "+e+"] */\n")}function Ln(t){return dc(t)||fc(t)||!!(Mu&&t&&t[Mu])}function Nn(t,e){var a=typeof t;return!!(e=null==e?Ot:e)&&("number"==a||"symbol"!=a&&Je.test(t))&&t>-1&&t%1==0&&t<e}function Rn(t,e,a){if(!al(a))return!1;var i=typeof e;return!!("number"==i?Ws(a)&&Nn(e,a.length):"string"==i&&e in a)&&Xs(a[e],t)}function An(t,e){if(dc(t))return!1;var a=typeof t;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=t&&!dl(t))||(Le.test(t)||!Me.test(t)||null!=e&&t in nu(e))}function On(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Pn(t){var e=mn(t),i=a[e];if("function"!=typeof i||!(e in v.prototype))return!1;if(t===i)return!0;var r=IC(i);return!!r&&t===r[0]}function Bn(t){return!!mu&&mu in t}function _n(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Cu)}function Gn(t){return t===t&&!al(t)}function kn(t,e){return function(a){return null!=a&&(a[t]===e&&(e!==rt||t in nu(a)))}}function Vn(t,e){var a=t[1],i=e[1],r=a|i,n=r<(pt|vt|bt),o=i==bt&&a==Tt||i==bt&&a==yt&&t[7].length<=e[8]||i==(bt|yt)&&e[7].length<=e[8]&&a==Tt;if(!n&&!o)return t;i&pt&&(t[2]=e[2],r|=a&pt?0:gt);var s=e[3];if(s){var l=t[3];t[3]=l?Nr(l,s,e[4]):s,t[4]=l?z(t[3],Ct):e[4]}return s=e[5],s&&(l=t[5],t[5]=l?Rr(l,s,e[6]):s,t[6]=l?z(t[5],Ct):e[6]),s=e[7],s&&(t[7]=s),i&bt&&(t[8]=null==t[8]?e[8]:Wu(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function Hn(t){var e=[];if(null!=t)for(var a in nu(t))e.push(a);return e}function Yn(t){return pu.call(t)}function Xn(t,e,a){return e=Xu(e===rt?t.length-1:e,0),function(){for(var i=arguments,r=-1,o=Xu(i.length-e,0),s=tu(o);++r<o;)s[r]=i[e+r];r=-1;for(var l=tu(e+1);++r<e;)l[r]=i[r];return l[e]=a(s),n(t,this,l)}}function Wn(t,e){return e.length<2?t:di(t,nr(e,0,-1))}function Un(t,e){for(var a=t.length,i=Wu(e.length,a),r=Ar(t);i--;){var n=e[i];t[i]=Nn(n,a)?r[n]:rt}return t}function Kn(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function zn(t,e,a){var i=e+"";return FC(t,Mn(i,Qn(bn(i),a)))}function Jn(t){var e=0,a=0;return function(){var i=Uu(),r=Lt-(i-a);if(a=i,r>0){if(++e>=Mt)return arguments[0]}else e=0;return t.apply(rt,arguments)}}function qn(t,e){var a=-1,i=t.length,r=i-1;for(e=e===rt?i:e;++a<e;){var n=ji(a,r),o=t[n];t[n]=t[a],t[a]=o}return t.length=e,t}function Zn(t){if("string"==typeof t||dl(t))return t;var e=t+"";return"0"==e&&1/t==-At?"-0":e}function jn(t){if(null!=t){try{return fu.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Qn(t,e){return s(Vt,function(a){var i="_."+a[0];e&a[1]&&!C(t,i)&&t.push(i)}),t.sort()}function $n(t){if(t instanceof v)return t.clone();var e=new r(t.__wrapped__,t.__chain__);return e.__actions__=Ar(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function to(t,e,a){e=(a?Rn(t,e,a):e===rt)?1:Xu(Tl(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var r=0,n=0,o=tu(Bu(i/e));r<i;)o[n++]=nr(t,r,r+=e);return o}function eo(t){for(var e=-1,a=null==t?0:t.length,i=0,r=[];++e<a;){var n=t[e];n&&(r[i++]=n)}return r}function ao(){var t=arguments.length;if(!t)return[];for(var e=tu(t-1),a=arguments[0],i=t;i--;)e[i-1]=arguments[i];return d(dc(a)?Ar(a):[a],ui(e,1))}function io(t,e,a){var i=null==t?0:t.length;return i?(e=a||e===rt?1:Tl(e),nr(t,e<0?0:e,i)):[]}function ro(t,e,a){var i=null==t?0:t.length;return i?(e=a||e===rt?1:Tl(e),e=i-e,nr(t,0,e<0?0:e)):[]}function no(t,e){return t&&t.length?Dr(t,vn(e,3),!0,!0):[]}function oo(t,e){return t&&t.length?Dr(t,vn(e,3),!0):[]}function so(t,e,a,i){var r=null==t?0:t.length;return r?(a&&"number"!=typeof a&&Rn(t,e,a)&&(a=0,i=r),li(t,e,a,i)):[]}function lo(t,e,a){var i=null==t?0:t.length;if(!i)return-1;var r=null==a?0:Tl(a);return r<0&&(r=Xu(i+r,0)),I(t,vn(e,3),r)}function ho(t,e,a){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return a!==rt&&(r=Tl(a),r=a<0?Xu(i+r,0):Wu(r,i-1)),I(t,vn(e,3),r,!0)}function uo(t){return(null==t?0:t.length)?ui(t,1):[]}function Co(t){return(null==t?0:t.length)?ui(t,At):[]}function co(t,e){return(null==t?0:t.length)?(e=e===rt?1:Tl(e),ui(t,e)):[]}function fo(t){for(var e=-1,a=null==t?0:t.length,i={};++e<a;){var r=t[e];i[r[0]]=r[1]}return i}function Do(t){return t&&t.length?t[0]:rt}function mo(t,e,a){var i=null==t?0:t.length;if(!i)return-1;var r=null==a?0:Tl(a);return r<0&&(r=Xu(i+r,0)),S(t,e,r)}function po(t){return(null==t?0:t.length)?nr(t,0,-1):[]}function vo(t,e){return null==t?"":Hu.call(t,e)}function go(t){var e=null==t?0:t.length;return e?t[e-1]:rt}function To(t,e,a){var i=null==t?0:t.length;if(!i)return-1;var r=i;return a!==rt&&(r=Tl(a),r=r<0?Xu(i+r,0):Wu(r,i-1)),e===e?j(t,e,r):I(t,b,r,!0)}function Io(t,e){return t&&t.length?Wi(t,Tl(e)):rt}function So(t,e){return t&&t.length&&e&&e.length?qi(t,e):t}function xo(t,e,a){return t&&t.length&&e&&e.length?qi(t,e,vn(a,2)):t}function bo(t,e,a){return t&&t.length&&e&&e.length?qi(t,e,rt,a):t}function yo(t,e){var a=[];if(!t||!t.length)return a;var i=-1,r=[],n=t.length;for(e=vn(e,3);++i<n;){var o=t[i];e(o,i,t)&&(a.push(o),r.push(i))}return Zi(t,r),a}function Eo(t){return null==t?t:Ju.call(t)}function wo(t,e,a){var i=null==t?0:t.length;return i?(a&&"number"!=typeof a&&Rn(t,e,a)?(e=0,a=i):(e=null==e?0:Tl(e),a=a===rt?i:Tl(a)),nr(t,e,a)):[]}function Fo(t,e){return sr(t,e)}function Mo(t,e,a){return lr(t,e,vn(a,2))}function Lo(t,e){var a=null==t?0:t.length;if(a){var i=sr(t,e);if(i<a&&Xs(t[i],e))return i}return-1}function No(t,e){return sr(t,e,!0)}function Ro(t,e,a){return lr(t,e,vn(a,2),!0)}function Ao(t,e){if(null==t?0:t.length){var a=sr(t,e,!0)-1;if(Xs(t[a],e))return a}return-1}function Oo(t){return t&&t.length?hr(t):[]}function Po(t,e){return t&&t.length?hr(t,vn(e,2)):[]}function Bo(t){var e=null==t?0:t.length;return e?nr(t,1,e):[]}function _o(t,e,a){return t&&t.length?(e=a||e===rt?1:Tl(e),nr(t,0,e<0?0:e)):[]}function Go(t,e,a){var i=null==t?0:t.length;return i?(e=a||e===rt?1:Tl(e),e=i-e,nr(t,e<0?0:e,i)):[]}function ko(t,e){return t&&t.length?Dr(t,vn(e,3),!1,!0):[]}function Vo(t,e){return t&&t.length?Dr(t,vn(e,3)):[]}function Ho(t){return t&&t.length?cr(t):[]}function Yo(t,e){return t&&t.length?cr(t,vn(e,2)):[]}function Xo(t,e){return e="function"==typeof e?e:rt,t&&t.length?cr(t,rt,e):[]}function Wo(t){if(!t||!t.length)return[];var e=0;return t=u(t,function(t){if(Us(t))return e=Xu(t.length,e),!0}),N(e,function(e){return f(t,E(e))})}function Uo(t,e){if(!t||!t.length)return[];var a=Wo(t);return null==e?a:f(a,function(t){return n(e,rt,t)})}function Ko(t,e){return vr(t||[],e||[],_a)}function zo(t,e){return vr(t||[],e||[],ir)}function Jo(t){var e=a(t);return e.__chain__=!0,e}function qo(t,e){return e(t),t}function Zo(t,e){return e(t)}function jo(){return Jo(this)}function Qo(){return new r(this.value(),this.__chain__)}function $o(){this.__values__===rt&&(this.__values__=vl(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?rt:this.__values__[this.__index__++]}}function ts(){return this}function es(t){for(var e,a=this;a instanceof i;){var r=$n(a);r.__index__=0,r.__values__=rt,e?n.__wrapped__=r:e=r;var n=r;a=a.__wrapped__}return n.__wrapped__=t,e}function as(){var t=this.__wrapped__;if(t instanceof v){var e=t;return this.__actions__.length&&(e=new v(this)),e=e.reverse(),e.__actions__.push({func:Zo,args:[Eo],thisArg:rt}),new r(e,this.__chain__)}return this.thru(Eo)}function is(){return mr(this.__wrapped__,this.__actions__)}function rs(t,e,a){var i=dc(t)?h:oi;return a&&Rn(t,e,a)&&(e=rt),i(t,vn(e,3))}function ns(t,e){return(dc(t)?u:hi)(t,vn(e,3))}function os(t,e){return ui(cs(t,e),1)}function ss(t,e){return ui(cs(t,e),At)}function ls(t,e,a){return a=a===rt?1:Tl(a),ui(cs(t,e),a)}function hs(t,e){return(dc(t)?s:cC)(t,vn(e,3))}function us(t,e){return(dc(t)?l:fC)(t,vn(e,3))}function Cs(t,e,a,i){t=Ws(t)?t:jl(t),a=a&&!i?Tl(a):0;var r=t.length;return a<0&&(a=Xu(r+a,0)),fl(t)?a<=r&&t.indexOf(e,a)>-1:!!r&&S(t,e,a)>-1}function cs(t,e){return(dc(t)?f:ki)(t,vn(e,3))}function fs(t,e,a,i){return null==t?[]:(dc(e)||(e=null==e?[]:[e]),a=i?rt:a,dc(a)||(a=null==a?[]:[a]),Ui(t,e,a))}function ds(t,e,a){var i=dc(t)?D:F,r=arguments.length<3;return i(t,vn(e,4),a,r,cC)}function Ds(t,e,a){var i=dc(t)?m:F,r=arguments.length<3;return i(t,vn(e,4),a,r,fC)}function ms(t,e){return(dc(t)?u:hi)(t,Ls(vn(e,3)))}function ps(t){return(dc(t)?Na:er)(t)}function vs(t,e,a){return e=(a?Rn(t,e,a):e===rt)?1:Tl(e),(dc(t)?Aa:ar)(t,e)}function gs(t){return(dc(t)?Oa:rr)(t)}function Ts(t){if(null==t)return 0;if(Ws(t))return fl(t)?Q(t):t.length;var e=bC(t);return e==Zt||e==ae?t.size:Bi(t).length}function Is(t,e,a){var i=dc(t)?p:or;return a&&Rn(t,e,a)&&(e=rt),i(t,vn(e,3))}function Ss(t,e){if("function"!=typeof e)throw new lu(st);return t=Tl(t),function(){if(--t<1)return e.apply(this,arguments)}}function xs(t,e,a){return e=a?rt:e,e=t&&null==e?t.length:e,on(t,bt,rt,rt,rt,rt,e)}function bs(t,e){var a;if("function"!=typeof e)throw new lu(st);return t=Tl(t),function(){return--t>0&&(a=e.apply(this,arguments)),t<=1&&(e=rt),a}}function ys(t,e,a){e=a?rt:e;var i=on(t,Tt,rt,rt,rt,rt,rt,e);return i.placeholder=ys.placeholder,i}function Es(t,e,a){e=a?rt:e;var i=on(t,It,rt,rt,rt,rt,rt,e);return i.placeholder=Es.placeholder,i}function ws(t,e,a){function i(e){var a=c,i=f;return c=f=rt,v=e,D=t.apply(i,a)}function r(t){return v=t,m=wC(s,e),g?i(t):D}function n(t){var a=t-p,i=t-v,r=e-a;return T?Wu(r,d-i):r}function o(t){var a=t-p,i=t-v;return p===rt||a>=e||a<0||T&&i>=d}function s(){var t=ac();if(o(t))return l(t);m=wC(s,n(t))}function l(t){return m=rt,I&&c?i(t):(c=f=rt,D)}function h(){m!==rt&&gC(m),v=0,c=p=f=m=rt}function u(){return m===rt?D:l(ac())}function C(){var t=ac(),a=o(t);if(c=arguments,f=this,p=t,a){if(m===rt)return r(p);if(T)return gC(m),m=wC(s,e),i(p)}return m===rt&&(m=wC(s,e)),D}var c,f,d,D,m,p,v=0,g=!1,T=!1,I=!0;if("function"!=typeof t)throw new lu(st);return e=Sl(e)||0,al(a)&&(g=!!a.leading,T="maxWait"in a,d=T?Xu(Sl(a.maxWait)||0,e):d,I="trailing"in a?!!a.trailing:I),C.cancel=h,C.flush=u,C}function Fs(t){return on(t,Et)}function Ms(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new lu(st);var a=function(){var i=arguments,r=e?e.apply(this,i):i[0],n=a.cache;if(n.has(r))return n.get(r);var o=t.apply(this,i);return a.cache=n.set(r,o)||n,o};return a.cache=new(Ms.Cache||sa),a}function Ls(t){if("function"!=typeof t)throw new lu(st);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Ns(t){return bs(2,t)}function Rs(t,e){if("function"!=typeof t)throw new lu(st);return e=e===rt?e:Tl(e),tr(t,e)}function As(t,e){if("function"!=typeof t)throw new lu(st);return e=null==e?0:Xu(Tl(e),0),tr(function(a){var i=a[e],r=Sr(a,0,e);return i&&d(r,i),n(t,this,r)})}function Os(t,e,a){var i=!0,r=!0;if("function"!=typeof t)throw new lu(st);return al(a)&&(i="leading"in a?!!a.leading:i,r="trailing"in a?!!a.trailing:r),ws(t,e,{leading:i,maxWait:e,trailing:r})}function Ps(t){return xs(t,1)}function Bs(t,e){return lc(Tr(e),t)}function _s(){if(!arguments.length)return[];var t=arguments[0];return dc(t)?t:[t]}function Gs(t){return ei(t,dt)}function ks(t,e){return e="function"==typeof e?e:rt,ei(t,dt,e)}function Vs(t){return ei(t,ct|dt)}function Hs(t,e){return e="function"==typeof e?e:rt,ei(t,ct|dt,e)}function Ys(t,e){return null==e||ii(t,e,Gl(e))}function Xs(t,e){return t===e||t!==t&&e!==e}function Ws(t){return null!=t&&el(t.length)&&!$s(t)}function Us(t){return il(t)&&Ws(t)}function Ks(t){return!0===t||!1===t||il(t)&&mi(t)==Wt}function zs(t){return il(t)&&1===t.nodeType&&!Cl(t)}function Js(t){if(null==t)return!0;if(Ws(t)&&(dc(t)||"string"==typeof t||"function"==typeof t.splice||mc(t)||Ic(t)||fc(t)))return!t.length;var e=bC(t);if(e==Zt||e==ae)return!t.size;if(_n(t))return!Bi(t).length;for(var a in t)if(du.call(t,a))return!1;return!0}function qs(t,e){return wi(t,e)}function Zs(t,e,a){a="function"==typeof a?a:rt;var i=a?a(t,e):rt;return i===rt?wi(t,e,rt,a):!!i}function js(t){if(!il(t))return!1;var e=mi(t);return e==zt||e==Kt||"string"==typeof t.message&&"string"==typeof t.name&&!Cl(t)}function Qs(t){return"number"==typeof t&&Vu(t)}function $s(t){if(!al(t))return!1;var e=mi(t);return e==Jt||e==qt||e==Xt||e==te}function tl(t){return"number"==typeof t&&t==Tl(t)}function el(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ot}function al(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function il(t){return null!=t&&"object"==typeof t}function rl(t,e){return t===e||Li(t,e,Tn(e))}function nl(t,e,a){return a="function"==typeof a?a:rt,Li(t,e,Tn(e),a)}function ol(t){return ul(t)&&t!=+t}function sl(t){if(yC(t))throw new au(ot);return Ni(t)}function ll(t){return null===t}function hl(t){return null==t}function ul(t){return"number"==typeof t||il(t)&&mi(t)==jt}function Cl(t){if(!il(t)||mi(t)!=$t)return!1;var e=yu(t);if(null===e)return!0;var a=du.call(e,"constructor")&&e.constructor;return"function"==typeof a&&a instanceof a&&fu.call(a)==vu}function cl(t){return tl(t)&&t>=-Ot&&t<=Ot}function fl(t){return"string"==typeof t||!dc(t)&&il(t)&&mi(t)==ie}function dl(t){return"symbol"==typeof t||il(t)&&mi(t)==re}function Dl(t){return t===rt}function ml(t){return il(t)&&bC(t)==oe}function pl(t){return il(t)&&mi(t)==se}function vl(t){if(!t)return[];if(Ws(t))return fl(t)?$(t):Ar(t);if(Lu&&t[Lu])return W(t[Lu]());var e=bC(t);return(e==Zt?U:e==ae?J:jl)(t)}function gl(t){if(!t)return 0===t?t:0;if((t=Sl(t))===At||t===-At){return(t<0?-1:1)*Pt}return t===t?t:0}function Tl(t){var e=gl(t),a=e%1;return e===e?a?e-a:e:0}function Il(t){return t?ti(Tl(t),0,_t):0}function Sl(t){if("number"==typeof t)return t;if(dl(t))return Bt;if(al(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=al(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=A(t);var a=Ue.test(t);return a||ze.test(t)?Ma(t.slice(2),a?2:8):We.test(t)?Bt:+t}function xl(t){return Or(t,kl(t))}function bl(t){return t?ti(Tl(t),-Ot,Ot):0===t?t:0}function yl(t){return null==t?"":Cr(t)}function El(t,e){var a=CC(t);return null==e?a:Za(a,e)}function wl(t,e){return T(t,vn(e,3),Ci)}function Fl(t,e){return T(t,vn(e,3),ci)}function Ml(t,e){return null==t?t:dC(t,vn(e,3),kl)}function Ll(t,e){return null==t?t:DC(t,vn(e,3),kl)}function Nl(t,e){return t&&Ci(t,vn(e,3))}function Rl(t,e){return t&&ci(t,vn(e,3))}function Al(t){return null==t?[]:fi(t,Gl(t))}function Ol(t){return null==t?[]:fi(t,kl(t))}function Pl(t,e,a){var i=null==t?rt:di(t,e);return i===rt?a:i}function Bl(t,e){return null!=t&&yn(t,e,vi)}function _l(t,e){return null!=t&&yn(t,e,gi)}function Gl(t){return Ws(t)?La(t):Bi(t)}function kl(t){return Ws(t)?La(t,!0):_i(t)}function Vl(t,e){var a={};return e=vn(e,3),Ci(t,function(t,i,r){Qa(a,e(t,i,r),t)}),a}function Hl(t,e){var a={};return e=vn(e,3),Ci(t,function(t,i,r){Qa(a,i,e(t,i,r))}),a}function Yl(t,e){return Xl(t,Ls(vn(e)))}function Xl(t,e){if(null==t)return{};var a=f(Dn(t),function(t){return[t]});return e=vn(e),zi(t,a,function(t,a){return e(t,a[0])})}function Wl(t,e,a){e=Ir(e,t);var i=-1,r=e.length;for(r||(r=1,t=rt);++i<r;){var n=null==t?rt:t[Zn(e[i])];n===rt&&(i=r,n=a),t=$s(n)?n.call(t):n}return t}function Ul(t,e,a){return null==t?t:ir(t,e,a)}function Kl(t,e,a,i){return i="function"==typeof i?i:rt,null==t?t:ir(t,e,a,i)}function zl(t,e,a){var i=dc(t),r=i||mc(t)||Ic(t);if(e=vn(e,4),null==a){var n=t&&t.constructor;a=r?i?new n:[]:al(t)&&$s(n)?CC(yu(t)):{}}return(r?s:Ci)(t,function(t,i,r){return e(a,t,i,r)}),a}function Jl(t,e){return null==t||fr(t,e)}function ql(t,e,a){return null==t?t:dr(t,e,Tr(a))}function Zl(t,e,a,i){return i="function"==typeof i?i:rt,null==t?t:dr(t,e,Tr(a),i)}function jl(t){return null==t?[]:P(t,Gl(t))}function Ql(t){return null==t?[]:P(t,kl(t))}function $l(t,e,a){return a===rt&&(a=e,e=rt),a!==rt&&(a=Sl(a),a=a===a?a:0),e!==rt&&(e=Sl(e),e=e===e?e:0),ti(Sl(t),e,a)}function th(t,e,a){return e=gl(e),a===rt?(a=e,e=0):a=gl(a),t=Sl(t),Ti(t,e,a)}function eh(t,e,a){if(a&&"boolean"!=typeof a&&Rn(t,e,a)&&(e=a=rt),a===rt&&("boolean"==typeof e?(a=e,e=rt):"boolean"==typeof t&&(a=t,t=rt)),t===rt&&e===rt?(t=0,e=1):(t=gl(t),e===rt?(e=t,t=0):e=gl(e)),t>e){var i=t;t=e,e=i}if(a||t%1||e%1){var r=zu();return Wu(t+r*(e-t+Fa("1e-"+((r+"").length-1))),e)}return ji(t,e)}function ah(t){return zc(yl(t).toLowerCase())}function ih(t){return(t=yl(t))&&t.replace(qe,Ua).replace(Da,"")}function rh(t,e,a){t=yl(t),e=Cr(e);var i=t.length;a=a===rt?i:ti(Tl(a),0,i);var r=a;return(a-=e.length)>=0&&t.slice(a,r)==e}function nh(t){return t=yl(t),t&&ye.test(t)?t.replace(xe,Ka):t}function oh(t){return t=yl(t),t&&Ae.test(t)?t.replace(Re,"\\$&"):t}function sh(t,e,a){t=yl(t),e=Tl(e);var i=e?Q(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return Qr(_u(r),a)+t+Qr(Bu(r),a)}function lh(t,e,a){t=yl(t),e=Tl(e);var i=e?Q(t):0;return e&&i<e?t+Qr(e-i,a):t}function hh(t,e,a){t=yl(t),e=Tl(e);var i=e?Q(t):0;return e&&i<e?Qr(e-i,a)+t:t}function uh(t,e,a){return a||null==e?e=0:e&&(e=+e),Ku(yl(t).replace(Oe,""),e||0)}function Ch(t,e,a){return e=(a?Rn(t,e,a):e===rt)?1:Tl(e),$i(yl(t),e)}function ch(){var t=arguments,e=yl(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function fh(t,e,a){return a&&"number"!=typeof a&&Rn(t,e,a)&&(e=a=rt),(a=a===rt?_t:a>>>0)?(t=yl(t),t&&("string"==typeof e||null!=e&&!gc(e))&&!(e=Cr(e))&&Y(t)?Sr($(t),0,a):t.split(e,a)):[]}function dh(t,e,a){return t=yl(t),a=null==a?0:ti(Tl(a),0,t.length),e=Cr(e),t.slice(a,a+e.length)==e}function Dh(t,e,i){var r=a.templateSettings;i&&Rn(t,e,i)&&(e=rt),t=yl(t),e=Ec({},e,r,sn);var n,o,s=Ec({},e.imports,r.imports,sn),l=Gl(s),h=P(s,l),u=0,C=e.interpolate||Ze,c="__p += '",f=ou((e.escape||Ze).source+"|"+C.source+"|"+(C===Fe?Ye:Ze).source+"|"+(e.evaluate||Ze).source+"|$","g"),d="//# sourceURL="+(du.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ia+"]")+"\n";t.replace(f,function(e,a,i,r,s,l){return i||(i=r),c+=t.slice(u,l).replace(je,V),a&&(n=!0,c+="' +\n__e("+a+") +\n'"),s&&(o=!0,c+="';\n"+s+";\n__p += '"),i&&(c+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=l+e.length,e}),c+="';\n";var D=du.call(e,"variable")&&e.variable;if(D){if(Ve.test(D))throw new au(lt)}else c="with (obj) {\n"+c+"\n}\n";c=(o?c.replace(ge,""):c).replace(Te,"$1").replace(Ie,"$1;"),c="function("+(D||"obj")+") {\n"+(D?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(n?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var m=Jc(function(){return iu(l,d+"return "+c).apply(rt,h)});if(m.source=c,js(m))throw m;return m}function mh(t){return yl(t).toLowerCase()}function ph(t){return yl(t).toUpperCase()}function vh(t,e,a){if((t=yl(t))&&(a||e===rt))return A(t);if(!t||!(e=Cr(e)))return t;var i=$(t),r=$(e);return Sr(i,_(i,r),G(i,r)+1).join("")}function gh(t,e,a){if((t=yl(t))&&(a||e===rt))return t.slice(0,tt(t)+1);if(!t||!(e=Cr(e)))return t;var i=$(t);return Sr(i,0,G(i,$(e))+1).join("")}function Th(t,e,a){if((t=yl(t))&&(a||e===rt))return t.replace(Oe,"");if(!t||!(e=Cr(e)))return t;var i=$(t);return Sr(i,_(i,$(e))).join("")}function Ih(t,e){var a=wt,i=Ft;if(al(e)){var r="separator"in e?e.separator:r;a="length"in e?Tl(e.length):a,i="omission"in e?Cr(e.omission):i}t=yl(t);var n=t.length;if(Y(t)){var o=$(t);n=o.length}if(a>=n)return t;var s=a-Q(i);if(s<1)return i;var l=o?Sr(o,0,s).join(""):t.slice(0,s);if(r===rt)return l+i;if(o&&(s+=l.length-s),gc(r)){if(t.slice(s).search(r)){var h,u=l;for(r.global||(r=ou(r.source,yl(Xe.exec(r))+"g")),r.lastIndex=0;h=r.exec(u);)var C=h.index;l=l.slice(0,C===rt?s:C)}}else if(t.indexOf(Cr(r),s)!=s){var c=l.lastIndexOf(r);c>-1&&(l=l.slice(0,c))}return l+i}function Sh(t){return t=yl(t),t&&be.test(t)?t.replace(Se,za):t}function xh(t,e,a){return t=yl(t),e=a?rt:e,e===rt?X(t)?it(t):g(t):t.match(e)||[]}function bh(t){var e=null==t?0:t.length,a=vn();return t=e?f(t,function(t){if("function"!=typeof t[1])throw new lu(st);return[a(t[0]),t[1]]}):[],tr(function(a){for(var i=-1;++i<e;){var r=t[i];if(n(r[0],this,a))return n(r[1],this,a)}})}function yh(t){return ai(ei(t,ct))}function Eh(t){return function(){return t}}function wh(t,e){return null==t||t!==t?e:t}function Fh(t){return t}function Mh(t){return Pi("function"==typeof t?t:ei(t,ct))}function Lh(t){return Vi(ei(t,ct))}function Nh(t,e){return Hi(t,ei(e,ct))}function Rh(t,e,a){var i=Gl(e),r=fi(e,i);null!=a||al(e)&&(r.length||!i.length)||(a=e,e=t,t=this,r=fi(e,Gl(e)));var n=!(al(a)&&"chain"in a&&!a.chain),o=$s(t);return s(r,function(a){var i=e[a];t[a]=i,o&&(t.prototype[a]=function(){var e=this.__chain__;if(n||e){var a=t(this.__wrapped__);return(a.__actions__=Ar(this.__actions__)).push({func:i,args:arguments,thisArg:t}),a.__chain__=e,a}return i.apply(t,d([this.value()],arguments))})}),t}function Ah(){return Ra._===this&&(Ra._=gu),this}function Oh(){}function Ph(t){return t=Tl(t),tr(function(e){return Wi(e,t)})}function Bh(t){return An(t)?E(Zn(t)):Ji(t)}function _h(t){return function(e){return null==t?rt:di(t,e)}}function Gh(){return[]}function kh(){return!1}function Vh(){return{}}function Hh(){return""}function Yh(){return!0}function Xh(t,e){if((t=Tl(t))<1||t>Ot)return[];var a=_t,i=Wu(t,_t);e=vn(e),t-=_t;for(var r=N(i,e);++a<t;)e(a);return r}function Wh(t){return dc(t)?f(t,Zn):dl(t)?[t]:Ar(MC(yl(t)))}function Uh(t){var e=++Du;return yl(t)+e}function Kh(t){return t&&t.length?si(t,Fh,pi):rt}function zh(t,e){return t&&t.length?si(t,vn(e,2),pi):rt}function Jh(t){return y(t,Fh)}function qh(t,e){return y(t,vn(e,2))}function Zh(t){return t&&t.length?si(t,Fh,Gi):rt}function jh(t,e){return t&&t.length?si(t,vn(e,2),Gi):rt}function Qh(t){return t&&t.length?L(t,Fh):0}function $h(t,e){return t&&t.length?L(t,vn(e,2)):0}e=null==e?Ra:Ja.defaults(Ra.Object(),e,Ja.pick(Ra,Ta));var tu=e.Array,eu=e.Date,au=e.Error,iu=e.Function,ru=e.Math,nu=e.Object,ou=e.RegExp,su=e.String,lu=e.TypeError,hu=tu.prototype,uu=iu.prototype,Cu=nu.prototype,cu=e["__core-js_shared__"],fu=uu.toString,du=Cu.hasOwnProperty,Du=0,mu=function(){var t=/[^.]+$/.exec(cu&&cu.keys&&cu.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),pu=Cu.toString,vu=fu.call(nu),gu=Ra._,Tu=ou("^"+fu.call(du).replace(Re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Iu=Pa?e.Buffer:rt,Su=e.Symbol,xu=e.Uint8Array,bu=Iu?Iu.allocUnsafe:rt,yu=K(nu.getPrototypeOf,nu),Eu=nu.create,wu=Cu.propertyIsEnumerable,Fu=hu.splice,Mu=Su?Su.isConcatSpreadable:rt,Lu=Su?Su.iterator:rt,Nu=Su?Su.toStringTag:rt,Ru=function(){try{var t=In(nu,"defineProperty");return t({},"",{}),t}catch(t){}}(),Au=e.clearTimeout!==Ra.clearTimeout&&e.clearTimeout,Ou=eu&&eu.now!==Ra.Date.now&&eu.now,Pu=e.setTimeout!==Ra.setTimeout&&e.setTimeout,Bu=ru.ceil,_u=ru.floor,Gu=nu.getOwnPropertySymbols,ku=Iu?Iu.isBuffer:rt,Vu=e.isFinite,Hu=hu.join,Yu=K(nu.keys,nu),Xu=ru.max,Wu=ru.min,Uu=eu.now,Ku=e.parseInt,zu=ru.random,Ju=hu.reverse,qu=In(e,"DataView"),Zu=In(e,"Map"),ju=In(e,"Promise"),Qu=In(e,"Set"),$u=In(e,"WeakMap"),tC=In(nu,"create"),eC=$u&&new $u,aC={},iC=jn(qu),rC=jn(Zu),nC=jn(ju),oC=jn(Qu),sC=jn($u),lC=Su?Su.prototype:rt,hC=lC?lC.valueOf:rt,uC=lC?lC.toString:rt,CC=function(){function t(){}return function(e){if(!al(e))return{};if(Eu)return Eu(e);t.prototype=e;var a=new t;return t.prototype=rt,a}}();a.templateSettings={escape:Ee,evaluate:we,interpolate:Fe,variable:"",imports:{_:a}},a.prototype=i.prototype,a.prototype.constructor=a,r.prototype=CC(i.prototype),r.prototype.constructor=r,v.prototype=CC(i.prototype),v.prototype.constructor=v,at.prototype.clear=Pe,at.prototype.delete=ke,at.prototype.get=Qe,at.prototype.has=$e,at.prototype.set=ta,ea.prototype.clear=aa,ea.prototype.delete=ia,ea.prototype.get=ra,ea.prototype.has=na,ea.prototype.set=oa,sa.prototype.clear=la,sa.prototype.delete=ha,sa.prototype.get=ua,sa.prototype.has=Ca,sa.prototype.set=ca,fa.prototype.add=fa.prototype.push=ma,fa.prototype.has=pa,va.prototype.clear=ga,va.prototype.delete=ba,va.prototype.get=ya,va.prototype.has=Ea,va.prototype.set=wa;var cC=kr(Ci),fC=kr(ci,!0),dC=Vr(),DC=Vr(!0),mC=eC?function(t,e){return eC.set(t,e),t}:Fh,pC=Ru?function(t,e){return Ru(t,"toString",{configurable:!0,enumerable:!1,value:Eh(e),writable:!0})}:Fh,vC=tr,gC=Au||function(t){return Ra.clearTimeout(t)},TC=Qu&&1/J(new Qu([,-0]))[1]==At?function(t){return new Qu(t)}:Oh,IC=eC?function(t){return eC.get(t)}:Oh,SC=Gu?function(t){return null==t?[]:(t=nu(t),u(Gu(t),function(e){return wu.call(t,e)}))}:Gh,xC=Gu?function(t){for(var e=[];t;)d(e,SC(t)),t=yu(t);return e}:Gh,bC=mi;(qu&&bC(new qu(new ArrayBuffer(1)))!=he||Zu&&bC(new Zu)!=Zt||ju&&"[object Promise]"!=bC(ju.resolve())||Qu&&bC(new Qu)!=ae||$u&&bC(new $u)!=oe)&&(bC=function(t){var e=mi(t),a=e==$t?t.constructor:rt,i=a?jn(a):"";if(i)switch(i){case iC:return he;case rC:return Zt;case nC:return"[object Promise]";case oC:return ae;case sC:return oe}return e});var yC=cu?$s:kh,EC=Jn(mC),wC=Pu||function(t,e){return Ra.setTimeout(t,e)},FC=Jn(pC),MC=function(t){var e=Ms(t,function(t){return a.size===ut&&a.clear(),t}),a=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ne,function(t,a,i,r){e.push(i?r.replace(He,"$1"):a||t)}),e}),LC=tr(function(t,e){return Us(t)?ni(t,ui(e,1,Us,!0)):[]}),NC=tr(function(t,e){var a=go(e);return Us(a)&&(a=rt),Us(t)?ni(t,ui(e,1,Us,!0),vn(a,2)):[]}),RC=tr(function(t,e){var a=go(e);return Us(a)&&(a=rt),Us(t)?ni(t,ui(e,1,Us,!0),rt,a):[]}),AC=tr(function(t){var e=f(t,gr);return e.length&&e[0]===t[0]?Ii(e):[]}),OC=tr(function(t){var e=go(t),a=f(t,gr);return e===go(a)?e=rt:a.pop(),a.length&&a[0]===t[0]?Ii(a,vn(e,2)):[]}),PC=tr(function(t){var e=go(t),a=f(t,gr);return e="function"==typeof e?e:rt,e&&a.pop(),a.length&&a[0]===t[0]?Ii(a,rt,e):[]}),BC=tr(So),_C=fn(function(t,e){var a=null==t?0:t.length,i=$a(t,e);return Zi(t,f(e,function(t){return Nn(t,a)?+t:t}).sort(Mr)),i}),GC=tr(function(t){return cr(ui(t,1,Us,!0))}),kC=tr(function(t){var e=go(t);return Us(e)&&(e=rt),cr(ui(t,1,Us,!0),vn(e,2))}),VC=tr(function(t){var e=go(t);return e="function"==typeof e?e:rt,cr(ui(t,1,Us,!0),rt,e)}),HC=tr(function(t,e){return Us(t)?ni(t,e):[]}),YC=tr(function(t){return pr(u(t,Us))}),XC=tr(function(t){var e=go(t);return Us(e)&&(e=rt),pr(u(t,Us),vn(e,2))}),WC=tr(function(t){var e=go(t);return e="function"==typeof e?e:rt,pr(u(t,Us),rt,e)}),UC=tr(Wo),KC=tr(function(t){var e=t.length,a=e>1?t[e-1]:rt;return a="function"==typeof a?(t.pop(),a):rt,Uo(t,a)}),zC=fn(function(t){var e=t.length,a=e?t[0]:0,i=this.__wrapped__,n=function(e){return $a(e,t)};return!(e>1||this.__actions__.length)&&i instanceof v&&Nn(a)?(i=i.slice(a,+a+(e?1:0)),i.__actions__.push({func:Zo,args:[n],thisArg:rt}),new r(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(rt),t})):this.thru(n)}),JC=_r(function(t,e,a){du.call(t,a)?++t[a]:Qa(t,a,1)}),qC=Kr(lo),ZC=Kr(ho),jC=_r(function(t,e,a){du.call(t,a)?t[a].push(e):Qa(t,a,[e])}),QC=tr(function(t,e,a){var i=-1,r="function"==typeof e,o=Ws(t)?tu(t.length):[];return cC(t,function(t){o[++i]=r?n(e,t,a):xi(t,e,a)}),o}),$C=_r(function(t,e,a){Qa(t,a,e)}),tc=_r(function(t,e,a){t[a?0:1].push(e)},function(){return[[],[]]}),ec=tr(function(t,e){if(null==t)return[];var a=e.length;return a>1&&Rn(t,e[0],e[1])?e=[]:a>2&&Rn(e[0],e[1],e[2])&&(e=[e[0]]),Ui(t,ui(e,1),[])}),ac=Ou||function(){return Ra.Date.now()},ic=tr(function(t,e,a){var i=pt;if(a.length){var r=z(a,pn(ic));i|=St}return on(t,i,e,a,r)}),rc=tr(function(t,e,a){var i=pt|vt;if(a.length){var r=z(a,pn(rc));i|=St}return on(e,i,t,a,r)}),nc=tr(function(t,e){return ri(t,1,e)}),oc=tr(function(t,e,a){return ri(t,Sl(e)||0,a)});Ms.Cache=sa;var sc=vC(function(t,e){e=1==e.length&&dc(e[0])?f(e[0],O(vn())):f(ui(e,1),O(vn()));var a=e.length;return tr(function(i){for(var r=-1,o=Wu(i.length,a);++r<o;)i[r]=e[r].call(this,i[r]);return n(t,this,i)})}),lc=tr(function(t,e){var a=z(e,pn(lc));return on(t,St,rt,e,a)}),hc=tr(function(t,e){var a=z(e,pn(hc));return on(t,xt,rt,e,a)}),uc=fn(function(t,e){return on(t,yt,rt,rt,rt,e)}),Cc=en(pi),cc=en(function(t,e){return t>=e}),fc=bi(function(){return arguments}())?bi:function(t){return il(t)&&du.call(t,"callee")&&!wu.call(t,"callee")},dc=tu.isArray,Dc=Ga?O(Ga):yi,mc=ku||kh,pc=ka?O(ka):Ei,vc=Va?O(Va):Mi,gc=Ha?O(Ha):Ri,Tc=Ya?O(Ya):Ai,Ic=Xa?O(Xa):Oi,Sc=en(Gi),xc=en(function(t,e){return t<=e}),bc=Gr(function(t,e){if(_n(e)||Ws(e))return void Or(e,Gl(e),t);for(var a in e)du.call(e,a)&&_a(t,a,e[a])}),yc=Gr(function(t,e){Or(e,kl(e),t)}),Ec=Gr(function(t,e,a,i){Or(e,kl(e),t,i)}),wc=Gr(function(t,e,a,i){Or(e,Gl(e),t,i)}),Fc=fn($a),Mc=tr(function(t,e){t=nu(t);var a=-1,i=e.length,r=i>2?e[2]:rt;for(r&&Rn(e[0],e[1],r)&&(i=1);++a<i;)for(var n=e[a],o=kl(n),s=-1,l=o.length;++s<l;){var h=o[s],u=t[h];(u===rt||Xs(u,Cu[h])&&!du.call(t,h))&&(t[h]=n[h])}return t}),Lc=tr(function(t){return t.push(rt,ln),n(Pc,rt,t)}),Nc=qr(function(t,e,a){null!=e&&"function"!=typeof e.toString&&(e=pu.call(e)),t[e]=a},Eh(Fh)),Rc=qr(function(t,e,a){null!=e&&"function"!=typeof e.toString&&(e=pu.call(e)),du.call(t,e)?t[e].push(a):t[e]=[a]},vn),Ac=tr(xi),Oc=Gr(function(t,e,a){Yi(t,e,a)}),Pc=Gr(function(t,e,a,i){Yi(t,e,a,i)}),Bc=fn(function(t,e){var a={};if(null==t)return a;var i=!1;e=f(e,function(e){return e=Ir(e,t),i||(i=e.length>1),e}),Or(t,Dn(t),a),i&&(a=ei(a,ct|ft|dt,hn));for(var r=e.length;r--;)fr(a,e[r]);return a}),_c=fn(function(t,e){return null==t?{}:Ki(t,e)}),Gc=nn(Gl),kc=nn(kl),Vc=Xr(function(t,e,a){return e=e.toLowerCase(),t+(a?ah(e):e)}),Hc=Xr(function(t,e,a){return t+(a?"-":"")+e.toLowerCase()}),Yc=Xr(function(t,e,a){return t+(a?" ":"")+e.toLowerCase()}),Xc=Yr("toLowerCase"),Wc=Xr(function(t,e,a){return t+(a?"_":"")+e.toLowerCase()}),Uc=Xr(function(t,e,a){return t+(a?" ":"")+zc(e)}),Kc=Xr(function(t,e,a){return t+(a?" ":"")+e.toUpperCase()}),zc=Yr("toUpperCase"),Jc=tr(function(t,e){try{return n(t,rt,e)}catch(t){return js(t)?t:new au(t)}}),qc=fn(function(t,e){return s(e,function(e){e=Zn(e),Qa(t,e,ic(t[e],t))}),t}),Zc=zr(),jc=zr(!0),Qc=tr(function(t,e){return function(a){return xi(a,t,e)}}),$c=tr(function(t,e){return function(a){return xi(t,a,e)}}),tf=jr(f),ef=jr(h),af=jr(p),rf=tn(),nf=tn(!0),of=Zr(function(t,e){return t+e},0),sf=rn("ceil"),lf=Zr(function(t,e){return t/e},1),hf=rn("floor"),uf=Zr(function(t,e){return t*e},1),Cf=rn("round"),cf=Zr(function(t,e){return t-e},0);return a.after=Ss,a.ary=xs,a.assign=bc,a.assignIn=yc,a.assignInWith=Ec,a.assignWith=wc,a.at=Fc,a.before=bs,a.bind=ic,a.bindAll=qc,a.bindKey=rc,a.castArray=_s,a.chain=Jo,a.chunk=to,a.compact=eo,a.concat=ao,a.cond=bh,a.conforms=yh,a.constant=Eh,a.countBy=JC,a.create=El,a.curry=ys,a.curryRight=Es,a.debounce=ws,a.defaults=Mc,a.defaultsDeep=Lc,a.defer=nc,a.delay=oc,a.difference=LC,a.differenceBy=NC,a.differenceWith=RC,a.drop=io,a.dropRight=ro,a.dropRightWhile=no,a.dropWhile=oo,a.fill=so,a.filter=ns,a.flatMap=os,a.flatMapDeep=ss,a.flatMapDepth=ls,a.flatten=uo,a.flattenDeep=Co,a.flattenDepth=co,a.flip=Fs,a.flow=Zc,a.flowRight=jc,a.fromPairs=fo,a.functions=Al,a.functionsIn=Ol,a.groupBy=jC,a.initial=po,a.intersection=AC,a.intersectionBy=OC,a.intersectionWith=PC,a.invert=Nc,a.invertBy=Rc,a.invokeMap=QC,a.iteratee=Mh,a.keyBy=$C,a.keys=Gl,a.keysIn=kl,a.map=cs,a.mapKeys=Vl,a.mapValues=Hl,a.matches=Lh,a.matchesProperty=Nh,a.memoize=Ms,a.merge=Oc,a.mergeWith=Pc,a.method=Qc,a.methodOf=$c,a.mixin=Rh,a.negate=Ls,a.nthArg=Ph,a.omit=Bc,a.omitBy=Yl,a.once=Ns,a.orderBy=fs,a.over=tf,a.overArgs=sc,a.overEvery=ef,a.overSome=af,a.partial=lc,a.partialRight=hc,a.partition=tc,a.pick=_c,a.pickBy=Xl,a.property=Bh,a.propertyOf=_h,a.pull=BC,a.pullAll=So,a.pullAllBy=xo,a.pullAllWith=bo,a.pullAt=_C,a.range=rf,a.rangeRight=nf,a.rearg=uc,a.reject=ms,a.remove=yo,a.rest=Rs,a.reverse=Eo,a.sampleSize=vs,a.set=Ul,a.setWith=Kl,a.shuffle=gs,a.slice=wo,a.sortBy=ec,a.sortedUniq=Oo,a.sortedUniqBy=Po,a.split=fh,a.spread=As,a.tail=Bo,a.take=_o,a.takeRight=Go,a.takeRightWhile=ko,a.takeWhile=Vo,a.tap=qo,a.throttle=Os,a.thru=Zo,a.toArray=vl,a.toPairs=Gc,a.toPairsIn=kc,a.toPath=Wh,a.toPlainObject=xl,a.transform=zl,a.unary=Ps,a.union=GC,a.unionBy=kC,a.unionWith=VC,a.uniq=Ho,a.uniqBy=Yo,a.uniqWith=Xo,a.unset=Jl,a.unzip=Wo,a.unzipWith=Uo,a.update=ql,a.updateWith=Zl,a.values=jl,a.valuesIn=Ql,a.without=HC,a.words=xh,a.wrap=Bs,a.xor=YC,a.xorBy=XC,a.xorWith=WC,a.zip=UC,a.zipObject=Ko,a.zipObjectDeep=zo,a.zipWith=KC,a.entries=Gc,a.entriesIn=kc,a.extend=yc,a.extendWith=Ec,Rh(a,a),a.add=of,a.attempt=Jc,a.camelCase=Vc,a.capitalize=ah,a.ceil=sf,a.clamp=$l,a.clone=Gs,a.cloneDeep=Vs,a.cloneDeepWith=Hs,a.cloneWith=ks,a.conformsTo=Ys,a.deburr=ih,a.defaultTo=wh,a.divide=lf,a.endsWith=rh,a.eq=Xs,a.escape=nh,a.escapeRegExp=oh,a.every=rs,a.find=qC,a.findIndex=lo,a.findKey=wl,a.findLast=ZC,a.findLastIndex=ho,a.findLastKey=Fl,a.floor=hf,a.forEach=hs,a.forEachRight=us,a.forIn=Ml,a.forInRight=Ll,a.forOwn=Nl,a.forOwnRight=Rl,a.get=Pl,a.gt=Cc,a.gte=cc,a.has=Bl,a.hasIn=_l,a.head=Do,a.identity=Fh,a.includes=Cs,a.indexOf=mo,a.inRange=th,a.invoke=Ac,a.isArguments=fc,a.isArray=dc,a.isArrayBuffer=Dc,a.isArrayLike=Ws,a.isArrayLikeObject=Us,a.isBoolean=Ks,a.isBuffer=mc,a.isDate=pc,a.isElement=zs,a.isEmpty=Js,a.isEqual=qs,a.isEqualWith=Zs,a.isError=js,a.isFinite=Qs,a.isFunction=$s,a.isInteger=tl,a.isLength=el,a.isMap=vc,a.isMatch=rl,a.isMatchWith=nl,a.isNaN=ol,a.isNative=sl,a.isNil=hl,a.isNull=ll,a.isNumber=ul,a.isObject=al,a.isObjectLike=il,a.isPlainObject=Cl,a.isRegExp=gc,a.isSafeInteger=cl,a.isSet=Tc,a.isString=fl,a.isSymbol=dl,a.isTypedArray=Ic,a.isUndefined=Dl,a.isWeakMap=ml,a.isWeakSet=pl,a.join=vo,a.kebabCase=Hc,a.last=go,a.lastIndexOf=To,a.lowerCase=Yc,a.lowerFirst=Xc,a.lt=Sc,a.lte=xc,a.max=Kh,a.maxBy=zh,a.mean=Jh,a.meanBy=qh,a.min=Zh,a.minBy=jh,a.stubArray=Gh,a.stubFalse=kh,a.stubObject=Vh,a.stubString=Hh,a.stubTrue=Yh,a.multiply=uf,a.nth=Io,a.noConflict=Ah,a.noop=Oh,a.now=ac,a.pad=sh,a.padEnd=lh,a.padStart=hh,a.parseInt=uh,a.random=eh,a.reduce=ds,a.reduceRight=Ds,a.repeat=Ch,a.replace=ch,a.result=Wl,a.round=Cf,a.runInContext=t,a.sample=ps,a.size=Ts,a.snakeCase=Wc,a.some=Is,a.sortedIndex=Fo,a.sortedIndexBy=Mo,a.sortedIndexOf=Lo,a.sortedLastIndex=No,a.sortedLastIndexBy=Ro,a.sortedLastIndexOf=Ao,a.startCase=Uc,a.startsWith=dh,a.subtract=cf,a.sum=Qh,a.sumBy=$h,a.template=Dh,a.times=Xh,a.toFinite=gl,a.toInteger=Tl,a.toLength=Il,a.toLower=mh,a.toNumber=Sl,a.toSafeInteger=bl,a.toString=yl,a.toUpper=ph,a.trim=vh,a.trimEnd=gh,a.trimStart=Th,a.truncate=Ih,a.unescape=Sh,a.uniqueId=Uh,a.upperCase=Kc,a.upperFirst=zc,a.each=hs,a.eachRight=us,a.first=Do,Rh(a,function(){var t={};return Ci(a,function(e,i){du.call(a.prototype,i)||(t[i]=e)}),t}(),{chain:!1}),a.VERSION="4.17.21",s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){a[t].placeholder=a}),s(["drop","take"],function(t,e){v.prototype[t]=function(a){a=a===rt?1:Xu(Tl(a),0);var i=this.__filtered__&&!e?new v(this):this.clone();return i.__filtered__?i.__takeCount__=Wu(a,i.__takeCount__):i.__views__.push({size:Wu(a,_t),type:t+(i.__dir__<0?"Right":"")}),i},v.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),s(["filter","map","takeWhile"],function(t,e){var a=e+1,i=a==Nt||3==a;v.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:vn(t,3),type:a}),e.__filtered__=e.__filtered__||i,e}}),s(["head","last"],function(t,e){var a="take"+(e?"Right":"");v.prototype[t]=function(){return this[a](1).value()[0]}}),s(["initial","tail"],function(t,e){var a="drop"+(e?"":"Right");v.prototype[t]=function(){return this.__filtered__?new v(this):this[a](1)}}),v.prototype.compact=function(){return this.filter(Fh)},v.prototype.find=function(t){return this.filter(t).head()},v.prototype.findLast=function(t){return this.reverse().find(t)},v.prototype.invokeMap=tr(function(t,e){return"function"==typeof t?new v(this):this.map(function(a){return xi(a,t,e)})}),v.prototype.reject=function(t){return this.filter(Ls(vn(t)))},v.prototype.slice=function(t,e){t=Tl(t);var a=this;return a.__filtered__&&(t>0||e<0)?new v(a):(t<0?a=a.takeRight(-t):t&&(a=a.drop(t)),e!==rt&&(e=Tl(e),a=e<0?a.dropRight(-e):a.take(e-t)),a)},v.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},v.prototype.toArray=function(){return this.take(_t)},Ci(v.prototype,function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),o=a[n?"take"+("last"==e?"Right":""):e],s=n||/^find/.test(e);o&&(a.prototype[e]=function(){var e=this.__wrapped__,l=n?[1]:arguments,h=e instanceof v,u=l[0],C=h||dc(e),c=function(t){var e=o.apply(a,d([t],l));return n&&f?e[0]:e};C&&i&&"function"==typeof u&&1!=u.length&&(h=C=!1);var f=this.__chain__,D=!!this.__actions__.length,m=s&&!f,p=h&&!D;if(!s&&C){e=p?e:new v(this);var g=t.apply(e,l);return g.__actions__.push({func:Zo,args:[c],thisArg:rt}),new r(g,f)}return m&&p?t.apply(this,l):(g=this.thru(c),m?n?g.value()[0]:g.value():g)})}),s(["pop","push","shift","sort","splice","unshift"],function(t){var e=hu[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);a.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var a=this.value();return e.apply(dc(a)?a:[],t)}return this[i](function(a){return e.apply(dc(a)?a:[],t)})}}),Ci(v.prototype,function(t,e){var i=a[e];if(i){var r=i.name+"";du.call(aC,r)||(aC[r]=[]),aC[r].push({name:e,func:i})}}),aC[Jr(rt,vt).name]=[{name:"wrapper",func:rt}],v.prototype.clone=w,v.prototype.reverse=Z,v.prototype.value=et,a.prototype.at=zC,a.prototype.chain=jo,a.prototype.commit=Qo,a.prototype.next=$o,a.prototype.plant=es,a.prototype.reverse=as,a.prototype.toJSON=a.prototype.valueOf=a.prototype.value=is,a.prototype.first=a.prototype.head,Lu&&(a.prototype[Lu]=ts),a}();Ra._=Ja,(r=function(){return Ja}.call(e,a,e,i))!==rt&&(i.exports=r)}).call(this)}).call(e,a(17),a(115)(t))},,,,,,,,,function(t,e,a){var i=a(214);"string"==typeof i&&(i=[[t.i,i,""]]);a(42)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,a){var i=a(215);"string"==typeof i&&(i=[[t.i,i,""]]);a(42)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,a){var i=a(216);"string"==typeof i&&(i=[[t.i,i,""]]);a(42)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,a){t.exports=a.p+"732389ded34cb9c52dd88271f1345af9.ttf"},function(t,e,a){t.exports=a.p+"535877f50039c0cb49a6196a5b7517cd.woff"},function(t,e,a){t.exports=a.p+"c798faa51eef0bca252b1c0bfdf38c40.ttf"},function(t,e){t.exports="data:application/font-woff2;base64,d09GMgABAAAAACAwAAsAAAAAQFwAAB/eAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHFQGYACLKgrgMMoeATYCJAOCFAuBDAAEIAWFRweIKRv5MzXTbZ4gcB5AaEX80WT//7cEOobYMg2g7LtIpRWeWFM610p3VKqDp7DpVNI6llZAn9QLBO8svwsrnH0hczAe/LysqhbAmlRtgoi+r8uaJh6dp4gIscu1CX/hP/52usHddyglPI/+8Z7k5n3Yk0ptoKeOyi+MZaSHRUhqx+9dy5nNT3iZDoos9D1fI3yN6vD83HrbHzkXf2NjAaz+hxHCRvXGRikYZLlRqWBwm3GCYDQMtBFlmIRBjrABMfECseJErDoCAFW4VAZ+s79XtS+lbx6WtLvt1t/L6oclLJGTwUEorc3PT9Zv6v6VAr+tFbzryng70mgnnwCslqW1ALBMXaYHBtiZSniwxDKNN9+7WTN3PrPrEfS0+Im1J2aB1ISWfY869fwkv8mvIbsOXlWo+iIlMBAB/7/O19XvE7vEAb7lYSlPgNPUSe9Jhqtn/W/ZDjwr5P8D1ndIYcX/nDiABYCZcJQcdFKwAoBTAWjr6dhh7NhlateRh2nvsMyFrDVk8eknCXKVqXbKIXPmBbBjQQONtEY8QxYQ2AoW//eWoCASeOEL22/APQvEBVPnJ4EFR3hvBX1NrhbMHeoBw7s4EPgVplnJvqJRahsRpNfrEWAr++rVG5qLgzRSCNdqyKzr/aBzvEkVGzzIfdrt5cDiNUQEIRBNjiX0PHGbmgGUZppAOOxg4lQnAHW4cBgnroIdB6FqfR474bR7LhTrC9vbM//nletJIeBwkRSx91daznuMNFb8nvPQqrhhLysiOf481OddRdaRDf8zPKhgCrVke7lab7a7TorRZJiW7bie3+82g/BwPPWqtfqsPEmL1+Vyvd0fz94lo0ZOgj59+4n0vEiqGMVFVRFasjIig0nzgNh7o74IUMAUYQAthAUsEARoIz3AEukDVsgAsEaGgA0yAmyRMWCH8IAOmgNIQQRAHCIC9ogEMBAZYCIYYCEKwEZUgINMAC6iATxEB/jIFNBHDEAXMVVeIiwABIgNCJEZ4IDMAUdkATghjopOhAuAKuIBaogPqCM7wAzZA8rIQQUioQBIQ9GADBQDOKM4wAXFA64oAXBDiYA7SgI8UDLgiVIAL5QKGKI0laZF0gHQQBmAHLQekIWiHQP0AbjjgL4Ad0KejpHTABDI3QOkAy4AkiAfC4ggXwhIhfxBQAzkDwGKAX8YkAL5Z4AqwP8GKMj/AWjoVQdAMvQmNYsyAOifrGQDaj4g5TpkXJjQVawNQS45LMpoJCKDxpMQgpCQBP2LBFeYhF/hemUYEDE5YZCEPTNdoUHCJAgyHsYuc1YBAPoZLWFfQnAIlQ6NihZyKJyfITLUtiHe16Kvs8pakTsDDFbbAOjQhvOPBTquUAOOnQ3V3pTWaneU0Z6KMpiiYJE+LcrhZSbKLr8iVefNELwiNCfntMEiIpFdKOA8XLjL/WtItS5zYH58PKmWLLZRsk3xIce6QqgckzMuUua5UrG9xMTo3EJkaGyh1JRBZIlzdLTSCuJOMSrLTGoMx4AimqI575NKJInfX0Tk2nb7YVVukWrvZLdg389xyE+lC2BHy4A6KaZha4pcLIr5PEjgUkkqFACJUfG8C/KwzXu8q+VzhU+Bj77XU1DPe1eNFo4TjXKQ/FfhCUbmSbci0awm8b++E6zvS6+/pZK7JkkQ+RTONQNjTtdei/NaTjeFrTOsBTNJUzwho+xz3iOu8mtSTsi6xayQk9b4VY+Y5FNSRkgbBx19g4hT33VI6uMTMwaVsqSduGw1SqRCxsi1wlvH7ByS43WA3TjBpGdbEHk8u+zmV5GR7B7mPM9roPN0aat4WTzO68vi+fXCReGsZCjXnKGNFcKQHGNmL8V5b/5eNxevLFJtqkD7qGBDh8VNyGwB7Dp3B9epo1FbhdqWb8KCbdFoX1zYjOD0pEU7IysNJSplRfqg1ja0jdw8X7i9HoQ3LpWDNmmnXUzHtfqw1rEKaQ6Dq+kNsWxoj1BFFQ1DjtAtuOdFCAQ+n2fkEWALBXepuUHs7RDjlIeRo/Wklbdjql8lpBjp/ohhapaOzAkbd0WIcNaqWRFpMWlhQjK6qlNR4oQ1VTq0ZpER2spUaFKJnFEh1DWtsUUsSc7NeJpoys4k8903TskV42HyRleF8Qp1qWa5gbFRZDoJXB8lw0UNUWBOiZ/FnWlnGJ7QpxwpyxLtrGM9X123JRsfikmJiBCOi9HgBNDB68Am84qkCXH/2HMtFEql4lfaQ49U+LcUWpzpbStWRd/2tBFQraKKJsJZkKwCnyKxg4KVpiWN1ozZaMHAIKEoVaUg27CSkgJeALBBbzhtVZH5Lp9aw7oi1Q/aBh6wLl4mr2H+XGFBwivIVJukYduM2mqlphLsIUQCtrX7HXfILnO7T8FHvU6fi1R8Xjt2FZ3wdV+F0NNc9/ptVlzV8TLwZGjJOvPpdN0f8KWg0RFJrwBPwOctPCHL5BVMPRlrAUn4SlCpmtwmU+EsMnAbXwoaTkiaeVJRiKuY0BZtBsmnuNvO+a/xapnzXxcsEvenJWQCvgZ+zNJRdEsf2iFnGfkofTPhS4j8KKBqp1A6v2zgBe+6CqGzXtc3pX0nM8Zt84DOTApVguvjgyh+FVTYJF9XUfoubF3+6VXJMvfp0ttjr4d07oqSJ/3Zqecwb/nBp6PfjpnvmUO6IHZ09rPiWf8sXN44d/D1e6bHepGaiM7JyLk2kP+5hMbpdgBRATGlWE2lSQP3wEX61M6BNFyBJOyh+Sot193Vld13xtH8G7OFrhLGVyNVFVYaD3PeoM4UJIloWRRJcVHmPYr90tCA0QsJjNwZXZ/3fjUsElNDmkuLU0XCm8wXHIrU0gU+Pkok+7ihdcEbt82nSV62FRSXssJCANsKh9SBBA4L2JVYCXJYQaKp/InYe+rdAHQWJjhx8gSKaTzlIrMtIAs/41bo2hafnjk6mJrcZ9VoMBRLRMKugLk7gBToCz3c351+YkscvLU7TlxhUIGxlg5T5/BDhWlFtBapkeiFrVfxfarRoTll19CJ3JPp7G7Z8Fv1JtQtMpEuftS0Oqm/dxHQNDqxdG+0TI73pqFG2rmposuG8ERPfPZesU5VUa/5uFnRvL+qC94bWxqdi0zQCaOi4B7yjtBBMWevNt43ZDuDi/PjxkgG04+xjq/FGh9/YEsEO1evhDjv1SiN056hK3ESJWu5XgDjz5GxFZJLGPNTN0jFcUjGbmbdxjlcSmvCjVxFmUSJSu7Gc/W/I5yvlS8UftRMa9nJ62eYyqStbUJUF/dVVVXYyVoiRrYqoaBMMG4lSDBy9TWwkPt3jxqh2bY6VuPE/fWAbr0Jm4eMeCqcSSf8cY94PMlPHUhHiO/0OmwKW9IGv14fkNspzWKZKAOwCp3AWvhT0SAydVpsAgn/3QWwJvwJNpZf+Rsaj8uhuv4ZYVq9XEEM5s+7EcULwJPF+hxev6zbIOtkFNJ/FUJERRXSSkXi+hebcGzl7D5tbmDdMKRrdt9mTidc/0hJvMaxQKdRyLGgVrlgYxgHq7IhMFCmWO1LWOwK2ckIW1gtrjRScgTW4QqzLpWyK0weg3SpzZYCJetcSPFwpQDYJJLFUV4fulvGROcN4WVxUSdHRcoTv2+MCOPLSNIQOYN1ZUIwhB/Y2MSc/nth8ZEFizt2TxfkvVKpdHs2iC8U1le6dNIS+nGXni+kRZQEuXtJP0K7mBRrAEi48qvl2Y+dpahplaZIGklkeTw3uy1oyXD3P7o42G3X3zgc5iDjZL0zHHqZ2XATkCNKcKf1LSIpCiWs5aBLzPMXWG3QIK1RkznDOYYqOPOQlSsf+irfjCqpqxCQRHoHxHU3+y6fmss8SItJ9uocsUiJyGojMUs9tGWoevvjphLxpIlisdt5v+fYTY83BZNbIvsMnH6I4ixDwzdevdlxRZKtYPOqSM4ZK3vVHSxuAlvb/i5otLj4a1EndTQabE1Car3dXNy0q0MQKPL6e1SvvxPR2ItpdSYWXf0NycmptZ293JPH2d1tdzKwXvAe1sE00uGB5MNHgurDfUV5vm5ElldGAfoB+wYafQOOtW2DAepSc6U/GEiHwmZbGG2/ft3o0sfDBmCL8KuGgyda65875aKen5tCzE2cpLgyIszegL6b+eYYynB4ubDDV2e5UAY7+44zVJiHhgmfRAeVDzWspbXqxlSreEbztBTPls+sls8WLest9Xw06jnjLM26NIU1pf9GTAWT1XCMetQgBQad4c8TWE+AtQftnyQJdTsbI5+v0BnIvdqqk5vgtVqF13TKUYHuyvS4SAG/wjFjY8CfTwb3ZUivyRDWjGBVAw2VLyk2mM2eUdzufsaEXZQ+ar6AAPQ41yngcM7jiA/tAtpiddRF2bZOxLjcuaNDmpw7PJt9MX2WXcgTY/K5rMSSoZVkLFxofOUYkJy4U1I5xce6JtTV7dpFi0tpvtrapISsOOf42J07V2qcejqb3SyhbQNmipLTIyK7jGvmUTqBMWYss51unzU8E/TXjqrHc5dpkb7anlEFbWRs8uhxtOzxmsHMNJBeqL2GdAhHWjxSqzbxSE2B9tJwz1jS29sQfqPpG3ar07PKVCAJlQhMqzzLKA2WDZSpXp3a3iF80dz0SDWVfXxgcNkK2XYkhgaq29WyxUXeG7kHNNpEOKZGHdz2dhf9q/zZqxzYNhuiG2epLW0CaLzRMSFM1S+539ERVD0dRY2emFBQlQqFMqXxjz9ZXQZWsJ48GXnyeO72PbnKg8ANIj8k8Al0gPPEVm0s6J9En4UFJz9DHOZ5T6YTpOZNi+B03TwfhzvcEf/rUZ8j4CzNQuu9Hub5pEgLuUUEN7JG4q6RuqfZoIcqjxjBceFEciNiWsOQsGdQ9YfNSeabg05SIsLy32E7772eO6UxSps2LANuM7P9lQdZfLWAdVCQugrUTHunx+j/bBm7nwo1S86KkbOqQ6YDyBV6coxcrxqWvvvjjyeBfWDaKjjg3dbX1Sx+tClsu7WCajaFRWHz2YATAVWvMRRO20xv2jRtG0tLbN4MgqmZhwO4A4jD/BXHch2QAcAuVSH/13q3WUvaau8D7HUox+efQh/m4UQnjRNYT/FKTpP5SMjYkmLYGT7ShHHBLC2DYR9fGS3D0dSh64n9J0d+0xEyjpya2tq6PN7wBEpgXMIDyYbQOSApZOqF7GrcR4JbnJCkAS3CVqnYC0V8g2vSYsCsyshpk/2INu9lDY7wpdiiYiV970syrvonOnL8r6MTY4fb86Xxw63bK6wtTWlt7tLnqlLHHGO8cN5zmkyIN84hOnJgcpTNOiGeihfOP9JoVOiRDdwxrYDgrJFpAgggs9yynAoIAVyl8+zhRWxPoo9ZzVrOWo0BM6q0pjIyYRR9+dP6yojEmkq3nrG+cMYi8jdGOLyov2d8I+HgJ6PGU2JYUezYF91tFBzNimH5yvrGgMEQnopSv1HMP5h/e28RZvFpfnwQgrf1oX1NTcg6hGyV8f/1CPpj6OZpiFe3B3AWB+Vd3JPgu1t/BBlRHLCb0+7F8Go37QiK6LANZsrEckc5w1pgGo1/S5/2jqQRwX9wXSwzyXZMzhAqOV6xxrlRsmVmj0Kq3BF5ECONkcRIZqTKgyHDJqEzUrk/giRGmjwIWe8Otl1Z4I11wi5RL8RbaC1MUl7hlqj98UZ30rA74R+L0TDyUlcZRa9UCufAeNONeLwTVAo1wRD+yZosdItbBgXfIWRbaDk0t1I0zCgYIQdaRJpHciNdmdA1Kh7Bw9fHCcg0n4S3fN+LLcVgiwwcEH0HqMjJamGa/rrOwFF4phmPco/P5LNjOHL/0Oh95XIlfjRGtiHa/y8qUuhHgUbIR5S4qxTsuFUKkrJZiKQj4Mq4ELVrMQPjiSW5LpsnzpO7koIR4yVSJagk0uAjdkcc8YaVIPwLF+pcFAmfQ45h7mR6EJAUkE/Ug6+sVSiEdwouYrDVwWUALCLoUZQ8OeENCsDbVOpXDtSxOIJyDj2GvX0XR1NOrvziP9BwSQTWAP2M/TRfRED3IkdUqXAAQt9jPy7YiTgK+HsLkZTRab+4P/YBBYlxKSqDhBc8fbV41KqAyDbUD/V8S+bCeIPn4EEKzsBVkAmwjhBvEd6fH0+Hscrf6O9585HviMqAZODr5XTndnoBkUnXC/Wc5G6H8bBlx4se+32/gsj0xx2zpIcZsQ0QhvtWBxYDw3tgOnVCRBElYb7f6v4GeEEc3fBUfKBxzNnTKuEPZ8IyDV0e2SI3m59tFEjeE5rQv/dTJuxkmOFiB7JLMo/eaDYieqGZmED6iHLlqdkY17U0Z/zdlzcu8eY536ASbtJMA+yAU3hdZJ1fXQQlf+BPfs7Gnc2I9ISiVyYl+6UMvQy7+ETxj6lB1Md3WrE5R7qXWJbICYfgfGgvI+NEdFqwyV1X8Ix8uZlNIE7GZebrUxMlMqsyLRHfJLHa9TTnONj4JnwTTZn4kaVUR0v+MhEU+lL0N+8o0I1y1221mzt5r9ug20Cj+6D76X9EkzgrA5hd6odaB9hbLhZ7uwaKTZrvO61ycmhfc8Zvm9/7zlSn5UH2h15QLjJDY8KCvDwSMh3bK2xIM2QQ99iyeZpmZWe5pnZ+opv/cnNalHo4pYs6XnL51nZabTW7OiZGw9J8/FhNlnjCKhIRvsVqnHOXZ2jmAsV9NKE6E5xR1MZmjONMfDqhUi0JZ54L78Y4zxX4Gdfuv+txl3b6z/b30snn37d/dqd7gzjpL4ICh45rP34DhUqpVXncTKWTYta5QWEn+l7X7KLAqeuK+nhnX3d0YoAIVdfu0NhdzfEVhkXPuk90/9196qqgiPawmFYFXdsVF9fxZ0KsUdGz1hOtaDFXjpr/833elrPfTmxqs1l1+e7lvLDp1r0lYVtv0+Ze0UzTW9X+5p5ObXu16tLTcDL/tneP1oD+I7R1wVct6SVp0BH+s1wyi7b2xfE3pAs3XhIqilbDJelQE99bzoq932q8sXpG4Zb9pi1ameS8uCSiZPeYbbSzfHXU0hHF4uiyCJfM472Kz3Yr7wZk6Jekw/xXdi911yqVBbvDotbSyGe/5z5zKtMrSaOb6Q8lytfRrP4/qyhsC13tqLDsTVfwblMI/KiMHkU0GlPy2szAkBDdFksFnI+rDn/Th1whAgiqdJEJ7bZaBEaAAEa04VkRWAAQOEwVPTRKG9U6pCsMbKdwWixCOBoOQpa3HX53YljfQ7A95JwkZt7YJw1wVL9KfaBAmp7DXdhBtMhNMlw0PA+5A0uHi9+7Ag9bo1duKb3VyiXwt31GmANG+w34ihldlET0r7qJl3AuoaJzqWdGORcSPUlMHxpL1eX/+3irWa0CwyiLXgbwh/15hQZS/VRpqr7UoJB7jU+Sk2QkT+4Ar+iL9KtKohJYudcFM7IZObifvM0r+ir5qpIWGkgMsKDsgSl6w/0IOUN0XKToCVdWiWSI1+EYeuIda5CFd2jmFSYSWkCIVbQgWgjCTEPogeDNBhq+ISnfUV6qEVEoVRnEIlNxIIuME328yiSkhUUHsa8BeL+2brOmbstQrM6lcAksKG/cu7thX/3rPgBP3ERvZlI9tzTGHEgcOFTPoHwQTuX1ARVtF0MwK4+MvOsgE8SC9X8gWEFMhdOffocFaJJchuN2ZLxIUhRVChhrXSHbW1cxT+cbxi7VjF76e5/6KYs/K2CndLFtt+48my1nQvgzfLpN91PLgVo7HuLTvXqXtOvkj+5vq5d07/+76/XlywMYtBqAwwKaD4kvVjFpo/R99EkTZlWtY+fBY6x14cwV2zo04vrO3Hx285/hrGMHOx1X1DNNJun7aA/yNHUcOkoWNHXWO4ptK5h7jscOdTiad0ry/fzy10SqljVptn+eoM020LYtMFkESKsk8glpBD57kxgjvBHKSikfuAf8WY0XWBLWhUaW/4EZS5WQqny/PAQJESb6rz7wcEDAH/mUJAgDt+zIAqr3AMDVu218B3rvD+HQwsuaeo9TP0dibKzJaVXdjY0NVpB4OQwNk1PSsrNN1FfdJeGLaqJj5SILG9d0P2nhPkd+5SIJPwvgIH9Ujfq6CBZpXKiL811X173f/IBCZmkWiZmRhaot1SDBjmXDpUF08DIUXQbx3X1w0pADtAOm7iIbgocgdMquzdTiWBfXO/xgb1yAmxd62tRd4OEgRDz1r2IZpt3BXQ/T8bBRuYERyUm3NeDVAXJQGzFI/QLHpjjC+oZVhjAItM0vmCzIV4sWMRf2/6KyuuGPVEv4CdW1CK/uLANVvjDHgRVJe2yjRUN2CZd9sr/0of7STpvi1yHOWodJWpOJaGJu/h+9MhcdrbDsdTENdFjLCFrCQK7Y0gMYgaLadAt0ooK/NHVXfZV+KQqegXcge8CeceI6b1Hi0gUqB1uedIkO1ZUvH0KH+DZYrCarAM7oMgmEB1PvHvz+9+DdVEVzxTRZngzIaBWVlS1/VFp9XLmyhTXgEJf9/v/t1NTb//+9HR8vby6XGYvKrXZVv6f5dBItPwoH0Qaso9XVaerqHR3r6xvq6y78SSC0EAlZrjt2aNIToGopsKanmuOl+vplzBuDZMzMRMGwxmPLecvZ8r6pJFu+gWdL+vs1/TrQ1z93X58NlwHJSKYA/FqUG4s4HjyXpKFpZkgkGgkc/YUgYJGIpqveFJu9S5o4UWz+sAqxpoFTHgIELrHwQ/BPgUhDxOQhv0fCTKoE+U5OLnHkh+op0YDy3Qhn7gM7C2lQdFP5kEwAnMnWwEk33f9JazYenXmLR5FnA2ekSB1ye3dckt2bz25BnSC75Laalf3AH8DuOdl40q0IiVBGAL2XiV8tEH4wD+E8S9qBPJ/PhMUwk/p8kRAWLnqeVWdpgHD+pdqZuPaN4J293JK51knWHKFuK31hfIWoh7N2cqOwfDeTZEVlro43XGBlaLLzm+mckE0mjDUeZCdhdMVcnmpYSN1Xe9fNnyEU2fDzlO5/8lncNiasdAgeBhUq3rVPTvpd4035V8/wTEPSBOaRSCQIPp6KpqbQAw9lsXy6q7vDcCXrVx2BF9h8OLPNIJThNTfTPJrFSRTlX9+TQ0mLWrUTpHlhH/ljV3WCiJMFgQXOiwmJZonOC60LXm84UMLEGmj0o2wybPVadOfR1JB1nikNBbRmXR0tbm72Av3zpAv68eGZ3rQ6QjN9/bL8Yt/CKFozcMS8fcbiAz479dVqDEZN488IaJ7dd6zODytPYH91yMj2/BUSg8JxYeWh4VcHje3OBCvXRv03RjBTn1UlycF5sK9O29X+7dQhjFB9b3TD/dFnlmMJv5zzu03/Opc/IwcyIJ8BJrvu6aMT+jUZssF79A1KImFy6t3k//9aK8rls5Nf0I4pM/bf/yffTU0SCc2YIMmmD7gFVQiPQljzk6cJatFJO7OAjNQ3vU7Tsli/7zIj2wT231EfVu+17BR6+B2WG8RKCO0GI510RbWoSKd+2S2SzPsImiBb4r8HqY27W/lO7dIPSfGzDMF36pFVkCwz8jQkKsN/DXvO+HVZ2eZpGYFCAMdFpW73GMDeY70EFTQFZWaeb4BYtv3jUEGmWU5A3mXfswlaRYIudFLLv1AiDrii+dlimHGnow1Dd6AJqBNxXyaZu0DLIE/88KYt4oC9WLk/9Si5Ryv2io1WEC0f9JhXi32uoWW06FzgfS5xHcZcY164h5CI72NCh/kBnbplPmRtXLlzCJITs3hKjDFsLEtqsLU2+lruwpEt2JPGIHY/+LdgX2Sm/g3x+EGXMf//9+ziuNCvkZdLnXb7ZhL/yXbE07dLxuThL1HtxBERGgr6z1gxwQwS+MLMXoZBf/PPgLNL7+T/b/G8hN/yINtzE+QO6tKfrymmhkiIbkH8/+6QDA+6UcuUZglmnLLtptEcUbByGzRQ7tktwnPBGCiP6pbAPcWrJ1LaKrCJh6hxGLoxm6vdIhL+UED51zCoL7ebpKkjKigf2M3xqxYW57nqUt+vUQRDXzWripxwm5+sxZmLoFZ7hYWJpN8YSgJ9nCn/Zf5HzSRcTYbj42M+IKMWUSDPw5NZW7UqXfW+rLXDlKTqVabobBjN+pfRqMU8D510G28UwdBXzSo5NznhtleLM2cHtdozKyxMInv6jaGkTDhHknP0nP0fNVPJL1w1GY41yAfOWjNtiDXPwxMxra0o6vPornrfNIEpykjV4xNO0dm/jjMNs38ZeQtrZfmwi7RuhuDjepbhillej7JgsGTFmg3bP2ki/9HR5IRT/iPkh7FaqzearXan2+sPhqPxZDqbL5ar9Wa72xumZTuu5wfh4Xg6X663++PZq3efvv36U+YonMS97sSrcdhQqEFVFleNmEk32LMMsiTyJ1yAXwtwuLPyWEDqHAv1xCFHXD6Odz4rOVKK0xeLLwfErVI+xtM1GTVIU7kYHnKeVsAZd2OBhvatiBcOexoj2eGF4TitDYV3rlRbTjprdO90C+Q17Xu6bZEaYZhRLr6sS6IcqxBCaNXu4SLyOHsewuEaWtdRSjYJfFlu34CVZplNPv0gySP/QWckfPYT1SEbBPxKjPcwEE8XenLgYvnCY91kwLaKOp1WnllUuMR5I8GMM6o9NjD3WNqEg0c9uojZ0nCLevIZezp+7mjUGy5t/+8THpjF0BsxOpdJ1bMCLMMh4e6A8QOkDdQd7lgvKGm2wiofKjrLya+z0R5oSwlTHpe8n9GMOBz72SuXsG6Iz+7aTZH9M7/a56GFynLk5DAG3FzFnZa+zfgp32EBc2yAfb57KGaHWKMWvHFjOheBGdOxVqJbWDBMqdpll49WcigHHKlLeGRedaVHagT1IB4BWk92FU9Zz7taEuqRObkdOpzOUY0ctIp66IB8WmnZExtZ3r16RPB1jlKSR811Y9WSu1npzvkuC582Y+iQbQMAAAA="},function(t,e){t.exports="data:application/font-woff;base64,d09GRgABAAAAACYYAAsAAAAAQFwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAARAAAAGA8Fk3gY21hcAAAAYgAAAIwAAAFqrCwOLxnbHlmAAADuAAAHXcAADAw+cQjsGhlYWQAACEwAAAAMQAAADYo9jxNaGhlYQAAIWQAAAAgAAAAJAfdBBNobXR4AAAhhAAAABoAAAEUFE7//WxvY2EAACGgAAAAjAAAAIyjm7AWbWF4cAAAIiwAAAAfAAAAIAFdAQNuYW1lAAAiTAAAAWEAAALHIP06PHBvc3QAACOwAAACZgAABCm0UPbieJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGFhZJzAwMrAwNTJdIaBgaEfQjO+ZjBi5ACKMrAyM2AFAWmuKQwHnjG85mdu+N/AwMB8h6ERKMyIoogJAGT6DHZ4nN3UyU5UQRjF8f+lgWZu5qlldNYWHBFnVFY8AARnxYUhPoQLQ4yvgCRIwlOxJPkqhDeARXuKowlL1t7Kr9N9U7dTt77zFdAElKQmjdCwTqFvFJ91tzi5X6Lt5H5jMa/fV5jUvJYoxXTUYjaWYiXWYiN2Yjf2op7KqZq20n46Ppg7rNTrEESTZs5o5nKsaub2qZmbmnn0b+aZrkIrmOGLxrrGV75pfD81fmj81IBphrjIMJe4rGeuco3rjFDW6mvc0H/McpNb3OYOdznHKIPcY477zPOAKr300c95upmihVYe8ojHPOEpz1jgOeNMMEC79uYFL1nULvXQod2s0MwYXVzQShvo1G5RNJ/x3f7nqyN/lBb+/lrMuTDViShMFSMaTLUjSqYqKkWmehLNpsoSZVONiRZTtYlWU92JNlMCiHZTFogOI/9Hp+UuiC7LXREVU2aIblN6iB5TjoheU6KIPlO2iH5TyogBU96IQVPyiCFTBolhUxqJESPPHTUllKiaskqcM6WWGDPllxg3JZmYMPJzk0Ze75SR1ztt5PXWTNknZoz83rNGfm7JyPu9bOT9XjF1C7Fq6hvilamDiNemXiLemLqKeGvqL+KdqdOI96aeIz4Y+f0+Gvn9Phl5j9eMXOcNyydYbJv6lfht6lxix04yuWv5RIw9I9e5bjnFqWz55ExVU9eTNk39T/plOglIW6YzgbRvOh1IR5ZP2XRsOjE4mDOdHRxWjMk/Orzx8Xic7Xp5eBzVlW+de2vp6uqu6urqqupFvXd1a7G2bqlbtmxJNpZBBkMwGAwYGAyRDQMOa4BgbJGNxRMIkAnGISzfQIZgSDLxZHhhMTYJYYkhMMPiLG+GIfOR5bE8tjePRFV+51a3bBnZycx88+drqW5V3f2e9XfuLY5y3L4puotew+lcOzeP45weGByoVy0zJkp4FcqDND840AMFFcziwAhUM5CGmp7Xbbzgn2KJweWDiViynHwddvWtXLuy79SJq265amLH9NSpZM8/KO12sVot2u3KpdFUKgo7p3qO68H/ZZeNj1+2bMqdIlOrvE54lRP2z4NyEpfgilwPxxk4hJPX8/An5mT4E8LXEdhG9kz/gk5NT8GtB6b1ZZj0p7Vj4qoJ982Jq2A7G2+VOwX1w00OODa3KZwjxwGHP7qKPMe1IW2Meg9IggpZsGIaiDG8V0ehXsV7ndzxAyrpAa8SEuRRUdwrSZOSgTdDHJHjL8JeWZfoD4Q4lhnSXrwmJQnrjMgCR3Dt79BLyTu4dpHjGmDL4NCr4N+6vTZc+jfXpdhjmtx6vncGmw6r/7/pV6nOaZyBU8wXRFOPWbV8tT6oD5QpUoxe6ObChhEmr2M66F5IvkojRvhAnttOvsr6wbU9D+9yMS6N4xZ6AKlYq1p2vmrFJLGYV6FSEGNWtT5Q3uWMOuXRUu8xKlkbNhVRd+8MH9OX6+4e6+7+5/LIUaPlRT1GWiD9I690j82bN9bNIR+5fb+nt1KLC6B0mVyGq3Bd3FKOswtlxs6YuL93f81zciFv5huVEaiUK+VeUq40qraFfxmQROnhTFfXwq6ujGaZGcuSyZKk+zhZ28pUrVjWstz7yQp3x5uJXEIksqAQ0bE1ElI1Q+0MZvW4xaou7NqA7WM5M0XmJ92nSVcz8wJsb+Zi7oklPlEczahaQKN8Rs2JkqJGOtf2JkwknbDP3beZ5+gXkH4lbohbzC1HGSmiVKYhloFhqI7AIhjoIXZM7MLV4XMdMy2TWiPQQ1SwoaxChuACwV84EgDEFhXo5ieKw4XCcJHdjFJv2Uk9kXL85Prs0naxf9n8qOZes/+R3CwnDSNpuENyKhpNGfsKw4WpZg9Tid6SsY81nkqWy0myXNPnL6uKHUfk3Gu06Pxl/WL70hz5XzK2NlLT/7N5Z6KB/NvBAx1CSTGYhMiQb6Bg4BwrUB5oQKVetXFdgwMNpprwkXc5DdQ0zbtY62KJBjcBPsG2XPeKFd2UelcntM5mwY34wEq16cerpd6rruotVZvjTdHr6GaUHAVlG8erNfJ2DSSjaKCK5+Fh75dbFkHHki3eLxf+5S8v9CZpbfp5utmFHTvIvr/xnoSR6Xtv923JE/TrdDHakQLXwVW5EZRup96AOirrQC+UC6i8uAyJihkC9aY2VyQbKsVBvJkxaxhsScgzOWRaNVC+FhZKAowQuCQa/ZY+qH+WEO9JgZxDaEgjvTy9j5CzHmx/0PvQOGXE6dBDE+pvyXNu2Fe3DzA1ziQCLAF6cXQgel80ehk23y2I3vOBiMKTjyj9FvBw1oOdD3rvH3maVg0uD+l946caPkM51B5u33vkXtrl20bF13qbS3FZ1P2aWWzgJR3mDqsmJ397qH/aNTk5uWXWxc3Q/1U6xVlItyNRwAuVHoImpd5wakIG0MioqHpgonDbI2QROEah3AuSCl2+7g5DA/2DlWU3JudM6rGQcDJ/4/MXRFR4IAkPqJELnr+R9y4/7cErr3zwNG+qFtTpMRbVg+epsWhkVRfVDZ2uwAz5M62M6BTfu/13NwAftqWpKckOe9PX/e4hJHrjzcueurWz89anLnvzUvevQ/JvxuWQkY1+SQ7Nfm7ay1fodqRfgxvz7aXUg7LLbKVvOW1cVbk4w+0GLs63p741RevTaMmAMGOf6NQ+LswHnaQQL8eFpBPkw/s4Ix434JPZwLK9C6x0rpxLw/ZZmcaf7+KMbCWXq2RbekifoEt8/jOu21JFwEsDFe0ICnUFDaKIdtG2GvgGu7es2gLP3HDiltjjbcetHEtE2x6/4fGxmJFqu+G01SevHsWuNq3Z9NGm0zfFf5ZN6POPW5l7adNL46etPumUTQa6wvGfcUi2fR+hDikHyVw314/aNMpNcCvROzPrXNOLFOXMYbLmX3rRLjB7XSkPNnxrbdWqDaQwq9UoouSgUWy67pYXMGc5mY3EcN/+OJ3+OJOBjzIZ7+GdO+G+UilaqeTSVlTLhHQjmcxnVx6V7lxz2549k/NCsXgs5CfzEo5TdWgxrmiapelUcQxXJe+vWLHC3eDAfd7GfExri9kGjeqxaDysX2AtGgWpdE+ItbfNUMiccPrL5XiydLJqaZqpNeXmMbqRLsX1M6rjnDMwAuUKSk/VXxqSXcb3cqOOIg/76ieYtXPWLVTK5lB64rrasgT+lnnT3nTzqXYtWTt+3pkduVPOL5v2G/MHj1p7xplnTXj/DvLEWWeesfaowfmcimPuod+jfVyOq/t0Po1by53PXcZdyV3NXct9lfsatxXnUq4UykUcuYgSHLPsmk/nUajWG76Nq0jFQi9ihwra5lrVRipb6JNEllPuQqnBNrUqqzkozUi1ExNttLGi1TCL9cGBCvZVk2jRaFgGNctSQRo0KHos27EFsGoS+izkrwzSAE6iITNXLSDzyS1CjPBEkkUl02VpvISOV1YlEiQRkQqBRlQICEQiCUXhaUDRvKtpIiZFlbZiV9YsBagwEcGZWhZphIn7EVFI+KV30HGoJAA0UJJ4vj0QkSVeSsD5Oe9rQJ5X3Cqsk5S0d38CTs4QChd6b6cViU+D4fbCmd49cFOpBM9GwrwA0JWJ5YJ4F4hAFENUI9Y4T3EQxQ7zPBVQaGLebVYuwAsdqUxXPCaqsmNnTDNnJqnClxA7lKimSLCTv8h7Efou4uF478VSQKDt0OdmyEO6e4L88+LP4XNSxns0CYuTOOiYN52OiFISqLe31OHdiXY25OOu58jDiIpKXB8ih+XcGm49dyG3kfsichj520ANEaUY8ha1mjEV+YQ61Y+8aqDTRXcr9SPH0LoynsVsyzHz/ahAFWN/gwEUU5QOye47uFWx4LA6EmsniawdK7YP0Rc9RL1nhY56O+H5gNNfEfiJoCRIAUKUeQofEODfQ6JIvAm4X7VhgXePBOTZVkVeaI+nOoR2zGJ1JU0zvACrjS59tWp7P4Ezsegn4YAI7sfwUaQNLvLOxpzrWA6hnhZp826Cb2LOacl8IQEK0SS7LW1JmiNQSVVFYllUCahanorI3BIIAbXEsuGLMxUVPpHPJxwtLFLL4hVJU3NUoDx1CB9Q/exftd4FqfkOU/ysCqqAdhgtAbdvmn4WsXqKm88tQsx3GmrmX3M7uJ9w/8z9H+RcsSD58KLfV0xm/ZhxYAwpSyIrKBaQj4gFMb+/WsdiZktMK9ZAFaKoQs7cHv5D7WGm3UEDMx3HlrFDNK0xsM+kwqjUfZPdwtfMsNlzspr27nD5v1Q1CVU7EpR8WlNNE8NUyku8RlDDkNg8lQhPqagI1CI2uB49plQiU9pBzXg1I0kFkVfp3EbU3XKoMYiQl4IyDiIh91EW8IkKkkKt7znKvFC8OMaH450Fx0qh0p/n6Ee3dY6t5wN2qdhfGaqkwgoAT9c79rquvtVf5JVMb/ei2jHdBV0lRKA3oVVQ0JvEKyJKcJCqAU1NdRytqACEzU6S+AAlBKhiEWI7ZIUnBQ5qEjM0NVE5TAPyENYNRiys0exekyRVTrUfHdCIX1+jAVGQKAU+aAXc+6TVDT2SUBwpiCraWU+ng9I31+QyTrTEi2E9WRxq76t0ZtssIj2/sS/XsBxRjtiFwbGBkWq9vYTwneHi79E9dGKWT+dsvTbnb+DE0RNGT9h0wh9PPI7eNn3uJy+uacP2vYh+qnGQn7pglp/6cz5qcOC/wUehh5Iqg0ajik5KwlaNP+Gj4E/7ptH/mmsaVxLLqDOeFKOnjwcUVVGWfB3+Mv/nfNPhPJKsDQgUrZsSx2IiRnjF8G4z8wFebE9luxIGCohjoUfKmkle4R0S1hyeeaRnN3i/xp4hv4GHJd5eR3Gg3U01PdLe4l74XCDtPZqAJUmBh1Hv45ZHQj6Kvi/aTV5tycRCRMgYoYOZHxRaV6VqM8PjM7LFFZ+BvhmoSSpBy2IzAFpkoSDioFY7unt6M73GG4EnvZG/6+sBClESjzkdSyuN/pii8gGehuQ2/mY+EkK1EKiSjaYTy1cvWE/+njWc3kxeaTS+2WjcMTT0K9Vsj5N5sUjvCf0Lj5TkWHcsgp47EiGiHuuMo6JQ8dgjh9fUvGv9Jn7MdNC6ZsdMrfk5ZrG5Prw3MPYTPjFv76lz6aQ3MnBuuOL9oUJXH5gUzii+fv0P/PSBivfHyqmtUZtYfTP9F7oOx3K4Xo5zGBrDiFNCibZsBJDNYALDjR4UA4ymZVKvQgPjKlSG8gDphO2y7N0fTAa9UELXExCJ9iThGyyS9P5vWwlOBZPnvV94r0CZV73UFHRNGYPGi0Y3tkvJsDrI2i1ZEvfei7LoEXv80HtLCAveLzBKKwte+5T3ylQ0+lK0zni/b4rnMN4TEXdaXJLLcHkWU0oVtAIwiIh9MD9oYFoz86Zj1gYBL8dukLEtd9992Rhwu3ZN78IfHZseG6PcmHd0LgfKq6/CD9yxsV1+Fqb4m8bbT7u6mvK27026jSY/MeagLeFYLIQYxLEFNmRRL+qtManZIJPbt3vbyOTAtlrNHWBpjUzW9hRganJqal1tH7dtG9mGP3eSclhjXa0GtVqCC/qx04t0w6w9qH5fypdzJ2EM04OAPoOsaZRb4N7fiZqTCxZGWoCGy8LQkSEllmsLkiPMLUCne2Jb0qwvSFlDstamhDJtStggF2nujeS6dNKqL0xY9aCWUhRW4K5WI435bZFUYqERSKth9HDpNtkityjuRVTDsgWpSCq1QAuktbAkYg1FhimlMZyw8LpIZJ2HcskYWHnv98Ar9QU48sL9BQn3jTbsoDFfVY0uxFJshEAoF9rp7Ly3VRCJdvqD+t2zbR+fR9+iD9GFXAe3gBvnPst9nrsZaeXjkJqD9ruFSkgPYXovFQXEmWz5BJcPDKxkGAzxA6VyXZh5K9ehzKojLnWKrIjtJmQI6wsJiHF3TajF/CjWz8AGDiOuv5uQAQHjRJ/Sw8C2AHeZstNNLbiEIhCwC0lTznZp+rxF2f54QNa9r2B2bFk506XL8hiZlLSQVcEgM2AFgmEq8u4jVnvYtqx2kbfJQ3afEVcFSfS+otPeYnZRd0CSko4lm5G2iK0xZHuJpYfLpmxWxkKSFHLcTVJxni3RTDRsWOQcqWxYcS2qB8JWCCHntwR5QWUtwsyQzge6F451RmS1Qy+cLdB0SpbnDac7+mEoGKKS3eNQBJg4Ocn8vGh1l6mE5rXdWyKK4ZDF82cXF4RlvStj91YyIi8FMU9Y22bH0qLQW7H6jC50qWrRisZo+XHLFgNFZLFkyDHO37feN0XvpRsZNzE609k2+j5vDYhQhzDd6EmuS+gn6gnNeoSDe70/eM95H0zBx4S6LvbH799Diba0FuN/dNm6v8lTYaZfH6jbs9zGdvJAqVotPbB9O7sfS05yH4Dt3irC0a5qyeOK1e3bq0XClapTJ520fdUq/J/Z255CJL6Gi3BxjsM+a61h2AaNRHGGKA+1fFeGTmQ7O7PuBj2rPEVvmX54ibkIo08a9XN/le2MqN7H9BZ3YnVbtkWP3fQJOsostIGLXEyvnv4CHZ3+gm+zfV/B9tcCLAKHIq1BXso3JIqpAWt7X+2lgvtEmlyYPuYVd2eaXPQ+Eb13oOE4jveOAw1/3i/TKtq1NNfNds6aG2M9MEjRJfqGXwUNRZvhcIrgOQsNVIhRAKNRJwtkjf+L66VoJEiCuiHBe6LAq/J9a8RA6LPSFZTXxLMXnSWp2s3epeSywLxgYOc6gciaTO6RI+j6vFExqoeh8D9CCXEYQQDw4R9nd6tpmoZJ9zcnS1xzD3EX3U0XI3IzuQLX5e9Xr+bWITXQq+/fl9kPteCQufSQuQ4GHiJiN6tRZ6cHVh1DDNRVwSxaftBZqw9i1PBIvpHPN5awJF/o71/a30/Ozw/lckOLh1hWsa9vvK/vu37O7EreTbkc5UU+m1u6qcHL/IIvwPHpdtMSiyLEbTrWqr1kKPdT1sF4nzfiv/n5e1gPS/vJy3kcpTnUnmattzC2Q3UC3ikRgY9jzOi8Ys5fsnSiUqm0H7v8SK6Jl3ehzIygXES4BFdm/rx5UvEfp9hbxEq6vyej+dYkc0Otdbkr59BjCwml3A/JC7Mm25y/t3jOklp2ehfdRQdnzW/wPz9DFETJst+FrUlvPfx47jyfm8u3ZXcm79JC18FNSe9Ccsrc6f5wLgfuuC11u6L5ccMu+qRP0yYua0OcVOWGuaO447kzmDyyrSQdr4rOjhlr+mEkUSWHEMRDZR5aZiEKL3m97DrfIec57pmzBK8pioU5OeSCOaQozCXOXse93bl0pnfyN3No4S2G3AzJZoR2z9wsevIhmK60eD7a4nmGK3ID6KOPnqGecVjuG4zPaIIaZf+4pljA1xrWwThKQjNbxYImwMeHUYT7rLKFz84he3sfjk1634fLUU5a/M8XfCJdxWTjhz9LvKDepfUVU1ZboQsJmfh+X8Ey2rJlpFOsTf56m4K+9fNtQbVN84bmyBycAEuT3mNEmKvcj25FOfrG06mnlWvMZKEvkmrD1p255YV+pc3EDkqZtugRKU1pkz/dFlFSyjNzuvAx+kvoy3oxbj2JOxslLsNOPVnwyQgQaxpphl7Q46jgB6mN+gDbTvPP8BjRBnzjXbeau20jkAV2Khk7sLuNFGsdqFYzEFOBdoY7EmY6E0t0JEKKEv1StD0Y6uzvDEl2SvlyVFFC8c5ELPOJ8mpnKNiOz1jsvbF4w9jYhs+zZHFxYbG4cBlLSL8Vz1h3Wpn4vKoV7VCOCypRM5mwQqp0nNIRtapdCSw2s1hsGu3Kp7DYSiSsqBL8VLDDMKve8lafmFzQ6hMTrmX/HkddHUOtTSBqHuZOwXim6elbPnn2CxTZmTy6aXb+WTxwduY0fXga/RILevY3mDmwbr6pQNaqhpEyjBcw1klFo/DB3cl5Se8JTO5m0Q9djKl7ixGGxWrU2wz3eKNYxM7IwrA7zGKd5LxN+HyWHyrdxdIDzyQ/hpXxf6x5qDYWNqLqmJvFHPhXv1LWb/C6/5zDbK55fs10bWy/z+zlalyjeRIwVyOEQ9sZqdKQoSKzO5lrSr0lc63MhduSt3sfeB8lQfGuuCN5B/nZHEPw87kG9pnbsdXOZquld6Tu8DEb4prt5JmWrS00z2yYbR3Ey2Hs8xXfLPvcqjYGMe46na6Y3jFzgdk9tPi4k8f7CqW1Ywuqhfji9eQZx33U+bZzTXLlDadonfYRnxlVjy9w+/0lwxiz9peMml5EjwSVmQtHHnOcGF2ZnP5uha6PTG+14ba8d16RfbmBkeRULz0+Of0dFW4reOdG/ArlMovjcC0P7F8L65t5jg7fdxy8rpl7kwGouzE/hiuIDVo0pIHWUXujeeRUENcctOAb2HYFu7wtpUV5Z7iQipUMiBXN13dkdjSchfnScLEtVowZpdgMJZ7GP77Q4SzphHLeTkCqJ5nq9n4L8Vcw84h2lpfsTaRaey0Hr6H/0HOXkBHNrzkkDJkqjZot+bv5TG2G4TAzfnStLgf4cNLUFP37mqzpqSgvB3R/muUH/Gn+qxKQAMEmQKwTjjoK2k2qe38IBHx8j7JO3tw/N86exTUBpfNIskF1b5apIE7/MQRZw3uDrpueCtFL55HPqO4tOiR0780QNaTpt5Uy18Lcu6iD8sA2H/MzK2KHEpVG/qAVkeu8d3uTluJMLOjI9cL7ncmu3okBJRXrG82aJnmjU6lfLjz9tHDxsNLrFk3z//vB/wY/CK24ZyfGdBxQDHoMjN2NmoGezajRIkw/67xQ3hnvS3y69Kyd6D/b2Vsgl7j/SK50nzvyi0dBwn156ZF/BVn3Wgwx/fhq1yfii3H0sCv+cxHGoancaOFBARrwyFyLed5h0fWsrCNglzd2hUOKrpsk9JCBw5ysPc3oZBYq+7TzOfiRt6iL0CQLjEOtuLK57gRKeif6iDF/3cdzq5jHNPxvfEgPEe2Zj3sqDVsS8IK5RYfKYjWbbgTY9vZOW9d7RkZ7IpGe0ZEr4zitpf3WptRmb+/G1EaSi0civSMjvX56Rdx3Du4jh8iEL21NbnWfR7cBj3jvp0A7F76W9M4nu+MzFTH924TvXq7clNz04cbkRtDsmYF7dP1v4z5NvL32rBb3x/0WxNqavB17T22FL3vvJ0F1n/W7b/mJx9BPMN1V0AbG2A6gjAsz8qAjStCphMxGCyEc9L0AiYGR9N7e4n3F+xgkuAQk5z1v+3vvwar3vHOubPF68fwcbIdoEoPzh7yPvb/yq17q3eFXe+/b+Vad3HzuQNx/p2/zwmyv1oZ+lDCq242KDm/CrqQ35i1OwhNduglXs9dRliwmefe3JTNC7JaP3QV/2M//w6CDRsu6E9gf8w7lmuI7DGd5d7m/hhO9B+EPcxz7px3Hae6/PEqPoR0t+6wjGQ2bMqpJ7EJ9BZuW+BLvXkEu1twbNT9N0RIhp2jt9HiY/i68Bemc9+u9kMl7v36Xnj/9U4jmWzjnGfo1OrS/79ZKBOz14BGcmTe8yK8+OVqSlCg5VXM305A2/aHmpxEa1qY/SNHjm+PjyK/56bv0Ahxfz78Okznv9tf89Ecwmfe2+fj8Nbp+/1r9efgj44rpYlylO0a2q+6qJC3RDtbzR36X/+Sv0rdFyJMXyOpP7P3nuBLDI80voyqtr1YqrXd2sX0h/4PT75dKL5dK55VKMFIsnlcsvlwsnlsq3TN9Dv3G9PX0hOmHyBG3zf55LnzHW1mCSSbbOPbtZAvKUwoj8iO5y/1vapt4GEOF/KDQRF2WbbEzdzrIjlMGESUN2sUBfwPFjDUPenFG7KTWP8xHlySJQrMuO83CN7NZ3d9hEaUMNH1ZebAm+huoWAtEsS9TqtVK2V6R3OomEoVCwsiKlIrZc6VSVJ1Xf36gZOU66kY4WbDEKx6T1Y5iAAFyQhZBDsSCEUGOxWW+ZsW78/F0UFZj5kBnwa7UQQwmdNsM/y7dXjuqWs6UVhT6C3ZU1uWoDVvLkbDhvbUzNBzXejqyCV23daUvG8ukEwE7ocWjyqcqgmyHgqoRjLTbiYjZbmghMZCPt/eH7aFoKGr3ykJT5neTK2fZVu5AcIXqVZmBcrZe1A28yJUtcI1Jy1yfU0ImTh2A3YWmcx727oKzSAYV7sQZnPxt8p2WvFSbmGzmz2DfgNXZjp3Fvq9qHufbqr/17X+TUSkjHyfoX0zfPXPxhZHrj23viHcRx8i1JXUzGuvJFHL93Un2cVS8sxLLZxdfTR5yzsQ/7zblsccEaofLJKcYhASURNv6k5XTNywMK5RYYacQMgj9hxl79SS5a0YvmE2BlsieSDdM30LHp/8Nr1vohu8uI2HvXljT4a1s+fmbyG+4dv/71HJFAZWwtGKwcw47Bey7vZmbIWExkEuIFISTzgElHKJnfan8DaKEg+TU8yCkheC09SQYVsi1lYsvJEoyKJEu92UxCCg1y72nIvAZUYKA6P0j+ZQkByX372CRGJAk73oVRr0HRGkmVvgX+guaR2+5kFvCncCtQe628BhirkZ58GAsJvkPTcajBjRmIBscvI3lYFFldt39QkJzWn8hZWuyrst9RTPWlqmgBTaey3cx6NZAg2w+l5+HkpLwHGaXEX398K7UoxHFOz3xWuLniNgObCD294/3wdtWstCvB6PRqG7OoK5i9sfJ1kZO3sn+KJUbynXmXa+fyWI/ga2pv5cjpD3/QvIF6+A4sEUT5NPT4CF/o2g92ll0AILZDT3si+cmMMCAoLUitCoqOTgLTHjNaydbzEWZQmI/Sngw3sc8ifv7g313/1IEDvB1yZHOMQ1JStqYfwBSjPd928a3g2DGeN//A1Q5+UoAeJxjYGRgYADiiy6zFeP5bb4ycLMwgMCjNzXqMPr/3//1LIzMzUAuBwMTSBQAT90McwAAAHicY2BkYGBu+N/AEMPi9//v//8sjAxAERTgCgCodAb3eJxjYWBgYMGL///FL08F7Edj80nEAKLvA18AAAAAAAAARACQAMIA2gD+AS4BngIOAkYCagLSAwYDcgPSBAwEjgTIBboGmAf2CBwJAAlsCagJ/go4CnALCgvsDAAMFAxIDHQMggykDPQNjg3eDjgO2A96EA4QjhDuESYRVBG2EgQSLhJcEv4TJBOgFDoUfhSgFNQVAhVKFWoVqBZOFoIW1hbyFzwXxhgYeJxjYGRgYHBl+M7AxwACTEDMBYQMDP/BfAYAKPICYQB4nIWSvWrDMBSFj/JXmkApLbSroJChBednKWQNJFDoEmjW4DhynGBbjqwk5C36Dn2UTn2J7n2Crj1x1MVLLCS+e3SPrq4wgBt8Q+D03XKeWOCa0YkruMCD4yr1R8c18sBxHS28OG5Qf3PcxBOU4xZPfOcJonbJqI0PxwISX44ruMKP4yr1X8c1SHHvuI478ey4Qf3VcRNTkThuoS0+h0b5Vi3k/CBXgU5DndpoE0S+sbOF8fdW63iiltvYN2W5HE+VyVc6lT2vW94aq1SZ/zL5btm3NpSh0YkcsZ6KYy0zo9cqsF5kbTbodEKne4FOMIThA/mwXBdseI4D1xUCaKQIi9UiwoZKxDzDaMZMQ96TNUeMCd1LbEnHjHPZ5/anPM0g5y2O1SV68NA96xrTlRbOcjc5drxdn6plR5LT0JGQRq4/RX9MlsiKvTWVgLrHekdXxh+twxGW8r3inZI/1Z+KOgAAAHicbVLXctswENQ6ltUsy5JbnN67kthO783JSx4yk7xzQBIiYVOAhGKVrw+KLMUzwQzJvcPisLfH0lIprHrp/+sQSziHZZSxggqqqKGOBlbRxBpaWEcbHWxgE1vYxg7OYxcXcBGXcBlXcBXXcB03cBO3cBt3cBf3cB8P8BCP0MVjPMFT7GEfB3iG53iBl3iF13iDt3iH9/iAj/iEz/iCr/iGQ3wvrRheiOR42b1qMcsiIqUYdWKhteh3fdBVomCp3ST82BCebWtjsYhUbtiA8UzldGz3WkOjcubQkd1NTZXxnj3IaXPKNIspO3JcWnPRhHBFy7khMatoI1LBsxV7iid0fV6cTX2x5THrmdW+rWiDEeVTVpkFWz3KYsHJkCmTmqkpmMqtjHnWyktyuoiHth7PNubxNBdm6O9ou7szOhPuMs0fokgp/00TzQRf+0VlQrkmGf1pG9ohXcfJBiwhSW7muGHPZ7TnZLKmbcBVDVErDix3gXt2Z13+k9bWg5SIeirJiCWCR3sLuN/QQhSaDTQd68qfgKu2dGYHwlqOFw0NsV+eFbTsp1b1WSKTmgduEAFJMlE1aRvz5A2fGxBJioIWnqYqimptrWpY1iQpaBQzvuZ5WlKeOk7Hh5k3SQWTVkOKcNdz0DSY29b08Yic0JjwNFAlVQtVrrPNM1oSO0xOi8b8ZH/UnIlgXno70CVL6BluwqQVHbhq0vdc72WUu/uq7kVktHcK9k/BQVmagsq6L+mtaJ5Qqe1kgzE1p8JTgrmxGG+HupSk9o8VxtohVRTrmTTvdfC0vRCgaNa3rpRKfwGo+WDiAAA="},function(t,e,a){t.exports=a.p+"cc5fe52e993d026ad9d4d1d2c74e193b.ttf"},function(t,e,a){t.exports=a.p+"fe6384d07f1824fc181dea90fcd3278b.woff2"},function(t,e,a){t.exports=a.p+"30d38978d6dc53ca392176565785115c.woff"},function(t,e){t.exports=function(t,e,a,i){var r,n=t=t||{},o=typeof t.default;"object"!==o&&"function"!==o||(r=t,n=t.default);var s="function"==typeof n?n.options:n;if(e&&(s.render=e.render,s.staticRenderFns=e.staticRenderFns),a&&(s._scopeId=a),i){var l=Object.create(s.computed||null);Object.keys(i).forEach(function(t){var e=i[t];l[t]=function(){return e}}),s.computed=l}return{esModule:r,exports:n,options:s}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{staticClass:"left"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"AAPL.usa","background-color":"#191919","text-color":"#dee4eb","active-text-color":"#ff6900","unique-opened":!0},on:{select:t.handleSelect,open:t.handleOpen,close:t.handleClose}},t._l(t.NavMenuAry,function(e){return a("el-submenu",{key:e.Title,attrs:{index:e.Title}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("span",[t._v(t._s(e.Title))])]),t._v(" "),t._l(e.Sub,function(e){return a("el-menu-item",{key:e.Code,attrs:{index:e.Code}},[t._v(t._s(e.Name))])})],2)}),1)],1),t._v(" "),a("div",{ref:"right",staticClass:"right"},[a("div",{ref:"rightTab",staticClass:"rightTab"},[a("div",{staticClass:"btn showMinute",class:{active:"minute"==t.chartType},on:{click:function(e){return t.changeRightContent("minute")}}},[t._v("åæ¶å¾")]),t._v(" "),a("div",{staticClass:"btn showKline",class:{active:"kline"==t.chartType},on:{click:function(e){return t.changeRightContent("kline")}}},[t._v("Kçº¿å¾")])]),t._v(" "),a("div",{ref:"rightContent",staticClass:"rightContent"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"minute"==t.chartType,expression:'chartType == "minute"'}],staticClass:"contentBox"},[a("div",{ref:"minute_periodWrap",staticClass:"periodWrap"},[a("div",{staticClass:"btnGroup"},t._l(t.MinuteDayMenu,function(e,i){return a("div",{key:e.ID,staticClass:"btn",class:{active:t.MinuteDayIndex==i},on:{click:function(a){return t.OnClickMinuteDayMenu(i,e)}}},[t._v(t._s(e.Name))])}),0)]),t._v(" "),a("div",{ref:"kline",staticClass:"hqchart",attrs:{id:"hqchart_minute"}}),t._v(" "),a("div",{ref:"minute_indexWrap",staticClass:"indexWrap"},[a("div",{staticClass:"btnGroup"},t._l(t.MinuteIndexMenu,function(e){return a("div",{key:e.ID,staticClass:"btn",on:{click:function(a){return t.changeChartIndex(e.ID)}}},[t._v(t._s(e.Name))])}),0)]),t._v(" "),a("div",{ref:"minute_statementWrap",staticClass:"statementWrap"},[t._v("\n                    ééå£°æï¼æ¬é¡µé¢æææ°æ®æ¥èªäºèç½æèªå¨çæçæµè¯æ°æ®,ä»ç¨äºå­¦ä¹ HQChartå¾å½¢åºä½¿ç¨,ä¸ææä»»ä½æèµä»·å¼ä¿¡æ¯ãå¦ä½¿ç¨èä¾æ®æ¬ç½ç«æä¾çä¿¡æ¯ãèµæåå¾è¡¨è¿è¡éèãè¯å¸ç­æèµæé æççäºä¸æ¬ç½ç«æ å³ã\n                ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"kline"==t.chartType,expression:'chartType == "kline"'}],staticClass:"contentBox"},[a("div",{ref:"kline_periodWrap",staticClass:"periodWrap kline_periodWrap"},[a("div",{staticClass:"btnGroup"},t._l(t.KLinePeriodMenu,function(e,i){return a("div",{key:e.ID,staticClass:"btn",class:{active:t.KLinePeriodIndex==i},on:{click:function(a){return t.OnClickKLinePeriodMenu(i,e)}}},[t._v(t._s(e.Name))])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.IsShowRightMenu,expression:"IsShowRightMenu"}],staticClass:"btnGroup"},t._l(t.KLineRightMenu,function(e,i){return a("div",{key:e.ID,staticClass:"btn",class:{active:t.KLineRightIndex==i},on:{click:function(a){return t.OnClickKLineRightMenu(i,e)}}},[t._v(t._s(e.Name))])}),0)]),t._v(" "),a("div",{ref:"kline2",staticClass:"hqchart",attrs:{id:"hqchart_kline"}}),t._v(" "),a("div",{ref:"kline_indexWrap",staticClass:"indexWrap"},[a("div",{staticClass:"btnGroup"},t._l(t.KLineIndexMenu,function(e){return a("div",{key:e.ID,staticClass:"btn",on:{click:function(a){return t.ChangeKLineIndex(e)}}},[t._v(t._s(e.Name))])}),0)]),t._v(" "),a("div",{ref:"kline_statementWrap",staticClass:"statementWrap"},[t._v("\n                    ééå£°æï¼æ¬é¡µé¢æææ°æ®æ¥èªäºèç½æèªå¨çæçæµè¯æ°æ®,ä»ç¨äºå­¦ä¹ HQChartå¾å½¢åºä½¿ç¨,ä¸ææä»»ä½æèµä»·å¼ä¿¡æ¯ãå¦ä½¿ç¨èä¾æ®æ¬ç½ç«æä¾çä¿¡æ¯ãèµæåå¾è¡¨è¿è¡éèãè¯å¸ç­æèµæé æççäºä¸æ¬ç½ç«æ å³ã\n                ")])])])])])},staticRenderFns:[]}},function(t,e,a){var i=a(217);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(266)("1e2dcb37",i,!0)},function(t,e,a){function i(t){for(var e=0;e<t.length;e++){var a=t[e],i=u[a.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](a.parts[r]);for(;r<a.parts.length;r++)i.parts.push(n(a.parts[r]));i.parts.length>a.parts.length&&(i.parts.length=a.parts.length)}else{for(var o=[],r=0;r<a.parts.length;r++)o.push(n(a.parts[r]));u[a.id]={id:a.id,refs:1,parts:o}}}}function r(){var t=document.createElement("style");return t.type="text/css",C.appendChild(t),t}function n(t){var e,a,i=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(i){if(d)return D;i.parentNode.removeChild(i)}if(m){var n=f++;i=c||(c=r()),e=o.bind(null,i,n,!1),a=o.bind(null,i,n,!0)}else i=r(),e=s.bind(null,i),a=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else a()}}function o(t,e,a,i){var r=a?"":i.css;if(t.styleSheet)t.styleSheet.cssText=p(e,r);else{var n=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(n,o[e]):t.appendChild(n)}}function s(t,e){var a=e.css,i=e.media,r=e.sourceMap;if(i&&t.setAttribute("media",i),r&&(a+="\n/*# sourceURL="+r.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}var l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var h=a(267),u={},C=l&&(document.head||document.getElementsByTagName("head")[0]),c=null,f=0,d=!1,D=function(){},m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,a){d=a;var r=h(t,e);return i(r),function(e){for(var a=[],n=0;n<r.length;n++){var o=r[n],s=u[o.id];s.refs--,a.push(s)}e?(r=h(t,e),i(r)):r=[];for(var n=0;n<a.length;n++){var s=a[n];if(0===s.refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete u[s.id]}}}};var p=function(){var t=[];return function(e,a){return t[e]=a,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t,e){for(var a=[],i={},r=0;r<e.length;r++){var n=e[r],o=n[0],s=n[1],l=n[2],h=n[3],u={id:t+":"+r,css:s,media:l,sourceMap:h};i[o]?i[o].parts.push(u):a.push(i[o]={id:o,parts:[u]})}return a}}]),[145]);
//# sourceMappingURL=index.js.map?153eb65f67fffd142158